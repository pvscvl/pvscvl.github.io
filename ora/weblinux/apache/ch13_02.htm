<?label 13.2. Apache's Security Precautions?><html><head><title>Apache's Security Precautions (Apache: The Definitive Guide)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Ben Laurie and Peter Laurie" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="1565925289L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Apache: The Definitive Guide" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Apache: The Definitive Guide" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch13_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">Apache: The Definitive Guide</a></td><td width="172" valign="top" align="right"><a href="ch13_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">13.2. Apache's Security Precautions</h2>





<p>
<a name="INDEX-1089" />
<a name="INDEX-1090" />
<a name="INDEX-1091" />Apache
addresses these problems as follows:</p>





<ul><li><p>When Apache starts, it connects to the network and creates numerous
copies of itself. These copies immediately change identity to that of
a safer user, in the case of our examples, the feeble
<em class="emphasis">webuser</em>s of <em class="emphasis">webgroup</em> (see
<a href="ch02_01.htm">Chapter 2, "Our First Web Site"</a>). Only the original process retains the
superuser identity, but only the new processes service network
requests. The original process never handles the network; it simply
oversees the operation of the child processes, starting new ones as
needed and killing off excess ones as network load decreases.</p></li><li><p>
<a name="INDEX-1092" />
<a name="INDEX-1093" />
<a name="INDEX-1094" />Output to shells is carefully tested
for dangerous characters, but this only half solves the problem. The
writers of CGI scripts (see <a href="ch04_01.htm">Chapter 4, "Common Gateway Interface (CGI) "</a>) must be
careful to avoid the pitfalls too. The foregoing represents the
official Apache line. However, the whole scheme was inherited from
NCSA, and, in our opinion, is completely misguided. The problem is
that the dangerous characters are protected by backslashes, which, of
course, disappear once they have been interpreted by the shell. If
that shell then calls another one and passes them on, their dangerous
behavior reappears.</p></li></ul>
<p>Internal users present their own problems, the main one being that
they want to write CGI scripts to go with their pages. In a typical
installation, the client, dressed as Apache
(<em class="emphasis">webuser</em> of <em class="emphasis">webgroup</em>) does
not have high enough permissions to run those scripts in any useful
way. This can be solved with <em class="emphasis">suEXEC</em> (see the
section <a href="ch04_07.htm">Section 4.7, "suEXEC on Unix"</a> in <a href="ch04_01.htm">Chapter 4, "Common Gateway Interface (CGI) "</a>).</p>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch13_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch13_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">13. Security</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">13.3. Binary Signatures, Virtual Cash</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>