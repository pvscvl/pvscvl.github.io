<?label 3.4. Other Directives?><html><head><title>Other Directives (Apache: The Definitive Guide)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Ben Laurie and Peter Laurie" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="1565925289L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Apache: The Definitive Guide" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Apache: The Definitive Guide" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch03_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">Apache: The Definitive Guide</a></td><td width="172" valign="top" align="right"><a href="ch03_05.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">3.4. Other Directives</h2>





<p>
<a name="INDEX-250" />Other
housekeeping directives are listed here.</p>





<a name="ch03-27929" /><div class="sect2">
<h3 class="sect2">3.4.1. ServerName</h3>





<blockquote><pre class="code">ServerName <em class="replaceable">hostname</em> 
Server config, virtual host</pre></blockquote>





<p><tt class="literal">ServerName</tt>
<a name="INDEX-251" />
<a name="INDEX-252" /> gives the hostname of the server to use
when creating redirection URLs, that is, if you use a
&lt;<tt class="literal">Location&gt;</tt> directive or access a directory
without a trailing "/".</p>
</div>
















<a name="ch03-29279" /><div class="sect2">
<h3 class="sect2">3.4.2. UseCanonicalName</h3>





<blockquote><pre class="code"><a name="INDEX-253" />UseCanonicalName <em class="replaceable">on|off</em>
Default: on 
Server config, virtual host, directory, .htaccess</pre></blockquote>





<p>This directive controls how Apache forms URLs that refer to itself,
for example, when redirecting a request for <em class="emphasis">http://www.domain.com/some/directory</em> to the correct <em class="emphasis">http://www.domain.com/some/directory/</em> (note the trailing "/" ). If
<tt class="literal">UseCanonical-Name</tt> is <tt class="literal">on</tt> (the
default), then the hostname and port used in the redirect will be
those set by <tt class="literal">ServerName</tt> and
<tt class="literal">Port</tt>. If it is <tt class="literal">off</tt>, then the
name and port used will be the ones in the original request.</p>





<p>One instance where this directive may be useful is when users are in
the same domain as the web server (for example, on an intranet). In
this case, they may use the "short" name for the server
(<em class="emphasis">www</em>, for example), instead
of the fully qualified domain name (<em class="emphasis">www.domain.com</em>, say). If a user types a
URL such as <em class="emphasis">http://www/somedir</em>
(without the trailing slash), then, with
<tt class="literal">UseCanonicalName</tt> switched
<tt class="literal">on</tt><em class="emphasis">,</em> the user will be directed
to <em class="emphasis">http://www.domain.com/somedir/</em>, whereas with
<tt class="literal">UseCanonicalName</tt> switched <tt class="literal">off</tt>,
he or she will be redirected to <em class="emphasis">http://www/somedir/</em>. An obvious case in which
this is useful is when user authentication is switched on: reusing
the server name that the user typed means they won't be asked
to reauthenticate when the server name appears to the browser to have
changed. More obscure cases relate to name/address translation caused
by some firewalling techniques.</p>
</div>
















<a name="ch03-18345" /><div class="sect2">
<h3 class="sect2">3.4.3. ServerAdmin</h3>





<blockquote><pre class="code">ServerAdmin <em class="replaceable">email_address</em>
Server config, virtual host</pre></blockquote>





<p><tt class="literal">ServerAdmin</tt>
<a name="INDEX-254" /> <a name="INDEX-255" />
<a name="INDEX-256" />
<a name="INDEX-257" /> gives Apache an
<em class="replaceable">email_address</em> for automatic pages
generated when some errors occur. It might be sensible to make this a
special address such as <em class="emphasis">server_probs@butterthlies.com</em>.</p>
</div>
















<a name="ch03-7-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.4. ServerSignature</h3>





<blockquote><pre class="code"><a name="INDEX-258" />ServerSignature<em class="replaceable"> </em>[off|on|email]
Default: off
Directory, .htaccess</pre></blockquote>





<p>This directive allows you to let the client know which server in a
chain of proxies actually did the business.
<tt class="literal">ServerSignature</tt> <tt class="literal">on</tt> generates a
footer to server-generated documents that includes the server
version number and the <tt class="literal">ServerName</tt> of the virtual
host. <tt class="literal">ServerSignature</tt> <tt class="literal">email</tt>
additionally creates a <tt class="literal">mailto:</tt> reference to the
relevant <tt class="literal">ServerAdmin</tt> address.</p>
</div>
















<a name="ch03-8-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.5. ServerTokens</h3>





<blockquote><pre class="code"><a name="INDEX-259" />
<a name="INDEX-260" />
<a name="INDEX-261" />
<a name="INDEX-262" />ServerTokens<em class="replaceable"> </em>[min(imal)|OS|full]
Default: full
Server config</pre></blockquote>





<p>This directive controls the information about itself that the server
returns:</p>





<dl>
<dt><b><tt class="literal">min(imal)</tt></b></dt>
<dd><p>Server returns name and version number, for example, <tt class="literal">Apache
v1.3</tt></p></dd>





<dt><b><tt class="literal">OS</tt></b></dt>
<dd><p>Server sends operating system as well, for example, <tt class="literal">Apache
v1.3 (Unix)</tt></p></dd>





<dt><b><tt class="literal">full</tt></b></dt>
<dd><p>Server sends the previously listed information plus information about
compiled modules, for example, <tt class="literal">Apache</tt>
<tt class="literal">v1.3</tt> <tt class="literal">(Unix)</tt>
<tt class="literal">PHP/3.0</tt> <tt class="literal">MyMod/1.2</tt></p></dd>

</dl>
</div>
















<a name="ch03-9-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.6. ServerAlias</h3>





<blockquote><pre class="code"><a name="INDEX-263" />
<a name="INDEX-264" />ServerAlias <em class="replaceable">name1 name2 name3</em> ...
Virtual host</pre></blockquote>





<p><tt class="literal">ServerAlias</tt> gives a list of alternate names
matching the current virtual host. If a request uses HTTP 1.1, it
arrives with <tt class="literal">Host:</tt> <tt class="literal">server</tt> in
the header and can match <tt class="literal">ServerName</tt>,
<tt class="literal">ServerAlias</tt>, or the <tt class="literal">VirtualHost</tt>
name.</p>
</div>
















<a name="ch03-32661" /><div class="sect2">
<h3 class="sect2">3.4.7. ServerPath</h3>





<blockquote><pre class="code"><a name="INDEX-265" />
<a name="INDEX-266" />
<a name="INDEX-267" />
<a name="INDEX-268" />ServerPath <em class="replaceable">path</em>
Virtual host</pre></blockquote>





<p>In HTTP/1.1 you can map several hostnames to the same IP address, and
the browser distinguishes between them by sending the
<tt class="literal">Host</tt> header. But it was thought there would be a
transition period during which some browsers still used HTTP/1.0 and
didn't send the <tt class="literal">Host</tt> header.<a href="#FOOTNOTE-28">[28]</a> So <tt class="literal">ServerPath</tt> lets the same site be accessed through
a path instead.</p><blockquote>




<a name="FOOTNOTE-28" /><p>[28]Note that this transition period was almost over before it
started because many browsers sent the <tt class="literal">Host</tt> header
even in HTTP/1.0 requests. However, in some rare cases, this
directive may be useful.</p>




</blockquote>





<p>It has to be said that this directive often doesn't work very
well because it requires a great deal of discipline in writing
consistent internal HTML links, which must all be written as relative
links to make them work with two different URLs. However, if you have
to cope with HTTP/1.0 browsers that don't send
<tt class="literal">Host</tt> headers accessing virtual sites, you
don't have much choice.</p>





<p>For instance, suppose you have
<em class="emphasis">site1.somewhere.com</em> and
<em class="emphasis">site2.somewhere.com</em> mapped to the same IP
address (let's say 192.168.123.2), and you set up the
<em class="filename">httpd.conf</em> file like this:</p>





<blockquote><pre class="code">&lt;VirtualHost 192.168.123.2&gt;
ServerName site1.somewhere.com
DocumentRoot /usr/www/site1
ServerPath /site1
&lt;/VirtualHost&gt;

&lt;VirtualHost 192.168.123.2&gt;
ServerName site2.somewhere.com
DocumentRoot /usr/www/site2
ServerPath /site2
&lt;/VirtualHost&gt;</pre></blockquote>





<p>Then an HTTP/1.1 browser can access the two sites with URLs
<em class="emphasis">http://site1. somewhere.com /</em> and
<em class="emphasis">http://site2.somewhere.com /</em>. Recall that
HTTP/1.0 can only distinguish between sites with different IP
addresses, so both of those URLs look the same to an HTTP/1.0
browser. However, with the above setup, such browsers can access
<em class="emphasis">http://site1.somewhere.com/site1</em> and
<em class="emphasis">http://site1.somewhere.com/site2</em> to see the
two different sites (yes, we did mean
<em class="emphasis">site1.somewhere.com</em> in the latter; it could have
been <em class="emphasis">site2.somewhere.com</em> in either, because they
are the same as far as an HTTP/1.0 browser is concerned).</p>
</div>
















<a name="ch03-10-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.8. ServerRoot</h3>





<blockquote><pre class="code"><a name="INDEX-269" />
<a name="INDEX-270" />
<a name="INDEX-271" />
<a name="INDEX-272" />
<a name="INDEX-273" />ServerRoot <em class="replaceable">directory</em>
Default <em class="replaceable">directory</em>: /usr/local/etc/httpd
Server config</pre></blockquote>





<p><tt class="literal">ServerRoot</tt> specifies where the subdirectories
<em class="filename">conf</em> and <em class="filename">logs</em> can be found.
If you start Apache with the <tt class="literal">-f </tt>(file) option, you
need to include the <tt class="literal">ServerRoot</tt> directive. On the
other hand, if you use the <tt class="literal">-d </tt>(directory) option,
as we do, this directive is not needed.</p>
</div>
















<a name="ch03-11-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.9. PidFile</h3>





<blockquote><pre class="code"><a name="INDEX-274" />PidFile <em class="replaceable">file</em>
Default <em class="replaceable">file</em>: logs/httpd.pid
Server config</pre></blockquote>





<p>A useful piece of information about an executing process is its PID
number. This is available under both Unix and Win32 in the
<tt class="literal">PidFile</tt>, and this directive allows you to change
its location. By default, it is in <em class="filename">...
/logs/httpd.pid</em>. However, only Unix allows you to do
anything easily with it; namely, to kill the process.</p>
</div>
















<a name="ch03-12-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.10. ScoreBoardFile</h3>





<blockquote><pre class="code"><a name="INDEX-275" />ScoreBoardFile <em class="replaceable">filename</em>
Default: ScoreBoardFile logs/apache_status 
Server config</pre></blockquote>





<p>The <tt class="literal">ScoreBoardFile</tt> directive is required on some
architectures in order to place a file that the server will use to
communicate between its children and the parent. The easiest way to
find out if your architecture requires a scoreboard file is to run
Apache and see if it creates the file named by the directive. If your
architecture requires it, then you must ensure that this file is not
used at the same time by more than one invocation of Apache.</p>





<p>If you have to use a <tt class="literal">ScoreBoardFile</tt>, then you may
see improved speed by placing it on a RAM disk. But be aware that
placing important files on a RAM disk involves a certain amount of
risk.</p>





<p><img src="figs/unix_icon.gif" alt="Figure 3.4.10" />   Apache 1.2 and above: Linux 1.x and SVR4 users might be able to add
<tt class="literal">-DHAVE_SHMGET</tt>
<tt class="literal">-DUSE_SHMGET_SCOREBOARD</tt> to the
<tt class="literal">EXTRA_CFLAGS</tt> in your Config file. This might work
with some 1.x installations, but not with all of them. (Prior to
1.3b4, <tt class="literal">HAVE_SHMGET</tt> would have sufficed.)</p>
</div>
















<a name="ch03-13-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.11. CoreDumpDirectory</h3>





<blockquote><pre class="code"><a name="INDEX-276" />CoreDumpDirectory <em class="replaceable">directory</em>
Default: &lt;serverroot&gt;
Server config</pre></blockquote>





<p><img src="figs/unix_icon.gif" alt="Figure 3.4.11" />   Specifies a directory where Apache tries to dump core. The default is
the <em class="emphasis">ServerRoot</em> directory, but this is normally
not writable by Apache's user. This directive is useful only in
Unix, since Win32 does not dump a core after a crash.</p>
</div>
















<a name="ch03-14-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.12. SendBufferSize</h3>





<blockquote><pre class="code"><a name="INDEX-277" />
<a name="INDEX-278" />
<a name="INDEX-279" />SendBufferSize &lt;number&gt;
Default: set by OS
Server config</pre></blockquote>





<p>Increases the send buffer in TCP beyond the default set by the
operating system. This directive improves performance under certain
circumstances, but we suggest you don't use it unless you
thoroughly understand network technicalities.</p>
</div>
















<a name="ch03-15-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.13. LockFile</h3>




<blockquote><pre class="code"><a name="INDEX-280" />LockFile &lt;path&gt;<em class="replaceable">directory</em>
Default: logs/accept.lock
Server config</pre></blockquote>





<p><img src="figs/unix_icon.gif" alt="Figure 3.4.13" />   When Apache is compiled with
<tt class="literal">USE_FCNTL_SERIALIZED_ACCEPT</tt> or
<tt class="literal">USE_FLOCK_SERIALIZED_ACCEPT</tt>, it will not start
until it writes a lock file to the local disk. If the
<em class="emphasis">logs</em> directory is NFS mounted, this will not be
possible. It is not a good idea to put this file in a directory that
is writable by everyone, since a false file will prevent Apache from
starting. This mechanism is necessary because some operating systems
don't like multiple processes sitting in
<tt class="literal">accept()</tt> on a single socket (which is where Apache
sits while waiting). Therefore, these calls need to be serialized.
One way is to use a lock file, but you can't use one on an
NFS-mounted directory.</p>
</div>
















<a name="ch03-30552" /><div class="sect2">
<h3 class="sect2">3.4.14. KeepAlive</h3>





<blockquote><pre class="code"><a name="INDEX-281" />
<a name="INDEX-282" />
<a name="INDEX-283" />KeepAlive <em class="replaceable">number</em>
Default <em class="replaceable">number</em>: 5
Server config</pre></blockquote>





<p>The chances are that if a user logs on to your site, he or she will
reaccess it fairly soon. To avoid unnecessary delay, this command
keeps the connection open, but only for
<em class="replaceable">number</em> requests, so that one user does not
hog the server. You might want to increase this from 5 if you have a
deep directory structure. Netscape Navigator 2 has a bug that fouls
up keepalives. Apache from v1.2 on can detect the use of this browser
by looking for <tt class="literal">Mozilla/2</tt> in the headers returned
by Netscape. If the <tt class="literal">BrowserMatch</tt> directive is set
(see <a href="ch04_01.htm">Chapter 4, "Common Gateway Interface (CGI) "</a>), the problem disappears.</p>
</div>
















<a name="ch03-16-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.15. KeepAliveTimeout</h3>





<blockquote><pre class="code">KeepAliveTimeout <em class="replaceable">seconds</em>
Default <em class="replaceable">seconds</em>: 15
Server config</pre></blockquote>





<p>
<a name="INDEX-284" />Similarly, to avoid waiting too long
for the next request, this directive sets the number of seconds to
wait for the next request. Once the request has been received, the
<tt class="literal">TimeOut</tt> directive applies.</p>
</div>
















<a name="ch03-17-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.16. TimeOut</h3>





<blockquote><pre class="code">TimeOut <em class="replaceable">seconds</em>
Default <em class="replaceable">seconds</em>: 1200
Server config</pre></blockquote>





<p>
<a name="INDEX-285" />
<a name="INDEX-286" />
<a name="INDEX-287" /> <a name="INDEX-288" />
<a name="INDEX-289" />Sets the maximum time that the server
will wait for the receipt of a request and then its completion block
by block. This directive used to have an unfortunate effect:
downloads of large files over slow connections used to time out. The
directive has, therefore, been modified to apply to blocks of data
sent rather than to the whole transfer.</p>
</div>
















<a name="ch03-18-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.17. HostNameLookups</h3>





<blockquote><pre class="code">HostNameLookups [on|off|double]
Default: off<a href="#FOOTNOTE-29">[29]</a>
Server config, virtual host</pre></blockquote>





<p>
<a name="INDEX-290" />
<a name="INDEX-291" />
<a name="INDEX-292" />
<a name="INDEX-293" />If this directive is
<tt class="literal">on</tt><b class="emphasis-bold">,</b> then every
incoming connection is <em class="emphasis">reverse DNS resolved</em>,
which means that, starting with the IP number, Apache finds the
hostname of the client by consulting the DNS system on the Internet.
The hostname is then used in the logs. If switched
<tt class="literal">off</tt>, the IP address is used instead. It can take a
significant amount of time to reverse resolve an IP address, so for
performance reasons it is often best to leave this
<tt class="literal">off</tt>, particularly on busy servers. Note that the
support program <em class="filename">logresolve</em> is supplied with
Apache to reverse resolve the logs at a later date.<a href="#FOOTNOTE-30">[30]</a></p><blockquote>




<a name="FOOTNOTE-30" /><p>[30]Dynamically allocated IP addresses may not resolve correctly at
any time other than when they are in use. If it is really important
to know the exact name of the client,
<tt class="literal">HostNameLookups</tt> will have to be set to
<tt class="literal">on</tt>.</p>




</blockquote>





<p>The new <tt class="literal">double</tt> keyword supports the double-reverse
DNS test. An IP address passes this test if the forward map of the
reverse map includes the original IP. Regardless of the setting here,
<em class="filename">mod_access</em> access lists using DNS names require
all the names to pass the double-reverse test.</p>
</div>
















<a name="ch03-19-fm2xml" /><div class="sect2">
<h3 class="sect2">3.4.18. Include</h3>





<blockquote><pre class="code">Include <em class="replaceable">filename</em> 
Server config</pre></blockquote>





<p><em class="replaceable">filename </em>
<a name="INDEX-294" /><tt class="literal"> </tt>points to a file
that will be included in the Config file in place of this
directive.<a name="INDEX-295" /></p>
</div>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch03_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch03_05.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">3.3. Block Directives</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">3.5. Two Sites and Apache</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>