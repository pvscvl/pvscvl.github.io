<?label 3. Installation
 and Initial
 Configuration?><html><head><title>Installation
 and Initial
 Configuration (Running Linux)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Running Linux" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch02_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm" /></td><td width="172" valign="top" align="right"><a href="ch03_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h1 class="chapter">Chapter 3. Installation
 and Initial
 Configuration</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4><p>
<a href="ch03_01.htm">Installing the Linux Software</a><br />
<a href="ch03_02.htm">Post-Installation Procedures</a><br />
<a href="ch03_03.htm">Running Into Trouble</a><br /></p></div>

<p>At this point, you should have your Linux distribution and have disk space
set aside for Linux.  In this chapter, we present a general overview of
the installation process.
Each distribution has its own installation instructions,
but armed with the concepts presented here, you should be able to feel

your way through any installation. <a href="appa_01.htm">Appendix A, "Sources of Linux Information"</a>, lists
sources of information for installation instructions and other
help, if you're at a total loss.</p>

<p>Different Linux distributions store files in different locations, which
can make it hard to describe how to administer Linux. For instance, the
same files may be found on Red Hat, SuSE, and Debian systems, but they may
be under the <em class="filename">/etc</em> directory on one system and the <em class="filename">/sbin</em> directory under
another. Gradually, the vendors are standardizing the set of
locations listed in a document called the Filesystem Hierarchy Standard,
but in this book we'll just try to deal with lagging discrepancies by
listing the locations of the most important files in the version of
each major distribution that we checked.</p>

<?troff .sp -.4?><div class="sect1"><a name="x-100-3-sec-install-installing-top" />
<h2 class="sect1">3.1. Installing the Linux Software</h2>

<p><a name="INDEX-710" />
<a name="INDEX-711" />
After resizing your existing partitions to make space for Linux,
you are ready to install the software. Here is a brief overview of the
procedure:</p>

<ol><li><p> Boot the Linux installation media.</p></li><li><p> Run <tt class="command">fdisk</tt> under Linux to create Linux partitions.</p></li><li><p> Run <tt class="command">mke2fs</tt> and <tt class="command">mkswap</tt> to create Linux 
filesystems and swap space.</p></li><li><p> Install the Linux software and configure it.</p></li><li><p> Finally, either install the <span class="acronym">LILO</span> boot loader on 
your hard drive, or create a boot floppy in order to boot your new 
Linux system.</p></li></ol><p />

<p>As we have said, one (or more) of these steps may be automated for you
by the installation procedure, depending on the distribution of Linux
you are using. Please consult your distribution's documentation for specific instructions.</p>

<a name="x-100-3-sec-sysadm-linux-booting" /><div class="sect2">
<h3 class="sect2">3.1.1. Booting Linux</h3>

<p><a name="INDEX-712" />
<a name="INDEX-713" />
<a name="INDEX-714" />
The first step is to boot the Linux installation media. 
In most cases, this is either a boot floppy, which contains
a small Linux system or a bootable <span class="acronym">CD-ROM</span>. Upon
booting the floppy or the <span class="acronym">CD-ROM</span>, you are presented with
an installation menu of some kind that leads you through the steps of
installing the software. On other distributions, you are presented with
a login prompt when booting this floppy. Here, you usually log in as 
root or install to begin the installation process.</p>

<p>The documentation that comes with your particular distribution will explain
what is necessary to boot Linux from the installation media.</p>

<p><a name="INDEX-715" />
<a name="INDEX-716" />
<a name="INDEX-717" />
Most distributions of Linux use a boot floppy that allows you to enter
hardware parameters at a boot prompt to force hardware detection of
various devices. For example, if your <span class="acronym">SCSI</span>
controller is not detected when booting the floppy, you will need to
reboot and specify the hardware parameters (such as I/O address and
<span class="acronym">IRQ</span>) at the boot prompt.  Likewise,
<span class="acronym">IBM</span> PS/1, ThinkPad, and ValuePoint machines do not
store drive geometry in the <span class="acronym">CMOS</span>, so you must
specify it at boot time.</p>

<p>The boot prompt is often displayed automatically when booting the boot
floppy or <span class="acronym">CD-ROM</span>. This is the case for the Red Hat
distribution. With 
distributions that do not show the prompt by default, you need to hold
down the Shift or Control key or press the Scroll Lock key while
booting the floppy or 
<span class="acronym">CD-ROM</span> if you want to enter something at the boot
prompt. If successful, you should see the prompt:
<?troff-ps_indent0?>

<blockquote><pre class="code">boot:</pre></blockquote>


and possibly other messages.
What you are seeing here is a boot prompt presented by
<a name="INDEX-718" />
<span class="acronym">LILO</span> (the LInux
LOader), a program used to boot the Linux operating system and
specify hardware-detection parameters at boot time. After you have installed
Linux, you may wish to install <span class="acronym">LILO</span> on your hard drive, which allows you
to select between Linux and other operating systems (such as
<span class="acronym">MS-DOS</span>) when the system is booted.</p>

<p>At this point you have several options. You can press the Enter key to simply
boot Linux from the floppy with no special parameters. (You should try
this first, and if installation seems to go well, you're all set.) Or,
just wait until the installation proceeds, today's distributions set a timeout
for the boot prompt, and when you do not enter anything for some time, 
they just continue booting. 
Otherwise, you may have to specify hardware-detection parameters at
this boot prompt, to force the system to properly identify the hardware
installed in your system.</p>

<?troff .wcon_off?><p><a name="INDEX-719" />
If you don't want to try any hardware-detection parameters now, just
press Enter at the boot prompt.  Watch the messages as the system
boots. If you have an <span class="acronym">SCSI</span> controller, for example,
<?troff .ne 10?>
you should see a listing of the <span class="acronym">SCSI</span> hosts
detected.  If you see the message:</p>

<blockquote><pre class="code">SCSI: 0 hosts</pre></blockquote>

<p>then your <span class="acronym">SCSI</span> controller was not detected, and you
will have to use the hardware detection procedure we'll describe in a
moment.</p>

<p>Most new distributions often follow a different path of
		choosing hardware. They come with a minimal kernel on the 
<a name="INDEX-720" />
		boot disk and then load so-called <em class="emphasis">kernel
		modules</em> from either a second floppy disk or a
		CD-ROM. In this case, you will probably be dropped into some
		menu where you can select additional modules to be
		probed. Even specifying modules is largely automated: you just
		ask the installation program 
		to probe for SCSI adapters and see whether yours is found. The 
		same goes for Ethernet cards and other devices that are needed 
		for the installation process. Devices that are not
		needed during the installation, such as sound boards, are
		unlikely to be detected at this point of the installation. You 
		will probably be given the option to configure them later.</p>

<p>If the automated hardware detection procedures do not work for you
(which normally is the case only if you have very old, very new or
very unusual hardware), you will have to help Linux a bit by forcing
hardware detection.</p>

<p>To force hardware detection, you must enter the appropriate parameters
at the boot prompt, using the following syntax:

<a name="INDEX-721" />
<a name="INDEX-722" />

<blockquote><pre class="code">linux <em class="replaceable">parameters</em></pre></blockquote></p>

<p>There are many such parameters, some of which are listed below. We
don't expect you to understand what all of these parameters mean or
are used for; rather, you should be able to determine which of these
hardware options corresponds to your own system. For example, if you
have an <span class="acronym">AHA</span>152x-based <span class="acronym">SCSI</span>
controller, and you know that under <span class="acronym">MS-DOS</span> you must
configure the board for a particular I/O address and
<span class="acronym">IRQ</span>, you can use the corresponding option
(<tt class="literal">aha152x=</tt>) here.  In fact, many of these boot
options are simply unnecessary for initial installation. We are
presenting a more comprehensive list here, in one place, as you may
find them useful later on.</p>

<p>One other piece of advice: write down and remember the boot options
you use to get your system running. After you have installed Linux,
you'll need to use the same boot options in order for your hardware to
be properly detected each time you boot. If you install the
<span class="acronym">LILO</span> loader on your hard drive, you can configure
it to automatically use a certain set of boot options so you won't
have to type them each time.
<a name="INDEX-723" /></p>

<dl>
<dt><b><tt class="literal">no387</tt></b></dt><dd><p><a name="INDEX-724" />
<a name="INDEX-725" />
Disables the 80387 math coprocessor; circumvents some buggy 
coprocessors when used in protected mode.</p></dd>


<dt><b><tt class="literal">no-hlt</tt></b></dt><dd><p><a name="INDEX-726" />
<a name="INDEX-727" />
Disables use of the <span class="acronym">HLT</span> instruction; used to place
the <span class="acronym">CPU</span> into a low-power
state when the system is idle. Some early 486DX-100 chips have a problem
using this instruction.</p></dd>


<dt><b><tt class="literal">root=</tt><em class="replaceable">device</em></b></dt><dd><p><a name="INDEX-728" />
<a name="INDEX-729" />
Specifies the device to use as the root filesystem when booting the system.
For initial installation this should not be used; after installaton of the
system you can use this to override the default location of your Linux
root filesystem.</p></dd>


<dt><b><tt class="literal">ro</tt></b></dt><dd><p><a name="INDEX-730" />
<a name="INDEX-731" />
<a name="INDEX-732" />
Mounts the root filesystem in a read-only state; used for
system maintenance.</p></dd>


<dt><b><tt class="literal">lock</tt></b></dt><dd><p><a name="INDEX-733" />
Saves the boot parameters for the future so that you do not have to
enter them each time you are booting the system.</p></dd>


<dt><b><tt class="literal">rw</tt></b></dt><dd><p><a name="INDEX-734" />
Mounts the root filesystem in a read-write state; used for
system maintenance.</p></dd>


<dt><b><tt class="literal">debug</tt></b></dt><dd><p><a name="INDEX-735" />
<a name="INDEX-736" />
Forces the kernel to print verbose debugging messages to the 
console as the system runs.</p></dd>


<dt><b><tt class="literal">ramdisk=</tt><em class="replaceable">kilobytes</em></b></dt><dd><p><a name="INDEX-737" />
<a name="INDEX-738" />
Tells the system to reserve the given number of kilobytes for a ramdisk.
This is often used by installation boot floppies that load an entire
filesystem image into memory. You don't want to use this option for 
initial installation, but if you want to experiment with ramdisks at a
later date, this is the option to use.</p></dd>


<dt><b><tt class="literal">mem=</tt><em class="replaceable">size</em></b></dt><dd><p><a name="INDEX-739" />
<a name="INDEX-740" />
The system <span class="acronym">BIOS</span> in most PCs only reports up to 64 MB
of installed <span class="acronym">RAM</span>;
Linux uses this information to determine the amount of installed
memory. If you have more than 64 MB and use an older kernel, you may
need to use this parameter to allow the rest of system memory to be
used. The size parameter can be 
a number with <tt class="literal">k</tt> or <tt class="literal">M</tt> appended;
for example, <tt class="literal">mem=96M</tt> would specify a system with
96 MB of <span class="acronym">RAM</span> installed. Note that if you tell the
system it has more
memory than is actually installed, Bad Things will eventually happen.</p></dd>


<dt><b><tt class="literal">hd=</tt><em class="replaceable">cylinders</em><tt class="literal">,</tt><em class="replaceable">heads</em><tt class="literal">,</tt><em class="replaceable">sectors</em></b></dt><dd><p><a name="INDEX-741" />
<a name="INDEX-742" />
<a name="INDEX-743" />
<a name="INDEX-744" />
<a name="INDEX-745" />
<a name="INDEX-746" />
Specifies the hard drive geometry for <span class="acronym">IDE</span> and
standard ST-506 drives (not <span class="acronym">SCSI</span> drives).
Required for systems such as the <span class="acronym">IBM</span> PS/1, ValuePoint, and ThinkPad. 
For example, if your drive has 683 cylinders, 16 heads, and 32 sectors 
per track, use:
<blockquote><pre class="code">ramdisk hd=683,16,32</pre></blockquote>

This option can also be used as <tt class="literal">hda=</tt>,
<tt class="literal">hdb=</tt>, <tt class="literal">hdc=</tt>,  or
<tt class="literal">hdd=</tt> to specify the geometry for a particular <span class="acronym">IDE</span> drive.
Note that use of the <tt class="literal">hd=</tt> option may be necessary if you
are using a large <span class="acronym">IDE</span> drive (over 1024 cylinders). If Linux has 
problems recognizing the geometry of your drive (you'll know when you
try to partition the disk for Linux), try using this option.</p></dd>


<dt><b><tt class="literal">max_scsi_luns=</tt><em class="replaceable">num</em></b></dt><dd><p><a name="INDEX-747" />
<a name="INDEX-748" />
<a name="INDEX-749" />
<a name="INDEX-750" />
If <em class="replaceable">num</em> is 1, the system won't
probe for <span class="acronym">SCSI</span> devices that have a Logical Unit Number
(<span class="acronym">LUN</span>) other than
zero. This parameter is required for some poorly designed <span class="acronym">SCSI</span> devices that lock up
when probed at non-zero <span class="acronym">LUN</span>s. Note that this does not have anything to do
with the <span class="acronym">SCSI</span> device ID; <span class="acronym">LUNs</span>
allow the addressing of multiple logical units or subdevices within a single
<span class="acronym">SCSI</span> device, such as a disk drive.</p></dd>


<dt><b><tt class="literal">aha152x=</tt><em class="replaceable">iobase,irq,scsi-id,reconnect,parity</em></b></dt><dd><p><a name="INDEX-751" />
<a name="INDEX-752" />
<a name="INDEX-753" />
Specifies parameters for Adaptec <span class="acronym">AHA</span>151x, <span class="acronym">AHA</span>152x, <span class="acronym">AIC</span>6260, <span class="acronym">AIC</span>6230,
and SB16-<span class="acronym">SCSI</span> interfaces. <em class="replaceable">iobase</em> must be
specified in hexadecimal, as in <tt class="literal">0x340</tt>. All arguments
except <em class="replaceable">iobase</em> are optional.</p></dd>


<dt><b><tt class="literal">aha1542=</tt><em class="replaceable">iobase</em></b></dt><dd><p><a name="INDEX-754" />
Specifies the I/O base, in hex, for Adaptec <span class="acronym">AHA</span>154x <span class="acronym">SCSI</span> interfaces.</p></dd>


<dt><b><tt class="literal">aic7xxx=</tt><em class="replaceable">extended,no-reset</em></b></dt><dd><p><a name="INDEX-755" />
Specifies parameters for Adaptec <span class="acronym">AHA</span>274x, <span class="acronym">AHA</span>284x, and <span class="acronym">AIC</span>7xxx <span class="acronym">SCSI</span>
interfaces. A non-zero value for <em class="replaceable">extended</em> 
indicates that extended translation for large disks is enabled. 
If <em class="replaceable">no-reset</em> is non-zero, the driver will not
reset the <span class="acronym">SCSI</span> bus when configuring the adapter at boot time.</p></dd>


<dt><b><tt class="literal">buslogic=</tt><em class="replaceable">iobase</em></b></dt><dd><p><a name="INDEX-756" />
Specifies the I/O base, in hex, for Buslogic <span class="acronym">SCSI</span> interfaces.</p></dd>


<dt><b><tt class="literal">tmc8xx=</tt><em class="replaceable">mem-base,irq</em></b></dt><dd><p><a name="INDEX-757" />
<a name="INDEX-758" />
Specifies the base of the memory-mapped I/O region (in hex) and <span class="acronym">IRQ</span>
for Future Domain <span class="acronym">TMC</span>-8xx and <span class="acronym">TMC</span>-950 <span class="acronym">SCSI</span> interfaces.</p></dd>


<dt><b><tt class="literal">pas16=</tt><em class="replaceable">iobase,irq</em></b></dt><dd><p><a name="INDEX-759" />
<a name="INDEX-760" />
Specifies the I/O base (in hex) and <span class="acronym">IRQ</span> for Pro Audio Spectrum <span class="acronym">SCSI</span> interfaces.</p></dd>


<dt><b><tt class="literal">st0x=</tt><em class="replaceable">mem-base,irq</em></b></dt><dd><p><a name="INDEX-761" />
<a name="INDEX-762" />
Specifies the base of the memory-mapped I/O region (in hex) and <span class="acronym">IRQ</span>
for Seagate ST-0x <span class="acronym">SCSI</span> interfaces.</p></dd>


<dt><b><tt class="literal">t128=</tt><em class="replaceable">mem-base,irq</em></b></dt><dd><p><a name="INDEX-763" />
<a name="INDEX-764" />
Specifies the base of the memory-mapped I/O region (in hex) and <span class="acronym">IRQ</span>
for Trantor T128 <span class="acronym">SCSI</span> interfaces.</p></dd>


<dt><b><tt class="literal">aztcd=</tt><em class="replaceable">iobase</em></b></dt><dd><p><a name="INDEX-765" />
<a name="INDEX-766" />
Specifies the I/O base (in hex) for Aztech <span class="acronym">CD-ROM</span> interfaces.</p></dd>


<dt><b><tt class="literal">cdu31a=</tt><em class="replaceable">iobase,irq,pas</em></b></dt><dd><p><a name="INDEX-767" />
<a name="INDEX-768" />
Specifies the I/O base (in hex) and <span class="acronym">IRQ</span> for <span class="acronym">CDU</span>-31A and <span class="acronym">CDU</span>-33A Sony <span class="acronym">CD-ROM</span>
interfaces. These options are used on some Pro Audio Spectrum sound cards, as well
as boards from Sony. The <em class="replaceable">irq</em> and 
<em class="replaceable">pas</em> parameters are optional. If
<em class="replaceable">irq</em> is 0, interrupts are not supported (as is
the case with some boards). The only valid value for the 
<em class="replaceable">pas</em> option is 
<tt class="literal">PAS</tt>, indicating that a Pro Audio Spectrum card is
being used.</p></dd>


<dt><b><tt class="literal">soncd535=</tt><em class="replaceable">iobase,irq</em></b></dt><dd><p><a name="INDEX-769" />
<a name="INDEX-770" />
Specifies the I/O base (in hex) and <span class="acronym">IRQ</span> (optional) for Sony <span class="acronym">CDU</span>-535 interfaces.</p></dd>


<dt><b><tt class="literal">gscd=</tt><em class="replaceable">iobase</em></b></dt><dd><p><a name="INDEX-771" />
<a name="INDEX-772" />
Specifies I/O base (in hex) for GoldStar <span class="acronym">CD-ROM</span> interfaces.</p></dd>


<dt><b><tt class="literal">mcd=</tt><em class="replaceable">iobase,irq</em></b></dt><dd><p><a name="INDEX-773" />
<a name="INDEX-774" />
Specifies the I/O base (in hex) and <span class="acronym">IRQ</span> (optional) for Mitsumi standard
<span class="acronym">CD-ROM</span> interfaces.</p></dd>


<dt><b><tt class="literal">optcd=</tt><em class="replaceable">iobase</em></b></dt><dd><p><a name="INDEX-775" />
<a name="INDEX-776" />
Specifies the I/O base (in hex) for Optics Storage Interface <span class="acronym">CD-ROM</span>
interfaces.</p></dd>


<dt><b><tt class="literal">cm206=</tt><em class="replaceable">iobase,irq</em></b></dt><dd><p><a name="INDEX-777" />
<a name="INDEX-778" />
Specifies the I/O base (in hex) and <span class="acronym">IRQ</span> for Philips CM206 <span class="acronym">CD-ROM</span> interfaces.</p></dd>


<dt><b><tt class="literal">sjcd=</tt><em class="replaceable">iobase,irq,dma</em></b></dt><dd><p><a name="INDEX-779" />
<a name="INDEX-780" />
Specifies the I/O base (in hex), <span class="acronym">IRQ</span>, and <span class="acronym">DMA</span> channel for 
Sanyo <span class="acronym">CD-ROM</span> interfaces. The <em class="replaceable">irq</em> and
<em class="replaceable">dma</em> parameters are optional.</p></dd>


<dt><b><tt class="literal">sbpcd=</tt><em class="replaceable">iobase,type</em></b></dt><dd><p><a name="INDEX-781" />
<a name="INDEX-782" />
 Specifies the I/O base in hex for SoundBlaster Pro
and compatible <span class="acronym">CD-ROM</span> interfaces. The
<em class="replaceable">type</em> parameter must be
<tt class="literal">SoundBlaster</tt>, <tt class="literal">LaserMate</tt>, or
<tt class="literal">SPEA</tt>, based on what type of board you have. Note
that this option specifies parameters <em class="emphasis">only</em> for the
<span class="acronym">CD-ROM</span> interface, not for the sound hardware on the
board.</p></dd>


<dt><b><tt class="literal">ether=</tt><em class="replaceable">irq,iobase,parameters&#133;</em></b></dt><dd><p><a name="INDEX-783" />
<a name="INDEX-784" />
<a name="INDEX-785" />
 Specifies the <span class="acronym">IRQ</span> and I/O base for
Ethernet cards.  If you are having problems detecting your Ethernet
card and wish to use it for installation (e.g., via
<span class="acronym">FTP</span> or <span class="acronym">NFS</span>), check out the Linux
Ethernet <span class="acronym">HOWTO</span> that describes the various boot options for Ethernet
cards in much detail. There are too many to detail here.</p></dd>


<?troff .wcon_off?><dt><b><tt class="literal">floppy=thinkpad</tt></b></dt><dd><p><a name="INDEX-786" />
<a name="INDEX-787" />
Tells the floppy driver that you have a ThinkPad; necessary for floppy
access on ThinkPad systems.</p></dd>


<dt><b><tt class="literal">floppy=0,thinkpad</tt></b></dt><dd><p>Tells the floppy driver that you do not have a ThinkPad, in case it's
confused.</p></dd>


<dt><b><tt class="literal">bmouse=</tt><em class="replaceable">irq</em></b></dt><dd><p><a name="INDEX-788" />
<a name="INDEX-789" />
<a name="INDEX-790" />
<a name="INDEX-791" />
Specifies <span class="acronym">IRQ</span> for busmouse<a href="#FOOTNOTE-16">[16]</a>
 interface.</p><blockquote>

<a name="FOOTNOTE-16" /><p>[16]A busmouse is a mouse attached to the system bus, instead of a
serial port or a PS/2-style mouse port.</p>

</blockquote></dd>


<dt><b><tt class="literal">msmouse=</tt><em class="replaceable">irq</em></b></dt><dd><p><a name="INDEX-792" />
<a name="INDEX-793" />
Specifies <span class="acronym">IRQ</span> for Microsoft busmouse interface.</p></dd>

</dl>

<p>Quite a few other options are available; the previous options should be those that
are generally necessary for normal use of your system. (For example, we
have left out the many parameters available for sound card drivers; we
urge you to read the appropriate <span class="acronym">HOWTO</span> documents if you have a 
life-threatening situation involving use of your sound card.)</p>

<p>For each of these, you must enter <tt class="command">linux</tt> followed by the
parameters you wish to use.</p>

<p>
If you have questions about these boot-time options, read the Linux
Bootprompt <span class="acronym">HOWTO</span>, Linux <span class="acronym">SCSI</span>
<span class="acronym">HOWTO</span>, and Linux <span class="acronym">CD-ROM</span>
<span class="acronym">HOWTO</span>. These three documents should be available on
any Linux <span class="acronym">FTP</span> site (as well as most Linux
<span class="acronym">CD-ROM</span>s) and describe the <span class="acronym">LILO</span>
boot arguments in more detail.  <a name="INDEX-794" /><a name="INDEX-795" /></p>
</div>




<a name="x-100-3-sec-install-linux-partition" /><div class="sect2">
<h3 class="sect2">3.1.2. Drives and Partitions Under Linux</h3>

<p><a name="INDEX-796" />
<a name="INDEX-797" />
<a name="INDEX-798" />
Many distributions require you to create Linux partitions by hand using
the <tt class="command">fdisk</tt> program. Others may automatically create partitions for
you. Either way, you should know the following information about
Linux partitions and device names. (This information applies only to Intel and
Alpha systems; other systems like PowerPC, SPARC, and m68k do not have
logical and extended partitions.)</p>

<p><a name="INDEX-799" />
Drives and partitions under Linux are given different names from their
counterparts under other operating systems. Under
<span class="acronym">MS-DOS</span>, floppy drives are referred to as A: and B:, while hard drive
partitions are named C:, D:, and
so on. Under Linux, the naming convention is quite different.</p>

<p><a name="INDEX-800" />
<a name="INDEX-801" />
<a name="INDEX-802" />
<em class="emphasis">Device drivers</em>, found in the directory
<em class="filename">/dev</em>, are used to communicate with devices on
your system (such as hard drives, mice, and so on).  For example, if
you have a mouse on your system, you might access it through the driver
<em class="filename">/dev/mouse</em>. Floppy drives, hard drives, and
individual partitions are all given individual device drivers of their
own. Don't worry about the device-driver interface for now; it is
important only to understand how the various devices are named in
order to use them.

The section "<a href="ch06_03.htm">Section 6.3, "Device Files"</a>" in
<a href="ch06_01.htm">Chapter 6, "Managing
 Filesystems, Swap,
 and Devices"</a>,
talks more about devices.</p>

<p><a href="ch03_01.htm">Table 3-1</a> lists the names of these
various device drivers where multiple names can be created with
increasing numbers (0, 1, etc.). One or two are shown in the table as examples.</p>

<a name="x-100-3-table-part-names" /><h4 class="objtitle">Table 3-1. Linux Partition Names</h4><table border="1">

<tr>
<th>Device</th>
<th>Name</th>
</tr>




<tr>
<td rowspan="0">First floppy (A:)</td>
<td rowspan="0"><em class="filename">/dev/fd0</em></td>
</tr>

<tr>
<td rowspan="0">Second floppy (B:)</td>
<td rowspan="0"><em class="filename">/dev/fd1</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive (entire drive)</td>
<td rowspan="0"><em class="filename">/dev/hda</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive, primary partition 1</td>
<td rowspan="0"><em class="filename">/dev/hda1</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive, primary partition 2</td>
<td rowspan="0"><em class="filename">/dev/hda2</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive, primary partition 3</td>
<td rowspan="0"><em class="filename">/dev/hda3</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive, primary partition 4</td>
<td rowspan="0"><em class="filename">/dev/hda4</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive, logical partition 1</td>
<td rowspan="0"><em class="filename">/dev/hda5</em></td>
</tr>

<tr>
<td rowspan="0">First hard drive, logical partition 2</td>
<td rowspan="0"><em class="filename">/dev/hda6</em></td>
</tr>

<tr>
<td rowspan="0">...</td>
<td rowspan="0" />
</tr>

<tr>
<td rowspan="0">Second hard drive (entire drive)</td>
<td rowspan="0"><em class="filename">/dev/hdb</em></td>
</tr>

<tr>
<td rowspan="0">Second hard drive, primary partition 1</td>
<td rowspan="0"><em class="filename">/dev/hdb1</em></td>
</tr>

<tr>
<td rowspan="0">...</td>
<td rowspan="0" />
</tr>

<tr>
<td rowspan="0">First <span class="acronym">SCSI</span> hard drive (entire drive)</td>
<td rowspan="0"><em class="filename">/dev/sda</em>
<a name="INDEX-803" /></td>
</tr>

<tr>
<td rowspan="0">First <span class="acronym">SCSI</span> hard drive, primary partition 1</td>
<td rowspan="0"><em class="filename">/dev/sda1</em></td>
</tr>

<tr>
<td rowspan="0">...</td>
<td rowspan="0" />
</tr>

<tr>
<td rowspan="0">Second <span class="acronym">SCSI</span> hard drive (entire drive)</td>
<td rowspan="0"><em class="filename">/dev/sdb</em></td>
</tr>

<tr>
<td rowspan="0">Second <span class="acronym">SCSI</span> hard drive, primary partition 1</td>
<td rowspan="0"><em class="filename">/dev/sdb1</em></td>
</tr>

<tr>
<td rowspan="0">...</td>
<td rowspan="0" />
</tr>

<tr>
<td rowspan="0">First <span class="acronym">SCSI</span> CD-ROM drive</td>
<td rowspan="0"><em class="filename">/dev/scd0</em></td>
</tr>

<tr>
<td rowspan="0">Second <span class="acronym">SCSI</span> CD-ROM drive</td>
<td rowspan="0"><em class="filename">/dev/scd1</em></td>
</tr>

<tr>
<td rowspan="0">...</td>
<td rowspan="0" />
</tr>

<tr>
<td rowspan="0"><p>First generic <span class="acronym">SCSI</span>
device (like scanners, CDR writers, etc.). 
<br>
Note that
newer systems use numbers instead of letters <br>(i.e.,
				<em class="filename">/dev/sg0</em> instead of
				<em class="filename">/dev/sga</em>).</p></td>
<td rowspan="0"><em class="filename">/dev/sga</em></td>
</tr>

<tr>
<td rowspan="0">Second generic <span class="acronym">SCSI</span> device</td>
<td rowspan="0"><em class="filename">/dev/sgb</em></td>
</tr>

<tr>
<td rowspan="0">...</td>
<td rowspan="0" />
</tr>


</table>

<p><a name="INDEX-804" />
<a name="INDEX-805" />
A few notes about this table: <em class="filename">/dev/fd0</em> corresponds to the 
first floppy drive (<tt class="literal">A:</tt> under
<span class="acronym">MS-DOS</span>), and <em class="filename">/dev/fd1</em>
corresponds to
the second floppy (<tt class="literal">B:</tt>).</p>

<p><a name="INDEX-806" />
<a name="INDEX-807" />
Also, <span class="acronym">SCSI</span> hard drives are named differently from other
drives. <span class="acronym">IDE</span>, <span class="acronym">MFM</span>, and
<span class="acronym">RLL</span> drives are accessed through the devices
<em class="filename">/dev/hda</em>, <em class="filename">/dev/hdb</em>, and
so on. The individual partitions on the drive
<em class="filename">/dev/hda</em> are <em class="filename">/dev/hda1</em>,
<em class="filename">/dev/hda2</em>, and so on. However, <span class="acronym">SCSI</span> drives are
named  <em class="filename">/dev/sda</em>, <em class="filename">/dev/sdb</em>,
and so on, with partition names such as <em class="filename">/dev/sda1</em> and
<em class="filename">/dev/sda2</em>.
<a name="INDEX-808" />
<a name="INDEX-809" /></p>

<p>Most systems, of course, do not have four primary partitions.  But the
names <em class="filename">/dev/hda1</em> through
<em class="filename">/dev/hda4</em> are still reserved for these
partitions; they cannot be used to name logical partitions.</p>

<p>Here's an example. Let's say you have a single <span class="acronym">IDE</span> hard drive, with
three primary partitions. The first two are set aside for
<span class="acronym">MS-DOS</span>, and the third is an extended partition that
contains two logical partitions, both for use by Linux. The devices
referring to these partitions would be:</p>

<table border="1">

<tr>
<th>Device</th>
<th>Name</th>
</tr>




<tr>
<td rowspan="0">First <span class="acronym">MS-DOS</span> partition (C:)</td>
<td rowspan="0"><em class="filename">/dev/hda1</em></td>
</tr>

<tr>
<td rowspan="0">Second <span class="acronym">MS-DOS</span> partition (D:)</td>
<td rowspan="0"><em class="filename">/dev/hda2</em></td>
</tr>

<tr>
<td rowspan="0">Extended partition</td>
<td rowspan="0"><em class="filename">/dev/hda3</em></td>
</tr>

<tr>
<td rowspan="0">First Linux logical partition</td>
<td rowspan="0"><em class="filename">/dev/hda5</em></td>
</tr>

<tr>
<td rowspan="0">Second Linux logical partition</td>
<td rowspan="0"><em class="filename">/dev/hda6</em></td>
</tr>


</table><p>Note that <em class="filename">/dev/hda4</em> is skipped; it corresponds to the fourth
primary partition, which we don't have in this example.
Logical partitions are named consecutively starting with <em class="filename">/dev/hda5</em>.</p>
</div>




<a name="x-100-3-sec-install-linux-fdisk" /><div class="sect2">
<h3 class="sect2">3.1.3. Creating Linux Partitions</h3>

<p><a name="INDEX-810" />
<a name="INDEX-811" />
Now you are ready to create Linux partitions with the
<tt class="command">fdisk</tt> command. In general, you
need to create at least one partition for the Linux software itself and
another partition for swap space.</p>

<p>Here we are describing the basic text-mode usage of <tt class="command">fdisk</tt> which should
be available with all distributions. Many distributions nowadays
provide a more user-friendly interface to
<tt class="command">fdisk</tt>. While those are usually not as flexible as
plain <tt class="command">fdisk</tt>, they can help you make the right
choices more easily. Whatever tool you use, this section is helpful for understanding the underlying
concepts. The tools all do more or less the same things in the end;
some simply have more sugar-coating than others. You can
also make use of the information presented here for fixing or checking
something that you suspect didn't go right with the graphical tool.</p>

<p>After booting the installation media, run <tt class="command">fdisk</tt> by typing:
<blockquote><pre class="code">fdisk <em class="replaceable">drive</em></pre></blockquote>

<?troff .ne 10?>
where <em class="replaceable">drive</em> is the Linux device name 
of the drive to which you plan to add
partitions (see <a href="ch03_01.htm">Table 3-1</a>). 
For instance, if you want to run <tt class="command">fdisk</tt> 
on the first <span class="acronym">SCSI</span> disk in your system, use the command:
<blockquote><pre class="code"># <tt class="userinput"><b>fdisk /dev/sda</b></tt></pre></blockquote>

<em class="filename">/dev/hda</em> (the first <span class="acronym">IDE</span> drive) is the default if you don't specify one.</p>

<p>If you are creating Linux partitions on more than one drive, run <tt class="command">fdisk</tt>
once for each drive:</p>

<blockquote><pre class="code"># <tt class="userinput"><b>fdisk /dev/hda</b></tt> 

Command (m for help):</pre></blockquote>

<p> 
Here <tt class="command">fdisk</tt> is waiting for a command; you can type <tt class="literal">m</tt> to get a 
list of options:
<blockquote><pre class="code">Command (m for help): <tt class="userinput"><b>m</b></tt> 
Command action 
   a   toggle a bootable flag 
   d   delete a partition 
   l   list known partition types 
   m   print this menu 
   n   add a new partition 
   p   print the partition table 
   q   quit without saving changes 
   t   change a partition's system id 
   u   change display/entry units 
   v   verify the partition table 
   w   write table to disk and exit 
   x   extra functionality (experts only) 

Command (m for help):</pre></blockquote>

The <tt class="literal">n</tt> command is used to create a new partition.
Most other options you won't need to worry about. To quit
<tt class="command">fdisk</tt> without saving any changes, use the
<tt class="literal">q</tt> command. To quit <tt class="command">fdisk</tt> and
write the changes to the partition table to disk, use the
<tt class="literal">w</tt> command. This is worth repeating: So long as you
quit with <tt class="literal">q</tt> without writing, you can mess around as 
much as you want with <em class="filename">fdisk</em> without risking harm
to your data. Only when you type <tt class="literal">w</tt>, you can cause
potential disaster to your data if you do something wrong.</p>

<p>The first thing you should do is display your current partition table
and write the information down for later reference. Use the
<tt class="literal">p</tt> command to see the information. It is a good idea to copy
the information to your notebook after each change you have made to
the partition table. If, for some reason, your partition table is
damaged, you will not access any data on your hard disk any longer, even 
though the data itself is still there. But by using your notes, you might
be able to restore the partition table and get your data back in many
cases by running <tt class="command">fdisk</tt> again and deleting and
recreating the partitions with the parameters you previously wrote
down. Don't forget to save the restored partition table when you are
done.</p>

<p>Here is an example of a printed partition table:
<blockquote><pre class="code">Command (m for help): <tt class="userinput"><b>p</b></tt> 

Disk /dev/hda: 16 heads, 38 sectors, 683 cylinders 
Units = cylinders of 608 * 512 bytes 
   Device Boot  Begin   Start     End  Blocks   Id  System 
/dev/hda1   *       1       1     203   61693    6  DOS 16-bit &gt;=32M 

Command (m for help):</pre></blockquote>

<a name="INDEX-812" />
In this example, we have a single <span class="acronym">MS-DOS</span> partition on <em class="filename">/dev/hda1</em>, which
is 61693 blocks (about 60 MB).<a href="#FOOTNOTE-17">[17]</a>
This partition starts at cylinder number
1 and ends on cylinder 203. We have a total of 683 cylinders in this 
disk; so there are 480 cylinders left to create Linux partitions on.</p><blockquote>

<a name="FOOTNOTE-17" /><p>[17]A
block, under Linux, is 1024 bytes.</p>

</blockquote>

<p>To create a new partition, use the <tt class="literal">n</tt> command. In this example, we'll
create two primary partitions (<em class="filename">/dev/hda2</em> and <em class="filename">/dev/hda3</em>&hairsp;) 
for Linux:</p>

<p><blockquote><pre class="code">Command (m for help): <tt class="userinput"><b>n</b></tt> 
Command action 
  e   extended 
  p   primary partition (1-4)  
  <tt class="userinput"><b>p</b></tt></pre></blockquote>

 
Here, <tt class="command">fdisk</tt> is asking which type of the partition to create: extended
or primary. In our example, we're creating only primary partitions, so we
choose <tt class="literal">p</tt>:
<blockquote><pre class="code">Partition number (1-4):</pre></blockquote>

<tt class="command">fdisk</tt> will then ask for the number of the partition to create; 
since partition 1
is already used, our first Linux partition will be number 2:
<blockquote><pre class="code">Partition number (1-4): <tt class="userinput"><b>2</b></tt>
First cylinder (204-683):</pre></blockquote>

<a name="INDEX-813" />
Now, we enter the starting cylinder number of the partition. Since cylinders
204 through 683 are unused, we'll use the first available one (numbered 204).
There's no reason to leave empty space between partitions:
<blockquote><pre class="code">First cylinder (204-683): <tt class="userinput"><b>204</b></tt> 
Last cylinder or +size or +sizeM or +sizeK (204-683):</pre></blockquote>

<a name="INDEX-814" />
<tt class="command">fdisk</tt> is asking for the size of the partition we
want to create. We can
either specify an ending cylinder number, or a size in bytes, kilobytes,
or megabytes. 
Since we want our partition to be 80 MB in size, we 
specify <tt class="literal">+80M</tt>. When specifying a partition size in this way,
<tt class="command">fdisk</tt> will round the actual partition size to the nearest number
of cylinders: 
<blockquote><pre class="code">Last cylinder or +size or +sizeM or +sizeK (204-683): <tt class="userinput"><b>+80M</b></tt> 

Warning: Linux cannot currently use 33090 sectors of this partition</pre></blockquote>

If you see a warning message such as this, it can be ignored. 
<tt class="command">fdisk</tt> prints the warning because it's an 
older program and dates back before the time that Linux partitions were allowed to 
be larger than 64 MB.</p>

<p>Now we're ready to create our second Linux partition. For sake of 
demonstration, we'll create it with a size of 10 MB:</p>

<blockquote><pre class="code">Command (m for help): <tt class="userinput"><b>n</b></tt> 
Command action 
   e   extended 
   p   primary partition (1-4) 
<tt class="userinput"><b>p</b></tt> 
Partition number (1-4): <tt class="userinput"><b>3</b></tt> 
First cylinder (474-683): <tt class="userinput"><b>474</b></tt> 
Last cylinder or +size or +sizeM or +sizeK (474-683): <tt class="userinput"><b>+10M</b></tt></pre></blockquote>

<p>At last, we'll display the partition table. Again, write down all of 
this information--especially the block sizes of your new partitions. You'll
need to know the sizes of the partitions when creating filesystems.
Also, verify that none of your partitions overlap:
<blockquote><pre class="code">Command (m for help): <tt class="userinput"><b>p</b></tt>

Disk /dev/hda: 16 heads, 38 sectors, 683 cylinders 
Units = cylinders of 608 * 512 bytes 
   Device Boot  Begin   Start     End  Blocks   Id  System 
/dev/hda1   *       1       1     203   61693    6  DOS 16-bit &gt;=32M 
/dev/hda2         204     204     473   82080   83  Linux native 
/dev/hda3         474     474     507   10336   83  Linux native</pre></blockquote>

As you can see, <em class="filename">/dev/hda2</em> is now a partition of size 82080 blocks
(which corresponds to about 80 MB), and <em class="filename">/dev/hda3</em> is 
10336 blocks (about 10 MB).</p>

<p><a name="INDEX-815" />
<a name="INDEX-816" />
Note that most distributions require you to use 
the <tt class="literal">t</tt> command in <tt class="command">fdisk</tt> to change the type of the swap 
partition to "Linux swap," which is numbered 82. You can
use the <tt class="literal">L</tt> command to print a list of known partition type codes,
and then use the <tt class="literal">t</tt> command to set the type of the swap partition to that
which corresponds to "Linux swap."</p>

<p>This way the installation software will be able to automatically find 
your swap partitions based on type. If the installation software doesn't 
seem to recognize your swap partition, you might want to rerun 
<tt class="command">fdisk</tt> and use the <tt class="literal">t</tt> command on the partition in question.</p>

<p>In the previous example, the remaining cylinders on the disk (numbered 508 to 
683) are unused. You may wish to leave unused space on the disk, in case
you wish to create additional partitions later.</p>

<p>Finally, we use the <tt class="literal">w</tt> command to write the changes to disk and
exit <tt class="command">fdisk</tt>:
 
<blockquote><pre class="code">Command (m for help): w
#</pre></blockquote></p>

<p>Keep in mind that none of the changes you make while running <tt class="command">fdisk</tt> take effect until you give the <tt class="literal">w</tt> command, so you can toy with
different configurations and save them when you're done. Also, if you 
want to quit <tt class="command">fdisk</tt> at any time without saving the changes, use the
<tt class="literal">q</tt> command. Remember that you shouldn't modify partitions for
operating systems other than Linux with the Linux <tt class="command">fdisk</tt> program.</p>

<p>You may not be able to boot Linux from a partition 
using cylinders numbered over 1023. Therefore, you should try to create
your Linux root partition within the sub-1024 cylinder range which is
almost always possible (e.g., by creating a small root partition in
the sub-1024 cylinder range). If for some reason, you cannot or do not 
want to do this, you can simply boot Linux from floppy.</p>

<p>Some Linux distributions require you to reboot the system after running
<tt class="command">fdisk</tt> to allow the changes to the
partition table to take effect before installing the software. Newer
versions of <tt class="command">fdisk</tt> automatically update the
partition information in the kernel, so rebooting isn't necessary. To
be on the safe side, after running <tt class="command">fdisk</tt> you should
reboot the installation media before proceeding.</p>

<a name="INDEX-817" /><a name="INDEX-818" />
</div>




<a name="x-100-3-sec-install-linux-mkswap" /><div class="sect2">
<h3 class="sect2">3.1.4. Creating Swap Space</h3>

<p><a name="INDEX-819" />
<a name="INDEX-820" />
If you are planning to use a swap partition for virtual
<span class="acronym">RAM</span>, you're ready to prepare it.<a href="#FOOTNOTE-18">[18]</a>

In the section "<a href="ch06_02.htm">Section 6.2, "Managing Swap Space"</a>" in
<a href="ch06_01.htm">Chapter 6, "Managing
 Filesystems, Swap,
 and Devices"</a>,
we discuss the preparation of a swap file, in case you don't want
to use an individual partition.</p><blockquote>

<a name="FOOTNOTE-18" /><p>[18]Again, some distributions of 
Linux prepare the swap space for you automatically, or via an 
installation menu option.</p>

</blockquote>

<p>Many distributions require you to create and activate swap space before
installing the software. If you have a small amount of physical <span class="acronym">RAM</span>, 
the installation procedure may not be successful unless you
have some amount of swap space enabled.</p>

<p><a name="INDEX-821" />
The command used to prepare a swap partition is <tt class="command">mkswap</tt>, and it takes 
the following form:
 
<blockquote><pre class="code">mkswap -c <em class="replaceable">partition</em> <em class="replaceable">size</em></pre></blockquote>

where <em class="replaceable">partition</em> is the name of the swap partition,
and <em class="replaceable">size</em> is the size of the partition in 
blocks.<a href="#FOOTNOTE-19">[19]</a>
For example, if your swap partition is <em class="filename">/dev/hda3</em> and is 
10336 blocks in size, use the command:
<blockquote><pre class="code"># <tt class="userinput"><b>mkswap -c /dev/hda3 10336</b></tt></pre></blockquote>

The <span class="option">-c</span> option tells <tt class="command">mkswap</tt>
to check for bad blocks on the partition when creating the swap
space. Bad blocks are spots on the magnetic media that do not hold
the data correctly. This occurs only rarely with today's hard disks,
but if it does, and you do not know about it, it can cause you endless 
trouble. Always use the <span class="option">-c</span> option to have 
<tt class="command">mkswap</tt> check for bad blocks. It will exclude these
from being used automatically.</p><blockquote>

<a name="FOOTNOTE-19" /><p>[19]This is the size as reported by <tt class="command">fdisk</tt>, using
the <tt class="literal">p</tt> menu option. Again, a block under Linux is 1024 bytes.</p>

</blockquote>

<p>If you are using multiple swap partitions, you need to execute the
appropriate <tt class="command">mkswap</tt> command for each partition.</p>

<p>After formatting the swap space, you need to enable it for use by the 
system. Usually, the system automatically enables swap space at boot time.
However, because you have not yet installed the Linux software, you need
to enable it by hand.</p>

<p><a name="INDEX-822" />
The command to enable swap space is <tt class="command">swapon</tt>, and it
takes the following form:
<blockquote><pre class="code">swapon <em class="replaceable">partition</em></pre></blockquote>


After the <tt class="command">mkswap</tt> command shown, we use the following command to enable the swap space on
<em class="filename">/dev/hda3</em>:
 
<blockquote><pre class="code"># <tt class="userinput"><b>swapon /dev/hda3</b></tt></pre></blockquote></p>
</div>




<a name="x-100-3-sec-install-linux-mke2fs" /><div class="sect2">
<h3 class="sect2">3.1.5. Creating the Filesystems</h3>

<p><a name="INDEX-823" />
Before you can use your Linux partitions to store files, you must create
filesystems on them. Creating a filesystem is analogous to formatting
a partition under <span class="acronym">MS-DOS</span> or other operating systems.

We discussed filesystems briefly in the section
"<a href="ch02_02.htm">Section 2.2.3, "Linux Partition Requirements"</a>" in
<a href="ch02_01.htm">Chapter 2, "Preparing to
 Install Linux"</a>.</p>

<p>There are several types of filesystems available for Linux. Each filesystem
type has its own format and set of characteristics (such as filename
length, maximum file size, and so on). Linux also supports several 
"third-party" filesystem types, such as the <span class="acronym">MS-DOS</span> filesystem.</p>

<p><a name="INDEX-824" /> 
The most commonly used filesystem type is the <em class="emphasis">Second Extended
Filesystem</em>, or <em class="emphasis">ext2fs</em>. The <em class="emphasis">ext2fs</em> is one of the most
efficient and flexible filesystems; it allows filenames of up to 256 characters

and filesystem sizes of up to 4 terabytes. In the section
"<a href="ch06_01.htm">Section 6.1.1, "Filesystem Types"</a>" in <a href="ch06_01.htm">Chapter 6, "Managing
 Filesystems, Swap,
 and Devices"</a>,
we discuss the various filesystem types available for Linux. Initially,
however, we suggest you use the <em class="emphasis">ext2fs</em> filesystem.</p>

<p>To create an <em class="emphasis">ext2fs</em> filesystem, use the command:
<blockquote><pre class="code"><a name="INDEX-825" />
mke2fs -c <em class="replaceable">partition</em> <em class="replaceable">size</em></pre></blockquote>

 
where <em class="replaceable">partition</em> is the name of the partition, and
<em class="replaceable">size</em> is the size of the partition in blocks. For example, to
create an 82080-block filesystem on <em class="filename">/dev/hda2</em>, use the command:
<blockquote><pre class="code"># <tt class="userinput"><b>mke2fs -c /dev/hda2 82080</b></tt></pre></blockquote></p>

<p>If you're using multiple filesystems for Linux, you need to use the
appropriate <tt class="command">mke2fs</tt> command for each filesystem.</p>

<p>If you have encountered any problems at this point, see
the section "<a href="ch03_03.htm">Section 3.3, "Running Into Trouble"</a>"
later in this chapter.</p>
</div>




<a name="x-100-3-sec-install-installing" /><div class="sect2">
<h3 class="sect2">3.1.6. Installing the Software</h3>

<p><a name="INDEX-826" />
<a name="INDEX-827" />
Finally, you are ready to install the software on your system. Every
distribution has a different mechanism for doing this. Many 
distributions have a self-contained program that steps you through
the installation.  On other distributions, you have to <em class="emphasis">mount</em>
your filesystems in a certain subdirectory (such as <em class="filename">/mnt</em>) and 
copy the software to them by hand. On <span class="acronym">CD-ROM</span> distributions, you may be
given the option to
install a portion of the software on your hard drive and leave most of
the software on the <span class="acronym">CD-ROM</span>. This is often called a
"live filesystem." Such a live filesystem is convenient
for trying out Linux before you make a commitment to install
everything on your disk.</p>

<p>Some distributions offer several different ways to install the software. For 
example, you may be able to install the software directly from an <span class="acronym">MS-DOS</span>
partition on your hard drive instead of from floppies. Or you may be able
to install over a <span class="acronym">TCP/IP</span> network via <span class="acronym">FTP</span> or <span class="acronym">NFS</span>. See your distribution's 
documentation for details.</p>

<p>For example, the Slackware distribution requires you to do the following:</p>

<ol><li><p>Create partitions with <tt class="command">fdisk</tt>.</p></li><li><p>Optionally create swap space
with <tt class="command">mkswap</tt> and <tt class="command">swapon</tt> (if you
have 16 MB or less of <span class="acronym">RAM</span>).</p></li><li><p>Run the <tt class="command">setup</tt> program to install the software.  <tt class="command">setup</tt> leads
you through a self-explanatory menu system.</p></li></ol><p><a name="INDEX-828" />
<a name="INDEX-829" />
The exact method used to install the Linux software differs greatly with 
each distribution.</p>

<p>You might be overwhelmed by the choice of software to
		install. Modern Linux distributions can easily contain a
		thousand or more packages spread over several
<?troff \p?> CD-ROMs. There
		are basically three methods for selecting the software
		package:</p>

<?troff .wcon_off?><dl>
<dt><b><em class="emphasis">Selection by task</em></b></dt><dd><p>This is the easiest means of selection for
			  beginners. You don't have to think about whether you
			  need a certain package, you just pick whether
			  your Linux computer should act as a workstation, a
			  development machine, or a network router, and the
			  installation program will pick the appropriate packages
			  for you. In all cases, you can then either refine the
			  selection by hand or come back to the installation
			  program later.</p></dd>


<dt><b><em class="emphasis">Selection of individual packages by series</em></b></dt><dd><p>With this selection mechanism, all the packages
			  are grouped into series like "Networking,"
			  "Development," or "Graphics." You 
			  can go through all the series and pick the individual
			  packages there. This requires more decisions
			  than if you select it by task, because you still have to decide
			  whether you need it or not, but you can skip an entire
			  series when you are sure that you are not interested in 
			  the functions it offers.</p></dd>


<dt><b><em class="emphasis">Selection of individual packages sorted alphabetically</em></b></dt><dd><p>This method is useful only when you already know
			  which packages you want to install; otherwise you won't
			  see the forest for the trees.</p></dd>

</dl>

<p> Chosing one selection method does not exclude the use of the others.
 Most
		distributions offer two or more of the aforementioned
		selection mechanisms.</p>

<p>It might still be difficult to decide which package to
		pick. Good distributions show a short description of each
		package on screen to make it easier for you to select
 the correct ones, but if
		you are still unsure, our advice is this: when in doubt, leave it
		out! You can always go back and add packages later.</p>

<p>Modern distributions have a very nifty feature, the
		so-called <em class="emphasis">dependency tracking</em>. Some
		packages work only when some other packages are installed
		(e.g., a graphics viewer might need special graphics libraries 
		to import files). With dependency tracking, the
		installation program can inform you about those dependencies
		and will let you automatically select the package you
		want along with all the ones it depends on. Unless you
		are very sure about what you are doing, you should always
		accept this offer, or the package might not work
		afterwards.</p>

<p>Installation programs
can help you make your selection and avoid mistakes in other ways. For example, the
		installation program might refuse to start the installation
		when you deselect a package that is absolutely crucial for
		even the most minimal system to boot (like the basic
		directory structure). Or, it might check for mutual
		exclusions, such as cases in which you can only have one package 
		or the other, but not both.</p>

<p>Some distributions like SuSE come with a large book
		that among other things lists all the packages together with
		short descriptions. It might be a good idea to at least skim
		those description to see what's in store for you, or you might 
		be surprised when you select the packages and are offered the
		twenty-fifth text editor.</p>
</div>




<a name="x-100-3-sec-install-linux-lilo" /><div class="sect2">
<h3 class="sect2">3.1.7. Creating the Boot Floppy or Installing LILO</h3>

<p><a name="INDEX-830" />
<a name="INDEX-831" />
<a name="INDEX-832" />
Every distribution provides some means of booting your new Linux system 
after you have installed the software. In many cases, the installation
procedure suggests you create a boot floppy, which contains a Linux kernel 
configured to use your newly created root filesystem. In
order to boot Linux, you could boot from this floppy; control is
transferred to your hard drive after you boot. 
On other distributions, this boot floppy is the
installation floppy itself.</p>

<p>Many distributions give you the option of installing
<span class="acronym">LILO</span> on your hard drive. <span class="acronym">LILO</span> is
a program that resides on your drive's master boot record. It boots a
number of operating systems, including <span class="acronym">MS-DOS</span> and
Linux, and allows you to select which to boot at startup time.</p>

<p>
In order for <span class="acronym">LILO</span> to be installed successfully, it
needs to know a good 
deal of information about your drive configuration: for example, which
partitions contain which operating systems, how to boot each operating
system, and so on. Many distributions, when installing <span class="acronym">LILO</span>, attempt
to "guess" at the appropriate parameters for your configuration. 

<img src="figs/bomb.gif">&nbsp;
Although it's not often, the automated <span class="acronym">LILO</span> installation provided by
some distributions can fail and leave your master boot record in 
shambles (although it's very doubtful that any damage to the actual
data on your hard drive will take place). In particular, if you use
OS/2's Boot Manager, you should <em class="emphasis">not</em> install <span class="acronym">LILO</span> using the
automated procedure; there are special instructions for using <span class="acronym">LILO</span> with
the Boot Manager, which will be covered in <a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>.</p>

<p>In many cases, it is best to use a boot floppy until you have a chance
to configure <span class="acronym">LILO</span> yourself, by hand. If you're
feeling exceptionally trustworthy, though, you can go ahead with the
automated <span class="acronym">LILO</span> installation if it is provided with
your distribution.</p>

<p>In the section "<a href="ch05_02.htm">Section 5.2.2, "Using LILO"</a>" in
<a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>, we'll cover
in detail how to configure and install <span class="acronym">LILO</span> for your particular setup.</p>

<p>If everything goes well, then congratulations! You have just installed
Linux on your system. Go have a cup of tea or something; you deserve it.</p>

<p>In case you did run into any trouble, the section "<a href="ch03_03.htm">Section 3.3, "Running Into Trouble"</a>," later in this
chapter, describes the most common sticking points for Linux
installations, and how to get around them.</p>
</div>




<div class="sect2">
<h3 class="sect2">3.1.8. Additional Installation Procedures</h3>

<p>Some distributions of Linux provide a number of additional
installation procedures, allowing you to configure various software
packages, such as <span class="acronym">TCP/IP</span> networking, the X Window
System, and so on. If you are provided with these configuration
options during installation, you may wish to read ahead in this book
for more information on how to configure this software. Otherwise, you
should put off these installation procedures until you have a complete
understanding of how to configure the software.</p>

<p>It's up to you; if all else fails, just go with the flow and see what
happens. It's doubtful that anything you do incorrectly now
cannot be undone in the future (knock on wood).</p>
</div>
</div>




















<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch02_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch03_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">2.2. Preparing to Install Linux</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">3.2. Post-Installation Procedures</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>