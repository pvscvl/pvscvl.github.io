<?label H.2. Sending and Receiving Files?><html><head><title>Sending and Receiving Files (Running Linux)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Running Linux" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="apph_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm" /></td><td width="172" valign="top" align="right"><a href="apph_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">H.2. Sending and Receiving Files</h2>

<p>Most communications programs invoke <tt class="command">rz</tt> and
<tt class="command">sz</tt> automatically. You can also connect to a remote
system, log in, and manually invoke <tt class="command">sz</tt> with the
flags you want to use. Zmodem automatically downloads the files to
your home system using the same filenames. (Zmodem tools aren't
clever about filenames, so when you download to
<span class="acronym">MS-DOS</span>, be careful about getting files with names that
can't be squeezed into the <em class="filename">filename.ext</em>
<span class="acronym">DOS</span> filename limit. If you transfer
<em class="filename">filename.extension</em>, it arrives on your
<span class="acronym">DOS</span> host converted to
<em class="filename">filename.ext</em>, which is probably OK. But, if you
try to transfer <em class="filename">filename.more.extension</em>, most
Zmodem utilities will give up, probably with a misleading message that
the transfer completed.)</p>

<?troff .wcon_off?><p>One of the most confusing things about Zmodem transfer is determining
the command to use to perform the transfer. You have to remember
which system you are invoking the command from and which system
contains the files to transfer. A consistent way to perform Zmodem
transfer is to always invoke the transfer on the remote host, whether
uploading (sending to the remote host) or downloading (receiving from
the remote host). For example, if you are logged in to a remote host
(using C-Kermit, or Telix, or
<?troff .ne 10?> whatever) and want to send some text
files from that system to your home system, you might enter something
like this:
<?troff-ps_indent0?>
<blockquote><pre class="code">$ <tt class="userinput"><b>sz -a *.txt</b></tt></pre></blockquote>

<a name="INDEX-364" />
<tt class="command">sz</tt> would queue the files and successively send them
back to the local system. The <span class="option">-a</span> option stands
for <tt class="literal">ASCII</tt> and ensures that carriage returns and
newlines appear as they should on the system where the file ends up.</p>

<p>On the other hand, if you want to upload some files 
(receive them on the remote host), you would simply enter the following command:

<blockquote><pre class="code">$ <tt class="userinput"><b>rz</b></tt></pre></blockquote>

The remote system would then prompt something like this:
<a name="INDEX-365" />
 
<blockquote><pre class="code">rz ready to begin transfer, type "sz file &#133;" to your modem program 
**B0100000023be50</pre></blockquote>


<tt class="command">rz</tt> waits patiently for you to switch back to the
local host and give it a Zmodem send command, using
<tt class="command">sz</tt> directly, or through the
software you are using. For example, if you call the remote host
using ProComm, you would press Page Up and select
Zmodem transfer from the pop-up menu and then
enter the files to send on the input line ProComm provides.</p>

<p><img src="figs/bomb.gif">When sending files from a Macintosh system to a
Unix or Linux host via Zmodem

protocol, remember
that the filenames cannot have spaces in them.</p>

<p>The following command checks some text files and sends only the
<em class="filename">.txt</em> and <em class="filename">.doc</em> files that
exist on both systems and that are newer on the sending system.
Conversion of Unix newlines to
<span class="acronym">DOS</span>-style carriage return/linefeed is performed
automatically by most receiving Zmodem packages:
<blockquote><pre class="code">$ <tt class="userinput"><b>sz -Yan *.txt *.doc</b></tt></pre></blockquote></p>

<p>In many versions (not all, unfortunately) you can pipe the output of a
process from a remote host to <tt class="command">sz</tt> using a dash
argument (<tt class="command">sz -</tt>), and <tt class="command">sz</tt>
automatically sends the file on to you. A filename for the output is
generated by putting an <em class="filename">s</em> in front of the process
ID of the process that pipes the standard input to
<tt class="command">sz</tt> and appending a <em class="filename">.sz</em>
suffix. For example, to get a printout of the
<em class="filename">sz.1</em> manual page on the remote system (versions
of <tt class="command">sz</tt> software vary, of course), you might enter:
<blockquote><pre class="code">man sz | col -b | sz -</pre></blockquote>

where <tt class="literal">col -b</tt> strips out the backspacing that was put into the 
formatted output by
the <tt class="command">man</tt> command to implement highlighting and underscoring 
on the display. The dash argument to <tt class="command">sz</tt> tells it
to send the file back to your local system. When you get offline and 
check, you might find the file saved locally as something like 
<em class="filename">/tmp/s7750.sz</em>. (the
<em class="filename">/tmp</em> directory is the most common 
receiving directory that a given communications program uses unless 
the current directory is used.)</p>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="apph_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="apph_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">H. Zmodem File Transfer</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">H.3. Summary of rz and sz Options</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>