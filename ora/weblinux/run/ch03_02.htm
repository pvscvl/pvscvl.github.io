<?label 3.2. Post-Installation Procedures?><html><head><title>Post-Installation Procedures (Running Linux)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Running Linux" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch03_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm" /></td><td width="172" valign="top" align="right"><a href="ch03_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">3.2. Post-Installation Procedures</h2>

<p><a name="INDEX-833" />
<a name="INDEX-834" />
After you have completed installing the Linux software, you should be
able to reboot the system, log in as root, and begin exploring
the system. (Each distribution has a different method for doing 
this; follow the instructions given by the
<?troff \p?> distribution.)</p>

<p>Before you strike out on your own, however, there are some
tasks you should do now that may save you
a lot of grief later. Some of these tasks are trivial if you have the
right hardware and Linux distribution; others may involve a little
research on your part, and you may decide to postpone them.</p>

<div class="sect2">
<h3 class="sect2">3.2.1. Creating a User Account</h3>

<p><a name="INDEX-835" />
<a name="INDEX-836" />
In order to start using your system, you need to create a user 
account for yourself. Eventually, if you plan to have other users
on your system, you'll create user accounts for them as well. But 
before you begin to explore you need at least one account.</p>

<p><a name="INDEX-837" />
Why is this? Every Linux system has several preinstalled accounts, 
such as root. The root account, however, is intended 
exclusively for administrative purposes. As root you have all 
kinds of privileges and can access
all files on your system.</p>

<p><a name="INDEX-838" />
However, using root can be dangerous, especially if you're new
to Linux. Because there are no restrictions on what root can do,
it's all too easy to mistype a command, inadvertently delete files, damage your filesystem, and so on. You should log in as root only
when you need to perform system-administration tasks, such as fixing
configuration files, installing new software, and so on.  See the

section "<a href="ch05_01.htm">Section 5.1, "Running the System"</a>" in <a href="ch05_01.htm">Chapter 5, "Essential System Management"</a> for
details.</p>

<p>For normal usage, you should create a standard user account. 
Unix systems have built-in security that prevents users from deleting
other users' files and corrupting important resources, such as system 
configuration files. As a regular user,
you'll be protecting yourself from your own mistakes. This is especially
true for users who don't have Unix system-administration experience.</p>

<p><a name="INDEX-839" />
Many Linux distributions provide tools for creating new accounts.
These programs are usually called <tt class="command">useradd</tt> or <tt class="command">adduser</tt>. 


As root, invoking one of these commands should present you with 
a usage summary for the command, and creating a new account should be
fairly self-explanatory.</p>

<p>Most modern distributions provide a
generic system administration tool for various tasks, one of which
is creating a new user account.
<a name="INDEX-840" /></p>

<p>Again other distributions, like SuSE Linux or Caldera 
		Open Linux, integrate system installation and system
		administration in one tool: <tt class="command">yast</tt> on
		SuSE Linux or <tt class="command">lisa</tt> on Caldera Open
		Linux.</p>

<p>If all else fails, you can create an account by hand. Usually, all that is
required to create an account is:</p>

<ol><li><p><a name="INDEX-841" />
<a name="INDEX-842" />
 Edit the file <em class="filename">/etc/passwd</em> to add the new user.</p></li><li><p><a name="INDEX-843" />
<a name="INDEX-844" />
Optionally edit the file <em class="filename">/etc/shadow</em> to specify 
 
      "shadow password" attributes for the new user.</p></li><li><p> Create the user's home directory.</p></li><li><p><a name="INDEX-845" />
<a name="INDEX-846" />
 Copy skeleton configuration files (such as <em class="filename">.bashrc</em>) to the
      new user's home directory. These can sometimes be found in the
      directory <em class="filename">/etc/skel</em>.</p></li></ol><p />

<p>We don't want to go into great detail here: the particulars of
creating a new user account can be found in virtually every book on
Unix system administration (see the <a href="biblio.htm">Bibliography</a> for suggested reading).  We also talk
about creating users in the section

"<a href="ch05_07.htm">Section 5.7, "Managing User Accounts"</a>" in <a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>.  With luck, there will be a tool
provided to take care of these details for you.</p>

<p><a name="INDEX-847" />
Keep in mind that to set or change the password on the new account,
you use the <tt class="command">passwd</tt> command. For example, to change
the password for the user duck, issue the
following command:

<blockquote><pre class="code"># <tt class="userinput"><b>passwd duck</b></tt></pre></blockquote>


This will prompt you to set or change the password for <tt class="literal">duck</tt>. If
you execute the <tt class="command">passwd</tt> command as root, it will not prompt you for the original
password. In this way, if you have forgotten your old password, but
can still log in as root, you can
reset it.</p>

<a name="INDEX-848" /><a name="INDEX-849" />
</div>




<div class="sect2">
<h3 class="sect2">3.2.2. Getting Online Help</h3>

<p><a name="INDEX-850" />
<a name="INDEX-851" />
<a name="INDEX-852" />
Linux provides online help in the form of manual pages--or "man pages"
for short. Throughout this book, we'll be directing you to look at the manual 
pages for particular commands to get more information. Manual pages describe
programs and applications on the system in detail, and it's important for you
to learn how to access this online documentation in case you get
into a bind.</p>

<p><a name="INDEX-853" />
To get online help for a particular command, use the
<tt class="command">man</tt> command. For example, to get information on the
<tt class="command">passwd</tt> command, type the following command:
<blockquote><pre class="code">$ <tt class="userinput"><b>man passwd</b></tt></pre></blockquote>

This should present you with the manual page for <tt class="command">passwd</tt>.</p>

<p>Usually, manual pages are provided as an optional package with most 
distributions, so they won't be available unless you have opted to
install them. However, we very strongly advise you to install the
manual pages, you will feel lost many times without them.</p>

<p>In addition, certain manual pages may be missing or incomplete on your
system. It depends on how complete your distribution is  and how 
up-to-date the manual pages are.</p>

<p>Linux manual pages also document system calls, library functions, 
configuration file formats, and kernel internals. In the section

"<a href="ch04_12.htm">Section 4.12, "Manual Pages"</a>" in
<a href="ch04_01.htm">Chapter 4, "Basic Unix
 Commands
 and Concepts"</a>, we'll describe their use
in more detail.</p>

<p>Besides traditional manual pages, there are also so-called info
pages. These can be read either with the text editor Emacs, the
command <tt class="command">info</tt> or one of many graphical info readers
available.</p>

<p>Many distributions also provide documentation in HTML format that you 
can read with any Web browser like Netscape Navigator but also with
the text editor Emacs.</p>

<p>Finally, there are documentation files that are simply plain text. You 
can read these with any text editor or simply with the command
<tt class="command">more</tt>.</p>

<p>If you cannot find documentation for a certain command, you can also
try running it with either the <span class="option">-h</span> or
<span class="option">- -</span> option. Most commands then provide a brief 
summary of their usage.</p>

<?troff .sp -.3?>
</div>




<div class="sect2">
<h3 class="sect2">3.2.3. Editing /etc/fstab</h3>

<p><a name="INDEX-854" />
<a name="INDEX-855" />
<a name="INDEX-856" />
In order to ensure that all of your Linux filesystems will be 
available when you reboot the system, you may need to edit
the file <em class="filename">/etc/fstab</em>, which describes your filesystems. 
 
Many distributions automatically generate the <em class="filename">/etc/fstab</em> file 
for you during installation, so all may be well. However, 
if you have additional filesystems that were not used during the 
installation process, you may need to add them to <em class="filename">/etc/fstab</em>
in order to make them available. Swap partitions should be included
in <em class="filename">/etc/fstab</em> as well.</p>

<p>In order to access a filesystem, it must be
<em class="emphasis">mounted</em> on your system. Mounting a
filesystem associates that filesystem with a particular directory.
For example, the root filesystem is mounted on <em class="filename">/</em>, the 
<em class="filename">/usr</em> filesystem on <em class="filename">/usr</em>, and so on. (If you did not create 
a separate filesystem for <em class="filename">/usr</em>, all files under <em class="filename">/usr</em> will
be stored on the root filesystem.)</p>

<p>We don't want to smother you with technical details here, but it is
important to understand how to make your filesystems available before
exploring the system. For more details on mounting filesystems, see

the section "<a href="ch06_01.htm">Section 6.1.2, "Mounting Filesystems"</a>" in
<a href="ch06_01.htm">Chapter 6, "Managing
 Filesystems, Swap,
 and Devices"</a>, or any book on Unix system
administration.
<a name="INDEX-857" /></p>

<p>The root filesystem is automatically mounted on <em class="filename">/</em>
when you boot Linux. However, your other filesystems must be mounted
individually. Usually, this is accomplished by the command:
<a name="INDEX-858" />
<blockquote><pre class="code">
#<tt class="userinput"><b> mount -av</b></tt></pre></blockquote>

<?troff .ne 10?>
in one of the system startup files in <em class="filename">/etc/rc.d</em>
or wherever your distribution stores its configuration files. This tells 
the <tt class="command">mount</tt> command to mount any filesystems listed in the file
<em class="filename">/etc/fstab</em>. Therefore, in order to have your filesystems mounted
automatically at boot time, you need to include them in <em class="filename">/etc/fstab</em>.
(Of course, you could always mount the filesystems by hand, using the
<tt class="command">mount</tt> command after booting, but this is unnecessary work.)</p>

<p> 
 
Here is a sample <em class="filename">/etc/fstab</em> file. In this example, the root filesystem
is on <em class="filename">/dev/hda1</em>, the <em class="filename">/home</em> filesystem is on <em class="filename">/dev/hdb2</em>, 
and the swap partition is on <em class="filename">/dev/hdb1</em>:</p>

<blockquote><pre class="code"># /etc/fstab 
# device      directory   type   options  
# 
/dev/hda1     /           ext2   defaults 
/dev/hdb2     /home       ext2   defaults
/dev/hdb1     none        swap   sw 
/proc         /proc       proc   defaults</pre></blockquote>

<p><a name="INDEX-859" />
<a name="INDEX-860" />
<a name="INDEX-861" /> 
The lines beginning with the "<tt class="literal">#</tt>" character are comments. Also,
you'll notice an additional entry for <em class="filename">/proc</em>. <em class="filename">/proc</em> is a
 
"virtual filesystem" used to gather process information by commands
such as <tt class="command">ps</tt>.</p>

<p>As you can see, <em class="filename">/etc/fstab</em> consists of a series of lines. The first
field of each line is the device name of the partition, such as 
<em class="filename">/dev/hda1</em>. The second field is the <em class="emphasis">mount point</em>--the directory
where the filesystem is mounted. The third field is the type; 
Linux <em class="emphasis">ext2fs</em> filesystems should use <tt class="literal">ext2</tt> for this
field. <tt class="literal">swap</tt> should be used for swap partitions.
The fourth field is for mounting options. You should use
<tt class="literal">defaults</tt> in this field for filesystems and <tt class="literal">sw</tt>
for swap partitions.</p>

<p>Using this example as a model, you should be able to add entries for
any filesystems not already listed in the <em class="filename">/etc/fstab</em>
 
file.</p>

<p>How do we add entries to the file? The easiest way is to edit the
file, as root, using an editor such as <tt class="command">vi</tt> or Emacs.
We won't get into the use of text editors here--<tt class="command">vi</tt> and

Emacs are both covered at the beginning of
<a href="ch09_01.htm">Chapter 9, "Editors, Text Tools,
 Graphics,
 and Printing"</a>.</p>

<p>After editing the file, you'll need to issue the command:
<blockquote><pre class="code"># <tt class="userinput"><b>/bin/mount -a</b></tt></pre></blockquote>

or reboot for the changes to take effect.</p>

<p>If you're stuck at this point, don't be alarmed. We suggest that Unix
novices do some reading on basic Unix usage and system administration.
Most of the remainder of this book is going to assume familiarity with
these basics, so don't say we didn't warn you.</p>

<a name="INDEX-862" /><a name="INDEX-863" /><a name="INDEX-864" />
</div>




<div class="sect2">
<h3 class="sect2">3.2.4. Shutting Down the System</h3>

<p>
<a name="INDEX-865" />
<a name="INDEX-866" />
<a name="INDEX-867" />

<img src="figs/bomb.gif">&nbsp;&nbsp;
You should never reboot or shut down your Linux system by pressing the
reset switch or simply turning off the power. As with most
Unix systems, Linux caches disk writes in
memory. Therefore, if you suddenly reboot the system without shutting
down "cleanly," you can corrupt the data on your
drives. Note, however, that the "Vulcan nerve pinch"
<a name="INDEX-868" />
<a name="INDEX-869" />
(pressing Ctrl-Alt-Del in unison) is generally safe: the kernel traps

the key sequence and initiates a clean shutdown of the system (as
described in the section "<a href="ch05_03.htm">Section 5.3.2, "init, inittab, and rc files"</a>" in <a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>.  Your system
configuration might reserve the Ctrl-Alt-Del for the system administrator
so that normal users cannot shut down the network server that the whole
department depends upon. To set permissions for this keystroke combination, create a file called
<em class="filename">/etc/shutdown.allow</em> that lists the names of all
the users that are allowed to shut down the machine.</p>

<p><a name="INDEX-870" />
The easiest way to shut down the system is with the
<tt class="command">shutdown</tt> command. 
As an example, to shutdown and reboot the system immediately, use the
following command as root:
<blockquote><pre class="code"># <tt class="userinput"><b>shutdown -r now</b></tt></pre></blockquote>

 
 
This will cleanly reboot your system. The manual page for
<tt class="command">shutdown</tt> 
describes the other available command-line arguments. Instead of
<tt class="literal">now</tt>, you can also specify when the system should be 
shut down. Most distributions also provide <tt class="command">halt</tt>,
which calls <tt class="command">shutdown now</tt>. On some distributions,
<a name="INDEX-871" />
there is also <tt class="command">poweroff</tt> which actually shuts the
computer down and turns it off. Whether 
it works depends on the hardware (which must support APM), not on Linux.
<a name="INDEX-872" /><a name="INDEX-873" /></p>
</div>




<a name="INDEX-874" /><a name="INDEX-875" />


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch03_01.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch03_03.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">3. Installation
 and Initial
 Configuration</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">3.3. Running Into Trouble</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>