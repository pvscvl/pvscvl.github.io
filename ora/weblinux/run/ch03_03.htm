<?label 3.3. Running Into Trouble?><html><head><title>Running Into Trouble (Running Linux)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Running Linux" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch03_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm" /></td><td width="172" valign="top" align="right"><a href="ch04_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">3.3. Running Into Trouble</h2>

<p><a name="INDEX-876" />
<a name="INDEX-877" />
<a name="INDEX-878" />
Almost everyone runs into some kind of snag or hangup when attempting
to install Linux the first time. Most of the time, the problem is caused
by a simple misunderstanding. Sometimes, however, it can be something
more serious, such as an oversight by one of the developers or a bug.</p>

<p>This section will describe some of the
most common installation problems and how to solve them. If your installation
appears to be successful, but you received unexpected error messages
during the installation, these are described here as well.</p>

<a name="x-100-3-sec-install-probs-booting" /><div class="sect2">
<h3 class="sect2">3.3.1. Problems with Booting the Installation Media</h3>

<a name="INDEX-879" /><p>
When attempting to boot the installation media for the first time, you
may encounter a number of problems. Note that the following problems are <em class="emphasis">not</em> related to booting
your newly installed Linux system. See the section "<a href="ch03_03.htm">Section 3.3.4, "Problems After Installing Linux"</a>" for
information on these kinds of pitfalls.</p>

<dl>
<dt><b><em class="emphasis">Floppy or media error occurs when attempting to boot.</em></b></dt><dd><p><a name="INDEX-880" />
The most popular
cause for this kind of problem is a corrupt boot floppy. Either the
floppy is physically damaged, in which case you should recreate the
disk with a brand new floppy, or the data on the floppy is bad,
in which case you should verify that you downloaded and transferred the
data to the floppy correctly. In many cases, simply recreating the boot
floppy will solve your problems. Retrace your steps and try again.</p>

<p>If you received your boot floppy from a mail-order vendor or some other
distributor, instead of downloading and creating it yourself, contact the
distributor and ask for a new boot floppy--but only after verifying that
this is indeed the problem.</p></dd>


<dt><b><em class="emphasis">System "hangs" during boot or after booting.</em></b></dt><dd><p><a name="INDEX-881" />
<a name="INDEX-882" />
After the installation
media boots, you see a number of messages from the kernel itself, 
indicating which devices were detected and configured. After this, you are
usually presented with a login prompt, allowing you to proceed with
installation (some distributions instead drop you right into an installation
program of some kind). The system may appear to "hang"
during several of these steps. Be patient; loading
software from floppy is very slow. In many cases, the system has not
hung at all, but is merely taking a long time. Verify that there is no
drive or system activity for at least several minutes before assuming that 
system is hung.</p>

<p>The proper boot sequence is:</p>

<ol><li><p>After booting from the <span class="acronym">LILO</span> prompt, the system must load the
kernel image from floppy. This may take several seconds; you know
things are going well if the floppy drive light is still on.</p></li><li><p><a name="INDEX-883" />
While the kernel boots, <span class="acronym">SCSI</span> devices must be probed
for. If you do not have any <span class="acronym">SCSI</span> devices installed,
the system will "hang" for up to 15 seconds while the
<span class="acronym">SCSI</span> probe continues; this usually occurs after the
line:

<blockquote><pre class="code">lp_init: lp1 exists (0), using polling driver</pre></blockquote>


appears on your screen.</p></li><li><p><a name="INDEX-884" />
<a name="INDEX-885" />
 After the kernel is finished booting, control is transferred to the
system bootup files on the floppy. Finally, you will be presented with
a login prompt, or be dropped into an installation program. If you are
presented with a login prompt such as:

<blockquote><pre class="code">Linux login:</pre></blockquote>


you should then log in (usually as root or install--this varies
with each distribution). After entering the username, the system may 
pause for 20 seconds or more while the installation program or shell is
being loaded from floppy. Again, the floppy drive light should be on. 
Don't assume the system is hung.</p></li></ol><p><a name="INDEX-886" />
Each of the preceding activities may cause a delay that makes you
think the system has stopped.
However, it
is possible that the system actually may "hang" while
booting, which can be due to several causes. First of all, you may not
have enough available <span class="acronym">RAM</span> to boot the installation
media. (See the following item for information on disabling the
ramdisk to free up memory.)</p>

<p><a name="INDEX-887" />
<a name="INDEX-888" />
Hardware incompatibility causes many system hangs. 
The section "<a href="ch01_09.htm">Section 1.9, "Hardware Requirements"</a>"
in <a href="ch01_01.htm">Chapter 1, "Introduction
 to Linux"</a>, presents an overview of

supported hardware under Linux. Even if your hardware is supported,
you may run into problems with incompatible hardware configurations
that are causing the system to hang. See the next section, "<a href="ch03_03.htm">Section 3.3.2, "Hardware Problems"</a>," for a discussion
of hardware incompatibilities:</p></dd>


<dt><b><em class="emphasis">System reports out-of-memory errors while attempting to
boot or install the software.</em></b></dt><dd><p><a name="INDEX-889" />
<a name="INDEX-890" />
This problem relates to the amount of <span class="acronym">RAM</span> you have
available. On systems with 4 MB of <span class="acronym">RAM</span> or less, you
may run into trouble booting the installation media or installing the
software itself. This is because many distributions use a
"ramdisk," which is a filesystem loaded directly into
<span class="acronym">RAM</span>, for operations while using the installation
media. The entire image of the installation boot floppy, for example,
may be loaded into a ramdisk, which may require more than 1 MB
of <span class="acronym">RAM</span>.</p>

<p><a name="INDEX-891" />
The solution to this problem is to disable the ramdisk option when
booting the install media. Each release has a different procedure for
doing this; on the <span class="acronym">SLS</span> release, for example, you
type <tt class="literal">floppy</tt> at the <span class="acronym">LILO</span> prompt
when booting the <em class="filename">a1</em> disk.  See your
distribution's documentation for details.</p>

<p>You may not see an "out of memory" error when attempting
to boot or install the software; instead, the system may unexpectedly
hang or fail to boot. If your system hangs, and none of the
explanations in the previous section seem to be the cause, try
disabling the ramdisk.</p>

<p>Keep in mind that Linux itself requires at least 4 MB of
<span class="acronym">RAM</span> to run at all; almost all current distributions
of Linux require 8 MB or more.</p></dd>


<dt><b><em class="emphasis">The system reports an error, such as "Permission
denied" or "File not found" while booting.</em></b></dt><dd><p><a name="INDEX-892" />
<a name="INDEX-893" />
This is an indication that your installation boot media is corrupt. If you
attempt to boot from the installation media (and you're sure you're
doing everything correctly), you should not see any errors such as this. 
Contact the distributor of your Linux software and find out about the problem,
and perhaps obtain another copy of the boot media if necessary. If you 
downloaded the boot disk yourself, try recreating the boot disk, and
see if this solves your problem.</p></dd>


<dt><b><em class="emphasis">The system reports the error
"VFS: Unable to mount root" when booting.</em></b></dt><dd><p><a name="INDEX-894" />
<a name="INDEX-895" />
<a name="INDEX-896" />
<a name="INDEX-897" />
This error message means that the root filesystem (found on the boot 
media itself) could not be found. This means that either your boot
media is corrupt or that you are not booting the system correctly.</p>

<p>For example, many <span class="acronym">CD-ROM</span> distributions require you
to have the <span class="acronym">CD-ROM</span> 
in the drive when booting. Also be sure that the
<span class="acronym">CD-ROM</span> drive is on, and
check for any activity. It's also possible the system is not locating 
your <span class="acronym">CD-ROM</span> drive at boot time; see 
the next section,
"<a href="ch03_03.htm">Section 3.3.2, "Hardware Problems"</a>,"
for more information.</p>

<p>If you're sure you are booting the system correctly, then your 
boot media may indeed be corrupt. This is an uncommon problem, so 
try other solutions before attempting to use another boot floppy or tape.
<a name="INDEX-898" /></p></dd>

</dl>
</div>




<a name="x-100-3-sec-install-probs-hardware" /><div class="sect2">
<h3 class="sect2">3.3.2. Hardware Problems</h3>

<p><a name="INDEX-899" />
<a name="INDEX-900" />
<a name="INDEX-901" /><a name="INDEX-902" />
The most common problem encountered when attempting to install or use Linux
is an incompatibility with hardware. Even if all your hardware is supported
by Linux, a misconfiguration or hardware conflict can sometimes cause
strange results: your devices may not be detected at boot time, or
the system may hang.</p>

<p>It is important to isolate these hardware problems if you suspect 
they may be the source of your trouble. In the following sections, 
we describe some common hardware problems and how to resolve them.</p>

<a name="x-100-3-sec-install-probs-hardware-conflicts" /><div class="sect3">
<h3 class="sect3">3.3.2.1. Isolating hardware problems</h3>

<p>If you experience a problem you believe is hardware-related, 
the first thing to do is attempt to isolate the problem.
This means eliminating all possible variables and (usually) taking the
system apart, piece-by-piece, until the offending piece of hardware is
isolated.</p>

<p>This is not as frightening as it may sound. Basically, you should remove 
all nonessential hardware from your system (after turning the power
off), and then determine which  
device is actually causing the trouble--possibly by reinserting each
device, one at a time. This means you should remove all hardware other
than the floppy and video controllers, and, of course, the keyboard. Even
innocent-looking devices, such as mouse controllers, can wreak unknown havoc on
your peace of mind unless you consider them nonessential.</p>

<p>For example, let's say the system hangs during the Ethernet board detection
sequence at boot time. You might hypothesize that there is a conflict or
problem with the Ethernet board in your machine. The quick and easy way to
find out is to pull the Ethernet board and try booting again. If everything
goes well when you reboot, then you know that either the Ethernet board is not 

supported by Linux (see the section "<a href="ch01_09.htm">Section 1.9, "Hardware Requirements"</a>" in
<a href="ch01_01.htm">Chapter 1, "Introduction
 to Linux"</a> for a list
of compatible boards), or there is an address or
<span class="acronym">IRQ</span> conflict with the board. In addition, some
badly designed network boards (mostly NE2000 clones) can hang the
entire system when they auto-probed. If this appears to be the case
for you, your best bet is to remove the network board from the system
during the installation and put it back in later, or pass the
appropriate kernel parameters during boot-up so that auto-probing of
the network board can be avoided. The most permanent fix is to
dump that card and get a new one from another vendor that designs its
hardware more carefully.</p>

<p><a name="INDEX-903" />
<a name="INDEX-904" />
"Address or <span class="acronym">IRQ</span> conflict?" What on
earth does that mean?  All devices in your machine use an
<em class="emphasis">interrupt request line</em>, or
<span class="acronym">IRQ</span>, to tell the system they need something done on
their behalf. You can think of the <span class="acronym">IRQ</span> as a cord
the device tugs when it needs the system to take care of some pending
request.  If more than one device is tugging on the same cord, the
kernel won't be able to determine which device it needs to
service. Instant mayhem.</p>

<p>Therefore, be sure all your installed devices are using unique
<span class="acronym">IRQ</span> lines. In general, the <span class="acronym">IRQ</span>
for a device can be set by jumpers on the card; see the documentation
for the particular device for details.  Some devices do not require an
<span class="acronym">IRQ</span> at all, but it is suggested you configure them
to use one if possible (the Seagate ST01 and ST02
<span class="acronym">SCSI</span> controllers being good examples).</p>

<p><a name="INDEX-905" />
In some cases, the kernel provided on your installation media is
configured to use a certain <span class="acronym">IRQ</span> for certain
devices. For example, on some distributions of Linux, the kernel is
preconfigured to use <span class="acronym">IRQ</span> 5 for the
<span class="acronym">TMC</span>-950 <span class="acronym">SCSI</span> controller, the
Mitsumi <span class="acronym">CD-ROM</span> controller, and the busmouse driver.
If you want to use two or more of these devices, you'll need first to
install Linux with only one of these devices enabled, then recompile
the kernel in order to change the default <span class="acronym">IRQ</span> for
one of them.

(See the section "<a href="ch07_04.htm">Section 7.4, "Building a New Kernel"</a>" in
<a href="ch07_01.htm">Chapter 7, "Upgrading Software and the Kernel"</a>, for information on recompiling the
kernel.)</p>

<p><a name="INDEX-906" />
<a name="INDEX-907" />
<a name="INDEX-908" />
<a name="INDEX-909" />
<a name="INDEX-910" />
Another area where hardware conflicts can arise is with
<em class="emphasis">direct memory access</em> (<span class="acronym">DMA</span>)
channels, I/O addresses, and shared memory addresses. All these terms
describe mechanisms through which the system interfaces with hardware
devices. Some Ethernet boards, for example, use a shared memory
address as well as an <span class="acronym">IRQ</span> to interface with the
system. If any of these are in conflict with other devices, the system
may behave unexpectedly.  You should be able to change the <span class="acronym">DMA</span>
channel, I/O, or shared memory addresses for your various devices with
jumper settings. (Unfortunately, some devices don't allow you to
change these settings.)</p>

<p>The documentation for your various hardware devices should specify the
<span class="acronym">IRQ</span>, <span class="acronym">DMA</span> channel, I/O address,
or shared memory address the devices use, and how to configure
them. Again, the simple way to get around these problems is to
<?troff \p?> temporarily disable the conflicting devices until you have time to
determine the cause of the problem.</p>

<p><a href="ch03_03.htm">Table 3-1</a> is a list of <span class="acronym">IRQ</span> and <span class="acronym">DMA</span>
channels used by various "standard" devices found on most
systems. Almost all systems have some of these devices, so you should
avoid setting the <span class="acronym">IRQ</span> or <span class="acronym">DMA</span> of
other devices to these values.</p>

<a name="x-100-3-table-dev-settings" /><h4 class="objtitle">Table 3-1. Common Device Settings</h4><table border="1">

<tr>
<th>Device</th>
<th>I/O address</th>
<th><span class="acronym">IRQ</span></th>
<th><span class="acronym">DMA</span></th>
</tr>




<tr>
<td rowspan="0"><em class="filename">ttyS0</em> (<em class="filename">COM1</em>)</td>
<td rowspan="0">3f8</td>
<td rowspan="0">4</td>
<td rowspan="0">n/a</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">ttyS1</em> (<em class="filename">COM2</em>)</td>
<td rowspan="0">2f8</td>
<td rowspan="0">3</td>
<td rowspan="0">n/a</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">ttyS2</em> (<em class="filename">COM3</em>)</td>
<td rowspan="0">3e8</td>
<td rowspan="0">4</td>
<td rowspan="0">n/a</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">ttyS3</em> (<em class="filename">COM4</em>)</td>
<td rowspan="0">2e8</td>
<td rowspan="0">3</td>
<td rowspan="0">n/a</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">lp0</em> (<em class="filename">LPT1</em>)</td>
<td rowspan="0">378 - 37f</td>
<td rowspan="0">7</td>
<td rowspan="0">n/a</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">lp1</em> (<em class="filename">LPT2</em>)</td>
<td rowspan="0">278 - 27f</td>
<td rowspan="0">5</td>
<td rowspan="0">n/a</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">fd0</em>, <em class="filename">fd1</em> (floppies 1 and 2)</td>
<td rowspan="0">3f0 - 3f7</td>
<td rowspan="0">6</td>
<td rowspan="0">2</td>
</tr>

<tr>
<td rowspan="0"><em class="filename">fd2</em>, <em class="filename">fd3</em> (floppies 3 and 4)</td>
<td rowspan="0">370 - 377</td>
<td rowspan="0">10</td>
<td rowspan="0">3</td>
</tr>


</table>
</div>


<div class="sect3">
<h3 class="sect3">3.3.2.2. Problems recognizing hard drive or controller</h3>

<p><a name="INDEX-911" />
<a name="INDEX-912" />
<a name="INDEX-913" /></p>

<p>When Linux boots, you see a series of messages on your screen such
as the
<?troff \p?> following: 
<blockquote><pre class="code">Console: colour EGA+ 80x25, 8 virtual consoles 
Serial driver version 3.96 with no serial options enabled 
tty00 at 0x03f8 (irq = 4) is a 16450 
tty03 at 0x02e8 (irq = 3) is a 16550A 
lp_init: lp1 exists (0), using polling driver 
&#133;</pre></blockquote>

Here, the kernel is detecting the various hardware devices present on your
system. At some point, you should see the line:
<blockquote><pre class="code">Partition check:</pre></blockquote>

followed by a list of recognized partitions, for example:
<blockquote><pre class="code">Partition check: 
  hda: hda1 hda2 
  hdb: hdb1 hdb2 hdb3</pre></blockquote>

If, for some reason, your drives or partitions are not recognized,
you will not be able to access them in any way.</p>

<?troff .wcon_off?><p>There are several conditions that can cause this to happen:</p>

<dl>
<dt><b><em class="emphasis">Hard drive or controller not supported</em></b></dt><dd><p>If you are using a
hard drive controller (<span class="acronym">IDE</span>, <span class="acronym">SCSI</span>, or otherwise) not supported by 
Linux, the kernel will not recognize your partitions at boot time.</p></dd>


<dt><b><em class="emphasis">Drive or controller improperly configured</em></b></dt><dd><p>Even if your controller is supported by Linux, it may not be configured 
correctly. (This is a problem particularly for <span class="acronym">SCSI</span> controllers; most 
non-<span class="acronym">SCSI</span> controllers should work fine without additional configuration.)</p>

<p>Refer to the documentation for your hard drive and controller for
information on solving these kinds of problems. In particular, many
hard drives will need to have a jumper set if they are to be used as a
"slave" drive (e.g., as the second hard drive). The
acid test for this kind of condition is to boot up
<span class="acronym">MS-DOS</span> or some other operating system known to work
with your drive and controller. If you can access the drive and
controller from another operating system, then it is not a problem
with your hardware configuration.</p>

<p>See the previous section, "<a href="ch03_03.htm">Section 3.3.2.1, "Isolating hardware problems"</a>," for
information on resolving possible device conflicts and 
the following section, "<a href="ch03_03.htm">Section 3.3.2.3, "Problems with SCSI controllers and devices"</a>," for information on
configuring <span class="acronym">SCSI</span> devices.</p></dd>


<dt><b><em class="emphasis">Controller properly configured, but not detected</em></b></dt><dd><p>Some <span class="acronym">BIOS</span>-less <span class="acronym">SCSI</span> controllers require the user to specify information about 
the controller at boot time. The following section,
"<a href="ch03_03.htm">Section 3.3.2.3, "Problems with SCSI controllers and devices"</a>,"
describes how to force hardware detection for these
<?troff \p?> controllers.</p></dd>


<dt><b><em class="emphasis">Hard drive geometry not recognized</em></b></dt><dd><p><a name="INDEX-914" />
<a name="INDEX-915" />
<a name="INDEX-916" />
Some systems, such as
the <span class="acronym">IBM PS</span>/ValuePoint, do not store hard-drive geometry information in 
the <span class="acronym">CMOS</span> memory where Linux expects to find
it. Also, certain <span class="acronym">SCSI</span>
controllers need to be told where to find drive geometry in order for
Linux to recognize the layout of your drive.</p>

<p><a name="INDEX-917" />
Most distributions provide a boot option to specify the 
drive geometry. In general, when booting the installation
media, you can specify the drive geometry at the <span class="acronym">LILO</span> boot prompt with
a command such as:
<blockquote><pre class="code">boot: linux hd=<em class="replaceable">cylinders</em>,<em class="replaceable">heads</em>,<em class="replaceable">sectors</em></pre></blockquote>

where <em class="replaceable">cylinders</em>, <em class="replaceable">heads</em>, and <em class="replaceable">sectors</em> correspond
to the number of cylinders, heads, and sectors per track for your hard
drive.</p>

<p>After installing the Linux software, you can install <span class="acronym">LILO</span>, 
allowing you to boot from the hard drive. At that time, you can specify the
drive geometry to the <span class="acronym">LILO</span> installation procedure, making it unnecessary to
enter the drive geometry each time you boot. See the section

"<a href="ch05_02.htm">Section 5.2.2, "Using LILO"</a>" in <a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>
for more about <span class="acronym">LILO</span>.</p></dd>

</dl>
</div>


<a name="x-100-3-sec-install-probs-hardware-scsi" /><div class="sect3">
<h3 class="sect3">3.3.2.3. Problems with SCSI controllers and devices</h3>

<p><a name="INDEX-918" />
Presented here are some of the most common problems with
<span class="acronym">SCSI</span> controllers and devices, such as <span class="acronym">CD-ROM</span>s, hard
drives, and tape drives. If you are having problems getting Linux to
recognize your drive or controller, read on. Let us again
emphasize that most distributions use a modularized kernel and that
you might have to load a module supporting your hardware during an
early phase of the installation process. This might also be done
automatically for you.</p>

<p>
The Linux <span class="acronym">SCSI</span> <span class="acronym">HOWTO</span> contains much useful
information on <span class="acronym">SCSI</span> devices in addition to that
listed here. <span class="acronym">SCSI</span>s can be particularly tricky to
configure at times.</p>

<p>It might be
economizing on the false end, for example, if you use cheap cables, especially if you use wide <span class="acronym">SCSI</span>. Cheap cables are a
major source of problems and can cause all kinds of failures, as well as major headaches. If you use <span class="acronym">SCSI</span>, use proper
cabling.</p>

<p>Here are common problems and possible solutions:</p>

<dl>
<dt><b><em class="emphasis">A SCSI device is detected at all possible IDs.</em></b></dt><dd><p>This problem occurs when the system straps the device to the same address as the controller. You need to
change the jumper settings so that the drive uses a different address from
the controller itself.</p></dd>


<dt><b><em class="emphasis">Linux reports sense errors, even if the devices are known to be error-free.</em></b></dt><dd><p><a name="INDEX-919" />
<a name="INDEX-920" />
This can be caused by bad cables or by bad termination. If your
<span class="acronym">SCSI</span> bus is not terminated at both ends, you may have errors accessing <span class="acronym">SCSI</span>
devices. When in doubt, always check your cables. In addition to
disconnected cables, bad-quality cables
are a not-so-uncommon source of troubles.</p></dd>


<dt><b><em class="emphasis">SCSI devices report timeout errors.</em></b></dt><dd><p><a name="INDEX-921" />
This is usually caused by 
a conflict with <span class="acronym">IRQ</span>, <span class="acronym">DMA</span>, or device addresses. Also, check that interrupts
are enabled correctly on your controller.</p></dd>


<dt><b><em class="emphasis">SCSI controllers using BIOS are not detected.</em></b></dt><dd><p><a name="INDEX-922" />
Detection of
controllers using <span class="acronym">BIOS</span> will fail if the <span class="acronym">BIOS</span> is disabled, or if your 
controller's "signature" is not recognized by the
kernel. See the Linux <span class="acronym">SCSI</span> <span class="acronym">HOWTO</span> for more information about this.</p></dd>


<dt><b><em class="emphasis">Controllers using memory-mapped I/O do not work.</em></b></dt><dd><p><a name="INDEX-923" />
<a name="INDEX-924" />
This happens
when the memory-mapped I/O ports are incorrectly cached. Either mark the
board's address space as uncacheable in the <span class="acronym">XCMOS</span>
settings, or disable cache altogether.</p></dd>


<dt><b><em class="emphasis">When partitioning, you get a warning "cylinders &gt; 1024," or you are unable to boot from a partition using cylinders numbered 
above 1023.</em></b></dt><dd><p><a name="INDEX-925" />
<a name="INDEX-926" />
<span class="acronym">BIOS</span> limits the number of cylinders to 1024, and
any partition using cylinders numbered above this won't be accessible
from the <span class="acronym">BIOS</span>. As far as Linux is concerned, this
affects only booting; once the system has booted, you should be able
to access the partition. Your options are to either boot Linux from a
boot floppy, or boot from a partition using cylinders numbered below
1024. See the section "<a href="ch03_01.htm">Section 3.1.7, "Creating the Boot Floppy or Installing LILO"</a>" earlier in this chapter.</p></dd>


<dt><b><em class="emphasis">CD-ROM drive or other removable media devices
are not recognized at boot time.</em></b></dt><dd><p>Try booting with a <span class="acronym">CD-ROM</span> (or disk) in the drive. This is 
necessary for some devices.</p></dd>

</dl>

<p>If your <span class="acronym">SCSI</span> controller is not recognized, you may
need to force hardware detection at boot time. This is particularly
important for <span class="acronym">SCSI</span>
controllers without <span class="acronym">BIOS</span>. Most distributions allow you to specify the controller
<span class="acronym">IRQ</span> and shared memory address when booting the
installation media. For example, if you are using a
<span class="acronym">TMC</span>-8xx controller, you may be able to enter:

<blockquote><pre class="code">boot: linux tmx8xx=<em class="replaceable">interrupt</em>,<em class="replaceable">memory-address</em></pre></blockquote>


at the <span class="acronym">LILO</span> boot prompt, where
<em class="replaceable">interrupt</em> is the <span class="acronym">IRQ</span> of
controller, and <em class="replaceable">memory-address</em> is the
shared memory address. Whether you can do this depends on the
distribution of Linux you are using; consult your documentation for
details.</p>

<a name="INDEX-927" /><a name="INDEX-928" /><a name="INDEX-929" />
</div>
</div>




<a name="x-100-3-sec-install-probs-install" /><div class="sect2">
<h3 class="sect2">3.3.3. Problems Installing the Software</h3>

<p><a name="INDEX-930" />
<a name="INDEX-931" />
<a name="INDEX-932" />
<a name="INDEX-933" />

Installing the Linux software should be trouble free
if you're lucky. The only problems you might experience would be
related to corrupt installation media or lack of space on your Linux
filesystems. Here is a list of common problems:</p>

<dl>
<dt><b><em class="emphasis">System reports "Read error, file not found," or other
errors while attempting to install the software.</em></b></dt><dd><p><a name="INDEX-934" />
This is indicative of
a problem with your installation media. If you are installing from floppy,
keep in mind that floppies are quite susceptible to media errors of this
type. Be sure to use brand-new, newly formatted floppies. If you have
a Windows partition on your drive, many Linux distributions allow you 
to install the software from the hard drive. This may be faster and more
reliable than using floppies.</p>

<p>If you are using a <span class="acronym">CD-ROM</span>, be sure to check the disk for scratches, dust, or
other problems that might cause media errors.</p>

<p><a name="INDEX-935" />
The cause of the problem may also be that the media is in the incorrect format.
For example, if using floppies, many Linux distributions require
floppies to be formatted in high-density <span class="acronym">MS-DOS</span>
format. (The boot floppy is
the exception; it is not in <span class="acronym">MS-DOS</span> format in most
cases.) If all else fails,
either obtain a new set of floppies, or recreate the floppies (using
new ones) if you downloaded the software yourself.</p></dd>


<dt><b><em class="emphasis">System reports errors such as "tar:
read error" or "gzip: not in gzip format."</em></b></dt><dd><p><a name="INDEX-936" />
<a name="INDEX-937" />
This problem is usually caused by corrupt files
on the installation media itself. In other words,
your floppy may be error-free, but the data on the floppy is in some way
corrupted. For example, if you downloaded the Linux software using text mode,
rather than binary mode, your files will be corrupt and unreadable
by the installation software. When using FTP, just issue the
<tt class="command">binary</tt> command to set that mode before you request a file transfer.
<a name="INDEX-938" /></p></dd>


<dt><b><em class="emphasis">System reports errors such as
"device full" while installing.</em></b></dt><dd><p><a name="INDEX-939" />
<a name="INDEX-940" />
<a name="INDEX-941" />
This is a clear-cut sign you have run out of space when installing
the software. If the disk fills up, not all distributions can clearly recover, so aborting the installation won't give you a working system.</p>

<p>The solution is usually to recreate your
filesystems with the <tt class="command">mke2fs</tt> command, which will delete the 
partially installed software. You can then attempt to reinstall the
software, this time selecting a smaller amount of software to install.
In other cases, you may need to start completely from scratch, and 
rethink your partition and filesystem sizes.</p></dd>


<dt><b><em class="emphasis">System reports errors such as
"read_intr: 0x10" while accessing the hard drive.</em></b></dt><dd><p><a name="INDEX-942" />
<a name="INDEX-943" />
<a name="INDEX-944" />
<a name="INDEX-945" />
<a name="INDEX-946" />
This is usually an indication of bad blocks on your drive. However, if you
receive 
these errors while using <tt class="command">mkswap</tt> or <tt class="command">mke2fs</tt>, the system may
be having trouble accessing your drive. This can either be a hardware 
problem (see the section "<a href="ch03_03.htm">Section 3.3.2, "Hardware Problems"</a>"
earlier in this chapter), or it might
be a case of poorly specified geometry. If you used the option:

<blockquote><pre class="code">hd=<em class="replaceable">cylinders</em>,<em class="replaceable">heads</em>,<em class="replaceable">sectors</em></pre></blockquote>


<a name="INDEX-947" />
at boot time to force detection of your drive geometry and 
incorrectly specified the geometry, you could receive this error.
This can also happen if your drive geometry is incorrectly specified in
the system <span class="acronym">CMOS</span>.</p></dd>


<dt><b><em class="emphasis">System reports errors such as
"file not found" or
"permission denied."</em></b></dt><dd><p><a name="INDEX-948" />
<a name="INDEX-949" />
This problem can occur if not all of the 
necessary files are present on the installation media or if there is a
permissions problem with the installation
software. For example, some distributions of Linux have been known to
have bugs in the installation software itself; these are usually fixed
rapidly and are quite infrequent.
If you suspect that the distribution software contains bugs, and
you're sure that you have not done anything wrong, contact the maintainer
of the distribution to report the bug.</p></dd>

</dl>

<p><a name="INDEX-950" />
If you have other strange errors when installing Linux (especially if you 
downloaded the software yourself), be sure you actually obtained all
of the necessary files when downloading.</p>

<p>For example, some people use the
<span class="acronym">FTP</span> command:

<blockquote><pre class="code">mget *.*</pre></blockquote>


when downloading the Linux software via <span class="acronym">FTP</span>. This
will download only those files that contain a
"<tt class="literal">.</tt>" in their filenames; if there are
any files without the "<tt class="literal">.</tt>" you will miss
them. The correct command to use in this case is:

<blockquote><pre class="code">mget *</pre></blockquote></p>

<?troff .Nd 10?><p>The best advice is to retrace your steps when something goes wrong. You
may think that you have done everything correctly, when in fact you
forgot a small but important step somewhere along the way. In many cases,
just attempting to re-download or reinstall the Linux software can solve
the problem. Don't beat your head against the wall any longer than you have
to!</p>

<p>Also, if Linux unexpectedly hangs during installation, there may be a 
hardware problem of some kind. See 
the section "<a href="ch03_03.htm">Section 3.3.2, "Hardware Problems"</a>" for hints. 
<a name="INDEX-951" />
<a name="INDEX-952" />
<a name="INDEX-953" /></p>
</div>




<a name="x-100-3-sec-install-probs-postinstall" /><div class="sect2">
<h3 class="sect2">3.3.4. Problems After Installing Linux</h3>

<p>You've spent an entire afternoon installing Linux. In order to make space 
for it, you wiped your Windows and OS/2 partitions and tearfully 
deleted your copies of SimCity 2000 and Railroad Tycoon 2.
You reboot the 
system and nothing happens. Or, even worse, <em class="emphasis">something</em> happens, but 
it's not what should happen. What do you do?</p>

<p>In the section "<a href="ch03_03.htm">Section 3.3.1, "Problems with Booting the Installation Media"</a>," earlier in this chapter, we
covered the most common problems that can occur when booting the Linux
installation media; many of those problems may apply here. In addition,
you may be victim to one of the following maladies.</p>

<div class="sect3">
<h3 class="sect3">3.3.4.1. Problems booting Linux from floppy</h3>

<p><a name="INDEX-954" />
<a name="INDEX-955" />
<a name="INDEX-956" />
<a name="INDEX-957" />
<a name="INDEX-958" /> 
<a name="INDEX-959" />
If you are using a floppy to boot Linux, you may need to specify 
the location of your Linux root partition at boot time. This is 
especially true if you are using the original installation floppy itself
and not a custom boot floppy created during installation.</p>

<p>While booting the floppy, hold down the Shift or Control key. This should
present you with a boot menu; press Tab to see a list of available
options. For example, many distributions allow you to boot from a
floppy by entering:
<blockquote><pre class="code">boot: linux root=<em class="replaceable">partition</em></pre></blockquote>

at the boot menu, where <em class="replaceable">partition</em> is the name of the
Linux root partition, such as <em class="filename">/dev/hda2</em>. 
SuSE Linux offers a menu entry early in the installation program
that boots your newly
created Linux system from the installation boot floppy.
Consult the documentation
for your distribution for details.</p>
</div>


<div class="sect3">
<h3 class="sect3">3.3.4.2. Problems booting Linux from the hard drive</h3>

<p><a name="INDEX-960" />
If you opted to install <span class="acronym">LILO</span> instead of creating a
boot floppy, you should be able to boot Linux from the hard
drive. However, the automated <span class="acronym">LILO</span> installation
procedure used by many distributions is not always perfect. It may
make incorrect assumptions about your partition layout, in which case
you need to reinstall <span class="acronym">LILO</span> to get everything
right. Installing <span class="acronym">LILO</span> is covered in

the section "<a href="ch05_02.htm">Section 5.2.2, "Using LILO"</a>" in
<a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>.</p>

<p>Here are some common problems:</p>

<dl>
<dt><b><em class="emphasis">System reports "Drive not bootable-Please insert
system disk."</em></b></dt><dd><p><a name="INDEX-961" />
<a name="INDEX-962" />You will get this error message if the hard drive's master
boot record is corrupt in some way. In most cases, it's harmless, and everything
else on your drive is still intact. There are several ways around this:</p>

<ul><li><p><a name="INDEX-963" />
While partitioning your drive using
<tt class="command">fdisk</tt>, you may have deleted the partition that was
marked as "active." <span class="acronym">MS-DOS</span> and other
operating systems attempt to boot the "active" partition
at boot time (Linux, in general, pays no attention to whether the partition is
"active," but the Master Boot Records
installed by some distributions like Debian do). You may be able to boot
<span class="acronym">MS-DOS</span> from floppy and run <span class="acronym">FDISK</span>
to set the active flag on your <span class="acronym">MS-DOS</span> partition,
and all will be well.</p>

<p>Another command to try (with <span class="acronym">MS-DOS</span> 5.0 and higher) is:
<blockquote><pre class="code">FDISK /MBR</pre></blockquote>

This command will attempt to rebuild the hard drive master boot record
for booting <span class="acronym">MS-DOS</span>, overwriting <span class="acronym">LILO</span>. If you no longer have <span class="acronym">MS-DOS</span> on your 
hard drive, you'll need to boot Linux from floppy and
attempt to install <span class="acronym">LILO</span> later.</p></li><li><p>If you created an <span class="acronym">MS-DOS</span> partition using Linux's
version of <tt class="command">fdisk</tt>, or vice versa, you may get this
error. You should create <span class="acronym">MS-DOS</span> partitions only by
using <span class="acronym">MS-DOS</span>'s version of
<span class="acronym">FDISK</span>. (The same applies
to operating systems other than <span class="acronym">MS-DOS</span>.) The best
solution here is either to start from scratch and repartition the
drive correctly, or to merely delete and recreate the offending
partitions using the correct version of <tt class="command">fdisk</tt>.</p></li><li><p><a name="INDEX-964" />

The <span class="acronym">LILO</span> installation procedure may have failed. In this case, you
should boot either from your Linux boot floppy (if you have one), or from the
original installation media. Either of these should provide options for
specifying the Linux root partition to use when booting. At boot time,
hold down 
the Shift or Control key and press Tab from the
boot menu for a list of options.</p></li></ul></dd>


<dt><b><em class="emphasis">When you boot the system from the hard drive,
<span class="acronym">MS-DOS</span> (or another operating system) starts instead
of Linux.</em></b></dt><dd><p><a name="INDEX-965" />
<a name="INDEX-966" />
First of all, be
sure you actually installed <span class="acronym">LILO</span> when installing the Linux software.
If not, the system will still boot <span class="acronym">MS-DOS</span> (or whatever other
operating system you may have) when you attempt to boot from the hard
drive.

In order to boot Linux from the hard drive, you need to install 
<span class="acronym">LILO</span> (see the section
"<a href="ch05_02.htm">Section 5.2.2, "Using LILO"</a>" in
<a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>).</p>

<p>On the other hand, if you <em class="emphasis">did</em> install LILO, and another
operating system boots instead of Linux, then you have LILO configured to 
boot that other operating system by default. While the system is booting,
hold down the Shift or Control key and press Tab at the boot prompt.
This should present you with a list of possible operating systems to boot;
select the appropriate option (usually just <tt class="literal">linux</tt>) to boot Linux.</p>

<p>If you wish to select Linux as the default 
operating system to boot, you will need to reinstall LILO.</p>

<p>It also may be possible that you attempted to install LILO, but the 
installation procedure failed in some way. See the previous item on installation.</p></dd>

</dl>
</div>


<div class="sect3">
<h3 class="sect3">3.3.4.3. Problems logging in</h3>

<p><a name="INDEX-967" />
<a name="INDEX-968" />
After booting Linux, you should be presented with a login prompt:
<blockquote><pre class="code">Linux login:</pre></blockquote>

At this point, either the distribution's documentation or the system itself
will tell you what to do. For many distributions, you simply log in as
root, with no password. Other possible usernames to try are 
guest or test.</p>

<p><a name="INDEX-969" />
<a name="INDEX-970" />
Most Linux distributions ask you for an initial root password. Hopefully,
you have remembered what you typed in during installation; you will
need it again now. If your distribution does not ask you for a root
password during installation, you can try using an empty password.</p>

<p>If you simply can't log in, consult your
distribution's documentation; the username and password to use may be
buried in there somewhere. The username and password may have been
given to you during the installation procedure, or they may be printed
on the login banner.</p>

<p>One possible cause of this password impasse may be a problem with installing the Linux login 
and initialization files. If this is the case, you may need to reinstall
(at least parts of) the Linux software, or boot your installation media
and attempt to fix the problem by hand.</p>
</div>


<div class="sect3">
<h3 class="sect3">3.3.4.4. Problems using the system</h3>

<p><a name="INDEX-971" />
<a name="INDEX-972" />
<a name="INDEX-973" />
If login is successful, you should be presented with a shell prompt
(such as <tt class="literal">#</tt> or <tt class="literal">$</tt>) and can happily roam around your
system.  The next step in this case is to try the procedures in

<a href="ch04_01.htm">Chapter 4, "Basic Unix
 Commands
 and Concepts"</a>.
However, there are some initial problems with using the system
that sometimes creep up.</p>

<p><a name="INDEX-974" />
<a name="INDEX-975" />
The most common initial configuration problem is incorrect file or directory
permissions. This can cause the error message:
<blockquote><pre class="code">Shell-init: permission denied</pre></blockquote>

to be printed after logging in. (In fact, any time you see the message
<tt class="literal">permission denied</tt>, you can be fairly certain it is a problem
with file permissions.)</p>

<p><a name="INDEX-976" />
In many cases, it's a simple matter of using
the <tt class="command">chmod</tt> command to fix the permissions of the
appropriate files or directories. 
For example, some distributions of Linux once
used the incorrect file mode 0644 for the root directory ( <em class="filename">/</em>&thinsp;&thinsp;).
The fix was to issue the command:
<blockquote><pre class="code"># <tt class="userinput"><b>chmod 755 /</b></tt></pre></blockquote>

 
as root. 
(File permissions are covered by the section

"<a href="ch04_13.htm">Section 4.13, "File Ownership and Permissions"</a>" in <a href="ch04_01.htm">Chapter 4, "Basic Unix
 Commands
 and Concepts"</a>.)
However, in order to issue this command, you needed to
boot from the installation media and mount your Linux root filesystem by 
hand--a hairy task for most newcomers.</p>

<p>As you use the system, you may run into places where file and directory
permissions are incorrect, or software does not work as configured. Welcome
to the world of Linux! While most distributions are quite trouble-free, 
you can't expect them to be perfect.
We don't want to cover all of those problems here.

Instead, throughout the book we help you to solve many of these configuration
problems by teaching you how to find them and fix them yourself. In
<a href="ch01_01.htm">Chapter 1, "Introduction
 to Linux"</a>, we discussed this philosophy in some detail.
In <a href="ch05_01.htm">Chapter 5, "Essential System Management"</a>, we give hints
for fixing many of these common configuration problems. 
<a name="INDEX-977" />
<a name="INDEX-978" />
<a name="INDEX-979" /></p>
</div>
</div>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch03_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch04_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">3.2. Post-Installation Procedures</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">4. Basic Unix
 Commands
 and Concepts</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>