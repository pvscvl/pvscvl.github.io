<?label 2.3. Overview of TCP/IP?><html><head><title>Overview of TCP/IP (Linux in a Nutshell, 3rd Edition)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Ellen Siever, Stephen Spainhour, Stephen Figgins and Jessica P. Hekman" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="0596000251L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Linux in a Nutshell, 3rd Edition" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Linux in a Nutshell" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch02_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">Linux in a Nutshell, 3rd Edition</a></td><td width="172" valign="top" align="right"><a href="ch02_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">2.3. Overview of TCP/IP</h2>


<p><a name="INDEX-99" /><a name="INDEX-100" />TCP/IP is a set of
communications protocols that define how different types of computers
talk to one another. It's named for its two most common protocols, the
Transmission Control Protocol and the Internet Protocol.<a name="INDEX-101" /><a name="INDEX-102" />
The Internet Protocol moves
data between hosts: it splits data into
packets, which are then forwarded to machines via the network. The
Transmission Control Protocol ensures that the packets in a message
are reassembled in the correct order at their final destination and
that any missing datagrams are resent until they are correctly
received. <a name="INDEX-103" />
Other protocols provided as part of TCP/IP include:</p>


<dl>
<dt><b>Address Resolution Protocol (ARP)</b></dt><dd><p>Translates between Internet and local hardware addresses
(Ethernet et al.)</p></dd>



<dt><b>Internet Control Message Protocol (ICMP)</b></dt><dd><p>Error-message and control protocol</p></dd>



<dt><b>Point-to-Point Protocol (PPP)</b></dt><dd><p>Enables TCP/IP (and other protocols) to be carried across both
synchronous and asynchronous point-to-point serial links</p></dd>



<dt><b>Reverse Address Resolution Protocol (RARP)</b></dt><dd><p>Translates between local hardware and Internet addresses (opposite of ARP)</p></dd>



<dt><b>Serial Line Internet Protocol (SLIP)</b></dt><dd><p>Carries IP over serial lines</p></dd>



<dt><b>Simple Mail Transport Protocol (SMTP)</b></dt><dd><p>Used by <b class="emphasis-bold">sendmail</b> to send mail via TCP/IP</p></dd>



<dt><b>Simple Network Management Protocol (SNMP)</b></dt><dd><p>Performs distributed network management functions via TCP/IP</p></dd>



<dt><b>User Datagram Protocol (UDP)</b></dt><dd><p>Provides data transfer, without the reliable delivery capabilities of
TCP</p></dd>

</dl>


<p><a name="INDEX-104" />Background about TCP/IP is described in the three-volume
set <em class="emphasis">Internetworking with TCP/IP</em> by Douglas
R. Comer, published by Prentice-Hall. The commands in this chapter and
the next are described in more detail in <em class="emphasis">TCP/IP Network
Administration</em>, 2d ed., by Craig Hunt and
<em class="emphasis">Linux Network Administrator's Guide</em> by Olaf
Kirch and Terry Dawson, both published by O'Reilly &amp; Associates.</p>


<p>In the architecture of TCP/IP protocols, data is passed down the
stack (toward the Network Access Layer) when it is being sent to the
network and up the stack when it is being received from the network
(see <a href="ch02_03.htm">Figure 2-1</a>).</p>


<a name="ln.ch15.fig.1" /><div class="figure"><img width="200" src="figs/LX3_0201.gif" height="205" alt="Figure 2-1" /></div><h4 class="objtitle">Figure 2-1. Layers in the TCP/IP protocol architecture</h4><a name="ln.ch15.div.24" /><div class="sect2">
<h3 class="sect2">2.3.1. IP Addresses</h3>


<a name="INDEX-105" /><a name="INDEX-106" /><p>The IP (Internet) address is a 32-bit binary number that 
differentiates your machine from all others on the network.
Each machine must have a unique IP address. An IP address contains
two parts: a network part and a host part. The number of address bits
used to identify the network and host differ according to the class of
the address. There are three main address classes: A, B, and C
(see 
<a href="ch02_03.htm">Figure 2-2</a>). The leftmost bits indicate what class each address
is.</p>


<a name="ln.ch15.fig.2" /><div class="figure"><img width="367" src="figs/LX3_0202.gif" height="371" alt="Figure 2-2" /></div><h4 class="objtitle">Figure 2-2. IP address structure</h4><p>A more recent standard called Classless Inter-Domain Routing (CIDR)
extends the class system's idea of using initial bits to identify
where packets should be routed. Under CIDR, a new domain can be
created with any number of fixed leftmost bits (not just a multiple
of 8).</p>


<p>Another new standard called IPv6 changes the method of addressing and increases
the number of fields, but it will be a while before anyone uses it.</p>


<p>If you wish to connect
to the Internet, contact the Network Information Center
and have them assign you a network address. If you are not
connecting to an outside network, you can choose your own network
address, as long as it conforms to the IP address syntax.
You should use special reserved addresses provided for in
<?troff \p?>RFC 1597,
which lists IP network numbers 
for private networks that don't
have to be registered with the IANA (Internet Assigned Numbers Authority).
An IP address is different from an Ethernet address, which is assigned
by the manufacturer of the physical Ethernet card.
</p>
</div>








<a name="ln.ch15.div.25" /><div class="sect2">
<h3 class="sect2">2.3.2. Gateways and Routing</h3>


<a name="INDEX-107" /><a name="INDEX-108" />

<p>Gateways are hosts responsible for exchanging routing information and
forwarding data from one network to another. 
Each portion of a network that is under a separate local
administration is called an autonomous system (AS). Autonomous systems
connect to each other via exterior gateways. An AS also may contain its own
system of networks, linked via interior gateways.</p>


<?troff .Nd 10?><a name="ln.ch15.div.26" /><div class="sect3">
<h3 class="sect3">2.3.2.1. Gateway protocols</h3>


<a name="INDEX-109" /><p>Gateway protocols include:</p>


<dl>
<dt><b>EGP (Exterior Gateway Protocol)</b></dt><dd />



<dt><b>BGP (Border Gateway Protocol)</b></dt><dd><p>Protocols for exterior gateways to exchange information</p></dd>



<dt><b>RIP (Routing Information Protocol)</b></dt><dd><p>Interior gateway protocol; most popular for LANs</p></dd>



<dt><b>Hello Protocol</b></dt><dd />



<dt><b>OSPF (Open Shortest Path First)</b></dt><dd><p>Interior gateway protocol</p></dd>

</dl>
</div>




<a name="ln.ch15.div.27" /><div class="sect3">
<h3 class="sect3">2.3.2.2. Routing daemons</h3>


<a name="INDEX-110" /><a name="INDEX-111" /><a name="INDEX-112" /><p><b class="emphasis-bold">gated</b> and <b class="emphasis-bold">routed</b>, the routing daemons, can be run on a
host to make it function as a gateway. Only one of them can run on a
host at any given time. <b class="emphasis-bold">gated</b> is the
gateway routing daemon and allows a host to function as both an
exterior and interior gateway. It simplifies the routing configuration
by combining the protocols RIP, Hello, BGP, EGP, and OSPF into a
single package.</p>


<p><b class="emphasis-bold">routed</b>, a network routing
daemon that uses RIP, allows a host to function as an interior gateway
only. <b class="emphasis-bold">routed</b> manages the Internet
routing tables. For more details on <b class="emphasis-bold">gated</b> and <b class="emphasis-bold">routed</b>, see <a href="ch03_01.htm">Chapter 3, "Linux Commands"</a>.</p>
</div>




<a name="ln.ch15.div.28" /><div class="sect3">
<h3 class="sect3">2.3.2.3. Routing tables</h3>


<p>Routing tables provide information needed to route packets to
their destinations. This information includes destination network,
gateway to use, route status, and number of packets transmitted.
Routing tables can be displayed with the <b class="emphasis-bold">netstat</b> command.</p>
</div>
</div>








<a name="ln.ch15.div.29" /><div class="sect2">
<h3 class="sect2">2.3.3. Name Service</h3>


<p><a name="INDEX-113" /><a name="INDEX-114" /><a name="INDEX-115" />Each host on a network has a name that points to information
about the host. Hostnames can be assigned to any device that has an IP
address. Name service translates the hostnames (easy for people to
remember) to IP addresses (the numbers the computer deals with).</p>


<a name="ln.ch15.div.30" /><div class="sect3">
<h3 class="sect3">2.3.3.1. DNS and BIND</h3>


<p>The Domain Name System (DNS) is a
distributed database of information about hosts on a network.  Its
structure is similar to that of the Unix filesystem -- an inverted
tree, with the root at the top. The branches of the tree are called
<em class="emphasis">domains</em> (or <em class="emphasis">subdomains</em>) and
correspond to IP addresses.  The most popular implementation of DNS is
the BIND (Berkeley Internet Name Domain) software.</p>


<p>DNS works as a client/server application. The <em class="emphasis">resolver</em> is the client,
the software that asks questions about host information. The <em class="emphasis">name
server</em> is the process that answers the questions. The server side
of BIND is the <b class="emphasis-bold">named</b> daemon. 
You can interactively query name servers for host information with the
<b class="emphasis-bold">nslookup</b> command. 
For more details on <b class="emphasis-bold">named</b> and <b class="emphasis-bold">nslookup</b>, see <a href="ch03_01.htm">Chapter 3, "Linux Commands"</a>.</p>


<p>As the name server of its domain, your machine would be responsible
for keeping (and providing on request) the names of the machines in
its domain. Other name servers on the network would forward requests
for these machines to it.</p>
</div>




<a name="ln.ch15.div.31" /><div class="sect3">
<h3 class="sect3">2.3.3.2. Domain names</h3>


<a name="INDEX-116" /><p>The full domain name is the sequence of names, starting from the
current domain and going back to the root, with a period separating
the names. For instance, <em class="emphasis">oreilly.com</em> indicates the domain <em class="emphasis">oreilly</em> (for
O'Reilly &amp; Associates), which is under the domain <em class="emphasis">com</em> (for
commercial). One machine under this domain is www.oreilly.com. Top-level
domains include:</p>


<?troff-vlindent .22i?><dl>
<dt><b>com</b></dt><dd><p>Commercial organizations</p></dd>



<dt><b>edu</b></dt><dd><p>Educational organizations</p></dd>



<dt><b>gov</b></dt><dd><p>Government organizations</p></dd>



<dt><b>mil</b></dt><dd><p>Military departments</p></dd>



<dt><b>net</b></dt><dd><p>Commercial Internet organizations, usually Internet service providers</p></dd>



<dt><b>org</b></dt><dd><p>Miscellaneous organizations</p></dd>

</dl>


<p>Countries also have top-level domains.<a name="INDEX-117" /><a name="INDEX-118" /><a name="INDEX-119" /></p>
</div>
</div>








<a name="ln.ch15.div.32" /><div class="sect2">
<h3 class="sect2">2.3.4. Configuring TCP/IP</h3>


<a name="ln.ch15.div.33" /><div class="sect3">
<h3 class="sect3">2.3.4.1. ifconfig</h3>


<a name="INDEX-120" /><a name="INDEX-121" /><p>The network interface represents the way that the networking software
uses the hardware -- the driver, the IP address, and so forth. To
configure a network interface, use the <b class="emphasis-bold">ifconfig</b> command. With
<b class="emphasis-bold">ifconfig</b>, you can assign an address to a network interface,
setting the netmask, broadcast address, and IP address at boot time.
You can also set network interface parameters, including the use of ARP,
the use of driver-dependent debugging code, the use of one-packet mode, and the
address of the correspondent on the other end of a point-to-point
link. For more information on <b class="emphasis-bold">ifconfig</b>, see <a href="ch03_01.htm">Chapter 3, "Linux Commands"</a>.</p>
</div>




<a name="ln.ch15.div.34" /><div class="sect3">
<h3 class="sect3">2.3.4.2. Serial-line communication</h3>


<a name="INDEX-122" /><a name="INDEX-123" /><a name="INDEX-124" /><p>There are two protocols for serial-line communication: Serial Line IP
(SLIP) and Point-to-Point Protocol (PPP). These protocols let computers
transfer information using the serial port instead of a network card
and a serial cable in place of an Ethernet cable.</p>


<p>Under Linux, the SLIP driver is installed in the kernel. To
convert a serial line to SLIP mode, use the <b class="emphasis-bold">slattach</b> program (details on <b class="emphasis-bold">slattach</b> are available in <a href="ch03_01.htm">Chapter 3, "Linux Commands"</a>). Don't forget that after putting the line
in SLIP mode, you still have to run <b class="emphasis-bold">ifconfig</b> to configure the network
interface. For example, if your machine is named <b class="emphasis-bold">tanuki</b> and you have dialed in to <b class="emphasis-bold">ruby</b>:</p>


<blockquote><pre class="code">   # ifconfig s10 tanuki pointopoint ruby
   # route add ruby
   # route add default gw ruby</pre></blockquote>


<p>This configures the interface as a point-to-point link to
<b class="emphasis-bold">ruby</b>, adds the route to <b class="emphasis-bold">ruby</b>, and makes it a default route, specifying
<b class="emphasis-bold">ruby</b> as the gateway.</p>


<p>PPP was intended to remedy some of SLIP's failings; it can hold
packets from non-Internet protocols, it implements client
authorization and error detection/correction, and it dynamically
configures each network protocol that passes through it. Under Linux,
PPP exists as a driver in the kernel and as the daemon <b class="emphasis-bold">pppd</b>. For more information on <b class="emphasis-bold">pppd</b>, see <a href="ch03_01.htm">Chapter 3, "Linux Commands"</a>.</p>
</div>
</div>








<a name="ln.ch15.div.35" /><div class="sect2">
<h3 class="sect2">2.3.5. Troubleshooting TCP/IP</h3>


<a name="INDEX-125" /><a name="INDEX-126" /><p>The following commands can be used to troubleshoot TCP/IP. For more
details on these commands, see <a href="ch03_01.htm">Chapter 3, "Linux Commands"</a>.</p>


<dl>
<dt><b>ifconfig</b></dt><dd><p>Provide information about the basic configuration of the network
interface.</p></dd>



<dt><b>netstat</b></dt><dd><p>Display network status.</p></dd>



<dt><b>ping</b></dt><dd><p>Indicate whether a remote host can be reached.</p></dd>



<dt><b>nslookup</b></dt><dd><p>Query the DNS name service.</p></dd>



<dt><b>traceroute</b></dt><dd><p>Trace route taken by packets to reach network host.<a name="INDEX-127" /><a name="INDEX-128" /></p></dd>

</dl>
</div>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch02_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch02_04.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">2.2. Overview of Networking</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">2.4. Overview of Firewalls and Masquerading</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>
