<?label 14.8. General RCS Specifications?><html><head><title>General RCS Specifications (Linux in a Nutshell, 3rd Edition)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Ellen Siever, Stephen Spainhour, Stephen Figgins and Jessica P. Hekman" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="0596000251L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Linux in a Nutshell, 3rd Edition" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Linux in a Nutshell" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch14_07.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">Linux in a Nutshell, 3rd Edition</a></td><td width="172" valign="top" align="right"><a href="ch14_09.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">14.8. General RCS Specifications</h2>


<p>This section discusses:</p>


<ul><li><p>Keyword substitution</p></li><li><p>Revision numbering</p></li><li><p>Specifying the date</p></li><li><p>Specifying states</p></li><li><p>Standard options and environment variables</p></li></ul><a name="ln.ch13.div.6" /><div class="sect2">
<h3 class="sect2">14.8.1. Keyword Substitution</h3>


<a name="INDEX-2193" /><a name="INDEX-2194" /><p>RCS lets you place keyword variables in your working files.
These variables are later expanded into revision notes.
You can then use the notes either as embedded comments in the 
<?troff .ne 10?>input file
or as text strings that appear when the output is printed.
To create revision notes via keyword substitution,
follow this procedure:</p>


<ol><li><p>In your working file, type any of the keywords listed in the next section.</p></li><li><p>Check the file in.</p></li><li><p>Check the file out again.  Upon checkout, the <b class="emphasis-bold">co</b> command 
expands each keyword to include its value.  That is, <b class="emphasis-bold">co</b>
replaces instances of:</p>


<blockquote><pre class="code"><tt class="userinput"><b>$</b></tt><em class="replaceable">keyword</em><tt class="userinput"><b>$</b></tt></pre></blockquote>


<p>with:</p>


<blockquote><pre class="code"><tt class="userinput"><b>$</b></tt><em class="replaceable">keyword</em><tt class="userinput"><b>:</b></tt><em class="replaceable">value</em><tt class="userinput"><b>$</b></tt></pre></blockquote></li><li><p>Subsequent checkin and checkout of a file will update any
existing keyword values.  Unless otherwise noted later,
existing values are replaced by new
<?troff \p?>values.</p></li></ol><blockquote><h4 class="objtitle">NOTE</h4>
<p>Note: Many RCS commands have a 
<b class="emphasis-bold">-k</b> option that
provides more flexibility during keyword substitution.</p>
</blockquote>


<a name="ln.ch13.div.7" /><div class="sect3">
<h3 class="sect3">14.8.1.1. Keywords</h3>


<dl>
<dt><b>$Author$</b></dt><dd><p><a name="INDEX-2195" />Username of person who checked in revision.</p></dd>



<dt><b>$Date$</b></dt><dd><p><a name="INDEX-2196" />Date and time of checkin.</p></dd>



<dt><b>$Header$</b></dt><dd><p><a name="INDEX-2197" />A title that includes the RCS file's full pathname,
revision number, date, author, state, and (if locked) the person who locked
the file.</p></dd>



<dt><b>$Id$</b></dt><dd><p><a name="INDEX-2198" />Same as 
<b class="emphasis-bold">$Header$</b>, but exclude the full pathname of the RCS file.</p></dd>



<dt><b>$Locker$</b></dt><dd><p><a name="INDEX-2199" />Username of person who locked the revision. If the file isn't locked, this value is empty.</p></dd>



<dt><b>$Log$<dt></b>
</dt><dd><p>The message that was typed during checkin to describe the file, preceded by the RCS filename, revision number, author, and date. Log messages accumulate rather than being overwritten.</p></dd>



<dt><b>$RCSfile$</b></dt><dd><p><a name="INDEX-2200" />The RCS filename, without its pathname.</p></dd>



<dt><b>$Revision$</b></dt><dd><p><a name="INDEX-2201" />The assigned revision number.</p></dd>



<?troff .Nd 10?>
<dt><b>$Source$</b></dt><dd><p><a name="INDEX-2202" />The RCS filename, including its pathname.</p></dd>



<dt><b>$State$</b></dt><dd><p><a name="INDEX-2203" />The state assigned by the <b class="emphasis-bold">-s</b> option of <b class="emphasis-bold">ci</b> or <b class="emphasis-bold">rcs</b>.</p></dd>

</dl>
</div>




<a name="ln.ch13.div.8" /><div class="sect3">
<h3 class="sect3">14.8.1.2. Example values</h3>


<p>Let's assume that the file 
<em class="emphasis">/projects/new/chapter3</em> has been
checked in and out by a user named <em class="emphasis">daniel</em>.
Here's what keyword substitution 
would produce for each keyword, for the second revision of the file:</p>


<blockquote><pre class="code">$Author: daniel $

$Date: 2001/07/05 14:25:39 $

$Header: /projects/new/chapter3,v 1.2 2000/02/25 18:21:10 daniel \
    Exp Locker: daniel $

$Id: chapter3,v 1.2 2001/07/05 14:25:39 daniel Exp $

$Locker:  $

$Log: chapter3,v $
Revision 1.2  2001/07/05 14:25:39  daniel
Added section on error handling

#Revision 1.1  2000/02/25 16:49:59  daniel
#Initial revision
#

$RCSfile: chapter3,v $

$Revision: 1.2 $

$Source: /projects/new/chapter3,v $

$State: Exp $
</pre></blockquote>
</div>
</div>








<a name="ln.ch13.div.9" /><div class="sect2">
<h3 class="sect2">14.8.2. Revision Numbering</h3>


<a name="INDEX-2204" /><a name="INDEX-2205" /><a name="INDEX-2206" /><p>Unless told otherwise, RCS commands typically operate on the latest
revision.  Some commands have an <b class="emphasis-bold">-r</b> option that is used to specify a
revision number.  In addition, many options accept a revision number
as an optional argument.  (In the command summary, this argument is
shown as [<em class="emphasis">R</em>].)  Revision
numbers consist of up to four fields, release, level, branch, and
sequence, but most revisions consist of only the release and level.
</p>


<p>For example, you can check out revision 1.4 as follows:</p>


<blockquote><pre class="code"><tt class="userinput"><b>co -l -r1.4 ch01</b></tt></pre></blockquote>


<p>When you check it in again, the new revision will be marked as 1.5.
But suppose the edited copy needs to be checked in as the next release.
You would type:</p>


<blockquote><pre class="code"><tt class="userinput"><b>ci -r2 ch01</b></tt></pre></blockquote>


<p>This creates revision 2.1.  
You can also create a branch from an earlier revision.
The following command creates revision 1.4.1.1:</p>


<blockquote><pre class="code"><tt class="userinput"><b>ci -r1.4.1 ch01</b></tt></pre></blockquote>


<p>Numbers are not the only way to specify revisions, though.
You can assign a text label as a revision name,
using the <b class="emphasis-bold">-n</b> option of <b class="emphasis-bold">ci</b> or <b class="emphasis-bold">rcs</b>.
You can also specify this name in any option that accepts
a revision number for an argument.
For example, you could check in each of your C programs,
using the same label regardless of the current revision number:</p>


<blockquote><pre class="code"><tt class="userinput"><b>ci -u -nPrototype *.c</b></tt></pre></blockquote>


<p>In addition, beginning with RCS Version 5.6, you can specify a <b class="emphasis-bold">$</b>,
which means the revision number is extracted from the keywords
of a working file.  For example:</p>


<blockquote><pre class="code"><tt class="userinput"><b>rcsdiff -r$ ch01</b></tt></pre></blockquote>


<?troff .Nd 10?><p>compares <em class="emphasis">ch01</em> to the revision that is checked in.
You can also combine names and symbols.  The command:</p>


<blockquote><pre class="code"><tt class="userinput"><b>rcs -nDraft:$ ch*</b></tt></pre></blockquote>


<p>assigns a name to the revision numbers associated with several chapter files.</p>
</div>








<a name="ln.ch13.div.10" /><div class="sect2">
<h3 class="sect2">14.8.3. Specifying the Date</h3>


<a name="INDEX-2207" /><p>Revisions are timestamped by time and date of checkin.
Several keyword strings include the date in their values.
Dates can be supplied in options to <b class="emphasis-bold">ci</b>, <b class="emphasis-bold">co</b>, and <b class="emphasis-bold">rlog</b>.
RCS uses the following date format as its default:</p>


<blockquote><pre class="code">1999/10/16 02:00:00     (year/month/day time)</pre></blockquote>


<p>The default time zone is Greenwich Mean Time (GMT), which is
also referred to as Coordinated Universal Time (UTC).  Dates can be
supplied in free format.  This lets you specify many different styles.
Here are some of the more common ones, which show the same time as in
the preceding example:</p>


<blockquote><pre class="code">6:00 pm lt          (assuming today is Oct. 16, 1999)
2:00 AM, Oct. 16, 1999
Sat Oct 16 18:00:00 1999 LT     
Sat Oct 16 18:00:00 PST 1999</pre></blockquote>


<p>The uppercase or lowercase <em class="emphasis">lt</em> indicates local time (here, Pacific Standard
Time).  The third line shows <b class="emphasis-bold">ctime</b> format (plus the <em class="emphasis">LT</em>);
the fourth line is the <b class="emphasis-bold">date</b> command format.</p>
</div>








<a name="ln.ch13.div.11" /><div class="sect2">
<h3 class="sect2">14.8.4. Specifying States</h3>


<a name="INDEX-2208" /><p>In some situations, particularly programming environments,
you want to know the status of a set of revisions.
RCS files are marked by a text string that describes their <em class="emphasis">state</em>.
The default state is <b class="emphasis-bold">Exp</b> (experimental).  Other common choices
include <b class="emphasis-bold">Stab</b> (stable) or <b class="emphasis-bold">Rel</b> (released).
These words are user-defined and have no special internal meaning.
Several keyword strings include the state in their values.
In addition, states can be supplied in options to 
<b class="emphasis-bold">ci</b>, <b class="emphasis-bold">co</b>, <b class="emphasis-bold">rcs</b>, and <b class="emphasis-bold">rlog</b>.</p>
</div>








<a name="ln.ch13.div.12" /><div class="sect2">
<h3 class="sect2">14.8.5. Standard Options and Environment Variables</h3>


<a name="INDEX-2209" /><p>RCS defines the environment variable RCSINIT,
which is used to set up default options for RCS commands.
If you set RCSINIT to a space-separated list of options,
they will be prepended to the command-line options
you supply to any RCS command.  Three
options are useful to include in RCSINIT:
<b class="emphasis-bold">-q</b>, <b class="emphasis-bold">-V</b>, and <b class="emphasis-bold">-x</b>.  They 
can be thought of as standard options
because most RCS commands accept them.
Note that <b class="emphasis-bold">-V</b> was new in RCS Version 5 
and that <b class="emphasis-bold">-x</b> was new in Version 5.6.</p>


<dl>
<dt><b><b class="emphasis-bold">-q[</b><em class="emphasis">R</em><b class="emphasis-bold">]</b></b></dt><dd><p>Quiet mode; don't show diagnostic output.  <em class="emphasis">R</em> specifies
a file revision.</p></dd>



<dt><b><b class="emphasis-bold">-V[</b><em class="emphasis">n</em><b class="emphasis-bold">]</b></b></dt><dd><p>Emulate version <em class="emphasis">n</em> of RCS; useful when trading files
between systems that run different versions. <em class="emphasis">n</em> can be 3, 4, or 5. If <em class="emphasis">n</em> is omitted, the command prints the version
number of this version of RCS.</p></dd>



<dt><b><b class="emphasis-bold">-x<em class="emphasis">suffixes</em></b></b></dt><dd><p>Specify an alternate list of <em class="emphasis">suffixes</em> for RCS files. Each suffix is separated by a /. On Unix systems, RCS files normally end with the characters <em class="emphasis">,v</em>. The <b class="emphasis-bold">-x</b> option provides a workaround for systems that don't 
allow a comma (<b class="emphasis-bold">,</b>) character in filenames.</p></dd>



<dt><b><b class="emphasis-bold">-z[</b><em class="emphasis">zone</em><b class="emphasis-bold">]</b></b></dt><dd><p>Specify the format of the date in keyword substitution. If empty, the default is to output the UTC time with no
zone indication. With an argument of <em class="emphasis">LT</em>, the local
time zone will be used to output an ISO 8601 format, with
an indication of the separation from UTC. You may also
specify a numeric UTC offset. For example, <b class="emphasis-bold">-z+4:30</b>
would output a string such as: 1998-11-24 02:30:00+4:30.</p></dd>

</dl>


<p>For example, when depositing a working file into an RCS file, the command:</p>


<blockquote><pre class="code">

<tt class="userinput"><b>ci -x,v/ ch01</b></tt>     (second suffix is blank)</pre></blockquote>


<p>searches in order for the RCS filenames:</p>


<blockquote><pre class="code">RCS/ch01,v
ch01,v
RCS/ch01</pre></blockquote>
</div>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch14_07.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch14_09.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">14.7. Basic RCS Operations</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">14.9. Alphabetical Summary of RCS Commands</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="index.htm" coords="89,1,164,98" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="257,1,359,100" shape="rect" /><area href="../sql/index.htm" coords="364,2,444,132" shape="rect" /><area href="../dbi/index.htm" coords="452,1,547,126" shape="rect" /><area href="../cgi/index.htm" coords="553,4,658,100" shape="rect" /></map>

</body></html>
