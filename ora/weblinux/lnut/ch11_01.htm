<?label 11. The vi Editor?><html><head><title>The vi Editor (Linux in a Nutshell, 3rd Edition)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Ellen Siever, Stephen Spainhour, Stephen Figgins and Jessica P. Hekman" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="0596000251L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Linux in a Nutshell, 3rd Edition" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Linux in a Nutshell" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch10_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">Linux in a Nutshell, 3rd Edition</a></td><td width="172" valign="top" align="right"><a href="ch11_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h1 class="chapter">Chapter 11. The vi Editor</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4><p>
<a href="ch11_01.htm">Review of vi Operations</a><br>
<a href="ch11_02.htm">vi Command-Line Options</a><br>
<a href="ch11_03.htm">ex Command-Line Options</a><br>
<a href="ch11_04.htm">Movement Commands</a><br>
<a href="ch11_05.htm">Edit Commands</a><br>
<a href="ch11_06.htm">Saving and Exiting</a><br>
<a href="ch11_07.htm">Accessing Multiple Files</a><br>
<a href="ch11_08.htm">Interacting with the Shell</a><br>
<a href="ch11_09.htm">Macros</a><br>
<a href="ch11_10.htm">Miscellaneous Commands</a><br>
<a href="ch11_11.htm">Alphabetical List of Keys in Command Mode</a><br>
<a href="ch11_12.htm">Syntax of ex Commands</a><br>
<a href="ch11_13.htm">Alphabetical Summary of ex Commands</a><br>
<a href="ch11_14.htm">vi Configuration</a></p></div>




<?troff .Pt "vi" "" 1 9?>


<p><b class="emphasis-bold">vi</b> is the classic screen-editing
program for Unix. A number of enhanced versions exist, including
<b class="emphasis-bold">nvi</b>, <b class="emphasis-bold">vim</b>, <b class="emphasis-bold">vile</b>, and
<b class="emphasis-bold">elvis</b>.  On Linux, the <b class="emphasis-bold">vi</b> command is usually a link to one of these
programs.</p>


<p><a name="INDEX-1749" /><b class="emphasis-bold">vi</b> is based on an older line editor
called <b class="emphasis-bold">ex</b>. Powerful editing
capabilities can be invoked within <b class="emphasis-bold">vi</b>
by pressing the colon (<b class="emphasis-bold">:</b>),
entering an <b class="emphasis-bold">ex</b> command, and pressing
the Return key. Furthermore, you can place
<b class="emphasis-bold">ex</b> commands in a startup file called
<em class="emphasis">~/.exrc</em>, which
<b class="emphasis-bold">vi</b> reads at the beginning of your
editing session.  Because <b class="emphasis-bold">ex</b> commands
are still an important part of <b class="emphasis-bold">vi</b>,
they also are described in this chapter. On Linux,
<b class="emphasis-bold">ex</b> is sometimes called
<b class="emphasis-bold">hex</b>.</p>


<p>This chapter, which essentially covers standard <b class="emphasis-bold">vi</b> but reflects <b class="emphasis-bold">nvi</b> extensions, presents the following topics:</p>


<ul><li><p><a name="INDEX-1750" />Review of <b class="emphasis-bold">vi</b> operations</p></li><li><p><b class="emphasis-bold">vi</b> command-line options</p></li><li><p><b class="emphasis-bold">ex</b> command-line options</p></li><li><p>Movement commands</p></li><li><p>Edit commands</p></li><li><p>Saving and exiting</p></li><li><p>Accessing multiple files</p></li><li><p>Interacting with the shell</p></li><li><p>Macros</p></li><li><p>Miscellaneous commands</p></li><li><p>Alphabetical list of keys in command mode</p></li><li><p>Syntax of <b class="emphasis-bold">ex</b> commands</p></li><li><p>Alphabetical summary of
<b class="emphasis-bold">ex</b> commands</p></li><li><p><b class="emphasis-bold">vi</b> configuration
(setting options at startup)</p></li></ul><p>For more information, see the O'Reilly book <em class="emphasis">Learning the vi
Editor</em> by Linda Lamb and Arnold Robbins.</p>


















<div class="sect1"><a name="ln.ch08.div.2" />
<h2 class="sect1">11.1. Review of vi Operations</h2>


<p>This section provides a review of the following:</p>


<ul><li><p>Command-line options</p></li><li><p><b class="emphasis-bold">vi</b> modes</p></li><li><p>Syntax of <b class="emphasis-bold">vi</b> commands</p></li><li><p>Status-line commands</p></li></ul>

<a name="ln.ch08.div.4" /><div class="sect2">
<h3 class="sect2">11.1.1. Command Mode</h3>


<a name="INDEX-1751" /><p>Once the file is opened, you are in command mode.
From command mode, you can:</p>


<ul><li><p>Invoke insert mode</p></li><li><p>Issue editing commands</p></li><li><p>Move the cursor to a different position in the file</p></li><li><p>Invoke <b class="emphasis-bold">ex</b> commands</p></li><li><p>Invoke a Linux shell</p></li><li><p>Save or exit the current version of the file</p></li></ul>
</div>








<a name="ln.ch08.div.5" /><div class="sect2">
<h3 class="sect2">11.1.2. Insert Mode</h3>


<a name="INDEX-1752" /><p>In insert mode, you can enter new text in the file.
Press the Esc or Ctrl-[ keys to exit insert mode and return to command mode.
The following commands invoke insert mode:</p>


<dl>
<dt><b><tt class="userinput"><b>a</b></tt></b></dt><dd><p>Append after cursor</p></dd>



<dt><b><tt class="userinput"><b>A</b></tt></b></dt><dd><p>Append at end-of-line</p></dd>



<dt><b><tt class="userinput"><b>c</b></tt></b></dt><dd><p>Begin change operation (must be followed by a movement
command)</p></dd>



<dt><b><tt class="userinput"><b>C</b></tt></b></dt><dd><p>Change to end-of-line</p></dd>



<dt><b><tt class="userinput"><b>i</b></tt></b></dt><dd><p>Insert before cursor</p></dd>



<dt><b><tt class="userinput"><b>I</b></tt></b></dt><dd><p>Insert at beginning of line</p></dd>



<dt><b><tt class="userinput"><b>o</b></tt></b></dt><dd><p>Open a line below current line</p></dd>



<dt><b><tt class="userinput"><b>O</b></tt></b></dt><dd><p>Open a line above current line</p></dd>



<dt><b><tt class="userinput"><b>R</b></tt></b></dt><dd><p>Begin overwriting text</p></dd>



<dt><b><tt class="userinput"><b>s</b></tt></b></dt><dd><p>Substitute a character</p></dd>



<dt><b><tt class="userinput"><b>S</b></tt></b></dt><dd><p>Substitute entire line</p></dd>

</dl>
</div>








<a name="ln.ch08.div.6" /><div class="sect2">
<h3 class="sect2">11.1.3. Syntax of vi Commands</h3>


<p><a name="INDEX-1753" />In <b class="emphasis-bold">vi</b>, commands have the following
general form:</p>


<blockquote><pre class="code">[<em class="emphasis">n</em>] <em class="emphasis">operator</em> [<em class="emphasis">m</em>] <em class="emphasis">object</em></pre></blockquote><p>The basic editing <em class="emphasis">operators</em> are:</p>


<dl>
<dt><b><tt class="userinput"><b>c</b></tt></b></dt><dd><p>Begin a change</p></dd>



<dt><b><tt class="userinput"><b>d</b></tt></b></dt><dd><p>Begin a deletion</p></dd>



<dt><b><tt class="userinput"><b>y</b></tt></b></dt><dd><p>Begin a yank (or copy)</p></dd>

</dl>


<p>If the current line is the object of the operation, then the operator
is the same as the object:  <b class="emphasis-bold">cc</b>, <b class="emphasis-bold">dd</b>, <b class="emphasis-bold">yy</b>.
Otherwise, the editing operators act on
objects specified by cursor-movement commands or
pattern-matching commands.
<em class="emphasis">n</em> and <em class="emphasis">m</em> are the number of times the operation is performed or the
number of objects the operation is performed on. If both <em class="emphasis">n</em> and <em class="emphasis">m</em>
are specified, the effect is <em class="emphasis">n</em> &times; <em class="emphasis">m</em>.</p>


<p>An object can represent any of the following text blocks:</p>


<dl>
<dt><b><em class="emphasis">word</em></b></dt><dd><p>Includes characters up to a space or punctuation mark. A capitalized object is a variant form that recognizes only blank spaces.</p></dd>



<dt><b><em class="emphasis">sentence</em></b></dt><dd><p>Extends to <b class="emphasis-bold">.</b>, <b class="emphasis-bold">!</b>, <b class="emphasis-bold">?</b> followed by two spaces.</p></dd>



<dt><b><em class="emphasis">paragraph</em></b></dt><dd><p>Extends to next blank line or <b class="emphasis-bold">nroff/troff</b> paragraph macro (defined
by <b class="emphasis-bold">para=</b> option).</p></dd>



<dt><b><em class="emphasis">section</em></b></dt><dd><p>Extends to next <b class="emphasis-bold">nroff/troff</b> section heading (defined by <b class="emphasis-bold">sect=</b> option).</p></dd>

</dl>


<?troff .Nd 10?><a name="ln.ch08.div.7" /><div class="sect3">
<h3 class="sect3">11.1.3.1. Examples</h3>


<dl>
<dt><b><tt class="userinput"><b>2cw</b></tt></b></dt><dd><p>Change the next two words</p></dd>



<dt><b><tt class="userinput"><b>d}</b></tt></b></dt><dd><p>Delete up to next paragraph</p></dd>



<dt><b><tt class="userinput"><b>d^</b></tt></b></dt><dd><p>Delete back to beginning of line</p></dd>



<dt><b><tt class="userinput"><b>5yy</b></tt></b></dt><dd><p>Copy the next five lines into temporary buffer (for future pasting)</p></dd>



<dt><b><tt class="userinput"><b>y]]</b></tt></b></dt><dd><p>Copy up to the next section into temporary buffer (for future pasting)</p></dd>

</dl>
</div>
</div>








<a name="ln.ch08.div.8" /><div class="sect2">
<h3 class="sect2">11.1.4. Status-Line Commands</h3>


<a name="INDEX-1754" /><p>Most commands are not echoed on the screen as you input them.
However, the status line at the bottom of the screen is used
to echo input for the following
<?troff \p?>commands:</p>


<dl>
<dt><b><tt class="userinput"><b>/</b></tt></b></dt><dd><p>Search forward for a pattern</p></dd>



<dt><b><tt class="userinput"><b>?</b></tt></b></dt><dd><p>Search backward for a pattern</p></dd>



<dt><b><tt class="userinput"><b>:</b></tt></b></dt><dd><p>Invoke an <b class="emphasis-bold">ex</b> command</p></dd>



<dt><b><tt class="userinput"><b>!</b></tt></b></dt><dd><p>Pipe the text indicated by a subsequent movement command through
the
<?troff \p?>following shell command, and replace the text with the output of
the shell command</p></dd>

</dl>


<p>Commands that are input on the status line must be entered by
pressing the Return key.
In addition, error messages and output from the <b class="emphasis-bold">Ctrl-G</b> command are
displayed on the status line.</p>
</div>
</div>







































































































































<?troff .Nd 10?>








































































































<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch10_05.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch11_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">10.5. Summary of Commands by Name</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">11.2. vi Command-Line Options</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>
