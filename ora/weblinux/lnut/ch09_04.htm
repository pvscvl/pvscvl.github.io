<?label 9.4. Examples of Searching?><html><head><title>Examples of Searching (Linux in a Nutshell, 3rd Edition)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Ellen Siever, Stephen Spainhour, Stephen Figgins and Jessica P. Hekman" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="0596000251L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Linux in a Nutshell, 3rd Edition" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="Linux in a Nutshell" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch09_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">Linux in a Nutshell, 3rd Edition</a></td><td width="172" valign="top" align="right"><a href="ch10_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />


<h2 class="sect1">9.4. Examples of Searching</h2>


<a name="INDEX-1693" /><a name="INDEX-1694" /><a name="INDEX-1695" /><a name="INDEX-1696" /><a name="INDEX-1697" /><a name="INDEX-1698" /><p>When used with <b class="emphasis-bold">grep</b> or <b class="emphasis-bold">egrep</b>, regular expressions 
normally are surrounded by quotes to avoid interpretation by the shell. (If the pattern contains a $, 
you must use single quotes, as in <tt class="literal">'</tt><b class="emphasis-bold">$200</b><tt class="literal">'</tt>, or escape the $, as in <tt class="literal">"</tt><b class="emphasis-bold">\$200</b><tt class="literal">"</tt>.)
When used with <b class="emphasis-bold">ed</b>, <b class="emphasis-bold">vi</b>, <b class="emphasis-bold">sed</b>, and <b class="emphasis-bold">awk</b>,
regular expressions usually are surrounded by / (although any
delimiter works). Here are some sample patterns:</p>


<a name="ln.ch06.tbl.5" /><table cellpadding="4" border="1">




<tr>
<td><b class="emphasis-bold">Pattern</b></td>
<td><b class="emphasis-bold">What does it match?

</b></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">bag</b></td>
<td>The string <em class="replaceable">bag</em>.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^bag</b></td>
<td>"bag" at beginning of line or string.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">bag$</b></td>
<td>"bag" at end of line or string.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^bag$</b></td>
<td>"bag" as the only text on line.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[Bb]ag</b></td>
<td>"Bag" or "bag."</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">b[aeiou]g</b></td>
<td>Second character is a vowel.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">b[^aeiou]g</b></td>
<td>Second character is not a vowel.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">b.g</b></td>
<td>Second character is any character except newline.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^...$</b></td>
<td>Any line containing exactly three characters.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^\.</b></td>
<td>Any line that begins with a dot.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^\.[a-z][a-z]</b></td>
<td>Same, followed by two lowercase letters (e.g., troff requests).</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^\.[a-z]\{2\}</b></td>
<td>Same as previous, <b class="emphasis-bold">grep</b> or <b class="emphasis-bold">sed</b> only.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">^[^.]</b></td>
<td>Any line that doesn't begin with a dot.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">bugs*</b></td>
<td>"bug," "bugs", "bugss", etc.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">"word"</b></td>
<td>A word in quotes.</td>
</tr>







<tr>
<td>

<b class="emphasis-bold">"*word"*</b></td>
<td>A word, with or without quotes.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[A-Z][A-Z]*</b></td>
<td>One or more uppercase letters.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[A-Z]+</b></td>
<td>Same, <b class="emphasis-bold">egrep</b> or <b class="emphasis-bold">awk</b> only.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[A-Z].*</b></td>
<td>An uppercase letter, followed by zero or more characters.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[A-Z]*</b></td>
<td>Zero or more uppercase letters.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[a-zA-Z]</b></td>
<td>Any letter.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">[0-9A-Za-z]+</b></td>
<td>Any alphanumeric sequence.</td>
</tr>



</table><a name="ln.ch06.tbl.6" /><table cellpadding="4" border="1">




<tr>
<th><b class="emphasis-bold">egrep or awk pattern</b></th>
<th><b class="emphasis-bold">What does it match?</b></th>
</tr>






<tr>
<td>

<b class="emphasis-bold">[567]</b></td>
<td>One of the numbers <em class="emphasis">5</em>, <em class="emphasis">6</em>, or <em class="emphasis">7</em></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">five|six|seven</b></td>
<td>One of the words <em class="emphasis">five</em>, <em class="emphasis">six</em>, or <em class="emphasis">seven</em></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">80[23]?86</b></td>
<td><em class="emphasis">8086,</em> <em class="emphasis">80286</em>, or <em class="emphasis">80386</em></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">compan(y|ies)</b></td>
<td><em class="emphasis">company</em> or <em class="emphasis">companies</em></td>
</tr>



</table><a name="ln.ch06.tbl.7" /><table cellpadding="4" border="1">




<tr>
<th><b class="emphasis-bold">vi pattern</b></th>
<th><b class="emphasis-bold">What does it match?</b></th>
</tr>






<tr>
<td>

<b class="emphasis-bold">\&lt;the</b></td>
<td>Words like <em class="emphasis">theater</em> or <em class="emphasis">the</em></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">the\&gt;</b></td>
<td>Words like <em class="emphasis">breathe</em> or <em class="emphasis">the</em></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">\&lt;the\&gt;</b></td>
<td>The word <em class="emphasis">the</em></td>
</tr>



</table><a name="ln.ch06.tbl.8" /><table cellpadding="4" border="1">




<tr>
<th><b class="emphasis-bold">sed or grep pattern</b></th>
<th><b class="emphasis-bold">What does it match?

</b></th>
</tr>






<tr>
<td>

<b class="emphasis-bold">0\{5,\}</b></td>
<td>Five or more zeros in a row</td>
</tr>


<tr>
<td>

<b class="emphasis-bold">[0-9]\{3\}-[0-9]\{2\}-[0-9]\{4\}</b></td>
<td>Social security number (<em class="emphasis">nnn</em>-<em class="emphasis">nn</em>-<em class="emphasis">nnnn</em>)</td>
</tr>



</table><a name="ln.ch06.div.6" /><div class="sect2">
<h3 class="sect2">9.4.1. Examples of Searching and Replacing</h3>


<p><a name="INDEX-1699" /><a name="INDEX-1700" />The following examples show the metacharacters available to <b class="emphasis-bold">sed</b> and <b class="emphasis-bold">vi</b>.
We have shown <b class="emphasis-bold">vi</b> commands with an
initial colon because that is how they are invoked within <b class="emphasis-bold">vi</b>.  A space is marked by a <img src='figs/squ.gif' align='absmiddle'></graphic>; a
tab is marked by <em class="emphasis">tab</em>.</p>


<a name="ln.ch06.tbl.9" /><table cellpadding="4" border="1">




<tr>
<th><b class="emphasis-bold">Command</b></th>
<th><b class="emphasis-bold">Result

</b></th>
</tr>






<tr>
<td>

<b class="emphasis-bold">s/.*/(&amp;)/</b></td>
<td><p>Reproduce the entire line, but add parentheses.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">s/.*/mv &amp; &amp;.old/</b></td>
<td><p>Change a wordlist (one word per line) into <b class="emphasis-bold">mv</b> commands.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">/^$/d</b></td>
<td><p>Delete blank lines.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:g/^$/d</b></td>
<td><p>Same as previous, in <b class="emphasis-bold">vi</b> editor.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">/^[<img src='figs/squ.gif' align='absmiddle'></graphic></b><em class="emphasis">tab</em><b class="emphasis-bold">]*$/d</b></td>
<td><p>Delete blank lines, plus lines containing spaces or tabs.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:g/^[<img src='figs/squ.gif' align='absmiddle'></graphic></b><em class="emphasis">tab</em><b class="emphasis-bold">]*$/d</b></td>
<td><p>Same as previous, in <b class="emphasis-bold">vi</b> editor.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">s/<img src='figs/squ.gif' align='absmiddle'></graphic><img src='figs/squ.gif' align='absmiddle'></graphic>*/<img src='figs/squ.gif' align='absmiddle'></graphic>/g</b></td>
<td><p>Turn one or more spaces into one space.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:%s/<img src='figs/squ.gif' align='absmiddle'></graphic><img src='figs/squ.gif' align='absmiddle'></graphic>*/<img src='figs/squ.gif' align='absmiddle'></graphic>/g</b></td>
<td><p>Same as previous, in <b class="emphasis-bold">vi</b> editor.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:s/[0-9]/Item &amp;:/</b></td>
<td><p>Turn a number into an item label (on the current line).
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:s</b></td>
<td><p>Repeat the substitution on the first occurrence.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:&amp;</b></td>
<td>Same as previous.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">:sg</b></td>
<td><p>Same, but for all occurrences on the line.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:&amp;g</b></td>
<td>Same as previous.</td>
</tr>



<tr>
<td>

<b class="emphasis-bold">:%&amp;g</b></td>
<td><p>Repeat the substitution globally.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:.,$s/Fortran/\U&amp;/g</b></td>
<td><p>Change word to uppercase, on current line to last line.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:%s/.*/\L&amp;/</b></td>
<td><p>Lowercase entire file.
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:s/\&lt;./\u&amp;/g</b></td>
<td><p>Uppercase first letter of each word on current line.
(Useful for titles.)
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:%s/yes/No/g</b></td>
<td><p>Globally change a word (<b class="emphasis-bold">yes</b>) to another word (<b class="emphasis-bold">No</b>).
</p></td>
</tr>


<tr>
<td>

<b class="emphasis-bold">:%s/Yes/~/g</b></td>
<td><p>Globally change a different word to <b class="emphasis-bold">No</b> (previous replacement).</p></td>
</tr>



</table><p>Finally, here are some <b class="emphasis-bold">sed</b> examples for transposing words. A simple
transposition of two words might look like this:
</p>


<blockquote><pre class="code">s/die or do/do or die/	Transpose words</pre></blockquote>


<p>The real trick is to use hold buffers to transpose variable
patterns. For example:
</p>


<blockquote><pre class="code">s/\([Dd]ie\) or \([Dd]o\)/\2 or\1/	  Transpose, using hold buffers</pre></blockquote>


<p><a name="INDEX-1701" /><a name="INDEX-1702" /><a name="INDEX-1703" /><a name="INDEX-1704" /></p>
</div>


<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch09_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch10_01.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">9.3. Metacharacters</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">10. The Emacs Editor</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="../sql/index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>