<?label 20. Python Reference?><html><head><title>Python Reference (MySQL &amp; mSQL)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Randy Jay Yarger, George Reese and Tim King" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="1565924347L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="MySQL &amp; mSQL" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="MySQL and mSQL" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch19_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">MySQL &amp; mSQL</a></td><td width="172" valign="top" align="right"><a href="ch20_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />



<h1 class="chapter">Chapter 20. Python Reference</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4><p>
<a href="ch20_01.htm">Module: MySQL</a><br />
<a href="ch20_02.htm">Module: mSQL
</a><br /></p></div>










<p>There are actually a handful of Python modules running around that
support database access against MySQL and mSQL. They are very similar
in most respects. This chapter provides the API specification for two
common modules. It is, however, important to note an approaching
unification of Python database APIs under a single API being
specified by the Python Database SIG. mSQL currently has no support
for this API.</p>


































<div class="sect1"><a name="ch20-16681" />
<h2 class="sect1">20.1. Module: MySQL</h2>





<p>The entry point into the <tt class="literal">MySQL</tt>
<a name="INDEX-1910" />
<a name="INDEX-1911" /> module is via the
<tt class="literal">MySQL.connect()</tt> method. The return value from this
method represents a connection to a MySQL database that you can use
for all of your MySQL operations.</p>





<a name="INDEX-1912" /><div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: MySQL.connect( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">connection</em> = MySQL.connect(<em class="replaceable">host</em>)</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Connects to the MySQL database engine on the specified server. If you
call <tt class="literal">connect()</tt> with no arguments, it will connect
you to the MySQL database engine on the local machine. It returns a
Python object representing a connection to a MySQL database.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">conn = MySQL.connect(`carthage.imaginary.com');</pre></blockquote>





</div>

<a name="INDEX-1913" /><div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: connection.selectdb( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">connection</em>.selectdb(<em class="replaceable">database</em>)</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Selects the database against which you intend to operate.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">connection.selectdb(`test');</pre></blockquote>





</div>

<a name="INDEX-1914" /><div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: connection.do( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">results</em> = <em class="replaceable">connection</em>.do(<em class="replaceable">sql</em>)</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Sends the specified SQL statement to the currently selected database
for execution. The results are returned as a list of lists where each
list represents a single row. The method is also used for
updates -- you just do not process the return value.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">results = conn.do(`SELECT title, year FROM movies');
row1 = results[0];</pre></blockquote>





</div>

<a name="INDEX-1915" /><a name="INDEX-1916" /><div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: connection.query( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">statement_handle</em> = <em class="replaceable">connection</em>.query(<em class="replaceable">sql</em>)</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Like the <a name="INDEX-1916" />do()
method, this method sends the specified SQL statement to the
currently selected database. Unlike the do() method, this method
returns a statement handler object that encapsulates data about the
results of the SQL query as well as the results themselves.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">hndl = conn.query(`SELECT title, year FROM movies');</pre></blockquote>





</div>

<a name="INDEX-1917" /><div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: statement_handle.affectedrows( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">rowcount</em> = <em class="replaceable">statement_handle</em>.affectedrows()</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Assuming the results of the SQL represented by this statement handler
came from an <tt class="literal">UPDATE</tt>, <tt class="literal">DELETE</tt>, or
<tt class="literal">INSERT</tt>, this method returns the number of rows
actually modified by that statement.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">rowcount = hndl.affectedrows()</pre></blockquote>





</div>

<div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: statement_handle.numrows( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">rowcount</em> = <em class="replaceable">statement_handle</em>.numrows()</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Assuming the results of the SQL represented by this statement handler
came from a <tt class="literal">SELECT</tt>, this method provides the
number of rows in the result set.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">rowcount = hndl.numrows()</pre></blockquote>





</div>

<div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: statement_handle.fields( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code">list = statement_handle.fields()</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Provides meta-information about the columns in the results returned
by this query. The list is actually a list of lists. Each member of
the returned list is a list of meta-information about a specific
column. In other words, the returned list will have one member for
each column in the result set. The first member of the list
represents the first column, the second member the second column, and
so on.</p>





<p>The meta-data for each column is a list of five elements:</p>




<ul><li><p>A string containing the column name</p></li><li><p>A string containing the name of the table from which the column came</p></li><li><p>A string with the name of the SQL datatype for the column</p></li><li><p>An <tt class="literal">int</tt> containing the size of the column</p></li><li><p>A string containing the column modifies such as
<tt class="literal">NOTNULL</tt></p></li></ul>


<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">flds = hndl.fields();
for column in flds:
name = column[0];
table = column[1];
type = column[2];
size = columns[3];
mods = column[4];</pre></blockquote>





</div>

<div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: statement_handle.fetchrows( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">list</em> = <em class="replaceable">statement_handle</em>.fetchrows(<em class="replaceable">rownum</em>)</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Fetches the row values of the specified row number associated with
the result set represented by the statement handler. If you pass -1
as an argument, this method will return a list of all the rows. For
each row in the list, a row is represented by a list whose number of
elements equals the number of columns in the result set. The first
element represents the first column value, the second element the
second column, and so on.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">rows = hndl.fetchrows(-1);
for row in rows:
    col1 = row[0];
    col2 = row[1];</pre></blockquote>





</div>

<div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: connection.listdbs( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">dbs</em> = <em class="replaceable">connection</em>.listdbs()</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Provides a Python list of databases available on the database server.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">dbs = conn.listdbs()</pre></blockquote>





</div>

<a name="INDEX-1918" /><a name="INDEX-1919" /><a name="INDEX-1920" /><div class="refentry"><table cellpadding="5" border="0" width="515"><tr><td align="left"><font size="+1"><b><i>Method: connection.listtables( )</i></b></font></td><td align="right"><i /></td></tr></table><hr color="black" align="left" noshade="true" size="3" width="515" /><table cellpadding="5" border="0" width="515"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Signature</h4>





<blockquote><pre class="code"><em class="replaceable">tables</em> = <em class="replaceable">connection</em>.listtables();</pre></blockquote>






<h4 class="refsect1">Synopsis</h4>





<p>Provides a Python list of tables stored in the selected database.</p>






<h4 class="refsect1">Example</h4>





<blockquote><pre class="code">tables = conn.listtables();<a name="INDEX-1919" />
<a name="INDEX-1920" /></pre></blockquote>






</div>
</div>




































<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch19_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch20_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">19.2. mSQL C API
</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">20.2. Module: mSQL
</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>