<?label 16. MySQL and mSQL System Variables?><html><head><title>MySQL and mSQL System Variables (MySQL &amp; mSQL)</title><link href="../style/style1.css" type="text/css" rel="stylesheet" />

<meta name="DC.Creator" content="Randy Jay Yarger, George Reese and Tim King" /><meta scheme="MIME" content="text/xml" name="DC.Format" /><meta content="en-US" name="DC.Language" /><meta content="O'Reilly & Associates, Inc." name="DC.Publisher" /><meta scheme="ISBN" name="DC.Source" content="1565924347L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="MySQL &amp; mSQL" /><meta content="Text.Monograph" name="DC.Type" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" alt="Book Home" usemap="#banner-map" border="0" /><map name="banner-map"><area alt="MySQL and mSQL" href="index.htm" coords="0,0,466,65" shape="rect" /><area alt="Search this book" href="jobjects/fsearch.htm" coords="467,0,514,18" shape="rect" /></map>

<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch15_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm">MySQL &amp; mSQL</a></td><td width="172" valign="top" align="right"><a href="ch16_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>
<hr align="left" width="515" />



<h1 class="chapter">Chapter 16. MySQL and mSQL System Variables</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4><p>
<a href="ch16_01.htm">MySQL System Variables
</a><br />
<a href="ch16_02.htm">mSQL System Variables
</a><br /></p></div>










<p>Several variables can be used to customize the operation of MySQL and
mSQL. Many of these are environment variables that are inherited from
the user's shell, while others are set via command line options
and configuration files.</p>



































<div class="sect1"><a name="ch16-26526" />
<a name="INDEX-1136" /><a name="INDEX-1137" /><h2 class="sect1">16.1. MySQL System Variables
</h2>





<a name="ch16-1-fm2xml" /><div class="sect2">
<h3 class="sect2">16.1.1. Environment Variables</h3>





<p>The following variables are specific to MySQL programs. They may be
defined in the current shell or as part of a shell script. To set a
variable for the MySQL daemon (<em class="filename">mysqld</em>), define
the variable in the <em class="filename">safe_mysqld</em> script that is
used to start the daemon or define the variables in the MySQL
configuration file (described later in this chapter).</p>





<dl>
<dt><b>MY_BASEDIR</b></dt><p>
<dt><b>MY_BASEDIR_VERSION</b></dt>
<dd><p>The root directory containing the subdirectories
`<em class="filename">bin'</em>,
`<em class="filename">var'</em> and
`<em class="filename">libexec'</em> that contain the MySQL
programs and data. A default value of this (usually compiled into
MySQL as <em class="emphasis">/usr/local</em>) is used if this variable
does not exist. This option affects only the
<em class="emphasis">mysqld</em> program.</p></dd>





<dt><b>MYSQL_DEBUG</b></dt>
<dd><p>The debugging level for the program. This option can be used with any
MySQL program. The debugging library used by MySQL has many options.
A list of all of the available options can be found at <a href="../../../../../../www.turbolift.com/mysql/appendixC.html">http://www.turbolift.com/mysql/appendixC.html</a>.
The most common set of options is
<tt class="literal">d:t:o,/tmp/debugfile</tt>.</p></dd>





<dt><b>MYSQL_HOST</b></dt>
<dd><p>The hostname used to connect to a remote MySQL database server. This
option can be used with any of the MySQL client programs
(<em class="emphasis">mysql</em>, <em class="emphasis">mysqlshow</em>,
<em class="emphasis">mysqladmin</em>, etc.).</p></dd>





<dt><b>MYSQL_PWD</b></dt>
<dd><p>The password used to connect to the MySQL database server. This
option can be used with any of the MySQL client programs.</p></dd>

</dl>





<a name="ch16-2-fm2xml" /><blockquote><h4 class="objtitle">WARNING</h4>

<p>Be careful where you put your passwords. A common use for environment
variables is to set them within scripts. Of course, setting this
particular variable in a script would make your password visible to
anyone who can run the script. Even setting the variable manually on
the command line exposes it to the superuser and any else who has the
ability to examine the system memory.</p>




</blockquote>

<dl>
<dt><b>MYSQL_TCP_PORT</b></dt>
<dd><p>When used with a client program, this is the TCP port on a remote
machine used to connect to the MySQL database server. When used with
<em class="filename">mysqld</em>, this is the port used to listen for
incoming connections.</p></dd>





<dt><b>MYSQL_UNIX_PORT</b></dt>
<dd><p>When used with a client program, this is the Unix socket file used to
connect to the MySQL database server. When used with
<em class="filename">mysqld</em>, this is the name of the Unix socket file
created that allows local connections.</p></dd>

</dl>





<p>In addition, the MySQL programs use the following environment
variables that are routinely set as part of the Unix environment.</p>





<dl>
<dt><b>EDITOR</b></dt>
<dt><b>VISUAL</b></dt><p>
<dd><p>The path of the default editor. The <em class="filename">mysql</em>
program uses this program to edit SQL statements if a
<tt class="literal">\e</tt> or <tt class="literal">edit</tt> command is
encountered.</p></dd>





<dt><b>HOME</b></dt>
<dd><p>The home directory of the current user.</p></dd>





<dt><b>LOGIN</b></dt><p>
<dt><b>LOGNAME</b></dt><p>
<dt><b>USER</b></dt>
<dd><p>The username of the current user.</p></dd>





<dt><b>PATH</b></dt>
<dd><p>The list of directories used to find programs.</p></dd>





<dt><b>POSIXLY_CORRECT</b></dt>
<dd><p>If this variable is defined, no special processing is done on command
line options. Otherwise, command line options are reordered so that
extended options can be used. This variable can be used with any
MySQL program.</p></dd>





<dt><b>TMP</b></dt><p>
<dt><b>TMPDIR</b></dt>
<dd><p>The directory in which temporary files are kept. If this variable is
not defined `<tt class="literal">/tmp</tt>' is used.</p></dd>





<dt><b>TZ</b></dt>
<dd><p>The time zone of the local machine.</p></dd>





<dt><b>UMASK</b></dt>
<dd><p>The umask used when creating new files.</p></dd>

</dl>
</div>
















<a name="ch16-3-fm2xml" /><div class="sect2">
<a name="INDEX-1138" /><a name="INDEX-1139" /><h3 class="sect2">16.1.2. Command line variables
</h3>





<p>These options are supplied via the <tt class="literal">-O</tt> or
<tt class="literal">-set-variable</tt> command line option that is
available in most MySQL programs.</p>





<dl>
<dt><b>
<a name="INDEX-1140" />back_log</b></dt>
<dd><p>The number of TCP connections that can be queued at once. The default
value is 5. This option is available for <em class="emphasis">mysqld</em>
only.</p></dd>





<dt><b>connect_timeout </b></dt>
<dd><p>The number of seconds the <em class="emphasis">mysqld</em> server waits
for a connect packet before responding with Bad handshake.</p></dd>





<dt><b>
<a name="INDEX-1141" />decode-bits</b></dt>
<dd><p>The number of bits used for generating certain internal tables. This
should be a number between 4 and 9 (between 4 and 6 on a 16-bit
operating system). The default value is 9. This option is available
only for <em class="emphasis">isamchk</em> and should be used only if you
understand the details of the <tt class="literal">ISAM</tt> table
structure.</p></dd>





<dt><b>delayed_insert_limit</b></dt>
<dd><p>Causes the <tt class="literal">INSERT DELAYED </tt>handler to check whether
there are any <tt class="literal">SELECT</tt> statements pending after
inserting <em class="emphasis">delayed_insert_limit</em> rows. If so, the
handler allows the statements to execute before continuing.</p></dd>





<dt><b>delayed_insert_timeout </b></dt>
<dd><p>How long an <tt class="literal">INSERT DELAYED</tt> thread should wait for
<tt class="literal">INSERT</tt> statements to finish before terminating.</p></dd>





<dt><b>delayed_queue_size </b></dt>
<dd><p>How big a queue (in rows) should be allocated for handling
<tt class="literal">INSERT</tt> <tt class="literal">DELAYED</tt>. If the queue
becomes full, any client that does an <tt class="literal">INSERT</tt>
<tt class="literal">DELAYED</tt> must wait until there is room in the queue
again.</p></dd>





<dt><b>
<a name="INDEX-1142" />dritebuffer</b></dt>
<dd><p>The size of the buffer used to store outgoing data. The default value
is 260KB. This option is only available for
<em class="emphasis">isamchk</em>.<a name="INDEX-1143" />
<a name="INDEX-1144" /></p></dd>





<dt><b>flush_time </b></dt>
<dd><p>If set, all tables are closed then every flush_time seconds to free
resources and synchronize changes to disk.</p></dd>





<dt><b>
<a name="INDEX-1145" />join_buffer</b></dt>
<dd><p>The size of a buffer used when performing table joins. Increasing
this can speed up performance for queries that join tables. The
default value is 130 KB. This option is available only for
<em class="emphasis">mysqld</em>.</p></dd>





<dt><b>
<a name="INDEX-1146" />key_buffer_size</b></dt>
<dd><p>The size of a buffer allocated to store recently accessed keys.
Increasing this can speed up performance for queries that involve the
repeated use of the same keys. This option is available for
<em class="emphasis">isamchk</em> (where the default value is 0.5 MB) and
<em class="emphasis">mysqld</em> (default value of 1 MB).</p></dd>





<dt><b>long_query_time </b></dt>
<dd><p>If set, the slow_queries counter is incremented each time a query
takes longer than <em class="emphasis">long_query_time</em> seconds.</p></dd>





<dt><b>
<a name="INDEX-1147" />max_allowed_packet</b></dt>
<dd><p>The maximum size of the buffer used to store incoming data. Each
client connection has a separate buffer. The default value is 64 KB.
This option is available only for <em class="filename">mysqld</em>.</p></dd>





<dt><b>max_connect_errors </b></dt>
<dd><p>If set, the server blocks further connections from a remote host when
the number of interrupted connections from that host exceeds
<em class="emphasis">max_connect_errors</em>. You can unblock a host with
the command <tt class="literal">FLUSH HOSTS</tt>.</p></dd>





<dt><b>
<a name="INDEX-1148" />max_connections</b></dt>
<dd><p>The maximum number of simultaneous client connections. The default
value is 90. This option can be used only with
<em class="emphasis">mysqld</em>.</p></dd>





<dt><b>max_delayed_threads</b></dt>
<dd><p>Start no more than this number of threads to handle <tt class="literal">INSERT
DELAYED</tt>. If a client tries to use <tt class="literal">INSERT
DATA</tt> to insert new data after this limit is reached, the
request is handled as if the <tt class="literal">DELAYED</tt> attribute was
not specified.</p></dd>





<dt><b>
<a name="INDEX-1149" />max_join_size</b></dt>
<dd><p>The maximum size of a temporary table created by joining tables. The
default value is 4 GB. This option can be used only with
<em class="emphasis">mysqld</em>.</p></dd>





<dt><b>
<a name="INDEX-1150" />max_sort_length</b></dt>
<dd><p>The maximum number of characters to examine when sorting a
<tt class="literal">BLOB</tt> or <tt class="literal">VARCHAR</tt> field. The
default value is 1KB.</p></dd>





<dt><b>max_tmp_tables </b></dt>
<dd><p>(To be implemented later for Version 3.23.) Maximum number of
temporary tables a client can keep open at the same time.</p></dd>





<dt><b>
<a name="INDEX-1151" />net_buffer_length</b></dt>
<dd><p>The initial size of the buffer used to store incoming data. Each
client connection has a separate buffer. The default value is 8KB.
This option is available for <em class="emphasis">mysql</em>,
<em class="emphasis">mysqld</em>, and <em class="emphasis">mysqldump</em>.</p></dd>





<dt><b>
<a name="INDEX-1152" />readbuffer</b></dt>
<dd><p>The size of the buffer used to store data being read from files. The
default value is 260KB. This option is available only for
<em class="emphasis">isamchk</em>.</p></dd>





<dt><b>
<a name="INDEX-1153" />record_buffer</b></dt>
<dd><p>The size of a buffer used to read data from the tables directly (that
is, not using keys). Increasing this can speed up performance for
queries that do not involve keys. The default value is 130KB. This
option is available only for <em class="emphasis">mysqld</em>.</p></dd>





<dt><b>
<a name="INDEX-1154" />sortbuffer</b></dt>
<dd><p>The size of the buffer used when sorting table data. The default
value is 1MB. This option is available only for
<em class="emphasis">isamchk</em>.</p></dd>





<dt><b>
<a name="INDEX-1155" />sort_buffer</b></dt>
<dd><p>The size of the buffer used when performing sorts on retrieved data.
Increasing this can speed up performance for queries that use
<tt class="literal">ORDER BY</tt> or <tt class="literal">GROUP BY</tt>
statements. The default value is 2MB. This option is available only
for <em class="filename">mysqld</em>.</p></dd>





<dt><b>
<a name="INDEX-1156" />sort_key_blocks</b></dt>
<dd><p>The number of blocks of keys used when sorting keys. This default
value is 16. This option is only available for
<em class="emphasis">isamchk</em> and should be used only if you
understand the details of the <tt class="literal">ISAM</tt> table
structure.</p></dd>





<dt><b>
<a name="INDEX-1157" />table_cache</b></dt>
<dd><p>The maximum number of tables the database server can have open at
once. The default value is 64. This option is only available for
<em class="filename">mysqld</em>.</p></dd>





<dt><b>
<a name="INDEX-1158" />tmp_table_size</b></dt>
<dd><p>The maximum size of temporary tables used by the database server. The
default value is 1MB. This option is only available for
<em class="filename">mysqld</em>.</p></dd>





<dt><b>
<a name="INDEX-1159" />thread_stack</b></dt>
<dd><p>The size of the memory stack for each thread. The default value is
64KB. This option is only available for <em class="filename">mysqld</em>.</p></dd>





<dt><b>wait_timeout </b></dt>
<dd><p>The number of seconds the server waits for activity on a connection
before closing it.</p></dd>

</dl>
</div>
















<a name="ch16-4-fm2xml" /><div class="sect2">
<a name="INDEX-1160" /><a name="INDEX-1161" /><h3 class="sect2">16.1.3. The MySQL Configuration File
</h3>





<p>As of MySQL 3.22, you may specify both server and client options
within a text configuration file. There is one format for this file
which takes on different meaning depending on the location of the
file. If the configuration file is stored in
<em class="emphasis">/etc/my.cnf</em>, the options apply to all MySQL
servers and clients on the machine. If it located in the data
directory of a MySQL server (e.g.,
<em class="emphasis">/usr/local/mysql/data/my.cnf</em>) the options effect
the operation of that MySQL server. Lastly, if the configuration file
is named <em class="emphasis">.my.cnf</em> (note the initial period) and
is located in the home directory of a user, it effects any clients
run by that user.</p>





<p>The format of the file is similar to the one popularized by Windows
initialization files. The file is broken up into stanzas, each with a
group name enclosed in brackets. Underneath the group name is a list
of options. Comments are indicated by a line beginning with
<tt class="literal">#</tt>
<a name="INDEX-1162" />
<a name="INDEX-1163" />
<a name="INDEX-1164" /> or <tt class="literal">;</tt>. Each
group name is the name of a MySQL client or server program you wish
the option to affect. The special group name
<tt class="literal">client</tt> affects all MySQL client programs
(everything except <em class="emphasis">mysqld</em>).</p>





<p>The options given in this file can be any long form command line
option to any MySQL command (excluding the double-dash
"<tt class="literal">--</tt>" option indentifier). Following is
a sample <a name="INDEX-1165" />
<a name="INDEX-1166" />server-wide <em class="emphasis">my.cnf
</em>file.</p>





<blockquote><pre class="code">[client]
port=9999
socket=/dev/mysql

[mysqld]
port=9999
socket=/dev/mysql
set-variable = join_buffer=1M

[mysql]
host=dbhost
unbuffered</pre></blockquote>
</div>
</div>




































<hr align="left" width="515" />
<div class="navbar"><table border="0" width="515"><tr><td width="172" valign="top" align="left"><a href="ch15_02.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td width="171" valign="top" align="center"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td width="172" valign="top" align="right"><a href="ch16_02.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td width="172" valign="top" align="left">15.2. mSQL SQL
</td><td width="171" valign="top" align="center"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td width="172" valign="top" align="right">16.2. mSQL System Variables
</td></tr></table></div>
<hr align="left" width="515" />

<img src="../gifs/navbar.gif" alt="Library Navigation Links" usemap="#library-map" border="0" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="1,1,83,102" shape="rect" /><area href="../lnut/index.htm" coords="81,0,152,95" shape="rect" /><area href="../run/index.htm" coords="172,2,252,105" shape="rect" /><area href="../apache/index.htm" coords="238,2,334,95" shape="rect" /><area href="index.htm" coords="336,0,412,104" shape="rect" /><area href="../dbi/index.htm" coords="415,0,507,101" shape="rect" /><area href="../cgi/index.htm" coords="511,0,601,99" shape="rect" /></map>

</body></html>