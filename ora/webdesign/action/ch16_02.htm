<html><head><title>Adding Scripts to Frames (ActionScript: The Definitive Guide)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Colin Moock" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565928520L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="ActionScript: The Definitive Guide" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="ActionScript: The Definitive Guide" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch16_01.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">ActionScript: The Definitive Guide</a></td><td align="right" valign="top" width="228"><a href="ch16_03.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">16.2. Adding Scripts to Frames</h2>


<p>Flash <a name="INDEX-2046" />
<a name="INDEX-2047" />documents are fundamentally structured
around the concept of animation. Every Flash document comprises a
linear sequence of <em class="emphasis">frames</em>, or slices of visual
and audio content. A great deal of ActionScript code is tied to this
frame-based structure. By placing a code block on a frame, we
stipulate the timing of that block's execution relative to the
playback of the movie. Whenever we add code to a frame, we must
always consider not only what we want the code to do, but
<em class="emphasis">when</em> we want the code to execute.</p>


<p>For example, we may want to write some code that places a new movie
clip on stage when the 20<sup class="superscript">th</sup> frame of a
movie is displayed:</p>


<blockquote><pre class="code">_root.attachMovie("myClip", "clip1", 0);</pre></blockquote>


<p>In order for that code to execute when the 20th frame is displayed,
we must attach it to a keyframe at frame 20 of the movie. To
<a name="INDEX-2048" />
<a name="INDEX-2049" />attach code to a keyframe, we select
the keyframe in the timeline, open the Actions panel, and then add
the desired code to the Script pane. During playback, code on a
keyframe is executed before the content of the frame is displayed.</p>


<p>Code on keyframes is used to perform tasks synchronized to the
movie's playback and to establish program elements such as
variables, functions, and objects for use throughout a movie clip or
movie. A <a name="INDEX-2050" />
<a name="INDEX-2051" />timeline
loop is a simple example of a synchronized task. Suppose we attach
the following code to frame 15 of a movie:</p>


<blockquote><pre class="code">gotoAndPlay(10);</pre></blockquote>


<p>When the playhead of the movie reaches frame 15, the code executes
and the movie begins playing back at frame 10 again. When frame 15 is
reached for the second time, the code is executed again and the movie
once again starts playing at frame 10. This causes the movie to cycle
endlessly between frames 10 and 15.</p>


<p>However, code on keyframes does not always control or synchronize
with a movie's playhead. We may also use
<a name="INDEX-2052" />keyframes simply as storage devices
for functions, variables, objects, and other program entities. For
example, we may attach the function <em class="filename">moveTo( )</em> to
frame 1 of a movie clip and then invoke <em class="filename">moveTo(
)</em> from a button later in the movie:</p>


<blockquote><pre class="code">function moveTo (x, y) {
  _x = x;
  _y = y;
}</pre></blockquote>


<p>One caution: because the execution of code on frames is dictated by
the playback of a movie, we must always ensure that variables,
functions, and other program elements are available before they are
accessed. We can't, for example, invoke a function at frame 3
if that function isn't defined until frame 10. Code used
globally throughout a movie should, therefore, be placed on the first
frame of the main timeline.</p>


<p>We must also ensure that no code attempts to access portions of a
movie that have not yet loaded. To check whether a specific portion
of a movie has loaded, we use either the movie clip
<a name="INDEX-2053" /> <a name="INDEX-2054" /><tt class="literal">_framesloaded</tt>
property or the <em class="filename">getBytesLoaded( )</em> method. For
sample code, see the entry for
<em class="filename">Movieclip</em><tt class="literal">._framesloaded</tt> in
<a href="part3.htm">Part III, "Language Reference"</a>.</p>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch16_01.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch16_03.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">16. ActionScript Authoring Environment</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">16.3. Adding Scripts to Buttons</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,1,78,93" shape="rect" /><area href="../wdesign/index.htm" coords="80,2,155,96" shape="rect" /><area href="../xhtml/index.htm" coords="158,0,263,97" shape="rect" /><area href="../audio/index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="338,1,434,93" shape="rect" /><area href="index.htm" coords="439,0,540,102" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,685,102" shape="rect" /></map>

</body></html>