<html><head><title>Adding Audio to a Web Page (Web Design in a Nutshell, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="style/style1.css" />

<meta name="DC.Creator" content="Jennifer Niederst" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596001967L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Web Design in a Nutshell, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Web Design in a Nutshell" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table cellpadding=3 width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch24_06.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Web Design in a Nutshell, 2nd Edition</a></td><td align="right" valign="top" width="228"><a href="ch24_08.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">24.7. Adding Audio to a Web Page</h2>

<p>There are a number of ways to add audio to a web page. This section
covers the most common techniques.
</p>

<a name="wdnut2-CHP-24-SECT-7.1" /><div class="sect2">
<h3 class="sect2">24.7.1. A Simple Link</h3>

<p><a name="INDEX-2641" />
<a name="INDEX-2642" />You
can use a simple anchor tag <tt class="literal">(&lt;a&gt;</tt>) to link to
an audio file from a web page, as follows:
</p>

<blockquote><pre class="code">&lt;A HREF="audio/song.wav"&gt;Play the song (3.5 MB)&lt;/A&gt;
&lt;A HREF="groovy.mp3"&gt;&lt;IMG SRC="buttons/playme.gif"&gt;&lt;/A&gt;</pre></blockquote>

<p>When the reader clicks on the linked text or graphic, the browser
retrieves the audio file from the server and launches a helper
application (or plug-in, if the browser is so configured) to play the
file. Files accessed in this manner are typically downloaded to the
user's hard drive (stored in cache).
</p>

<p>If the browser uses an external player, a new small window from the
helper application opens with the controls for playing the audio. If
the browser is configured to use a plug-in player (such as the
popular QuickTime plug-in), a control panel may load right in the
browser window, replacing the original web page. You may want to
advise readers to use the Back button to return to the original page
should this happen.
</p>

<p>It is also good web etiquette to warn readers of the size of an audio
file so they can make an informed decision as to whether they want to
spend the time downloading the file.
</p>

</div>
<a name="wdnut2-CHP-24-SECT-7.2" /><div class="sect2">
<h3 class="sect2">24.7.2. Background Sound</h3>

<p><a name="INDEX-2643" />
<a name="INDEX-2644" />There
are several ways (mostly browser-specific) to make an audio file
start playing automatically when a web page loads. Note that the
disadvantage of using background sounds is that the user has no way
of turning the sound off if she does not like it. Also, if the audio
file is large, you are forcing a potentially lengthy download on the
user. This is particularly bad web etiquette.
</p>

<p>To add a background sound to a web page, try these methods:</p>

<ul><li>
<p>For Internet Explorer 2.0+ (no other browsers support this tag), use
the <tt class="literal">&lt;bgsound&gt;</tt> tag, as
follows:<a name="INDEX-2645" />
</p>

<blockquote><pre class="code">&lt;BGSOUND SRC="audio/song.mid" LOOP=3&gt;</pre></blockquote>

<p>where <tt class="literal">src</tt> gives the URL for the audio file and
<tt class="literal">loop</tt> is the number of times you want the audio to
play (this attribute can be set to "infinite"). WAV,
AIFF, and MIDI sound files can be played as background sounds using
this method.
</p>
</li><li>
<p>To set a background sound that works with both Netscape Navigator and
Internet Explorer, use a combination of the background sound tag (for
IE) and an <tt class="literal">&lt;embed&gt;</tt> tag (for Navigator) with
the control panel hidden, as follows:
</p>

<blockquote><pre class="code">&lt;EMBED SRC="audio/song.mid" autostart=true hidden=true&gt;
&lt;NOEMBED&gt;&lt;BGSOUND="audio/song.mid"&gt;&lt;/NOEMBED&gt;</pre></blockquote>
</li>
<li>
<p>For Netscape Navigator and Internet Explorer (5 and higher), you can
make audio play automatically with client-pull by using the
<tt class="literal">&lt;meta&gt;</tt><a name="INDEX-2646" /> tag as follows:
</p>

<blockquote><pre class="code">&lt;META http-equiv="refresh" content="1;url=audio/song.mid"&gt;</pre></blockquote>

<p>which causes the page to refresh (and the audio to play) after one
<a name="INDEX-2647" />second.
This use of the <tt class="literal">&lt;meta&gt;</tt> tag is discouraged by
the W3C in HTML 4.01.
</p>
</li></ul>
</div>
<a name="wdnut2-CHP-24-SECT-7.3" /><div class="sect2">
<h3 class="sect2">24.7.3. Adding RealMedia</h3>

<p>RealMedia (including RealAudio) files can be added to a web page via
two methods. The first triggers the browser to launch RealPlayer as
an external application. The second plays the media file in a player
embedded directly in the browser window using the RealPlayer plug-in.
</p>

<p>In either case, you do not create a link directly to the RealMedia
file itself, but rather to a special reference file, called a
<em class="firstterm">metafile</em>. The metafile is a simple text
document that contains the URL of the RealMedia file. These reference
files are generally kept in the same directories as the HTML
documents, although that is not a requirement.
</p>

<p>There is a three-step process from click to playback. First, clicking
the HTML link downloads the metafile from the server to the browser.
Once it arrives at the browser, the metafile tells the browser to
launch the RealPlayer and provides the player with URL information.
Finally, the player uses the URL to request the actual media file
from the server and begins playing the stream.
</p>

<p>Metafiles are useful for maintenance and control purposes. To change
the audio, all you have to do is change the tiny metafile, rather
than having to dig through HTML source code. You can also do things
like calling multiple streaming media files from one metafile. One
link to the metafile plays all the files.
</p>

<p>This indirect linking process is demonstrated in the following two
examples.
</p>

<a name="wdnut2-CHP-24-SECT-7.3.1" /><div class="sect3">
<h3 class="sect3">24.7.3.1. Linking to RealMedia (external player)</h3>

<p>When the user accesses <a name="INDEX-2648" />RealMedia via a link (using the
<tt class="literal">&lt;a&gt;</tt> tag), the browser launches the external
RealPlayer application.
</p>

<p>In the HTML document, make a link to the metafile that points to the
RealMedia file as follows:<a name="INDEX-2649" /> <a name="INDEX-2650" />
<a name="INDEX-2651" />
</p>

<blockquote><pre class="code">&lt;A HREF="song.ram"&gt;Link to the song&lt;/A&gt;</pre></blockquote>

<p>When linking to RealMedia, the metafile uses the
<em class="filename">.ram</em> suffix. The metafile is a small text-only
file that contains only the URL that points to the RealAudio file
(suffix <em class="filename">.rm</em> or <em class="filename">.ra</em>):
</p>

<blockquote><pre class="code">pnm://<em class="replaceable">domainname.com/song.rm</em></pre></blockquote>

</div>

<a name="wdnut2-CHP-24-SECT-7.3.2" /><div class="sect3">
<h3 class="sect3">24.7.3.2. Embedding RealPlayer on the page</h3>

<p>To place the
<a name="INDEX-2652" />RealPlayer
controls in the web page itself, use the
<tt class="literal">&lt;embed&gt;</tt> tag for Netscape Navigator (Version
4 and earlier) and the standards-compliant
<tt class="literal">&lt;object&gt;</tt> tag for Internet Explorer (all
versions) and Netscape 6. To reach both browsers, you may use a
combination of the two as shown in the following examples. This
method uses the RealPlayer plug-in for playback.
</p>

<p>It should be noted that the audio stops playing when the user leaves
the page. Also, it is more difficult to get consistent cross-browser
performance when the player is embedded. For these reasons, it is
generally preferable to link to the audio and use the external
player.
</p>

<p>The following sample code uses both the
<tt class="literal">&lt;object&gt;</tt> (with parameters) and
<tt class="literal">&lt;embed&gt;</tt> tags to embed the player on the
page. When RealMedia is embedded, the suffix of the metafile should
be <em class="filename">.rpm</em>. This tells the browser to start playing
the media in the browser window.
</p>

<blockquote><pre class="code">&lt;OBJECT ID="oakshoessong" 
   CLASSID="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA" 
   HEIGHT="150" WIDTH="250" BORDER="0"&gt;
&lt;PARAM NAME="SRC" VALUE="realmedia/oakshoes.rpm"&gt;
&lt;PARAM NAME="CONTROLS" VALUE="all"&gt;

   &lt;EMBED SRC="realmedia/oakshoes.rpm" HEIGHT="150" WIDTH="250" 
    AUTOSTART="false" CONTROLS="all" BORDER="0"&gt;

&lt;/OBJECT&gt;</pre></blockquote>

<p>Let's start by looking at the <tt class="literal">&lt;embed&gt;</tt>
tag, which is used by older versions of Netscape. It contains
attributes for pointing to the metafile (<tt class="literal">src</tt>),
specifying the size of the embedded player (<tt class="literal">width</tt>,
<tt class="literal">height</tt>), whether the file starts playing
automatically (<tt class="literal">autostart</tt>), whether it displays
control buttons (<tt class="literal">control</tt>), and a border
(<tt class="literal">border</tt>).
</p>

<p>These same settings are made in the <tt class="literal">&lt;object&gt;</tt>
tag using attributes and additional parameters (indicated by the
<tt class="literal">&lt;param&gt;</tt> tag). It important that the
<tt class="literal">classid</tt> attribute be specified
<em class="emphasis">exactly</em> as it is shown in the example, as it is
the unique identifier of the RealAudio plug-in. This may not be
changed.
</p>

<p>The easiest way to create the HTML code for handling RealAudio is to
use the RealProducer or RealPublisher tool and allow it to do the
work for you. RealNetworks also provides developer information at
<a href="../../../../../../www.realnetworks.com/devzone/">http://www.realnetworks.com/devzone/</a>. The
process for naming and accessing RealAudio has changed several times
over the last few years, so be sure to refer to current documentation
for up-to-date instructions.
</p>

</div>
</div>
<a name="wdnut2-CHP-24-SECT-7.4" /><div class="sect2">
<h3 class="sect2">24.7.4. Adding Windows Media</h3>

<p>Before linking to <a name="INDEX-2653" /> <a name="INDEX-2654" />Windows Media
files (<em class="filename">.asf</em> or <em class="filename">.wma</em>), be
sure they are saved in the <em class="filename">ASFROOT</em> directory on
the NT Server running the Windows Media Administrator.
</p>

<p>To link to a downloadable (nonstreaming) Windows Media Audio file
(<em class="filename">.wma</em>), use a simple link directly to the audio
file:
</p>

<blockquote><pre class="code">&lt;A HREF="song.wma"&gt;Link to the song&lt;/A&gt;</pre></blockquote>

<p>Linking to streaming Windows Media works much like the process
described for RealAudio above. Streaming Windows Media use a
go-between reference file called an "active stream
redirector" file (<em class="filename">.asx</em>), similar to
RealAudio's metafile. The ASX file contains the URL information
that points the player to the actual media file. This method of
providing a single stream to a single user on demand is called
<em class="emphasis">unicasting</em>. In the HTML document,
create a link to the redirector file as shown in this example:
</p>

<blockquote><pre class="code">&lt;A HREF="streamingsong.asx"&gt;Stream the song&lt;/A&gt;</pre></blockquote>

<p>The content of the <em class="filename">.asx</em> file looks like this:</p>

<blockquote><pre class="code">&lt;ASX version="3"&gt;
	&lt;Entry&gt;
		&lt;ref href="path/streamingsong.asf" /&gt;
	&lt;/Entry&gt;
&lt;/ASX&gt;</pre></blockquote>

<p>Change the path in the <tt class="literal">&lt;ref&gt;</tt> tag so that it
points to your Windows Media file. The .<em class="filename">asx</em> file
should be saved in the same directory as the Windows Media file.
</p>

<p>Another method for delivering Windows Media is
<em class="firstterm">multicasting</em>, in which a single media stream
is delivered (at a time determined by the publisher) and multiple
users share the stream. You can multicast prerecorded or live
content. To add a multicast to your site, it is recommended that you
use the tools and wizards provided by the Windows Media Administrator
program. For more information, see the Windows Media Technologies
pageSG <a name="INDEX-2655" />
located<a name="INDEX-2656" />
at <a href="../../../../../../www.microsoft.com/Windows/windowsmedia/en/serve/basics_WM4.asp">http://www.microsoft.com/Windows/windowsmedia/en/serve/basics_WM4.asp</a>.
</p>

</div>


<hr width="684" align="left" />
<div class="navbar"><table cellpadding=3 width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch24_06.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch24_08.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">24.6. Choosing an Audio Format</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">24.8. For Further Reading</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,0,77,93" shape="rect" /><area href="index.htm" coords="81,0,156,93" shape="rect" /><area href="../xhtml/index.htm" coords="161,0,261,102" shape="rect" /><area href="../audio/index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="339,1,433,109" shape="rect" /><area href="../action/index.htm" coords="438,2,540,109" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,694,104" shape="rect" /></map>

</body></html>