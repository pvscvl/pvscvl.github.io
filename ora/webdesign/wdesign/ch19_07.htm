<html><head><title>Transparency (Web Design in a Nutshell, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="style/style1.css" />

<meta name="DC.Creator" content="Jennifer Niederst" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596001967L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Web Design in a Nutshell, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Web Design in a Nutshell" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table cellpadding=3 width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch19_06.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Web Design in a Nutshell, 2nd Edition</a></td><td align="right" valign="top" width="228"><a href="ch19_08.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">19.7. Transparency</h2>

<p><a name="INDEX-2309" />
<a name="INDEX-2310" />
<a name="INDEX-2311" />The
GIF89a format introduced the ability to make portions of graphics
transparent. Whatever is behind the transparent area (most likely the
background color or pattern of the page) will show through. With
transparency, graphics can be shapes other than rectangles (<a href="ch19_07.htm">Figure 19-3</a>)! 
</p>

<a name="wdnut2-CHP-19-FIG-3" /><div class="figure"><img height="173" alt="Figure 19-3" src="figs/WDN2_1903.gif" width="403" /></div><h4 class="objtitle">Figure 19-3. The same GIF image with transparency (left) and without (right)</h4>

<p>In most graphics tools, the transparent area is specified by
selecting a specific pixel color in the image with a special
transparency pointer or eyedropper tool (in Paint Shop Pro, it needs
to be specified numerically). All pixels in the image that match the
selected color will be transparent when they are rendered in a
browser.
</p>

<p>To understand how transparency works, you need to start with the
color table (the table that contains the palette) for the indexed
color image. In transparent GIFs, one position in the color table is
designated as "transparent," and whatever pixel color
fills that position is known as the
<a name="INDEX-2312" /> <a name="INDEX-2313" />Transparency Index Color (usually gray by
default). All pixels in the image that are painted with that color
will be transparent when viewed in a browser.
</p>

<p>Let's look at techniques for working with transparent GIFs.
These techniques use Adobe Photoshop for its layering features. The
first provides strategies for getting rid of "halos" (or
fringe) around transparent graphics. The next gives pointers for
preventing unwanted transparency within your image.
</p>

<a name="wdnut2-CHP-19-SECT-7.1" /><div class="sect2">
<h3 class="sect2">19.7.1. Preventing "Halos"</h3>

<p><a name="INDEX-2314" />Far too often, you see
transparent graphics on the Web with light-colored fringe around the
edges (called a "halo") that doesn't blend into the
background color (see <a href="ch19_07.htm">Figure 19-4</a>).
</p>

<a name="wdnut2-CHP-19-FIG-4" /><div class="figure"><img height="78" alt="Figure 19-4" src="figs/WDN2_1904.gif" width="100" /></div><h4 class="objtitle">Figure 19-4. A "halo" effect created by anti-aliased edges in a transparent graphic</h4>

<p>This effect is the result of <a name="INDEX-2315" />
<a name="INDEX-2316" />
<a name="INDEX-2317" /><em class="firstterm">anti-aliasing</em>,
the slight blur used on curved edges to make smoother transitions
between colors (like the image on the right in <a href="ch19_07.htm">Figure 19-5</a>). Aliased edges, by contrast, are blocky and
stair-stepped (like the image on the left). The images below have
been enlarged to make pixel-level detail more prominent.
</p>

<a name="wdnut2-CHP-19-FIG-5" /><div class="figure"><img height="168" alt="Figure 19-5" src="figs/WDN2_1905.gif" width="318" /></div><h4 class="objtitle">Figure 19-5. Aliasing versus anti-aliasing</h4>

<p>When the color around an anti-aliased edge is made transparent, the
blur along the edge remains intact, and you can see all those shades
of gray between the graphic and the darker background. Halos make
graphics look messy and unprofessional.
</p>

<p>Unfortunately, once an image is saved as a GIF, the only way to fix a
halo is to get in there and erase the anti-aliased edge, pixel by
pixel. Even if you get rid of all the edges, you'll be left
with blocky edges and the quality of the image will suffer.
</p>

<p>However, halos are very easy to prevent. Following are a few
techniques to avoid that unwanted fringe in transparent graphics.
</p>

<a name="wdnut2-CHP-19-SECT-7.1.1" /><div class="sect3">
<h3 class="sect3">19.7.1.1. Use aliased edges</h3>

<p>One way to avoid halos is to keep your image and text edges aliased
(as shown in <a href="ch19_07.htm">Figure 19-6</a>). That way there are no
stray pixels between your image and the background color.
</p>

<a name="wdnut2-CHP-19-FIG-6" /><div class="figure"><img height="86" alt="Figure 19-6" src="figs/WDN2_1906.gif" width="100" /></div><h4 class="objtitle">Figure 19-6. Transparent graphic with aliased edges (no halo effect)</h4>

<p>In Photoshop, the marquee, lasso, and magic wand selection tools all
have the option of turning off anti-aliasing in their respective
Option palettes. You can also choose to turn off anti-aliasing when
creating text.
</p>

<p>The advantages to aliased edges are that they are halo-proof and
require fewer pixel colors (which potentially means smaller file
sizes). The disadvantage is that the blocky edges often just look
bad.
</p>

</div>

<a name="wdnut2-CHP-19-SECT-7.1.2" /><div class="sect3">
<h3 class="sect3">19.7.1.2. Use a matte color tool</h3>

<p>If <a name="INDEX-2318" />you are
using Fireworks, ImageReady, or Photoshop (5.5 and higher), the best
way to prevent a halo is to use the Matte color tool. The tool
requires that you start with a layered file that already contains
transparent areas. In other words, the image must not have already
been "flattened." The parts of the layered image that are
transparent will remain transparent when exported to GIF format.
</p>

<p>In the tool's optimization palette, simply set the Matte color
to the same color as the background of the page on which the GIF will
appear (<a href="ch19_07.htm">Figure 19-7</a>). When the GIF is exported with
Transparency selected, the anti-aliased edges of the image blend with
the selected Matte color. That blend ensures there will be no halo.
</p>

<a name="wdnut2-CHP-19-FIG-7" /><div class="figure"><img height="220" alt="Figure 19-7" src="figs/WDN2_1907.gif" width="332" /></div><h4 class="objtitle">Figure 19-7. The matte color tool (shown in Photoshop 6)</h4>

</div>

<a name="wdnut2-CHP-19-SECT-7.1.3" /><div class="sect3">
<h3 class="sect3">19.7.1.3. Use a colored background layer</h3>

<p>If you are working with Paint Shop Pro or an earlier version of
Photoshop, there is an easy technique for avoiding halos, but it also
requires that you begin with a layered file. If you are starting with
a flattened image, such as from a CD-ROM or scan, you first need to
use a selection tool to cut the image from the background (using an
anti-aliased selection tool) and paste it on a layer of a new file.
</p>

<ol><li>
<p>In your layered file, create a new layer at the bottom of the layer
"stack."
</p>
</li><li>
<p>Fill the whole layer with a color that is the same as, or as close as
possible to, the background color of your web page (<a href="ch19_07.htm">Figure 19-8</a>). If you are using a tiled background pattern,
choose a color that approximates its dominant color value. If you
cannot select the exact color, it is better to guess a little darker.
</p>
</li><li>
<p>When the layers are flattened as a result of converting to Indexed
Color, the anti-aliased text and other soft edges will blend into the
color of the bottom layer. The transition pixels will be the
appropriate color, and they won't stand out when placed against
the background color on your web page.
</p>
</li><li>
<p>Select the background color to be transparent (using the transparency
tool or specifying its RGB values) upon export.
</p>

<a name="wdnut2-CHP-19-FIG-8" /><div class="figure"><img height="221" alt="Figure 19-8" src="figs/WDN2_1908.gif" width="359" /></div><h4 class="objtitle">Figure 19-8. Filling a layer with a color that matches the background color</h4>
</li></ol>
</div>
</div>
<a name="wdnut2-CHP-19-SECT-7.2" /><div class="sect2">
<a name="INDEX-2319" />
<a name="INDEX-2320" />
<a name="INDEX-2321" />
<a name="INDEX-2322" /><h3 class="sect2">19.7.2. Preventing Unwanted Transparent Areas</h3>

<p><a name="INDEX-2323" />In some instances, you'll find
that the color around the edge of your image also appears within the
image. This means that if you use an eyedropper tool to select the
edge color for transparency, parts of your image will disappear as
well.
</p>

<p>The easiest way to prevent this is the handy Matte color feature of a
web graphics application (discussed earlier), because it does not
rely on an eyedropper tool for transparency. Rather, the transparent
areas of the layered file are preserved upon export, and the solid
pixels in the image area are unaffected.
</p>

<p>However, if you are using a tool that does not have a Matte color
feature, such as an early version of Photoshop or PaintShop Pro,
there is a trick for preventing unwanted transparency. For this
example, consider an image that has a white background, but also
white text within the image area. The goal is to turn the white
pixels around the image transparent, but to keep the white text
white.
</p>

<a name="wdnut2-CHP-19-SECT-7.2.1" /><div class="sect3">
<h3 class="sect3">19.7.2.1. Creating a distinct color for transparency</h3>

<p>Follow these steps to create a distinct color for transparency:</p>
<ol><li>
<p>Flatten your image so any anti-aliased edges will merge with your
chosen background color (see <a href="ch19_07.htm">Section 19.7.1.3, "Use a colored background layer"</a>,
earlier in this chapter). If you are starting with an Indexed Color
image, change it to RGB so you can add a color to its palette.
</p>
</li><li>
<p>Using the Magic Wand tool with the tolerance set to 1 and
anti-aliasing turned <em class="emphasis">off</em> (these settings are
important!), select the areas in the image that you'd like to
be transparent. Holding down the Shift key allows you to add to your
selection. (Don't use "Select Similar" or you will
select <em class="emphasis">all</em> the pixels in the image, which is
what you're trying <em class="emphasis">not</em> to do!)
</p>
</li><li>
<p>Using the Fill tool (or doing it by hand), fill your selection with a
distinct color that does not appear anywhere in the image (one of the
obnoxious bright colors usually works well).
</p>
</li><li>
<p>Check the image to be sure that all areas you wish to be transparent
are filled with the obnoxious color (and, of course, that no pixels
in your image have changed).
</p>
</li><li>
<p>Now you can convert the image to Indexed Color, save as GIF format,
and select the distinct color to be transparent as you would
normally.
</p>
</li></ol>
</div>

<a name="wdnut2-CHP-19-SECT-7.2.2" /><div class="sect3">
<h3 class="sect3">19.7.2.2. Changing the distinct color without losing transparency</h3>

<p>The following is an optional addition to the preceding technique. If
for some reason you are unhappy with the new color in your file, or
if you worry that it will be visible if transparency isn't
supported (not likely these days), you can turn the new color back to
its original color value (white in our example) while keeping it
distinct from nontransparent pixels sharing that color (the white in
the text areas).
</p>

<ol><li>
<p>Create a distinct color for the transparency (as described
previously).
</p>
</li><li>
<p>After the image has been converted to Indexed Color, open the Color
Table (Image <img alt="Figure 19.7.2.2" src="figs/U2192.gif" /> Mode <img alt="Figure 19.7.2.2" src="figs/U2192.gif" /> Color Table).
</p>
</li><li>
<p>Find the new, distinct color in the Color Table (if you made it
obnoxious enough, it should be easy to find), and click on it.
</p>
</li><li>
<p>Edit the RGB values in the dialog box to set the color back to the
color it was before (white in our example). By doing this, you are
assigning a color (white) to two positions in the Color Table; one
will be made transparent, and the other will remain visible.
</p>
</li><li>
<p>For some transparent-GIF creation tools, it is important to know the
position of the new white in the Color Table, so you may want to pay
attention to the neighboring colors in the table.
</p>
</li><li>
<p>Once the color is changed, close the dialog boxes and Export to
GIF89a, selecting the background area to be transparent. You'll
know you've selected the correct white because the areas will
be filled with the Transparency Index Color in the<a name="INDEX-2324" /> preview.<a name="INDEX-2325" />
</p>
</li></ol>
</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table cellpadding=3 width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch19_06.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch19_08.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">19.6. Interlacing</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">19.8. Minimizing GIF File Sizes</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,0,77,93" shape="rect" /><area href="index.htm" coords="81,0,156,93" shape="rect" /><area href="../xhtml/index.htm" coords="161,0,261,102" shape="rect" /><area href="../audio/index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="339,1,433,109" shape="rect" /><area href="../action/index.htm" coords="438,2,540,109" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,694,104" shape="rect" /></map>

</body></html>