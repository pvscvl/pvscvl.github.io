<html><head><title>Minimizing JPEG File Size (Web Design in a Nutshell, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="style/style1.css" />

<meta name="DC.Creator" content="Jennifer Niederst" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596001967L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Web Design in a Nutshell, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Web Design in a Nutshell" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table cellpadding=3 width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch20_05.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Web Design in a Nutshell, 2nd Edition</a></td><td align="right" valign="top" width="228"><a href="ch21_01.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">20.6. Minimizing JPEG File Size</h2>

<p><a name="INDEX-2384" /> <a name="INDEX-2385" /> <a name="INDEX-2386" /> <a name="INDEX-2387" />
<a name="INDEX-2388" />As for all files intended
for Web delivery, it is important to optimize JPEGs to make them as
small as possible. Because JPEGs are always 24-bit by nature,
reducing bit-depth is not an option. For the most part, all you have
to play with is the quality setting, but it is possible to prepare an
image prior to compression. There are a number of specialized tools
available for making JPEGs as small as they can be while letting you
make decisions about image quality.
</p>

<a name="wdnut2-CHP-20-SECT-6.1" /><div class="sect2">
<h3 class="sect2">20.6.1. Aggressive Compression Ratios</h3>

<p>The most direct way of optimizing a JPEG is to adjust its Quality
setting. If your image has a lot of continuous tone or gradient
colors, you can be pretty aggressive with the compression level and
not worry too much about loss of quality in the resulting JPEG. Even
at some of the lowest quality settings, the image quality is still
suitable for viewing on web pages. Of course, this depends on the
individual image. A low quality setting (below 40) usually results in
a blocky or blotchy effect in areas of flat color, which may be
unacceptable to you.
</p>

<p>Each tool provides sliders for controlling quality/compression
ratios, although they use different numbering systems. Fireworks uses
a percentage value from 1 to 100%. Paint Shop Pro uses a scale from 1
to 100, but it works as the inverse of the standard scale: lower
numbers correspond to higher image quality and less compression.
</p>

<p>Photoshop uses a scale of 0 to 12 when you select JPEG from the
"Save As" dialog box. When you "Save for Web"
in Photoshop/ImageReady, the quality rating is on a scale from 0 to
100. It should be noted that Photoshop is much less aggressive with
its numbering; 0 on the Photoshop scale corresponds to about 30 on
the standard scale.
</p>

<p>The easiest way to get the balance of compression and image quality
just right is to use a tool that offers a preview of the image (and
its file size) with your settings. Photoshop 5.5+/ImageReady,
Fireworks, and the third party JPEG plug-ins offer previews. If your
image editor does not have a preview function, you may need to do
some testing to find the compression level that works best (save the
file, then preview it in a browser). Be sure to save a copy of the
original image so you can do a fresh JPEG compression with each test.
</p>

</div>
<a name="wdnut2-CHP-20-SECT-6.2" /><div class="sect2">
<h3 class="sect2">20.6.2. "Optimized" JPEGs</h3>

<p>Standard <a name="INDEX-2389" />JPEGs
use a precalculated, general purpose compression table (called the
<a name="INDEX-2390" />Huffman table)
for compressing an image. Some tools offer the ability to create an
"optimized" compression table that is customized for the
particular image. This results in better color fidelity and slightly
smaller file sizes. This format is supported on current browsers, but
some (mostly older) browsers may have trouble displaying optimized
JPEGs.
</p>

<p>The optimization option is presented differently in each tool:</p>

<dl>
<dt><b>Photoshop 5.5 and higher (and ImageReady)</b></dt>
<dd>
<p>Check the "Optimized" checkbox in the Optimize palette.</p>
</dd>

</dl>

<dl>
<dt><b>Photoshop (4.0 and 5.0)</b></dt>
<dd>
<p>Select the "Baseline (Optimized)" option in the JPEG
dialog box.
</p>
</dd>

</dl>

<a name="INDEX-2391" />
<a name="INDEX-2392" />
<dl>
<dt><b>Pro-JPEG (BoxTop Software)</b></dt>
<dd>
<p>Check the "Optimize Huffman Codes" checkbox in the
Pro-JPEG dialog box.
</p>
</dd>

</dl>

<dl>
<dt><b>HVS JPEG (Digital Frontiers)</b></dt>
<dd>
<p>In addition to optimizing Huffman Codes, HVS JPEG utilizes a
different (and unique) method of optimization that, according to
Digital Frontiers, uses a proprietary algorithm to base compression
rates on a spatial frequency analysis of the image.
</p>

<p>These optimization controls are grouped under the
"Q-Table" options in the dialog box.
"General" uses the standard compression table.
"Generate Optimized Q-Table" creates a customized table
for the image.
</p>

<p>In addition to these, HVS JPEG provides two predefined tables for
optimizing certain image types. "Portraits" is best used
on images with smooth tones. "Textured" is for images
where it is important to preserve detail and texture.
</p>
</dd>

</dl>

</div>
<a name="wdnut2-CHP-20-SECT-6.3" /><div class="sect2">
<h3 class="sect2">20.6.3. Softening the Image for Better Compression</h3>

<p>JPEG compression does an admirable job of condensing photographic
images without requiring much extra attention. However, if you are
serious about making your JPEGs as compact as possible, you may want
to maximize JPEG compression's strengths by feeding it the kind
of image it likes -- an image with subtle gradations, fewer
details, and no hard edges. By applying a slight blur to all or part
of the image, you allow the compression scheme to do its work more
efficiently.
</p>

<p>If you are using one of the newer web graphics tools, you will find a
setting with the optimization options that softens the image. In
Photoshop 5.5 and higher, the tool is called "Blur"; in
Fireworks, it's "Smoothing." If you apply a soft
blur, the JPEG compression works better, resulting in a smaller file.
If you don't have these tools, you can soften the whole image
by applying a slight blur to the image with the "Gaussian
Blur" filter (or similar). Compare the file sizes of the
original image (left) and the slightly blurred image (center) in
<a href="ch20_06.htm">Figure 20-2</a>.
</p>

<p>A more sophisticated approach is to apply aggressive blurs to areas
of the image that are not important and leave areas of detail alone.
For instance, if you are working with a portrait, you could apply a
blur to the background while maintaining detail in the face, as shown
in the example on the right in <a href="ch20_06.htm">Figure 20-2</a>.
</p>

<a name="wdnut2-CHP-20-FIG-2" /><div class="figure"><img height="231" alt="Figure 20-2" src="figs/WDN2_2002.gif" width="392" /></div><h4 class="objtitle">Figure 20-2. Blurring all or part of an image results in smaller file sizes</h4>

</div>
<a name="wdnut2-CHP-20-SECT-6.4" /><div class="sect2">
<h3 class="sect2">20.6.4. Using the HVS JPEG Plug-in</h3>

<p>HVS JPEG has some unique features for pushing JPEG compression while
maintaining image quality. The Edge-Preserving Detail Filter (in the
upper-left corner of the dialog box shown in <a href="ch20_06.htm">Figure 20-3</a>) smooths out texture detail while working to
maintain the edges. This results in higher compression with better
overall image quality and without edge artifacts.
</p>

<a name="wdnut2-CHP-20-FIG-3" /><div class="figure"><img height="309" alt="Figure 20-3" src="figs/WDN2_2003.gif" width="380" /></div><h4 class="objtitle">Figure 20-3. HVS JPEG dialog box</h4>

<p>If you have an image that has a lot of detail, position the Detail
slider towards the left. If your image is soft, you can slide the
Detail slider to the right for a more aggressive application of the
prefilter. Note that if either of the edge-preserving sliders is
positioned all the way to the left, no prefilter will be applied.
</p>

<p>Once you've set the Detail slider to match the general quality
of the image, you can experiment with various amounts of blur using
the Strength slider. This is not a scientific
process -- it's a matter of finding the point at which you
are comfortable with the image quality while minimizing the file
size.<a name="INDEX-2393" />
<a name="INDEX-2394" />
</p>

<p>Always apply the prefilters first (that's why they're
called "pre" filters), because the optimization tables
and compression ratios will be based on these settings. After
applying the filters and optimization, you may be able to reduce the
compression Q-setting a bit without noticeable change in image
<a name="INDEX-2395" /> <a name="INDEX-2396" /> <a name="INDEX-2397" /> <a name="INDEX-2398" /> <a name="INDEX-2399" />quality.
</p>

</div>
<a name="wdnut2-CHP-20-SECT-6.5" /><div class="sect2">
<h3 class="sect2">20.6.5. Optimize to File Size in Photoshop 5.5+</h3>

<p>If you <a name="INDEX-2400" />know ahead of time the size
you'd like your JPEG to be, try using the "Optimize to
File Size" feature in Photoshop 5.5 and higher. Optimize to
File Size (accessible via the "Save for Web" dialog box)
allows you to achieve your target file size automatically without
trying out lots of different optimization settings. Photoshop handles
it all for you! The Optimize to File Size function is also discussed
in <a href="ch19_01.htm">Chapter 19, "GIF Format"</a> (see <a href="ch19_08.htm">Figure 19-10</a>).
</p>

</div>
<a name="wdnut2-CHP-20-SECT-6.6" /><div class="sect2">
<h3 class="sect2">20.6.6. Weighted Optimization (Photoshop 6/ImageReady 3)</h3>

<p>Photoshop 6 and ImageReady 3 offer a
"<a name="INDEX-2401" />weighted optimization"
function that lets you smoothly vary the optimization settings across
an image using an alpha channel (also called a mask). This allows you
to let Photoshop know for which areas of the image quality should be
preserved, and where quality may be sacrificed in order to achieve a
smaller file size.
</p>

<p>To save a JPEG with weighted optimization in Photoshop 6, first
select the portion of the image that you want to retain the highest
quality. Save the selection (using the Select menu) and give it a
name. This creates the alpha channel that will be referenced when
optimizing the image.
</p>

<p>From the "Save for Web" dialog box, select the channel
button to the right of the Quality text box (see <a href="ch20_06.htm">Figure 20-4</a>). In the Modify Quality Setting dialog that
appears, select your named channel from the pop-up menu. Use the
sliders to set the minimum (applied to black areas of the mask) and
maximum (applied to white areas of the mask) quality levels. The
results of your settings can be seen in the Optimized Preview.
</p>

<a name="wdnut2-CHP-20-FIG-4" /><div class="figure"><img height="186" alt="Figure 20-4" src="figs/WDN2_2004.gif" width="355" /></div><h4 class="objtitle">Figure 20-4. Weighted optimization for JPEGs using Photoshop 6</h4>

<p>In ImageReady, you can create a new channel based on a selected image
area on the fly when you click on the Channel button.
</p>



</div>


<hr width="684" align="left" />
<div class="navbar"><table cellpadding=3 width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch20_05.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch21_01.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">20.5. Creating JPEGs</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">21. PNG Format</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,0,77,93" shape="rect" /><area href="index.htm" coords="81,0,156,93" shape="rect" /><area href="../xhtml/index.htm" coords="161,0,261,102" shape="rect" /><area href="../audio/index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="339,1,433,109" shape="rect" /><area href="../action/index.htm" coords="438,2,540,109" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,694,104" shape="rect" /></map>

</body></html>