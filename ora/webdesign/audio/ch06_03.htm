<html><head><title>Professional webcasting  (Designing Web Audio)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Josh Beggs and Dylan Thede" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565923537L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Designing Web Audio" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Designing Web Audio" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch06_02.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Designing Web Audio</a></td><td align="right" valign="top" width="228"><a href="ch06_04.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">6.3. Professional webcasting </h2>

<p>While <a name="INDEX-701" />simple HTTP pseudo-streaming is
adequate for small-scale broadcasting purposes, it is not a
professional solution for large-scale broadcasting. If audio is a
mission-critical component of your web site or simply needs to be
100% reliable, use a dedicated RealServer. This section provides a
step-by-step guide on how to prepare and serve professional-quality
RealAudio.
</p>

<p>The first step to <a name="INDEX-702" />professional
RealAudio broadcasting is to capture the highest-quality RealAudio
source material. If you are using RealAudio in a professional
situation, you need to maintain broadcast-quality production
techniques.
</p>

<p>To achieve the best fidelity: </p>

<ul><li>
<p>Start with a high-quality digital audio tape or CD when transferring
audio to your computer.
</p>
</li><li>
<p>Set the input levels into your <a name="INDEX-703" />sound
card as high as possible without distorting.
</p>
</li><li>
<p>Remove all unwanted noises and sound
<a name="INDEX-704" />artifacts
in your original source files with a sound editor.
</p>
</li><li>
<p>Make sure to start with a stereo 44.1 kHz 16-bit audio file when
encoding to lower-bandwidth audio codecs.
</p>
</li></ul>
<p>To create the best quality <a name="INDEX-705" />RealAudio clips:
</p>

<ul><li>
<p>Normalize your sound files to 95% of the maximum dB level. </p>
</li><li>
<p>If your clips do not have enough bass or treble, try boosting the
low-end or high-end frequencies in your sound file before encoding to
a particular codec. For bass, use EQ to increase the
<a name="INDEX-706" />low-end
frequencies in the 100 to 200 Hz range. For treble, boost the
<a name="INDEX-707" />high-end frequencies from 5,000 to
8,000 Hz. Remember, anything higher than 8,000 Hz will get cut when
you compress the file using a low-bandwidth setting. For voice, the
sweet spots to boost are 500 Hz and 3,500 Hz. Boosting the bass
frequencies for voice below 250 Hz may have little effect or may
cause distortion of the voice.
</p>
</li><li>
<p>If you are encoding for low-bandwidth codecs (14.4 and 28.8), use
a<a name="INDEX-708" /> low-pass
equalization filter to cut frequencies above 10,000 Hz. (For a
comprehensive overview on how to capture and edit high-quality audio,
see <a href="ch03_01.htm">Chapter 3, "Capturing Original Source Material"</a> and <a href="ch04_01.htm">Chapter 4, "Optimizing Your Sound Files"</a>.)
</p>
</li><li>
<p>Avoid flat or dull-sounding RealAudio clips by adjusting the
<a name="INDEX-709" />amplitude
of your signal with a sound editor instead of recording directly into
the RealEncoder. Recording into a sound editor maximizes the
available dynamic range.
</p>
</li><li>
<p>Prevent signal clipping by making sure that loud sounds in your
original audio file signal do not exceed the acceptable amplitude
levels. Clipping or "going in the red" can give rise to
<a name="INDEX-710" />
<a name="INDEX-711" />harmonic
distortion in the form of clicks or crackling sounds on playback due
to the introduction of odd harmonics. If your source file contains a
clipped signal, your final RealAudio or RealVideo file will have
high-frequency background noise or static. Lowering the input volume
will help reduce clipping.
</p>
</li><li>
<p>Limit excessive low-frequency noise by eliminating any
<a name="INDEX-712" />DC offset. (DC
offset occurs during the analog to digital conversion process when
the 0-point in the waveform isn't actually at
but offset either above or below.
<a name="INDEX-713" /> <a name="INDEX-714" />AnalogX
(<a href="../../../../../../www.analogx.com/">http://www.analogx.com</a>) offers a
Direct X plug-in that corrects DC offset errors. The AnalogX DC
Offset plug-in is compatible with any Direct X application such as
<a name="INDEX-715" />CoolEdit,
<a name="INDEX-716" />Cakewalk,
<a name="INDEX-717" />WaveLab,
<a name="INDEX-718" />Paris, etc. DC offset is commonly
produced in cheap PC sound cards. Several editing applications have
built-in settings for fixing DC offset.
</p>
</li><li>
<p>Ensure proper grounding in audio equipment to prevent AC 60 Hz line
noise. If <a name="INDEX-719" />AC
line noise is present in your audio files, you can partially remove
it with EQ by lowering the frequency range that contains the noise.
You can also try using special noise reduction software to perform
this task.
</p>

<p>In low-bitrate encoding, every bit of bandwidth is important. Every
bit wasted on noise reduces the number of bits allocated to the
desired content, thus reducing the quality. Noise includes any audio
information other than the desired content such as background noise,
distortion, quantization noise.
</p>
</li></ul>
<a name="sound-CHP-6-SECT-3.1" /><div class="sect2">
<h3 class="sect2">6.3.1. Selecting the right RealAudio codecs</h3>

<p>Once you have captured or imported a high-fidelity sound file into
the RealEncoder, you need to select which codecs to use when
exporting duplicates of the file. Choosing codecs can be a confusing
process. With the release of RealSystem G2, there are six RealPlayers
and dozens of
<a name="INDEX-720" />
<a name="INDEX-721" />RealAudio
codecs in use. Compounding the problem, connection speeds vary
greatly across the Internet.
</p>

<p>Although RealSystem G2 simplifies the encoding process with its
"encode once, stream anywhere" SureStream technology, it
will take a considerable amount of time for the millions of people
still using older players to upgrade to the new G2 player.
</p>

<p>To make sure your audio is available to the widest possible audience,
include several duplicate audio clips encoded at different bitrates.
Generally, three or four codecs -- such as 20 Kbps mono,
<a name="INDEX-722" />56 Kbps ISDN, and
<a name="INDEX-723" />stereo
ISDN -- are adequate. <em class="emphasis">Bandwidth
negotiation</em><a name="INDEX-724" />
is a RealServer feature that automatically detects the bandwidth of a
listener and then streams the appropriate RealAudio clip. To use
bandwidth negotiation, you need to select several RealAudio codecs.
</p>

<p>To determine which
<a name="INDEX-725" />codecs to use, remember that the
cumulative bitrate of all files in your RealMedia presentation should
equal no more than 75% of your target bandwidth. For example, if your
target audience has standard 28.8 Kbps modems, your presentation
bitrate should be 20 Kbps. <a href="ch06_03.htm">Table 6-1</a> shows the optimum streaming rate
for each <a name="INDEX-726" />target connection speed.
</p>

<a name="sound-CHP-6-TABLE-1" /><h4 class="objtitle">Table 6-1. Suggested maximum bitrate for different connection speeds </h4><table border="1">



<tr>
<th>
<p>Target connection speed</p>
</th>
<th>
<p>Suggested maximum bitrate for streaming files</p>
</th>
</tr>


<tr>
<td>
<p>14.4 Kbps</p>
</td>
<td>
<p>10 Kbps</p>
</td>
</tr>
<tr>
<td>
<p>28.8 Kbps</p>
</td>
<td>
<p>20 Kbps</p>
</td>
</tr>
<tr>
<td>
<p>56 Kbps modem</p>
</td>
<td>
<p>34 Kbps</p>
</td>
</tr>
<tr>
<td>
<p>56 Kbps ISDN</p>
</td>
<td>
<p>45 Kbps</p>
</td>
</tr>
<tr>
<td>
<p>112 Kbps ISDN</p>
</td>
<td>
<p>80 Kbps</p>
</td>
</tr>

</table>

<p>When choosing a RealAudio codec, keep in mind that different types of
sound require higher-bandwidth codecs due to their frequency range.
As discussed in <a href="ch02_01.htm">Chapter 2, "The Science of Sound and Digital Audio"</a>, higher-pitched sounds
need a higher <a name="INDEX-727" />sampling rate
to be accurately reproduced. Most popular music recordings have a
frequency range between 60 Hz to 16,000 Hz, whereas speech primarily
resides in the 200 Hz to 5,000 Hz frequency range. Thus, 28.8 Kbps
RealAudio clips can reproduce frequencies only under 4,000 Hz to
5,500 Hz. Accordingly, a 28.8 codec can reproduce speech quite well
but not music.
</p>

<p>You will need a higher bitrate codec for high-quality music
broadcasting than for simple speech. <a href="ch06_03.htm">Table 6-2</a>
shows the low- to medium-bandwidth encoding options and lists which
codecs the various RealPlayers support. Make sure that some of the
codecs you use support older 2.0 player versions.
</p>

<p>The table also lists each
<a name="INDEX-728" />
<a name="INDEX-729" />codec's frequency response.
The higher the frequency response, the better the audio quality.
Notice that the newest G2 codecs produce a much higher frequency
response resulting in greatly improved music playback than older
codecs. To view the full table, go to the RealAudio 5.0 Content
Creation Guide.
</p>

<a name="sound-CHP-6-TABLE-2" /><h4 class="objtitle">Table 6-2. RealAudio's bandwidth codec chart (from low to medium) </h4><table border="1">





<tr>
<th>
<p>Audio Codecs Supported</p>
</th>
<th>
<p>Players Supported</p>
</th>
<th>
<p>Frequency Response</p>
</th>
<th>
<p>Comments on Codecs</p>
</th>
</tr>


<tr>
<td>
<p>5 Kbps Voice</p>
</td>
<td>
<p>G2, 5 </p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
<p>6.5 Kbps Voice</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
<p>8 Kbps Voice</p>
</td>
<td>
<p>G2, 5, 4, 3, 2,</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p>Superceded by 8.5 Kbps Voice Codec</p>
</td>
</tr>
<tr>
<td>
<p>8 Kbps Music</p>
</td>
<td>
<p>G2, 6</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p><a name="INDEX-730" />Generation 2 Codec
</p>
</td>
</tr>
<tr>
<td>
<p>8 Kbps Music</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
<p>8.5 Kbps Voice</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p><a name="INDEX-731" />DolbyNet Codec</p>
</td>
</tr>
<tr>
<td>
<p>11 Kbps Music</p>
</td>
<td>
<p>G2</p>
</td>
<td>
<p>5 kHz</p>
</td>
<td>
<p>Generation 2 Codec</p>
</td>
</tr>
<tr>
<td>
<p>12 Kbps Music</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p>DolbyNet Codec</p>
</td>
</tr>
<tr>
<td>
<p>15.2 Kbps Voice-Mono</p>
</td>
<td>
<p>G2, 5, 4, 3, 2</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p>Superceded by 16 Kbps Voice Codec</p>
</td>
</tr>
<tr>
<td>
<p>16 Kbps Voice-Mono</p>
</td>
<td>
<p>G2, 5</p>
</td>
<td>
<p>8 kHz</p>
</td>
<td>
<p>Highest bitrate Codec for voice</p>
</td>
</tr>
<tr>
<td>
<p>16 Kbps Music-G2 Mono</p>
</td>
<td>
<p>G2</p>
</td>
<td>
<p>8 kHz</p>
</td>
<td>
<p>Generation 2 Codec</p>
</td>
</tr>
<tr>
<td>
<p>16 Kbps Music-G2 Low Resp.</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p>DolbyNet Codec</p>
</td>
</tr>
<tr>
<td>
<p>16 Kbps Music Mono Medium Resp.</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>4.7 kHz</p>
</td>
<td>
<p>Suitable for Pop/Rock music DolbyNet Codec</p>
</td>
</tr>
<tr>
<td>
<p>16 Kbps Music Mono High Resp.</p>
</td>
<td>
<p>G2, 5, 4</p>
</td>
<td>
<p>5.5 kHz</p>
</td>
<td>
<p>Classical Music -- DolbyNet Codec</p>
</td>
</tr>
<tr>
<td>
<p>20 Kbps Music-G2 Mono</p>
</td>
<td>
<p>G2</p>
</td>
<td>
<p>10 kHz</p>
</td>
<td>
<p>Generation 2 Codec</p>
</td>
</tr>
<tr>
<td>
<p>20 Kbps Music Stereo</p>
</td>
<td>
<p>G2, 5, 4, 3</p>
</td>
<td>
<p>4 kHz</p>
</td>
<td>
<p>DolbyNet Codec</p>
</td>
</tr>

</table>

</div>
<a name="sound-CHP-6-SECT-3.2" /><div class="sect2">
<h3 class="sect2">6.3.2. Using the RealEncoder</h3>

<p>There are several methods and tools for <a name="INDEX-732" />converting standard
<a name="INDEX-733" />WAV,
<a name="INDEX-734" />AIFF, or
<a name="INDEX-735" />SND audio source files into the
appropriate RealMedia <a name="INDEX-736" />.<em class="emphasis">ra</em> and
<a name="INDEX-737" />.<em class="emphasis">rm</em> formats.
The cheapest and simplest way to encode files is either to use the
free <a name="INDEX-738" />RealEncoder
available on the RealNetwork's web site or to export your files
from an editing and recording application, such as CoolEdit, that
supports .<em class="emphasis">ra</em> and .<em class="emphasis">rm</em> file
extensions. The better alternative for <em class="emphasis">.ra</em> and
<em class="emphasis">.rm</em> file conversion, if you can afford an extra
few hundred bucks, is to usea batch
conversion application such as<a name="INDEX-739" /> Wave Convert Pro by Waves or
<a name="INDEX-740" />BarbaBatch
by<a name="INDEX-741" /> Audio Ease. See <a href="appa_01.htm">Appendix A, "Creating the Ultimate Web Sound Studio: Buyers Guide and Web Resources"</a> for more information about these
applications. These batch conversion tools feature superior
processing and file optimization capabilities and will make mastering
your source files into high-quality RealAudio clips a much easier
process. Here is a description of the options in the
<a name="INDEX-742" />RealEncoder 5.0:
</p>

<dl>
<dt><b>File Information</b></dt>
<dd>
<p>In the Properties section of the RealEncoder window, you can enter
title, author, and copyright information for your output file. This
information is displayed in the player.
</p>
</dd><dt><b>Mobile Playback</b></dt>
<dd>
<p><a name="INDEX-743" />RealPublisher features a
<a name="INDEX-744" />Mobile Playback option, which enables
users to download your audio clips for playback at a later time or
via an alternative playback device.
</p>
</dd><dt><b>Selective Record</b></dt>
<dd>
<p>To let RealPlayer and RealPlayer Plus users save your RealVideo or
RealAudio clips to disk, click Selective Record before you output the
file. If you frequently use the same codecs or copyright settings,
you can set your default settings in the RealEncoder 3.0 Preferences
window.
</p>
</dd><dt><b>Using Templates</b></dt>
<dd>
<p>RealEncoder and RealPublisher 5.0 come with predefined
<a name="INDEX-745" />templates comprised of various
codecs that enable you to encode your content specifically for your
target audience. You can adjust these templates or define a new one
to optimize the type of audio and video you are encoding. You can
select one or more templates that best suit your needs.
</p>

<p>To create a custom template, select Custom from within the Advanced
window on the RealEncoder 5.0. If one of the predefined templates
does not achieve the effect you are looking for, you can modify the
parameters and save it as a new custom template. Make sure to save
the template as a new file so you do not overwrite the predefined
template.
</p>
</dd>

</dl>
<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Setting the proper timeout values</h4>
<p>Before batch-encoding, make sure to change the default timeout value from 60 seconds to a greater value -- such as 9,000 seconds -- to ensure adequate time for encoding all your files.</p>
</td></tr></table></blockquote>
<a name="sound-CHP-6-SECT-3.2.1" /><div class="sect3">
<h3 class="sect3">6.3.2.1. Encoding RealAudio with a batch processor</h3>

<p>Running files through the
<a name="INDEX-746" />RealAudio encoding algorithm is a
time-consuming process. If you have to process dozens or hundreds of
sound files at a time, a batch processor application can save hours
and days of work. Wave Convert Pro for Mac and PC and BarbaBatch for
Mac are great batch conversion and mastering tools. Wave Convert Pro
and BarbaBatch will import an entire folder of audio files, normalize
them, perform EQ enhancements, and convert them to RealAudio clips on
the fly.
</p>
<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Video capture cards</h4>
<p>Looking for the best video capture card? The Osprey 100 ($199) for Windows NT is the most highly recommended one on the market. In fact, it is the card RealNetworks uses for all their live video capture needs. If you have a reasonably good sound card installed, the audio sync is as good or better than more expensive cards with on-board audio, according to RealNetwork engineers. To capture video from a VHS tape, first capture the footage to an uncompressed AVI file, then compress it in non-real-time. (This takes large amounts of disk space, however.) You can find the Osprey 100 at <a href="../../../../../../www.real.com/products/tools/">http://www.real.com/products/tools/</a>.</p> 
<p>Most video capture cards have a 2 GB AVI file size limitation. Some video card manufacturers purport to have solutions to break this barrier. However, the SGI is the only platform that truly supports 2 GB+ video file formats. RealNetworks has an encoder for the SGI IRIX OS, which in conjunction with the video file format, offers the best solution for long format video clips.</p>
</td></tr></table></blockquote>
<p>Advanced users can use the command-line RealAudio utilities for batch
processing of multiple files. Within the DOS command line, you can
automatically encode several files sequentially by using the
following syntax:
</p>

<a name="INDEX-747" /><blockquote><pre class="code">RVBatch RVEncode.exe <em class="replaceable">options</em>  </pre></blockquote>

<p><a href="ch06_03.htm">Table 6-3</a> lists the command-line batch encoding
options in the <a name="INDEX-748" />Rvencode directory.
</p>

<a name="sound-CHP-6-TABLE-3" /><h4 class="objtitle">Table 6-3. Command-line batch encoding options</h4><table border="1">



<tr>
<th>
<p>Option</p>
</th>
<th>
<p>Description (default in parentheses)</p>
</th>
</tr>


<tr>
<td>
<p><tt class="literal">/I</tt></p>
</td>
<td>
<p>Use this option to specify an Input File.</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/O</tt></p>
</td>
<td>
<p>Use this option to specify an outfile or directory -- Output File
Name or Directory (<em class="emphasis">infile.rm</em> or
<em class="emphasis">dir\YYYYMMDDHHMMSS.rm</em>).
</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/L</tt></p>
</td>
<td>
<p>Use this option to specify Use Live Input.</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/S</tt></p>
</td>
<td>
<p>Use this option to specify
<tt class="literal">server[:port]/file</tt> -- <a name="INDEX-751" />Server
Name, <a name="INDEX-752" />Port, and File (Port 7070).
</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/W</tt></p>
</td>
<td>
<p>Use this option to specify password -- Server Password.</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/D</tt></p>
</td>
<td>
<p>Use this option to specify <em class="emphasis">hhh:mm:ss</em>
 -- Maximum Encoding Duration (continuous).
</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/A</tt></p>
</td>
<td>
<p>Use this option to specify an
<a name="INDEX-753" />Audio
Codec (0).
</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/V</tt></p>
</td>
<td>
<p>Use this option to specify a Video Codec (0).</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/F</tt></p>
</td>
<td>
<p>Use this option to specify a frame rate -- Frame Rate (Optimal).</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/B</tt></p>
</td>
<td>
<p>Use this option to specify total Kbps for clip (100).</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/N</tt></p>
</td>
<td>
<p>Encoding Speed range 1 to 5, where 1 = normal, 5 = fastest (1).</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/M</tt></p>
</td>
<td>
<p>Optimal Framerate Bias, where 1 = sharpest image, 3 = smoothest
motion (2).
</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/Q</tt></p>
</td>
<td>
<p>Use this option to specify Quality, 1 to 100 (100).</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/T</tt></p>
</td>
<td>
<p>Use this option to specify a Clip Title.</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/U</tt></p>
</td>
<td>
<p>Use this option to specify a Clip Author.</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/C</tt></p>
</td>
<td>
<p>Use this option to specify a Clip Copyright.</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/R</tt></p>
</td>
<td>
<p>Use this option to enable <a name="INDEX-754" />Selective
Record. Valid options are
Disabled and 1 Enabled (1).
</p>
</td>
</tr>
<tr>
<td>
<p><tt class="literal">/K</tt></p>
</td>
<td>
<p>Use this option to enable Mobile Playback. Valid options are
Disabled and 1 Enabled (0).
</p>
</td>
</tr>

</table>

<p>Macintosh users can use <a name="INDEX-755" />
<a name="INDEX-756" /> <a name="INDEX-757" />AppleScript to batch-encode audio
files. <a href="ch06_03.htm">Table 6-4</a> describes the encoding parameters
for Macintosh. These can also be obtained by opening the
<em class="emphasis">RVBatch</em> Dictionary installed with the
RealEncoder.
</p>

<a name="sound-CHP-6-TABLE-4" /><h4 class="objtitle">Table 6-4. Macintosh encoding parameters</h4><table border="1">



<tr>
<th>
<p>Parameter</p>
</th>
<th>
<p>Description</p>
</th>
</tr>


<tr>
<td>
<blockquote><pre class="code">encode </pre></blockquote>
</td>
<td>
<p>Use this option to specify an Input File.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">output </pre></blockquote>
</td>
<td>
<p>Use this option to specify an FSSpec or full pathname of the output
file.
</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">audio </pre></blockquote>
</td>
<td>
<p>Enable audio encoding.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">using audio codec </pre></blockquote>
</td>
<td>
<p>Audio codec name.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">video </pre></blockquote>
</td>
<td>
<p>Enable video encoding.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">using video codec </pre></blockquote>
</td>
<td>
<p>Video codec name.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">at frame rate </pre></blockquote>
</td>
<td>
<p>Frame rate.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">optimal bias </pre></blockquote>
</td>
<td>
<p>Determines the behavior of optimized encoding and can be one of the
following options: sharpest image, normal, or smoothest motion.
</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">cropping </pre></blockquote>
</td>
<td>
<p>Sets the cropping rectangle and follows this form: top, left, bottom,
right.
</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">at bitrate </pre></blockquote>
</td>
<td>
<p>Total bitrate.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">at quality </pre></blockquote>
</td>
<td>
<p>Video quality setting (1-100).</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">encoding speed </pre></blockquote>
</td>
<td>
<p>Speed of encoding -- the faster the speed, the less the quality of
the encoding. Can be one of the following options: normal, medium,
fast, faster, or fastest.
</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">title </pre></blockquote>
</td>
<td>
<p>Title string.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">author </pre></blockquote>
</td>
<td>
<p>Author string.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">copyright </pre></blockquote>
</td>
<td>
<p>Copyright string.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">Mobile Playback </pre></blockquote>
</td>
<td>
<p>Enable Mobile Playback.</p>
</td>
</tr>
<tr>
<td>
<blockquote><pre class="code">Selective Record </pre></blockquote>
</td>
<td>
<p>Enable Selective Record.</p>
</td>
</tr>

</table>

<a name="sound-CHP-6-SIDEBAR-8" /><blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Preparing and encoding audio for RealVideo broadcasting</h4>
&nbsp;
<p>Audio quality is the biggest tradeoff when preparing content for
low-bandwidth RealVideo. Because video is so data-heavy, only a small
percentage of the bandwidth can be allocated to audio. For most
RealVideo broadcasts, better picture quality takes priority over
audio quality.
</p>
&nbsp;
<p>At Fox News, RealVideo clips generally contain shots of newscasters
talking. Stationary video footage of "talking heads" are
ideally suited for low-bandwidth RealVideo encoding. If there is
little motion in the video feed, you can set the ratio settings in
favor of video quality while still preserving speech intelligibility.
<a name="INDEX-759" />
</p>
&nbsp;
<p>According to David Dadekian, technical director for
<a name="INDEX-760" />Fox News, the
RealVideo 20 Kbps stream allocates 6.5 Kbps to audio and 13.5 Kbps to
video. The 50 Kbps Fox News stream allocates 8.5 Kbps to audio and
41.5 Kbps for the six frames per second video. Devoting a higher
ratio of bandwidth to video preserves picture quality. Raising the
audio portion of the audio-to-video data ratio degrades the
respectable 176-by-144 pixel video quality.
</p>
&nbsp;
<p>For some content, increasing the ratio of video bandwidth will not
help picture quality. High-motion video, such as sports footage with
rapid action or music videos with dancing, are not suited for
low-bandwidth codecs. For instance, video clips of regular season NBA
basketball highlights encoded with the same settings used for Fox
News footage resulted in indistinguishable blurry pictures. Reducing
the frame rate of the basketball reel produced a higher-quality
picture.
</p>
&nbsp;
<p>The best approach for encoding sporting events is to create a slide
show with the video set to one image per second and the rest of the
bandwidth allocated to audio. You do not get true video action, but
at least you get high quality stills.
</p>
&nbsp;
<p>Encoding video content with music requires a higher ratio of
bandwidth dedicated to audio. Music content is generally unacceptable
at the audio rates of 6.5 Kbps and 8.5 Kbps used by Fox News. When
David encodes RealVideo clips with music content for TV Guide
Entertainment Network, he sets the audio at a minimum of 15 Kbps. For
a 50 Kbps stream, he sets the audio at 32 Kbps and the video at 18
Kbps. Setting the bandwidth ratio at 32 Kbps/audio and 18 Kbps/video
produces an engaging slideshow of one image per second with good
music quality.
</p>
</td></tr></table></blockquote>

<p>Once you have encoded your source material using the appropriate
RealAudio codecs, you are ready to stream your RealMedia files
<a name="INDEX-761" />with
the RealServer.
</p>

</div>
</div>
<a name="sound-CHP-6-SECT-3.3" /><div class="sect2">
<h3 class="sect2">6.3.3. Broadcasting audio with the RealServer</h3>

<p>To broadcast audio with the
<a name="INDEX-762" />RealServer, you can either install your
own RealServer or contract with an outside service provider to host
your RealMedia content.
</p>

<p>If audio is a small component of your web site, you probably want to
consider installing a 25-stream <a name="INDEX-763" />Basic RealServer available for free
at the RealNetworks web site. If you need more streams or advanced
features, you will need to consider one of RealNetwork's
commercial server options, which range from $695 to $30,000,
depending on the range of simultaneous streams you need and extra
features you want, such as <a name="INDEX-764" />live
broadcasting,
<a name="INDEX-765" />RealFlash
broadcasting, and commerce functionality. Visit RealNetworks'
Servers and Solutions page at <a href="../../../../../../www.real.com/solutions/servers/index.html">http://www.real.com/solutions/servers/index.html</a>.
</p>

<p>If audio is an integral part of your web site and you broadcast to a
large audience of more than 1,000 simultaneous listeners, consider
using a third-party hosting service that guarantees superior
reliability, fault tolerance, load balancing, and a number of
simultaneous streams. For example, the RealNetworks Broadcast Network
can support up to 50,000 simultaneous unicast streams. You can find a
list of RealMedia-qualified ISPs at <a href="../../../../../../www.real.com/solutions/partners/isp/index.html">http://www.real.com/solutions/partners/isp/index.html</a>.
</p>

<a name="sound-CHP-6-SECT-3.3.1" /><div class="sect3">
<h3 class="sect3">6.3.3.1. RealServer installation</h3>

<p>Installing and configuring a <a name="INDEX-766" />
<a name="INDEX-767" />RealAudio
Server is a four-step process that entails:
</p>

<ol><li>
<p>Downloading the appropriate platform-specific server package from
RealNetworks
</p>
</li><li>
<p>Running the automatic installation process</p>
</li><li>
<p>Launching the server </p>
</li><li>
<p>Testing the server to ensure audio playback</p>
</li></ol>
<p>One of the strong points of the RealSystem is easy automatic
installation for a variety of popular platforms including Unix, NT,
Windows 98/2000, and Macintosh. Once you have purchased and
downloaded the appropriate RealServer package, run the automatic
installer application to configure the settings for your platform.
The RealServer installer asks a series of simple questions regarding
personal information, directory names, and default port setting
options, then automatically installs itself on your system with the
appropriate settings.
</p>

<p>To install the RealServer on a
<a name="INDEX-768" />
<a name="INDEX-769" />Unix machine, create a separate
directory to hold all of your RealAudio clips before launching the
application. Do not place the RealServer under the root directory;
instead create a separate directory with its own user ID to prevent
access to your machine (Unix). Once you have placed the RealServer
and all of its corresponding files into a separate directory, launch
the server from the command line.
</p>

<p>Make sure to type in a command in the boot script so that your
machine will launch the RealServer whenever the computer is
re-booted.
</p>

<p>Finally, make sure you test your RealServer by connecting a web
browser via HTTP to the
<a name="INDEX-770" /> <a name="INDEX-771" />RealAudio port 7070 (<em class="emphasis">http://yourservername:7070</em>). This port has a
link to pre-installed stock audio samples for testing, so you
don't have to encode your own test file. The RealServer
diagnostic test detects that you are making an HTTP request rather
than a standard RealAudio request and generates system reports on the
fly. If you hear the audio playing back, you should be ready to
stream RealAudio.
</p>

</div>

<a name="sound-CHP-6-SECT-3.3.2" /><div class="sect3">
<h3 class="sect3">6.3.3.2. RealServer system requirements</h3>

<p>To run your own
<a name="INDEX-772" />RealServer, you need the following
items. (For more detailed information, refer to the RealAudio Server
documentation located at the RealNetwork's Developer Zone.)
</p>

<ul><li>
<p>A computer running one of the supported operating systems:
<a name="INDEX-773" />Macintosh System 8 or greater,
<a name="INDEX-774" />Digital
Unix v3.2, <a name="INDEX-775" />Microsoft
Windows NT 4.0,
<a name="INDEX-776" />Solaris 2.5,
<a name="INDEX-777" />Linux
2.03, <a name="INDEX-778" />Sun OS
4.1.x, Silicon Graphics
<a name="INDEX-779" />IRIX
6.2 and 6.3.
</p>
</li>

<li>
<p>Space on the computer's hard disk for the RealServer software
and RealAudio clips. You need upwards of 1 GB or more of hard disk
space if you are serving high-bandwidth streams with bandwidth
negotiation. One 6- to 10-minute audio file encoded with a range of
high- and low-bandwidth codecs for bandwidth negotiation requires 15
MB to 20 MB of disk space. If you have disk space constraints, stick
with low-bandwidth codecs.
</p>
</li>

<li>
<p>A <a name="INDEX-780" />network connection with sufficient
bandwidth to serve your users. For each listener connected to the
Internet backbone, the RealServer requires at least 10 Kbps for 14.4
format and 20 Kbps for 28.8 format. A T3 line, for example, could
stream 4,500 simultaneous streams. See <a href="ch06_03.htm">Table 6-5</a>
for the number of approximate streams for each bandwidth connection.
</p>

<a name="sound-CHP-6-TABLE-5" /><h4 class="objtitle">Table 6-5. Number of streams at different connection speeds </h4><table border="1">




<tr>
<th>
<p>Network connection</p>
</th>
<th>
<p>Number of 14.4 Kbps streams</p>
</th>
<th>
<p>Number of 28.8 Kbps streams</p>
</th>
</tr>


<tr>
<td>
<p>ISDN (128 Kbps)</p>
</td>
<td>
<p>12</p>
</td>
<td>
<p>8</p>
</td>
</tr>
<tr>
<td>
<p>T1 (1.5 Mbps)</p>
</td>
<td>
<p>150</p>
</td>
<td>
<p>90</p>
</td>
</tr>
<tr>
<td>
<p>T3 (45 Mbps)</p>
</td>
<td>
<p>4,500</p>
</td>
<td>
<p>2,700</p>
</td>
</tr>

</table>
</li>

<li>
<p>A web server that supports configurable <a name="INDEX-781" />
<a name="INDEX-782" />MIME types. RealServer works with
the following web servers:
</p>

<blockquote class="simplelist">

<p>Website for Windows NT</p>

<p>Apache 1.1.1 and higher</p>

<p>Mac HTTP</p>

<p>HTTPD4Mac</p>

<p><a name="INDEX-783" />Netscape Netsite and Netscape Enterprise Server</p>

<p><a name="INDEX-784" />
<a name="INDEX-785" />Microsoft Internet Information Server (IIS)</p>

<p>NCSA HTTPD (v 1.3, 1.4, 1.5)</p>

<p>CERN HTTPD (v3.0)</p>

<p>EMWAC HTTPS 0.96</p>

<p>Spinner 1.0b12-1.0b15 / Roxen 1.0</p>

<p>Webstar and Webstar PS</p>

</blockquote>
</li>

<li>
<p>Sufficient processor and memory capacity. <a name="INDEX-786" />
<a name="INDEX-787" />RAM, not processor speed, is the
gating factor for the computer running RealServer. A 90 MHz Pentium
processor, with enough available bandwidth, can simultaneously
deliver at least 500 28.8 streams. For example, Real Audio Server 3.0
requires 20 KB RAM for each simultaneous stream. A stream of 60
simultaneous audio files requires approximately 4 MB of available
RAM. 1,000 streams requires 70 MB of RAM, and so on.
</p>
</li></ul>
</div>

<a name="sound-CHP-6-SECT-3.3.3" /><div class="sect3">
<h3 class="sect3">6.3.3.3. Using bandwidth negotiation</h3>

<p>Once you have installed the RealServer or found an ISP running one,
use
<a name="INDEX-788" />
<a name="INDEX-789" />bandwidth negotiation to manage
the delivery of RealAudio content. Bandwidth negotiation checks the
listeners' modem speed settings then sends the appropriate
stream for their bandwidth. If you encode three or four versions of
your audio clip, you can reach a wider audience by offering
low-bandwidth users a smaller compressed RealAudio clip and
high-bandwidth users a CD-quality clip. Note that when bandwidth
negotiation checks the connection setting of the client player, the
player reports the speed at which it has been set, not the speed of
the actual network connection.
</p>

<p>In most cases, bandwidth negotiation works fine. On occasion,
however, the RealServer overestimates a RealPlayer's
"real" connection speed. Many web developers run into
problems because the default setting of the RealPlayer is 28.8. This
setting may not be optimized for the user's available
bandwidth. Frequently, RealPlayer bandwidth preferences are set too
high for the actual available data throughput. If a user clicks on a
link to a RealMedia clip that streams at too high a data rate for the
user's real connection speed, a somewhat cryptic error message
will appear indicating that the network connection or CPU speed is
insufficient to view the content.
</p>
<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Selecting the right TCP/IP port</h4>
<p>If the RealServer is configured on the same machine and IP address as the web server, the web server's TCP port must be changed. The RealServer uses the standard TCP Port 80 for its "cloaking," so the web server has to be relocated to Port 81 or any other available TCP port. A single machine also could have two IP addresses with the web server bound to the first IP address and the RealServer bound to the second.</p>
</td></tr></table></blockquote> 
<p><a name="INDEX-790" />RealSystem
G2's SureStream technology promises to alleviate this problem.
The RealPlayer G2 "switches down" to a lower bandwidth
without rebuffering the clip when a user's Internet connection
degrades or when the user's bandwidth was misjudged.
RealEncoder G2 with SureStream generates one master file that
includes several different bandwidth settings. In the future, as
older players get upgraded, the G2 Encoder will make it easier to
reliably stream RealAudio content.
</p>

<p>If you are using RealServer 5.0, include a separate file for 28.8
Kbps modems, 56 Kbps modems, and ISDN connections along with one or
two files for older players. For example, if you want to encode an
important tradeshow presentation so people with 14.4, 28.8, and 56
Kbps modems can listen, encode the live audio to three different
files or capture the audio to a <em class="filename">.wav</em> first and
then encode it three times.
</p>

<p>To stream a presentation using bandwidth negotiation, follow these
steps:
</p>

<ol><li>
<p>Encode your audio content into at least three separate files: </p>

<ul><li>
<p>14.4: Encode one file at 5 Kbps, 6.5 Kbps or 8.5 Kbps </p>
</li><li>
<p>28.8: Encode a higher-bitrate file with a maximum of 20 Kbps </p>
</li><li>
<p>56: Encode a final audio clip with a 40+ Kbps stereo or mono codec</p>
</li></ul>
</li>

<li>
<p>Create a generic directory (not a file) in the
<a name="INDEX-791" />RealServer Content directory:
<em class="filename">C:\real\server\content\tradeshow.ra.</em>
</p>
</li><li>
<p>Place the files generated in step 1 into that directory. For example:</p>

<blockquote class="simplelist">

<p><em class="filename">C:\real\server\content\tradeshow.ra\tradeshow_14.ra</em></p>

<p><em class="filename">C:\real\server\content\tradeshow.ra\tradeshow_28.ra</em></p>

<p><em class="filename">C:\real\server\content\tradeshow.ra\tradeshow_56.ra</em></p>

</blockquote>
</li>
<li>
<p>Change the filenames to the following (as listed in the Content
Creation Guide):
</p>

<blockquote class="simplelist">

<p><em class="filename">C:\real\server\content\tradeshow.ra\pnrv.18 </em></p>

<p><em class="filename">C:\real\server\content\tradeshow.ra\pnrv.36 </em></p>

<p><em class="filename">C:\real\server\content\tradeshow.ra\pnrv.43</em></p>

</blockquote>
</li>
<li>
<p>On your web page, reference the files as
<em class="filename">pnm://yourservername/tradeshow.ra.</em>
</p>
</li></ol>
<p>Be sure to add RealAudio 2.0 codecs for people using 2.0 players. Use
RealEncoder 3.0 to create RealPlayer 2.0 compatible codecs. Remember,
you will have to manually name the files generated by the RealEncoder
3.0 and place them in the proper folder.
</p>

<p>The RealSystem is a versatile tool that does much more than bandwidth
negotiation. Let's take a look at some of the other <a name="INDEX-792" />advanced
RealSystem features <a name="INDEX-793" /> <a name="INDEX-794" />and encoding techniques.
</p>

</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch06_02.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch06_04.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">6.2. Streaming RealAudio from a web server </td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">6.4. Advanced RealAudio applications</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,1,78,93" shape="rect" /><area href="../wdesign/index.htm" coords="80,2,155,96" shape="rect" /><area href="../xhtml/index.htm" coords="158,0,263,97" shape="rect" /><area href="index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="338,1,434,93" shape="rect" /><area href="../action/index.htm" coords="439,0,540,102" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,685,102" shape="rect" /></map>

</body></html>