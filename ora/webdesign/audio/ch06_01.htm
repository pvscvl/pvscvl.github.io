<html><head><title>Encoding, Serving, and Streaming Sound with RealAudio (Designing Web Audio)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Josh Beggs and Dylan Thede" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565923537L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Designing Web Audio" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Designing Web Audio" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_04.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Designing Web Audio</a></td><td align="right" valign="top" width="228"><a href="ch06_02.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />



<h1 class="chapter">Chapter 6. Encoding, Serving, and Streaming Sound with RealAudio</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4><p>
<a href="ch06_01.htm">The RealMedia System</a><br />
<a href="ch06_02.htm">Streaming RealAudio from a web server </a><br />
<a href="ch06_03.htm">Professional webcasting </a><br />
<a href="ch06_04.htm">Advanced RealAudio applications</a><br />
<a href="ch06_05.htm">Live broadcasting with RealAudio</a><br />
<a href="ch06_06.htm">Case study: N2K streams live M&ouml;tley Cr&uuml;e concert</a><br />
<a href="ch06_07.htm">Summary</a><br /></p></div>

<p>RealAudio is the premier platform for streaming audio and video on the Web. While MP3 and QuickTime may have higher quality audio and video compression, neither provides RealAudio's advanced server functionality, reliability, and administrative tools -- features that are needed to carry out large-scale professional broadcasting. <a name="INDEX-624" />RealAudio not only provides a streaming media delivery format and media player, but its server technology optimizes audio playback over multiple modem connection speeds.
</p>
<p>The <a name="INDEX-625" />RealMedia
System works behind the scenes to deliver the best quality audio
stream to both high- and low-bandwidth users. Interactive short-form
audio formats such as Flash, Shockwave, and Beatnik are tailored for
sound effects and loops and do not offer features for managing and
controlling streams over various connection rates. Flash and Beatnik
are also more likely to cause audio drop-outs and error messages when
streaming long-form audio files.
</p>

<p>Professional developers opt for RealAudio for a number of reasons,
including:
</p>

<ul><li>
<p>RealAudio provides the most reliable cross-platform server system for
broadcasting audio and video to large audiences.
</p>
</li><li>
<p>The <a name="INDEX-626" />RealEncoder
(renamed
<a name="INDEX-627" />RealProducer in
the G2 version) offers tools that make encoding an effortless task.
</p>
</li><li>
<p>RealAudio has the largest install base of viewers and listeners, with
QuickTime a close second.
</p>
</li></ul>
<p>In this chapter, we introduce you to the basic components of the
RealMedia System and then show you how to encode and stream RealAudio
content. We also explore advanced real-world case studies to show you
how the technology is used in professional applications.
</p>

<div class="sect1"><a name="sound-CHP-6-SECT-1" />
<h2 class="sect1">6.1. The RealMedia System</h2>

<p>The <a name="INDEX-628" /> <a name="INDEX-629" />RealMedia System is comprised of three core
components: RealEncoder, RealServer, and RealPlayer. In addition,
RealNetworks provides a suite of RealMedia tools and utilities. This
chapter focuses primarily on RealMedia 5.0 components and features. A
large portion of your listening audience may not have the G2 plug-in
yet. Thus, for many developers, RealAudio 5.0 is still the preferred
format. <a href="ch06_01.htm">Figure 6-1</a> illustrates the process of
RealMedia creation and delivery including the interaction between
server-side and client-side components.
</p>

<a name="sound-CHP-6-FIG-1" /><div class="figure"><img height="395" alt="Figure 6-1" src="figs/aud.0601.gif" width="402" /></div><h4 class="objtitle">Figure 6-1. An overview of the RealSystem 5.0</h4>
<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">RealAudio listening guides</h4>
<p>To hear RealAudio broadcasts on the Web, check out the thousands of listings on <a href="../../../../../../www.Broadcast.com/">http://www.Broadcast.com</a> or RealNetwork's RealGuide at <a href="../../../../../../www.real.com/realguide/index.html">http://www.real.com/realguide/index.html</a>. The Broadcast.com and RealGuide web sites offer some of the largest directories of RealAudio programming on the Net. Both sites feature business, news, sports, music, politics, and entertainment content. To list your site or event on RealGuide, click on the Add Your Site/Event link at the bottom of the RealGuide home page. Fill out the event questionnaire and enter the URL for your RealAudio content, and a RealGuide reviewer will verify your URL and list your programming in the appropriate category.</p>
</td></tr></table></blockquote> 
<p>In brief, when a listener clicks on a web page that contains a
RealAudio link, the web server does not stream the audio file but
instead prompts the web browser to start up the RealPlayer
application. RealPlayer then requests the audio file from RealServer.
RealServer in turn streams media content generated from RealEncoder
and RealPublisher. Finally, RealServer keeps track of media usage via
the Java performance monitor, log file records, and authentication
software. <a href="ch06_01.htm">Figure 6-1</a> also helps to distinguish the
process of RealMedia delivery with a dedicated RealServer as opposed
to streaming audio from a standard web server.
</p>

<a name="sound-CHP-6-SIDEBAR-2" /><blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">The RealAudio generation gap</h4>
&nbsp;
<p>This chapter documents basic
<a name="INDEX-630" />RealAudio
operations, as found in RealAudio 5.0, the last version of
<a name="INDEX-631" />RealNetworks
original streaming media platform. RealAudio 5.0 is still widely used
for ensuring backwards compatibility with older RealPlayers. Most of
the information in this chapter is still relevant to later versions.
<a name="INDEX-632" />RealMedia
version 6.0 and later represent RealNetworks second generation
streaming media platform (G2) with enhanced encoding and playback
performance and powerful new multimedia capabilities including
support for SMIL. These multimedia features are covered in the next
chapter.
</p>
&nbsp;
<p>RealMedia 7.0 features better server performance and integration of
server-side advertisement management features that let RealNetworks
customers stream and track their rich media advertising. RealMedia
8.0 represents a major quality breakthrough including the following:
</p>
&nbsp;
<ul><li>
<p>Significantly enhanced video quality (VHS quality at 300 to 500
kilobyte throughput)
</p>
</li></ul>
<ul><li>
<p>Server support for streaming QuickTime files from a RealServer</p>
</li></ul>
<ul><li>
<p>Remote license management (for system administrators) that lets
companies split one license across several machines/servers
</p>
</li></ul>
<ul><li>
<p>MP3 streaming directly from the RealServer without using third-party
plug-ins
</p>
</li></ul></td></tr></table></blockquote>

<a name="sound-CHP-6-SECT-1.1" /><div class="sect2">
<h3 class="sect2">6.1.1. RealEncoder and RealPublisher</h3>

<p><a name="INDEX-633" />
<a name="INDEX-634" />RealNetworks offers
two applications for encoding audio and video:
<a name="INDEX-635" />RealEncoder and
<a name="INDEX-636" />RealPublisher.
The free
<a name="INDEX-637" />RealEncoder, shown in <a href="ch06_01.htm">Figure 6-2</a>, enables you to encode audio or video files or
a live input signal from an audio or video device into one or more
<a name="INDEX-638" />RealMedia
codecs. The RealPublisher offers the basic features of the free
encoder plus advanced features such as wizards for creating HTML and
built-in FTP support. The RealPublisher is especially useful for
creating web pages that contain an embedded RealPlayer. The
RealEncoder and RealPublisher both feature<a name="INDEX-639" /> <em class="emphasis">static encoding</em>
(for Macintosh and Windows) for pre-existing audio or
video files and <a name="INDEX-640" /><em class="emphasis">live encoding</em> for
broadcasting live events.
</p>

<a name="sound-CHP-6-FIG-2" /><div class="figure"><img height="309" alt="Figure 6-2" src="figs/aud.0602.gif" width="400" /></div><h4 class="objtitle">Figure 6-2. The RealEncoder 5.0 lets you encode audio or video files or a live input signal.</h4>

<p>With the release of RealSystem G2, the RealEncoder and RealPublisher
content creation tools have been renamed the
<a name="INDEX-641" />RealProducer.
The current version of RealAudio uses RealNetwork's new G2
compression technology. G2's new codecs offer tremendous
improvement in sound quality over the RealAudio 1.0 and 2.0, which
had been inferior to Shockwave's MPEG-based compression
algorithms and Liquid Audio's <a name="INDEX-642" />Dolby compression technology.
</p>

</div>
<a name="sound-CHP-6-SECT-1.2" /><div class="sect2">
<h3 class="sect2">6.1.2. RealServer</h3>

<p><a name="INDEX-643" /><a name="INDEX-644" />
<a name="INDEX-645" />RealServer
works in conjunction with a standard web server to stream encoded
audio and multimedia content over the Internet. RealServer is the key
component that separates RealAudio from other formats that primarily
rely upon HTTP or TCP streaming from a web server. A dedicated
RealAudio server offers greater reliability than a standard web
server and features more sophisticated streaming capabilities, such
as robust UDP and RTSP transmission,
<a name="INDEX-646" />bandwidth
negotiation, <a name="INDEX-647" />live splitting, <a name="INDEX-648" />IP multicasting, and
<a name="INDEX-649" />clustering.
RealServer also allows for more control over the stream, such as the
ability to seek forward without waiting for the content to download.
Additionally, data is sent across the network in a more consistent,
regulated rate as compared to a web server's tendency to
deliver data in bursts. The RealSystem also provides detailed usage
logs and tracking analysis of hits and playback
errors -- essential tools for system administrators and web
developers.
</p>

</div>
<a name="sound-CHP-6-SECT-1.3" /><div class="sect2">
<h3 class="sect2">6.1.3. RealPlayer</h3>

<p>The last piece of the puzzle is
<a name="INDEX-650" />
<a name="INDEX-651" />RealPlayer -- the
player or "decoder" (shown in <a href="ch06_01.htm">Figure 6-3</a>) that receives the incoming audio signal. The
RealPlayer decodes incoming audio packets that have been compressed
with the RealEncoder. The RealPlayer is free and features random
access controls such as scroll, stop, start, and pause. The
RealPlayer Plus lets you set custom presets or channels that point to
your favorite RealAudio broadcasting sites and record RealAudio clips
to your desktop. The G2 <a name="INDEX-652" />RealPlayer Plus includes a graphic
equalizer video brightness, contrast, and tint controls (see <a href="ch07_01.htm">Chapter 7, "Designing Multimedia Presentations with SMIL and RealSystem G2"</a> for more information about RealSystem G2).
</p>

<a name="sound-CHP-6-FIG-3" /><div class="figure"><img height="173" alt="Figure 6-3" src="figs/aud.0603.gif" width="291" /></div><h4 class="objtitle">Figure 6-3. RealPlayer 5.0 decodes incoming audio packets that are compressed with the RealEncoder.</h4>

<a name="sound-CHP-6-SIDEBAR-3" /><blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">RealAudio web resources</h4>
&nbsp;
<p>Visit the <a name="INDEX-653" />RealNetworks Developer Zone web site at
<a href="../../../../../../www.real.com/devzone/index.html">http://www.real.com/devzone/index.html</a>. The
Devzone's documentation library allows you to access hundreds
of pages of online manuals and content creation guides. You will also
find an impressive amount of free information including an extensive
index of downloadable PDF
<a name="INDEX-654" />RealMedia guides, side-by-side
comparisons of the latest codecs, software developer kits, and an
open forum with answers provided by RealAudio technical experts.
</p>
&nbsp;
<p>The <a name="INDEX-655" />RealAudio forum is an especially useful
resource for finding solutions to a broad range of common problems.
You can also read through past issues of the bi-weekly
"digested" RealAudio forum to look for previously posted
workarounds and solutions. You can even look through a searchable
archive built by the media experts at <a name="INDEX-656" />Stanford University's
MedNET site (<a href="../../../../../../mednet.stanford.edu/realforum.html">http://mednet.stanford.edu/realforum.html</a>)
that contains all the previously posted RealAudio forums.
</p>
&nbsp;
<p>RealNetworks also provides a comprehensive content creation and
authoring products site (<a href="../../../../../../www.real.com/products/index.html,src=eml,hardware,productsmain">http://www.real.com/products/index.html?src=eml,hardware,productsmain</a>)
with more than 20 free and commercial media products for Macintosh,
Windows, and Unix from RealNetworks and other industry-leading
companies.
</p>
</td></tr></table></blockquote>

</div>
<a name="sound-CHP-6-SECT-1.4" /><div class="sect2">
<h3 class="sect2">6.1.4. RealAudio utilities </h3>

<p><a name="INDEX-657" />RealNetworks
provides several RealMedia tools and utilities for editing and
synchronizing
<a name="INDEX-658" />RealMedia files, such as
<a name="INDEX-659" />RMEdit and
<a name="INDEX-660" />RMMerge.
These tools come pre-installed with the
<a name="INDEX-661" />RealEncoder.
</p>

<p>RealMedia tools allow you to alter file information such as title,
author, and copyright information, and features such as selective
record and mobile playback. The selective record feature allows
listeners to save RealAudio clips to disk, whereas
<a name="INDEX-662" />mobile
playback allows listeners to save audio clips for playback over an
alternative listening device. The RealMedia tools also enable you to
listen to the contents of a RealAudio file and perform simple editing
to an <em class="emphasis">.rm</em> <a name="INDEX-663" />file, such as pasting multiple clips
into one clip or shortening the length of a clip. For more
information about specific utilities and tools, visit
RealNetwork's Devzone.
</p>

</div>
<a name="sound-CHP-6-SECT-1.5" /><div class="sect2">
<h3 class="sect2">6.1.5. RealAudio 5.0 file types and metafiles</h3>

<p>The <a name="INDEX-664" />RealSystem 5.0 uses several
file types, each identified by <a name="INDEX-665" />a specific file extension:
</p>

<dl>
<dt><b>RealMedia Clip (<em class="emphasis">.rm</em>)</b></dt>
<dd>
<p>RealMedia Clips are audio or video encoded to RealAudio and RealVideo
formats. The <em class="emphasis">.rm</em> files can contain multiple
streams, including audio, video, image maps, and events. Note that
previous versions of the RealAudio System used the
<em class="emphasis">.ra</em> extension for RealAudio clips.
</p>
</dd><dt><b>RealMedia metafile (<em class="emphasis">.ram</em>)</b></dt>
<dd>
<p>The
<a name="INDEX-666" />
<a name="INDEX-667" />metafile located
on your web server connects a web page to your RealAudio, RealVideo,
or RealFlash clips. The metafile contains the URL of one or more
clips located on the RealServer. This file launches the external
player, which then requests the RealMedia (<em class="emphasis">.rm</em>)
file referenced in the metafile.
</p>
</dd><dt><b>RealPlayer Plug-in metafile (<em class="emphasis">.rpm</em>)</b></dt>
<dd>
<p>The <a name="INDEX-668" /> <a name="INDEX-669" />RealPlayer metafile is similar to the
RealMedia metafile but it is used with the RealPlayer Plug-in when
the player is embedded directly in a web page. Note that this
metafile will not launch the external player.
</p>
</dd>

</dl>

</div>
<a name="sound-CHP-6-SECT-1.6" /><div class="sect2">
<h3 class="sect2">6.1.6. RealAudio delivery</h3>

<p><a href="ch06_01.htm">Figure 6-4</a> illustrates how
<a name="INDEX-670" />a RealMedia clip is delivered to a
listener. The numbers in <a href="ch06_01.htm">Figure 6-4</a> correspond to
the sequence of events that lead to the final delivery of a
<a name="INDEX-671" />RealMedia
clip:
</p>

<ol><li>
<p>The browser displays a web page containing a link to a RealAudio
metafile.
</p>
</li><li>
<p>The user clicks on the link. The browser requests the metafile from
the web server.
</p>
</li><li>
<p>The web server delivers the RealAudio metafile to the browser. For
files with a <em class="emphasis">.ram</em> file extension, the web server
sets the MIME type of the file to
<em class="emphasis">audio/x-pn-realaudio</em><a name="INDEX-672" />. For
files with a <em class="emphasis">.rpm</em> file extension (RealPlayer
Plug-in), the web server sets the MIME type of the file to
<em class="emphasis">audio/x-pn-realaudio-plugin</em>.
</p>
</li><li>
<p>The browser looks up the MIME type of the RealAudio metafile. Based
on the MIME type, the browser starts RealAudio Player as a helper
application and passes it to the metafile.
</p>
</li><li>
<p>RealAudio Player reads the first URL from the metafile and requests
it from RealAudio Server.
</p>
</li><li>
<p>RealAudio Server begins streaming the requested RealAudio clip to
RealAudio Player.
</p>

<a name="sound-CHP-6-FIG-4" /><div class="figure"><img height="339" alt="Figure 6-4" src="figs/aud.0604.gif" width="402" /></div><h4 class="objtitle">Figure 6-4. Many steps are involved from your first click to the final delivery of the audio stream.</h4>
</li></ol>
</div>
</div>














<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_04.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch06_02.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">5.4. Summary</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">6.2. Streaming RealAudio from a web server </td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,1,78,93" shape="rect" /><area href="../wdesign/index.htm" coords="80,2,155,96" shape="rect" /><area href="../xhtml/index.htm" coords="158,0,263,97" shape="rect" /><area href="index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="338,1,434,93" shape="rect" /><area href="../action/index.htm" coords="439,0,540,102" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,685,102" shape="rect" /></map>

</body></html>