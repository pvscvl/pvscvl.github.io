<html><head><title>Beatnik authoring system (Designing Web Audio)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Josh Beggs and Dylan Thede" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565923537L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Designing Web Audio" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Designing Web Audio" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch11_01.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Designing Web Audio</a></td><td align="right" valign="top" width="228"><a href="ch11_03.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">11.2. Beatnik authoring system</h2>

<p>The Beatnik authoring system includes three elements: the
<a name="INDEX-1423" />Beatnik Player, the
<a name="INDEX-1424" />Beatnik Audio Engine, and the
<a name="INDEX-1425" />Beatnik Editor. All three work in
conjunction to mix and play back music and sound effects that are
composed of a hybrid of MIDI-based instrument sounds and
web-optimized digitized audio samples.
</p>

<p>MIDI forms the core of the
<a name="INDEX-1426" /> <a name="INDEX-1427" />Beatnik System. Beatnik uses MIDI-like
messages to control the Beatnik playback sound engine. Other
authoring systems such as Flash must compile and upload
MP3-compressed sound files for playback in a browser. In addition to
compressed MP3 audio files,
<a name="INDEX-1428" />Beatnik compiles and uploads text-based
MIDI instructions that trigger the pre-loaded bank of Beatnik MIDI
instrument sounds to play back your musical score or composition.
Once these standard instruments are downloaded with the Beatnik
Player and housed on a user's hard drive, little data needs to
be sent over the Internet -- just tiny instructions (compressed
MIDI files) that instruct the Beaknik Player's tone
generator/sequencer to play music. Later in this chapter, we will
discuss the Beatnik Player's components in more detail.
</p>

<p>Even though it relies on MIDI, the Beatnik System should not be
confused with basic MIDI music on the Web. When a MIDI file is
downloaded, it plays back using the General MIDI instrument bank
pre-installed on most browsers and computer systems. General MIDI is
a standard established by music equipment manufacturers that
specifies that a given instrument bank number always represents a
certain type of instrument sound, such as a horn or a drum. However,
manufacturers are free to determine the synthesis algorithm used to
create any given sound in their instrument bank. This leads to two
problems: every instrument bank can have a different type of horn or
drum sound, and there is no way to alter or customize the sounds in
the instrument bank.
</p>
<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Beatnik versus MIDI QuickTime Musical Instruments</h4>
<p>So what are the advantages of Beatnik over MIDI data using QuickTime Musical Instruments? There are two. The first difference is that the Beatnik System is tied to a robust web audio authoring environment that facilitates interactive audio programming using JavaScript commands. The second is that the Beatnik System allows users to add their own sound files and customized sound design via a user-definable bank of instruments. </p>
</td></tr></table></blockquote>
<p>In addition to the General MIDI instrument bank, Beatnik allows you
to customize and enrich its palette of high-quality, pre-installed
sounds with your own digital audio samples. Once your custom audio
samples and MIDI files are imported into the Beatnik Editor, the
editor compresses everything into the proprietary Beatnik format for
embedding into your web pages. The result is a General MIDI sound
engine combined with a customizable digital audio sampler.
</p>

<p><em class="emphasis">Mixman remixers</em> are another compelling use of
<a name="INDEX-1429" />Beatnik technology. By clicking on
different buttons, users can remix popular songs, such as
"Maria" by Blondie and email their mixes to friends. The
<a name="INDEX-1430" />Mixman remixers itself is a multichannel
<em class="filename">.rmf</em> composition and is typically only 250 KB in
size. Smaller still is the emailed remix data, which is simply the
instructions dictating which channels to play or mute. The
<em class="filename">.rmf</em> file is not actually emailed, but instead
is served from a central location. An example of a Mixman remixer is
shown in <a href="ch11_02.htm">Figure 11-2</a>.
</p>

<p>Beatnik sound banks also provide <em class="emphasis">Groovoids,</em> a
set of musical snippets or compositions.
<a name="INDEX-1431" />
<a name="INDEX-1432" />Groovoids
are premade miniature MIDI compositions or sound effects used for
quickly and easily creating loops, button sounds, and transition
effects. Later in this chapter, we will walk through the steps
involved in creating Beatnik files and publishing them to a web page.
</p>

<a name="sound-CHP-11-FIG-2" /><div class="figure"><img height="282" alt="Figure 11-2" src="figs/aud.1102.gif" width="400" /></div><h4 class="objtitle">Figure 11-2. By clicking on different buttons, users can remix popular songs, such as "Maria" by Blondie, and email their new "mix" to friends.</h4>

<a name="sound-CHP-11-SECT-2.1" /><div class="sect2">
<h3 class="sect2">11.2.1. Beatnik Player</h3>

<p>At the heart of the Beatnik System is the <a name="INDEX-1433" />Beatnik Player, a browser plug-in that
users must install. It's free, and it's a fairly small
download (about 550 KB). Beatnik is working to have it included with
other browsers, including Navigator and Internet Explorer.
</p>

<p>The plug-in player allows the user's browser to play
<em class="filename">.rmf</em> files (Beatnik's Rich Music File
format). The Player also contains a software-based tone generator
with two banks of 128 instruments each and a third bank for
customized audio samples. The first of these banks comprises a
standardized library of Beatnik instruments that map to the General
MIDI specification. The second bank is a library of special Beatnik
instruments. There is also a library of General MIDI percussion
instruments and a library of special percussion instruments, which
are assigned to MIDI channel 10 (the General MIDI drum channel). The
third bank is empty and is used for receiving and storing any
customized instruments contained within a given
<em class="filename">.rmf</em> file. This user-definable bank of
instruments allows sound designers to create custom instruments based
on their own digital audio samples (or edited versions of the
standard Beatnik library).
</p>

<p>Although most designers will opt to keep the Beatnik player invisible
to the end user, there are visible modes as well, which can be useful
to provide end-user control. The visible Beatnik player features
standard play, stop, and pause buttons, and more. You can toggle
between the "meter" and "oscilloscope" visual
modes by simply clicking on the lower part of the Control Player
window. See Figures <a href="ch11_02.htm">Figure 11-3</a> and <a href="ch11_02.htm">Figure 11-4</a>.
</p>

<a name="sound-CHP-11-FIG-3" /><div class="figure"><img height="80" alt="Figure 11-3" src="figs/aud.1103.gif" width="175" /></div><h4 class="objtitle">Figure 11-3. The Beatnik Player Control Panel's Meter mode displays
flashing meters that show which of Beatnik's 32 voices are active.</h4>
<a name="sound-CHP-11-FIG-4" /><div class="figure"><img height="81" alt="Figure 11-4" src="figs/aud.1104.gif" width="175" /></div><h4 class="objtitle">Figure 11-4. Clicking on the lower part of the Beatnik Player's Control
Panel displays the oscilloscope mode, which monitors Beatnik's
total audio output.</h4>

<p>These two different modes provide alternate visual representations of
a sound's playback. The meter mode displays a visual
representation of the active channels producing sound. The
oscilloscope mode displays a line that changes according to the
different frequencies being played back.
</p>

<p>Clicking and holding (Macintosh) or right-clicking (Windows) the
mouse button brings up a series of commands that allows the user to
perform other actions, such as pause or stop, display song, and show
copyright info and <a name="INDEX-1434" />other relevant media information.
</p>

</div>
<a name="sound-CHP-11-SECT-2.2" /><div class="sect2">
<h3 class="sect2">11.2.2. Beatnik Audio Engine</h3>

<p>In addition to beinga software-based tone
generator, the
<a name="INDEX-1435" />Beatnik Audio Engine is a software
audio mixer capable of mixing 64 discrete musical tracks in real time
and playing back a mixed bag of file formats and sample rates. It is
part of the core technology inside the Beatnik Player. The
mixer's functions are controlled by JavaScript, so it is with
<a name="INDEX-1436" />JavaScript that you
manipulate how the Beatnik Audio Engine responds when a user action
occurs, such as rolling over an image or clicking on a link. While
you will need to know some JavaScript, the mixer's ability to
be controlled via JavaScript is key to the integration of the audio
mixer's functionality with a predominant language used in web
development. This helps facilitate and differentiate the Beatnik
platform and makes the mixer useful and powerful to a web audio
developer.
</p>

<p>A basic understanding of JavaScript also lets you use Beatnik's
<a name="INDEX-1437" />ActionSets, which are available for
Macromedia
<a name="INDEX-1438" />Dreamweaver and
<a name="INDEX-1439" />Adobe GoLive.
ActionSets allows you to automate much of the Java- Script coding
process. Beatnik also provides an integrated online tool called the
Methodizer that automatically generates JavaScript code for the most
common types of functions and user actions. You can then simply cut
and paste the text code examples into your HTML pages. You can grab
the <a name="INDEX-1440" />Methodizer at
Beatnik's web site, <a href="../../../../../../www.beatnik.com/">http://www.beatnik.com</a>.
</p>

</div>
<a name="sound-CHP-11-SECT-2.3" /><div class="sect2">
<h3 class="sect2">11.2.3. Beatnik Editor</h3>

<p>The <a name="INDEX-1441" />Beatnik Editor is the tool used for
creating<a name="INDEX-1442" /> <em class="filename">.rmf</em> files.
Unlike full-featured MIDI sequencers with multitrack editing and
recording capabilities, the Beatnik Editor is primarily a content
integration tool for combining MIDI scores with custom digital audio
samples. The editor lets you import MIDI files from your favorite
MIDI sequencing program and map the various MIDI tracks to the
desired Beatnik instruments. The Beatnik Editor also allows you to
input your own sampled recordings, such as a three-second vocal line
or a guitar riff, and map it to the MIDI note ranges of your
choosing. The editor accomplishes this by creating a third bank of
sounds that resides in the <em class="emphasis">.rmf</em> file itself and
is served to the user's browser along with the
<em class="filename">.rmf</em> file. The process is similar to working
with a MIDI keyboard sampler to create custom patches. The Beatnik
Editor audio samples can be musical instrument sounds, sound effects,
or even short vocal samples.
</p>

<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">The Beatnik web site</h4>
<p>You can download the plug-in, the editor, and further documentation at the Beatnik web site, <a href="../../../../../../www.beatnik.com/beatnik/">http://www.beatnik.com/beatnik/</a>. The web site also contains Beatnik Production Music featuring over 120,000 .rmf sound effects and compositions developed by Beatnik and a host of other big name production music partners. These readymade <em class="filename">.rmf</em> files may be licensed for commercial use on the Web. The Beatnik web site also houses tutorials for Flash, Dreamweaver, Director, and other authoring tools.
</p>
</td></tr></table></blockquote>

<p>It is important to note, however, that unlike the standard Beatnik
instruments that reside on the user's computer (in the first
two banks of the Beatnik Player), these custom instrument samples
must be downloaded with the <em class="filename">.rmf</em> file over the
Internet. So if you are using custom sounds, you will want to
compress your audio samples using the Beatnik Editor's MP3
compression. The Beatnik Editor even allows you to mix and match
variable encoding rates, sample rates, and bit depth, all in the same
<em class="filename">.rmf</em> file. This allows you to
"crunch" the file size of some sounds while allowing more
fidelity (and file size) to more delicate sonic textures.
</p>

<p>With these three elements of the Beatnik System, you can create
customized, complex, responsive musical interaction with the
graphical elements of your web site. You also can achieve extremely
small file sizes if you are careful to crunch down your custom
instrument sounds. And you have the tools to control all aspects of a
sound's quality. Now let's get into the specific process
of authoring with Beatnik tools.
</p>

<p>First, we will discuss the basic skills you need to create Beatnik
soundtracks, and then walk you through the step-by-step process of
"sonifying" a web page, as Beatnik calls it. We will also
introduce some basic concepts of "sonification,"
including the <a name="INDEX-1443" />Music Object (Beatnik's API or
library of JavaScript methods.)
</p>

<a name="sound-CHP-11-SIDEBAR-3" /><blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Local serving</h4>
&nbsp;
<p>It's also possible to source the Music Object from your own
server. Here's how:
</p>
&nbsp;
<ol><li>
<p>Go to <a href="../../../../../../www.beatnik.com/to/,music-object">http://www.beatnik.com/to/?music-object</a>.
</p>
</li>
<li>
<p>Click on the Windows icon to download a zipped copy of the
<em class="filename">music-object.js</em> file, or click on the Mac icon
to download a stuffed copy of the
<em class="filename">music-object.js</em> file.
</p>
</li>
<li>
<p>Delete the piece of code you used before to source the Music Object
and add this code just below the <tt class="literal">&lt;BODY&gt;</tt> tag
in your HTML page:
</p>
&nbsp;
<blockquote><pre class="code">&lt;SCRIPT SRC="music-object.js"&gt;&lt;/SCRIPT&gt;</pre></blockquote>
</li></ol>
<p>That's it. You're now serving the Music Object yourself.
(You will need to add this code below the
<tt class="literal">&lt;BODY&gt;</tt> tag of <em class="emphasis">every</em>
page you want to sonify.) A significant benefit to serving the Music
Object this way is if the Beatnik Music Object server should go down,
your site will still be sonified.
</p>
</td></tr></table></blockquote>

</div>
<a name="sound-CHP-11-SECT-2.4" /><div class="sect2">
<h3 class="sect2">11.2.4. Authoring with Beatnik</h3>

<p>To sonify <a name="INDEX-1444" /> <a name="INDEX-1445" />a web site with
<a name="INDEX-1446" />Beatnik sound, you need some basic
experience in two areas:
</p>

<dl>
<dt><b>Basic sound conversion </b></dt>
<dd>
<p>Once you have sonified an HTML page with the standard sounds inside
the Beatnik Player, you will be ready to add custom sounds to your
site. This can be easily achieved by simply saving the sounds to
standard <em class="filename">.wav</em> or <em class="filename">.aiff</em>
files, and then importing them into the Beatnik Editor and exporting
them as <em class="filename">.rmf</em> files.
</p>
</dd><dt><b>Basic JavaScript skills</b></dt>
<dd>
<p>Interactive sound and music is made possible by a set of commands or
<a name="INDEX-1447" />JavaScript
methods on the pages you want to sonify. To begin sonifying, you
don't need any sound or music software or custom sampled
sounds; you can do it all with JavaScript by using the Beatnik Music
Object and the sound bank that comes installed with the Beatnik
Player.
</p>
</dd>

</dl>
<blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Remember your semicolons</h4>
<p>You need to end most JavaScript commands with a semicolon, and "Music" must be capitalized.</p>
</td></tr></table></blockquote>
</div>
<a name="sound-CHP-11-SECT-2.5" /><div class="sect2">
<h3 class="sect2">11.2.5. Introduction to the Music Object</h3>

<p>The <a name="INDEX-1448" /> <a name="INDEX-1449" />Music Object is a class library written
in JavaScript that lets you write your own JavaScript statements to
control the Beatnik Player. It has two main functions:
</p>

<ol><li>
<p>It hides the differences between the various browsers and platforms
your audience may use to view your web site.
</p>
</li><li>
<p>It allows access to a set of methods and properties that you can use
to make your pages come alive with sound.
</p>
</li></ol>
<p>More technically:</p>

<ol><li>
<p>The Music Object wraps the Beatnik Player so that it works
consistently with Netscape's LiveConnect API and with Microsoft
Internet Explorer's ActiveX API, and it writes both
<tt class="literal">EMBED</tt> and <tt class="literal">OBJECT</tt> tags for you.
</p>
</li><li>
<p>The Music Object is also the Beatnik Player's JavaScript
command set (or API). The Beatnik Player file sits on the
user's computer, and the Music Object sits on a web server and
is included with your sonified web pages. Interactive sound control
is enabled when the two come together in a browser.
</p>
</li></ol>
<p>To begin authoring with the Music Object, follow these steps:</p>

<ol><li>
<p>Source the Music Object into your HTML page.</p>

<p>"Sourcing" a JavaScript file is the same idea as
"including" a source file in other languages like C++ or
C. While the script code resides in an external file, it's
treated as though its contents actually appeared in the parent file.
</p>

<p>Simply copy this bit of code just below the
<tt class="literal">&lt;BODY&gt;</tt> tag in your HTML page:
</p>

<blockquote><pre class="code">&lt;SCRIPT SRC="http://sonify.beatnik.com/music-object.js"&gt;&lt;/SCRIPT&gt;</pre></blockquote>

<p>This code will retrieve the Music Object from Beatnik's servers
whenever someone visits your site.
</p>
</li><li>
<p>Create a Music Object instance.</p>

<p>After sourcing in the Music Object, you need to instantiate a new
Object of type <tt class="literal">Music</tt> before you can use it. This
is your first Beatnik operation that requires actual JavaScript
programming. To execute this operation, first open a new script tag
and designate the language you will be working with:
</p>

<blockquote><pre class="code">&lt;SCRIPT LANGUAGE="JavaScript"&gt;</pre></blockquote>
</li>
<li>
<p>Provide a name for the new instance, then use the JavaScript keyword
<tt class="literal">new</tt>, and the name of the object class
<tt class="literal">Music</tt>. For example:
</p>

<blockquote><pre class="code">theNameYouWantToUse = new Music (); </pre></blockquote>
</li>
<li>
<p>Embed an RMF file into the <tt class="literal">Music</tt> object using the
<tt class="literal">preloadEmbed</tt> method, like this:
</p>

<blockquote><pre class="code">theNameYouWantToUse.preloadEmbed ('yourRMFfile.rmf'); </pre></blockquote>

<p>Then end the script tag: </p>

<blockquote><pre class="code">&lt;/SCRIPT&gt; </pre></blockquote>
</li>
<li>
<p>Set up the RMF file to play back when the user interacts with the
page. This can be as easy as calling:
</p>

<blockquote><pre class="code">&lt;A HREF="JavaScript://" onMouseOver="theNameYouWantToUse.play();"&gt;
your gif, link, or page element here&lt;/a&gt;</pre></blockquote>
</li>
<li>
<p>Preview your file. Save your file and preview it in your browser.</p>
</li></ol>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch11_01.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch11_03.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">11. Designing Audio Web Sites with Beatnik</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">11.3. Sonification tutorial</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,1,78,93" shape="rect" /><area href="../wdesign/index.htm" coords="80,2,155,96" shape="rect" /><area href="../xhtml/index.htm" coords="158,0,263,97" shape="rect" /><area href="index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="338,1,434,93" shape="rect" /><area href="../action/index.htm" coords="439,0,540,102" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,685,102" shape="rect" /></map>

</body></html>