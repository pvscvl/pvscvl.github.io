<html><head><title>Case study: N2K streams live M&ouml;tley Cr&uuml;e concert (Designing Web Audio)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Josh Beggs and Dylan Thede" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565923537L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Designing Web Audio" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="Designing Web Audio" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch06_05.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm">Designing Web Audio</a></td><td align="right" valign="top" width="228"><a href="ch06_07.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>
<hr width="684" align="left" />


<h2 class="sect1">6.6. Case study: N2K streams live M&ouml;tley Cr&uuml;e concert</h2>

<p>Now that you are familiar with some of the challenges of live
broadcasting, let's take a look at how <a name="INDEX-892" />N2K Entertainment, now part of
<a name="INDEX-893" />CDNow, used the
RealAudio System to broadcast a <a name="INDEX-894" /> <a name="INDEX-895" />
<a name="INDEX-896" /> <a name="INDEX-897" />M&ouml;tley Cr&uuml;e concert
at the Roseland in New York.
</p>

<p>As manager of Online Technologies for N2K Entertainment, Tim Nielson
is responsible for managing N2K's RealAudio live concert
cybercasts and 24-hour RealAudio broadcasts of WBGO's Jazz
Central Station in New Jersey and WQXR's Classical Insights in
New York City. N2K Entertainment produces the popular
<a name="INDEX-898" />Music Boulevard (see <a href="ch06_06.htm">Figure 6-11</a>) and <a name="INDEX-899" />Rocktropolis web sites and was one of the
first companies to pioneer live webcasting and online music sales
over the Internet.
</p>

<a name="sound-CHP-6-FIG-11" /><div class="figure"><img height="307" alt="Figure 6-11" src="figs/aud.0611.gif" width="400" /></div><h4 class="objtitle">Figure 6-11. The N2K home page at <a href="../../../../../../www.cdnow.com/">http://www.cdnow.com</a> </h4>

<a name="sound-CHP-6-SECT-6.1" /><div class="sect2">
<h3 class="sect2">6.6.1. Capturing high-quality live sound</h3>

<p>The greatest challenge in broadcasting <a name="INDEX-900" />live events is supplying the
RealEncoder with a high-quality source signal. Capturing a good audio
feed is a difficult task, since the two easiest methods for recording
live audio -- getting a signal direct from the concert PA mixer or
setting up a pair of microphones -- have serious tradeoffs.
</p>

<p>Recording a direct stereo signal from a monitor mixing board is
problematic since every concert venue requires special equalization
to prevent distortion and to custom-tailor the sound for the
acoustics of the concert hall. This means that you will often get a
mix that sounds great when it's played back in a particular
concert hall but sounds terrible when played back anywhere else.
</p>

<p>The other option, using a pair of microphones to capture a live event
such as M&ouml;tley Cr&uuml;e's show at the Roseland in New
York, has other inherent problems. Sensitive stereo condenser
microphones are not suited for events with loud crowd noises.
</p>

<p>At events where there is excessive <a name="INDEX-901" />crowd noises, N2K prefers to capture the
audio signal directly from the <a name="INDEX-902" />house-mixing console. For events with
little or no crowd noises, such as a <a name="INDEX-903" />classical
music concert, <a name="INDEX-904" />theater performance, or
<a name="INDEX-905" />speech, N2K uses two overhead
condenser microphones.
</p>

<p>On the night of the M&ouml;tley Cr&uuml;e concert, N2K was fortunate
enough to have the best of both worlds -- a clean, noise-free
audio signal with optimum equalization settings. N2K captured the
sound from a separate audio feed instead of using microphones or the
house-mixing console.
</p>

<p>By chance, another production company was on location to mix the
M&ouml;tley Cr&uuml;e concert for radio syndication. N2K was able to
feed the live mix from the remote digital mixing studio parked
outside the club through an 80-foot long XLR cable with a stereo mini
jack converter connecting to a <a name="INDEX-906" />SoundBlaster Pro sound card running
into the RealAudio Live Encoder.
</p>

</div>
<a name="sound-CHP-6-SECT-6.2" /><div class="sect2">
<h3 class="sect2">6.6.2. Capturing live audio with the RealEncoder</h3>

<p>From the SoundBlaster card, N2K routed the audio signal through two
custom rack-mountable 200 MHz computers running Windows 95 into the
Live Encoder. To get the maximum performance and reliability out of
N2K's Live Encoders, Tim Nielson uses the cleanest machines
with all other applications and extensions de-installed, except for
the Live Encoder and the Operating System. Note that after using the
SoundBlaster Pro, Tim Nielson recommends using a better sound card
such as <a name="INDEX-907" />
<a name="INDEX-908" />Digidesigns by
<a name="INDEX-909" />AudioMedia
III for better analog to digital conversion. Other developers report
very little difference between the $20 audio boards and the $500
boards, as long as there is a clean input signal and proper
grounding. While a less-expensive sound card may not be as noticeable
with low-bandwidth encoded audio files, higher-bandwidth files will
reveal the inferior signal-to-noise ratios inherent in poor-quality
sound cards.
</p>

<p>Make sure to watch the Volume Controls from the option menu to ensure
that you have the optimum input levels set. While you encode
RealAudio, you can monitor the audio input level to be sure you are
encoding the optimal dynamic range. Green indicates a normal reading.
Red warns that you are close to overloading the input. According to
RealNetworks, the level meters in the RealEncoder are not accurate
and are merely for gross amplitude level information. For best
results, allow for plenty of headroom by staying in the yellow bar
section of the input meters. The best sound quality will occur when
the top bar is lit often but the clipping indicator never goes off,
according to Tim Nielson.
</p>

<p>After routing the audio signal to the two rack-mount computers, Tim
Nielson set the correct format settings for the encoders, checked the
Encoder preferences, and made sure he had a good connection to the
RealServer. Taking advantage of RealAudio's bandwidth
negotiation feature, he configured one Live Encoder to produce a 28.8
full response <em class="filename">concert.ra</em> file and the other Live
Encoder to produce a 56K/ISDN stereo <em class="filename">concert.ra</em>
file. Note that bandwidth negotiation works only if the files have
the same name and are placed in the same directory.
</p>

<p>Just as in a regular RealAudio broadcast of prerecorded audio
material, you can configure the RealServer to deliver live streams
encoded with different algorithms. By connecting multiple computers,
each one running a Live Encoder configured to a different bandwidth
format -- such as RealAudio 2.0 at 14.4 and RealAudio 3.0 at
28.8 -- to one RealServer, you can deliver the format that targets
your audience's bandwidth capabilities.
</p>

</div>
<a name="sound-CHP-6-SECT-6.3" /><div class="sect2">
<h3 class="sect2">6.6.3. Archiving live broadcasts</h3>

<p>The RealAudio system makes it extremely easy to record and archive
<a name="INDEX-910" />live
streams. This is a useful feature if you plan to make your live
recordings available to users at a later time.
</p>

<p>The
<a name="INDEX-911" />RealServer
can be configured to archive material in several ways: it can save a
complete file of the event, make a new file based on elapsed time
(such as every hour), or make a new file based on file size (such as
every 5 MB). The RealServer automatically archives live audio streams
that arrive at the server if the LiveFileTarget and LiveFilePassword
settings are specified in the server's configuration file.
</p>

<p>The encoder supports streaming to a disk as well as to a server,
providing a local copy of the content. If capture is performed by the
RealServer and there are any network drop-outs between the encoder
and the server, the Server stores the errors. Capturing to disk at
the encoder removes the network uncertainty from the equation.
</p>

<p>If you need to archive particular hours of a 24-hour live broadcast,
you can use a product called VCR 2.0 from Lariat Software, which can
be found at <a href="../../../../../../www.lariat.com/">http://www.lariat.com</a>.
</p>

</div>
<a name="sound-CHP-6-SECT-6.4" /><div class="sect2">
<h3 class="sect2">6.6.4. Using the time-out preferences to avoid crashes</h3>

<p>After specifying the proper format options, Tim Nielson makes sure to
change the default <a name="INDEX-912" />Time-Out Preference setting in the Live
Encoder Preferences window. The Time-Out Preference displays an error
message warning you that your audio content is no longer being
streamed and that the connection between the encoder and server has
been broken. Once a broken connection has been detected, the Live
Encoder starts feeding the signal into a buffer until the connection
is established again.
</p>

<p>The Time-Out Preference determines how long the Encoder fills its
buffer before displaying the error message. Tim Nielson recommends
setting the Time-Out Preference to 600 seconds to allow enough time
for the Encoder and Server to reconnect. If the specified time for
the Time-Out Preference passes or the buffer fills up before the
connection is repaired, the error message appears, requiring shutdown
and restarting the Live Encoder. N2K generally specifies a large
time-out value of 600 seconds to avoid shutdowns in the middle of the
night when the staff is not around to restart the encoding machine.
If N2K is streaming a live event where a technician is always at hand
watching the machine, it is best to set a lower time value.
</p>

<p>Once Tim Nielson specifies the appropriate Time-Out Preference, he
routes the signal from the encoders at the Roseland in New York to
N2K's RealServer in Wayne, Pennsylvania. The ideal option, even
though it was not used during the M&ouml;tley Cr&uuml;e concert, Tim
Nielson explained, would have been to have a direct ISDN connection
between the Live Encoders in New York and the RealServer in Wayne,
Pennsylvania. A direct ISDN connection guarantees enough direct
bandwidth between the encoder and server with the least amount of
packet loss or hops from one IP point to the next. RealNetworks
recommends a connection from the encoders to the servers that is
twice as large as the aggregate bandwidth of the encoded streams. For
example, for 20 Kbps and 45 Kbps streams, RealNetworks recommends a
network connection no less than 130 Kbps. This allows for the
variability in their encoding as well as network errors and protocol
overhead.
</p>

</div>
<a name="sound-CHP-6-SECT-6.5" /><div class="sect2">
<h3 class="sect2">6.6.5. Splitting a live broadcast for more efficient streaming</h3>

<p>If you purchase an additional server license<a name="INDEX-913" /> from
RealNetworks, you can use live splitting to "split" the
live audio stream from one RealServer to several other RealServers
placed at different strategic points across the globe. <a href="ch06_06.htm">Figure 6-12</a> illustrates how this works. By allowing users
to connect to the closest RealServer, you ensure better quality and
performance. For meeting the high demand of a large worldwide
broadcast, combining splitting with clustering is highly recommended.
Clustering lets you operate several computers as one RealServer. With
a computer running RealServer and operating both as a cluster control
server and a splitter, you can supply a large number of connections
to a single live audio stream coming from the broadcast site.
</p>

<p>For the M&ouml;tley Cr&uuml;e concert, N2K split the concert feed
from their master server in Pennsylvania to RealServers in New York,
Palo Alto, and Vancouver. For security purposes, N2K does not stream
files to the general public from their master server. The RealAudio
master server in Pennsylvania is primarily used for splitting the
audio stream to other RealServers placed in strategic locations.
N2K's RealServer runs on an SGI system running IRIX.
</p>

<a name="sound-CHP-6-FIG-12" /><div class="figure"><img height="381" alt="Figure 6-12" src="figs/aud.0612.gif" width="402" /></div><h4 class="objtitle">Figure 6-12. Multicasting and splitting allow you to broadcast to a greater number of RealPlayers from one licensed RealServer by using the exponential power of multiple servers. This figure shows how 5 streams can quickly turn into 15 streams, with no extra load on the original server, by broadcasting a stream to another server (RA Splitter), which splits and sends the signal to more RealPlayers.</h4>

<a name="sound-CHP-6-SECT-6.5.1" /><div class="sect3">
<h3 class="sect3">6.6.5.1. Remote encoding and management</h3>

<p>Although the two-hour M&ouml;tley Cr&uuml;e broadcast did not require
<a name="INDEX-914" />remote
encoding, many situations, especially 24-hour live broadcasts, call
for a remote management solution. The live RealEncoder for Unix and
Windows includes a command-line interface that can be remotely
managed. If you are running the RealSystem on
<a name="INDEX-915" />Linux,
<a name="INDEX-916" />Solaris, or
<a name="INDEX-917" />IRIX, you can remotely access the
encoder through Telnet. On Windows, you need a third-party Telnet
daemon, or you can set up an HTTP server and use CGI scripts via web
pages to administer the encoder. In general, the Unix solution is
easier, more reliable, and less limiting, according to RealNetwork
engineers.
</p>

<p>If it is mission-critical that your RealEncoder stays up 100% of the
time and must be remotely managed, pay close attention to purchasing
the right system. Most experienced RealMedia developers report that
the RealEncoder running on Solaris or <a name="INDEX-918" />Silicon Graphics is more reliable and
easier to manage than the Windows NT version. An SGI O2 or a Sun
Ultra10 are great systems for keeping a 24 x 7 RealEncoder
running and are similar in price to a fully loaded, dual-processor
PC.
</p>

<p>If you have to use Windows NT, split the video and audio inputs to a
spare backup system. Set up a script that will monitor the stream of
the first encoder and start the second encoder (via the command-line
interface) if the first encoder goes down.
</p>

<p>The <a name="INDEX-919" />RealNetworks Consulting Group has
developed several tools for remote management. The RemoteEncoderis a
customized version of the RealPublisher 5.0 (NT only) that allows the
user to remotely initialize, start, and stop an encoding session. The
Monitor Encoder for Windows 95 and Windows NT detects dead silence in
the audio stream. Once the silent period exceeds a certain threshold
set by the system administrator (e.g., 10 seconds), it sends an email
warning. The <a name="INDEX-920" />Monitor Encoder also has a second
warning threshold that once exceeded, terminates the encoding session
automatically.
</p>

<p>If you are interested in one of these remote management tools, send
email to <em class="email">consulting@real.com</em>. The
license for the Remote Encoder solution and Monitor Encoder are
available on a per-site basis, <a name="INDEX-921" /> <a name="INDEX-922" /> <a name="INDEX-923" /> <a name="INDEX-924" />according to RealNetworks.
</p>

</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch06_05.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch06_07.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">6.5. Live broadcasting with RealAudio</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">6.7. Summary</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area href="../index.htm" coords="0,1,78,93" shape="rect" /><area href="../wdesign/index.htm" coords="80,2,155,96" shape="rect" /><area href="../xhtml/index.htm" coords="158,0,263,97" shape="rect" /><area href="index.htm" coords="265,1,335,97" shape="rect" /><area href="../css/index.htm" coords="338,1,434,93" shape="rect" /><area href="../action/index.htm" coords="439,0,540,102" shape="rect" /><area href="../infoarch/index.htm" coords="544,0,685,102" shape="rect" /></map>

</body></html>