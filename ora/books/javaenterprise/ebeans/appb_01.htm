<html>
<head>
<title>State and Sequence Diagrams (Enterprise JavaBeans)</title>

<!-- STYLESHEET -->

<link rel="stylesheet" type="text/css" href="../style/style1.css" webstripperlinkwas="../style/style1.css">

<!-- METADATA -->



<!--Dublin Core Metadata-->

<meta name="DC.Creator" content="Richard Monson-Haefel">
<meta name="DC.Date" content="">
<meta name="DC.Format" content="text/xml" scheme="MIME">
<meta name="DC.Generator" content="XSLT stylesheet, xt by James Clark">
<meta name="DC.Identifier" content="">
<meta name="DC.Language" content="en-US">
<meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc.">
<meta name="DC.Source" content="1-56592-869-5E" scheme="ISBN">
<meta name="DC.Subject.Keyword" content="">
<meta name="DC.Title" content="State and Sequence Diagrams">
<meta name="DC.Type" content="Text.Monograph">

</head>

<body>

<!-- START OF BODY -->



<!-- TOP BANNER -->

<a href="index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/index.htm"><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home"></a>
<map name="banner-map"><map name="banner-map"> <area shape="rect" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/index.htm" alt="Enterprise JavaBeans"> <area shape="rect" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/jobjects/fsearch.htm" alt="Search this book"> </map>
</map>

<!-- TOP NAV BAR -->

<div class="navbar">
<table width="515" border="0">
<tr>
<td align="left" valign="top" width="172"><a href="appa_02.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/appa_02.htm"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous" border="0"></a></td><td align="center" valign="top" width="171"><a href="index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/index.htm">Enterprise JavaBeans</a></td><td align="right" valign="top" width="172"><a href="appb_02.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/appb_02.htm"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next" border="0"></a></td>
</tr>
</table>
</div>
<hr width="515" align="left">

<!-- SECTION BODY -->
<h1 class="chapter">Appendix B.  State and Sequence Diagrams</h1>
<div class="htmltoc">
<h4 class="tochead">Contents:</h4>
<p>
<a href="appb_01.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/appb_01.htm">Entity Beans</a>
<br>
<a href="appb_02.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/appb_02.htm">Session Beans</a>
<br>
</p>
</div>

<p>The appendix contains state and <a name="INDEX-2295"></a><a name="INDEX-2296"></a><a name="INDEX-2297"></a>sequence
diagrams for all the bean types discussed in this book:
container-managed and bean-managed entity beans, and stateless and
stateful session beans. Although standard UML is used in these
diagrams, some extensions were required to model EJB runtime
characteristics. In the state diagrams, for example, actions of the
client and container are shown in the standard format; callback
methods and class instantiation operations are shown as part of the
transition event. The separation of client and container requires
this simple extension.
</p>

<p>In the sequence diagrams, container-provided classes such as the
container itself, EJB object, and EJB home are shown as separate
classes but are also boxed together. Messages sent from classes in
the container system box are considered to be sent from the container
system as a whole, not necessarily the specific container-provided
class. This generalization is necessary because the container's
interaction with the bean is characterized by these classes but will
be different from one vendor's implementation to the next. The
exact source of the message is immaterial, as long as you realize
that the container system sent it.
</p>


<h2 class="sect1">B.1. Entity Beans</h2>
<p>
<a name="INDEX-2298"></a><a name="INDEX-2299"></a>
</p>

<a name="JBEANS-AP-B-SECT-1.1"></a>
<h3 class="sect2">B.1.1. Life Cycle State Diagram of the Entity Bean</h3>

<a name="JBEANS-AP-B-FIG-1"></a>
<div class="figure">
<img alt="figure" src="figs/ejb2_ab01.gif" webstripperlinkwas="figs/ejb2_ab01.gif"></div>
<h4 class="objtitle">Figure B-1. Life cycle state diagram of the entity bean</h4>


<a name="appb-4-fm2xml"></a>
<h3 class="sect2">B.1.2. Sequence Diagrams for Container-Managed Persistence</h3>
<p>
<a name="INDEX-2300"></a><a name="INDEX-2301"></a><a name="INDEX-2302"></a><a name="INDEX-2303"></a><a name="INDEX-2304"></a>
</p>
<a name="JBEANS-AP-B-FIG-2"></a>
<div class="figure">
<img alt="figure" src="figs/ejb2_ab02.gif" webstripperlinkwas="figs/ejb2_ab02.gif"></div>
<h4 class="objtitle">Figure B-2. Creation and removal in container-managed persistence</h4>

<a name="appb-6-fm2xml"></a>
<div class="figure">
<img alt="figure" src="figs/ejb2_ab03.gif" webstripperlinkwas="figs/ejb2_ab03.gif"></div>
<h4 class="objtitle">Figure B-3. Activation and synchronization in container-managed persistence</h4>


<a name="appb-7-fm2xml"></a>
<h3 class="sect2">B.1.3. Sequence Diagrams for Bean-Managed Persistence</h3>

<a name="JBEANS-AP-B-FIG-4"></a>
<div class="figure">
<img alt="figure" src="figs/ejb2_ab04.gif" webstripperlinkwas="figs/ejb2_ab04.gif"></div>
<h4 class="objtitle">Figure B-4. Creation and removal in bean-managed persistence</h4>

<a name="JBEANS-AP-B-FIG-5"></a>
<div class="figure">
<img alt="figure" src="figs/ejb2_ab05.gif" webstripperlinkwas="figs/ejb2_ab05.gif"></div>
<h4 class="objtitle">Figure B-5. Activation and synchronization in bean-managed persistence</h4>

<p>
<a name="INDEX-2305"></a><a name="INDEX-2306"></a><a href="#JBEANS-AP-B-TABLE-2">Table B-1</a> and <a href="#JBEANS-AP-B-TABLE-4">Table B-2</a>
summarize the operations that an <a name="INDEX-2307"></a>entity bean is allowed to perform in
various stages of its life cycle.
</p>

<a name="JBEANS-AP-B-TABLE-2"></a>
<h4 class="objtitle">Table B-1. Allowed Operations for Entity Beans in EJB 1.1</h4>
<table border="1">



<tr>
<th>
<p>Method</p>
</th>
<th>
<p>Allowed Operations</p>
</th>
</tr>

<tr>
<td>
<p>
<tt class="literal">setEntityContext()</tt>
</p>

<p>
<tt class="literal">unsetEntityContext()</tt>
</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
</p>

</blockquote>

<p>JNDI ENC contexts:</p>

<blockquote class="simplelist">
<p>Properties <tt class="literal">java:comp/env</tt>
</p>

</blockquote>
</td>
</tr>
<tr>
<td>
<p>
<tt class="literal">ejbCreate()</tt>
</p>

<p>
<tt class="literal">ejbFind()</tt>
</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getCallerPrincipal()</tt>
</p>

<p>
<tt class="literal">isCallerInRole()</tt>
</p>

<p>
<tt class="literal">getRollbackOnly()</tt>
</p>

<p>
<tt class="literal">setRollbackOnly()</tt>
</p>

<p>
</p>

</blockquote>

<p>JNDI ENC contexts:</p>

<blockquote class="simplelist">

<p>Properties <tt class="literal">java:comp/env</tt>
</p>

<p>Resource Managers <tt class="literal">java:comp/env/jdbc</tt> </p>

<p>EJB references <tt class="literal">java:comp/env/ejb</tt>
</p>

</blockquote>
</td>
</tr>
<tr>
<td>
<p>
<tt class="literal">ejbPostCreate()</tt>
</p>

<p>
<tt class="literal">ejbLoad()</tt>
</p>

<p>
<tt class="literal">ejbStore()</tt>
</p>

<p>
<tt class="literal">ejbRemove()</tt>
</p>

<p>business methods</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getCallerPrincipal()</tt>
</p>

<p>
<tt class="literal">isCallerInRole() getRollbackOnly()</tt>
</p>

<p>
<tt class="literal">setRollbackOnly()</tt>
</p>

<p>
<tt class="literal">getEJObject()</tt>
</p>

<p>
<tt class="literal">getPrimaryKey()</tt>
</p>

<p>
</p>

</blockquote>

<p>JNDI ENC contexts:</p>

<blockquote class="simplelist">

<p>Properties <tt class="literal">java:comp/env</tt>
</p>

<p>Resource Managers <tt class="literal">java:comp/env/jdbc</tt> </p>

<p>EJB references <tt class="literal">java:comp/env/ejb</tt>
</p>

</blockquote>
</td>
</tr>
<tr>
<td>
<p>
<tt class="literal">ejbActivate()</tt>
</p>

<p>
<tt class="literal">ejbPassivate()</tt>
</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getEJBObject()</tt>
</p>

<p>
<tt class="literal">getPrimaryKey()</tt>
</p>

<p>
</p>

</blockquote>

<p>JNDI ENC contexts:</p>

<blockquote class="simplelist">

<p>Properties <tt class="literal">java:comp/env</tt>
</p>

</blockquote>
</td>
</tr>

</table>

<p>Note that entity beans in EJB 1.1 can never access the
<tt class="literal">EJBContext.getUserTransaction()</tt> method, because
entity beans are not allowed to manage their own transactions. Only
session beans can access this method.
</p>

<a name="JBEANS-AP-B-TABLE-4"></a>
<h4 class="objtitle">Table B-2. Allowed Operations for Entity Beans in EJB 1.0</h4>
<table border="1">





<tr>
<th>
<p>
</p>
</th>
<th>
<p>Allowed Operations</p>
</th>
</tr>
<tr>
<th>
<p>Method</p>
</th>
<th>
<p>Container-Managed Transactions </p>
</th>
<th>
<p>Bean-Managed Transactions</p>
</th>
</tr>

<tr>
<td>
<p>
<tt class="literal">setEntityContext()</tt>
</p>

<p>
<tt class="literal">unsetEntityContext()</tt>
</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

</blockquote>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

</blockquote>
</td>
</tr>
<tr>
<td>
<p>
<tt class="literal">ejbCreate()</tt>
</p>

<p>
<tt class="literal">ejbFind()</tt>
</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getCallerIdentity()</tt>
</p>

<p>
<tt class="literal">isCallerInRole()</tt>
</p>

<p>
<tt class="literal">getRollbackOnly()</tt>
</p>

<p>
<tt class="literal">setRollbackOnly()</tt>
</p>

</blockquote>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getCallerIdentity()</tt>
</p>

<p>
<tt class="literal">isCallerInRole()</tt>
</p>

<p>
<tt class="literal">getUserTransaction()</tt>
</p>

</blockquote>
</td>
</tr>
<tr>
<td>
<p>
<tt class="literal">ejbPostCreate()</tt>
</p>

<p>
<tt class="literal">ejbLoad()</tt>
</p>

<p>
<tt class="literal">ejbStore()</tt>
</p>

<p>
<tt class="literal">ejbRemove()</tt>
</p>

<p>business methods</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getCallerPrincipal()</tt>
</p>

<p>
<tt class="literal">getRollbackOnly()</tt>
</p>

<p>
<tt class="literal">isCallerInRole()</tt>
</p>

<p>
<tt class="literal">setRollbackOnly()</tt>
</p>

<p>
<tt class="literal">getEJBObject()</tt>
</p>

<p>
<tt class="literal">getPrimaryKey()</tt>
</p>

</blockquote>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getCallerPrincipal()</tt>
</p>

<p>
<tt class="literal">isCallerInRole()</tt>
</p>

<p>
<tt class="literal">getEJBObject()</tt>
</p>

<p>
<tt class="literal">getPrimaryKey()</tt>
</p>

<p>
<tt class="literal">getUserTransaction()</tt>
</p>

</blockquote>
</td>
</tr>
<tr>
<td>
<p>
<tt class="literal">ejbActivate()</tt>
</p>

<p>
<tt class="literal">ejbPassivate()</tt>
</p>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getEJBObject()</tt>
</p>

<p>
<tt class="literal">getPrimaryKey()</tt>
</p>

</blockquote>
</td>
<td>
<p>
<tt class="literal">EntityContext</tt> methods: </p>

<blockquote class="simplelist">

<p>
<tt class="literal">getEnvironment()</tt>
</p>

<p>
<tt class="literal">getEJBHome()</tt>
</p>

<p>
<tt class="literal">getEJBObject()</tt>
</p>

<p>
<tt class="literal">getPrimaryKey()</tt>
</p>

</blockquote>
</td>
</tr>

</table>







<!-- BOTTOM NAV BAR -->

<hr width="515" align="left">
<div class="navbar">
<table width="515" border="0">
<tr>
<td align="left" valign="top" width="172"><a href="appa_02.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/appa_02.htm"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous" border="0"></a></td><td align="center" valign="top" width="171"><a href="index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/index.htm"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Home" border="0"></a></td><td align="right" valign="top" width="172"><a href="appb_02.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/appb_02.htm"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next" border="0"></a></td>
</tr>
<tr>
<td align="left" valign="top" width="172">A.2. Package: javax.ejb.deployment (EJB 1.0 Only)</td><td align="center" valign="top" width="171"><a href="index/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/index/index.htm"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></a></td><td align="right" valign="top" width="172">B.2. Session Beans</td>
</tr>
</table>
</div>
<hr width="515" align="left">

<!-- LIBRARY NAV BAR -->

<img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links"><p>
<font size="-1"><a href="copyrght.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font>
</p>
<map name="library-map"> <map name="library-map"> <area shape="rect" coords="-8,-5,72,97" href="../index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/index.htm"> <area shape="rect" coords="75,2,150,109" href="../jenut/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/jenut/index.htm"> <area shape="rect" coords="154,0,225,99" href="../jnut/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/jnut/index.htm"> <area shape="rect" coords="228,3,298,112" href="../jfc/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/jfc/index.htm"> <area shape="rect" coords="306,1,373,124" href="index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/ebeans/index.htm"> <area shape="rect" coords="380,2,446,115" href="../servlet/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/servlet/index.htm"> <area shape="rect" coords="452,1,524,101" href="../security/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/security/index.htm"> <area shape="rect" coords="528,2,610,102" href="../dist/index.htm" webstripperlinkwas="http://ext.rlab.cs.nyu.edu/~jsr/oreilly/dist/index.htm"> </map>
</map>

<!-- END OF BODY -->

</body>
</html>
