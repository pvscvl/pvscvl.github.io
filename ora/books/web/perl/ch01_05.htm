<!doctype html public "-//ORA//DTD CD HTML 3.2//EN">
<html>
<head>
<title>[Chapter 1] 1.5 Operators</TITLE>
<meta name="author" content="Larry Wall, Tom Christiansen, and Randal Schwartz">
<meta name="date" content="Mon Mar 17 12:59:21 1997">
<meta name="form" content="html">
<meta name="metadata" content="dublincore.0.1">
<meta name="objecttype" content="book part">
<meta name="otheragent" content="gmat dbtohtml">
<meta name="publisher" content="O'Reilly &amp; Associates, Inc.">
<meta name="source" content="SGML">
<meta name="subject" content="Perl">
<meta name="title" content="Programming Perl, Second Edition">
<!-- JavaScript: pathcont.js -->

</HEAD>
<body bgcolor="#FFFFFF">

<div class=htmlnav>
<h1><img src="gifs/smbanner.gif" alt="Programming Perl, Second Edition"></H1>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch01_04.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><b>Chapter 1</b></td>
<td width=172 align=right valign=top><a href="ch01_06.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
</table>
<!-- JavaScript: prev.js -->
&nbsp;
<!-- JavaScript: next.js -->
<hr align=left width=515>
</DIV>
<div class=sect1>
<h2 class=sect1><a class="TITLE" name="PERL2-CH-1-SECT-5">1.5 Operators</A></h2>

<p class=para>
<a name="CH01.OP"></A>As we alluded to earlier, Perl is also a mathematical language.  This is
true at several levels, from low-level bitwise logical operations, up
through number and set manipulation, on up to larger predicates and
abstractions of various sorts.  And as we all know from studying math in
school, mathematicians love strange symbols.  What's worse, computer
scientists have come up with their own versions of these strange
symbols.  Perl has a number of these strange symbols too, but take
heart, most are borrowed directly from C, FORTRAN, <i class=emphasis>sed</I> (1) or
<i class=emphasis>awk</I> (1), so
they'll at least be familiar to users of those languages.

<p class=para>
Perl's built-in operators may be classified by number of operands into
unary, binary, and trinary operators.  They may be classified by whether
they're infix operators or prefix operators.  They may also be
classified by the kinds of objects they work with, such as numbers,
strings, or files.  Later, we'll give you a table of all the operators,
but here are some to get you started.

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.1">Arithmetic Operators</A></h3>

<p class=para>
Arithmetic operators do exactly what you would expect from learning them
in school.  They perform some sort of mathematical function on numbers.

<p>
<div class=table>
<table>
<caption><a class="TITLE" name="PERL2-CH-1-TAB-2">Table 1-2: Some Binary Arithmetic Operators</A></CAPTION>
<tr class=row>
<th align="left">Example</TH>
<th align="left">Name</TH>
<th align="left">Result</TH>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a + $b</tt></TD>
<td align="left">Addition</TD>
<td align="left">Sum of <tt class=literal>$a</tt> and <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a * $b</tt></TD>
<td align="left">Multiplication</TD>
<td align="left">Product of <tt class=literal>$a</tt> and <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a % $b</tt></TD>
<td align="left">Modulus</TD>
<td align="left">Remainder of <tt class=literal>$a</tt> divided by <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a ** $b</tt></TD>
<td align="left">Exponentiation</TD>
<td align="left"><tt class=literal>$a</tt> to the power of <tt class=literal>$b</tt></TD>
</TR>
</TABLE>
<p>
</DIV>
<p class=para>
Yes, we left subtraction and division out of <a href="#PERL2-CH-1-TAB-2">Table 1.2</A>.  But we suspect
you can figure out how they should work.  Try them and see if you're
right.  (Or cheat and look in the index.)  Arithmetic operators are
evaluated in the order your math teacher taught you (exponentiation before multiplication, and multiplication before
addition).  You can always use parentheses to make it come out differently.

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.2">String Operators</A></h3>

<p class=para>
There is also an "addition" operator for strings that does concatenation.
Unlike some languages that confuse this with numeric addition, Perl defines a
separate operator (<tt class=literal>.</tt>) for string concatenation:

<p class=para>
<div class=programlisting>
<p>
<pre>
$a = 123;
$b = 456;
print $a + $b;     # prints 579
print $a . $b;     # prints 123456
</PRE>
</DIV>

<p class=para>
There's also a "multiply" operation for strings, also called the <i class=emphasis>repeat</I>
operator.  Again, it's a separate operator (<b>x</B>) to keep it distinct
from numeric multiplication:

<p class=para>
<div class=programlisting>
<p>
<pre>
$a = 123;
$b = 3;
print $a * $b;     # prints 369
print $a x $b;     # prints 123123123
</PRE>
</DIV>

<p class=para>
These string operators bind as tightly as their corresponding
arithmetic operators.  The repeat operator is a bit unusual in taking a
string for its left argument but a number for its right argument.  Note
also how Perl is automatically converting from numbers to strings. You could have put all the literal numbers above in quotes, and it
would still have produced the same output.  Internally though, it would
have been converting in the opposite direction (that is, from strings to
numbers).

<p class=para>
A couple more things to think about.  String concatenation is
also implied by the interpolation that happens in double-quoted strings.
When you print out a list of values, you're also effectively concatenating
strings.  So the following three statements produce the same output:

<p class=para>
<div class=programlisting>
<p>
<pre>
print $a . ' is equal to ' . $b . "\n";    # dot operator
print $a, ' is equal to ', $b, "\n";       # list
print "$a is equal to $b\n";               # interpolation
</PRE>
</DIV>

<p class=para>
Which of these you use in any particular situation is entirely up to you.

<p class=para>
The <b>x</B> operator may seem relatively
worthless at first glance, but it is quite useful at times, especially
for things like this:

<p class=para>
<div class=programlisting>
<p>
<pre>
print "-" x $scrwid, "\n";
</PRE>
</DIV>

<p class=para>
which draws a line across your screen, presuming your screen width
is in <tt class=literal>$scrwid</tt>.

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.3">Assignment Operators</A></h3>

<p class=para>
Although it's not exactly a mathematical operator, we've already made
extensive use of the simple assignment operator, <tt class=literal>=</tt>.  Try to remember
that <tt class=literal>=</tt> means "gets set to" rather than "equals".  (There is also a
mathematical equality operator <tt class=literal>==</tt> that means "equals", and if you
start out thinking about the difference between them now, you'll save
yourself a lot of headache later.)

<p class=para>
Like the operators above, assignment operators are binary infix
operators, which means they have an operand on either side of the
operator.  The right operand can be any expression you like, but the
left operand must be a valid <i class=emphasis>lvalue</I> (which, when translated to
English, means a valid storage location like a variable, or a location
in an array).  The most common assignment operator is simple assignment.
It determines the value of the expression on its right side, and sets
the variable on the left side to that value:

<p class=para>
<div class=programlisting>
<p>
<pre>
$a = $b;
$a = $b + 5;
$a = $a * 3;
</PRE>
</DIV>

<p class=para>
Notice the last assignment refers to the same variable twice; once
for the computation, once for the assignment.  There's nothing wrong with that, but it's a common enough operation that there's a
shortcut for it (borrowed from C).  If you say:

<div class=programlisting>
<p>
<pre>
lvalue operator= expression
</PRE>
</DIV>

<p class=para>
it is evaluated as if it were:

<div class=programlisting>
<p>
<pre>
lvalue = lvalue operator expression
</PRE>
</DIV>

<p class=para>
except that the lvalue is not computed twice.  (This only makes a
difference if evaluation of the lvalue has side effects.  But when it
<i class=emphasis>does</I> make a difference, it usually does what you want.  So don't sweat it.)

<p class=para>
So, for example, you could write the above as:

<p class=para>
<div class=programlisting>
<p>
<pre>
$a *= 3;
</PRE>
</DIV>

<p class=para>
which reads "multiply <tt class=literal>$a</tt> by 3".  You can do this with almost any
binary operator in Perl, even some that you can't do it with in C:

<p class=para>
<div class=programlisting>
<p>
<pre>
$line .= "\n";  # Append newline to $line.
$fill x= 80;    # Make string $fill into 80 repeats of itself.
$val ||= "2";   # Set $val to 2 if it isn't already set.
</PRE>
</DIV>

<p class=para>
Line 6 of our grade example contains two string concatenations, one
of which is an assignment operator.  And line 14 contains a <tt class=literal>+=</tt>.

<p class=para>
Regardless of which kind of assignment operator you use, the final value
is returned as the value of the assignment as a whole.  (This is unlike,
say, Pascal, in which assignment is a statement and has no value.)
This is why we could say:

<p class=para>
<div class=programlisting>
<p>
<pre>
chop($number = &lt;STDIN&gt;);
</PRE>
</DIV>

<p class=para>
and have it chop the final value of <tt class=literal>$number</tt>.  You also frequently see
assignment as the condition of a <b>while</B> loop, as in line 4 of our grade
example.

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.4">Autoincrement and Autodecrement Operators</A></h3>

<p class=para>
As if <tt class=literal>$variable += 1</tt> weren't short enough, Perl borrows from C
an even shorter way to increment a variable.  The autoincrement and
autodecrement operators simply add (or subtract) one from the value of the
variable.  They can be placed on either side of the variable, depending on
when you want them to be evaluated (see <a href="#PERL2-CH-1-TAB-3">Table 1.3</A>).

<p>
<div class=table>
<table>
<caption><a class="TITLE" name="PERL2-CH-1-TAB-3">Table 1-3: Unary Arithmetic Operators</A></CAPTION>
<tr class=row>
<th align="left">Example</TH>
<th align="left">Name</TH>
<th align="left">Result</TH>
</TR>
<tr class=row>
<td align="left"><tt class=literal>+ +$a, $a+ +</tt></TD>
<td align="left">Autoincrement</TD>
<td align="left">Add 1 to <tt class=literal>$a</tt></TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>- -$a, $a- -</tt></TD>
<td align="left">Autodecrement</TD>
<td align="left">Subtract 1 from <tt class=literal>$a</tt></TD>
</TR>
</TABLE>
<p>
</DIV>
<p class=para>
If you place one of the auto operators before the variable, it is known as
a pre-incremented (pre-decremented) variable.  Its value will be changed
before it is referenced.  If it is placed 
after the variable, it is known
as a post-incremented (post-decremented) variable and its value is changed
after it is used.  For example:

<p class=para>
<div class=programlisting>
<p>
<pre>
$a = 5;        # $a is assigned 5
$b = ++$a;     # $b is assigned the incremented value of $a, 6
$c = $a--;     # $c is assigned 6, then $a is decremented to 5
</PRE>
</DIV>

<p class=para>
Line 15 of our grade example increments the number of scores by one, so
that we'll know how many scores we're averaging the grade over.  It uses
a post-increment operator (<tt class=literal>$scores++</tt>), but in this case it doesn't
matter, since the expression is in a void context, which is just a funny
way of saying that the expression is being evaluated only for the side
effect of incrementing the variable.  The value returned is being thrown
away.[21]

<blockquote class=footnote>
<p class=para>[21] 
The optimizer will notice this and optimize the
post-increment into a pre-increment, because that's a little more
efficient to execute.  (You didn't need to know that, but we
hoped it would cheer you up.)
</blockquote>
</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.5">Logical Operators</A></h3>

<p class=para>
Logical operators, also known as "short-circuit" operators, allow the
program to make decisions based on multiple criteria, without using
nested conditionals.  They are known as short-circuit because they skip
evaluating their right argument if evaluating their left argument is
sufficient to determine the overall value.

<p class=para>
Perl actually has two sets of logical operators, a crufty old set
borrowed from C, and a nifty new set of ultralow-precedence operators
that parse more like people expect them to parse, and are also easier to
read.  (Once they're parsed, they behave identically though.) See
<a href="#PERL2-CH-1-TAB-4">Table 1.4</A> for examples of logical operators.

<p>
<div class=table>
<table>
<caption><a class="TITLE" name="PERL2-CH-1-TAB-4">Table 1-4: Logical Operators</A></CAPTION>
<tr class=row>
<th align="left">Example</TH>
<th align="left">Name</TH>
<th align="left">Result</TH>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a &amp;&amp; $b</tt></TD>
<td align="left">And</TD>
<td align="left">

<p class=para>
<tt class=literal>$a</tt> if <tt class=literal>$a</tt> is false, 
<tt class=literal>$b</tt> otherwise</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a || $b</tt></TD>
<td align="left">Or</TD>
<td align="left">

<p class=para>
<tt class=literal>$a</tt> if <tt class=literal>$a</tt> 
is true, <tt class=literal>$b</tt> otherwise</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>! $a</tt></TD>
<td align="left">Not</TD>
<td align="left">True if <tt class=literal>$a</tt> is not true</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a and $b</tt></TD>
<td align="left">And</TD>
<td align="left">

<p class=para>
<tt class=literal>$a</tt> if <tt class=literal>$a</tt> is false,
<tt class=literal>$b</tt> otherwise</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>$a or $b</tt></TD>
<td align="left">Or</TD>
<td align="left">

<p class=para>
<tt class=literal>$a</tt> if <tt class=literal>$a</tt> 
is true, <tt class=literal>$b</tt> otherwise</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>not $a</tt></TD>
<td align="left">Not</TD>
<td align="left">True if <tt class=literal>$a</tt> is not true</TD>
</TR>
</TABLE>
<p>
</DIV>
<p class=para>
Since the logical operators "short circuit" the way they do, they're
often used to conditionally execute code.  The following line (from our
grade example) tries to open the file <i class=emphasis>grades</I>.

<div class=programlisting>
<p>
<pre>
open(GRADES, "grades") or die "Can't open file grades: $!\n";
</PRE>
</DIV>

<p class=para>
If it opens the file,
it will jump to the next line of the program.  If it can't open the
file, it will provide us with an error message and then stop execution.

<p class=para>
Literally, the above message means "Open <i class=emphasis>grades</I> or die!"  Besides being another example of
natural language, the short-circuit operators preserve the visual flow.
Important actions are listed down the left side of the screen, and
secondary actions are hidden off to the right.  (The <b>$!</B> variable
contains the error message returned by the operating system--see
"Special Variables" in <a href="ch02_01.htm">Chapter 2, <i>The Gory Details</i></A>).
Of course, these logical operators can also be used within the more
traditional kinds of conditional constructs, such as the <b>if</B> and <b>while</B>
statements.

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.6">Comparison Operators</A></h3>

<p class=para>
Comparison, or relational, operators tell us how two scalar values
(numbers or strings) relate to each other.  There are two sets of
operators--one does numeric comparison and the other
does string comparison.  (In either case, the arguments will be "coerced"
to have the appropriate type first.)  <a href="#PERL2-CH-1-TAB-5">Table 1.5</A> assumes <tt class=literal>$a</tt>
and <tt class=literal>$b</tt> are the left and right arguments, respectively.

<p>
<div class=table>
<table>
<caption><a class="TITLE" name="PERL2-CH-1-TAB-5">Table 1-5: Some Numeric and String Comparison Operators</A></CAPTION>
<tr class=row>
<th align="left">Comparison</TH>
<th align="left">Numeric</TH>
<th align="left">String</TH>
<th align="left">Return Value</TH>
</TR>
<tr class=row>
<td align="left">Equal</TD>
<td align="left"><tt class=literal>==</tt></TD>
<td align="left"><tt class=literal>eq</tt></TD>
<td align="left">True if <tt class=literal>$a</tt> is equal to <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left">Not equal</TD>
<td align="left"><tt class=literal>!=</tt></TD>
<td align="left"><tt class=literal>ne</tt></TD>
<td align="left">True if <tt class=literal>$a</tt> is not equal to <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left">Less than</TD>
<td align="left"><tt class=literal>&lt;</tt></TD>
<td align="left"><tt class=literal>lt</tt></TD>
<td align="left">True if <tt class=literal>$a</tt> is less than <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left">Greater than</TD>
<td align="left"><tt class=literal>&gt;</tt></TD>
<td align="left"><tt class=literal>gt</tt></TD>
<td align="left">True if <tt class=literal>$a</tt> is greater than <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left">Less than or equal</TD>
<td align="left"><tt class=literal>&lt;=</tt></TD>
<td align="left"><tt class=literal>le</tt></TD>
<td align="left">True if <tt class=literal>$a</tt> not greater than <tt class=literal>$b</tt></TD>
</TR>
<tr class=row>
<td align="left">Comparison</TD>
<td align="left"><tt class=literal>&lt;=&gt;</tt></TD>
<td align="left"><tt class=literal>cmp</tt></TD>
<td align="left">0 if equal, 1 if <tt class=literal>$a</tt> greater, -1 if <tt class=literal>$b</tt> greater</TD>
</TR>
</TABLE>
<p>
</DIV>
<p class=para>
The last pair of operators (<tt class=literal>&lt;=&gt;</tt> and <tt class=literal>cmp</tt>)
are entirely redundant. However,
they're incredibly useful in <a href="ch03_02.htm">sort</A>
subroutines (see <a href="ch03_01.htm">Chapter 3, <i>Functions</i></A>).[22]

<blockquote class=footnote>
<p class=para>[22] 
Some folks feel that such redundancy is evil because it keeps a language
from being minimalistic, or orthogonal.  But Perl isn't an orthogonal
language; it's a diagonal language.  By which we mean that Perl doesn't
force you to always go at right angles.  Sometimes you just want
to follow the hypotenuse of the triangle to get where you're going.
TMTOWTDI is about shortcuts.  Shortcuts are about efficiency.
</blockquote>
</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="PERL2-CH-1-SECT-5.7">File Test Operators</A></h3>

<p class=para>
The file test operators allow you to test whether certain file attributes are
set before you go and blindly muck about with the files.  For example, it
would be very nice to know that the file <i class=emphasis>/etc/passwd</I> already exists
before you go and open it as a new file, wiping out everything that was in
there before. See <a href="#PERL2-CH-1-TAB-6">Table 1.6</A> for examples of file test operators.

<p>
<div class=table>
<table>
<caption><a class="TITLE" name="PERL2-CH-1-TAB-6">Table 1-6: Some File Test Operators</A></CAPTION>
<tr class=row>
<th align="left">Example</TH>
<th align="left">Name</TH>
<th align="left">Result</TH>
</TR>
<tr class=row>
<td align="left"><tt class=literal>-e $a</tt></TD>
<td align="left">Exists</TD>
<td align="left">True if file named in <tt class=literal>$a</tt> exists</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>-r $a</tt></TD>
<td align="left">Readable</TD>
<td align="left">True if file named in <tt class=literal>$a</tt> is readable</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>-w $a</tt></TD>
<td align="left">Writable</TD>
<td align="left">True if file named in <tt class=literal>$a</tt> is writable</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>-d $a</tt></TD>
<td align="left">Directory</TD>
<td align="left">True if file named in <tt class=literal>$a</tt> is a directory</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>-f $a</tt></TD>
<td align="left">File</TD>
<td align="left">True if file named in <tt class=literal>$a</tt> is a regular file</TD>
</TR>
<tr class=row>
<td align="left"><tt class=literal>-T $a</tt></TD>
<td align="left">Text File</TD>
<td align="left">True if file named in <tt class=literal>$a</tt> is a text file</TD>
</TR>
</TABLE>
<p>
</DIV>
<p class=para>
Here are some examples:

<p class=para>
<div class=programlisting>
<p>
<pre>
-e "/usr/bin/perl" or warn "Perl is improperly installed\n";
-f "/vmunix" and print "Congrats, we seem to be running BSD Unix\n";
</PRE>
</DIV>

<p class=para>
Note that a regular file is not the same thing as a text file.  Binary
files like <i class=emphasis>/vmunix</I> are regular files, but they aren't text files.
Text files are the opposite of binary files, while regular files are the
opposite of irregular files like directories and devices.

<p class=para>
There are a lot of file test operators, many of which we didn't list.
Most of the file tests are unary Boolean operators: they take only one
operand, a scalar that evaluates to a file or a filehandle, and they
return either a true or false value.  A few of them return something fancier,
like the file's size or age, but you can look those up when you need them.

</DIV>

</DIV>


<div class=htmlnav>
<p>
<hr align=left width=515>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch01_04.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><a href="index.htm"><img src="gifs/txthome.gif" alt="Home" border=0></a></td>
<td width=172 align=right valign=top><a href="ch01_06.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
<tr>
<td width=172 align=left valign=top>Filehandles</td>
<td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td>
<td width=172 align=right valign=top>Control Structures</td>
</tr>
</table>

<!-- JavaScript: prev.js -->
&nbsp;
<!-- JavaScript: next.js -->
</DIV>
</BODY>
</HTML>
