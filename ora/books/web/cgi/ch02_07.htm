<!doctype html public "-//ORA//DTD CD HTML 3.2//EN">
<html>
<head>
<title>[Chapter 2] 2.7 Other Languages on Macintosh Servers</TITLE>
<meta name="author" content="Shishir Gundavaram">
<meta name="date" content="Mon Mar 17 13:21:18 1997">
<meta name="form" content="html">
<meta name="metadata" content="dublincore.0.1">
<meta name="objecttype" content="book part">
<meta name="otheragent" content="gmat dbtohtml">
<meta name="publisher" content="O'Reilly &amp; Associates, Inc.">
<meta name="source" content="SGML">
<meta name="subject" content="cgi programming">
<meta name="title" content="CGI Programming on the World Wide Web">
<!-- JavaScript: pathcont.js -->

</HEAD>
<body bgcolor="#FFFFFF">

<div class=htmlnav>
<h1><img src="gifs/smbanner.gif" alt="CGI Programming on the World Wide Web"></H1>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch02_06.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><b>Chapter 2</b></td>
<td width=172 align=right valign=top><a href="ch02_08.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
</table>
<!-- JavaScript: prev.js -->
&nbsp;
<!-- JavaScript: next.js -->
<hr align=left width=515>
</DIV>
<div class=sect1>
<h2 class=sect1><a class="TITLE" name="CGI-CHP-2-SECT-7">2.7 Other Languages on Macintosh Servers</A></h2>

<p class=para>

The two commonly used HTTP servers for the Macintosh
are 
WebSTAR
and MacHTTP, both of which are nearly identical in their functionality.
These servers use AppleEvents to communicate with external applications,
such as CGI programs. The language of choice for CGI programming
on the Macintosh is 
AppleScript.

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="CGI-CHP-2-SECT-7.1">AppleScript</A></h3>

<p class=para>
Though AppleScript does not have very intuitive functions for pattern
matching, there exist several CGI extensions, called 
osax (Open Scripting
Architecture eXtended), that make CGI programming very easy. Here
is a simple example of an AppleScript CGI:

<div class=screen>
<p>
<pre>
set crlf to (ASCII character 13) &amp; (ASCII character 10)
set http_header to "HTTP/1.0 200 OK" &amp; crlf &amp; -
         "Server: WebSTAR/1.0 ID/ACGI" &amp; crlf &amp; -
         "MIME-Version: 1.0" &amp; crlf &amp; "Content-type: text/html" &amp; crlf &amp; crlf
         
on `event WWWsdoc' path_args -
   given `class kfor':http_search_args, `class post':post_args, `class meth':method,
         `class addr':client_address, `class user':username, `class pass':password, 
         `class frmu':from_user, `class svnm':server_name, `class svpt':server_port,
         `class scnm':script_name, `class ctyp':content_type, `class refr':referer,
         `class Agnt':user_agent, `class Kact':action, `class Kapt':action_path,
        `class Kcip':client_ip, `class Kfrq':full_request
   
   set virtual_document to http_header &amp; -
       "&lt;H1&gt;Server Software&lt;/H1&gt;&lt;BR&gt;&lt;HR&gt;" &amp; crlf -
       "The server that is responding to your request is: " &amp; server_name &amp; crlf -
       "&lt;BR&gt;" &amp; crlf
   return virtual_document
end `event WWW sdoc'
</PRE>
</DIV>

<p class=para>
Although the mechanics of this code might look different from
those of previous examples, this AppleScript program functions in
exactly the same way. First, the HTTP header that we intend to output
is stored in the <i class=emphasis>http_header</I> variable. Both
MacHTTP and WebSTAR servers require CGI programs to output a complete
header. Second, the <i class=emphasis>on</I> construct sets up a
handler for the "sdoc" AppleEvent, which consists of all the "environment"
information and form data. This event is sent to the CGI program
by the server when the client issues a request. Finally, the header
and other data are returned for display on the client.

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="CGI-CHP-2-SECT-7.2">MacPerl</A></h3>

<p class=para>
Yes,
Perl has also been ported to the Macintosh! This will allow you
to develop your CGI applications in much the same way as you would
under the UNIX operating system. However, you need to obtain the
MacHTTP CGI Script Extension. This extension allows you to use the
associative array <i class=emphasis>%ENV</I> to access the various
environment variables in MacPerl.

</DIV>

</DIV>


<div class=htmlnav>

<p>
<hr align=left width=515>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch02_06.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><a href="index.htm"><img src="gifs/txthome.gif" alt="Home" border=0></a></td>
<td width=172 align=right valign=top><a href="ch02_08.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
<tr>
<td width=172 align=left valign=top>Other Languages Under Microsoft Windows</td>
<td width=171 align=center valign=top><a href="index/idx_0.htm">Book Index</a></td>
<td width=172 align=right valign=top>Examining Environment Variables</td>
</tr>
</table>

<!-- JavaScript: prev.js -->
&nbsp;
<!-- JavaScript: next.js -->
</DIV>

</BODY>
</HTML>
