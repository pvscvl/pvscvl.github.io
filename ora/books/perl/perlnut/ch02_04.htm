<html><head>
<title>[Chapter 2] 2.4 Getting and Installing Modules</TITLE>
<meta name="DC.title" content="Perl in a Nutshell"><meta name="DC.creator" content="Ellen Siever, Stephen Spainhour &amp; Nathan Patwardhan"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:28:48Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-286-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" title="2. Installing Perl"><link rel="prev" href="ch02_03.htm#PNUT-CH-2-SECT-3.2" title="2.3 Installing Perl"><link rel="next" href="ch02_05.htm#PNUT-CH-2-SECT-5.1" title="2.5 Documentation"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Perl in a Nutshell" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,71" href="index.htm" alt="Perl in a Nutshell"><area shape="RECT" coords="467,0,514,18" href="../search/nsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_03.htm#PNUT-CH-2-SECT-3.2" title="2.3 Installing Perl"><img src="../gifs/txtpreva.gif" alt="Previous: 2.3 Installing Perl" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch02_01.htm" title="2. Installing Perl">Chapter 2<br>Installing Perl</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_05.htm#PNUT-CH-2-SECT-5.1" title="2.5 Documentation"><img src="../gifs/txtnexta.gif" alt="Next: 2.5 Documentation" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="PNUT-CH-2-SECT-4">2.4 Getting and Installing Modules</A
></H2
><p class="para"><a class="indexterm" name="PNUT-CH-2-IX-DOWNLOADING-PERL-MODULES-SOURCE-CODE"></A
><a class="indexterm" name="PNUT-CH-2-IX-OBTAINING-PERL-MODULES"></A
><a class="indexterm" name="PNUT-CH-2-IX-MODULES-PERL-OBTAINING-AND-INSTALLING"></A
></P
><p class="para">As you'll see when you look at the lists of modules and their authors on CPAN,
many users have made their modules freely available.  If you find an
interesting problem and are thinking of writing a module to solve it,
check the <em class="emphasis">modules</EM
> directory on CPAN first to see if there is
a module there that you can use. The chances are good that there is either
a module already that does what you need, or perhaps one that you can
extend, rather than starting from scratch.[<a class="footnote" href="#AUTOID-658">2</A
>]</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-658">[2]</A
> If you are interested
in writing and contributing modules, there are several places that
serve as good starting points for learning to do that&nbsp;- see 
the <em class="emphasis">perlmodlib</EM
> manpage, 
the &quot;Perl 5 Module List,&quot; and the &quot;Perl Authors Upload Server&quot; 
(<a class="systemitem.sitename" href="../../../../../../../www.perl.com/CPAN/modules/04pause.html">http://www.perl.com/CPAN/modules/04pause.html</A
>).</P
></DIV
></BLOCKQUOTE
><p class="para">Before you download a module, you might also check your system to see
if it's already installed.  The following command searches the libraries
in the <code class="literal">@INC</CODE
> array and prints the names of all modules it finds:</P
><blockquote class="screen"><pre class="screen">find `perl -e 'print &quot;@INC&quot;'` -name '*.pm' -print</PRE
></BLOCKQUOTE
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-2-SECT-4.0.1">2.4.1 Locating modules</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-668"></A
>If you start from the <em class="emphasis">modules</EM
> directory on CPAN, you'll see that
the modules are categorized into three subdirectories:</P
><blockquote class="screen"><pre class="screen">by-authors       <i class="lineannotation">Modules by author's registered CPAN name</I
>
by-category      <i class="lineannotation">Modules by subject matter (see below)</I
>
by-module        <i class="lineannotation">Modules by namespace (i.e., MIME)</I
></PRE
></BLOCKQUOTE
><p class="para">If you know what module you want, you can go
directly to it by clicking on the <em class="emphasis">by-module</EM
> entry.  If you are
looking for a module in a particular category, you can find it through
the <em class="emphasis">by-category</EM
> subdirectory. If you know the author, click on
<em class="emphasis">by-author</EM
>.
However, if you aren't familiar with the categories and you want to
find out if there is a module that performs a certain task, you might
want to get the file <em class="emphasis">00modlist.long.html</EM
>, also in the
<em class="emphasis">modules</EM
> directory. That file is the 
&quot;Perl 5 Modules List.&quot;  It contains a list of all the modules,
by category, with a brief description of the purpose of each module and a link
to the author's CPAN directory for downloading.</P
><p class="para">Here is a list of the categories; there are currently 22 categories, plus
one for modules that don't fit anywhere else:</P
><blockquote class="screen"><pre class="screen">02_Perl_Core_Modules
03_Development_Support
04_Operating_System_Interfaces
05_Networking_Devices_Inter_Process
06_Data_Type_Utilities
07_Database_Interfaces
08_User_Interfaces   
09_Interfaces_to_Other_Languages
10_File_Names_Systems_Locking  
11_String_Processing_Language_Text_Process
12_Option_Argument_Parameter_Processing
13_Internationalization_and_Locale     
14_Authentication_Security_Encryption  
15_World_Wide_Web_HTML_HTTP_CGI
16_Server_and_Daemon_Utilities
17_Archiving_and_Compression  
18_Images_Pixmap_Bitmap_Manipulation
19_Mail_and_Usenet_News
20_Control_Flow_Utilities
21_File_Handle_Input_Output
22_Microsoft_Windows_Modules
23_Miscellaneous_Modules
99_Not_In_Modulelist</PRE
></BLOCKQUOTE
><p class="para">If you are in the <em class="emphasis">by-categories</EM
> subdirectory and have selected
an area from which you'd like to download a
module, you'll find a list of the files in the directory. <em class="emphasis">tar</EM
> files
have a <em class="emphasis">.tar.gz</EM
> extension, and README files have a <em class="emphasis">.readme</EM
>
extension. You'll generally find a README file for each module; take a look at
it before you decide to download the file.</P
><p class="para">Here's a sample directory listing from category 15:</P
><blockquote class="screen"><pre class="screen">ANDK                           
CGI-Out-96.081401.readme       
CGI-Out-96.081401.tar.gz       
CGI-Response-0.03.readme       
CGI-Response-0.03.tar.gz       
CGI-modules-2.75.readme        
CGI-modules-2.75.tar.gz        
CGI-modules-2.76.readme        
CGI-modules-2.76.tar.gz   
CGI.pm-2.32.readme        
CGI.pm-2.33.readme        
CGI.pm-2.34.readme        
CGI.pm-2.35.readme
CGI.pm-2.35.tar.gz
CGI.pm-2.36.readme
CGI.pm-2.36.tar.gz
CGI_Imagemap-1.00.readme
CGI_Imagemap-1.00.tar.gz
CGI_Lite-1.62.pm.gz
DOUGM
LDS
MGH
MIKEH
MUIR
SHGUN</PRE
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-692"></A
>You'll notice that multiple versions are sometimes listed&nbsp;- for example,
CGI.pm has versions 2.35 and 2.36 available. Generally this is to
ease the transition to a new version of the module.</P
><p class="para">Select the <em class="emphasis">.readme</EM
> file of the most current archive
and review its
contents carefully. README files often give special instructions about
building the module; they warn you about other modules needed for proper
functioning and if the module can't be built under
certain versions of Perl. If you're satisfied with what you read,
download the file.<a class="indexterm" name="AUTOID-696"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-2-SECT-4.1">2.4.2 Module Installation</A
></H3
><p class="para"><a class="indexterm" name="PNUT-CH-2-IX-INSTALLING-PERL-MODULES"></A
>If you're running the standard distribution of Perl, either on a Unix or
Win32 system, and you want to install a module, this section explains how
to do it.  If you are running the ActiveState Win32 port, see the next
section.</P
><p class="para"><a class="indexterm" name="AUTOID-704"></A
>Before installing modules, you should understand at least a
little about <em class="emphasis">make</EM
>. <em class="emphasis">make</EM
> is a command designed to
automate compilations; it guarantees
that programs are compiled with the correct options and are linked to the
current version of program modules and libraries.  But it's not just
for
programmers&nbsp;- <em class="emphasis">make</EM
> is useful for any situation where there are
dependencies among a group of related files.</P
><p class="para"><a class="indexterm" name="AUTOID-710"></A
><em class="emphasis">make</EM
> uses a file known as a Makefile, which is a text file that
describes the dependencies and contains instructions that 
tell <em class="emphasis">make</EM
> what to do. A Perl programmer who writes a module
creates a file called <em class="emphasis">Makefile.PL</EM
> that comes with the
module when you download it. <em class="emphasis">Makefile.PL</EM
> is a Perl script that uses
another module, ExtUtils::MakeMaker (generally just referred to as
MakeMaker), to generate a Makefile specific to that module on your
system.</P
><p class="para">Before you can actually install the module, you need to decide where it
should go. Modules can be installed either globally, for everyone to use,
or locally, for your own use.
Most system administrators install popular software, including Perl
modules, to be globally available.  In that case, the modules are generally
installed in a branch of the <em class="emphasis">lib</EM
> directory
with the rest of the Perl libraries.</P
><p class="para">If you have root privileges or write access to the locations where
Perl modules are installed on your system, you can proceed to move the
downloaded module file to the correct directory and run <em class="emphasis">gunzip</EM
> and
<em class="emphasis">tar</EM
> to unpack it.  Then <em class="emphasis">cd</EM
> to the module directory and check
any README or INSTALL files, and check the MANIFEST file to be sure 
everything is there.  If all is well, you can then run the following to 
complete the installation:</P
><blockquote class="screen"><pre class="screen">% perl Makefile.PL
% make
% make test
% make install</PRE
></BLOCKQUOTE
><p class="para">It's possible that you'll need to
customize <em class="emphasis">Makefile.PL</EM
> before running it.  If so, see the discussion
of ExtUtils::MakeMaker in <a class="xref" href="ch08_01.htm" title="Standard Modules">Chapter 8</A
>.</P
><p class="para">If you are going to install the module locally (for example, if you
don't have permission to install globally or you want to test it locally
before installing it for general use), you need to pass a PREFIX
argument to Perl when you run <em class="emphasis">Makefile.PL</EM
> to generate the Makefile. This
argument tells MakeMaker to use the directory following PREFIX
as the base directory when installing the module.</P
><p class="para">For example, to install a module in the directory
<em class="emphasis">/home/mydir/Perl/Modules</EM
>, the PREFIX argument would look like this:</P
><blockquote class="screen"><pre class="screen">% perl Makefile.PL PREFIX=/home/mydir/Perl/Modules</PRE
></BLOCKQUOTE
><p class="para">Then follow the remaining steps as above: </P
><blockquote class="screen"><pre class="screen">% make
% make test
% make install</PRE
></BLOCKQUOTE
><p class="para">The module is now available, but when you write Perl code to use the
module, there's another detail to take care of.  Since Perl looks
in system-wide directories as specified in the special array <code class="literal">@INC</CODE
>,
it won't find local modules unless you tell it
where they are. Instead, you'll receive an error message like
the following:</P
><blockquote class="screen"><pre class="screen">Can't locate &lt;ModuleName&gt;.pm in @INC.
BEGIN failed--compilation aborted.</PRE
></BLOCKQUOTE
><p class="para">Thus, if you installed the module in <em class="emphasis">/home/mydir/Perl/Modules</EM
>, you 
need to tell Perl to look in that location with 
the command <code class="literal">use</CODE
> <code class="literal">lib</CODE
> <code class="literal">'</CODE
><code class="replaceable"><i>path</I
></CODE
><code class="literal">'</CODE
>: </P
><blockquote class="screen"><pre class="screen">#!/usr/local/bin/perl -w
use lib '/home/mydir/Perl/Modules';
use ModuleName;</PRE
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-2-SECT-4.2">2.4.3 Installing Modules with ActiveState Perl</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-747"></A
><a class="indexterm" name="AUTOID-750"></A
>Prior to Perl 5.005, ActiveState's Perl for Win32 did not support the
use of MakeMaker. If you are running Perl 5.004 (or
earlier), this prevents you from
installing some modules. Others can be installed manually by making sure all the
files that come in the module distribution are placed in the correct
libraries.  The documentation that comes with the module may help you
determine if you can install it and what you need to do.</P
><p class="para">With 5.005, you can now use MakeMaker to install the modules, or you can
use the Perl Package Manager that comes with ActivePerl. </P
><div class="sect3"><h4 class="sect3"><a class="title" name="PNUT-CH-2-SECT-4.2.1">2.4.3.1 Using MakeMaker</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-757"></A
>To install a module using MakeMaker, follow the procedure described
earlier for installing when you are running the standard distribution,
replacing <em class="emphasis">make</EM
> with <em class="emphasis">nmake</EM
> or <em class="emphasis">dmake</EM
> as appropriate.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="PNUT-CH-2-SECT-4.2.2">2.4.3.2 Using the Perl Package Manager</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-765"></A
><a class="indexterm" name="AUTOID-767"></A
>The Perl Package Manager (PPM) provides a command-line interface for
obtaining and installing Perl modules and extensions. To run PPM, connect
to the site (such as CPAN or the CD that comes with the <em class="emphasis">Perl Resource 
Kit for Win32</EM
>)
that contains the modules you are interested in, and type:</P
><blockquote class="screen"><pre class="screen">perl ppm.pl</PRE
></BLOCKQUOTE
><p class="para">The PPM prompt appears, and you can begin to enter PPM commands. The available commands are:</P
><dl class="variablelist"><dt class="term"><code class="literal">help</CODE
> <em class="emphasis">[command]</EM
></DT
><dd class="listitem"><p class="para">Prints the list of commands and what they do, or help for a particular
command.</P
></DD
><dt class="term"><code class="literal">install</CODE
> <em class="emphasis">packages</EM
></DT
><dd class="listitem"><p class="para">Installs the specified packages.</P
></DD
><dt class="term"><code class="literal">quit</CODE
></DT
><dd class="listitem"><p class="para">Leaves the Perl Package Manager.</P
></DD
><dt class="term"><code class="literal">remove</CODE
> <em class="emphasis">packages</EM
></DT
><dd class="listitem"><p class="para">Removes the specified packages from the system.</P
></DD
><dt class="term"><code class="literal">search</CODE
></DT
><dd class="listitem"><p class="para">Searches for information about available packages.</P
></DD
><dt class="term"><code class="literal">set</CODE
></DT
><dd class="listitem"><p class="para">Sets or displays current options.</P
></DD
><dt class="term"><code class="literal">verify</CODE
></DT
><dd class="listitem"><p class="para">Verifies that your current installation is up-to-date.</P
></DD
></DL
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-2-SECT-4.3">2.4.4 Installing Modules with the CPAN Module</A
></H3
><p class="para"><a class="indexterm" name="PNUT-CH-2-IX-CPAN-COMPREHENSIVE-PERL-ARCHIVE-NETWORK-CPAN.PM-MODULE"></A
>If you are just getting and installing one or a few modules, it's not a
big problem to do it manually.  But if you don't want to deal with doing
it all manually, or if you are maintaining an entire Perl installation,
there is an easier way&nbsp;- you can use the CPAN module. 
The CPAN module (<em class="emphasis">CPAN.pm</EM
>) can be used interactively from the 
command line to 
locate, download, and install Perl modules, or to identify modules
and authors. <em class="emphasis">CPAN.pm</EM
> was designed to automate the installation of Perl
modules; it includes searching capabilities and the ability to
retrieve files from one or more of the mirrored CPAN
sites and unpack them in a dedicated directory.</P
><p class="para">To run the CPAN module interactively, enter:</P
><blockquote class="screen"><pre class="screen">% perl -MCPAN -eshell</PRE
></BLOCKQUOTE
><p class="para">The first time you use the CPAN module, it takes you through a series of
setup questions and writes a file called <em class="emphasis">MyConfig.pm</EM
> in a
subdirectory of your
home directory that defaults to <em class="emphasis">~/.cpan/CPAN/MyConfig.pm</EM
>.
After that, whenever you use the CPAN module for downloading other
modules, it uses the <em class="emphasis">.cpan</EM
> directory as the general build and cache
directory, saved as <code class="literal">cpan_home</CODE
> in the configuration file. If 
ReadLine support is available (i.e., Term::ReadKey and
Term::ReadLine are installed), you can use command history and command
completion as you enter commands. </P
><p class="para">When the module runs and is ready for you to enter commands, you'll see
the prompt:</P
><blockquote class="screen"><pre class="screen">cpan&gt;</PRE
></BLOCKQUOTE
><p class="para">You can then enter <code class="literal">h</CODE
> to get a brief help message, or just start
entering commands.  The commands are all methods in the CPAN::Shell package.
For commands that can operate on modules, bundles, authors, or distributions,
<em class="emphasis">CPAN.pm</EM
> treats arguments containing a slash (<code class="literal">/</CODE
>) as distributions,
arguments beginning with <code class="literal">Bundle::</CODE
> as bundles, and everything else
as modules or authors.</P
><p class="para">The following is a listing of the interactive CPAN modules:
<ul class="nutlist"><li class="term"><a class="nutentry" href="c02_001.htm" title="Reference: ?">?</A
></LI
><li class="term"><a class="nutentry" href="c02_002.htm" title="Reference: !">!</A
></LI
><li class="term"><a class="nutentry" href="c02_003.htm" title="Reference: a">a</A
></LI
><li class="term"><a class="nutentry" href="c02_004.htm" title="Reference: autobundle">autobundle</A
></LI
><li class="term"><a class="nutentry" href="c02_005.htm" title="Reference: b">b</A
></LI
><li class="term"><a class="nutentry" href="c02_006.htm" title="Reference: clean">clean</A
></LI
><li class="term"><a class="nutentry" href="c02_007.htm" title="Reference: d">d</A
></LI
><li class="term"><a class="nutentry" href="c02_008.htm" title="Reference: force">force</A
></LI
><li class="term"><a class="nutentry" href="c02_009.htm" title="Reference: h">h</A
></LI
><li class="term"><a class="nutentry" href="c02_010.htm" title="Reference: i">i</A
></LI
><li class="term"><a class="nutentry" href="c02_011.htm" title="Reference: install">install</A
></LI
><li class="term"><a class="nutentry" href="c02_012.htm" title="Reference: look">look</A
></LI
><li class="term"><a class="nutentry" href="c02_013.htm" title="Reference: m">m</A
></LI
><li class="term"><a class="nutentry" href="c02_014.htm" title="Reference: make">make</A
></LI
><li class="term"><a class="nutentry" href="c02_015.htm" title="Reference: o">o</A
></LI
><li class="term"><a class="nutentry" href="c02_016.htm" title="Reference: q">q</A
></LI
><li class="term"><a class="nutentry" href="c02_017.htm" title="Reference: r">r</A
></LI
><li class="term"><a class="nutentry" href="c02_018.htm" title="Reference: readme">readme</A
></LI
><li class="term"><a class="nutentry" href="c02_019.htm" title="Reference: recompile">recompile</A
></LI
><li class="term"><a class="nutentry" href="c02_020.htm" title="Reference: reload">reload</A
></LI
><li class="term"><a class="nutentry" href="c02_021.htm" title="Reference: test">test</A
></LI
><li class="term"><a class="nutentry" href="c02_022.htm" title="Reference: u">u</A
></LI
></UL
><a class="indexterm" name="AUTOID-1234"></A
><a class="indexterm" name="AUTOID-1235"></A
><a class="indexterm" name="AUTOID-1236"></A
><a class="indexterm" name="AUTOID-1237"></A
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_03.htm#PNUT-CH-2-SECT-3.2" title="2.3 Installing Perl"><img src="../gifs/txtpreva.gif" alt="Previous: 2.3 Installing Perl" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Perl in a Nutshell"><img src="../gifs/txthome.gif" alt="Perl in a Nutshell" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_05.htm#PNUT-CH-2-SECT-5.1" title="2.5 Documentation"><img src="../gifs/txtnexta.gif" alt="Next: 2.5 Documentation" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">2.3 Installing Perl</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">2.5 Documentation</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="../learn/index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="../prog/index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
