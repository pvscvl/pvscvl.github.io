<html><head>
<title>[Chapter 18] Perl/Tk</TITLE>
<meta name="DC.title" content="Perl in a Nutshell"><meta name="DC.creator" content="Ellen Siever, Stephen Spainhour &amp; Nathan Patwardhan"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:58:45Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-286-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part07.htm" title="VII. Perl/Tk"><link rel="prev" href="part07.htm" title="VII. Perl/Tk"><link rel="next" href="ch18_02.htm#PNUT-CH-18-SECT-2.1" title="18.2 Geometry Managers"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Perl in a Nutshell" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,71" href="index.htm" alt="Perl in a Nutshell"><area shape="RECT" coords="467,0,514,18" href="../search/nsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="PART" href="part07.htm" title="VII. Perl/Tk"><img src="../gifs/txtpreva.gif" alt="Previous: VII. Perl/Tk" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 18</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch18_02.htm#PNUT-CH-18-SECT-2.1" title="18.2 Geometry Managers"><img src="../gifs/txtnexta.gif" alt="Next: 18.2 Geometry Managers" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="PNUT-CH-18">18. Perl/Tk</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="SECT1" href="#PNUT-CH-18-SECT-1" title="18.1 Widgets">Widgets</A
><br><a class="SECT1" href="ch18_02.htm#PNUT-CH-18-SECT-2.1" title="18.2 Geometry Managers">Geometry Managers</A
><br><a class="SECT1" href="ch18_03.htm" title="18.3 Common Widget Configuration Options">Common Widget Configuration Options</A
><br><a class="SECT1" href="ch18_04.htm" title="18.4 The Button Widget">The Button Widget</A
><br><a class="SECT1" href="ch18_05.htm" title="18.5 The Checkbutton Widget">The Checkbutton Widget</A
><br><a class="SECT1" href="ch18_06.htm" title="18.6 The Radiobutton Widget">The Radiobutton Widget</A
><br><a class="SECT1" href="ch18_07.htm" title="18.7 The Label Widget">The Label Widget</A
><br><a class="SECT1" href="ch18_08.htm#PNUT-CH-18-SECT-8.2" title="18.8 The Entry Widget">The Entry Widget</A
><br><a class="SECT1" href="ch18_09.htm" title="18.9 The Scrollbar Widget">The Scrollbar Widget</A
><br><a class="SECT1" href="ch18_10.htm#PNUT-CH-18-SECT-10.2" title="18.10 The Listbox Widget">The Listbox Widget</A
><br><a class="SECT1" href="ch18_11.htm#PNUT-CH-18-SECT-11.2" title="18.11 The Text Widget">The Text Widget</A
><br><a class="SECT1" href="ch18_12.htm" title="18.12 The Canvas Widget">The Canvas Widget</A
><br><a class="SECT1" href="ch18_13.htm" title="18.13 The Scale Widget">The Scale Widget</A
><br><a class="SECT1" href="ch18_14.htm#PNUT-CH-18-SECT-14.1" title="18.14 The Menubutton Widget">The Menubutton Widget</A
><br><a class="SECT1" href="ch18_15.htm#PNUT-CH-18-SECT-15.1" title="18.15 The Menu Widget">The Menu Widget</A
><br><a class="SECT1" href="ch18_16.htm" title="18.16 The Optionmenu Widget">The Optionmenu Widget</A
><br><a class="SECT1" href="ch18_17.htm" title="18.17 The Frame Widget">The Frame Widget</A
><br><a class="SECT1" href="ch18_18.htm#PNUT-CH-18-SECT-18.1" title="18.18 The Toplevel Widget">The Toplevel Widget</A
></P
><p></P
></DIV
><p class="para"></P
><p class="para">Perl/Tk is an extension for writing Perl programs
with a Graphical User Interface (GUI) on both Unix and Windows 95/NT.
Tk was originally developed as an extension
to the Tcl language, for use with the X Window System on Unix.
With its port to Perl, Tk gives Perl programmers the same
control over the graphical desktop that Tcl programmers have
taken for granted.<a class="indexterm" name="PNUT-CH-18-IX-TK-EXTENSION-TO-PERL"></A
><a class="indexterm" name="PNUT-CH-18-IX-PERL-TK"></A
></P
><p class="para">The Tk extension makes it easy to draw a window, put widgets
into it (such as buttons, checkboxes, entry fields, menus, etc.)
and have them perform certain actions based on user input.  A 
simple &quot;Hello World&quot; program would look like this:


<blockquote class="screen"><pre class="screen">#!/usr/bin/perl -w
use Tk;
my $mw = MainWindow-&gt;new;
$mw-&gt;Button(-text =&gt; &quot;Hello World!&quot;, -command =&gt;sub{exit})-&gt;pack;
MainLoop;</PRE
></BLOCKQUOTE
>


When you run it, it would look like 
<a class="xref" href="#PNUT-CH-18-FIG-0" title="A simple Perl/Tk program">Figure 18.1</A
>.</P
><h4 class="figure"><a class="title" name="PNUT-CH-18-FIG-0">Figure 18.1: A simple Perl/Tk program</A
></H4
><img class="graphic" src="figs/pns_1801.gif" alt="Figure 18.1"><p class="para">Pushing the &quot;Hello World!&quot; button exits the program, and your 
window disappears.  </P
><p class="para">Let's walk through these few lines of code.
After calling the Perl interpreter, the program calls the Tk module.
Then it proceeds to build a generic, standard window (<code class="literal">MainWindow</CODE
>)
to act as a parent
for any other widgets you create.  Line 4 of the 
program creates a button and displays it using the <code class="literal">pack</CODE
> geometry
manager.
It also gives the button something to do when pushed (in this case,
exit the program).</P
><p class="para"><a class="indexterm" name="AUTOID-35594"></A
>The very last line tells the program to &quot;go do it.&quot;  <code class="literal">MainLoop</CODE
>
starts the event handler for the graphical interface, and the program
draws any windows until it reaches the <code class="literal">MainLoop</CODE
> statement.  
Everything up to that point is preparation; 
until you reach the <code class="literal">MainLoop</CODE
> statement, the program simply
prepares its windows and defines what to do when certain events 
happen (such as a mouse click on the &quot;Hello World!&quot; button).  
Nothing is drawn until the <code class="literal">MainLoop</CODE
> statement is reached.</P
><div class="sect1"><h2 class="sect1"><a class="title" name="PNUT-CH-18-SECT-1">18.1 Widgets</A
></H2
><p class="para"><a class="indexterm" name="PNUT-CH-18-IX-WIDGETS-PERL-TK"></A
><a class="indexterm" name="PNUT-CH-18-IX-TK-EXTENSION-TO-PERL-WIDGETS"></A
><a class="indexterm" name="PNUT-CH-18-IX-PERL-TK-WIDGETS"></A
>Widgets in Perl/Tk are created with <em class="emphasis">widget creation commands</EM
>,
which include <code class="literal">Button</CODE
>, <code class="literal">Canvas</CODE
>, 
<code class="literal">CheckButton</CODE
>, <code class="literal">Entry</CODE
>, <code class="literal">Frame</CODE
>, <code class="literal">Label</CODE
>, <code class="literal">Listbox</CODE
>, <code class="literal">Menu</CODE
>, <code class="literal">Menubutton</CODE
>, <code class="literal">Message</CODE
>,
<code class="literal">Radiobutton</CODE
>, <code class="literal">Scale</CODE
>, <code class="literal">Scrollbar</CODE
>, <code class="literal">Text</CODE
>, and <code class="literal">Toplevel</CODE
>.  </P
><p class="para">Positioning widgets is done with <em class="emphasis">geometry managers</EM
>.
In the &quot;Hello World&quot; example shown earlier, the <code class="literal">pack</CODE
>
command is the geometry manager.  Geometry managers determine
where in the window (or frame) the widget will sit.  We'll talk
more about the Perl/Tk geometry managers later in this chapter.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-18-SECT-1.1">18.1.1 Widget Methods</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-35633"></A
><a class="indexterm" name="AUTOID-35636"></A
><a class="indexterm" name="AUTOID-35639"></A
><a class="indexterm" name="AUTOID-35642"></A
>Widgets can be configured, queried, or manipulated via various <em class="emphasis">widget
methods</EM
>.  For example, all widgets support the <code class="literal">configure</CODE
>
widget method for changing widget
properties after the widget is created.  
In addition, most widgets have specialized
methods associated with them for manipulating the widget
as needed throughout the program.  For example, widgets
that scroll support the <code class="literal">xview</CODE
> and <code class="literal">yview</CODE
> methods
for determining the viewable portion of the content when the
scrollbar is moved.  
The Entry and Text widgets have methods for
inserting and deleting values.  The Canvas widget has a
whole series of methods for drawing shapes and inserting
text into the canvas.  And so on.</P
><p class="para">Widget methods are listed in the discussion of each widget
later in this chapter.  However, since all widgets support
the <code class="literal">configure</CODE
> and <code class="literal">cget</CODE
> methods, we're going to
cover them now.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="PNUT-CH-18-SECT-1.1.1">18.1.1.1 The configure method</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-35655"></A
>The <code class="literal">configure</CODE
> method can be used to 
set and retrieve widget configuration values.
For example, to change the width of a button:


<blockquote class="screen"><pre class="screen">$button-&gt;configure(-width =&gt; 100);</PRE
></BLOCKQUOTE
>


To get the value for a current widget, just supply it without
a value:


<blockquote class="screen"><pre class="screen">$button-&gt;configure(-width);</PRE
></BLOCKQUOTE
>


The result is an array of scalars;  the values you care about
are the last two, which represent the default value and its
current value, respectively.</P
><p class="para">You can also call <code class="literal">configure</CODE
> without any options at all, 
which will give you a listing of all options and their values.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="PNUT-CH-18-SECT-1.1.2">18.1.1.2 The cget method</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-35665"></A
>For simply retrieving the value of an option, <code class="literal">configure</CODE
>
returns more information than you generally want.  The <code class="literal">cget</CODE
>
method returns just the current value.</P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-18-SECT-1.2">18.1.2 Scrollbars</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-35672"></A
><a class="indexterm" name="AUTOID-35674"></A
><a class="indexterm" name="AUTOID-35677"></A
><a class="indexterm" name="AUTOID-35680"></A
>Many widgets have scrollbars associated with them.  Scrollbars
can be added to a widget in two ways: either using an independent Scrollbar
widget or using the <code class="literal">Scrolled</CODE
> method when creating a 
widget.  For simple
scrollbars, the <code class="literal">Scrolled</CODE
> method is much easier and therefore
preferable.  </P
><div class="sect3"><h4 class="sect3"><a class="title" name="PNUT-CH-18-SECT-1.2.1">18.1.2.1 Using the Scrolled method</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-35688"></A
>You use the <code class="literal">Scrolled</CODE
> method to create both the widget and
the scrollbar in a single command.  For example:


<blockquote class="screen"><pre class="screen">$mainwindow-&gt;Scrolled('Entry', -scrollbars =&gt; 'os'
	-textvariable =&gt; \$address)-&gt;pack;</PRE
></BLOCKQUOTE
>


This creates an Entry widget with an &quot;optional&quot; scrollbar on
the bottom.  The first argument to <code class="literal">Scrolled</CODE
> is the type
of widget (in this case, an Entry widget).  Then use the
<code class="literal">-scrollbars</CODE
> option to list the location of the scrollbar
(&quot;s&quot; for the south, or bottom, edge of the widget). Here,  we
specify an &quot;optional&quot; scrollbar with &quot;o&quot;, meaning that the
scrollbar will only appear if needed.</P
><p class="para">Any additional options to the <code class="literal">Scrolled</CODE
> method are taken as 
options to the widget itself.  In this case, we're setting 
the <code class="literal">-textvariable</CODE
> option to the Entry widget.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="PNUT-CH-18-SECT-1.2.2">18.1.2.2 The Scrollbar widget</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-35700"></A
>For more flexibility with a scrollbar, you can use the Scrollbar
widget.  To do so, you need to create the target widget to scroll, set<a class="indexterm" name="AUTOID-35702"></A
><a class="indexterm" name="AUTOID-35705"></A
>
the <code class="literal">-xscrollcommand</CODE
> or <code class="literal">-yscrollcommand</CODE
> option as appropriate,
configure the scrollbar to talk to the widget,
and position the scrollbar and target widget next to one another.
For example:


<blockquote class="screen"><pre class="screen">$scrollbar = $mainwindow-&gt;Scrollbar(-orient =&gt; 'vertical');
$listbox = $mainwindow-&gt;Entry(-yscrollcommand =&gt; ['set' =&gt; $scrollbar]);
$scrollbar-&gt;configure(-command =&gt; ['yview' =&gt; $listbox]);
$scrollbar-&gt;pack(-side =&gt; 'right', -fill =&gt; 'y');
$listbox-&gt;pack(-side =&gt; 'left', -fill =&gt; 'both');</PRE
></BLOCKQUOTE
>


First, we create the scrollbar with vertical orientation (which
is actually the default).
Next, we create the Listbox widget with the <code class="literal">-yscrollcommand</CODE
>
option to define a callback when the widget is scrolled vertically.
The scrollbar is then configured with a callback that says to inform
the Listbox widget when it is clicked vertically.
Finally, the Scrollbar and Listbox widgets are packed side-by-side.
See further discussion of the Scrollbar widget later in this chapter
for more information.</P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-18-SECT-1.3">18.1.3 Callbacks</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-35715"></A
><a class="indexterm" name="AUTOID-35717"></A
><a class="indexterm" name="AUTOID-35720"></A
><a class="indexterm" name="AUTOID-35723"></A
>Many widgets allow you to define a <em class="emphasis">callback</EM
>, which is a 
command to execute when the widget is selected.  For example,
when you press an exit button, the callback might be to a
routine that cleans up and quits the program.  When you click on a
radio button, you might want to change the window to reflect
the new preferences.  </P
><p class="para"><a class="indexterm" name="AUTOID-35728"></A
>Widgets that support callbacks have a <code class="literal">-command</CODE
> option
to provide the callback function.  
In the &quot;Hello World!&quot; example
shown previously in this chapter, the callback is to 
<code class="literal">sub {exit}</CODE
>.  In that example, the callback is called as an
anonymous subroutine.  You could also use a reference to a 
subroutine (e.g., <code class="literal">\&amp;routine</CODE
>).  If you want to provide 
arguments to a subroutine, you can call it as an anonymous list
(e.g., <code class="literal">[ \&amp;routine, $arg, $arg, ... ]</CODE
>).  </P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PNUT-CH-18-SECT-1.4">18.1.4 Colors and Fonts</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-35737"></A
><a class="indexterm" name="AUTOID-35739"></A
><a class="indexterm" name="AUTOID-35741"></A
><a class="indexterm" name="AUTOID-35744"></A
><a class="indexterm" name="AUTOID-35747"></A
></P
><p class="para">Tk was originally created for the X Window System and is
still primarily used in that environment.  For that reason, it
has inherited the font and color scheme used for the X Window System.</P
><p class="para">Colors that can be used with Tk widgets are identified either by
an RGB value or by a name that has been associated with an RGB value.
In general it is easiest to use a color name rather than an
explicit RGB value;  for a listing of the color names that 
are supported, see the <em class="emphasis">rgb.txt</EM
> file in your X distribution 
or use the <em class="emphasis">showrgb</EM
> command.  (Most common color names are
supported, so you can say things like &quot;red,&quot; &quot;pink,&quot; &quot;green,&quot; and
even &quot;chartreuse&quot; with confidence.)</P
><p class="para">Fonts are another matter.  Under the X Window System, fonts 
are named things like
<em class="emphasis">-adobe-helvetica-medium-o-normal--12-120-75-75-p-67-iso8859-1</EM
>.
Wildcards can make the fonts easier to use, but they're still a
mouthful.  For a listing of fonts available for a particular
X server, use the <em class="emphasis">xlsfonts</EM
> command.  There are a few font 
&quot;aliases&quot; that have been defined for your convenience (such as
<code class="literal">fixed</CODE
>, <code class="literal">6x10</CODE
>, <code class="literal">9x15</CODE
>, etc.), and you 
might prefer to just stick to those.</P
><a class="indexterm" name="AUTOID-35760"></A
><a class="indexterm" name="AUTOID-35761"></A
><a class="indexterm" name="AUTOID-35762"></A
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="PART" href="part07.htm" title="VII. Perl/Tk"><img src="../gifs/txtpreva.gif" alt="Previous: VII. Perl/Tk" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Perl in a Nutshell"><img src="../gifs/txthome.gif" alt="Perl in a Nutshell" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch18_02.htm#PNUT-CH-18-SECT-2.1" title="18.2 Geometry Managers"><img src="../gifs/txtnexta.gif" alt="Next: 18.2 Geometry Managers" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">VII. Perl/Tk</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">18.2 Geometry Managers</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="../learn/index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="../prog/index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
