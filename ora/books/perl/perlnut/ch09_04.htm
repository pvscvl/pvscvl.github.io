<html><head>
<title>[Chapter 9] 9.4 CGI Environment Variables</TITLE>
<meta name="DC.title" content="Perl in a Nutshell"><meta name="DC.creator" content="Ellen Siever, Stephen Spainhour &amp; Nathan Patwardhan"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:55:42Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-286-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch09_01.htm" title="9. CGI Overview"><link rel="prev" href="ch09_03.htm" title="9.3 Extra Path Information"><link rel="next" href="ch10_01.htm" title="10. The CGI.pm Module"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Perl in a Nutshell" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,71" href="index.htm" alt="Perl in a Nutshell"><area shape="RECT" coords="467,0,514,18" href="../search/nsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_03.htm" title="9.3 Extra Path Information"><img src="../gifs/txtpreva.gif" alt="Previous: 9.3 Extra Path Information" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch09_01.htm" title="9. CGI Overview">Chapter 9<br>CGI Overview</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch10_01.htm" title="10. The CGI.pm Module"><img src="../gifs/txtnexta.gif" alt="Next: 10. The CGI.pm Module" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="PNUT-CH-SECT-4">9.4 CGI Environment Variables</A
></H2
><p class="para"><a class="indexterm" name="PNUT-CH-9-IX-ENVIRONMENT-VARIABLES-CGI-RELATED"></A
><a class="indexterm" name="PNUT-CH-9-IX-CGI-PROGRAMS-ENVIRONMENT-VARIABLES-FOR"></A
>Most of the information needed by CGI programs is made available
via Unix environment variables. Programs can access this information
as they would any environment variable (via the <code class="literal">%ENV</CODE
>
hash in Perl). 
The table below lists environment variables commonly available 
through CGI. However, since servers occasionally vary on 
the names of environment variables they assign, check with your
own server documentation for more information.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Environment Variable</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Content Returned</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">AUTH_TYPE</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The authentication method used to validate a user. See REMOTE_IDENT <a class="indexterm" name="AUTOID-24179"></A
>
and REMOTE_USER.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CONTENT_LENGTH</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The length of the query data (in bytes or the number of characters)<a class="indexterm" name="AUTOID-24185"></A
>
passed to the CGI program through standard input. </P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CONTENT_TYPE</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The media type of the query data, such as <code class="literal">text/html</CODE
>.<a class="indexterm" name="AUTOID-24192"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">DOCUMENT_ROOT</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The directory from which web documents are served.<a class="indexterm" name="AUTOID-24198"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">GATEWAY_INTERFACE</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The revision of the Common Gateway Interface that the server uses.<a class="indexterm" name="AUTOID-24204"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HTTP_ACCEPT</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
A list of the media types that the client can accept.<a class="indexterm" name="AUTOID-24210"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HTTP_COOKIE</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
A list of cookies defined for that URL.<a class="indexterm" name="AUTOID-24216"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HTTP_FROM</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The email address of the user making the query (many
browsers do not support this variable).<a class="indexterm" name="AUTOID-24222"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HTTP_REFERER</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The URL of the document the client read before accessing
the CGI program.<a class="indexterm" name="AUTOID-24228"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HTTP_USER_AGENT</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The browser the client is using to issue the request.<a class="indexterm" name="AUTOID-24234"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PATH_INFO</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
Extra path information passed to a CGI program.<a class="indexterm" name="AUTOID-24240"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PATH_TRANSLATED</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The translated version of the path given by the
variable PATH_INFO.<a class="indexterm" name="AUTOID-24246"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">QUERY_STRING</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The query information passed to the program. It is appended to 
the URL following a question mark (<code class="literal">?</CODE
>).<a class="indexterm" name="AUTOID-24253"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">REMOTE_ADDR</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The remote IP address from which the user is making the request.<a class="indexterm" name="AUTOID-24259"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">REMOTE_HOST</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The remote hostname from which the user is making the request.<a class="indexterm" name="AUTOID-24265"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">REMOTE_IDENT</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The user making the request.<a class="indexterm" name="AUTOID-24271"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">REMOTE_USER</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The authenticated name of the user making the query.<a class="indexterm" name="AUTOID-24277"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">REQUEST_METHOD</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The method with which the information request was issued (e.g., GET,
POST, HEAD).<a class="indexterm" name="AUTOID-24283"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SCRIPT_NAME</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The virtual path (e.g., <em class="emphasis">/cgi-bin/program.pl</EM
>) of the
script being executed.<a class="indexterm" name="AUTOID-24290"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SERVER_NAME</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The server's hostname or IP address.<a class="indexterm" name="AUTOID-24296"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SERVER_PORT</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The port number of the host on which the server is running.<a class="indexterm" name="AUTOID-24302"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SERVER_PROTOCOL</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The name and revision number of the server protocol.<a class="indexterm" name="AUTOID-24308"></A
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SERVER_SOFTWARE</TD
><td class="entry" rowspan="1" colspan="1"><p class="para"> 
The name and version of the server software that is answering the
client request.<a class="indexterm" name="AUTOID-24314"></A
></P
></TD
></TR
></TBODY
></TABLE
><p class="para">Here's a simple Perl CGI script that uses environment variables
to display various information about the server:

<blockquote class="screen"><pre class="screen">#!/usr/local/bin/perl

print &lt;&lt; EOF
Content-type: text/html

&lt;HTML&gt;
&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;
&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;
&lt;HR&gt;&lt;PRE&gt;
Server Name:        $ENV{'SERVER_NAME'}&lt;BR&gt;
Running on Port:    $ENV{'SERVER_PORT'}&lt;BR&gt;
Server Software:    $ENV{'SERVER_SOFTWARE'}&lt;BR&gt;
Server Protocol:    $ENV{'SERVER_PROTOCOL'}&lt;BR&gt;
CGI Revision:       $ENV{'GATEWAY_INTERFACE'}&lt;BR&gt;
&lt;HR&gt;&lt;/PRE&gt;
&lt;/BODY&gt;&lt;/HTML&gt;</PRE
></BLOCKQUOTE
>

The preceding program outputs five environments as
an HTML document. In Perl, you can access 
the environment variables with the <code class="literal">%ENV</CODE
> hash.
Here's typical output of the program:

<blockquote class="screen"><pre class="screen">&lt;HTML&gt;
&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;
&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;
&lt;HR&gt;&lt;PRE&gt;
Server Name:          www.whatever.com
Running on Port:      80
Server Software:      NCSA/1.4.2
Server Protocol:      HTTP/1.0
CGI Revision:         CGI/1.1
&lt;HR&gt;&lt;/PRE&gt;
&lt;/BODY&gt;&lt;/HTML&gt;</PRE
></BLOCKQUOTE
>
<a class="indexterm" name="AUTOID-24320"></A
><a class="indexterm" name="AUTOID-24321"></A
><a class="indexterm" name="AUTOID-24322"></A
></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_03.htm" title="9.3 Extra Path Information"><img src="../gifs/txtpreva.gif" alt="Previous: 9.3 Extra Path Information" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Perl in a Nutshell"><img src="../gifs/txthome.gif" alt="Perl in a Nutshell" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch10_01.htm" title="10. The CGI.pm Module"><img src="../gifs/txtnexta.gif" alt="Next: 10. The CGI.pm Module" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">9.3 Extra Path Information</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">10. The CGI.pm Module</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="../learn/index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="../prog/index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
