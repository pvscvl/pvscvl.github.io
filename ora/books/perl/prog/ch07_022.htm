<html><head>
<title>[Chapter 7] 7.2.22 ExtUtils::Mksymlists&nbsp;- Write Linker Option Files for Dynamic Extension</TITLE>
<meta name="DC.title" content="Programming Perl"><meta name="DC.creator" content="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T02:02:14Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-149-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch07_02.htm" title="7.2 Library Modules"><link rel="prev" href="ch07_021.htm#AUTOID-21808" title="7.2.21 ExtUtils::Mkbootstrap&nbsp;- Make a Bootstrap File for Use by DynaLoader"><link rel="next" href="ch07_023.htm#AUTOID-21889" title="7.2.23 ExtUtils::MM_OS2&nbsp;- Methods to Override UNIX Behavior in ExtUtils::MakeMaker"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Programming Perl" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Programming Perl"><area shape="RECT" coords="467,0,514,18" href="../search/psrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT2" href="ch07_021.htm#AUTOID-21808" title="7.2.21 ExtUtils::Mkbootstrap&nbsp;- Make a Bootstrap File for Use by DynaLoader"><img src="../gifs/txtpreva.gif" alt="Previous: 7.2.21 ExtUtils::Mkbootstrap&nbsp;- Make a Bootstrap File for Use by DynaLoader" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch07_01.htm" title="7. The Standard Perl Library">Chapter 7<br>The Standard Perl Library</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT2" href="ch07_023.htm#AUTOID-21889" title="7.2.23 ExtUtils::MM_OS2&nbsp;- Methods to Override UNIX Behavior in ExtUtils::MakeMaker"><img src="../gifs/txtnexta.gif" alt="Next: 7.2.23 ExtUtils::MM_OS2&nbsp;- Methods to Override UNIX Behavior in ExtUtils::MakeMaker" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT2"><h3 class="sect2"><a class="title" name="AUTOID-21823">7.2.22 ExtUtils::Mksymlists&nbsp;- Write Linker Option Files for Dynamic Extension</A
></H3
><pre class="programlisting">use ExtUtils::Mksymlists;

Mksymlists(  NAME     =&gt; $name,
             DL_FUNCS =&gt; { $pkg1 =&gt; [$func1, $func2], $pkg2 =&gt; [$func3] },
             DL_VARS  =&gt; [$var1, $var2, $var3]);</PRE
><p class="para"><a class="indexterm" name="AUTOID-21827"></A
><a class="indexterm" name="AUTOID-21829"></A
><code class="literal">ExtUtils::Mksymlists()</CODE
> produces files used by the linker
under some OSes during the creation of shared libraries for dynamic extensions.
It is normally called from a MakeMaker-generated <em class="emphasis">Makefile</EM
>
when the extension is built.  The linker option file is generated by calling the
function <code class="literal">Mksymlists()</CODE
>, which is exported by default from
ExtUtils::Mksymlists.  It takes one argument, a list of key/value pairs, in
which the following keys are recognized:</P
><dl class="variablelist"><dt class="term"><code class="literal">NAME</CODE
></DT
><dd class="listitem"><p class="para">This gives the name of the extension (for example, <code class="literal">Tk::Canvas</CODE
>)
for which
the linker option file will be produced.</P
></DD
><dt class="term"><code class="literal">DL_FUNCS</CODE
></DT
><dd class="listitem"><p class="para">This is identical to the <code class="literal">DL_FUNCS</CODE
> attribute available via MakeMaker,
from which it is usually taken.  Its value is a reference to a hash,
in which each key is the name of a package, and
each value is a reference to an array of function names, which
should be exported by the extension. So, one might say:</P
><pre class="programlisting">DL_FUNCS =&gt; {
     Homer::Iliad   =&gt; [ qw(trojans greeks) ],
     Homer::Odyssey =&gt; [ qw(travelers family suitors) ],
},</PRE
><p class="para">The function names should be identical to those in the
<code class="literal">XSUB</CODE
> code; <code class="literal">Mksymlists()</CODE
> will
alter the names written to the linker option file to match the changes
made by <em class="emphasis">xsubpp</EM
>.  In addition, if none of the
functions in a list begins with the string &quot;<code class="literal">boot_</CODE
>&quot;,
<code class="literal">Mksymlists()</CODE
> will add a bootstrap function for that
package, just as <em class="emphasis">xsubpp</EM
> does.  (If a
<code class="literal">boot_</CODE
><code class="replaceable"><i>pkg</I
></CODE
> function is present
in the list, it is passed through unchanged.)  If
<code class="literal">DL_FUNCS</CODE
> is not specified, it defaults to the
bootstrap function for the extension specified in
<code class="literal">NAME</CODE
>.</P
></DD
><dt class="term"><code class="literal">DL_VARS</CODE
></DT
><dd class="listitem"><p class="para">This is identical to the <code class="literal">DL_VARS</CODE
> attribute available via MakeMaker,
and, like <code class="literal">DL_FUNCS</CODE
>, it is usually specified via MakeMaker.  Its
value is a reference to an array of variable names that should
be exported by the extension.</P
></DD
><dt class="term"><code class="literal">FILE</CODE
></DT
><dd class="listitem"><p class="para">This key can be used to specify the name of the linker option file
(minus the OS-specific extension) if for some reason you do not
want to use the default value, which is the last word of the <code class="literal">NAME</CODE
>
attribute (for example, for <code class="literal">Tk::Canvas</CODE
>,
<code class="literal">FILE</CODE
> defaults to <code class="literal">Canvas</CODE
>).</P
></DD
><dt class="term"><code class="literal">FUNCLIST</CODE
></DT
><dd class="listitem"><p class="para">This provides an alternate means to specify function names to be
exported from the extension.  Its value is a reference to an
array of function names to be exported.  These
names are passed through unaltered to the linker options file.</P
></DD
><dt class="term"><code class="literal">DLBASE</CODE
></DT
><dd class="listitem"><p class="para">This item specifies the name by which the linker knows the
extension, which may be different from the name of the
extension itself (for instance, some linkers add an &quot;_&quot; to the
name of the extension).  If it is not specified, it is derived
from the <code class="literal">NAME</CODE
> attribute.  It is presently used only by OS/2.</P
></DD
></DL
><p class="para">When calling <code class="literal">Mksymlists()</CODE
>, one should always specify the <code class="literal">NAME</CODE
>
attribute.  In most cases, this is all that's necessary.  In
the case of unusual extensions, however, the other attributes
can be used to provide additional information to the linker.</P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT2" href="ch07_021.htm#AUTOID-21808" title="7.2.21 ExtUtils::Mkbootstrap&nbsp;- Make a Bootstrap File for Use by DynaLoader"><img src="../gifs/txtpreva.gif" alt="Previous: 7.2.21 ExtUtils::Mkbootstrap&nbsp;- Make a Bootstrap File for Use by DynaLoader" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Programming Perl"><img src="../gifs/txthome.gif" alt="Programming Perl" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT2" href="ch07_023.htm#AUTOID-21889" title="7.2.23 ExtUtils::MM_OS2&nbsp;- Methods to Override UNIX Behavior in ExtUtils::MakeMaker"><img src="../gifs/txtnexta.gif" alt="Next: 7.2.23 ExtUtils::MM_OS2&nbsp;- Methods to Override UNIX Behavior in ExtUtils::MakeMaker" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">7.2.21 ExtUtils::Mkbootstrap&nbsp;- Make a Bootstrap File for Use by DynaLoader</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">7.2.23 ExtUtils::MM_OS2&nbsp;- Methods to Override UNIX Behavior in ExtUtils::MakeMaker</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="../perlnut/index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="../learn/index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
