<html><head>
<title>[Chapter 2] 2.5 Operators</TITLE>
<meta name="DC.title" content="Programming Perl"><meta name="DC.creator" content="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:39:37Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-149-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" title="2. The Gory Details"><link rel="prev" href="ch02_04.htm#PERL2-CH-2-SECT-4.1.2" title="2.4 Pattern Matching"><link rel="next" href="ch02_06.htm#PERL2-CH-2-SECT-6.5" title="2.6 Statements and Declarations"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Programming Perl" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Programming Perl"><area shape="RECT" coords="467,0,514,18" href="../search/psrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_04.htm#PERL2-CH-2-SECT-4.1.2" title="2.4 Pattern Matching"><img src="../gifs/txtpreva.gif" alt="Previous: 2.4 Pattern Matching" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch02_01.htm" title="2. The Gory Details">Chapter 2<br>The Gory Details</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_06.htm#PERL2-CH-2-SECT-6.5" title="2.6 Statements and Declarations"><img src="../gifs/txtnexta.gif" alt="Next: 2.6 Statements and Declarations" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="PERL2-CH-2-SECT-5">2.5 Operators</A
></H2
><p class="para"><a class="indexterm" name="CH02.OPERATORS"></A
><a class="indexterm" name="AUTOID-4535"></A
><a class="indexterm" name="AUTOID-4538"></A
>The terms of an expression often need to be combined and modified
in various ways, and that's what operators are for.  The tightness
with which operators bind is controlled by the <em class="emphasis">precedence</EM
> of
the operators.
Perl operators have the following associativity and precedence,
listed from highest precedence to lowest.[<a class="footnote" href="#AUTOID-4542">27</A
>]<a class="indexterm" name="AUTOID-4544"></A
><a class="indexterm" name="AUTOID-4546"></A
></P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-4542">[27]</A
> Classic Camel readers will note that we reversed this table from the old
edition.  The higher precedence operators are now higher on the page,
which makes some kind of metaphorical sense.</P
></DIV
></BLOCKQUOTE
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Associativity</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Operators</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1">Terms and list operators (leftward)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">-&gt;</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nonassociative</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">++ --</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Right</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">**</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Right</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">! ~ \</CODE
> and unary <code class="literal">+</CODE
> and <code class="literal">-</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">=~ !~ </CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">* / % x</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">+ - .</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt;&lt; &gt;&gt;</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nonassociative</TD
><td class="entry" rowspan="1" colspan="1">Named unary operators</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nonassociative</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt; &gt; &lt;= &gt;= lt gt le ge</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nonassociative</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">== != &lt;=&gt; eq ne cmp</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&amp;</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">| ^</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&amp;&amp;</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">||</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nonassociative</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">.. ...</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Right</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">?:</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Right</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">= += -= *=</CODE
> and so on</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">, =&gt;</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nonassociative</TD
><td class="entry" rowspan="1" colspan="1">List operators (rightward)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Right</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">not</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">and</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Left</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">or xor</CODE
></TD
></TR
></TBODY
></TABLE
><p class="para">It may seem like there are too many precedence levels.  Well, you're
right, there are.  Fortunately, there are two things going for you here.
First, the precedence levels as they're defined usually follow your
intuition, presuming you're not psychotic.  And second, if you're merely
neurotic, you can always put in extra parentheses to relieve your
anxiety.<a class="indexterm" name="AUTOID-4652"></A
><a class="indexterm" name="AUTOID-4654"></A
></P
><p class="para">Note that any operators borrowed from C keep the same precedence
relationship with each other, even where C's precedence is slightly screwy.
(This makes learning Perl easier for C folks.)</P
><p class="para">In the following sections, these operators are covered in precedence
order.  With very few exceptions, these all operate on scalar values
only, not list values.  We'll mention the exceptions as they come up.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.1">2.5.1 Terms and List Operators (Leftward)</A
></H3
><p class="para"><a class="indexterm" name="CH02.TERMS1"></A
><a class="indexterm" name="CH02.TERMS2"></A
><a class="indexterm" name="AUTOID-4666"></A
>Any <em class="emphasis">term</EM
> is of highest precedence in Perl.  These include variables,
quote and quotelike operators, any expression in parentheses, and any
function whose arguments are parenthesized.  Actually, there aren't really
any functions in this sense, just list operators and unary operators behaving
as functions because you put parentheses around their arguments.
These operators are
all covered in <a class="xref" href="ch03_01.htm" title="Functions">Chapter 3</A
>.</P
><p class="para">Now, listen carefully.  Here are a couple of rules that are very important
and simplify things greatly, but may occasionally produce counterintuitive
results for the unwary.  If any list operator (such as <a class="xref" href="ch03_110.htm#PERL2-CMD-PRINT" title="print"><b class="xref.cmd">print</B
></A
>) or any
named unary operator (such as <a class="xref" href="ch03_011.htm#PERL2-CMD-CHDIR" title="chdir"><b class="xref.cmd">chdir</B
></A
>) is followed by a left parenthesis as
the next token on the same line,[<a class="footnote" href="#AUTOID-4673">28</A
>]
the operator and its arguments within parentheses are taken to be of
highest precedence, just like a normal function call.  The rule is: If
it <em class="emphasis">looks</EM
> like a function call, it is a function call.
You can
make it look like a non-function by prefixing the arguments with a unary
plus, which does absolutely nothing, semantically speaking&nbsp;- it doesn't
even convert the argument to numeric.  </P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-4673">[28]</A
> And we nearly had you convinced Perl was a free-form language.</P
></DIV
></BLOCKQUOTE
><p class="para">For example, since || has lower
precedence than <a class="xref" href="ch03_011.htm#PERL2-CMD-CHDIR" title="chdir"><b class="xref.cmd">chdir</B
></A
>, we get:<a class="indexterm" name="AUTOID-4678"></A
></P
><p class="para"><pre class="programlisting">chdir $foo    || die;       # (chdir $foo) || die
chdir($foo)   || die;       # (chdir $foo) || die
chdir ($foo)  || die;       # (chdir $foo) || die
chdir +($foo) || die;       # (chdir $foo) || die</PRE
></P
><p class="para">but, because <code class="literal">*</CODE
> has higher precedence than <a class="xref" href="ch03_011.htm#PERL2-CMD-CHDIR" title="chdir"><b class="xref.cmd">chdir</B
></A
>, we get:</P
><p class="para"><pre class="programlisting">chdir $foo * 20;            # chdir ($foo * 20)
chdir($foo) * 20;           # (chdir $foo) * 20
chdir ($foo) * 20;          # (chdir $foo) * 20
chdir +($foo) * 20;         # chdir ($foo * 20)</PRE
></P
><p class="para">Likewise for numeric operators:</P
><p class="para"><pre class="programlisting">rand 10 * 20;               # rand (10 * 20)
rand(10) * 20;              # (rand 10) * 20
rand (10) * 20;             # (rand 10) * 20
rand +(10) * 20;            # rand (10 * 20)</PRE
></P
><p class="para">In the absence of parentheses, the precedence of list operators such
as <a class="xref" href="ch03_110.htm#PERL2-CMD-PRINT" title="print"><b class="xref.cmd">print</B
></A
>, <a class="xref" href="ch03_153.htm#PERL2-CMD-SORT" title="sort"><b class="xref.cmd">sort</B
></A
>, or <a class="xref" href="ch03_012.htm#PERL2-CMD-CHMOD" title="chmod"><b class="xref.cmd">chmod</B
></A
> is
either very high or very low depending on whether you look at the left
side of the operator or the right side of it.  (That's what the
&quot;Leftward&quot; is doing in the title of this section.)  For example, in:</P
><p class="para"><pre class="programlisting">@ary = (1, 3, sort 4, 2);
print @ary;         # prints 1324</PRE
></P
><p class="para">the commas on the right of the <b class="emphasis.bold">sort</B
> are evaluated before the <b class="emphasis.bold">sort</B
>, but
the commas on the left are evaluated after.  In other words, a list
operator tends to gobble up all the arguments that follow it, and
then act like a simple term with regard to the preceding expression.
Note that you have to be careful with parentheses:</P
><p class="para"><pre class="programlisting"># These evaluate exit before doing the print:
print($foo, exit);  # Obviously not what you want.
print $foo, exit;   # Nor is this.

# These do the print before evaluating exit:
(print $foo), exit; # This is what you want.
print($foo), exit;  # Or this.
print ($foo), exit; # Or even this.</PRE
></P
><p class="para">Also note that:</P
><p class="para"><pre class="programlisting">print ($foo &amp; 255) + 1, &quot;\n&quot;;   # prints ($foo &amp; 255)</PRE
></P
><p class="para">probably doesn't do what you expect at first glance.  Fortunately,
mistakes of this nature generally produce warnings like &quot;<code class="literal">Useless use
of addition in a void context</CODE
>&quot; when you use the <b class="emphasis.bold">-w</B
> command-line switch.</P
><p class="para">Also parsed as terms are the <code class="literal">do {}</CODE
> and <code class="literal">eval {}</CODE
> constructs,
as well as subroutine and method calls, the anonymous array and hash
composers <code class="literal">[]</CODE
> and <code class="literal">{}</CODE
>, and the anonymous subroutine
composer <code class="literal">sub {}</CODE
>.</P
><a class="indexterm" name="AUTOID-4713"></A
><a class="indexterm" name="AUTOID-4714"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.2">2.5.2 The Arrow Operator</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4718"></A
><a class="indexterm" name="AUTOID-4721"></A
><a class="indexterm" name="AUTOID-4723"></A
>Just as in C and C++, <code class="literal">-&gt;</CODE
> is an infix dereference operator.  If the
right side is either a <code class="literal">[...]</CODE
> or <code class="literal">{...}</CODE
> subscript, then the left
side must be either a hard or symbolic reference to an array or hash (or
a location capable of holding a hard reference, if it's an lvalue
(assignable)).  More on this in <a class="xref" href="ch04_01.htm" title="References and Nested Data Structures">Chapter 4</A
>.</P
><p class="para">Otherwise, the right side must be a method name or a simple scalar
variable containing the method name, and the value of the left side must
either be an object (a blessed reference) or a class name (that is, a
package name).  See <a class="xref" href="ch05_01.htm" title="Packages, Modules, and Object Classes">Chapter 5</A
>.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.3">2.5.3 Autoincrement and Autodecrement</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4735"></A
><a class="indexterm" name="AUTOID-4737"></A
><a class="indexterm" name="AUTOID-4739"></A
><a class="indexterm" name="AUTOID-4742"></A
>The <code class="literal">++</CODE
> and <code class="literal">--</CODE
> operators work as in C.
That is, if placed before a variable, they
increment or decrement the variable before returning the value, and if
placed after, they increment or decrement the variable after returning the
value.  For example, <code class="literal">$a++</CODE
> increments the value of scalar variable
<code class="literal">$a</CODE
>, returning the value <em class="emphasis">before</EM
> it performs the increment.
Similarly, <code class="literal">--$b{(/(\w+)/)[0]}</CODE
> decrements the element of the
hash <code class="literal">%b</CODE
> indexed by the first &quot;word&quot; in the default search
variable (<b class="emphasis.bold">$_</B
>) and returns the value <em class="emphasis">after</EM
> the decrement.[<a class="footnote" href="#AUTOID-4754">29</A
>]</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-4754">[29]</A
> OK, so that wasn't exactly fair.  We just wanted to make sure you were
paying attention.  Here's how that expression works.  First the pattern
match finds the first word in <b class="emphasis.bold">$_</B
> using the regular expression
<code class="literal">\w+</CODE
>.  The parentheses around that causes the word to be returned as
a single-element list value, because the pattern match is in a list
context.  The list context is supplied by the list slice operator,
<code class="literal">(...)[0]</CODE
>, which returns the first (and only) element of the list.
That value is then used as the key for the hash, and the hash entry (value) is
decremented and returned.  In general, when confronted with a complex
expression, analyze it from the inside out to see what order things happen in.</P
></DIV
></BLOCKQUOTE
><p class="para">The autoincrement operator has a little extra built-in magic to it.  If
you increment a variable that is numeric, or that has ever been used in
a numeric context, you get a normal increment.  If, however, the
variable has only been used in string contexts since it was set, and
has a value that is not null and matches the pattern
<code class="literal">/^[a-zA-Z]*[0-9]*$/</CODE
>, the increment is done as a string, preserving each
character within its range, with carry:</P
><p class="para"><pre class="programlisting">print ++($foo = '99');      # prints '100'
print ++($foo = 'a0');      # prints 'a1'
print ++($foo = 'Az');      # prints 'Ba'
print ++($foo = 'zz');      # prints 'aaa'</PRE
></P
><p class="para">The autodecrement operator, however, is not magical.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.4">2.5.4 Exponentiation</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4767"></A
><a class="indexterm" name="AUTOID-4770"></A
><a class="indexterm" name="AUTOID-4773"></A
>Binary <code class="literal">**</CODE
> is the exponentiation operator.  Note that it binds even
more tightly than unary minus, so <code class="literal">-2**4</CODE
> is <code class="literal">-(2**4)</CODE
>, not
<code class="literal">(-2)**4</CODE
>.  The operator is implemented using C's <em class="emphasis">pow</EM
>(3) function,
which works with doubles internally.  It calculates using
logarithms, which means that it works with fractional powers, but you
sometimes get results that aren't as exact as a straight multiplication
would produce.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.5">2.5.5 Ideographic Unary Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4783"></A
><a class="indexterm" name="AUTOID-4786"></A
>Most unary operators just have names (see &quot;Named Unary and File Test Operators&quot;
below), but some operators are deemed important enough to merit their
own special symbolic representation.  Most of these operators seem to
have something to do with negation.  Blame the mathematicians.</P
><p class="para"><a class="indexterm" name="AUTOID-4789"></A
><a class="indexterm" name="AUTOID-4792"></A
><a class="indexterm" name="AUTOID-4795"></A
><a class="indexterm" name="AUTOID-4797"></A
>Unary ! performs logical negation, that is, &quot;not&quot;.  See also <b class="emphasis.bold">not</B
>
for a lower precedence version of this.  The value of a negated
operation is 1 if the operand is false (numeric 0, string <code class="literal">&quot;0&quot;</CODE
>, null
string, or undefined); otherwise, the value is that of the null string.</P
><p class="para"><a class="indexterm" name="AUTOID-4803"></A
><a class="indexterm" name="AUTOID-4806"></A
><a class="indexterm" name="AUTOID-4808"></A
><a class="indexterm" name="AUTOID-4811"></A
>Unary <code class="literal">-</CODE
> performs arithmetic negation if the operand is numeric.  If
the operand is an identifier, a string consisting of a minus sign
concatenated with the identifier is returned.  Otherwise, if the string
starts with a plus or minus, a string starting with the opposite sign
is returned.  One effect of these rules is that <code class="literal">-bareword</CODE
> is
equivalent to <code class="literal">&quot;-bareword&quot;</CODE
>.  This is most useful for Tk and CGI programmers.</P
><p class="para"><a class="indexterm" name="AUTOID-4817"></A
><a class="indexterm" name="AUTOID-4820"></A
><a class="indexterm" name="AUTOID-4823"></A
>Unary <code class="literal">~</CODE
> performs bitwise negation, that is, 1's complement.
For example, on a 32-bit machine, <code class="literal">~123</CODE
> is <code class="literal">4294967172</CODE
>.  But you knew
that already.</P
><p class="para">(What you perhaps didn't know is that if the argument to <code class="literal">~</CODE
> happens to
be a string instead of a number, a string of identical length is
returned, but with all the bits of the string complemented.  This is
a fast way to flip a lot of bits all at once.  See also the bitwise
logical operators, which also have stringish variants.)</P
><p class="para"><a class="indexterm" name="AUTOID-4832"></A
>Unary <code class="literal">+</CODE
> has no semantic effect whatsoever, even on strings.  It is
syntactically useful for separating a function name from a parenthesized
expression that would otherwise be interpreted as the complete list of
function arguments.  (See examples above under the section &quot;Terms
and List
Operators&quot;.)</P
><p class="para"><a class="indexterm" name="AUTOID-4837"></A
>Unary <code class="literal">\</CODE
> creates a reference to whatever follows it (see <a class="xref" href="ch04_01.htm" title="References and Nested Data Structures">Chapter 4</A
>).
Do not confuse this behavior with the behavior of backslash within a
string, although both forms do convey the notion of protecting the next
thing from interpretation.  This resemblance is not entirely accidental.</P
><p class="para">The <code class="literal">\</CODE
> operator may also be used on a parenthesized list value in a list
context, in which case it returns references to each element of the list.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.6">2.5.6 Binding Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4847"></A
><a class="indexterm" name="AUTOID-4850"></A
><a class="indexterm" name="AUTOID-4853"></A
><a class="indexterm" name="AUTOID-4856"></A
>Binary <code class="literal">=~</CODE
> binds a scalar expression to a pattern match, substitution,
or translation.  These operations search or modify the string <b class="emphasis.bold">$_</B
> by
default.  The binding operator makes those operations work on some other
string instead.  The argument on the right is the search pattern, substitution,
or translation.  The left argument is what is supposed to be searched,
substituted, or translated instead of the default <b class="emphasis.bold">$_</B
>.  The return
value indicates the success of the operation.  If the right argument is
an expression rather than a search pattern, substitution, or
translation, it is interpreted as a search pattern at run-time.  That
is, <code class="literal">$_ =~ $pat</CODE
> is equivalent to <code class="literal">$_ =~ /$pat/</CODE
>.  This is less
efficient than an explicit search, since the pattern must be compiled
every time the expression is evaluated.  (But <code class="literal">/$pat/o</CODE
> doesn't
recompile it because of the <b class="emphasis.bold">/o</B
> modifier.)</P
><p class="para"><a class="indexterm" name="AUTOID-4866"></A
><a class="indexterm" name="AUTOID-4869"></A
><a class="indexterm" name="AUTOID-4872"></A
>Binary <code class="literal">!~</CODE
> is just like <code class="literal">=~</CODE
> except the return value is negated in
the logical sense.  The following expressions are functionally equivalent:</P
><p class="para"><pre class="programlisting">$string !~ /pattern/
not $string =~ /pattern/</PRE
></P
><p class="para">We said that the return value indicates success, but there are many
kinds of success.  Substitutions return the number of successful
substitutions, as do translations.  (In fact, the translation operator
is often used to count characters.)  Since any non-zero result is true,
it all works out.  The most spectacular kind of true value is a list
value: in a list context, pattern matches can return substrings matched
by the parentheses in the pattern.  But again, according to the rules of
list assignment, the list assignment itself will return true if anything
matched and was assigned, and false otherwise.  So you sometimes see
things like:</P
><p class="para"><pre class="programlisting">if ( ($k,$v) = $string =~ m/(\w+)=(\w*)/ ) {
    print &quot;KEY $k VALUE $v\n&quot;;
}</PRE
></P
><p class="para">Let's pick that apart.  The <code class="literal">=~</CODE
> binds <code class="literal">$string</CODE
> to the
pattern match on the right, which is scanning for occurrences of things
that look like <code class="replaceable"><i>KEY=VALUE</I
></CODE
> in your string.  It's in a list context because
it's on the right side of a list assignment.  If it matches, it
does a list assignment to <code class="literal">$k</CODE
> and <code class="literal">$v</CODE
>.  The list
assignment itself is in a scalar context, so it returns <code class="literal">2</CODE
>, the number of
values on the right side of the assignment.  And <code class="literal">2</CODE
> happens to be true,
since our scalar context is also a Boolean context.  When the match
fails, no values are assigned, which returns 0, which is false.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.7">2.5.7 Multiplicative Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4892"></A
><a class="indexterm" name="AUTOID-4894"></A
><a class="indexterm" name="AUTOID-4897"></A
><a class="indexterm" name="AUTOID-4900"></A
>Perl provides the C-like operators <code class="literal">*</CODE
> (multiply),
<code class="literal">/</CODE
> (divide),
and <code class="literal">%</CODE
> (modulus).
The <code class="literal">*</CODE
> and <code class="literal">/</CODE
> work exactly as you might expect, multiplying or
dividing their two operands.  Division is done in floating-point,
unless you've used the integer library module.</P
><p class="para"><a class="indexterm" name="AUTOID-4909"></A
><a class="indexterm" name="AUTOID-4912"></A
>The <code class="literal">%</CODE
> operator converts its operands to integers before finding the
remainder according to integer division.  For the same operation in
floating-point, you may prefer to use the <code class="literal">fmod()</CODE
> function from the
POSIX module (see <a class="xref" href="ch07_01.htm" title="The Standard Perl Library">Chapter 7</A
>).</P
><p class="para"><a class="indexterm" name="AUTOID-4918"></A
><a class="indexterm" name="AUTOID-4920"></A
><a class="indexterm" name="AUTOID-4923"></A
><a class="indexterm" name="AUTOID-4926"></A
>Binary <b class="emphasis.bold">x</B
> is the repetition operator.  In scalar context, it
returns a concatenated string consisting of the left operand repeated
the number of times specified by the right operand.</P
><p class="para"><pre class="programlisting">print '-' x 80;             # print row of dashes

print &quot;\t&quot; x ($tab/8), ' ' x ($tab%8);      # tab over</PRE
></P
><p class="para">In list context, if the left operand is a list in parentheses, the <b class="emphasis.bold">x</B
>
works as a list replicator rather than a string replicator.  This is
useful for initializing all the elements of an array of indeterminate
length to the same value:</P
><p class="para"><pre class="programlisting">@ones = (1) x 80;           # a list of 80 1's
@ones = (5) x @ones;        # set all elements to 5</PRE
></P
><p class="para"><a class="indexterm" name="AUTOID-4936"></A
><a class="indexterm" name="AUTOID-4939"></A
><a class="indexterm" name="AUTOID-4942"></A
>Similarly, you can also use <b class="emphasis.bold">x</B
> to initialize array and hash slices:</P
><p class="para"><pre class="programlisting">@keys = qw(perls before swine);
@hash{@keys} = (&quot;&quot;) x @keys;</PRE
></P
><p class="para">If this mystifies you, note that <code class="literal">@keys</CODE
> is being
used both as a list on the left side of the assignment, and as a scalar
value (returning the array length) on the right side of the assignment.
The above has the same effect on <code class="literal">%hash</CODE
> as:</P
><p class="para"><pre class="programlisting">$hash{perls}  = &quot;&quot;;
$hash{before} = &quot;&quot;;
$hash{swine}  = &quot;&quot;;</PRE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.8">2.5.8 Additive Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4956"></A
><a class="indexterm" name="AUTOID-4958"></A
><a class="indexterm" name="AUTOID-4961"></A
><a class="indexterm" name="AUTOID-4964"></A
>Strangely enough, Perl also has the customary <code class="literal">+</CODE
> (addition) and <code class="literal">-</CODE
>
(subtraction) operators.  Both operators convert their arguments
from strings to numeric values if necessary, and return a numeric result.</P
><p class="para"><a class="indexterm" name="AUTOID-4970"></A
><a class="indexterm" name="AUTOID-4973"></A
><a class="indexterm" name="AUTOID-4975"></A
>Additionally, Perl provides a string concatenation operator &quot;<code class="literal">.</CODE
>&quot;.  For
example:</P
><pre class="programlisting">$almost = &quot;Fred&quot; . &quot;Flintstone&quot;;    # returns FredFlintstone</PRE
><p class="para">Note that Perl does not place a space between the strings being
concatenated.  If you want the space, or if you have more than two
strings to concatenate, you can use the <a class="xref" href="ch03_078.htm#PERL2-CMD-JOIN" title="join"><b class="xref.cmd">join</B
></A
> operator, described in
<a class="xref" href="ch03_01.htm" title="Functions">Chapter 3</A
>.  Most often, though, people do their
concatenation implicitly inside a double-quoted string:</P
><p class="para"><pre class="programlisting">$fullname = &quot;$firstname $lastname&quot;;</PRE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.9">2.5.9 Shift Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4988"></A
><a class="indexterm" name="AUTOID-4990"></A
><a class="indexterm" name="AUTOID-4992"></A
><a class="indexterm" name="AUTOID-4995"></A
><a class="indexterm" name="AUTOID-4998"></A
><a class="indexterm" name="AUTOID-5000"></A
><a class="indexterm" name="AUTOID-5003"></A
><a class="indexterm" name="AUTOID-5005"></A
><a class="indexterm" name="AUTOID-5008"></A
>The bit-shift operators (<code class="literal">&lt;&lt;</CODE
> and <code class="literal">&gt;&gt;</CODE
>) return the value of the
left argument shifted to the left (<code class="literal">&lt;&lt;</CODE
>) or to the right
(<code class="literal">&gt;&gt;</CODE
>) by the number of
bits specified by the right argument.  The arguments should be integers.
For example:</P
><p class="para"><pre class="programlisting">1 &lt;&lt; 4;     # returns 16
32 &gt;&gt; 4;    # returns 2</PRE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.10">2.5.10 Named Unary and File Test Operators</A
></H3
><p class="para"><a class="indexterm" name="CH02.UNARY1"></A
><a class="indexterm" name="CH02.UNARY2"></A
><a class="indexterm" name="CH02.UNARY3"></A
>Some of &quot;functions&quot; described in <a class="xref" href="ch03_01.htm" title="Functions">Chapter 3</A
> are really unary operators,
including:</P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-X (file tests)</TD
><td class="entry" rowspan="1" colspan="1">gethostbyname</TD
><td class="entry" rowspan="1" colspan="1">localtime</TD
><td class="entry" rowspan="1" colspan="1">rmdir</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">alarm</TD
><td class="entry" rowspan="1" colspan="1">getnetbyname</TD
><td class="entry" rowspan="1" colspan="1">log</TD
><td class="entry" rowspan="1" colspan="1">scalar</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">caller</TD
><td class="entry" rowspan="1" colspan="1">getpgrp</TD
><td class="entry" rowspan="1" colspan="1">lstat</TD
><td class="entry" rowspan="1" colspan="1">sin</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">chdir</TD
><td class="entry" rowspan="1" colspan="1">getprotobyname</TD
><td class="entry" rowspan="1" colspan="1">my</TD
><td class="entry" rowspan="1" colspan="1">sleep</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">chroot</TD
><td class="entry" rowspan="1" colspan="1">glob</TD
><td class="entry" rowspan="1" colspan="1">oct</TD
><td class="entry" rowspan="1" colspan="1">sqrt</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">cos</TD
><td class="entry" rowspan="1" colspan="1">gmtime</TD
><td class="entry" rowspan="1" colspan="1">ord</TD
><td class="entry" rowspan="1" colspan="1">srand</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">defined</TD
><td class="entry" rowspan="1" colspan="1">goto</TD
><td class="entry" rowspan="1" colspan="1">quotemeta</TD
><td class="entry" rowspan="1" colspan="1">stat</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">delete</TD
><td class="entry" rowspan="1" colspan="1">hex</TD
><td class="entry" rowspan="1" colspan="1">rand</TD
><td class="entry" rowspan="1" colspan="1">uc</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">do</TD
><td class="entry" rowspan="1" colspan="1">int</TD
><td class="entry" rowspan="1" colspan="1">readlink</TD
><td class="entry" rowspan="1" colspan="1">ucfirst</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">eval</TD
><td class="entry" rowspan="1" colspan="1">lc</TD
><td class="entry" rowspan="1" colspan="1">ref</TD
><td class="entry" rowspan="1" colspan="1">umask</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">exists</TD
><td class="entry" rowspan="1" colspan="1">lcfirst</TD
><td class="entry" rowspan="1" colspan="1">require</TD
><td class="entry" rowspan="1" colspan="1">undef</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">exit</TD
><td class="entry" rowspan="1" colspan="1">length</TD
><td class="entry" rowspan="1" colspan="1">reset</TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">exp</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">return</TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
></TBODY
></TABLE
><p class="para">These are all unary operators, with a higher precedence than some of the
other binary operators.  For example:</P
><pre class="programlisting">sleep 4 | 3;</PRE
><p class="para">does not sleep for 7 seconds; it sleeps for 4 seconds, and then takes the
return value of <a class="xref" href="ch03_150.htm#PERL2-CMD-SLEEP" title="sleep"><b class="xref.cmd">sleep</B
></A
> (typically zero) and ORs that with 3, as if
the expression were parenthesized as:</P
><p class="para"><pre class="programlisting">(sleep 4) | 3;</PRE
></P
><p class="para">Compare this with:</P
><p class="para"><pre class="programlisting">print 4 | 3;</PRE
></P
><p class="para">which <em class="emphasis">does</EM
> take the value of 4 ORed with 3 before printing it (7 in
this case), as if it were written:</P
><p class="para"><pre class="programlisting">print (4 | 3);</PRE
></P
><p class="para">This is because <a class="xref" href="ch03_110.htm#PERL2-CMD-PRINT" title="print"><b class="xref.cmd">print</B
></A
> is a list operator, not a simple unary
operator.  Once you've learned which operators are list operators, you'll
have no trouble telling them apart.  When in doubt, you can always use
parentheses to turn a named unary operator into a function.  Remember, if it
looks like a function, it is a function.</P
><p class="para">Another funny thing about named unary operators is that many of them
default to <b class="emphasis.bold">$_</B
> if you don't supply an argument.  However, if the
thing following the named unary operator looks like it might be the
start of an argument, Perl will get confused.  When the next character in
your program is one of the following characters, the Perl tokener returns
different token types depending on whether a term or operator is expected:<a class="indexterm" name="AUTOID-5117"></A
><a class="indexterm" name="AUTOID-5119"></A
><a class="indexterm" name="AUTOID-5121"></A
><a class="indexterm" name="AUTOID-5123"></A
><a class="indexterm" name="AUTOID-5125"></A
><a class="indexterm" name="AUTOID-5127"></A
><a class="indexterm" name="AUTOID-5129"></A
><a class="indexterm" name="AUTOID-5131"></A
></P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Char</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Operator</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Term</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">+</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Addition</TD
><td class="entry" rowspan="1" colspan="1">Unary plus</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Subtraction</TD
><td class="entry" rowspan="1" colspan="1">Unary minus</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">*</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Multiplication</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">*typeglob</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">/</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Division</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">/pattern/</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt;</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Less than, left shift</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt;HANDLE&gt;, &lt;&lt;END</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">.</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Concatenation</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">.3333</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">?</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">?:</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">?pattern?</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">%</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Modulo</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">%assoc</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&amp;</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&amp;, &amp;&amp;</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">&amp;subroutine</CODE
></TD
></TR
></TBODY
></TABLE
><p class="para">So a typical boo-boo is:</P
><p class="para"><pre class="programlisting">next if length &lt; 80;</PRE
></P
><p class="para">in which the <code class="literal">&lt;</CODE
> looks to the parser like the beginning of the
<code class="literal">&lt;&gt;</CODE
> input symbol (a term) instead of the &quot;less than&quot; (an operator) you
were thinking of.  There's really no way to fix this, and still keep Perl
pathologically eclectic.  If you're so incredibly lazy that you cannot
bring yourself to type the two characters <b class="emphasis.bold">$_</B
>, then say one of these
instead:</P
><p class="para"><pre class="programlisting">next if length() &lt; 80;
next if (length) &lt; 80;
next if 80 &gt; length;
next unless length &gt;= 80;</PRE
></P
><p class="para"><a class="indexterm" name="AUTOID-5205"></A
>A file test operator is a unary operator that takes one argument, either a
filename or a filehandle, and tests the associated file to see if something
is true about it.  If the argument is omitted, it tests <b class="emphasis.bold">$_</B
>, except for
<code class="literal">-t</CODE
>, which tests <code class="literal">STDIN</CODE
>.  Unless otherwise documented, it returns
<code class="literal">1</CODE
> for true and <code class="literal">&quot;&quot;</CODE
> for false, or the undefined
value if the file doesn't exist.  The operator may be any of the following:<a class="indexterm" name="AUTOID-5212"></A
><a class="indexterm" name="AUTOID-5214"></A
><a class="indexterm" name="AUTOID-5216"></A
><a class="indexterm" name="AUTOID-5218"></A
><a class="indexterm" name="AUTOID-5220"></A
><a class="indexterm" name="AUTOID-5222"></A
><a class="indexterm" name="AUTOID-5224"></A
><a class="indexterm" name="AUTOID-5226"></A
><a class="indexterm" name="AUTOID-5228"></A
><a class="indexterm" name="AUTOID-5230"></A
><a class="indexterm" name="AUTOID-5232"></A
><a class="indexterm" name="AUTOID-5234"></A
><a class="indexterm" name="AUTOID-5236"></A
><a class="indexterm" name="AUTOID-5238"></A
><a class="indexterm" name="AUTOID-5240"></A
><a class="indexterm" name="AUTOID-5242"></A
><a class="indexterm" name="AUTOID-5244"></A
><a class="indexterm" name="AUTOID-5246"></A
><a class="indexterm" name="AUTOID-5248"></A
><a class="indexterm" name="AUTOID-5250"></A
><a class="indexterm" name="AUTOID-5252"></A
><a class="indexterm" name="AUTOID-5254"></A
></P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Operator</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Meaning</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-r</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is readable by effective uid/gid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-w</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is writable by effective uid/gid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-x</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is executable by effective uid/gid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-o</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is owned by effective uid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-R</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is readable by real uid/gid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-W</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is writable by real uid/gid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-X</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is executable by real uid/gid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-O</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is owned by real uid.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-e</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File exists.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-z</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File has zero size.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-s</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File has non-zero size (returns size).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-f</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a plain file.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-d</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a directory.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-l</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a symbolic link.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-p</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a named pipe (FIFO).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-S</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a socket.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-b</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a block special file.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-c</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a character special file.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-t</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Filehandle is opened to a tty.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-u</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File has setuid bit set.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-g</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File has setgid bit set.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-k</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File has sticky bit set.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-T</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a text file.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-B</CODE
></TD
><td class="entry" rowspan="1" colspan="1">File is a binary file (opposite of <code class="literal">-T</CODE
>).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-M</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Age of file (at startup) in days since modification.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-A</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Age of file (at startup) in days since last access.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-C</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Age of file (at startup) in days since inode change.</TD
></TR
></TBODY
></TABLE
><p class="para">The interpretation of the file permission operators
<code class="literal">-r</CODE
>, <code class="literal">-R</CODE
>, <code class="literal">-w</CODE
>,
<code class="literal">-W</CODE
>, <code class="literal">-x</CODE
>, and <code class="literal">-X</CODE
>
is based solely on the mode of the file and the user and group IDs of
the user.  There may be other reasons you can't actually read, write,
or execute the file, such as Andrew File System (AFS) access control lists.  Also note that
for the superuser, <code class="literal">-r</CODE
>, <code class="literal">-R</CODE
>,
<code class="literal">-w</CODE
>, and <code class="literal">-W</CODE
> always return 1, and
<code class="literal">-x</CODE
>, and <code class="literal">-X</CODE
> return 1 if any
execute bit is set in the mode.  Scripts run by the superuser may thus
need to do a <a class="xref" href="ch03_159.htm#PERL2-CMD-STAT" title="stat"><b class="xref.cmd">stat</B
></A
> in order to determine
the actual mode of the file, or temporarily set the uid to something
else. Example:</P
><p class="para"><pre class="programlisting">while (&lt;&gt;) {
    chomp;
    next unless -f $_;      # ignore &quot;special&quot; files
    ...
}</PRE
></P
><p class="para">Note that <code class="literal">-s/a/b/</CODE
> does not do a negated substitution.  Saying
<code class="literal">-exp($foo)</CODE
> still works as expected, however&nbsp;- only single letters
following a minus are interpreted as file tests.</P
><p class="para"><a class="indexterm" name="AUTOID-5410"></A
><a class="indexterm" name="AUTOID-5412"></A
>The <code class="literal">-T</CODE
> and <code class="literal">-B</CODE
> switches work as follows.  The first block or so
of the file is examined for odd characters such as strange control codes or
characters with the high bit set.  If too many odd characters (&gt;30%) are
found, it's a <code class="literal">-B</CODE
> file, otherwise it's a <code class="literal">-T</CODE
> file.  Also, any
file containing null in the first block is considered a binary file.  If
<code class="literal">-T</CODE
> or <code class="literal">-B</CODE
> is used on a
filehandle, the current input (standard I/O or &quot;stdio&quot;)
buffer is examined rather than the first block of the file.
Both <code class="literal">-T</CODE
> and <code class="literal">-B</CODE
> return
true on a null file, or on a file at EOF (end of file) when testing a
filehandle.  Because you have to read a file to do the <code class="literal">-T</CODE
> test, on
most occasions you want to use a <code class="literal">-f</CODE
> against the file first, as in:</P
><p class="para"><pre class="programlisting">next unless -f $file &amp;&amp; -T _;</PRE
></P
><p class="para">If any of the file tests (or either the <a class="xref" href="ch03_159.htm#PERL2-CMD-STAT" title="stat"><b class="xref.cmd">stat</B
></A
> or <a class="xref" href="ch03_090.htm#PERL2-CMD-LSTAT" title="lstat"><b class="xref.cmd">lstat</B
></A
> operators)
are given the special filehandle consisting of a solitary underline,
then the <em class="emphasis">stat</EM
> structure of the previous file test (or <a class="xref" href="ch03_159.htm#PERL2-CMD-STAT" title="stat"><b class="xref.cmd">stat</B
></A
> operator) is
used, thereby saving a system call.  (This doesn't work with <code class="literal">-t</CODE
>, and
you need to remember that <a class="xref" href="ch03_090.htm#PERL2-CMD-LSTAT" title="lstat"><b class="xref.cmd">lstat</B
></A
> and <code class="literal">-l</CODE
> will leave values in the
<em class="emphasis">stat</EM
> structure for the symbolic link, not the real file.)[<a class="footnote" href="#AUTOID-5435">30</A
>]
Example:</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5435">[30]</A
> Likewise, <code class="literal">-l _</CODE
> will always be false after a normal <a class="xref" href="ch03_159.htm#PERL2-CMD-STAT" title="stat"><b class="xref.cmd">stat</B
></A
>.</P
></DIV
></BLOCKQUOTE
><p class="para"><pre class="programlisting">print &quot;Can do.\n&quot; if -r $a || -w _ || -x _;

stat($filename);
print &quot;Readable\n&quot; if -r _;
print &quot;Writable\n&quot; if -w _;
print &quot;Executable\n&quot; if -x _;
print &quot;Setuid\n&quot; if -u _;
print &quot;Setgid\n&quot; if -g _;
print &quot;Sticky\n&quot; if -k _;
print &quot;Text\n&quot; if -T _;
print &quot;Binary\n&quot; if -B _;</PRE
></P
><p class="para"><a class="indexterm" name="AUTOID-5442"></A
><a class="indexterm" name="AUTOID-5444"></A
><a class="indexterm" name="AUTOID-5446"></A
><a class="indexterm" name="AUTOID-5448"></A
><a class="indexterm" name="AUTOID-5451"></A
><a class="indexterm" name="AUTOID-5454"></A
><a class="indexterm" name="AUTOID-5457"></A
><a class="indexterm" name="AUTOID-5460"></A
>File ages for <code class="literal">-M</CODE
>, <code class="literal">-A</CODE
>, and <code class="literal">-C</CODE
> are returned in days
(including fractional days) since the time when the script started running.
(This time is stored in
the special variable <b class="emphasis.bold">$^T</B
>.)  Thus, if the file changed after the
script started, you would get a negative time.
Note that most times (86,399 out of 86,400, on average) are fractional,
so testing for equality with an integer without using the <a class="xref" href="ch03_076.htm#PERL2-CMD-INT" title="int"><b class="xref.cmd">int</B
></A
>
function is usually futile.  Examples:</P
><p class="para"><pre class="programlisting">next unless -M $file &gt; .5;      # files older than 12 hours
&amp;newfile if -M $file &lt; 0;       # file is newer than process
&amp;mailwarning if int(-A) == 90;  # file ($_) accessed 90 days ago today</PRE
></P
><p class="para">To reset the script's start time to the current time, change <b class="emphasis.bold">$^T</B
>
as follows:</P
><p class="para"><pre class="programlisting">$^T = time;</PRE
></P
><a class="indexterm" name="AUTOID-5474"></A
><a class="indexterm" name="AUTOID-5475"></A
><a class="indexterm" name="AUTOID-5476"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.11">2.5.11 Relational Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5480"></A
><a class="indexterm" name="AUTOID-5482"></A
><a class="indexterm" name="AUTOID-5484"></A
><a class="indexterm" name="AUTOID-5486"></A
><a class="indexterm" name="AUTOID-5488"></A
><a class="indexterm" name="AUTOID-5490"></A
><a class="indexterm" name="AUTOID-5493"></A
><a class="indexterm" name="AUTOID-5496"></A
><a class="indexterm" name="AUTOID-5499"></A
>Perl has two classes of relational operators.  One class operates on
numeric values, and the other class operates on string values.  To
repeat the table given in the overview:</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Numeric</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">String</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Meaning</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&gt;</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">gt</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Greater than</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&gt;=</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">ge</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Greater than or equal to</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt;</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">lt</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Less than</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt;=</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">le</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Less than or equal to</TD
></TR
></TBODY
></TABLE
><p class="para">These operators return <code class="literal">1</CODE
> for true, and <code class="literal">&quot;&quot;</CODE
> for false.  String
comparisons are based on the ASCII collating sequence, and unlike in some
languages, trailing spaces count in the comparison. 
Note that relational operators are non-associating, which means that
<code class="literal">$a &lt; $b &lt; $c</CODE
> is a syntax error.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.12">2.5.12 Equality Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5541"></A
><a class="indexterm" name="AUTOID-5543"></A
><a class="indexterm" name="AUTOID-5545"></A
><a class="indexterm" name="AUTOID-5547"></A
><a class="indexterm" name="AUTOID-5550"></A
><a class="indexterm" name="AUTOID-5553"></A
><a class="indexterm" name="AUTOID-5556"></A
><a class="indexterm" name="AUTOID-5559"></A
><a class="indexterm" name="AUTOID-5562"></A
>The equality operators are much like the relational operators.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Numeric</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">String</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Meaning</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">==</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">eq</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Equal to</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">!=</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">ne</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Not equal to</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&lt;=&gt;</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">cmp</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Comparison, with signed result</TD
></TR
></TBODY
></TABLE
><p class="para">The equal and not-equal operators return 1 for true, and <code class="literal">&quot;&quot;</CODE
> for false (just as
the relational operators do).  The <code class="literal">&lt;=&gt;</CODE
> and <b class="emphasis.bold">cmp</B
> operators return
-1 if the left operand is less than the right operand, 0 if they are
equal, and +1 if the left operand is greater than the right.  Although
these appear to be very similar to the relational operators, they do
have a different precedence level, so <code class="literal">$a &lt; $b &lt;=&gt; $c &lt; $d</CODE
> is
syntactically valid.</P
><p class="para">For reasons that are apparent to anyone who has seen <em class="emphasis">Star Wars</EM
>, the <code class="literal">&lt;=&gt;</CODE
>
operator is known as the &quot;spaceship&quot; operator.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.13">2.5.13 Bitwise Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5601"></A
><a class="indexterm" name="AUTOID-5605"></A
><a class="indexterm" name="AUTOID-5608"></A
><a class="indexterm" name="AUTOID-5610"></A
><a class="indexterm" name="AUTOID-5613"></A
><a class="indexterm" name="AUTOID-5616"></A
><a class="indexterm" name="AUTOID-5619"></A
><a class="indexterm" name="AUTOID-5621"></A
><a class="indexterm" name="AUTOID-5623"></A
>Like C, Perl has bitwise AND, OR, and XOR (exclusive
OR) operators: <code class="literal">&amp;</CODE
>, <code class="literal">|</CODE
>, and <code class="literal">^</CODE
>.  Note from the table at the
start of this section that bitwise-AND has a higher precedence.  These
operators work differently on numeric values than they do on strings.
(This is one of the few places where Perl cares about the difference.)
If either operand is a number (or has been used as a number), then both
operands are converted to type integer, and the bitwise operation is
performed between the two integers.  These integers are guaranteed to
be at least 32 bits long, but may be 64 bits on some machines.  The point
is that there's an arbitrary limit imposed by the machine's architecture.</P
><p class="para">If both operands are strings (and have not been used as numbers since
being set), these operators do bitwise operations between corresponding
bits from the two strings.  In this case, there's no arbitrary limit,
since strings aren't arbitrarily limited in size.  If one string is
longer than the other, the shorter string is considered to have a sufficient
number of 0 bits on the end to make up the difference.</P
><p class="para">For example, if you AND together two strings:</P
><pre class="programlisting">&quot;123.45&quot; &amp; &quot;234.56&quot;</PRE
><p class="para">you get another string:</P
><pre class="programlisting">&quot;020.44&quot;</PRE
><p class="para">But if you AND together a string and a number:</P
><pre class="programlisting">&quot;123.45&quot; &amp; 234.56</PRE
><p class="para">The string is first converted to a number, giving:</P
><pre class="programlisting">123.45 &amp; 234.56</PRE
><p class="para">The numbers are then converted to integer:</P
><pre class="programlisting">123 &amp; 234</PRE
><p class="para">which evaluates to 106.</P
><p class="para">Note that all bit strings are true
(unless they come out to being the string &quot;<code class="literal">0</CODE
>&quot;).  This means
that tests of the form:</P
><pre class="programlisting">if ( &quot;fred&quot; &amp; &quot;\1\2\3\4&quot; ) { ... }</PRE
><p class="para">would need to be written instead as:</P
><p class="para"><pre class="programlisting">if ( (&quot;fred&quot; &amp; &quot;\1\2\3\4&quot;) =~ /[^\0]/ ) { ... }</PRE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.14">2.5.14 C-style Logical (Short Circuit) Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5650"></A
><a class="indexterm" name="AUTOID-5653"></A
><a class="indexterm" name="AUTOID-5656"></A
><a class="indexterm" name="AUTOID-5659"></A
><a class="indexterm" name="AUTOID-5661"></A
><a class="indexterm" name="AUTOID-5664"></A
><a class="indexterm" name="AUTOID-5666"></A
><a class="indexterm" name="AUTOID-5668"></A
><a class="indexterm" name="AUTOID-5671"></A
>Like C, Perl provides the <code class="literal">&amp;&amp;</CODE
> (logical AND)
and <code class="literal">||</CODE
> (logical OR) operators.  They evaluate from
left to right (with <code class="literal">&amp;&amp;</CODE
> having slightly
higher precedence than <code class="literal">||</CODE
>) testing the truth of the
statement.  These operators are known as short-circuit operators
because they determine the truth of the statement by evaluating the
fewest number of operands possible.  For example, if the left operand
of an <code class="literal">&amp;&amp;</CODE
> operator is false, the right operand
is never evaluated because the result of the operator is false
regardless of the value of the right operand.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Example</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Result</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">$a &amp;&amp; $b</CODE
></TD
><td class="entry" rowspan="1" colspan="1">And</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">$a</CODE
> if <code class="literal">$a</CODE
> is false, <code class="literal">$b</CODE
> otherwise</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">$a || $b</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Or</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">$a</CODE
> if <code class="literal">$a</CODE
> is true, <code class="literal">$b</CODE
> otherwise</TD
></TR
></TBODY
></TABLE
><p class="para">Such short circuits are not only time savers, but are frequently used
to control the flow of evaluation.  For example, an oft-appearing idiom
in Perl programs is:</P
><p class="para"><pre class="programlisting">open(FILE, &quot;somefile&quot;) || die &quot;Cannot open somefile: $!\n&quot;;</PRE
></P
><p class="para">In this case, Perl first evaluates the <a class="xref" href="ch03_102.htm#PERL2-CMD-OPEN" title="open"><b class="xref.cmd">open</B
></A
> function.  If the value
is true (because <em class="emphasis">somefile</EM
> was successfully opened), the execution
of the <a class="xref" href="ch03_027.htm#PERL2-CMD-DIE" title="die"><b class="xref.cmd">die</B
></A
> function is unnecessary, and is skipped.  You can read
this literally as &quot;Open some file or die!&quot;</P
><p class="para">The <code class="literal">||</CODE
> and <code class="literal">&amp;&amp;</CODE
> operators differ from C's in that, rather than
returning 0 or 1, they return the last value evaluated.  This has the
delightful result that you can select the first of a series of values
that happens to be true.  Thus, a reasonably portable way to find out
the home directory might be:</P
><p class="para"><pre class="programlisting">$home = $ENV{HOME} 
     || $ENV{LOGDIR} 
     || (getpwuid($&lt;))[7] 
     || die &quot;You're homeless!\n&quot;;</PRE
></P
><p class="para">Perl also provides lower precedence <b class="emphasis.bold">and</B
> and <b class="emphasis.bold">or</B
> operators that are
more readable and don't force you to use parentheses as much.  They also
short-circuit.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.15">2.5.15 Range Operator</A
></H3
><p class="para"><a class="indexterm" name="CH02.RANGE1"></A
><a class="indexterm" name="CH02.RANGE2"></A
><a class="indexterm" name="AUTOID-5725"></A
>The <code class="literal">..</CODE
> range operator is really two different
operators depending on the context.  In a list context, it returns a
list of values counting (by ones) from the left value to the right
value.  This is useful for writing <code class="literal">for (1..10)</CODE
> loops and for doing
slice operations on arrays.[<a class="footnote" href="#AUTOID-5730">31</A
>]</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5730">[31]</A
> Be aware that under the current implementation,
a temporary array is created, so you'll burn a <em class="emphasis">lot</EM
> of memory if you 
write something like this:</P
><p class="para"><pre class="programlisting">for (1 .. 1_000_000) {
    # code
}</PRE
></P
></DIV
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-5736"></A
>In a scalar context, <code class="literal">..</CODE
> returns a Boolean value.  The operator
is bi-stable, like an electronic flip-flop, and emulates the line-range
(comma) operator of <em class="emphasis">sed</EM
>, <em class="emphasis">awk</EM
>, and various editors.  Each
scalar <code class="literal">..</CODE
> operator maintains its own Boolean state.  It is false
as long as its left operand is false.  Once the left operand is true,
the range operator stays true until the right operand is true,
<em class="emphasis">after</EM
> which the range operator becomes false again.  (The operator doesn't
become false until the next time it is evaluated.  It can test the right operand
and become false on the same evaluation as the one where it became true (the way
<em class="emphasis">awk</EM
>'s range operator behaves), but it still returns true once.  If you
don't want it to test the right operand until the next evaluation (which is how
<em class="emphasis">sed</EM
>'s range operator works), just use three dots (<code class="literal">...</CODE
>) instead of
two.)  The right operand is not evaluated while the operator is in the false
state, and the left operand is not evaluated while the operator is in the true
state.</P
><p class="para">The precedence is a little lower than <code class="literal">||</CODE
> and <code class="literal">&amp;&amp;</CODE
>.
The value returned is
either the null string for false, or a sequence number (beginning with
<code class="literal">1</CODE
>) for true.  The sequence number is reset for each range encountered.
The final sequence number in a range has the string &quot;E0&quot; appended to it,
which doesn't affect its numeric value, but gives you something to
search for if you want to exclude the endpoint.  You can exclude the
beginning point by waiting for the sequence number to be greater than 1.
If either operand of scalar <code class="literal">..</CODE
> is a numeric literal, that operand is
evaluated by comparing it to the <b class="emphasis.bold">$.</B
> variable, which contains the current
line number for your input file.  Examples:</P
><p class="para">As a scalar operator:</P
><p class="para"><pre class="programlisting">if (101 .. 200) { print; }  # print 2nd hundred lines
next line if (1 .. /^$/);   # skip header lines
s/^/&gt; / if (/^$/ .. eof()); # quote body</PRE
></P
><p class="para">As a list operator:</P
><p class="para"><pre class="programlisting">for (101 .. 200) { print; }            # prints 101102...199200
@foo = @foo[0 .. $#foo];               # an expensive no-op
@foo = @foo[ -5 .. -1];                # slice last 5 items</PRE
></P
><p class="para">The range operator (in a list context) makes use of the magical
autoincrement algorithm if the operands are strings.[<a class="footnote" href="#AUTOID-5760">32</A
>]
So you can say:</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5760">[32]</A
> If the final value specified is not in the sequence that the magical increment
would produce, the sequence goes until the next value would be longer than
the final value specified.</P
></DIV
></BLOCKQUOTE
><p class="para"><pre class="programlisting">@alphabet = ('A' .. 'Z');</PRE
></P
><p class="para">to get all the letters of the alphabet, or:</P
><p class="para"><pre class="programlisting">$hexdigit = (0 .. 9, 'a' .. 'f')[$num &amp; 15];</PRE
></P
><p class="para">to get a hexadecimal digit, or:</P
><p class="para"><pre class="programlisting">@z2 = ('01' .. '31');  print $z2[$mday];</PRE
></P
><p class="para">to get dates with leading zeros.  You can also say:</P
><p class="para"><pre class="programlisting">@combos = ('aa' .. 'zz');</PRE
></P
><p class="para">to get all combinations of two lowercase letters. However, be careful of
something like:</P
><p class="para"><pre class="programlisting">@bigcombos = ('aaaaaa' .. 'zzzzzz');</PRE
></P
><p class="para">since that will require lots of memory.  More precisely, it'll need
space to store 308,915,776 scalars.  Let's hope you allocated a <em class="emphasis">large</EM
>
swap partition.  Perhaps you should consider an iterative approach instead.</P
><a class="indexterm" name="AUTOID-5778"></A
><a class="indexterm" name="AUTOID-5779"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.16">2.5.16 Conditional Operator</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5783"></A
><a class="indexterm" name="AUTOID-5785"></A
><a class="indexterm" name="AUTOID-5788"></A
>Trinary <code class="literal">?:</CODE
> is the conditional operator, just as in C.  It works as:</P
><p class="para"><pre class="programlisting"><code class="replaceable"><i>TEST_EXPR</I
></CODE
> ? <code class="replaceable"><i>IF_TRUE_EXPR</I
></CODE
> : <code class="replaceable"><i>IF_FALSE_EXPR</I
></CODE
></PRE
></P
><p class="para">much like an if-then-else, except that it can safely be embedded within other
operations and functions.  If the <code class="replaceable"><i>TEST_EXPR</I
></CODE
> is true, only the
<code class="replaceable"><i>IF_TRUE_EXPR</I
></CODE
> is evaluated, and the value of that expression becomes
the value of the entire expression.  Otherwise, only the <code class="replaceable"><i>IF_FALSE_EXPR</I
></CODE
>
is evaluated, and its value becomes the value of the entire
expression.</P
><p class="para"><pre class="programlisting">printf &quot;I have %d dog%s.\n&quot;, $n, 
        ($n == 1) ? &quot;&quot; : &quot;s&quot;;</PRE
></P
><p class="para">Scalar or list context propagates downward into the second
or third argument, whichever is selected. (The first argument is always
in scalar context, since it's a conditional.)</P
><p class="para"><pre class="programlisting">$a = $ok ? $b : $c;  # get a scalar
@a = $ok ? @b : @c;  # get an array
$a = $ok ? @b : @c;  # get a count of elements in one of the arrays</PRE
></P
><p class="para">You can assign to the conditional operator[<a class="footnote" href="#AUTOID-5806">33</A
>]
if both the second and third
arguments are
legal lvalues (meaning that you can assign to them), provided that both are
scalars or both are lists (or Perl won't know which context to supply to
the right side of the assignment):</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5806">[33]</A
> This is not necessarily guaranteed to contribute to the readability of your 
program.  But it can be used to create some cool entries in an Obfuscated
Perl contest.</P
></DIV
></BLOCKQUOTE
><p class="para"><pre class="programlisting">($a_or_b ? $a : $b) = $c;  # sets either $a or $b to equal $c</PRE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.17">2.5.17 Assignment Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5813"></A
><a class="indexterm" name="AUTOID-5815"></A
><a class="indexterm" name="AUTOID-5818"></A
><a class="indexterm" name="AUTOID-5821"></A
><a class="indexterm" name="AUTOID-5824"></A
><a class="indexterm" name="AUTOID-5827"></A
><a class="indexterm" name="AUTOID-5830"></A
><a class="indexterm" name="AUTOID-5833"></A
><a class="indexterm" name="AUTOID-5836"></A
><a class="indexterm" name="AUTOID-5839"></A
><a class="indexterm" name="AUTOID-5841"></A
><a class="indexterm" name="AUTOID-5844"></A
><a class="indexterm" name="AUTOID-5847"></A
><a class="indexterm" name="AUTOID-5850"></A
><a class="indexterm" name="AUTOID-5853"></A
><a class="indexterm" name="AUTOID-5856"></A
><a class="indexterm" name="AUTOID-5859"></A
>
Perl recognizes the C assignment operators, as well as providing some of its
own.  There are quite a few of them:</P
><p class="para"><pre class="programlisting">=    **=    +=    *=    &amp;=    &lt;&lt;=    &amp;&amp;=
            -=    /=    |=    &gt;&gt;=    ||=
            .=    %=    ^=
                  x=</PRE
></P
><p class="para">Each operator requires an lvalue (a variable or array element) on the left
side, and some expression on the right side.  For the simple assignment
operator, <code class="literal">=</CODE
>, the value of the expression is stored into the designated
variable.  For the other operators, Perl evaluates the expression:</P
><p class="para"><pre class="programlisting">$var <code class="replaceable"><i>OP</I
></CODE
>= $value</PRE
></P
><p class="para">as if it were written:</P
><p class="para"><pre class="programlisting">$var = $var <code class="replaceable"><i>OP</I
></CODE
> $value</PRE
></P
><p class="para">except that <code class="literal">$var</CODE
> is evaluated only once.  Compare the following two
operations:</P
><p class="para"><pre class="programlisting">$var[$a++] += $value;               # $a is incremented once
$var[$a++] = $var[$a++] + $value;   # $a is incremented twice</PRE
></P
><p class="para">Unlike in C, the assignment operator produces a valid lvalue.  Modifying
an assignment is equivalent to doing the assignment and then modifying
the variable that was assigned to.  This is useful for modifying
a copy of something, like this:</P
><p class="para"><pre class="programlisting">($tmp = $global) += $constant;</PRE
></P
><p class="para">which is the equivalent of:</P
><p class="para"><pre class="programlisting">$tmp = $global + $constant;</PRE
></P
><p class="para">Likewise:</P
><p class="para"><pre class="programlisting">($a += 2) *= 3;</PRE
></P
><p class="para">is equivalent to:</P
><p class="para"><pre class="programlisting">$a += 2;
$a *= 3;</PRE
></P
><p class="para">That's not actually very useful, but you often see this idiom:</P
><p class="para"><pre class="programlisting">($new = $old) =~ s/foo/bar/g;</PRE
></P
><p class="para">In all cases, the value of the assignment is the new value of the variable.
Since assignment operators associate right-to-left, this can be used to assign
many variables the same value, as in:</P
><p class="para"><pre class="programlisting">$a = $b = $c = 0;</PRE
></P
><p class="para">which assigns <code class="literal">0</CODE
> to <code class="literal">$c</CODE
>, and the result of that (still <code class="literal">0</CODE
>) to
<code class="literal">$b</CODE
>, and the result of that (<em class="emphasis">still</EM
> <code class="literal">0</CODE
>) to <code class="literal">$a</CODE
>.</P
><p class="para">List assignment may be done only with the plain assignment operator, <code class="literal">=</CODE
>.
In a list context, list assignment returns the list of new values just as
scalar assignment does.  In a scalar context, list assignment returns the
number of values that were available on the right side of the assignment,
as we mentioned earlier in &quot;List Values and Arrays&quot;.  This makes it
useful for testing functions that return a null list when they're
&quot;unsuccessful&quot;, as in:</P
><p class="para"><pre class="programlisting">while (($key, $value) = each %gloss) { ... }

next unless ($dev, $ino, $mode) = stat $file;</PRE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.18">2.5.18 Comma Operators</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5910"></A
><a class="indexterm" name="AUTOID-5913"></A
><a class="indexterm" name="AUTOID-5917"></A
>Binary &quot;<code class="literal">,</CODE
>&quot; is the comma operator.  In a scalar context it evaluates
its left argument, throws that value away, then evaluates its right
argument and returns that value.  This is just like C's comma operator.
For example:</P
><p class="para"><pre class="programlisting">$a = (1, 3);</PRE
></P
><p class="para">assigns <code class="literal">3</CODE
> to <code class="literal">$a</CODE
>.  Do not confuse the scalar context use with the list
context use.  In a list context, it's just the list argument separator, and 
inserts both its arguments into the <code class="replaceable"><i>LIST</I
></CODE
>.  It does not throw any values
away.  </P
><p class="para">For example, if you change the above to:</P
><p class="para"><pre class="programlisting">@a = (1, 3);</PRE
></P
><p class="para">you are constructing a two-element list, while:</P
><p class="para"><pre class="programlisting">atan2(1, 3);</PRE
></P
><p class="para">is calling the function <a class="xref" href="ch03_006.htm#PERL2-CMD-ATAN2" title="atan2"><b class="xref.cmd">atan2</B
></A
> with two arguments.</P
><p class="para"><a class="indexterm" name="AUTOID-5937"></A
>The <code class="literal">=&gt;</CODE
> digraph is mostly just a synonym for the comma operator.
It's useful for documenting arguments that come in pairs.  It also
forces any identifier to the left of it to be interpreted as a string.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.19">2.5.19 List Operators (Rightward)</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5944"></A
>The right side of a list operator governs all the list operator's
arguments, which are comma separated, so the precedence of list operators is
looser than comma if you're looking to the right.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.20">2.5.20 Logical and, or, not, and xor</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5949"></A
><a class="indexterm" name="AUTOID-5952"></A
><a class="indexterm" name="AUTOID-5955"></A
><a class="indexterm" name="AUTOID-5957"></A
><a class="indexterm" name="AUTOID-5959"></A
><a class="indexterm" name="AUTOID-5961"></A
><a class="indexterm" name="AUTOID-5963"></A
>As more readable alternatives to <code class="literal">&amp;&amp;</CODE
>, <code class="literal">||</CODE
>, and <code class="literal">!</CODE
>,
Perl provides the <b class="emphasis.bold">and</B
>, <b class="emphasis.bold">or</B
> and <b class="emphasis.bold">not</B
> operators.  The
behavior of these operators is identical&nbsp;- in particular, they
short-circuit the same way.[<a class="footnote" href="#AUTOID-5972">34</A
>]</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5972">[34]</A
> Obviously the unary <b class="emphasis.bold">not</B
> doesn't short circuit, just as <code class="literal">!</CODE
> doesn't.</P
></DIV
></BLOCKQUOTE
><p class="para">The precedence of these operators is much lower, however, so you can
safely use them after a list operator without the need for
parentheses:</P
><p class="para"><pre class="programlisting">unlink &quot;alpha&quot;, &quot;beta&quot;, &quot;gamma&quot;
        or gripe(), next LINE;</PRE
></P
><p class="para">With the C-style operators that would have to be written like this:</P
><p class="para"><pre class="programlisting">unlink(&quot;alpha&quot;, &quot;beta&quot;, &quot;gamma&quot;)
        || (gripe(), next LINE);</PRE
></P
><p class="para">There is also a logical <b class="emphasis.bold">xor</B
> operator that has no exact counterpart in
C or Perl, since the other XOR operator (<code class="literal">^</CODE
>) works on bits.  The
best equivalent for <code class="literal">$a xor $b</CODE
> is perhaps <code class="literal">!$a != !$b</CODE
>.[<a class="footnote" href="#AUTOID-5987">35</A
>]
This operator can't short-circuit either, since both sides must be evaluated.</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5987">[35]</A
> One could also write <code class="literal">!$a ^ !$b</CODE
> or even <code class="literal">$a ? !$b : !!$b</CODE
>,
of course.  The point is that both <code class="literal">$a</CODE
> and <code class="literal">$b</CODE
> have to
evaluate to true or false in a Boolean context, and the existing bitwise
operator doesn't provide a Boolean context.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PERL2-CH-2-SECT-5.21">2.5.21 C Operators Missing from Perl</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-5996"></A
>Here is what C has that Perl doesn't:</P
><dl class="variablelist"><dt class="term"><code class="literal">unary &amp;</CODE
></DT
><dd class="listitem"><p class="para">The address-of operator.  Perl's <code class="literal">\</CODE
> operator (for taking a reference)
fills the same ecological niche, however:<a class="indexterm" name="AUTOID-6005"></A
></P
><p class="para"><pre class="programlisting">$ref_to_var = \$var;</PRE
></P
><p class="para">But references are much safer than addresses.</P
></DD
><dt class="term"><code class="literal">unary *</CODE
></DT
><dd class="listitem"><p class="para">The dereference-address operator.  Since Perl doesn't have addresses, it
doesn't need to dereference addresses.  It does have references though,
so Perl's variable prefix characters serve as dereference operators,
and indicate type as well: <code class="literal">$</CODE
>, <code class="literal">@</CODE
>, <code class="literal">%</CODE
> and
<code class="literal">&amp;</CODE
>.  Oddly enough, there actually is a <code class="literal">*</CODE
> dereference
operator, but since <code class="literal">*</CODE
> is the funny character
indicating a typeglob, you wouldn't use it the same way.<a class="indexterm" name="AUTOID-6022"></A
></P
></DD
><dt class="term"><code class="literal">(TYPE)</CODE
></DT
><dd class="listitem"><p class="para">The typecasting operator.  Nobody likes to be typecast anyway.<a class="indexterm" name="AUTOID-6030"></A
></P
></DD
></DL
><a class="indexterm" name="AUTOID-6032"></A
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_04.htm#PERL2-CH-2-SECT-4.1.2" title="2.4 Pattern Matching"><img src="../gifs/txtpreva.gif" alt="Previous: 2.4 Pattern Matching" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Programming Perl"><img src="../gifs/txthome.gif" alt="Programming Perl" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_06.htm#PERL2-CH-2-SECT-6.5" title="2.6 Statements and Declarations"><img src="../gifs/txtnexta.gif" alt="Next: 2.6 Statements and Declarations" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">2.4 Pattern Matching</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">2.6 Statements and Declarations</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="../perlnut/index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="../learn/index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
