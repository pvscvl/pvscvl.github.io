<html><head>
<title>[Chapter 3] 3.2.161 sub</TITLE>
<meta name="DC.title" content="Programming Perl"><meta name="DC.creator" content="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:54:42Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-149-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch03_02.htm" title="3.2 Perl Functions in Alphabetical Order"><link rel="prev" href="ch03_160.htm#PERL2-CMD-STUDY" title="3.2.160 study"><link rel="next" href="ch03_162.htm#PERL2-CMD-SUBSTR" title="3.2.162 substr"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Programming Perl" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Programming Perl"><area shape="RECT" coords="467,0,514,18" href="../search/psrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT2" href="ch03_160.htm#PERL2-CMD-STUDY" title="3.2.160 study"><img src="../gifs/txtpreva.gif" alt="Previous: 3.2.160 study" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch03_01.htm" title="3. Functions">Chapter 3<br>Functions</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT2" href="ch03_162.htm#PERL2-CMD-SUBSTR" title="3.2.162 substr"><img src="../gifs/txtnexta.gif" alt="Next: 3.2.162 substr" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT2"><h3 class="sect2"><a class="title" name="PERL2-CMD-SUB">3.2.161 sub</A
></H3
><pre class="programlisting">sub <code class="replaceable"><i>NAME</I
></CODE
> <code class="replaceable"><i>BLOCK</I
></CODE
>
sub <code class="replaceable"><i>NAME</I
></CODE
>
sub <code class="replaceable"><i>BLOCK</I
></CODE
>

sub <code class="replaceable"><i>NAME</I
></CODE
> <code class="replaceable"><i>PROTO</I
></CODE
> <code class="replaceable"><i>BLOCK</I
></CODE
>
sub <code class="replaceable"><i>NAME</I
></CODE
> <code class="replaceable"><i>PROTO</I
></CODE
>
sub <code class="replaceable"><i>PROTO</I
></CODE
> <code class="replaceable"><i>BLOCK</I
></CODE
></PRE
><p class="para"><a class="indexterm" name="AUTOID-13522"></A
><a class="indexterm" name="AUTOID-13524"></A
><a class="indexterm" name="AUTOID-13527"></A
>The first two of these are not really operators, but rather they
declare the existence of named subroutines, which is why the
syntax includes a <code class="replaceable"><i>NAME</I
></CODE
>, after all.  (As declarations, they
return no value.)  The first one additionally defines the
subroutine with a <code class="replaceable"><i>BLOCK</I
></CODE
>, which contains the code for the
subroutine.  The second one (the one without the <code class="replaceable"><i>BLOCK</I
></CODE
>) is
just a forward declaration, that is, a declaration that introduces the
subroutine name without defining it, with the expectation that the real
definition will come later.  (This is useful because the parser treats a
word specially if it knows it's a user-defined subroutine.  You can call
such a subroutine as if it were a list operator, for instance.)</P
><p class="para">The third form really <em class="emphasis">is</EM
> an operator, in that it can be
used within expressions to generate an anonymous subroutine at run-time.  (More
specifically, it returns a reference to an anonymous subroutine, since you can't
talk about something anonymous without some kind of reference to it.)  If the
anonymous subroutine refers to any lexical variables declared outside its
<code class="replaceable"><i>BLOCK</I
></CODE
>, it functions as a
<em class="emphasis">closure</EM
>, which means that different calls to the same <a class="xref" href="ch03_161.htm#PERL2-CMD-SUB" title="sub"><b class="xref.cmd">sub</B
></A
> operator will do the bookkeeping necessary to
keep the correct &quot;version&quot; of each such lexical variable in sight for the life
of the closure, even if the original scope of the lexical variable has been
destroyed.</P
><p class="para">The final three forms are identical to the first three, except that they
also supply a prototype that lets you specify how calls to your
subroutine should be parsed and analyzed, so you can make your
routines act more like some of Perl's built-in functions.  See
&quot;Subroutines&quot; in <a class="xref" href="ch02_01.htm" title="The Gory Details">Chapter 2</A
> and &quot;Anonymous Subroutines&quot; in <a class="xref" href="ch04_01.htm" title="References and Nested Data Structures">Chapter 4</A
>
for more details.</P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT2" href="ch03_160.htm#PERL2-CMD-STUDY" title="3.2.160 study"><img src="../gifs/txtpreva.gif" alt="Previous: 3.2.160 study" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Programming Perl"><img src="../gifs/txthome.gif" alt="Programming Perl" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT2" href="ch03_162.htm#PERL2-CMD-SUBSTR" title="3.2.162 substr"><img src="../gifs/txtnexta.gif" alt="Next: 3.2.162 substr" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">3.2.160 study</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">3.2.162 substr</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="../perlnut/index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="../learn/index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
