<html><head>
<title>[Appendix A] A.10 Chapter 11, Formats</TITLE>
<meta name="DC.title" content="Learning Perl"><meta name="DC.creator" content="Randal Schwartz, Tom Christiansen &amp; Larry Wall"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:36:58Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-284-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appa_01.htm" title="A. Exercise Answers"><link rel="prev" href="appa_09.htm" title="A.9 Chapter 10, Filehandles and File Tests"><link rel="next" href="appa_11.htm" title="A.11 Chapter 12, Directory Access"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Learning Perl" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,54" href="index.htm" alt="Learning Perl"><area shape="RECT" coords="467,0,514,18" href="../search/lsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="sect1" href="appa_09.htm" title="A.9 Chapter 10, Filehandles and File Tests"><img src="../gifs/txtpreva.gif" alt="Previous: A.9 Chapter 10, Filehandles and File Tests" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="appendix" rel="up" href="appa_01.htm" title="A. Exercise Answers">Appendix A<br>Exercise Answers</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="sect1" href="appa_11.htm" title="A.11 Chapter 12, Directory Access"><img src="../gifs/txtnexta.gif" alt="Next: A.11 Chapter 12, Directory Access" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="sect1"><h2 class="sect1"><a class="title" name="appa-32477">A.10 Chapter 11, Formats</A
></H2
><ol class="orderedlist"><li class="listitem"><p class="para"><a class="listitem" name="appa-pgfId-179102"></A
>Here's one way to do it:</P
><pre class="programlisting">open(PW,&quot;/etc/passwd&quot;) || die &quot;How did you get logged in?&quot;;
while (&lt;PW&gt;) {
    ($user,$uid,$gcos) = <a class="indexterm" name="appa-idx-178732-0"></A
>(split /<a class="indexterm" name="appa-idx-178733-0"></A
>:/)[0,2,4];
    ($real) = split /,/,$gcos;
    write;
}
<a class="indexterm" name="appa-idx-178734-0"></A
>format STDOUT =
@&lt;&lt;&lt;&lt;&lt;&lt;&lt; @&gt;&gt;&gt;&gt;&gt;&gt; @&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
$user, $uid, $real
.</PRE
><p class="para">The first line opens the password file. The <code class="literal">while</CODE
> loop processes the password file line by line. Each line is torn apart (with colon delimiters), loading up the scalar variables. The real name of the user is pulled out of the GCOS field. The final statement of the <code class="literal">while</CODE
> loop invokes <code class="literal">write</CODE
> to display all of the data.</P
><p class="para">The format for the <code class="literal">STDOUT</CODE
> filehandle defines a simple line with three fields. The values come from the three scalar variables that are given values in the <code class="literal">while</CODE
> loop.</P
></LI
><li class="listitem"><p class="para"><a class="listitem" name="appa-pgfId-179113"></A
>Here's one way to do it:</P
><pre class="programlisting"># append to program from the first problem...
format STDOUT_TOP =
Username User ID Real Name
======== ======= =========
.</PRE
><p class="para">All it takes to get page headers for the previous program is to add a top-of-page format. Here, we put column headers on the columns.</P
><p class="para">To get the columns to line up, we copied the text of format <code class="literal">STDOUT</CODE
> and used overstrike mode in our text editor to replace <code class="literal">@&lt;&lt;&lt;</CODE
> fields with <code class="literal">====</CODE
> bars. That's the nice thing about the one-character-to-one-character correspondence between a format and the resulting display.</P
></LI
><li class="listitem"><p class="para"><a class="listitem" name="appa-pgfId-179119"></A
>Here's one way to do it:</P
><pre class="programlisting"># append to program from the first problem...
format STDOUT_TOP =
Page @&lt;&lt;&lt;
$%

Username User ID Real Name
======== ======= =========
.</PRE
><p class="para">Well, here again, to get stuff at the top of the page, I've added a top-of-page format. This format also contains a reference to <code class="literal">$%</CODE
>, which gives me a page number automatically.</P
></LI
></OL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="sect1" href="appa_09.htm" title="A.9 Chapter 10, Filehandles and File Tests"><img src="../gifs/txtpreva.gif" alt="Previous: A.9 Chapter 10, Filehandles and File Tests" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Learning Perl"><img src="../gifs/txthome.gif" alt="Learning Perl" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="sect1" href="appa_11.htm" title="A.11 Chapter 12, Directory Access"><img src="../gifs/txtnexta.gif" alt="Next: A.11 Chapter 12, Directory Access" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">A.9 Chapter 10, Filehandles and File Tests</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">A.11 Chapter 12, Directory Access</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="../perlnut/index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="../prog/index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
