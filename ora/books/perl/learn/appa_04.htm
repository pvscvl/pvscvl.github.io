<html><head>
<title>[Appendix A] A.4 Chapter 5, Hashes</TITLE>
<meta name="DC.title" content="Learning Perl"><meta name="DC.creator" content="Randal Schwartz, Tom Christiansen &amp; Larry Wall"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-07-02T01:36:48Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-284-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appa_01.htm" title="A. Exercise Answers"><link rel="prev" href="appa_03.htm" title="A.3 Chapter 4, Control Structures"><link rel="next" href="appa_05.htm" title="A.5 Chapter 6, Basic I/O"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Learning Perl" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,54" href="index.htm" alt="Learning Perl"><area shape="RECT" coords="467,0,514,18" href="../search/lsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="sect1" href="appa_03.htm" title="A.3 Chapter 4, Control Structures"><img src="../gifs/txtpreva.gif" alt="Previous: A.3 Chapter 4, Control Structures" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="appendix" rel="up" href="appa_01.htm" title="A. Exercise Answers">Appendix A<br>Exercise Answers</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="sect1" href="appa_05.htm" title="A.5 Chapter 6, Basic I/O"><img src="../gifs/txtnexta.gif" alt="Next: A.5 Chapter 6, Basic I/O" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="sect1"><h2 class="sect1"><a class="title" name="appa-30451">A.4 Chapter 5, Hashes</A
></H2
><ol class="orderedlist"><li class="listitem"><p class="para"><a class="listitem" name="appa-pgfId-178870"></A
>Here is one way to do it:</P
><pre class="programlisting">%map = qw(red apple green leaves blue ocean);
print &quot;A string please: &quot;; chomp($some_string = &lt;STDIN&gt;);
print &quot;The value for $some_string is $map{$some_string}\n&quot;;</PRE
><p class="para">The first line creates the hash, giving it the desired key-value pairs. The second line fetches a string, removing the pesky newline. The third line prints the entered value and its mapped value.</P
><p class="para">You can also create the hash through a series of separate assignments, like so:</P
><pre class="programlisting">$map{'red'} = 'apple';
$map{'green'} = 'leaves';
$map{'blue'} = 'ocean';</PRE
></LI
><li class="listitem"><p class="para"><a class="listitem" name="appa-pgfId-178906"></A
>Here's one way to do it:</P
><pre class="programlisting">chomp(@words = &lt;STDIN&gt;);               # read the words, minus newlines
<a class="indexterm" name="appa-idx-178715-0"></A
>foreach $word (@words) {
    $count{$word} = $count{$word} + 1; # or $count{$word}++
}
foreach $word (keys %count) {
    print &quot;$word was seen $count{$word} times\n&quot;;
}</PRE
><p class="para">The first line reads the lines into the <code class="literal">@words</CODE
> array. Recall that this will cause each line to end up as a separate element of the array, with the newline character still intact.</P
><p class="para">The next four lines step through the array, setting <code class="literal">$word</CODE
> equal to each line in turn. The newline is discarded with <code class="literal">chomp</CODE
>, and then the magic comes. Each word is used as a key into a hash. The value of the element selected by the key (the word) is a count of the number of times we've seen that word so far. Initially, there are no elements in the hash, so if the word <code class="literal">wild</CODE
> is seen on the first line, we have <code class="literal">$count{&quot;wild&quot;}</CODE
>, which is <code class="literal">undef</CODE
>. The <code class="literal">undef</CODE
> value plus one turns out to be zero plus one, or one. (Recall that <code class="literal">undef</CODE
> looks like a zero if used as a number.) The next time through, we'll have one plus one, or two, and so on.</P
><p class="para">Another common way to write the increment is given in the comments. Fluent Perl programmers tend to be lazy (we call it "concise") and would never go for writing the same hash reference on both sides of the assignment when a simple autoincrement will do.</P
><p class="para">After the words have been counted, the last few lines step through the hash by looking at each of its keys one at a time. The key and the corresponding value are printed after having been interpolated into the string.</P
><p class="para">The extra challenge answer looks like this answer, with the <code class="literal">sort</CODE
> operator inserted just before the word <code class="literal">keys</CODE
> on the third-to-last line. Without the sorting, the resulting output is seemingly random and unpredictable. However, once sorted, the output is predictable and consistent. (Personally, I rarely use the <code class="literal">keys</CODE
> operator without also adding a sort immediately in front of it; this ensures that reruns over the same or similar data generate comparable results.)</P
></LI
></OL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="sect1" href="appa_03.htm" title="A.3 Chapter 4, Control Structures"><img src="../gifs/txtpreva.gif" alt="Previous: A.3 Chapter 4, Control Structures" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Learning Perl"><img src="../gifs/txthome.gif" alt="Learning Perl" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="sect1" href="appa_05.htm" title="A.5 Chapter 6, Basic I/O"><img src="../gifs/txtnexta.gif" alt="Next: A.5 Chapter 6, Basic I/O" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">A.3 Chapter 4, Control Structures</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">A.5 Chapter 6, Basic I/O</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.html" title="The Perl CD Bookshelf">Library Home</A
> | <a href="../perlnut/index.htm" title="Perl in a Nutshell">Perl in a Nutshell</A
> | <a href="index.htm" title="Learning Perl">Learning Perl</A
> | <a href="../learn32/index.htm" title="Learning Perl on Win32 Systems">Learning Perl on Win32</A
> | <a href="../prog/index.htm" title="Programming Perl">Programming Perl</A
> | <a href="../advprog/index.htm" title="Advanced Perl Programming">Advanced Perl Programming</A
> | <a href="../cookbook/index.htm" title="Perl Cookbook">Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
