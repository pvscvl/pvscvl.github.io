<HTML
><HEAD
>
<TITLE>Recipe 20.10. Mirroring Web Pages (Perl Cookbook)</TITLE>
<META
NAME="DC.title"
CONTENT="Perl Cookbook"><META
NAME="DC.creator"
CONTENT="Tom Christiansen &amp; Nathan Torkington"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T01:46:01Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-243-3"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch20_01.htm"
TITLE="20. Web Automation"><LINK
REL="prev"
HREF="ch20_10.htm"
TITLE="20.9. Creating HTML Templates"><LINK
REL="next"
HREF="ch20_12.htm"
TITLE="20.11. Creating a Robot"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Perl Cookbook"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Perl Cookbook"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch20_10.htm"
TITLE="20.9. Creating HTML Templates"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 20.9. Creating HTML Templates"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch20_01.htm"
TITLE="20. Web Automation"
>Chapter 20<BR>Web Automation</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch20_12.htm"
TITLE="20.11. Creating a Robot"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 20.11. Creating a Robot"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch20-21335"
>20.10. Mirroring Web Pages</A
></H2
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch20-pgfId-1205"
>Problem<A
CLASS="indexterm"
NAME="ch20-idx-1000002666-0"
></A
><A
CLASS="indexterm"
NAME="ch20-idx-1000002666-1"
></A
><A
CLASS="indexterm"
NAME="ch20-idx-1000002666-2"
></A
><A
CLASS="indexterm"
NAME="ch20-idx-1000002666-3"
></A
></A
></H3
><P
CLASS="para"
>You want to keep a local copy of a web page up-to-date.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch20-pgfId-1211"
>Solution</A
></H3
><P
CLASS="para"
>Use LWP::Simple's <CODE
CLASS="literal"
>mirror</CODE
> function:</P
><PRE
CLASS="programlisting"
>use LWP::Simple;
mirror($URL, $local_filename);</PRE
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch20-pgfId-1221"
>Discussion</A
></H3
><P
CLASS="para"
>Although closely related to the <CODE
CLASS="literal"
>get</CODE
> function discussed in <A
CLASS="xref"
HREF="ch20_02.htm"
TITLE="Fetching a URL from a Perl Script"
>Recipe 20.1</A
>, the <CODE
CLASS="literal"
>mirror</CODE
> function doesn't download the file unconditionally. It adds the <CODE
CLASS="literal"
>If-Modified-Since</CODE
><A
CLASS="indexterm"
NAME="ch20-idx-1000003787-0"
></A
> header to the GET request it creates, so the server will not transfer the file unless it has been updated.</P
><P
CLASS="para"
>The <CODE
CLASS="literal"
>mirror</CODE
> function mirrors only a single page, not a full tree. To mirror a set of pages, use this recipe in conjunction <A
CLASS="xref"
HREF="ch20_04.htm"
TITLE="Extracting URLs"
>Recipe 20.3</A
>. A good solution to mirroring an entire remote tree can be found in the w3mir program, also found on CPAN.</P
><P
CLASS="para"
>Be careful! It's possible (and easy) to write programs that run amok and begin downloading all web pages on the net. This is not only poor etiquette, it's also an infinite task, since some pages are dynamically generated. It could also get you into trouble with someone who doesn't want their pages downloaded en masse.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch20-pgfId-1231"
>See Also</A
></H3
><P
CLASS="para"
>The documentation for the CPAN module LWP::Simple; the HTTP 
specification at <A
CLASS="systemitem.url"
HREF="../../../../../../../www.w3.org/pub/WWW/Protocols/HTTP/"
>http://www.w3.org/pub/WWW/Protocols/HTTP/</A
></P
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch20_10.htm"
TITLE="20.9. Creating HTML Templates"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 20.9. Creating HTML Templates"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Perl Cookbook"
><IMG
SRC="../gifs/txthome.gif"
ALT="Perl Cookbook"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch20_12.htm"
TITLE="20.11. Creating a Robot"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 20.11. Creating a Robot"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>20.9. Creating HTML Templates</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>20.11. Creating a Robot</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
></P
></DIV
<!-- LIBRARY NAV BAR --> <img src="../gifs/smnavbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links"><p> <a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font> </p> <map name="library-map"> <area shape="rect" coords="2,-1,79,99" href="../index.htm"><area shape="rect" coords="84,1,157,108" href="../perlnut/index.htm"><area shape="rect" coords="162,2,248,125" href="../prog/index.htm"><area shape="rect" coords="253,2,326,130" href="../advprog/index.htm"><area shape="rect" coords="332,1,407,112" href="index.htm"><area shape="rect" coords="414,2,523,103" href="../sysadmin/index.htm"></map> </BODY
></HTML
>
