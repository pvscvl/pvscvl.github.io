<HTML
><HEAD
>
<TITLE>8.3 On Inheritance (Advanced Perl Programming)</TITLE>
<META
NAME="DC.title"
CONTENT="Advanced Perl Programming"><META
NAME="DC.creator"
CONTENT="Sriram Srinivasan"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T01:34:42Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-220-4"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch08_01.htm"
TITLE="8. Object Orientation: The Next Few Steps"><LINK
REL="prev"
HREF="ch08_02.htm"
TITLE="8.2 Delegation"><LINK
REL="next"
HREF="ch08_04.htm"
TITLE="8.4 Resources"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Advanced Perl Programming"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,54"
HREF="index.htm"
ALT="Advanced Perl Programming"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch08_02.htm"
TITLE="8.2 Delegation"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 8.2 Delegation"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch08_01.htm"
TITLE="8. Object Orientation: The Next Few Steps"
>Chapter 8<BR>Object Orientation: The Next Few Steps</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch08_04.htm"
TITLE="8.4 Resources"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 8.4 Resources"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch08-30084"
>8.3 On Inheritance</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch08-idx-968007-0"
></A
><A
CLASS="indexterm"
NAME="ch08-idx-968007-1"
></A
>I have never been quite comfortable with using inheritance liberally, and I don't subscribe to the theory that this feature is essential for software reuse. There are three related but distinct flavors of inheritance, and in this section, I'll list what I like or dislike about these aspects. The three types of inheritance are as follows:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch08-pgfId-963775"
></A
>Attribute inheritance</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch08-pgfId-963776"
></A
>Implementation inheritance</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch08-pgfId-963777"
></A
>Interface inheritance</P
></LI
></UL
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch08-pgfId-963778"
>8.3.1 Attribute Inheritance</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch08-idx-968008-0"
></A
>The facility provided by a language for a subclass to inherit attributes from a base class or a structure is called attribute inheritance. While C++ and Java provide this facility, Perl doesn't. The onus is on the Perl programmer to figure out a way for a superclass and a subclass to agree on a common inheritable representation. For this reason, a hash table is a frequent choice, but not necessarily an economical one, as has been pointed out earlier.</P
><P
CLASS="para"
>My problem with attribute inheritance is that it introduces a tremendous amount of coupling between an inherited class and a derived class. A change in the way a base class is laid out has drastic consequences for the derived class. This is clearly a violation of encapsulation. C++ treats all attributes as private by default but then provides a keyword called "protected," whereby it makes them freely available to derived classes, while still hiding them from the general public. Bjarne Stroustrup, the creator of C++, regrets this in his excellent book <EM
CLASS="emphasis"
>The Design and Evolution of C++</EM
> [<A
CLASS="xref"
HREF="ch08_04.htm"
TITLE=""
>8</A
>]: </P
><BLOCKQUOTE
CLASS="blockquote"
><P
CLASS="para"
>One of my concerns about <CODE
CLASS="literal"
>protected</CODE
> is exactly that it makes it too easy to use a common base the way one might sloppily have used global data....In retrospect, I think that <CODE
CLASS="literal"
>protected</CODE
> is a case where "good arguments" and fashion overcame my better judgement and my rules of thumb for accepting new features.</P
></BLOCKQUOTE
><P
CLASS="para"
>A better option is to provide accessor methods and rely on interface inheritance. More on this soon.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch08-pgfId-963783"
>8.3.2 Implementation Inheritance</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch08-idx-968009-0"
></A
>Perl supports only this flavor of inheritance. Implementation inheritance, like attribute inheritance, forces base and inherited classes to have a common understanding of the layout of the object's attributes; attribute inheritance is almost always required in using implementation inheritance.</P
><P
CLASS="para"
>Subclassing is not easy, as Erich Gamma et al. say in <EM
CLASS="emphasis"
>Design Patterns</EM
> [<A
CLASS="xref"
HREF="ch08_04.htm"
TITLE=""
>7</A
>]:</P
><BLOCKQUOTE
CLASS="blockquote"
><P
CLASS="para"
>Designing a subclass also requires an in-depth understanding of the parent class. For example, overriding one operation might require overriding another. An overridden operation might be required to call an inherited operation. And subclassing can lead to an explosion of classes, because you might have to introduce many new subclasses for even a simple extension.</P
></BLOCKQUOTE
><P
CLASS="para"
>They suggest using composition instead, a topic we will touch on shortly.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch08-pgfId-963788"
>8.3.3 Interface Inheritance</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch08-idx-968010-0"
></A
>Attribute and implementation inheritance are for the convenience of the object implementor. Interface inheritance is for the user of a package. Perl supports only implementation inheritance.</P
><P
CLASS="para"
>The set of publicly available methods defines an object's interface. A derived class can add to this interface by adding new methods. But whether it actually overrides a base class implementation is strictly a matter of implementation detail; from the user's point of view, it still offers the same methods. </P
><P
CLASS="para"
>The important thing about an interface is that it represents the contract between the user and the object. If two objects have identical interfaces, they can be interchangeably used. This substitutability aspect represents the most important feature a language or a set of components can provide. </P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch08-pgfId-963791"
>8.3.4 Using Composition Instead</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch08-idx-968014-0"
></A
>I was once convinced about the need for implementation inheritance when I was writing some widgets for Xt/Motif (GUI frameworks for the X Windows platform). This framework goes to a great extent to provide single inheritance in C (both attribute and implementation), but the result isn't easy to work with. When C++ came along, I quickly became enthusiastic about a language that supported inheritance, and attempted to implement the widget set in C++. Then when John Ousterhout's Tk came along, I marveled at the ease of creating widgets, even though it was in C and provided all the features that Motif provides (and much more). The Tk architecture used composition, not inheritance. I have been suitably chastened.</P
><P
CLASS="para"
>The idea of composition is for an object to be composed out of other objects. That is, it forms a <EM
CLASS="emphasis"
>has-a</EM
> or <EM
CLASS="emphasis"
>uses-a</EM
> relationship with other classes, instead of an <EM
CLASS="emphasis"
>is-a</EM
> relationship. Many examples in published literature glorify implementation inheritance, but these turn out to be far better (simpler and more readable) candidates for composition. Take this commonly illustrated example of a class called <CODE
CLASS="literal"
>Vice-President</CODE
>, inheriting from a class called <CODE
CLASS="literal"
>Manager</CODE
>, inheriting from a class called <CODE
CLASS="literal"
>Employee</CODE
>. It is true that a V.P. <EM
CLASS="emphasis"
>is-a</EM
> Manager, who in turn is an Employee, so the case is made for attribute and implementation inheritance. But what happens when an employee is promoted? The object is forced to change its class&nbsp;- clearly, a terrible design. The better way to approach this issue is to realize that an employee plays one or more roles in a company (that of a manager, vice-president, or lead technical engineer), and when the employee is promoted, this role is merely updated. In other words, the <KBD
CLASS="command"
>Employee</KBD
> object <EM
CLASS="emphasis"
>uses</EM
> the <KBD
CLASS="command"
>Role</KBD
> class, which for its part, captures everything to be known about that role, such as the job description, salary range, and prerequisites. </P
><P
CLASS="para"
>Composition is also called component-driven programming. The key to developing reusable software is to develop completely encapsulated components with well-defined and documented interfaces. Designing for inheritance has, in my experience, rarely yielded the benefit that the hype would suggest.</P
><P
CLASS="para"
>Perl provides the most crucial features required to create plug and play components: polymorphism and run-time binding. You can say <KBD
CLASS="command"
>$obj-&gt;draw()</KBD
>, and Perl calls the appropriate <KBD
CLASS="command"
>draw()</KBD
> method, depending on <KBD
CLASS="command"
>$obj</KBD
>'s class. Since Perl is an untyped language, it makes this statement work for graphic shapes, guns, and lotteries. I value this feature much more than its support for implementation inheritance.<A
CLASS="indexterm"
NAME="ch08-idx-968012-0"
></A
><A
CLASS="indexterm"
NAME="ch08-idx-968012-1"
></A
><A
CLASS="indexterm"
NAME="ch08-idx-968012-2"
></A
></P
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch08_02.htm"
TITLE="8.2 Delegation"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 8.2 Delegation"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Advanced Perl Programming"
><IMG
SRC="../gifs/txthome.gif"
ALT="Advanced Perl Programming"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch08_04.htm"
TITLE="8.4 Resources"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 8.4 Resources"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>8.2 Delegation</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>8.4 Resources</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
></P
></DIV
<!-- LIBRARY NAV BAR --> <img src="../gifs/smnavbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links"><p> <a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font> </p> <map name="library-map"> <area shape="rect" coords="2,-1,79,99" href="../index.htm"><area shape="rect" coords="84,1,157,108" href="../perlnut/index.htm"><area shape="rect" coords="162,2,248,125" href="../prog/index.htm"><area shape="rect" coords="253,2,326,130" href="index.htm"><area shape="rect" coords="332,1,407,112" href="../cookbook/index.htm"><area shape="rect" coords="414,2,523,103" href="../sysadmin/index.htm"></map> </BODY
></HTML
>
