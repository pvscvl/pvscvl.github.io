<HTML
><HEAD
>
<TITLE>Modules (Advanced Perl Programming)</TITLE>
<META
NAME="DC.title"
CONTENT="Advanced Perl Programming"><META
NAME="DC.creator"
CONTENT="Sriram Srinivasan"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T01:32:53Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-220-4"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="index.htm"
TITLE="Advanced Perl Programming"><LINK
REL="prev"
HREF="ch05_08.htm"
TITLE="5.8 Resources"><LINK
REL="next"
HREF="ch06_02.htm"
TITLE="6.2 Packages and Files"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Advanced Perl Programming"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,54"
HREF="index.htm"
ALT="Advanced Perl Programming"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch05_08.htm"
TITLE="5.8 Resources"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 5.8 Resources"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Chapter 6</FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch06_02.htm"
TITLE="6.2 Packages and Files"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 6.2 Packages and Files"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="chapter"
><H1
CLASS="chapter"
><A
CLASS="title"
NAME="ch06-34307"
>6. Modules</A
></H1
><DIV
CLASS="htmltoc"
><P
><B
>Contents:</B
><BR><A
CLASS="sect1"
HREF="#ch06-31040"
TITLE="6.1 Basic Package"
>Basic Package</A
><BR><A
CLASS="sect1"
HREF="ch06_02.htm"
TITLE="6.2 Packages and Files"
>Packages and Files</A
><BR><A
CLASS="sect1"
HREF="ch06_03.htm"
TITLE="6.3 Package Initialization and Destruction"
>Package Initialization and Destruction</A
><BR><A
CLASS="sect1"
HREF="ch06_04.htm"
TITLE="6.4 Privacy"
>Privacy</A
><BR><A
CLASS="sect1"
HREF="ch06_05.htm"
TITLE="6.5 Importing Symbols"
>Importing Symbols</A
><BR><A
CLASS="sect1"
HREF="ch06_06.htm"
TITLE="6.6 Nesting Packages"
>Nesting Packages</A
><BR><A
CLASS="sect1"
HREF="ch06_07.htm"
TITLE="6.7 Autoloading"
>Autoloading</A
><BR><A
CLASS="sect1"
HREF="ch06_08.htm"
TITLE="6.8 Accessing the Symbol Table"
>Accessing the Symbol Table</A
><BR><A
CLASS="sect1"
HREF="ch06_09.htm"
TITLE="6.9 Language Comparisons"
>Language Comparisons</A
></P
><P
></P
></DIV
><DIV
CLASS="epigraph"
ALIGN="right"
><P
CLASS="para"
ALIGN="right"
><I
>Life is a struggle with things to maintain itself among them. Concepts are the strategic plan we form in answer to the attack.</I
></P
><P
CLASS="attribution"
ALIGN="right"
>-&nbsp;Jose Ortega y Gasset, <CITE
CLASS="citetitle"
>The Revolt of the Masses</CITE
></P
></DIV
><P
CLASS="para"
>One of the chief reasons why languages such as <EM
CLASS="emphasis"
>awk</EM
> and the various Unix shells don't get used for building even moderately complex systems is their lack of support for modular programming. There are no bodies of code that you can just pick up and plug into your application; instead, you end up cutting and pasting from other standalone scripts. In contrast, languages such as Perl have been highly successful because of the wide availability of third-party modules (libraries). When comparing languages, I consider the availability of libraries to be more important than pure language features.</P
><P
CLASS="para"
>Perl allows you to partition your code into one or more reusable <A
CLASS="indexterm"
NAME="ch06-idx-960749-0"
></A
>modules. In this chapter, we will study how to:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch06-pgfId-958361"
></A
>Define modules using the <KBD
CLASS="command"
>package</KBD
> keyword.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch06-pgfId-958362"
></A
>Load predefined modules with <KBD
CLASS="command"
>use</KBD
> and <KBD
CLASS="command"
>require</KBD
>; we have already seen a few examples of <KBD
CLASS="command"
>use</KBD
> in the earlier chapters.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch06-pgfId-958366"
></A
>Access package specific variables and subroutines using the "::" notation.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="listitem"
NAME="ch06-pgfId-949424"
></A
>Load functions at run-time.</P
></LI
></UL
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch06-31040"
>6.1 Basic Package</A
></H2
><P
CLASS="para"
>The <KBD
CLASS="command"
>package</KBD
><A
CLASS="indexterm"
NAME="ch06-idx-960750-0"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960750-1"
></A
> keyword signifies the beginning of a new namespace. All global identifiers (names of variables, subroutines, filehandles, formats, and directory handles) mentioned after this statement "belong" to that package. For example:</P
><PRE
CLASS="programlisting"
><B
CLASS="emphasis.bold"
>package BankAccount</B
>;
$total = 0;
sub deposit {
    my ($amount)= @_;
    $total += $amount;
    print &quot;You now have $total dollars \n&quot;;
}
sub withdraw {
    my ($amount)= @_;
    $total -= $amount; 
    $total = 0  if $total &lt; 0;
    print &quot;You now have $total dollars \n&quot;;
}</PRE
><P
CLASS="para"
>The user-defined global identifiers <KBD
CLASS="command"
>$total</KBD
>, <KBD
CLASS="command"
>deposit</KBD
>, and <KBD
CLASS="command"
>withdraw</KBD
> belong to the BankAccount package. The scope of a package lasts until the end of the innermost enclosing block (if it is declared inside that block) or until another <KBD
CLASS="command"
>package</KBD
> statement is encountered. In the absence of an explicit package declaration, Perl assumes a package name called <KBD
CLASS="command"
>main</KBD
>. </P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch06-idx-960765-0"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960765-1"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960765-2"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960765-3"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960765-4"
></A
>This is how you use the global symbols from another package:</P
><PRE
CLASS="programlisting"
>package ATM;               # Start a different name-space now
BankAccount::deposit(10);  # Call a foreign subroutine
print $BankAccount::total; # Access a foreign variable</PRE
><P
CLASS="para"
>To access an identifier in a different <A
CLASS="indexterm"
NAME="ch06-idx-960767-0"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960767-1"
></A
>namespace, you need to put the package name before the variable name; this is called <I
CLASS="firstterm"
>fully qualifying</I
> the name. Note that you must say <KBD
CLASS="command"
>$BankAccount::total</KBD
>, not <KBD
CLASS="command"
>BankAccount::$total</KBD
>; the <CODE
CLASS="literal"
>$ </CODE
>sign is followed by the fully qualified name. If an identifier is not fully qualified, Perl looks for it in the currently active package. </P
><P
CLASS="para"
>Since the <KBD
CLASS="command"
>package</KBD
> statement simply dictates the effective namespace, you can switch between different namespaces at will:</P
><PRE
CLASS="programlisting"
><B
CLASS="emphasis.bold"
>package A</B
>;
$a = 10;      # This $a is in package A
package B;
$a = 20;      # This $a is in package B, and is completely independent
              # of the other $a
<B
CLASS="emphasis.bold"
>package A</B
>;     # Make A the current package.
print $a;     # prints 10;</PRE
><P
CLASS="para"
>C++ programmers will recognize the resemblance to that language's namespace facility.</P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch06-pgfId-954553"
>6.1.1 Packages and Variables</A
></H3
><P
CLASS="para"
>In <A
CLASS="xref"
HREF="ch03_01.htm"
TITLE="Typeglobs and Symbol Tables"
>Chapter 3, <CITE
CLASS="chapter"
>Typeglobs and Symbol Tables</CITE
></A
>, I mentioned that all global names go into a symbol table. That was a bit of a white lie. Each package actually gets its <EM
CLASS="emphasis"
>own</EM
> <A
CLASS="indexterm"
NAME="ch06-idx-960768-0"
></A
>symbol table, distinct from all others. (We will have more to say on this subject in the section <A
CLASS="xref"
HREF="ch06_08.htm"
TITLE="Accessing the Symbol Table"
>"Accessing the Symbol Table</A
>" later in this chapter). User-defined identifiers in package <KBD
CLASS="command"
>main</KBD
> are not treated specially in any way except that you can also refer to a variable, say <KBD
CLASS="command"
>$x</KBD
>, in that package as <CODE
CLASS="literal"
>&quot;$::x&quot;</CODE
>. </P
><P
CLASS="para"
>The built-in variables such as <KBD
CLASS="command"
>$|</KBD
>, <KBD
CLASS="command"
>$_</KBD
>, <KBD
CLASS="command"
>@ARGV</KBD
>, and <KBD
CLASS="command"
>%ENV</KBD
> always belong to package <KBD
CLASS="command"
>main</KBD
>, and Perl allows you to refer to these variables in any package without having to prefix them with <KBD
CLASS="command"
>main::</KBD
>. These are the only truly global variables in Perl.</P
><P
CLASS="para"
>You may also recall that <A
CLASS="indexterm"
NAME="ch06-idx-960770-0"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960770-1"
></A
>lexical (<KBD
CLASS="command"
>my</KBD
>) variables are not associated with symbols and typeglobs and therefore have nothing to do with packages. It is a compile-time error to say something like</P
><PRE
CLASS="programlisting"
>my $BankAccount::total; # Error</PRE
><P
CLASS="para"
>This also means that you can have two variables of the same type and the same name, if one is a package global and one is a lexical. The following piece of code is legal, but definitely not recommended:</P
><PRE
CLASS="programlisting"
>$x = 10 ;   # global to package main
my $x = 20; # lexical at file scope
print $x;   # prints 20. Lexical variables are given priority.<A
CLASS="indexterm"
NAME="ch06-idx-960769-0"
></A
></PRE
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch06-pgfId-959435"
>6.1.2 Symbolic References</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch06-idx-960771-0"
></A
><A
CLASS="indexterm"
NAME="ch06-idx-960771-1"
></A
>Symbolic references work as we have seen earlier, for variables as well as functions. Consider</P
><PRE
CLASS="programlisting"
>package A;
$x = 10;

package B;
# Access $A::x symbolically
print ${&quot;A::x&quot;};

# or even more indirectly
$pkg      = &quot;A&quot;;
$var_name = &quot;x&quot;;
print ${&quot;${pkg}::$var_name&quot;};

# Call a subroutine indirectly
&amp;{&quot;A::foo&quot;}(10, 20); # Identical to A::foo(10,20);</PRE
><P
CLASS="para"
>We will make extensive use of this facility in <A
CLASS="xref"
HREF="ch08_01.htm"
TITLE="Object Orientation: The Next Few Steps"
>Chapter 8, <CITE
CLASS="chapter"
>Object Orientation: The Next Few Steps</CITE
></A
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch05_08.htm"
TITLE="5.8 Resources"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 5.8 Resources"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Advanced Perl Programming"
><IMG
SRC="../gifs/txthome.gif"
ALT="Advanced Perl Programming"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch06_02.htm"
TITLE="6.2 Packages and Files"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 6.2 Packages and Files"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>5.8 Resources</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>6.2 Packages and Files</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
></P
></DIV
<!-- LIBRARY NAV BAR --> <img src="../gifs/smnavbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links"><p> <a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font> </p> <map name="library-map"> <area shape="rect" coords="2,-1,79,99" href="../index.htm"><area shape="rect" coords="84,1,157,108" href="../perlnut/index.htm"><area shape="rect" coords="162,2,248,125" href="../prog/index.htm"><area shape="rect" coords="253,2,326,130" href="index.htm"><area shape="rect" coords="332,1,407,112" href="../cookbook/index.htm"><area shape="rect" coords="414,2,523,103" href="../sysadmin/index.htm"></map> </BODY
></HTML
>
