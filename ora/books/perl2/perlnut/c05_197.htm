<HTML
><HEAD
>
<TITLE>Reference: vec (Perl in a Nutshell)</TITLE>
<META
NAME="DC.title"
CONTENT="Perl in a Nutshell"><META
NAME="DC.creator"
CONTENT="Ellen Siever, Stephen Spainhour &amp; Nathan Patwardhan"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T01:39:22Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-286-7"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch05_02.htm"
TITLE="5.2 Perl Functions in Alphabetical Order"><LINK
REL="prev"
HREF="c05_196.htm"
TITLE="Reference: values"><LINK
REL="next"
HREF="c05_198.htm#"
TITLE="Reference: wait"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Perl in a Nutshell"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,71"
HREF="index.htm"
ALT="Perl in a Nutshell"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="NUTENTRY"
HREF="c05_196.htm"
TITLE="Reference: values"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: Reference: values"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch05_01.htm"
TITLE="5. Function Reference"
>Chapter 5<BR>Function Reference</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="NUTENTRY"
HREF="c05_198.htm#"
TITLE="Reference: wait"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: Reference: wait"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="NUTENTRY"
><H2
CLASS="nutentry"
><A
CLASS="term"
NAME="AUTOID-10931"
>vec</A
></H2
><PRE
CLASS="nutsynopsis"
>vec <EM
CLASS="emphasis"
>string</EM
>, <EM
CLASS="emphasis"
>offset</EM
>, <EM
CLASS="emphasis"
>bits</EM
></PRE
><DL
CLASS="nutentrybody"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-10939"
></A
>Treats a <EM
CLASS="emphasis"
>string</EM
> as a vector of
unsigned integers, and returns the value of the element specified by
<EM
CLASS="emphasis"
>offset</EM
> and <EM
CLASS="emphasis"
>bits</EM
>.
The function may also be assigned to, which causes the element to be
modified.
The purpose of the function is to provide very compact storage of lists of
small integers. The integers may be very small&nbsp;- vectors can hold
numbers that are as small as one bit, resulting in a bitstring.</P
><P
CLASS="para"
>The <EM
CLASS="emphasis"
>offset</EM
> specifies how many elements to skip over to find the one you
want. <EM
CLASS="emphasis"
>bits</EM
> is the number of bits per element in the vector, so each
element can contain an unsigned integer in the range
<CODE
CLASS="literal"
>0..(2**</CODE
><EM
CLASS="emphasis"
>bits</EM
><CODE
CLASS="literal"
>)-1</CODE
>.
<EM
CLASS="emphasis"
>bits</EM
> must be one of <CODE
CLASS="literal"
>1</CODE
>, <CODE
CLASS="literal"
>2</CODE
>, <CODE
CLASS="literal"
>4</CODE
>, <CODE
CLASS="literal"
>8</CODE
>,
<CODE
CLASS="literal"
>16</CODE
>, or
<CODE
CLASS="literal"
>32</CODE
>. As many elements as possible are packed into each byte, and
the ordering is such that <CODE
CLASS="literal"
>vec($vectorstring,0,1)</CODE
> is guaranteed
to go into the lowest bit of the first byte of the string. To find
out the position of the byte in which an element is going to be put,
you have to multiply the <EM
CLASS="emphasis"
>offset</EM
> by the number of elements per
byte. When <EM
CLASS="emphasis"
>bits</EM
> is 1, there are eight elements per byte. When
<EM
CLASS="emphasis"
>bits</EM
> is 2,
there are four elements per byte. When <EM
CLASS="emphasis"
>bits</EM
>
is 4, there are two elements (called nybbles)
per byte. And so on.</P
><P
CLASS="para"
>Regardless of whether your system is big-endian or little-endian,
<CODE
CLASS="literal"
>vec($foo, 0, 8)</CODE
> always refers to the first byte of string
<CODE
CLASS="literal"
>$foo</CODE
>. See <CODE
CLASS="literal"
>select</CODE
> for
examples of bitmaps generated with <CODE
CLASS="literal"
>vec</CODE
>.</P
><P
CLASS="para"
>Vectors created with <CODE
CLASS="literal"
>vec</CODE
> can also be
manipulated with the logical operators <CODE
CLASS="literal"
>|</CODE
>,
<CODE
CLASS="literal"
>&amp;</CODE
>, <CODE
CLASS="literal"
>^</CODE
>, and <CODE
CLASS="literal"
>~</CODE
>, which
will assume a bit vector operation is desired when the operands are strings.
A bit vector (<EM
CLASS="emphasis"
>bits == 1</EM
>) can be translated to or from
a string of <CODE
CLASS="literal"
>1</CODE
>s and <CODE
CLASS="literal"
>0</CODE
>s by supplying a
<CODE
CLASS="literal"
>b*</CODE
> template to <CODE
CLASS="literal"
>unpack</CODE
> or
<CODE
CLASS="literal"
>pack</CODE
>. Similarly, a vector of nybbles (<EM
CLASS="emphasis"
>bits == 4</EM
>) can be translated with an <CODE
CLASS="literal"
>h*</CODE
> template.</P
></DL
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="NUTENTRY"
HREF="c05_196.htm"
TITLE="Reference: values"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: Reference: values"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Perl in a Nutshell"
><IMG
SRC="../gifs/txthome.gif"
ALT="Perl in a Nutshell"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="NUTENTRY"
HREF="c05_198.htm#"
TITLE="Reference: wait"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: Reference: wait"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>Reference: values</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>Reference: wait</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
></P
></DIV
<p><!-- LIBRARY NAV BAR --> <img src="../gifs/smnavbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links"><p> <a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font> </p> <map name="library-map"> <area shape="rect" coords="2,-1,79,99" href="../index.htm"><area shape="rect" coords="84,1,157,108" href="index.htm"><area shape="rect" coords="162,2,248,125" href="../prog/index.htm"><area shape="rect" coords="253,2,326,130" href="../advprog/index.htm"><area shape="rect" coords="332,1,407,112" href="../cookbook/index.htm"><area shape="rect" coords="414,2,523,103" href="../sysadmin/index.htm"></map> </BODY
></HTML
>
