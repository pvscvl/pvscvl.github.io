<HTML
><HEAD
>
<TITLE>9.4 CGI Environment Variables (Perl in a Nutshell)</TITLE>
<META
NAME="DC.title"
CONTENT="Perl in a Nutshell"><META
NAME="DC.creator"
CONTENT="Ellen Siever, Stephen Spainhour &amp; Nathan Patwardhan"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T01:55:42Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-286-7"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch09_01.htm"
TITLE="9. CGI Overview"><LINK
REL="prev"
HREF="ch09_03.htm"
TITLE="9.3 Extra Path Information"><LINK
REL="next"
HREF="ch10_01.htm"
TITLE="10. The CGI.pm Module"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Perl in a Nutshell"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,71"
HREF="index.htm"
ALT="Perl in a Nutshell"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch09_03.htm"
TITLE="9.3 Extra Path Information"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 9.3 Extra Path Information"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch09_01.htm"
TITLE="9. CGI Overview"
>Chapter 9<BR>CGI Overview</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="CHAPTER"
HREF="ch10_01.htm"
TITLE="10. The CGI.pm Module"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 10. The CGI.pm Module"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="PNUT-CH-SECT-4"
>9.4 CGI Environment Variables</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="PNUT-CH-9-IX-ENVIRONMENT-VARIABLES-CGI-RELATED"
></A
><A
CLASS="indexterm"
NAME="PNUT-CH-9-IX-CGI-PROGRAMS-ENVIRONMENT-VARIABLES-FOR"
></A
>Most of the information needed by CGI programs is made available
via Unix environment variables. Programs can access this information
as they would any environment variable (via the <CODE
CLASS="literal"
>%ENV</CODE
>
hash in Perl). 
The table below lists environment variables commonly available 
through CGI. However, since servers occasionally vary on 
the names of environment variables they assign, check with your
own server documentation for more information.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
>Environment Variable</TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
>Content Returned</TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>AUTH_TYPE</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The authentication method used to validate a user. See REMOTE_IDENT <A
CLASS="indexterm"
NAME="AUTOID-24179"
></A
>
and REMOTE_USER.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>CONTENT_LENGTH</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The length of the query data (in bytes or the number of characters)<A
CLASS="indexterm"
NAME="AUTOID-24185"
></A
>
passed to the CGI program through standard input. </P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>CONTENT_TYPE</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The media type of the query data, such as <CODE
CLASS="literal"
>text/html</CODE
>.<A
CLASS="indexterm"
NAME="AUTOID-24192"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>DOCUMENT_ROOT</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The directory from which web documents are served.<A
CLASS="indexterm"
NAME="AUTOID-24198"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>GATEWAY_INTERFACE</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The revision of the Common Gateway Interface that the server uses.<A
CLASS="indexterm"
NAME="AUTOID-24204"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>HTTP_ACCEPT</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
A list of the media types that the client can accept.<A
CLASS="indexterm"
NAME="AUTOID-24210"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>HTTP_COOKIE</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
A list of cookies defined for that URL.<A
CLASS="indexterm"
NAME="AUTOID-24216"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>HTTP_FROM</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The email address of the user making the query (many
browsers do not support this variable).<A
CLASS="indexterm"
NAME="AUTOID-24222"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>HTTP_REFERER</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The URL of the document the client read before accessing
the CGI program.<A
CLASS="indexterm"
NAME="AUTOID-24228"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>HTTP_USER_AGENT</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The browser the client is using to issue the request.<A
CLASS="indexterm"
NAME="AUTOID-24234"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>PATH_INFO</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
Extra path information passed to a CGI program.<A
CLASS="indexterm"
NAME="AUTOID-24240"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>PATH_TRANSLATED</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The translated version of the path given by the
variable PATH_INFO.<A
CLASS="indexterm"
NAME="AUTOID-24246"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>QUERY_STRING</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The query information passed to the program. It is appended to 
the URL following a question mark (<CODE
CLASS="literal"
>?</CODE
>).<A
CLASS="indexterm"
NAME="AUTOID-24253"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>REMOTE_ADDR</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The remote IP address from which the user is making the request.<A
CLASS="indexterm"
NAME="AUTOID-24259"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>REMOTE_HOST</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The remote hostname from which the user is making the request.<A
CLASS="indexterm"
NAME="AUTOID-24265"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>REMOTE_IDENT</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The user making the request.<A
CLASS="indexterm"
NAME="AUTOID-24271"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>REMOTE_USER</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The authenticated name of the user making the query.<A
CLASS="indexterm"
NAME="AUTOID-24277"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>REQUEST_METHOD</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The method with which the information request was issued (e.g., GET,
POST, HEAD).<A
CLASS="indexterm"
NAME="AUTOID-24283"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>SCRIPT_NAME</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The virtual path (e.g., <EM
CLASS="emphasis"
>/cgi-bin/program.pl</EM
>) of the
script being executed.<A
CLASS="indexterm"
NAME="AUTOID-24290"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>SERVER_NAME</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The server's hostname or IP address.<A
CLASS="indexterm"
NAME="AUTOID-24296"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>SERVER_PORT</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The port number of the host on which the server is running.<A
CLASS="indexterm"
NAME="AUTOID-24302"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>SERVER_PROTOCOL</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The name and revision number of the server protocol.<A
CLASS="indexterm"
NAME="AUTOID-24308"
></A
></P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>SERVER_SOFTWARE</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> 
The name and version of the server software that is answering the
client request.<A
CLASS="indexterm"
NAME="AUTOID-24314"
></A
></P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>Here's a simple Perl CGI script that uses environment variables
to display various information about the server:

<BLOCKQUOTE
CLASS="screen"
><PRE
CLASS="screen"
>#!/usr/local/bin/perl

print &lt;&lt; EOF
Content-type: text/html

&lt;HTML&gt;
&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;
&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;
&lt;HR&gt;&lt;PRE&gt;
Server Name:        $ENV{'SERVER_NAME'}&lt;BR&gt;
Running on Port:    $ENV{'SERVER_PORT'}&lt;BR&gt;
Server Software:    $ENV{'SERVER_SOFTWARE'}&lt;BR&gt;
Server Protocol:    $ENV{'SERVER_PROTOCOL'}&lt;BR&gt;
CGI Revision:       $ENV{'GATEWAY_INTERFACE'}&lt;BR&gt;
&lt;HR&gt;&lt;/PRE&gt;
&lt;/BODY&gt;&lt;/HTML&gt;</PRE
></BLOCKQUOTE
>

The preceding program outputs five environments as
an HTML document. In Perl, you can access 
the environment variables with the <CODE
CLASS="literal"
>%ENV</CODE
> hash.
Here's typical output of the program:

<BLOCKQUOTE
CLASS="screen"
><PRE
CLASS="screen"
>&lt;HTML&gt;
&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;
&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;
&lt;HR&gt;&lt;PRE&gt;
Server Name:          www.whatever.com
Running on Port:      80
Server Software:      NCSA/1.4.2
Server Protocol:      HTTP/1.0
CGI Revision:         CGI/1.1
&lt;HR&gt;&lt;/PRE&gt;
&lt;/BODY&gt;&lt;/HTML&gt;</PRE
></BLOCKQUOTE
>
<A
CLASS="indexterm"
NAME="AUTOID-24320"
></A
><A
CLASS="indexterm"
NAME="AUTOID-24321"
></A
><A
CLASS="indexterm"
NAME="AUTOID-24322"
></A
></P
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch09_03.htm"
TITLE="9.3 Extra Path Information"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 9.3 Extra Path Information"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Perl in a Nutshell"
><IMG
SRC="../gifs/txthome.gif"
ALT="Perl in a Nutshell"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="CHAPTER"
HREF="ch10_01.htm"
TITLE="10. The CGI.pm Module"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 10. The CGI.pm Module"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>9.3 Extra Path Information</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>10. The CGI.pm Module</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
></P
></DIV
<p><!-- LIBRARY NAV BAR --> <img src="../gifs/smnavbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links"><p> <a href="copyrght.htm">Copyright &copy; 2001</a> O'Reilly &amp; Associates. All rights reserved.</font> </p> <map name="library-map"> <area shape="rect" coords="2,-1,79,99" href="../index.htm"><area shape="rect" coords="84,1,157,108" href="index.htm"><area shape="rect" coords="162,2,248,125" href="../prog/index.htm"><area shape="rect" coords="253,2,326,130" href="../advprog/index.htm"><area shape="rect" coords="332,1,407,112" href="../cookbook/index.htm"><area shape="rect" coords="414,2,523,103" href="../sysadmin/index.htm"></map> </BODY
></HTML
>
