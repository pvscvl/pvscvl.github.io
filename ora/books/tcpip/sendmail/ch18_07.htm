<html><head>
<title>[Chapter 18] 18.7 Pitfalls</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T18:48:11Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch18_01.htm" title="18. Compile and Install sendmail"><link rel="prev" href="ch18_06.htm" title="18.6 Install sendmail"><link rel="next" href="ch18_08.htm" title="18.8 Alphabetized Reference"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch18_06.htm" title="18.6 Install sendmail"><img src="../gifs/txtpreva.gif" alt="Previous: 18.6 Install sendmail" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 18<br>Compile and Install sendmail</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch18_08.htm" title="18.8 Alphabetized Reference"><img src="../gifs/txtnexta.gif" alt="Next: 18.8 Alphabetized Reference" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-18-SECT-7">18.7 Pitfalls</A
></H2
><ul class="itemizedlist"><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-10307"></A
>Before replacing your current <em class="emphasis">sendmail</EM
> with a new version,
be sure that the queue is empty. The new version may not be able
to properly process old (or different) 

style queued files.
[10]
After running the new <em class="emphasis">sendmail</EM
> for the first time, look
in the queue directory for filenames that start with an
uppercase <code class="literal">Q</CODE
>. See <a class="xref" href="ch23_03.htm#SML2-CH-23-SECT-3-5" title="A Bogus qf File (V8 only): Qf">Section 23.3, "A Bogus qf File (V8 only): Qf"</A
>
for a description
of why these files appear and what to do about them.</P
><blockquote class="footnote"><p class="para">[10] V8 <em class="emphasis">sendmail</EM
> can read old queue files but may be unable
to read some vendor queue files. If this is a problem, you may
have to run the old and new versions in parallel (with separate
queue directories) until the old queue has been emptied.</P
></BLOCKQUOTE
></LI
><li class="listitem"><p class="para">If you change the location of the queue to a different disk,
be sure that disk is mounted (in <em class="emphasis">/etc/rc</EM
>) before
the <em class="emphasis">sendmail</EM
> daemon is started. If <em class="emphasis">sendmail</EM
> starts
first, there is a risk that messages will be queued in the
mount point before the disk is mounted. This will result in
mysteriously vanishing mail.</P
></LI
><li class="listitem"><p class="para">Always save the old <em class="emphasis">sendmail</EM
> and configuration file.
The new version may work fine for a while, then suddenly fail.
If the failure is difficult to diagnose, you may need to
run the old version while you fix the new version.
But beware that the old version may not be able to read the queue
files created by the new version.</P
></LI
><li class="listitem"><p class="para">Some operating systems allow disks to be mounted such that
<em class="emphasis">suid</EM
> permissions are disallowed. If you relocate 
<em class="emphasis">sendmail</EM
>, avoid locating it on such a disk.</P
></LI
><li class="listitem"><p class="para">Don't be mistaken in the belief that <em class="emphasis">nis</EM
> will correctly give
you MX for hosts. If, after compiling and installing
<em class="emphasis">sendmail</EM
>, you find that you cannot send mail to hosts using MX
records, you should recompile with NAMED_BIND defined (see
<a class="xref" href="ch18_08.htm" title="">Section 18.8.23, NAMED-BIND</A
>). Also note that a misconfigured 
service-switch file can also prevent proper MX lookups
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.61, ServiceSwitchFile</A
>).</P
></LI
></UL
><p class="para"></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch18_06.htm" title="18.6 Install sendmail"><img src="../gifs/txtpreva.gif" alt="Previous: 18.6 Install sendmail" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch18_08.htm" title="18.8 Alphabetized Reference"><img src="../gifs/txtnexta.gif" alt="Next: 18.8 Alphabetized Reference" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">18.6 Install sendmail</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">18.8 Alphabetized Reference</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
