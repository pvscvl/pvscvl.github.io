<html><head>
<title>[Appendix C] C.2 Get the Source</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T22:50:09Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appc_01.htm" title="C. The Berkeley DB Database"><link rel="prev" href="appc_01.htm" title="C.1 Overview"><link rel="next" href="appc_03.htm" title="C.3 Compile and Install"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appc_01.htm" title="C.1 Overview"><img src="../gifs/txtpreva.gif" alt="Previous: C.1 Overview" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Appendix C<br>The Berkeley DB Database</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appc_03.htm" title="C.3 Compile and Install"><img src="../gifs/txtnexta.gif" alt="Next: C.3 Compile and Install" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-AP-C-SECT-2">C.2 Get the Source</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-63140"></A
><a class="indexterm" name="AUTOID-63143"></A
><a class="indexterm" name="AUTOID-63146"></A
><b class="emphasis.bold">Do not</B
> use the version of <em class="emphasis">db</EM
> that was distributed on
the Net2 tape. It is riddled with bugs.</P
><p class="para"><b class="emphasis.bold">Do</B
> get the latest distribution of <em class="emphasis">db</EM
> via anonymous
FTP from <a class="systemitem.ftpserver" href="../../../WebStripper/protected.html#link=ftp://ftp.CS.Berkeley.EDU">ftp.CS.Berkeley.EDU</A
>. The file
<a class="systemitem.url" href="../../../WebStripper/protected.html#link=ftp://ftp.cs.berkeley.edu/ucb/4bsd/db.tar.Z">ucb/4bsd/db.tar.Z</A
>is a symbolic link that always points to the latest distribution.
That file is a compressed, <em class="emphasis">tar</EM
>(1) archive and can be extracted
like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">% zcat db.tar.Z | tar xvf -</PRE
></BLOCKQUOTE
></P
><p class="para">The result will be creation of a new directory with the name
<em class="emphasis">db</EM
>.<em class="emphasis">something</EM
>, where the <em class="emphasis">something</EM
> is the
latest version number.</P
><p class="para">To compile the database library, you need to change into that
directory. A listing of its contents might look like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">Makefile.inc    changelog       include         test
PORT            db              man

README          docs            mpool
btree           hash            recno</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-63167"></A
>Inside the <em class="emphasis">db</EM
> distribution directory is a subdirectory
called <code class="literal">PORT</CODE
>. In order to compile, change first into that subdirectory
and list the files there:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>cd PORT</B
></CODE
>
% <code class="userinput"><b>ls</B
></CODE
>
Makefile        dgux.5.4        osf.1.0.2       sunos.4.1.1
README          hpux.8.07       osf.1.3         sunos.4.1.2
aix.3.2         hpux.9.01       osf.2.0         sunos.4.1.3
bsd.4.4         include         ptx.2.0         sunos.5.2
bsdi.1.0        irix.4.05F      sinix.5.41      ultrix.4.2
clib            linux           solaris.2.2     ultrix.4.3</PRE
></BLOCKQUOTE
></P
><p class="para">Always read the <code class="literal">README</CODE
> file first. Then select the
directory that is most suitable for your machine, say, <em class="emphasis">sunos.4.1.3</EM
>.
[1]
Change into it. It will look kind of bare, but that is okay.</P
><blockquote class="footnote"><p class="para">[1] Note that the README file describes how to port <em class="emphasis">db</EM
> to
systems that are not currently supported.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>cd sunos.4.1.3</B
></CODE
>
% <code class="userinput"><b>ls</B
></CODE
>
Makefile        clib            include         sys</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-63186"></A
>If you elected to include support for both NDBM and NEWDB in
<a class="xref" href="ch33_01.htm" title="Enable at Compile Time">Section 33.1, "Enable at Compile Time"</A
>, you will need to make <em class="emphasis">Makefile</EM
>
writable and edit it. (If you selected only NEWDB,
you should skip this step.)
This is necessary because your system's <em class="emphasis">ndbm</EM
>(3) will confict
with the internal <em class="emphasis">ndbm</EM
> of <em class="emphasis">db</EM
> and cause <em class="emphasis">sendmail</EM
>
to fail in spectacular ways.</P
><p class="para">Make <em class="emphasis">Makefile</EM
> writable, edit it, and remove all references
to <code class="literal">ndbm.o</CODE
>. Then remove the  file from
the <em class="emphasis">include</EM
> directory:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>rm include/ndbm.h</B
></CODE
></PRE
></BLOCKQUOTE
></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appc_01.htm" title="C.1 Overview"><img src="../gifs/txtpreva.gif" alt="Previous: C.1 Overview" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appc_03.htm" title="C.3 Compile and Install"><img src="../gifs/txtnexta.gif" alt="Next: C.3 Compile and Install" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">C.1 Overview</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">C.3 Compile and Install</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
