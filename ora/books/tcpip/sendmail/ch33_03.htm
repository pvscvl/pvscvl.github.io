<html><head>
<title>[Chapter 33] 33.3 The K Configuration Command</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T20:22:30Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch33_01.htm" title="33. Database Macros"><link rel="prev" href="ch33_02.htm#SML2-CH-33-SECT-2-1-1" title="33.2 Create Files with makemap"><link rel="next" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="33.4 Use Maps with $( and $) in Rules"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch33_02.htm#SML2-CH-33-SECT-2-1-1" title="33.2 Create Files with makemap"><img src="../gifs/txtpreva.gif" alt="Previous: 33.2 Create Files with makemap" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 33<br>Database Macros</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="33.4 Use Maps with $( and $) in Rules"><img src="../gifs/txtnexta.gif" alt="Next: 33.4 Use Maps with $( and $) in Rules" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-33-SECT-3">33.3 The K Configuration Command</A
></H2
><p class="para"><a class="indexterm" name="SML2-CH-33-IX-K-CONFIGURATION-COMMAND"></A
>The <code class="literal">K</CODE
> configuration command is used to associate a
symbolic name with a database file. The symbolic name
will later be used in the RHS of rules.
The form of the <code class="literal">K</CODE
> command looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">K<code class="replaceable"><i>name class args</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>name</I
></CODE
> is the symbolic name. The <code class="replaceable"><i>class</I
></CODE
> is the kind
of database to use (see <a class="xref" href="#SML2-CH-33-SECT-3-2" title="The class">Section 33.3.2, "The class"</A
>).
The <code class="replaceable"><i>args</I
></CODE
> specifies the location and properties of the database file
(see <a class="xref" href="#SML2-CH-33-SECT-3-3" title="The args">Section 33.3.3, "The args"</A
>).
We describe each in turn.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-33-SECT-3-1">33.3.1 The name</A
></H3
><p class="para">The <code class="replaceable"><i>name</I
></CODE
> portion of the <code class="literal">K</CODE
> configuration command immediately
follows the <code class="literal">K</CODE
>. Whitespace between the <code class="literal">K</CODE
> and the
<code class="replaceable"><i>name</I
></CODE
> is optional.</P
><p class="para"><blockquote class="screen"><pre class="screen">K <code class="replaceable"><i>name class args</I
></CODE
>
 <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
 <i class="lineannotation">optional whitespace</I
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;The name must begin with a letter or digit and may contain only
letters, digits, and the underscore character. For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">K local_hosts      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> good</I
>
K $andCents        <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> bad</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If you begin a <code class="replaceable"><i>name</I
></CODE
> with a bad character, the following error
will be printed and that <code class="literal">K</CODE
> line will be ignored:</P
><p class="para"><blockquote class="screen"><pre class="screen"><i class="lineannotation">configfile</I
>: line <code class="replaceable"><i>num</I
></CODE
>: readcf: config K line: no map name</PRE
></BLOCKQUOTE
></P
><p class="para">If a bad character appears in the middle of a name, the part preceding the
bad character will be taken as the <code class="replaceable"><i>name</I
></CODE
>, and the part
following the bad character will be taken as the <code class="replaceable"><i>class</I
></CODE
>. For
example, the <code class="replaceable"><i>name</I
></CODE
> <code class="literal">me@home</CODE
> will produce this error:</P
><p class="para"><blockquote class="screen"><pre class="screen"><i class="lineannotation">configfile</I
>: line <code class="replaceable"><i>num</I
></CODE
>: readcf: map me: class home not available</PRE
></BLOCKQUOTE
></P
><p class="para">The case of the letters in <code class="replaceable"><i>name</I
></CODE
> does not matter. 
All names are converted to lowercase before they are stored.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-33-SECT-3-2">33.3.2 The class</A
></H3
><p class="para">Recall that the <code class="replaceable"><i>class</I
></CODE
> portion of the <code class="literal">K</CODE
> configuration
command follows the <code class="literal">name</CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">K<code class="replaceable"><i>name class args</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Note that whitespace between the <code class="literal">name</CODE
> and the <code class="literal">class</CODE
>
may be a joined indented line, which allows commenting and improves
readability:</P
><p class="para"><blockquote class="screen"><pre class="screen">K<code class="replaceable"><i>name        </I
></CODE
># Why this name
<code class="replaceable"><i>        class     </I
></CODE
># Why this class
<code class="replaceable"><i>        args      </I
></CODE
># and so on</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">class</CODE
> is the database type. It must be
one of the classes listed in
<a class="xref" href="#SML2-CH-33-TAB-2" title="Possible K Command Classes">Table 33.3</A
>.<a class="indexterm" name="AUTOID-37295"></A
></P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-33-TAB-2">Table 33.3: Possible K Command Classes</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Class</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">btree</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.1</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Berkeley's <em class="emphasis">db</EM
> form of database</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">bestmx</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.2, bestmx</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Look up the best MX record for a host</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">dbm</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.3</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Really <em class="emphasis">ndbm</EM
> supplied with most versions of UNIX</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">dequote</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.4, dequote</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">A pseudo map for removing quotation marks</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">hash</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.5, hash</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Berkeley's <em class="emphasis">db</EM
> form of database</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">hesiod</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.6</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">MIT network user authentication services</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">host</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="$[ and $]: A Special Case">Section 33.4.3, "$[ and $]: A Special Case"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal table to store and look up hostnames</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">implicit</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.8, implicit</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Search for an <em class="emphasis">aliases</EM
> database file</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.9</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.8 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The Lightweight Directory Access Protocol</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">netinfo</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.10</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">NeXT Computers network information services</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nis</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.11</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Sun's Network Information Services (NIS)</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nisplus</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.12</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Sun's newer Network Information Services (NIS+)</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">null</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.13, null</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Provide a never found service</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">program</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.14, program</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Run an external program to look up the key</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">sequence</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.15, sequence</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Search a series of maps</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">stab</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.16, stab</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internally load aliases into the symbol table</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">switch</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.17, switch</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal hook to auto-build sequences</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">text</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.18, text</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Look up in flat text files</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">userdb</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.19, userdb</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Look up in the User Database</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">user</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch33_08.htm" title="">Section 33.8.20, user</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Look up local passwd information</P
></TD
></TR
></TBODY
></TABLE
><p class="para">All of these classes are described in <a class="xref" href="ch33_08.htm" title="Alphabetized Reference">Section 33.8, "Alphabetized Reference"</A
>  at the end
of this chapter. If the <code class="replaceable"><i>class</I
></CODE
> is not one of those listed,
or if support for the <code class="replaceable"><i>class</I
></CODE
> was not compiled in, the following error
is printed and the <code class="literal">K</CODE
> command is ignored:</P
><p class="para"><blockquote class="screen"><pre class="screen"><i class="lineannotation">configfile</I
>: line <code class="replaceable"><i>num</I
></CODE
>: readcf: map mehome: class <i class="lineannotation">badclass</I
> not available</PRE
></BLOCKQUOTE
></P
><p class="para">The case of the <code class="replaceable"><i>class</I
></CODE
> is ignored by <em class="emphasis">sendmail</EM
>. That is,
<code class="literal">hash</CODE
>, <code class="literal">Hash</CODE
>, and <code class="literal">HASH</CODE
> are all the same.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-33-SECT-3-3">33.3.3 The args</A
></H3
><p class="para">The <code class="replaceable"><i>args</I
></CODE
> of the <code class="literal">K</CODE
> configuration command follow symbolic name and class type:</P
><p class="para"><blockquote class="screen"><pre class="screen">K<code class="replaceable"><i>name class args</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>args</I
></CODE
> specify
(among other things) the location of the database file or the name
of a network map. The <code class="literal">args</CODE
>
is like a miniature command line, and its general form looks
like this:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="replaceable"><i>switches file_or_map</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>switches</I
></CODE
> are letters prefixed with a <code class="literal">-</CODE
>
character that modify the use of the database. (We'll discuss
them in the next section.) The <code class="replaceable"><i>file_or_map</I
></CODE
>
is the location of the database file or the name of a network
map. The <code class="replaceable"><i>file_or_map</I
></CODE
> should exclude the <em class="emphasis">.pag</EM
> and <em class="emphasis">.dir</EM
>
suffixes for <em class="emphasis">dbm</EM
> class files and exclude
the <em class="emphasis">.db</EM
> suffix for <em class="emphasis">hash</EM
> or <em class="emphasis">btree</EM
> class files.</P
><p class="para">A database or map is opened for reading when the configuration
file is processed. If the <code class="replaceable"><i>file</I
></CODE
> cannot be opened (and
the <code class="literal">-o</CODE
> is omitted; see <a class="xref" href="#SML2-CH-33-SECT-3-4-8" title="-o  the database file is optional (V8.1 and above)">Section 33.3.4.8, "-o  the database file is optional (V8.1 and above)"</A
>), an appropriate error
is printed. The <code class="replaceable"><i>file_or_map</I
></CODE
> should be an absolute pathname
of a file (such as <em class="emphasis">/etc/uuhosts</EM
>)
or a literal network map name (such as <em class="emphasis">hosts.byname</EM
>).
An <code class="literal">nis</CODE
> map specification can include a domain:</P
><p class="para"><blockquote class="screen"><pre class="screen">map@domain</PRE
></BLOCKQUOTE
></P
><p class="para">Relative filenames (names that omit a leading <code class="literal">/</CODE
>) are interpreted
as relative to the current directory of the process that invoked
<em class="emphasis">sendmail</EM
> and should never be used.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-33-SECT-3-4">33.3.4 The switches</A
></H3
><p class="para">The <code class="replaceable"><i>switches</I
></CODE
> must follow the <code class="replaceable"><i>class</I
></CODE
> and precede
the <code class="replaceable"><i>file_or_map</I
></CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">K<code class="replaceable"><i>name class switches file_or_map</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">If any <code class="replaceable"><i>switches</I
></CODE
> follow <code class="replaceable"><i>file_or_map</I
></CODE
>, 
they are silently ignored.
[3]
All <code class="replaceable"><i>switches</I
></CODE
> begin with a <code class="literal">-</CODE
> character and
are listed in
<a class="xref" href="#SML2-CH-33-TAB-3" title="K Command Switches">Table 33.4</A
>.</P
><blockquote class="footnote"><p class="para">[3] This is true as of version 8.8.4. Future versions
may change the semantics of the <code class="literal">K</CODE
> line such that
switches may follow.</P
></BLOCKQUOTE
><table class="table"><caption class="table"><a class="title" name="SML2-CH-33-TAB-3">Table 33.4: K Command Switches</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Switch</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-A</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-1" title="-A  append values for duplicate keys (V8.7 and above)">Section 33.3.4.1, "-A  append values for duplicate keys (V8.7 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Append values for duplicate keys</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-a</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-2" title="-a  append tag on successful match (V8.1 and above)">Section 33.3.4.2, "-a  append tag on successful match (V8.1 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Append tag on successful match</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-f</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-3" title="-f  don't fold keys to lowercase (V8.1 and above)">Section 33.3.4.3, "-f  don't fold keys to lowercase (V8.1 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Don't fold keys to lowercase</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-k</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-4" title="-k  specify column for key (V8.7 and above)">Section 33.3.4.4, "-k  specify column for key (V8.7 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Specify column for key</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-m</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-5" title="-m  suppress replacement on match (V8.1 and above)">Section 33.3.4.5, "-m  suppress replacement on match (V8.1 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Suppress replacement on match</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-N</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-6" title="-N  append a null byte to all keys (V8.1 and above)">Section 33.3.4.6</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Append a null byte to all keys</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-O</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-7" title="-O  adaptive versus never add a null (V8.2 and above)">Section 33.3.4.7, "-O  adaptive versus never add a null (V8.2 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.2 and above</TD
><td class="entry" rowspan="1" colspan="1">Adaptive versus never add a null</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-o</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-8" title="-o  the database file is optional (V8.1 and above)">Section 33.3.4.8</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">The database file is optional</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-q</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-9" title="-q  don't strip quotes from key (V8.7 and above)">Section 33.3.4.9, "-q  don't strip quotes from key (V8.7 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Don't strip quotes from key</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-s</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-10" title="-s  space replacement character (V8.7 and above)">Section 33.3.4.10, "-s  space replacement character (V8.7 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Space replacement character</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-v</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-11" title="-v  specify the value's column (V8.7 and above)">Section 33.3.4.11, "-v  specify the value's column (V8.7 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Specify the value's column</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-z</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-33-SECT-3-4-12" title="-z  specify the column delimiter (V8.7 and above)">Section 33.3.4.12, "-z  specify the column delimiter (V8.7 and above)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Specify the column delimiter</TD
></TR
></TBODY
></TABLE
><p class="para">If a switch other than those listed is specified,
that switch is silently ignored.</P
><p class="para">Not all switches work with all classes. Some classes use many
switches; others use none. The switches that are used by each class
are shown in 
<a class="xref" href="#SML2-CH-33-TAB-4" title="Which Class Uses Which Switches">Table 33.5</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-33-TAB-4">Table 33.5: Which Class Uses Which Switches</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Class</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Switches</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">btree   </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">-A -a -f    -m -N -O -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">bestmx  </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a                   -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">dbm     </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">-A -a -f    -m -N -O -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">dequote </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a                      -s</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">hash    </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">-A -a -f    -m -N -O -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">hesiod  </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a       -m       -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">host    </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a       -m          -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">implicit</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">                        -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">ldapx   </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a -f    -m -N -O -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">netinfo </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a    -k -m          -q    -v</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nisplus </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a -f -k -m       -o -q    -v -z</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nis     </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a -f    -m       -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">null    </TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">program </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a       -m       -o -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">sequence</TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">stab    </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">                        -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">switch  </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">                        -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">text    </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a -f -k -m       -o -q    -v -z</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">userdb  </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a -f    -m          -q</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">user    </TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">   -a       -m          -q    -v</CODE
></TD
></TR
></TBODY
></TABLE
><p class="para">Some classes of databases use special switches that are not available
to the broad class of databases. Others redefine the meaning of some
switches. These special switches are shown
in
<a class="xref" href="#SML2-CH-33-TAB-5" title="Specialty Class Switches">Table 33.6</A
>.
Future versions of <em class="emphasis">sendmail</EM
> may be changed in such a way that it
may be possible to have only one list.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-33-TAB-5">Table 33.6: Specialty Class Switches</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Switch</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Class or Vendor</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-b</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Base from which to begin the search</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-d</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Sun</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Use domain wide information (see <a class="xref" href="appd_03.htm" title="K Command's -d switch">Section 38.16, "K Command's -d switch"</A
>)</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-h</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Host that serves this network database</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-l</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Time limit to timeout connection</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-n</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Retrieve attribute names only, not values</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-p</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Port to use when connecting to host</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-R</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Don't auto chase referrals</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">-s</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ldapx</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Search scope of &quot;base,&quot; &quot;one,&quot; or &quot;sub&quot;</P
></TD
></TR
></TBODY
></TABLE
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-1">33.3.4.1 -A  append values for duplicate keys (V8.7 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37771"></A
><a class="indexterm" name="AUTOID-37773"></A
>Ordinarily, when <em class="emphasis">sendmail</EM
> builds (rebuilds) an aliases database,
it objects to duplicate keys on the left of the colon:</P
><p class="para"><blockquote class="screen"><pre class="screen">staff:  bill
staff:  leopold        <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> this is an error</I
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;But sometimes, in automating for example, such duplicates are necessary.
In such instances, the <code class="literal">-A</CODE
> switch can be used with the
<code class="literal">AliasFile</CODE
> (<code class="literal">A</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.1, AliasFile (A)</A
>)
to cause duplicates to be silently appended:</P
><p class="para"><blockquote class="screen"><pre class="screen">staff:  bill
staff:  leopold
<i class="lineannotation">... silently modified by sendmail to internally become</I
>
staff:  bill, leopold</PRE
></BLOCKQUOTE
></P
><p class="para">Note that this process is further illustrated in <a class="xref" href="ch24_04.htm#SML2-CH-24-SECT-4-2" title="Duplicate Entries and Automation">Section 24.4.4, "Duplicate Entries and Automation"</A
>.</P
><p class="para">The <code class="literal">-A</CODE
> database switch is useful only with alias files, because
those are the only files that <em class="emphasis">sendmail</EM
> rebuilds on its own.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-2">33.3.4.2 -a  append tag on successful match (V8.1 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37796"></A
>When a key is looked up in a database (from inside the <code class="literal">$(</CODE
> and
<code class="literal">$)</CODE
> operators of the RHS of rules), a successfully found
key is replaced by its data. If the <code class="literal">-a</CODE
> switch is
given, the text following that switch, up to the first delimiting
whitespace character, is appended to the replacement data. For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">-a              <i class="lineannotation">appends</I
>  <i class="lineannotation">nothing</I
>
-a.             <i class="lineannotation">appends</I
>  .
-a,MAGICTOKEN   <i class="lineannotation">appends</I
>  ,MAGICTOKEN</PRE
></BLOCKQUOTE
></P
><p class="para">The text to be appended is taken literally. Quotation marks and
backslashed characters are included without interpretation, so
whitespace cannot be included in that text. Because the rewritten
RHS is normalized as an address, special address expressions
(such as parentheses) should be avoided.
The use of appended text is one of two methods used for recognizing
a successful lookup in rules. 
We'll discuss the other, <code class="literal">$:</CODE
>, in <a class="xref" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="Specify a Default with $:">Section 33.4.1, "Specify a Default with $:"</A
>.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-3">33.3.4.3 -f  don't fold keys to lowercase (V8.1 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37813"></A
><a class="indexterm" name="AUTOID-37815"></A
>Ordinarily, <em class="emphasis">sendmail</EM
> will normalize a key to lowercase
before looking it up in the database. If the keys in the database
are case-sensitive (&quot;TEX&quot; is considered different from &quot;tex,&quot; for example),
the <code class="literal">-f</CODE
> switch should be used to prevent this normalization.
Note that if the <code class="literal">-f</CODE
> switch is omitted (the default), the database 
must have been created with all lowercase keys (also the default).</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-4">33.3.4.4 -k  specify column for key (V8.7 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37824"></A
><a class="indexterm" name="AUTOID-37826"></A
>Beginning with V8.7, <em class="emphasis">sendmail</EM
> began to support a flat text-file
form of database. The <em class="emphasis">/etc/hosts</EM
> file is an example of
such a flat file, in that it is organized in a line-by-line manner:</P
><p class="para"><blockquote class="screen"><pre class="screen">123.45.67.89      here.our.domain</PRE
></BLOCKQUOTE
></P
><p class="para">When such files are read as databases (with the <code class="literal">text</CODE
> class;
see <a class="xref" href="ch33_08.htm" title="">Section 33.8.18</A
>), you need to specify which column is the
key and which is the value.</P
><p class="para">For <code class="literal">nisplus</CODE
> and <code class="literal">netinfo</CODE
> maps, the <code class="literal">-k</CODE
> switch specifies the
name (text) of the desired column.</P
><p class="para">When the <code class="literal">-k</CODE
> switch specifies which column is the key, its absence
defaults to 0 for the <code class="literal">text</CODE
> class and to
the name of the zeroth column for the <code class="literal">nisplus</CODE
> class.
Note that the numbered columns are indexed beginning with 0 for the first
and 1 for the second. See also <code class="literal">-v</CODE
> (see <a class="xref" href="#SML2-CH-33-SECT-3-4-11" title="-v  specify the value's column (V8.7 and above)">Section 33.3.4.11</A
>)
for the value's column (<code class="literal">text</CODE
> and <code class="literal">nisplus</CODE
> only)
and <code class="literal">-z</CODE
> (see <a class="xref" href="#SML2-CH-33-SECT-3-4-12" title="-z  specify the column delimiter (V8.7 and above)">Section 33.3.4.12</A
>) for the column delimiter
(<code class="literal">text</CODE
> only).</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-5">33.3.4.5 -m  suppress replacement on match (V8.1 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37853"></A
>Ordinarily, a successful lookup in a database or map causes the
key to be replaced by its value. When the intention is to merely verify
that the key exists (not replace it), the <code class="literal">-m</CODE
> switch
can be used to suppress replacement.
For example, the values that are returned from the <em class="emphasis">hosts.byname</EM
>
NIS map are not generally useful (they contain multiple hostnames).
In looking up a key in this map (with <code class="literal">$(</CODE
> and <code class="literal">$)</CODE
>;
see <a class="xref" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="Use Maps with $( and $) in Rules">Section 33.4</A
>), the <code class="literal">-m</CODE
> switch prevents
those multiple names from wrongly replacing the single hostname
in the key. Note that the <code class="literal">-a</CODE
> (see <a class="xref" href="#SML2-CH-33-SECT-3-4-2" title="-a  append tag on successful match (V8.1 and above)">Section 33.3.4.2</A
>)
can still be used to append a suffix to a successful lookup.
Also, the <code class="literal">$:</CODE
><code class="replaceable"><i>default</I
></CODE
> (see <a class="xref" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="Specify a Default with $:">Section 33.4.1</A
>)
is still used if the lookup fails.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-6">33.3.4.6 -N  append a null byte to all keys (V8.1 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37869"></A
>If a database was created with <em class="emphasis">makemap</EM
>'s <code class="literal">-N</CODE
> switch
(see <a class="xref" href="ch33_02.htm#SML2-CH-33-SECT-2-1-1" title="-N  append a null byte to all keys">Section 33.2.1.3</A
>) to include
the terminating zero byte with each key, this <code class="literal">K</CODE
> configuration
command <code class="literal">-N</CODE
> switch may be specified to force all lookups to
also include a zero byte. Note that <code class="literal">-N</CODE
> is not needed for the
<code class="literal">nis</CODE
> class and, if included, is ignored. See also <code class="literal">-O</CODE
> below.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-7">33.3.4.7 -O  adaptive versus never add a null (V8.2 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37882"></A
>If neither <code class="literal">-N</CODE
> nor <code class="literal">-O</CODE
> is specified,
<em class="emphasis">sendmail</EM
> uses an adaptive algorithm to decide
whether or not to look for the terminating zero byte.
The algorithm starts by accepting either. If the first key looked up
is found to end with a terminating zero byte, the algorithm
will thereafter look only for keys with terminating zero bytes.
If the first key that is looked up is found to not end with a terminating
zero byte, the algorithm will thereafter look only for keys without
terminating zero bytes.</P
><p class="para">If this <code class="literal">-O</CODE
> switch is specified, <em class="emphasis">sendmail</EM
> never tries a zero byte, which
can speed matches.
Note that if both <code class="literal">-N</CODE
> and <code class="literal">-O</CODE
> are specified,
<em class="emphasis">sendmail</EM
> will never try to match at all,
thus causing all lookups to appear to fail.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-8">33.3.4.8 -o  the database file is optional (V8.1 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37896"></A
><a class="indexterm" name="AUTOID-37898"></A
>Ordinarily, <em class="emphasis">sendmail</EM
> will complain if a database file cannot
be opened for reading. If the presence of a database file is optional
(as it may be on certain machines), the <code class="literal">-o</CODE
>
switch should be used to tell <em class="emphasis">sendmail</EM
> that the database is optional.
Note that if a database is optional and cannot be opened, all lookups
will silently fail for rules that use that database.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-9">33.3.4.9 -q  don't strip quotes from key (V8.7 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37906"></A
><a class="indexterm" name="AUTOID-37908"></A
><a class="indexterm" name="AUTOID-37911"></A
><a class="indexterm" name="AUTOID-37914"></A
><a class="indexterm" name="AUTOID-37917"></A
>Ordinarily, <em class="emphasis">sendmail</EM
> strips all the nonescaped quotation marks
(those not prefixed with a backslash)
from a key before looking it up.  For example, the following key:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;Bob \&quot;bigboy\&quot; Roberts \(esq\)&quot;@bob.com</PRE
></BLOCKQUOTE
></P
><p class="para">will have its nonescaped quotation marks removed to end up like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">Bob &quot;bigboy&quot; Roberts (esq)@bob.com</PRE
></BLOCKQUOTE
></P
><p class="para">Note that all escaped characters are de-escaped (have the backslash removed)
during this process.</P
><p class="para">When quotation marks and escaped characters need to be preserved
in a key before it is looked up, you can use the <code class="literal">-q</CODE
> switch
with the <code class="literal">K</CODE
> configuration command. The <code class="literal">-q</CODE
> switch
suppresses dequoting and de-escaping.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-10">33.3.4.10 -s  space replacement character (V8.7 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37934"></A
><a class="indexterm" name="AUTOID-37937"></A
>The <code class="literal">dequote</CODE
> class (see <a class="xref" href="ch33_08.htm" title="">Section 33.8.4</A
>) refuses to
remove quotation marks if doing so will result in an illegal address.
For example, internal space characters are illegal in addresses:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;a b&quot;          <i class="lineannotation"> becomes <img src="../chars/rarr.gif" alt="-&gt;"></I
>      &quot;a b&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">-s</CODE
> switch causes all the quoted space characters to be
changed into a character that you specify just before the dequoting process.</P
><p class="para"><blockquote class="screen"><pre class="screen">Kdequote dequote -s+</PRE
></BLOCKQUOTE
></P
><p class="para">Here, we specify that quoted strings will have quoted spaces converted into
a plus before dequoting. Therefore, the above conversion becomes the following:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;a b&quot;          <i class="lineannotation"> becomes <img src="../chars/rarr.gif" alt="-&gt;"></I
>      a+b</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">-s</CODE
> switch is only of use with the <code class="literal">dequote</CODE
> class.
Note that the <code class="literal">lpadx</CODE
> class
uses the <code class="literal">-s</CODE
> switch differently (see <a class="xref" href="#SML2-CH-33-TAB-5" title="Specialty Class Switches">Table 33.6</A
>
in <a class="xref" href="#SML2-CH-33-SECT-3-4" title="The switches">Section 33.3.4, "The switches"</A
>).</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-11">33.3.4.11 -v  specify the value's column (V8.7 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37962"></A
><a class="indexterm" name="AUTOID-37964"></A
>The manner in which the key and its value are visually displayed
in flat, sequential, text files and certain network services, may not
be directly suitable for use in maps.
A <code class="literal">text</CODE
> class file, for example <em class="emphasis">/etc/hosts</EM
>,
may display the key on the right and the value on the left:</P
><p class="para"><blockquote class="screen"><pre class="screen">123.45.67.89      here.our.domain</PRE
></BLOCKQUOTE
></P
><p class="para">For such circumstances the <code class="literal">-v</CODE
> switch can be used with
the <code class="literal">K</CODE
> command to specify the column or item that will
be returned as the value when a key is matched. For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">Kaddr text -k1 -v0 /etc/hosts</PRE
></BLOCKQUOTE
></P
><p class="para">For <code class="literal">nisplus</CODE
> and <code class="literal">netinfo</CODE
> maps, the <code class="literal">-v</CODE
> switch specifies the
name (text) of the value's column.</P
><p class="para">This <code class="literal">-v</CODE
> switch specifies which column is the value to return. If it is
omitted, it defaults to 0 for the <code class="literal">text</CODE
> class and to
the last named column for the <code class="literal">nisplus</CODE
> class.
Note that text columns are indexed beginning with 0 for the first
and 1 for the second. See also <code class="literal">-k</CODE
> (see <a class="xref" href="#SML2-CH-33-SECT-3-4-4" title="-k  specify column for key (V8.7 and above)">Section 33.3.4.4</A
>)
for the key's column and <code class="literal">-z</CODE
> (see <a class="xref" href="#SML2-CH-33-SECT-3-4-12" title="-z  specify the column delimiter (V8.7 and above)">Section 33.3.4.12</A
>) for
the column delimiter.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-33-SECT-3-4-12">33.3.4.12 -z  specify the column delimiter (V8.7 and above)</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-37990"></A
><a class="indexterm" name="AUTOID-37992"></A
>Flat, sequential text files have columns of information delimited
from each other with a variety of characters:</P
><p class="para"><blockquote class="screen"><pre class="screen">123.45.67.89      here.our.domain          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> /etc/hosts uses a whitespace</I
>
nobody:*:65534:65534::/:                   <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> /etc/passwd uses a colon</I
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">-z</CODE
> switch can be used to specify a delimiter whenever the
default delimiter of whitespace is not appropriate. In the case
of the <em class="emphasis">/etc/passwd</EM
> file, a database declaration might
look like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">Kuid text -z: -k2 -v0 /etc/passwd  # map to convert uid to login name</PRE
></BLOCKQUOTE
></P
><p class="para">The default is whitespace for the <code class="literal">text</CODE
> class. It is
a comma for the <code class="literal">netinfo</CODE
> class.<a class="indexterm" name="AUTOID-38007"></A
></P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch33_02.htm#SML2-CH-33-SECT-2-1-1" title="33.2 Create Files with makemap"><img src="../gifs/txtpreva.gif" alt="Previous: 33.2 Create Files with makemap" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch33_04.htm#SML2-CH-33-SECT-4-2" title="33.4 Use Maps with $( and $) in Rules"><img src="../gifs/txtnexta.gif" alt="Next: 33.4 Use Maps with $( and $) in Rules" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">33.2 Create Files with makemap</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">33.4 Use Maps with $( and $) in Rules</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
