<html><head>
<title>[Chapter 4] How to Run sendmail</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T18:33:06Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part01.htm" title="I. A Tutorial"><link rel="prev" href="ch03_05.htm" title="3.5 Things to Try"><link rel="next" href="ch04_02.htm" title="4.2 Verbose (-v)"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch03_05.htm" title="3.5 Things to Try"><img src="../gifs/txtpreva.gif" alt="Previous: 3.5 Things to Try" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 4</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_02.htm" title="4.2 Verbose (-v)"><img src="../gifs/txtnexta.gif" alt="Next: 4.2 Verbose (-v)" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="SML2-CH-4">4. How to Run sendmail</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="sect1" href="#SML2-CH-4-SECT-1" title="4.1 Become a Mode (-b)">Become a Mode (-b)</A
><br><a class="sect1" href="ch04_02.htm" title="4.2 Verbose (-v)">Verbose (-v)</A
><br><a class="sect1" href="ch04_03.htm" title="4.3 Debugging (-d)">Debugging (-d)</A
><br><a class="sect1" href="ch04_04.htm" title="4.4 Things to Try">Things to Try</A
></P
><p></P
></DIV
><p class="para"></P
><p class="para">One way to run <em class="emphasis">sendmail</EM
>
is to provide it with the name of a recipient as the only
command-line argument. For example, the following
sends a mail message to <code class="literal">george</CODE
>:
[1]<a class="indexterm" name="SML2-CH-4-IX-COMMAND-LINE"></A
></P
><blockquote class="footnote"><p class="para">[1] For now, you can do this only with the system-supplied <em class="emphasis">sendmail</EM
>.
It requires a configuration file that we have not
yet written for our freshly compiled version.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>/usr/lib/sendmail george</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Multiple recipients can also be given.
For example,
the following sends a mail message to <code class="literal">george</CODE
>, <code class="literal">truman</CODE
>,
and <code class="literal">teddy</CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>/usr/lib/sendmail george,truman,teddy</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-2050"></A
><a class="indexterm" name="AUTOID-2053"></A
><a class="indexterm" name="AUTOID-2056"></A
><a class="indexterm" name="AUTOID-2058"></A
>The <em class="emphasis">sendmail</EM
> program accepts
two different kinds of command-line arguments.
Arguments that <em class="emphasis">do not</EM
> begin with a <code class="literal">-</CODE
>
character (such as <code class="literal">george</CODE
>)
are assumed to be recipients.
Arguments that <em class="emphasis">do</EM
> begin with a <code class="literal">-</CODE
> character are taken as switches
that determine the behavior of <em class="emphasis">sendmail</EM
>.
In this chapter we will cover only a few of these switch-style command-line
arguments (see
<a class="xref" href="#SML2-CH-4-TAB-0" title="Some Command-Line Switches">Table 4.1</A
>).
The complete list of command-line switches, along with an
explanation of each, is presented in the reference part of this book
(<a class="xref" href="ch36_01.htm" title="The Command Line">Chapter 36, <cite class="chapter">The Command Line</CITE
></A
>).</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-4-TAB-0">Table 4.1: Some Command-Line Switches</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Flag</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-b</TD
><td class="entry" rowspan="1" colspan="1">Set operating mode</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-v</TD
><td class="entry" rowspan="1" colspan="1">Run in verbose mode</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-d</TD
><td class="entry" rowspan="1" colspan="1">Run in debugging mode</TD
></TR
></TBODY
></TABLE
><div class="sect1"><h2 class="sect1"><a class="title" name="SML2-CH-4-SECT-1">4.1 Become a Mode (-b)</A
></H2
><p class="para"><a class="indexterm" name="SML2-CH-4-IX-B-SWITCH"></A
>The <em class="emphasis">sendmail</EM
> program can function in a number of different ways
depending on which form of <code class="literal">-b</CODE
> argument you use. One form, for example, causes
<em class="emphasis">sendmail</EM
> to display the contents of the queue.
Another causes <em class="emphasis">sendmail</EM
>
to rebuild the <em class="emphasis">aliases</EM
> database.
A complete list of the <code class="literal">-b</CODE
>
command-line mode-setting switches is shown in 
<a class="xref" href="#SML2-CH-4-TAB-1" title="Forms of the -b Command-Line Switch">Table 4.2</A
>.
We will cover only a few in this chapter and will present the others
as this tutorial proceeds.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-4-TAB-1">Table 4.2: Forms of the -b Command-Line Switch</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Form</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-ba</TD
><td class="entry" rowspan="1" colspan="1">Use ARPAnet (Grey Book) protocols</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bD</TD
><td class="entry" rowspan="1" colspan="1">Run as a daemon, but don't fork</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bd</TD
><td class="entry" rowspan="1" colspan="1">Run as a daemon</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bH</TD
><td class="entry" rowspan="1" colspan="1">Purge persistent host status</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bh</TD
><td class="entry" rowspan="1" colspan="1">Print persistent host status</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bi</TD
><td class="entry" rowspan="1" colspan="1">Rebuild alias database</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bm</TD
><td class="entry" rowspan="1" colspan="1">Be a mail sender</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bp</TD
><td class="entry" rowspan="1" colspan="1">Print the queue</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bs</TD
><td class="entry" rowspan="1" colspan="1">Run SMTP on standard input</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bt</TD
><td class="entry" rowspan="1" colspan="1">Test mode: resolve addresses only</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bv</TD
><td class="entry" rowspan="1" colspan="1">Verify: don't collect or deliver</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">-bz</TD
><td class="entry" rowspan="1" colspan="1">Freeze the configuration file (obsolete)</TD
></TR
></TBODY
></TABLE
><p class="para">The effects of some of the options in
<a class="xref" href="#SML2-CH-4-TAB-1" title="Forms of the -b Command-Line Switch">Table 4.2</A
>
can also be achieved by running the <em class="emphasis">sendmail</EM
> executable using different names. 
Those names and a description of their results are shown in
<a class="xref" href="#SML2-CH-4-TAB-2" title="Other Names for sendmail">Table 4.3</A
>.
Each name can be a hard link with, a symbolic
link to, or a copy of <em class="emphasis">sendmail</EM
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-4-TAB-2">Table 4.3: Other Names for sendmail</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Form</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">hoststat</TD
><td class="entry" rowspan="1" colspan="1">-bh</TD
><td class="entry" rowspan="1" colspan="1">Print persistent host status</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">mailq</TD
><td class="entry" rowspan="1" colspan="1">-bp</TD
><td class="entry" rowspan="1" colspan="1">Display the queue</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">newaliases</TD
><td class="entry" rowspan="1" colspan="1">-bi</TD
><td class="entry" rowspan="1" colspan="1">Initialize alias database</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">purgestat</TD
><td class="entry" rowspan="1" colspan="1">-bH</TD
><td class="entry" rowspan="1" colspan="1">Purge persistent host status</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">smtpd</TD
><td class="entry" rowspan="1" colspan="1">-bd</TD
><td class="entry" rowspan="1" colspan="1">Run as a daemon</TD
></TR
></TBODY
></TABLE
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-4-SECT-1-1">4.1.1 Daemon Mode (-bd)</A
></H3
><p class="para"><a class="indexterm" name="SML2-CH-4-IX-MODES-DAEMON"></A
><a class="indexterm" name="SML2-CH-4-IX-DAEMON-MODE"></A
><a class="indexterm" name="SML2-CH-4-IX-B-SWITCH-BD-1"></A
>The <em class="emphasis">sendmail</EM
> program can run as a daemon in the
background, listening for incoming mail from other machines.
The <em class="emphasis">sendmail</EM
> program reads its configuration file only once,
when it first starts as a daemon.
It then continues to run forever,
never reading the configuration file again.
As a consequence, it will never see any changes
to that configuration file.</P
><p class="para">When you change something in the <em class="emphasis">sendmail.cf</EM
>
configuration file, you <em class="emphasis">always</EM
> need to kill and restart the
<em class="emphasis">sendmail</EM
> daemon.
But before you can kill the daemon, you need to know how to correctly
restart it. This information is in the <em class="emphasis">/etc/sendmail.pid</EM
>
file or one of your system <em class="emphasis">rc</EM
> files.</P
><p class="para">On a Berkeley UNIX-based system, for example,
the daemon is usually started like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">/usr/lib/sendmail -bd -q1h</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-2199"></A
>The <code class="literal">-bd</CODE
> command-line switch specifies daemon mode.
The <code class="literal">-q</CODE
> switch tells <em class="emphasis">sendmail</EM
>
how often to look in its queue to process pending mail.
The <code class="literal">-q1h</CODE
> switch says to
process the queue at one (<code class="literal">1</CODE
>) hour (<code class="literal">h</CODE
>) intervals.</P
><p class="para">The actual command to start the <em class="emphasis">sendmail</EM
> daemon on your
system may be different from what we've shown. If you
manage many different brands of systems, you'll need to know how to
start the daemon on all of them.&#13;</P
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-4-SECT-1-1-1">4.1.1.1 Kill and restart, beginning with V8.7</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-2212"></A
><a class="indexterm" name="AUTOID-2214"></A
><a class="indexterm" name="AUTOID-2216"></A
>Killing and restarting the <em class="emphasis">sendmail</EM
> daemon became easier beginning with
V8.7. A single command
[2]
will kill and restart the daemon:</P
><blockquote class="footnote"><p class="para">[2] Provided that the daemon was originally started with a full pathname.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>kill -HUP `head -1 /etc/sendmail.pid`</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">This single command has the same effect as the two commands shown for V8.6 below.&#13;</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-4-SECT-1-1-2">4.1.1.2 Kill and restart, with V8.6</A
></H4
><p class="para">Before you can start the <em class="emphasis">sendmail</EM
> daemon, you need to
make sure there is not a daemon running already.
Beginning with V8.6, the <em class="emphasis">pid</EM
> of the currently
running daemon is found in the first line of the <em class="emphasis">/etc/sendmail.pid</EM
> file.
The processes of killing the daemon looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">% </CODE
><code class="userinput"><b>kill `head -1 /etc/sendmail.pid`</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;After killing the currently running daemon, you can start a
new daemon with the following simple command:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">% </CODE
><code class="userinput"><b>`tail -1 /etc/sendmail.pid`</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"></P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-4-SECT-1-1-3">4.1.1.3 Kill and restart, old versions</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-2245"></A
>Under old versions of <em class="emphasis">sendmail</EM
> you need to use the
<em class="emphasis">ps</EM
>(1) program to find the <em class="emphasis">pid</EM
> of the daemon.
How you run <em class="emphasis">ps</EM
> is different on
BSD UNIX and System V UNIX. For BSD 
UNIX the
command that you use and the output that it produces resemble the following:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">% </CODE
><code class="userinput"><b>ps ax | grep sendmail | grep -v grep</B
></CODE
>
<code class="literal">   99    ?  IW    0:07 /usr/lib/sendmail -bd -q1h</CODE
>
<code class="literal">% </CODE
><code class="userinput"><b>kill 99</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here the leftmost number printed by <em class="emphasis">ps</EM
> (the <code class="literal">99</CODE
>) was used
to kill the daemon.</P
><p class="para">For System V-based systems you use different arguments for the
<em class="emphasis">ps</EM
> command, and its output differs:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">% </CODE
><code class="userinput"><b>ps -ae | grep sendmail</B
></CODE
>
<code class="literal">   99 ?         0:01 sendmail</CODE
>
<code class="literal">% </CODE
><code class="userinput"><b>kill 99</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Under old versions of <em class="emphasis">sendmail</EM
> you must look in your system <em class="emphasis">rc</EM
>
files for the way to restart <em class="emphasis">sendmail</EM
>. We showed how to
find this information in <a class="xref" href="ch03_01.htm" title="The Roles of sendmail">Chapter 3, <cite class="chapter">The Roles of sendmail</CITE
></A
> (see <a class="xref" href="ch03_04.htm" title="Role as a Daemon">Section 3.4, "Role as a Daemon"</A
>).&#13;</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-4-SECT-1-1-4">4.1.1.4 If you forget to kill the daemon</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-2279"></A
>If you forget to kill the daemon before starting a new one,
you may see a stream of messages similar to the following, one printed
every 5 seconds (probably to your console window):</P
><p class="para"><blockquote class="screen"><pre class="screen">getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
getrequests: cannot bind: Address already in use
opendaemonsocket: server SMTP socket wedged: exiting</PRE
></BLOCKQUOTE
></P
><p class="para">This shows that the attempt to run a second daemon failed.
[3]<a class="indexterm" name="AUTOID-2288"></A
><a class="indexterm" name="AUTOID-2289"></A
><a class="indexterm" name="AUTOID-2290"></A
>&#13;</P
><blockquote class="footnote"><p class="para">[3] Note that some multicast-capable versions of UNIX allow multiple
<em class="emphasis">sendmail</EM
> daemons to run simultaneously. This is a known bug in
the SO_REUSEADDR <em class="emphasis">ioctl</EM
>(2) call for TCP under
multicasting. Contact your vendor for a fix.</P
></BLOCKQUOTE
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-4-SECT-1-2">4.1.2 Show Queue Mode (-bp)</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2294"></A
><a class="indexterm" name="AUTOID-2296"></A
><a class="indexterm" name="AUTOID-2299"></A
><a class="indexterm" name="AUTOID-2302"></A
><a class="indexterm" name="AUTOID-2305"></A
><a class="indexterm" name="AUTOID-2308"></A
>The <em class="emphasis">sendmail</EM
> program can also
display the contents of its queue directory. It
can do this in two ways: by running as a program named <em class="emphasis">mailq</EM
>
or by being run as <em class="emphasis">sendmail</EM
> with the <code class="literal">-bp</CODE
>
command-line switch.
Whichever way you run it, the contents
of the queue directory are printed.
If the queue is empty, <em class="emphasis">sendmail</EM
> prints the following:</P
><p class="para"><blockquote class="screen"><pre class="screen">Mail queue is empty</PRE
></BLOCKQUOTE
></P
><p class="para">If, on the other hand, there is mail waiting in the queue,
the output is far more verbose, possibly containing lines similar
to these:</P
><p class="para"><blockquote class="screen"><pre class="screen">.ps 8
                Mail Queue (1 requests)
-Q-ID-- -Size- --Q-Time--- ------Sender/Recipient------
GAA29775*     702 Thu Mar 12 16:51 &lt;you@here.us.edu&gt;
            Deferred: Host fbi.dc.gov is down
                                  &lt;george@fbi.dc.gov&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">Here, the output produced with the <code class="literal">-bp</CODE
> switch
shows that there is only one mail message in the queue. If there
were more, each entry would look pretty much the same as this. Each message
results in at least two lines of output.</P
><p class="para"><a class="indexterm" name="AUTOID-2323"></A
>The first
line shows details about the message and the sender. The
<code class="literal">GAA29775</CODE
> identifies this message in the queue.
The <code class="literal">*</CODE
> shows that this message is locked and currently being
processed.
The <code class="literal">702</CODE
> is the size of the message body in bytes
(the size of the <code class="literal">df</CODE
> file as mentioned in 
<a class="xref" href="ch03_01.htm" title="The Queue Directory">Section 3.1.2, "The Queue Directory"</A
>). 
The date shows when this message was originally queued.
The address shown is the name of the sender.</P
><p class="para">A second line may appear
giving a reason for failure (if there was one).
A message may be queued intentionally or because it couldn't be
delivered. </P
><p class="para">The third and possibly subsequent lines show the addresses of the recipients.</P
><p class="para">The output produced by the <code class="literal">-bp</CODE
> switch is more fully covered in 
<a class="xref" href="ch23_01.htm" title="The Queue">Chapter 23, <cite class="chapter">The Queue</CITE
></A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-4-SECT-1-3">4.1.3 Rebuild Aliases Mode (-bi)</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2338"></A
><a class="indexterm" name="AUTOID-2340"></A
><a class="indexterm" name="AUTOID-2343"></A
><a class="indexterm" name="AUTOID-2346"></A
>Because <em class="emphasis">sendmail</EM
> may have to search through
thousands of names in the <em class="emphasis">aliases</EM
> file, a version of the
file is stored in a separate <em class="emphasis">dbm</EM
>(3) or <em class="emphasis">db</EM
>(3)
database format file.
The use of a database significantly improves lookup speed.</P
><p class="para">Although <em class="emphasis">sendmail</EM
> can automatically update the database
whenever the <em class="emphasis">aliases</EM
> file is changed, there will be times
when you will want to rebuild it yourself.<a class="indexterm" name="AUTOID-2355"></A
>
You do this either by running <em class="emphasis">sendmail</EM
> using
the command <em class="emphasis">newaliases</EM
>
or with the <code class="literal">-bi</CODE
> command-line switch.
The following two commands do the same thing:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">% </CODE
><code class="userinput"><b>newaliases</B
></CODE
>
<code class="literal">% </CODE
><code class="userinput"><b>/usr/lib/sendmail -bi</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">There will be a delay while <em class="emphasis">sendmail</EM
> rebuilds the
<em class="emphasis">aliases</EM
> database; then a summary of what it did is printed:</P
><p class="para"><blockquote class="screen"><pre class="screen">/etc/aliases: 859 aliases, longest 615 bytes, 28096 bytes total</PRE
></BLOCKQUOTE
></P
><p class="para">This line shows that the database
was successfully rebuilt. Beginning with V8.6 <em class="emphasis">sendmail</EM
>, multiple alias files
became possible, so each line (and there might be many) begins with the
name of an alias file. The information then displayed is the number
of aliases processed, the size of the biggest entry
to the right of the <code class="literal">:</CODE
> in the <em class="emphasis">aliases</EM
> file, and
the total number of bytes entered into the database.
Any mistakes in an alias file will also be printed here.</P
><p class="para">The <em class="emphasis">aliases</EM
> file and how to manipulate it are covered in 
<a class="xref" href="ch24_01.htm" title="Aliases">Chapter 24, <cite class="chapter">Aliases</CITE
></A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-4-SECT-1-4">4.1.4 Verify Mode (-bv)</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2381"></A
><a class="indexterm" name="AUTOID-2383"></A
><a class="indexterm" name="AUTOID-2386"></A
><a class="indexterm" name="AUTOID-2389"></A
>A handy tool for checking aliases
is the <code class="literal">-bv</CODE
> command-line switch. It causes
<em class="emphasis">sendmail</EM
> to recursively look up an alias
and report the ultimate real name
that it found. </P
><p class="para">To illustrate, consider the following <em class="emphasis">aliases</EM
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">animals:      farmanimals,wildanimals</CODE
>
<code class="literal">bill-eats:    redmeat</CODE
>
<code class="literal">birds:        farmbirds,wildbirds</CODE
>
<code class="literal">bob-eats:     seafood,whitemeat</CODE
>
<code class="literal">farmanimals:  pig,cow</CODE
>
<code class="literal">farmbirds:    chicken,turkey</CODE
>
<code class="literal">fish:         cod,tuna</CODE
>
<code class="literal">redmeat:      animals</CODE
>
<code class="literal">seafood:      fish,shellfish</CODE
>
<code class="literal">shellfish:    crab,lobster</CODE
>
<code class="literal">ted-eats:     bob-eats,bill-eats</CODE
>
<code class="literal">whitemeat:    birds</CODE
>
<code class="literal">wildanimals:  deer,boar</CODE
>
<code class="literal">wildbirds:    quail</CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Although you can figure out what the name <code class="literal">ted-eats</CODE
>
ultimately expands to, it is far easier to have <em class="emphasis">sendmail</EM
>
do it for you. By using <em class="emphasis">sendmail</EM
>, you have the
added advantage of being assured accuracy, which is especially
important in large and complex <em class="emphasis">aliases</EM
> files.</P
><p class="para"><a class="indexterm" name="AUTOID-2418"></A
><a class="indexterm" name="AUTOID-2421"></A
><a class="indexterm" name="AUTOID-2424"></A
>In addition to expanding aliases, the <code class="literal">-bv</CODE
>
switch performs another important function. It verifies
whether or not the expanded aliases are in fact deliverable.
Consider the following one-line <em class="emphasis">aliases</EM
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen">root:       fred,larry</PRE
></BLOCKQUOTE
></P
><p class="para">Assume that the user <code class="literal">fred</CODE
> is the system administrator
and has an account on the local machine. The user <code class="literal">larry</CODE
>,
however, has left, and his account has been removed. You can
run <em class="emphasis">sendmail</EM
> with the <code class="literal">-bv</CODE
>
switch to find out whether both names are valid:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>/usr/lib/sendmail -bv root</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">This tells <em class="emphasis">sendmail</EM
> to verify the name <code class="literal">root</CODE
>
from the <em class="emphasis">aliases</EM
> file. Since <code class="literal">larry</CODE
> (one of <code class="literal">root</CODE
>'s
aliases) doesn't exist, the output produced looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">larry... User unknown
fred... deliverable: mailer local, user fred</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-2449"></A
></P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch03_05.htm" title="3.5 Things to Try"><img src="../gifs/txtpreva.gif" alt="Previous: 3.5 Things to Try" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_02.htm" title="4.2 Verbose (-v)"><img src="../gifs/txtnexta.gif" alt="Next: 4.2 Verbose (-v)" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">3.5 Things to Try</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">4.2 Verbose (-v)</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
