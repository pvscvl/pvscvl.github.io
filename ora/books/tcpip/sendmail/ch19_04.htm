<html><head>
<title>[Chapter 19] 19.4 m4 Macros by Function</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T19:14:44Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch19_01.htm" title="19. V8 m4 Configuration"><link rel="prev" href="ch19_03.htm#SML2-CH-19-SECT-3-2" title="19.3 The Minimal mc File"><link rel="next" href="ch19_05.htm" title="19.5 Pitfalls"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch19_03.htm#SML2-CH-19-SECT-3-2" title="19.3 The Minimal mc File"><img src="../gifs/txtpreva.gif" alt="Previous: 19.3 The Minimal mc File" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 19<br>V8 m4 Configuration</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch19_05.htm" title="19.5 Pitfalls"><img src="../gifs/txtnexta.gif" alt="Next: 19.5 Pitfalls" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-19-SECT-4">19.4 m4 Macros by Function</A
></H2
><p class="para">The <em class="emphasis">m4</EM
> technique uses a huge number of macros to accomplish the complex
task of creating configuration files for all possible circumstances.
Most are detailed in the reference section at the end of this chapter.
Others are documented in chapters dedicated to particular subjects.
Here, we summarize all <em class="emphasis">m4</EM
> macros by classification or function.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-19-SECT-4-1">19.4.1 Options</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-13726"></A
><a class="indexterm" name="AUTOID-13728"></A
>Options may be set, unset, and changed in your <em class="emphasis">mc</EM
> file with
simple <code class="literal">define</CODE
> statements. For example, the following
line sets the location of the alias file and thus the
<code class="literal">AliasFile</CODE
> (<code class="literal">A</CODE
>) option:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`ALIAS_FILE', `nis:-N mail.aliases')</PRE
></BLOCKQUOTE
></P
><p class="para">Configuring options with the <em class="emphasis">m4</EM
> technique is described in
<a class="xref" href="ch34_03.htm" title="Configuring with V8 m4 Options">Section 34.3, "Configuring with V8 m4 Options"</A
> (with the individual <em class="emphasis">m4</EM
>
option names listed in <a class="xref" href="ch34_03.htm" title="All V8 m4 Options Ordered by m4 Name">Table 34.3</A
> of that section).
Options are described in general in <a class="xref" href="ch34_01.htm" title="Options">Chapter 34, <cite class="chapter">Options</CITE
></A
>.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-19-SECT-4-2">19.4.2 Define Macros</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-13745"></A
>Defined macros may be declared in your <em class="emphasis">mc</EM
> file. Those that are
useful are listed in <a class="xref" href="ch31_08.htm" title="Macros Reserved with the m4 Technique">Table 31.5</A
> of <a class="xref" href="ch31_08.htm" title="Macros with the m4 Technique">Section 31.8, "Macros with the m4 Technique"</A
>.
That section also describes the general technique of defining
macros via <em class="emphasis">m4</EM
>. To illustrate, for example,</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`BITNET_RELAY', `<code class="replaceable"><i>host.domain</I
></CODE
>')</PRE
></BLOCKQUOTE
></P
><p class="para">causes the value <code class="replaceable"><i>host.domain</I
></CODE
> to be assigned to the
<code class="literal">$B</CODE
> macro. Non-<em class="emphasis">m4</EM
> specific defined macros can be
declared with the LOCAL_CONFIG technique (see <a class="xref" href="ch19_06.htm" title="">Section 19.6.30</A
>).</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-19-SECT-4-3">19.4.3 Rules and rule sets</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-13763"></A
><a class="indexterm" name="AUTOID-13766"></A
>The <em class="emphasis">m4</EM
> technique allows custom rules and rule sets to be inserted in
a variety of convenient ways. The complete list of <em class="emphasis">m4</EM
> keywords that
affect rules is shown in 
<a class="xref" href="#SML2-CH-19-TAB-4" title="Rule and Rule Set Keywords">Table 19.5</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-19-TAB-4">Table 19.5: Rule and Rule Set Keywords</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keyword</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Sendmail Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description </TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_CONFIG</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.30</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Add general information and rules</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RULE_0</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.32</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Add rules to rule set 0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RULE_1</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.34</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Add rules to rule set 1</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RULE_2</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.34</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Add rules to rule set 2</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RULE_3</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.35</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Add rules to rule set 3</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RULESETS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.36</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.8 and above</TD
><td class="entry" rowspan="1" colspan="1">Group local rules with others</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_NET_CONFIG</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.37</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Add rules for SMART_HOST</TD
></TR
></TBODY
></TABLE
><p class="para">To illustrate, consider the following technique for adding a rule to rule set 0:</P
><p class="para"><blockquote class="screen"><pre class="screen">LOCAL_RULE_0
R$* &lt;@ $=w . $=m&gt; $*        $#local $: $1      @here.ourdomain</PRE
></BLOCKQUOTE
></P
><p class="para">Here, we add a rule to rule set 0 that accepts any address with a host part
in the class <code class="literal">$=w</CODE
> (see <a class="xref" href="ch32_05.htm" title="">Section 32.5.8, $=w</A
>) that is also in one of the local
domains as listed in the class <code class="literal">$=m</CODE
> (see <a class="xref" href="ch32_05.htm" title="">Section 32.5.3, $=m</A
>) as local address.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-19-SECT-4-4">19.4.4 Masquerading</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-13835"></A
>Masquerading is the process of transforming the local hostname in addresses
into that of another host. This results in the mail message appearing to
come from that other host rather than from the local host. Masquerading
is most often used in domains where email is addressed to the domain
rather than to individual hosts inside the domain.</P
><p class="para">Masquerading usually rewrites
header-sender addresses. 
Some <em class="emphasis">m4</EM
> features allow you also to rewrite envelope addresses.
The complete list of all definitions and features that affect masquerading
is shown in
<a class="xref" href="#SML2-CH-19-TAB-5" title="Defines and Features Affecting Masquerading">Table 19.6</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-19-TAB-5">Table 19.6: Defines and Features Affecting Masquerading</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">What</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Masquerade</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">EXPOSED_USER</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.4, EXPOSED-USER</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">All but these</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FEATURE(allmasquerade)</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.6</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.2 and above</TD
><td class="entry" rowspan="1" colspan="1">The recipient too</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FEATURE(limited_masquerade)</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.12</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.8 and above</TD
><td class="entry" rowspan="1" colspan="1">Only $=M hosts</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FEATURE(masquerade_entire_domain)</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.15</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.8 and above</TD
><td class="entry" rowspan="1" colspan="1">All of a domain</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FEATURE(masquerade_envelope)</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.16</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">The envelope too</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MASQUERADE_AS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.42</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Another host</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MASQUERADE_DOMAIN</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.43, MASQUERADE-DOMAIN</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Other domains</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MASQUERADE_DOMAIN_FILE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.44, MASQUERADE-DOMAIN-FILE</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Other domains</TD
></TR
></TBODY
></TABLE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-19-SECT-4-5">19.4.5 Relays</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-13901"></A
><a class="indexterm" name="AUTOID-13903"></A
><a class="indexterm" name="AUTOID-13906"></A
><a class="indexterm" name="AUTOID-13909"></A
>A relay is a rule that sends all of one type of mail to a specific
destination. One example would be email FAX transmissions.
Clearly, even though local mail should be delivered locally, mail to
the pseudo-user <em class="emphasis">fax</EM
> should always be sent to a special FAX-handling machine.</P
><p class="para">The complete list of relays supported by the V8 <em class="emphasis">sendmail</EM
> <em class="emphasis">m4</EM
>
technique is shown in
<a class="xref" href="#SML2-CH-19-TAB-6" title="Relays">Table 19.7</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-19-TAB-6">Table 19.7: Relays</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Relay</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description </TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">BITNET_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch31_10.htm" title="">Section 31.10.5, $B</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">The BITNET relay</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">DECNET_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch31_10.htm" title="">Section 31.10.9, $C</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">The DECnet relay</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch31_10.htm" title="">Section 31.10.15, $F</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">The FAX relay</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.31, LOCAL-RELAY</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Relay for unqualified users</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LUSER_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch31_10.htm" title="">Section 31.10.23, $L</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7 and above</TD
><td class="entry" rowspan="1" colspan="1">Relay for unknown local users</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL_HUB</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.41, MAIL-HUB</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">All local delivery on a central server</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMART_HOST</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.47, SMART-HOST</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">The ultimate relay</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.48, UUCP-RELAY</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">The UUCP relay</TD
></TR
></TBODY
></TABLE
><p class="para">All relays are declared in the same fashion. For example,</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`LOCAL_RELAY',`<code class="replaceable"><i>agent</I
></CODE
>:<code class="replaceable"><i>host</I
></CODE
>')</PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="replaceable"><i>agent</I
></CODE
> is the name of a delivery agent to use, and <code class="replaceable"><i>host</I
></CODE
>
is the name of the machine to which all such mail will be relayed.
If <code class="replaceable"><i>agent</I
></CODE
><code class="literal">:</CODE
> is missing, it defaults to a literal <code class="literal">relay:</CODE
>.</P
><p class="para">If the <code class="replaceable"><i>host</I
></CODE
> is listed under a domain that uses wild-card MX
records (see <a class="xref" href="ch21_03.htm#SML2-CH-21-SECT-3-1" title="Wildcard MX Records">Section 21.3.4, "Wildcard MX Records"</A
>), you should specify it
with a trailing dot; for example,</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`LOCAL_RELAY', `smtp:relay.sub.domain.')
                                            <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                                        <i class="lineannotation">trailing dot</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Relays fit into the flow of rules through rule set 0 like this:</P
><blockquote class="blockquote"><p class="para"><ol class="orderedlist"><li class="listitem"><p class="para"><em class="emphasis">1.</EM
> Basic canonicalization (list syntax, delete local host, etc.)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">1.</EM
> Basic canonicalization (list syntax, delete local host, etc.)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">1.</EM
> Basic canonicalization (list syntax, delete local host, etc.)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">2.</EM
> LOCAL_RULE_0 (see <a class="xref" href="ch19_06.htm" title="">Section 19.6.32</A
>) </P
></LI
><li class="listitem"><p class="para"><em class="emphasis">3.</EM
> FEATURE(mailertable) (see <a class="xref" href="ch19_06.htm" title="">Section 19.6.14</A
>)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">4.</EM
> UUCP_RELAY, BITNET_RELAY, FAX_RELAY, DECNET_RELAY</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">5.</EM
> LOCAL_NET_CONFIG (see <a class="xref" href="ch19_06.htm" title="">Section 19.6.37</A
>)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">6.</EM
> SMART_HOST</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">7.</EM
> SMTP, local, etc. delivery agents</P
></LI
></OL
></P
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-19-SECT-4-6">19.4.6 UUCP</A
></H3
><p class="para"><a class="indexterm" name="SML2-CH-19-IX-UUCP-M4-CONFIGURATION-OPTIONS"></A
>The <em class="emphasis">m4</EM
> configuration technique includes four
UUCP options to choose from.
They are listed in
<a class="xref" href="#SML2-CH-19-TAB-7" title="UUCP Support">Table 19.8</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-19-TAB-7">Table 19.8: UUCP Support</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Relay</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description </TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SITE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.45, SITE</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Declare sites for SITECONFIG (obsolete)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SITECONFIG</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.46, SITECONFIG</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Local UUCP connections (obsolete)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_RELAY</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.48</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">The UUCP relay</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCPSMTP</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch19_06.htm" title="">Section 19.6.49, UUCPSMTP</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Individual UUCP to network translations</TD
></TR
></TBODY
></TABLE
><p class="para">Note that two items in the table are marked as obsolete. This is because
all of their functions have been moved into the <code class="literal">mailertable</CODE
> feature
(see <a class="xref" href="ch19_06.htm" title="">Section 19.6.14</A
>). They are included for backward
compatibility with early configuration file versions.</P
><p class="para">Support for UUCP can be included in your <em class="emphasis">mc</EM
> file with the MAILER
command (see <a class="xref" href="ch19_03.htm#SML2-CH-19-SECT-3-2" title="MAILER()">Section 19.3.2</A
>):</P
><p class="para"><blockquote class="screen"><pre class="screen">MAILER(uucp)</PRE
></BLOCKQUOTE
></P
><p class="para">This declares six
[3]
delivery agents and the rules to support them. They are
listed in
<a class="xref" href="#SML2-CH-19-TAB-8" title="UUCP Delivery Agents">Table 19.9</A
>.<a class="indexterm" name="AUTOID-14086"></A
></P
><blockquote class="footnote"><p class="para">[3] Actually, there are only four; <code class="literal">uucp</CODE
> and <code class="literal">uucp-old</CODE
> are synonyms
for the same agents, as are <code class="literal">suucp</CODE
> and <code class="literal">uucp-new</CODE
>.</P
></BLOCKQUOTE
><table class="table"><caption class="table"><a class="title" name="SML2-CH-19-TAB-8">Table 19.9: UUCP Delivery Agents</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Agent</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Version</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description </TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">uucp-old</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-19-SECT-4-6-1" title="uucp-old (aka uucp)">Section 19.4.6.1, "uucp-old (aka uucp)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Old-style, all ! form of UUCP</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">uucp</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-19-SECT-4-6-1" title="uucp-old (aka uucp)">Section 19.4.6.1</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Synonym for the above (obsolete)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">uucp-new</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-19-SECT-4-6-2" title="uucp-new (aka suucp)">Section 19.4.6.2, "uucp-new (aka suucp)"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Old-style with multiple recipients</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">suucp</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-19-SECT-4-6-2" title="uucp-new (aka suucp)">Section 19.4.6.2</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.1 and above</TD
><td class="entry" rowspan="1" colspan="1">Synonym for the above (obsolete)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">uucp-uudom</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-19-SECT-4-6-3" title="uucp-uudom">Section 19.4.6.3, "uucp-uudom"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Domain-form headers, old-form envelope</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">uucp-dom</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-19-SECT-4-6-4" title="uucp-dom">Section 19.4.6.4, "uucp-dom"</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.6 and above</TD
><td class="entry" rowspan="1" colspan="1">Domain-form headers and envelope</TD
></TR
></TBODY
></TABLE
><p class="para">If support for SMTP delivery agents is also included prior to
UUCP, then the last two additional delivery agents are included (<code class="literal">uucp-dom</CODE
>
and <code class="literal">uucp-uudom</CODE
>). Note that <code class="literal">smtp</CODE
> must be first for this to happen:</P
><p class="para"><blockquote class="screen"><pre class="screen">MAILER(smtp)
MAILER(uucp)</PRE
></BLOCKQUOTE
></P
><p class="para">If <code class="literal">uucp</CODE
> is first, <code class="literal">uucp-dom</CODE
> and <code class="literal">uucp-uudom</CODE
> are excluded.</P
><p class="para">When processing UUCP mail (addresses that contain a <code class="literal">!</CODE
> and those
that end in a .UUCP suffix), <em class="emphasis">sendmail</EM
> routes to those hosts
on the basis of the class in which they were found. Hosts that are found in <code class="literal">$=U</CODE
> deliver via <code class="literal">uucp-old</CODE
>,
hosts in <code class="literal">$=Y</CODE
> deliver via <code class="literal">uucp-new</CODE
>, 
and
hosts in <code class="literal">$=Z</CODE
> deliver via <code class="literal">uucp-uudom</CODE
>.</P
><p class="para"><a class="indexterm" name="AUTOID-14160"></A
>The choice of which delivery agent to use for UUCP delivery is under the control
of the SITECONFIG <em class="emphasis">m4</EM
> macro described above (see <a class="xref" href="ch19_06.htm" title="">Section 19.6.46</A
>).
Which you choose depends on what version of UUCP you are running locally
and what version is being run at the other end of the connection. There are far
too many variations on UUCP to allow specific recommendations here.
In general, you need to choose between a domain form of address (<em class="emphasis">gw@wash.dc.gov</EM
>) and  a UUCP form (<em class="emphasis">wash!gw</EM
>) and then go with the delivery agent
that makes the most sense for you.
We recommend that you start with the most domain-correct agent, <code class="literal">uucp-dom</CODE
>, and
see if it works for you. If not, scale back to <code class="literal">uucp-uudom</CODE
>, then to <code class="literal">uucp-new</CODE
>
and finally to <code class="literal">uucp-old</CODE
> as a last resort.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-19-SECT-4-6-1">19.4.6.1 uucp-old (aka uucp)</A
></H4
><p class="para">If you are running an old version of UUCP, you may have to use this
delivery agent. All addresses are turned into the <code class="literal">!</CODE
> form even if
they were in domain form:</P
><p class="para"><blockquote class="screen"><pre class="screen">user                <i class="lineannotation"><img src="../chars/rarr.gif" alt="-&gt;"> becomes <img src="../chars/rarr.gif" alt="-&gt;"></I
>      yourhost!user
user@host.domain    <i class="lineannotation"><img src="../chars/rarr.gif" alt="-&gt;"> becomes <img src="../chars/rarr.gif" alt="-&gt;"></I
>      yourhost!host.domain!user</PRE
></BLOCKQUOTE
></P
><p class="para">This delivery agent can deliver only to one recipient at a time, so
it can spend a lot of time transmitting duplicate messages.
If at all possible, avoid using this delivery agent.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-19-SECT-4-6-2">19.4.6.2 uucp-new (aka suucp)</A
></H4
><p class="para">Newer releases of UUCP can send to multiple recipients at once.
If yours is such a release, you may use the <code class="literal">uucp-new</CODE
> delivery
agent. It is just like <code class="literal">uucp-old</CODE
> except that
it can perform multiple deliveries.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-19-SECT-4-6-3">19.4.6.3 uucp-uudom</A
></H4
><p class="para">More modern implementations of UUCP can understand and correctly
handle domain style addresses in headers (although they still
require the <code class="literal">!</CODE
> form in the envelope). If yours is such an implementation,
you may use the <code class="literal">uucp-uudom</CODE
> delivery agent.</P
><p class="para">At the receiving end, the message mail arrives with the five character &quot;<code class="literal">From </CODE
>&quot;
line showing the sender address in the <code class="literal">!</CODE
> form. The &quot;<code class="literal">From </CODE
>&quot; line
reflects the envelope address.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="SML2-CH-19-SECT-4-6-4">19.4.6.4 uucp-dom</A
></H4
><p class="para">The <code class="literal">uucp-dom</CODE
> is the most domain-correct form of the available
UUCP delivery agents. All addresses, envelope and header, no matter whether or not they began in the <code class="literal">!</CODE
> form, are sent out in domain form.
Essentially, this uses UUCP as a transport mechanism, but in all other respects it
adheres to the Internet standards.<a class="indexterm" name="AUTOID-14198"></A
></P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch19_03.htm#SML2-CH-19-SECT-3-2" title="19.3 The Minimal mc File"><img src="../gifs/txtpreva.gif" alt="Previous: 19.3 The Minimal mc File" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch19_05.htm" title="19.5 Pitfalls"><img src="../gifs/txtnexta.gif" alt="Next: 19.5 Pitfalls" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">19.3 The Minimal mc File</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">19.5 Pitfalls</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
