<html><head>
<title>[Chapter 30] 30.8 Alphabetized F= Flags</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T19:58:27Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch30_01.htm" title="30. Delivery Agents"><link rel="prev" href="ch30_07.htm" title="30.7 Pitfalls"><link rel="next" href="ch31_01.htm" title="31. Defined Macros"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_07.htm" title="30.7 Pitfalls"><img src="../gifs/txtpreva.gif" alt="Previous: 30.7 Pitfalls" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 30<br>Delivery Agents</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch31_01.htm" title="31. Defined Macros"><img src="../gifs/txtnexta.gif" alt="Next: 31. Defined Macros" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-30-SECT-8">30.8 Alphabetized F= Flags</A
></H2
><p class="para"><a class="indexterm" name="SML2-CH-30-IX-FLAGS-DELIVERY-AGENT"></A
><a class="indexterm" name="SML2-CH-30-IX-DELIVERY-AGENTS-MTAS-FLAGS"></A
>In this section we detail each of the delivery agent flags.
The complete list is shown in
<a class="xref" href="#SML2-CH-30-TAB-7" title="Delivery Agent F= Flags">Table 30.8</A
>.
They are presented in alphabetical order.
Lowercase letters precede uppercase letters for each flag.</P
><p class="para">When configuring with the <em class="emphasis">m4</EM
> technique, you should consult
<a class="xref" href="ch30_04.htm" title="m4 Modification of A= Equates">Table 30.2</A
> in <a class="xref" href="ch30_04.htm" title="m4 modification of F=">Section 30.4.5.1, "m4 modification of F="</A
>, to determine
which flags are set by default for which delivery agents.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-30-TAB-7">Table 30.8: Delivery Agent F= Flags</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Flag</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Meaning</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">0</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-1" title="">Section 30.8.1</A
></TD
><td class="entry" rowspan="1" colspan="1">Turn off MX lookups for delivery agent (V8.8 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">3</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-2" title="">Section 30.8.2, F=3</A
></TD
><td class="entry" rowspan="1" colspan="1">Extend quoted-printable to EBCDIC (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">5</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-3" title="">Section 30.8.3, F=5</A
></TD
><td class="entry" rowspan="1" colspan="1">Use rule set 5 after local aliasing (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">7</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-4" title="">Section 30.8.4, F=7</A
></TD
><td class="entry" rowspan="1" colspan="1">Strip the high bit when delivering (V8.6 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">8</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-5" title="">Section 30.8.5, F=8</A
></TD
><td class="entry" rowspan="1" colspan="1">Suppress EightBitMode=m MIME encoding (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">9</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-6" title="">Section 30.8.6, F=9</A
></TD
><td class="entry" rowspan="1" colspan="1">Convert 7- to 8-bit if appropriate</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-7" title="">Section 30.8.7, F=:</A
></TD
><td class="entry" rowspan="1" colspan="1">Check for :include: files (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">|</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-8" title="">Section 30.8.8, F=| (vertical bar)</A
></TD
><td class="entry" rowspan="1" colspan="1">Check for |program addresses (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">/</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-9" title="">Section 30.8.9, F=/ (forward slash)</A
></TD
><td class="entry" rowspan="1" colspan="1">Check for /file addresses (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">@</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-10" title="">Section 30.8.10, F=@</A
></TD
><td class="entry" rowspan="1" colspan="1">User can be User Database key (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">a</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-11" title="">Section 30.8.11, F=a</A
></TD
><td class="entry" rowspan="1" colspan="1">Run extended SMTP protocol (V8.6 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">A</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-12" title="">Section 30.8.12, F=A</A
></TD
><td class="entry" rowspan="1" colspan="1">User can be LHS of an alias (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">b</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-13" title="">Section 30.8.13, F=b</A
></TD
><td class="entry" rowspan="1" colspan="1">Add a blank line after message (V8.6 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">c</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-14" title="">Section 30.8.14, F=c</A
></TD
><td class="entry" rowspan="1" colspan="1">Exclude comment from $g in headers (V8.6 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">C</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-15" title="">Section 30.8.15, F=C</A
></TD
><td class="entry" rowspan="1" colspan="1">Add <em class="emphasis">@domain</EM
> to recipient</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">d</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-16" title="">Section 30.8.16, F=d</A
></TD
><td class="entry" rowspan="1" colspan="1">Never enclose route addresses in &lt;&gt; (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">D</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-17" title="">Section 30.8.17, F=D</A
></TD
><td class="entry" rowspan="1" colspan="1">Need <code class="literal">Date:</CODE
> in header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">e</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-18" title="">Section 30.8.18, F=e</A
></TD
><td class="entry" rowspan="1" colspan="1">Mark expensive delivery agents</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">E</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-19" title="">Section 30.8.19, F=E</A
></TD
><td class="entry" rowspan="1" colspan="1">Change extra From into &gt;From</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">f</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-20" title="">Section 30.8.20, F=f</A
></TD
><td class="entry" rowspan="1" colspan="1">Delivery agent adds -f to argv</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">F</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-21" title="">Section 30.8.21, F=F</A
></TD
><td class="entry" rowspan="1" colspan="1">Need <code class="literal">From:</CODE
> in header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">g</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-22" title="">Section 30.8.22, F=g</A
></TD
><td class="entry" rowspan="1" colspan="1">Suppress From:&lt;&gt; (V8.6 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">h</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-23" title="">Section 30.8.23, F=h</A
></TD
><td class="entry" rowspan="1" colspan="1">Preserve uppercase in hostname</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">i</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-24" title="">Section 30.8.24, F=i</A
></TD
><td class="entry" rowspan="1" colspan="1">Do UDB sender rewrite on envelope (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">I</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-25" title="">Section 30.8.25, F=I (uppercase i)</A
></TD
><td class="entry" rowspan="1" colspan="1">Send SMTP VERB to other site</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">j</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-26" title="">Section 30.8.26, F=j</A
></TD
><td class="entry" rowspan="1" colspan="1">Perform UDB rewrite of header recipient addresses (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">k</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-27" title="">Section 30.8.27, F=k</A
></TD
><td class="entry" rowspan="1" colspan="1">Don't check for loops in HELO command (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">l</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-28" title="">Section 30.8.28, F=l (lowercase L)</A
></TD
><td class="entry" rowspan="1" colspan="1">Delivery agent is local (final) delivery</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">L</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-29" title="">Section 30.8.29</A
></TD
><td class="entry" rowspan="1" colspan="1">Specify SMTP line limits (Obsolete)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">m</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-30" title="">Section 30.8.30, F=m</A
></TD
><td class="entry" rowspan="1" colspan="1">Multiple recipients possible</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">M</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-31" title="">Section 30.8.31, F=M</A
></TD
><td class="entry" rowspan="1" colspan="1">Need <code class="literal">Message-ID:</CODE
> in header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">n</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-32" title="">Section 30.8.32, F=n</A
></TD
><td class="entry" rowspan="1" colspan="1">Don't use UNIX-style <code class="literal">From</CODE
> in header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">o</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-33" title="">Section 30.8.33</A
></TD
><td class="entry" rowspan="1" colspan="1">Always run delivery agent as recipient (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">p</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-34" title="">Section 30.8.34, F=p</A
></TD
><td class="entry" rowspan="1" colspan="1">Process return path correctly (deprecated)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">P</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-35" title="">Section 30.8.35, F=P</A
></TD
><td class="entry" rowspan="1" colspan="1">Need <code class="literal">Return-Path:</CODE
> in header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">q</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-36" title="">Section 30.8.36, F=q</A
></TD
><td class="entry" rowspan="1" colspan="1">250 versus 252 return for SMTP VRFY (V8.8 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">r</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-37" title="">Section 30.8.37, F=r</A
></TD
><td class="entry" rowspan="1" colspan="1">Delivery agent adds -r to argv</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">R</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-38" title="">Section 30.8.38, F=R</A
></TD
><td class="entry" rowspan="1" colspan="1">Use a reserved TCP port (V8 only)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">s</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-39" title="">Section 30.8.39, F=s</A
></TD
><td class="entry" rowspan="1" colspan="1">Strip quotation marks</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">S</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-40" title="">Section 30.8.40</A
></TD
><td class="entry" rowspan="1" colspan="1">Assume specified uid and gid (Revised for V8.7)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">u</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-41" title="">Section 30.8.41, F=u</A
></TD
><td class="entry" rowspan="1" colspan="1">Preserve uppercase for username</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">U</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-42" title="">Section 30.8.42, F=U</A
></TD
><td class="entry" rowspan="1" colspan="1">Use UNIX-style <code class="literal">From</CODE
> line</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">w</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-43" title="">Section 30.8.43, F=w</A
></TD
><td class="entry" rowspan="1" colspan="1">Check for /etc/passwd entry (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">x</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-44" title="">Section 30.8.44, F=x</A
></TD
><td class="entry" rowspan="1" colspan="1">Need <code class="literal">Full-Name:</CODE
> in header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">X</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-8-45" title="">Section 30.8.45, F=X</A
></TD
><td class="entry" rowspan="1" colspan="1">Delivery agent needs RFC821 hidden dot</TD
></TR
></TBODY
></TABLE
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-1">30.8.1 F=0</A
></H3
><p class="refpurpose">Turn off MX lookups for delivery agent</P
>(V8.8 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31239"></A
><a class="indexterm" name="AUTOID-31241"></A
>During the delivery phase of a message, <em class="emphasis">sendmail</EM
> 
looks up the destination hostname with DNS and (possibly) redirects delivery
to MX hosts, if present.
One way (but not the best way) to suppress that MX lookup is to surround the destination hostname with square brackets.
An unfortunate side effect of this technique is that the square brackets
are included in the envelope of the message:</P
><p class="para"><blockquote class="screen"><pre class="screen">RCPT To:&lt;user@[mail.us.edu]&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">F=0</CODE
> flag is a better way to suppress MX lookups.
For an example of one use for this flag,
consider the <code class="literal">nullclient</CODE
> feature from <a class="xref" href="ch19_06.htm" title="">Section 19.6.20, FEATURE(nullclient)</A
>.</P
><p class="para"><blockquote class="screen"><pre class="screen">FEATURE(`nullclient',`mail.us.edu')</PRE
></BLOCKQUOTE
></P
><p class="para">Here, all mail will be forwarded to <code class="literal">mail.us.edu</CODE
>; but because <code class="literal">mail.us.edu</CODE
>
is not surrounded by square brackets, its MX records will be looked up for
delivery. This may not be desirable, because the hostname in the envelope
will change depending on which MX record is selected.
To suppress those MX lookups, we can surround the address
with square brackets:</P
><p class="para"><blockquote class="screen"><pre class="screen">FEATURE(`nullclient',`[mail.us.edu]')</PRE
></BLOCKQUOTE
></P
><p class="para">But this has the unfortunate side effect of adding the bracketed name
<code class="literal">[mail.us.edu]</CODE
> to the outgoing envelope. If, instead,
the brackets are omitted and the <code class="literal">F=0</CODE
> flag is added, we achieve
the same MX suppression effect and send out a legal envelope:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`SMTP_MAILER_FLAGS', `0')
FEATURE(`nullclient',`mail.us.edu')</PRE
></BLOCKQUOTE
></P
><p class="para">A better way to achieve the same effect is to define a new delivery agent and
use that with the <code class="literal">nullclient</CODE
> feature:</P
><p class="para"><blockquote class="screen"><pre class="screen">FEATURE(`nullclient',`nomxsmtp:mail.us.edu')
LOCAL_CONFIG
M<code class="userinput"><b>nomxsmtp</B
></CODE
>, P=[IPC], F=<code class="userinput"><b>0</B
></CODE
>mDFMuX, S=11/31, R=21, E=\r\n, L=990, T=DNS/RFC822/SMTP, A=IPC $h 
                      <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                     <i class="lineannotation">note</I
></PRE
></BLOCKQUOTE
></P
><p class="para">This second approach is much better for the various <code class="literal">..._RELAY</CODE
> 
features.</P
><p class="para">The <code class="literal">F=0</CODE
> flag is suitable only for configurations like the <code class="literal">nullclient</CODE
>.
It can be extremely dangerous to use it with any other delivery agents, because
it can cause necessary MX lookups to be skipped.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-2">30.8.2 F=3</A
></H3
><p class="refpurpose">Extend quoted-printable to EBCDIC</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31284"></A
><a class="indexterm" name="AUTOID-31286"></A
><a class="indexterm" name="AUTOID-31288"></A
><a class="indexterm" name="AUTOID-31290"></A
><a class="indexterm" name="AUTOID-31292"></A
>When <em class="emphasis">sendmail</EM
> is required to convert a message body into 
<em class="emphasis">quoted-printable</EM
> form as determined by the <code class="literal">EightBitMode</CODE
>
(<code class="literal">8</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.22</A
>), it ordinarily
converts only those characters that are required by RFC1521.
Unfortunately, mail that is transmitted to some IBM machines (specifically
those that speak EBCDIC instead of ASCII) can become
garbled because of the way EBCDIC represents (or fails to
represent) certain characters.  Those characters are</P
><p class="para"><blockquote class="screen"><pre class="screen">! &quot; # $ @ \ [  ] ^ ` { | } ~</PRE
></BLOCKQUOTE
></P
><p class="para">When sending MIME mail to such sites, you should probably set
the <code class="literal">F=3</CODE
> flag for any delivery agents that handle those sites.
Setting this flag tells <em class="emphasis">sendmail</EM
> to encode those characters, in addition
to those normally encoded, using <em class="emphasis">quoted-printable</EM
>.</P
><p class="para">Note that <em class="emphasis">sendmail</EM
> does this encoding only if 8-bit characters appear
in the message. This flag solves one EBCDIC problem but should not
be thought of as a general solution for all EBCDIC problems.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-3">30.8.3 F=5</A
></H3
><p class="refpurpose">Use rule set 5 after local aliasing</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31315"></A
><a class="indexterm" name="AUTOID-31317"></A
><a class="indexterm" name="AUTOID-31320"></A
>Prior to V8.7 <em class="emphasis">sendmail</EM
>, only the <code class="literal">local</CODE
> delivery agent
could cause rule set 5 to be called (see <a class="xref" href="ch29_07.htm" title="Rule Set 5">Section 29.7, "Rule Set 5"</A
>). Rule set
5 is called after aliasing and before forwarding, and can be used
to select a new delivery agent. Beginning with V8.7,
any delivery agent with the <code class="literal">F=A</CODE
> flag set
(see <a class="xref" href="#SML2-CH-30-SECT-8-12" title="">Section 30.8.12</A
>) can
cause an address to be looked up in the <em class="emphasis">aliases</EM
>(5) file.
Therefore any delivery agent that has the <code class="literal">F=A</CODE
> and
<code class="literal">F=5</CODE
> flag set will
cause rule set 5 to be called as though the agent were the
<code class="literal">local</CODE
> delivery agent.</P
><p class="para">In configuration files prior to Version 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5, "The V Configuration Command"</A
>) 
this flag is automatically set for the <code class="literal">local</CODE
> delivery agent.
Note that addresses that (perhaps artificially) begin with
an <code class="literal">@</CODE
> character cause rule set 5 to be skipped (see
<a class="xref" href="ch29_07.htm" title="Rule Set 5">Section 29.7</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-4">30.8.4 F=7</A
></H3
><p class="refpurpose">Strip the high bit when delivering</P
>(V8.6 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31345"></A
><a class="indexterm" name="AUTOID-31347"></A
><a class="indexterm" name="AUTOID-31349"></A
>Under old versions of <em class="emphasis">sendmail</EM
>, all lines of text output
by <em class="emphasis">sendmail</EM
> (including the header and body of a message) automatically
have the high bit cleared (zeroed) for every character.
This behavior remains unchanged under V8 <em class="emphasis">sendmail</EM
> for configuration
file versions 2 or less (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>).
But with version 3 and above configuration files, 
the message body is transmitted with the high bit intact by default.
For those delivery agents that should not allow 8-bit data to be
transmitted, you may use the <code class="literal">F=7</CODE
> flag to force the old
behavior.</P
><p class="para">Beginning with V8.7, the <code class="literal">F=7</CODE
> flag can be used to suppress
certain kinds of MIME conversions. For example, if the
<code class="literal">EightBitMode</CODE
> (<code class="literal">8</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.22</A
>)
is set to <code class="literal">p</CODE
> (pass 8)
and if the message contains 8-bit MIME data in its body, this 
<code class="literal">F=7</CODE
> flag will force <em class="emphasis">sendmail</EM
> to bounce the message with
the following SMTP error, to put <code class="literal">5.6.3</CODE
> (see RFC1893) in its DSN
status, and to exit with EX_DATAERR:</P
><p class="para"><blockquote class="screen"><pre class="screen">554 Cannot send 8-bit data to 7-bit destination</PRE
></BLOCKQUOTE
></P
><p class="para">Note that <code class="literal">F=7</CODE
> affects only the message body. Headers always have the
high bit cleared.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-5">30.8.5 F=8</A
></H3
><p class="refpurpose">Suppress EightBitMode=m MIME encoding</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31378"></A
><a class="indexterm" name="AUTOID-31380"></A
><a class="indexterm" name="AUTOID-31382"></A
>Beginning with V8.7 <em class="emphasis">sendmail</EM
>,
you can set the <code class="literal">EightBitMode</CODE
> (<code class="literal">8</CODE
>) option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.22</A
>) to <code class="literal">m</CODE
> (mimefy) to force
all unlabeled 8-bit mail to be converted into MIME labeled mail.</P
><p class="para">&#13;You can suppress this conversion for particular delivery agents by
specifying the <code class="literal">F=8</CODE
> flag.
This form of suppression has the effect of setting the <code class="literal">EightBitMode</CODE
> (<code class="literal">8</CODE
>) option
to <code class="literal">p</CODE
> (pass 8) for an individual delivery agent.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-6">30.8.6 F=9</A
></H3
><p class="refpurpose">Convert 7- to 8-bit if appropriate</P
>(V8.8 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31402"></A
><a class="indexterm" name="AUTOID-31404"></A
><a class="indexterm" name="AUTOID-31406"></A
><a class="indexterm" name="AUTOID-31408"></A
>The <code class="literal">F=9</CODE
> flag cause the MIME message body of a delivered
message to be converted back from either <em class="emphasis">quoted-printable</EM
> or
<em class="emphasis">base64</EM
> into its original 8-bit form. The <code class="literal">F=9</CODE
> flag is
effective only if <em class="emphasis">sendmail</EM
> was compiled with MIME7TO8
defined (see <a class="xref" href="ch18_08.htm" title="">Section 18.8.21, MIME7TO8</A
>).</P
><p class="para">Conversion works only on single-part MIME messages. If the
<code class="literal">Content-Transfer-Encoding:</CODE
> header type is <code class="literal">base64</CODE
>,
conversion is done from <em class="emphasis">base64</EM
> to 8-bit. Otherwise,
if the <code class="literal">Content-Transfer-Encoding:</CODE
> header type is
<em class="emphasis">quoted-printable</EM
>, then conversion is done from
<em class="emphasis">quoted-printable</EM
> to 8-bit. If the
<code class="literal">Content-Transfer-Encoding:</CODE
> header type is neither,
no conversion is done.
The conversion process can be watched with the <code class="literal">-d43.3</CODE
>
debugging switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.151, -d43.3</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-7">30.8.7 F=:</A
></H3
><p class="refpurpose">Check for :include: files</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31434"></A
><a class="indexterm" name="AUTOID-31436"></A
>Prior to V8.7 <em class="emphasis">sendmail</EM
>, only the <code class="literal">local</CODE
> delivery
agent could recognize the <code class="literal">:include:</CODE
> directive for creating
mailing lists (see <a class="xref" href="ch25_02.htm#SML2-CH-25-SECT-2-1" title=":include: Mailing Lists">Section 25.2, ":include: Mailing Lists"</A
>).</P
><p class="para">Beginning with V8.7, any delivery agent can be made to recognize the
<code class="literal">:include:</CODE
> directive by setting the <code class="literal">F=:</CODE
> flag (or
to ignore it by not setting the <code class="literal">F=:</CODE
> flag). 
This flag allows you to design a
<code class="literal">local</CODE
> delivery agent without <code class="literal">:include:</CODE
> support
or local-type clones with <code class="literal">:include:</CODE
> support.
In configuration files prior to Version 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>) this flag is automatically set for the <code class="literal">local</CODE
> delivery agent.</P
><p class="para">This flag is only legal for addresses contained in <em class="emphasis">aliases</EM
>(5) databases or <em class="emphasis">~/.forward</EM
> files. Any <code class="literal">:include:</CODE
> address in an SMTP dialog or on the command-line will be rejected.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-8">30.8.8 F=| (vertical bar)</A
></H3
><p class="refpurpose">Check for |program addresses</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31463"></A
><a class="indexterm" name="AUTOID-31465"></A
><a class="indexterm" name="AUTOID-31468"></A
>Prior to V8.7 <em class="emphasis">sendmail</EM
>, only the <code class="literal">local</CODE
> delivery
agent could recognize the <code class="literal">|</CODE
> character as a directive to pipe the mail
message through a program.
(See <a class="xref" href="ch24_02.htm#SML2-CH-24-SECT-2-2" title="Delivery via Programs">Section 24.2.3, "Delivery via Programs"</A
> and <a class="xref" href="ch25_07.htm#SML2-CH-25-SECT-7-3" title="Piping Through Programs">Section 25.7.4, "Piping Through Programs"</A
>.)</P
><p class="para">Beginning with V8.7, any delivery agent can be made to
accept the leading <code class="literal">|</CODE
> character.
If the <code class="literal">F=|</CODE
> flag is present, the delivery agent will
accept the leading <code class="literal">|</CODE
> character and call the <code class="literal">prog</CODE
>
delivery agent to pipe the message through a program.
If the flag is absent, this ability to pipe is prohibited.
In general, the <code class="literal">F=|</CODE
> flag should be present for the
<code class="literal">local</CODE
> and local-clone delivery agents but absent for
all others.
In configuration files prior to Version 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>) 
this flag is automatically set for the <code class="literal">local</CODE
> delivery agent.</P
><p class="para">This flag is only legal for addresses contained in <em class="emphasis">aliases</EM
>(5) databases or <em class="emphasis">~/.forward</EM
> files. Any <code class="literal">|</CODE
><code class="replaceable"><i>program</I
></CODE
> address in a SMTP dialog or on the command-line will be rejected.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-9">30.8.9 F=/ (forward slash)</A
></H3
><p class="refpurpose">Check for /file addresses</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31498"></A
><a class="indexterm" name="AUTOID-31500"></A
><a class="indexterm" name="AUTOID-31502"></A
>Prior to V8.7 <em class="emphasis">sendmail</EM
>, only the <code class="literal">local</CODE
> delivery
agent could recognize a leading <code class="literal">/</CODE
> character as a directive to append the
mail message to a file.
(See <a class="xref" href="ch24_02.htm#SML2-CH-24-SECT-2-2" title="Delivery to Files">Section 24.2.2</A
> and <a class="xref" href="ch25_07.htm#SML2-CH-25-SECT-7-3" title="Appending to Files">Section 25.7.3, "Appending to Files"</A
>.)</P
><p class="para">Beginning with V8.7, any delivery agent can be made to 
accept the leading <code class="literal">/</CODE
> character.
If the <code class="literal">F=/</CODE
> flag is present, the delivery agent will
accept a leading <code class="literal">/</CODE
> character and call the <code class="literal">*file*</CODE
>
delivery agent to append the mail message to a file.
If the flag is absent, this ability to append is prohibited.
In general, the <code class="literal">F=/</CODE
> flag should be present for the
<code class="literal">local</CODE
> and local-clone delivery agents but absent for
all others.
In configuration files prior to Version 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>), 
this flag is automatically set for the <code class="literal">local</CODE
> delivery agent.</P
><p class="para">This flag is only legal for addresses contained in <em class="emphasis">aliases</EM
>(5) databases or <em class="emphasis">~/.forward</EM
> files. Any <code class="literal">/</CODE
><code class="replaceable"><i>file</I
></CODE
> address in an SMTP dialog or on the command-line will be rejected.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-10">30.8.10 F=@</A
></H3
><p class="refpurpose">User can be User Database key</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31532"></A
><a class="indexterm" name="AUTOID-31534"></A
>If V8.7 or above <em class="emphasis">sendmail</EM
> has been compiled with User Database
support (see <a class="xref" href="ch33_05.htm" title="The User Database">Section 33.5, "The User Database"</A
>), specifying this flag for a delivery
agent causes the delivery agent to perform User Database lookups for
each address it handles.
For sender header and envelope addresses, a User Database 
<code class="literal">mailname</CODE
> keyword is used to perform reverse aliasing.
For recipient envelope addresses, a User Database
<code class="literal">maildrop</CODE
> keyword is used to perform additional forward aliasing.
Note that any address with a leading <code class="literal">@</CODE
> character (in the <code class="literal">$:</CODE
> part
of the triple returned by rule set 0) causes User Database lookups to be skipped.
Also note that the absence of an <code class="literal">F=i</CODE
> flag (<a class="xref" href="#SML2-CH-30-SECT-8-24" title="">Section 30.8.24</A
>)
suppresses User Database rewriting of the envelope sender.</P
><p class="para">If the <code class="literal">F=@</CODE
> flag is present, the delivery agent will
try to use the User Database. If the <code class="literal">F=@</CODE
> flag is absent,
all User Database lookups are skipped. In general, this
flag should be present for the
<code class="literal">local</CODE
> and local-clone delivery agents but absent for
all others.
In configuration files prior to 

Version 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>) 
this flag is automatically set for the <code class="literal">local</CODE
> delivery agent.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-11">30.8.11 F=a</A
></H3
><p class="refpurpose">Run extended SMTP protocol</P
>(V8 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31558"></A
><a class="indexterm" name="AUTOID-31560"></A
>Most versions of <em class="emphasis">sendmail</EM
> run only basic SMTP (Simple
Mail Transfer Protocol) defined in RFC821.
In 1993 that service was extended by RFC1425 to become
Extended SMTP (or ESMTP). 
Beginning with V8 <em class="emphasis">sendmail</EM
>, you can enable a delivery agent to use ESMTP by specifying
the <code class="literal">F=a</CODE
> flag. This causes <em class="emphasis">sendmail</EM
> to first try
to use the extended form of the HELO command, called EHLO.
If that fails to be acknowledged as okay, <em class="emphasis">sendmail</EM
>
tries again with nonextended SMTP. If the initial inbound greeting
includes a line containing the word ESMTP, the <code class="literal">F=a</CODE
> flag is assumed.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-12">30.8.12 F=A</A
></H3
><p class="refpurpose">User can be LHS of an alias</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31576"></A
><a class="indexterm" name="AUTOID-31578"></A
><a class="indexterm" name="AUTOID-31581"></A
>Prior to V8.7 <em class="emphasis">sendmail</EM
>, only the <code class="literal">local</CODE
> delivery
agent could cause addresses to be looked up in the <em class="emphasis">aliases</EM
>(5)
database (see <a class="xref" href="ch24_01.htm" title="Local Must Be Local">Section 24.1.2, "Local Must Be Local"</A
>).
Beginning with V8.7 <em class="emphasis">sendmail</EM
>, any delivery agent that has
an <code class="literal">F=A</CODE
> flag set will cause its <code class="literal">$:</CODE
> address to
be looked up on the left-hand side of the <em class="emphasis">aliases</EM
>(5) file.</P
><p class="para">For example, the <code class="literal">F=A</CODE
> flag can be used to design a local-clone
delivery agent that recognizes certain nonlocal addresses as local
for aliasing purposes:
[16]</P
><blockquote class="footnote"><p class="para">[16] This example is somewhat contrived because the same thing can be done
in a more versatile manner with the <code class="literal">mailertable</CODE
> feature (see <a class="xref" href="ch19_06.htm" title="">Section 19.6.14, FEATURE(mailertable)</A
>).</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">R$+ &lt;@ FIRE.WALL&gt;     $#firelocal $: $1@fire.wall</PRE
></BLOCKQUOTE
></P
><p class="para">This allows an alias file like the following to legally exist:</P
><p class="para"><blockquote class="screen"><pre class="screen">George.Washington@fire.wall:   gw@internal.net</PRE
></BLOCKQUOTE
></P
><p class="para">As a safety net (and if the <code class="literal">F=5</CODE
> flag is also specified),
any address that is not found in the <em class="emphasis">aliases</EM
>(5) database will
be passed to rule set 5 (see <a class="xref" href="ch29_07.htm" title="Rule Set 5">Section 29.7</A
>),
where another delivery agent can be selected.</P
><p class="para">In configuration files prior to Version 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>) 
the <code class="literal">F=A</CODE
> flag is automatically set for the <code class="literal">local</CODE
> delivery agent.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-13">30.8.13 F=b</A
></H3
><p class="refpurpose">Add a blank line after message</P
>(V8.6 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31619"></A
><a class="indexterm" name="AUTOID-31621"></A
><a class="indexterm" name="AUTOID-31624"></A
>Some UNIX mailbox formats require a blank line at the end of one message and
before the start of the next message.
If your local version of <em class="emphasis">/bin/mail</EM
> does not assure one, you may use
the <code class="literal">F=b</CODE
> flag. If this flag is specified and
if the message being sent to the delivery agent lacks a
blank line at the end, <em class="emphasis">sendmail</EM
> adds one.
This flag is also appropriate for use with the <code class="literal">*file*</CODE
> delivery
agent.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-14">30.8.14 F=c</A
></H3
><p class="refpurpose">Exclude comment from $g in headers</P
>(V8.6 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31639"></A
><a class="indexterm" name="AUTOID-31641"></A
><a class="indexterm" name="AUTOID-31644"></A
>Ordinarily, <em class="emphasis">sendmail</EM
> tries to preserve all RFC822 comments
in sender addresses (see <a class="xref" href="ch35_03.htm#SML2-CH-35-SECT-3-2" title="Comments in the Header Field">Section 35.3.4, "Comments in the Header Field"</A
>).
But beginning with V8.7, RFC822 comments can be be stripped
by setting this <code class="literal">F=c</CODE
> flag.
(An RFC822 comment is one in parentheses or text outside angle brackets.)
The sender address, always without a comment and stripped of
angle brackets, is placed into
<code class="literal">$g</CODE
> (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.16, $g</A
>) and is used with the <code class="literal">-f</CODE
> or <code class="literal">-r</CODE
>
arguments to <code class="literal">A=</CODE
> (see <a class="xref" href="#SML2-CH-30-SECT-8-37" title="">Section 30.8.37</A
>).
In assembling headers,
the comment is ordinarily restored to <code class="literal">$g</CODE
>; but if this <code class="literal">F=c</CODE
> flag
is set, the comment is left out.</P
><p class="para">The main use for this flag is to supply just the address to programs that
cannot handle anything else.
Another use might be to suppress disclosure of potentially
proprietary information. By adding <code class="literal">F=c</CODE
> to the <code class="literal">smtp</CODE
> delivery
agent, for example, you can cause sender headers that are defined with <code class="literal">$g</CODE
>
to go out without RFC822 comments:</P
><p class="para"><blockquote class="screen"><pre class="screen">From: George Washington (The Prez!) &lt;CX75G@fire.wall&gt;    <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> without F=c</I
>
From: CX75G@fire.wall                                    <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> with F=c</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Note that this does no good at all if users send out mail with
disclosing headers already present or if they give out information
in signature lines.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-15">30.8.15 F=C</A
></H3
><p class="refpurpose">Add @domain to recipient</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31675"></A
><a class="indexterm" name="AUTOID-31677"></A
><a class="indexterm" name="AUTOID-31680"></A
><a class="indexterm" name="AUTOID-31683"></A
>The <code class="literal">F=C</CODE
> flag causes <em class="emphasis">sendmail</EM
> to append an <em class="emphasis">@domain</EM
>
extension to any recipient address that lacks one.
The <em class="emphasis">@domain</EM
> that is added is copied from the envelope sender's
address. </P
><p class="para">This <code class="literal">F=C</CODE
> flag is not looked for in the delivery agent
definition that was selected to send the message. 
Rather, it is looked for in the delivery agent that would be
selected if the sender 
were the recipient (as in the case
of bounced mail). </P
><p class="para">To illustrate, consider the following mail:</P
><p class="para"><blockquote class="screen"><pre class="screen">From: bill@oursite.edu
To: john@remotesite.gov, <code class="userinput"><b>alice</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The recipient address <code class="literal">alice</CODE
> lacks an <em class="emphasis">@domain</EM
>
specification. The <em class="emphasis">sendmail</EM
> program processes the envelope
sender address <code class="literal">bill@oursite.edu</CODE
> to decide on a delivery
agent definition that can be used if this mail needs to be
returned. If that envelope sender's return mail delivery agent has the
<code class="literal">F=C</CODE
> flag set, 
then the <code class="literal">@oursite.edu</CODE
> part of the
envelope sender's address is appended to <code class="literal">alice</CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">From: bill@oursite.edu
To: john@remotesite.gov, <code class="userinput"><b>alice@oursite.edu</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">F=C</CODE
> flag is traditionally used for the <code class="literal">smtp</CODE
> class
of delivery agent that is supposed to always supply an <em class="emphasis">@domain</EM
>
part for all addresses.</P
><p class="para">Note that the domain part of the <em class="emphasis">envelope</EM
> sender is used. In our
example the envelope and header sender are the same.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-16">30.8.16 F=d</A
></H3
><p class="refpurpose">Never enclose route addresses in &lt;&gt;</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31721"></A
><a class="indexterm" name="AUTOID-31723"></A
><a class="indexterm" name="AUTOID-31726"></A
>Ordinarily, V8 <em class="emphasis">sendmail</EM
> forces envelope-sender route addresses
[17]
to be enclosed
in angle brackets. But beginning with V8.7 <em class="emphasis">sendmail</EM
>,
angle brackets can be omitted by specifying <code class="literal">F=d</CODE
>.</P
><blockquote class="footnote"><p class="para">[17] Also see the <code class="literal">DontPruneRoutes</CODE
> option in <a class="xref" href="ch34_08.htm" title="">Section 34.8.20, DontPruneRoutes (R)</A
>
and how route addresses are handled in rules in 
<a class="xref" href="ch29_04.htm#SML2-CH-29-SECT-4-5" title="Handling Routing Addresses">Section 29.4.3, "Handling Routing Addresses"</A
>.</P
></BLOCKQUOTE
><p class="para">Under some circumstances it is possible for these angle-bracketed
addresses to be given to a shell, causing them to 
be wrongly viewed as IO redirection.
This problem is most common with the UUCP delivery agents.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-17">30.8.17 F=D</A
></H3
><p class="refpurpose">Need Date: in header</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31746"></A
><a class="indexterm" name="AUTOID-31748"></A
>The <code class="literal">F=D</CODE
> flag is used by <em class="emphasis">sendmail.cf</EM
> header commands
to force
the inclusion of date information:</P
><p class="para"><blockquote class="screen"><pre class="screen">H?D?Resent-Date: $a
H?D?Date: $a</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">F=D</CODE
> flag has no special internal meaning to <em class="emphasis">sendmail</EM
>.
It is a convention that is used only in the assorted <code class="literal">Date:</CODE
> header
(see <a class="xref" href="ch35_10.htm" title="">Section 35.10.10, Date:</A
>) definitions.
See <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
> for a general description of this process.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-18">30.8.18 F=e</A
></H3
><p class="refpurpose">Mark expensive delivery agents</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31768"></A
><a class="indexterm" name="AUTOID-31770"></A
><a class="indexterm" name="AUTOID-31772"></A
>The <em class="emphasis">sendmail.cf</EM
> <code class="literal">HoldExpensive</CODE
> (<code class="literal">c</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.29, HoldExpensive (c)</A
>)
tells <em class="emphasis">sendmail</EM
> not to connect to expensive delivery agents. Instead, mail destined
for those agents is queued for later delivery. This <code class="literal">F=e</CODE
>
flag marks a delivery agent as expensive.</P
><p class="para">For example, consider a site connected to the Internet over
a dial-on-demand ISDN link that costs lots of money per minute.
Such a site might want all the Internet
mail to be queued and would arrange for that queue to be processed
only once every other hour.</P
><p class="para">Under V8 <em class="emphasis">sendmail</EM
>, verbose output (watch delivery) cancels the effect of the
<code class="literal">F=e</CODE
> flag (suppresses queueing).
[18]
Verbose output is set with the <code class="literal">-v</CODE
> command
line switch (see <a class="xref" href="ch36_07.htm" title="">Section 36.7.41, -v</A
>) or the <code class="literal">Verbose</CODE
> (<code class="literal">v</CODE
>) option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.76</A
>).</P
><blockquote class="footnote"><p class="para">[18] According to Eric Allman, &quot;It's assumed that if you say you
want to watch delivery, you <em class="emphasis">really</EM
> want to watch it.&quot;</P
></BLOCKQUOTE
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-19">30.8.19 F=E</A
></H3
><p class="refpurpose">Change extra From into &gt;From</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31801"></A
><a class="indexterm" name="AUTOID-31803"></A
>All UNIX mail-reading programs, such as <em class="emphasis">/usr/ucb/Mail</EM
>, require that
each mail message in a file of many mail messages be delimited
from the others by a blank line, then a line that begins with the 
five characters &quot;<code class="literal">From&nbsp;</CODE
>&quot;:</P
><p class="para"><blockquote class="screen"><pre class="screen">and thanks again. - bill               <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> one message ends</I
>
                                        <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> a blank line</I
>
From george Fri Apr  6 12:03:45 1996   <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> next message starts</I
></PRE
></BLOCKQUOTE
></P
><p class="para">This means that any given mail message may have only one line
in it that begins with the five characters &quot;<code class="literal">From&nbsp;</CODE
>&quot;.
To prevent such lines being improperly fed to such mail delivery 
agents, <em class="emphasis">sendmail</EM
> offers the <code class="literal">F=E</CODE
> flag. This flag
tells <em class="emphasis">sendmail</EM
> to insert a <code class="literal">&gt;</CODE
> character at the
front of all but the first such lines found. Consider the following:</P
><p class="para"><blockquote class="screen"><pre class="screen">From tim@here.us.edu Mon Dec 27 13:00:03 1999

From now on, let's meet on Saturdays instead of Tuesdays
like we discussed.</PRE
></BLOCKQUOTE
></P
><p class="para">If the <code class="literal">F=E</CODE
> flag is specified for the delivery agent that
delivers the above message, <em class="emphasis">sendmail</EM
> converts it
to read</P
><p class="para"><blockquote class="screen"><pre class="screen">From tim@here.us.edu Mon Dec 30 13:00:03 1996

&gt;From now on, let's meet on Saturdays instead of Tuesdays
like we discussed.</PRE
></BLOCKQUOTE
></P
><p class="para">This <code class="literal">F=E</CODE
> flag is rarely needed. Usually, the program specified
by the <code class="literal">local</CODE
> delivery agent definition handles <code class="literal">From</CODE
>
line conversions. This flag should be used <em class="emphasis">only</EM
>  with delivery agents that handle final local delivery.</P
><p class="para">You may wish to consider omitting this flag from the <code class="literal">prog</CODE
>
definition. Omitting it allows a user the option 
of <em class="emphasis">not</EM
> transforming &quot;<code class="literal">From&nbsp;</CODE
>&quot; lines, by specifying a program
in his or her <em class="emphasis">~/.forward</EM
> file.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-20">30.8.20 F=f</A
></H3
><p class="refpurpose">Delivery agent adds -f to argv</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31843"></A
><a class="indexterm" name="AUTOID-31845"></A
>If <em class="emphasis">sendmail</EM
> is run with a <code class="literal">-f</CODE
> command-line argument (see <a class="xref" href="ch36_07.htm" title="">Section 36.7.21, -f and -r</A
>)
and if the <code class="literal">F=f</CODE
> flag is specified, the <code class="literal">A=</CODE
> for
this delivery agent will have the two additional arguments <code class="literal">-f</CODE
>
and <code class="literal">$g</CODE
> inserted between its <code class="literal">argv[0]</CODE
> and <code class="literal">argv[1]</CODE
>.
For example, if <em class="emphasis">sendmail</EM
> is run as</P
><p class="para"><blockquote class="screen"><pre class="screen">/usr/lib/sendmail -f jim host!bill</PRE
></BLOCKQUOTE
></P
><p class="para">and if the delivery agent for sending to <code class="literal">host</CODE
>
is defined as</P
><p class="para"><blockquote class="screen"><pre class="screen">Muucp, P=/bin/uux, F=fmsDFMhuU, S=13, R=23, A=uux - -r $h!rmail ($u)</PRE
></BLOCKQUOTE
></P
><p class="para">then the <code class="literal">f</CODE
> in <code class="literal">F=fmsDFhuU</CODE
> causes the <code class="literal">A=</CODE
>
of</P
><p class="para"><blockquote class="screen"><pre class="screen">A=uux - -r $h@rmail ($u)</PRE
></BLOCKQUOTE
></P
><p class="para">to be rewritten as</P
><p class="para"><blockquote class="screen"><pre class="screen">A=uux -f $g - -r $h@rmail ($u)</PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="literal">$g</CODE
> is <code class="literal">jim</CODE
> from the original command line (but
rewritten to be a return address relative to the recipient).
The original <code class="literal">-f</CODE
> argument <code class="literal">jim</CODE
> is first rewritten
by rule sets 3, 1, and 4. The result of those rewrites is placed
into <code class="literal">$f</CODE
>. The <code class="literal">$f</CODE
> macro is rewritten by rule sets 3,
1, <code class="literal">S=</CODE
>, and 4, and the result is placed into <code class="literal">$g</CODE
>.
(<code class="literal">$f</CODE
> and <code class="literal">$g</CODE
> are described in <a class="xref" href="ch31_10.htm" title="">Section 31.10.16</A
>.)</P
><p class="para">Note that the <code class="literal">F=f</CODE
> and the <code class="literal">F=r</CODE
> flags are very similar and easily
confused.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-21">30.8.21 F=F</A
></H3
><p class="refpurpose">Need From: in header</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31895"></A
><a class="indexterm" name="AUTOID-31897"></A
>The <code class="literal">F=F</CODE
> flag is used by <em class="emphasis">sendmail.cf</EM
> header commands
to force the inclusion of sender (From) information (see <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
>):</P
><p class="para"><blockquote class="screen"><pre class="screen">H?F?Resent-From: $q
H?F?From: $q</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;The <code class="literal">F=F</CODE
> flag has no special internal meaning to <em class="emphasis">sendmail</EM
>.
It is a convention that is used only in the assorted <code class="literal">From:</CODE
> header
(see <a class="xref" href="ch35_10.htm" title="">Section 35.10.14, From:</A
>) definitions.
See <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
> for a general description of this process.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-22">30.8.22 F=g</A
></H3
><p class="refpurpose">Suppress From:&lt;&gt;</P
>(V8.6 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31918"></A
><a class="indexterm" name="AUTOID-31920"></A
><a class="indexterm" name="AUTOID-31923"></A
><a class="indexterm" name="AUTOID-31926"></A
><a class="indexterm" name="AUTOID-31929"></A
><a class="indexterm" name="AUTOID-31933"></A
>The special address <code class="literal">&lt;&gt;</CODE
> is used as the envelope sender
when <em class="emphasis">sendmail</EM
> bounces a mail message. This address is
intended to prevent bounced messages from themselves bouncing.
Unfortunately, not all configuration files properly handle
this form of sender address. The stock SunOS configuration files prior
to Solaris 2.3,
for example, caused <em class="emphasis">sendmail</EM
> to enter an endless
loop when processing <code class="literal">&lt;&gt;</CODE
>.
Also, some UUCP implementations get confused when they are executed
with command line arguments of:</P
><p class="para"><blockquote class="screen"><pre class="screen">-f &lt;&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">As an interim measure, until all programs learn to correctly handle
the <code class="literal">&lt;&gt;</CODE
> address, you may use the <code class="literal">F=g</CODE
> flag
to suppress that address for selected delivery agents.
If the <code class="literal">F=g</CODE
> flag is set for
a delivery agent, it uses the value of <code class="literal">$g</CODE
> 
(see <a class="xref" href="ch31_10.htm" title="">Section 31.10.16</A
>) in place of the <code class="literal">&lt;&gt;</CODE
>, where <code class="literal">$g</CODE
> 
contains <code class="literal">$n</CODE
> (usually MAILER-DAEMON see <a class="xref" href="ch31_10.htm" title="">Section 31.10.26, $n</A
>) with
an <code class="literal">@</CODE
> and your domain name appended.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-23">30.8.23 F=h</A
></H3
><p class="refpurpose">Preserve uppercase in hostname</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31962"></A
><a class="indexterm" name="AUTOID-31964"></A
><a class="indexterm" name="AUTOID-31967"></A
>Some delivery agents, such as those that deal with files, require
that the recipient's hostname be left as is.
The hostname portion of the recipient's address is ordinarily
converted to all lowercase before being tucked into <code class="literal">$h</CODE
>.
Specifying the <code class="literal">F=h</CODE
>
flag tells <em class="emphasis">sendmail</EM
> to not convert that address to lowercase.
[19]</P
><blockquote class="footnote"><p class="para">[19] This flag was added specifically to handle the UUCP host named <em class="emphasis">Shasta</EM
>
at Stanford University.</P
></BLOCKQUOTE
><p class="para">The <code class="literal">$h</CODE
> macro (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.17</A
>) is usually used with the <code class="literal">A=</CODE
> equate
of a delivery agent. For example</P
><p class="para"><blockquote class="screen"><pre class="screen">Muucp, P=/usr/bin/uux, F=msDFMhuU, A=uux - -r $h!rmail ($u)</PRE
></BLOCKQUOTE
></P
><p class="para">Here, the <code class="literal">h</CODE
> in <code class="literal">F=msDFMhuU</CODE
> tells
<em class="emphasis">sendmail</EM
> to leave the <code class="literal">$h</CODE
> alone and <em class="emphasis">not</EM
>
to convert the hostname in that defined macro to lowercase.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-24">30.8.24 F=i</A
></H3
><p class="refpurpose">Do UDB sender rewrite on envelope</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-31996"></A
><a class="indexterm" name="AUTOID-31998"></A
><a class="indexterm" name="AUTOID-32001"></A
><a class="indexterm" name="AUTOID-32004"></A
>The <code class="literal">F=@</CODE
> flag (see <a class="xref" href="#SML2-CH-30-SECT-8-10" title="">Section 30.8.10</A
>)
allows all addresses for a given delivery agent to be rewritten
by the User Database (see <a class="xref" href="ch33_05.htm" title="The User Database">Section 33.5</A
>). The <code class="literal">F=i</CODE
> flag either
suppresses that rewrite for the sender envelope (if absent) or allows that
rewrite for the sender envelope (if present).
For example, consider mail from the user <code class="literal">jane</CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">MAIL from: jane         <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> SMTP envelope sender</I
>
From: jane              <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> header sender</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Now assume that a User Database entry like the following exists:</P
><p class="para"><blockquote class="screen"><pre class="screen">jane:mailname       Jane.Doe</PRE
></BLOCKQUOTE
></P
><p class="para">If the <code class="literal">F=i</CODE
> flag is absent but the <code class="literal">F=@</CODE
> flag present,
the envelope-sender address will remain unchanged, but the 
header-sender address will be rewritten by the User Database:</P
><p class="para"><blockquote class="screen"><pre class="screen">MAIL from: jane         <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> SMTP envelope sender</I
>
From: Jane.Doe          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> header sender</I
></PRE
></BLOCKQUOTE
></P
><p class="para">But if the <code class="literal">F=i</CODE
> and <code class="literal">F=@</CODE
> flags are both present,
the envelope- and header-sender addresses will both be rewritten
by the User Database:</P
><p class="para"><blockquote class="screen"><pre class="screen">MAIL from: Jane.Doe     <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> SMTP envelope sender</I
>
From: Jane.Doe          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> header sender</I
></PRE
></BLOCKQUOTE
></P
><p class="para">No matter how the envelope-sender address is rewritten (with or
without use of the User Database), the result is
saved to the <code class="literal">S</CODE
> line
of the <em class="emphasis">qf</EM
> file (<a class="xref" href="ch23_09.htm" title="">Section 23.9.14, S line</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-25">30.8.25 F=I (uppercase i)</A
></H3
><p class="refpurpose">Send SMTP VERB to other site</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32045"></A
><a class="indexterm" name="AUTOID-32047"></A
>The <code class="literal">F=I</CODE
> flag tells the local <em class="emphasis">sendmail</EM
> to send
the following VERB
[20]
SMTP command to the receiving <em class="emphasis">sendmail</EM
>:</P
><blockquote class="footnote"><p class="para">[20] VERB is defined in RFC1700.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">VERB				<i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> ours sends</I
>
200 Verbose mode			<i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> recipient replies</I
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">VERB</CODE
> SMTP command causes the receiving <em class="emphasis">sendmail</EM
> to go into
verbose mode <em class="emphasis">and</EM
> to set its deliver mode to <em class="emphasis">interactive</EM
>.
This has the same effect as would occur if the receiving <em class="emphasis">sendmail</EM
> had
been run with the command-line options <code class="literal">-v</CODE
> and <code class="literal">-odi</CODE
> set.</P
><p class="para">The <code class="literal">F=I</CODE
> flag is intended as an aid in debugging
a remote receiving site's <em class="emphasis">sendmail</EM
>. The <code class="literal">VERB</CODE
> SMTP command
causes that remote site to run in verbose mode.
By temporarily adding the <code class="literal">F=I</CODE
> flag to a delivery agent's
definition and then running <em class="emphasis">sendmail</EM
> locally with the 
<code class="literal">-v</CODE
> command-line argument, you can watch both
the local and the remote's verbose output.
Each line of the remote site's verbose output will be seen locally
prefixed with a <code class="literal">050</CODE
>.</P
><p class="para">Note that if the <code class="literal">PrivacyOptions</CODE
> (<code class="literal">p</CODE
>) option on the remote
site's <em class="emphasis">sendmail</EM
> is set to <code class="literal">noexpn</CODE
> (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.47, PrivacyOptions (p)</A
>),
that site's response to the <code class="literal">VERB</CODE
> SMTP command will be this
rejection:</P
><p class="para"><blockquote class="screen"><pre class="screen">502 Verbose unavailable</PRE
></BLOCKQUOTE
></P
><p class="para">Also note that if the other side is not running <em class="emphasis">sendmail</EM
>, you may see
other errors:</P
><p class="para"><blockquote class="screen"><pre class="screen">501 No argument given in VERB command.  <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> PMDF V5.0</I
>
250 Ok                                  <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> post.office v1.9.1 (but ignores its own Ok)</I
></PRE
></BLOCKQUOTE
></P
><p class="para">In both these cases, the request to the other machine to go into verbose mode has
failed.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-26">30.8.26 F=j</A
></H3
><p class="refpurpose">Perform UDB rewrite of header recipient addresses</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32098"></A
><a class="indexterm" name="AUTOID-32100"></A
><a class="indexterm" name="AUTOID-32103"></A
><a class="indexterm" name="AUTOID-32106"></A
>If <em class="emphasis">sendmail</EM
> was compiled with User Database support (see <a class="xref" href="ch18_08.htm" title="">Section 18.8.54, USERDB</A
>)
and if that database is being used (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.75, UserDatabaseSpec (U)</A
>), 
you may have <em class="emphasis">sendmail</EM
>
rewrite header recipient addresses using that database. The <code class="literal">F=j</CODE
>
flag tells <em class="emphasis">sendmail</EM
> to look up recipient addresses in the User Database
(using the <code class="literal">mailname</CODE
> keyword). If an appropriate entry is found, it
is used in place of the original address in the recipient headers.
The process is the same as that described for the <code class="literal">F=i</CODE
> flag, except that here it is for recipient
headers.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-27">30.8.27 F=k</A
></H3
><p class="refpurpose">Don't check for loops in HELO command</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32125"></A
><a class="indexterm" name="AUTOID-32127"></A
><a class="indexterm" name="AUTOID-32130"></A
><a class="indexterm" name="AUTOID-32132"></A
>When another host connects to the local host and that other host claims to have the same 
canonical name as the local host, it should be considered an error.
In V8.6 <em class="emphasis">sendmail</EM
>, setting
the <code class="literal">CheckLoopBack</CODE
> variable in <em class="emphasis">conf.c</EM
> determined whether this error was
detected. But beginning with V8.7 <em class="emphasis">sendmail</EM
>,
this check is based on the delivery agent. If the
<code class="literal">F=k</CODE
> flag is absent, the check is done. If the <code class="literal">F=k</CODE
> flag
is set, the check is skipped.</P
><p class="para">The check is performed only for SMTP connections. The literal canonical name
given in the connecting host's HELO line is compared to the canonical name
for the local host. If they are the same, the following error
is printed, and the connection is disallowed:</P
><p class="para"><blockquote class="screen"><pre class="screen">553 <code class="replaceable"><i>host</I
></CODE
> config error: mail loops back to myself           <img src="../chars/larr.gif" alt="&lt;-"> V8.6
553 <code class="replaceable"><i>host</I
></CODE
> config error: mail loops back to me (MX problem?) <img src="../chars/larr.gif" alt="&lt;-"> V8.7</PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="replaceable"><i>host</I
></CODE
> is the name of the offending host.</P
><p class="para">A problem can arise at sites that run two different invocations
of <em class="emphasis">sendmail</EM
> (one for SMTP connections and another
for command-line invocation, where each uses a different configuration file).
In this instance, when the latter connects to the former, this error may occur.
Such sites may find it necessary to set the <code class="literal">F=k</CODE
> flag for the delivery
agent that handles SMTP connections, usually <code class="literal">Msmtp</CODE
>.
With an m4 configuration the following command does just that:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`SMTP_MAILER_FLAGS',`k')dnl</PRE
></BLOCKQUOTE
></P
><p class="para">Note that <em class="emphasis">sendmail</EM
> must recognize its local hostname
among many possible names. See <a class="xref" href="ch32_05.htm" title="">Section 32.5.8, $=w</A
> for
a discussion of <code class="literal">$=w</CODE
> and MX records.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-28">30.8.28 F=l (lowercase L)</A
></H3
><p class="refpurpose">Agent performs local (final) delivery</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32166"></A
><a class="indexterm" name="AUTOID-32168"></A
><a class="indexterm" name="AUTOID-32171"></A
><a class="indexterm" name="AUTOID-32175"></A
>The <code class="literal">F=l</CODE
> flag tells <em class="emphasis">sendmail</EM
> that this delivery agent
will be performing final delivery (usually on the local machine).
This notification affects <em class="emphasis">sendmail</EM
>'s behavior in three ways.</P
><p class="para">First, it enables the DSN notify on success mechanism.
[21]
That is, if the message
were received via SMTP with the envelope</P
><blockquote class="footnote"><p class="para">[21] This replaces the <code class="literal">Return-Receipt-To:</CODE
> header line.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">RCPT To: user@here.us.edu NOTIFY=SUCCESS</PRE
></BLOCKQUOTE
></P
><p class="para">then <em class="emphasis">sendmail</EM
> (upon final local delivery) sends back to the original 
sender an email message acknowledging receipt. This mechanism should be
used sparingly.</P
><p class="para">Second, the <code class="literal">F=l</CODE
> flag allows <em class="emphasis">sendmail</EM
> to ignore any host part of
the triple returned by rule set 0. Ordinarily, the <code class="literal">$@</CODE
>
operator must appear in the RHS for all delivery
agents selected. If no host is selected by <code class="literal">$@</CODE
>, <em class="emphasis">sendmail</EM
>
prints this error and bounces the message</P
><p class="para"><blockquote class="screen"><pre class="screen">554 buildaddr: no host</PRE
></BLOCKQUOTE
></P
><p class="para">But since the host is not always needed for final delivery, the presence
of the <code class="literal">F=l</CODE
> flag tells <em class="emphasis">sendmail</EM
> to silently ignore
a missing host part.</P
><p class="para">Third, the <code class="literal">F=l</CODE
> flag influences how undeliverable mail will be handled. When
the <code class="literal">ErrorMode</CODE
> (<code class="literal">e</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.24, ErrorMode (e)</A
>)
is <code class="literal">q</CODE
> (quiet), such mail is usually reported in the
<em class="emphasis">sendmail</EM
> program's
<em class="emphasis">exit</EM
>(2) status (see <a class="xref" href="ch36_05.htm#SML2-CH-36-SECT-5-3" title="sendmail's exit() Status">Section 36.5, "sendmail's exit() Status"</A
>).
With the <code class="literal">F=l</CODE
> flag set, the undeliverable
message will instead be appended to 

<em class="emphasis">~/dead.letter</EM
> for a local sender
or mailed back for a remote sender.</P
><p class="para">In general, the <code class="literal">F=l</CODE
> flag should always be specified for the <code class="literal">local</CODE
>, <code class="literal">prog</CODE
>,
and <code class="literal">*file*</CODE
> delivery agents.</P
><p class="para">Note that the processing of a user's <em class="emphasis">~/.forward</EM
> file is no longer tied to the <code class="literal">local</CODE
>
delivery agent, nor to this <code class="literal">F=l</CODE
> flag. The ability to look in a user's
<em class="emphasis">~/.forward</EM
> file is now determined by the <code class="literal">F=w</CODE
> flag.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-29">30.8.29 F=L</A
></H3
><p class="refpurpose">Specify SMTP line limits</P
>(obsolete as of V8.8)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32230"></A
><a class="indexterm" name="AUTOID-32232"></A
><a class="indexterm" name="AUTOID-32234"></A
>Prior to V8.8 <em class="emphasis">sendmail</EM
>, this <code class="literal">F=L</CODE
> flag caused <em class="emphasis">sendmail</EM
>
to split output lines in the message body so that they did not exceed
990 characters and always caused <em class="emphasis">sendmail</EM
>
to clear the most significant bit of the characters in
those lines.</P
><p class="para">Beginning with V8.8 <em class="emphasis">sendmail</EM
>, <code class="literal">F=L</CODE
> emulates this
old behavior under certain conditions.
<code class="literal">F=L</CODE
> causes <em class="emphasis">sendmail</EM
> to assign <code class="literal">L=</CODE
> a 
default value of 990, if it is missing one
(see <a class="xref" href="ch30_04.htm" title="">Section 30.4.6</A
>), and (if the configuration file level
is 1 or less) to set the <code class="literal">F=7</CODE
> flag.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-30">30.8.30 F=m</A
></H3
><p class="refpurpose">Allow delivery to multiple recipients</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32256"></A
><a class="indexterm" name="AUTOID-32258"></A
><a class="indexterm" name="AUTOID-32261"></A
><a class="indexterm" name="AUTOID-32264"></A
>Whenever the <em class="emphasis">sendmail</EM
> program executes the program specified
by the <code class="literal">P=</CODE
> equate (see <a class="xref" href="ch30_04.htm" title="">Section 30.4.9</A
>), that program is given
its <em class="emphasis">argv</EM
> vector as specified by the <code class="literal">A=</CODE
> equate (see <a class="xref" href="ch30_04.htm" title="">Section 30.4.1</A
>).
As the last step in building that <em class="emphasis">argv</EM
>, <em class="emphasis">sendmail</EM
> appends
one or more recipient addresses.</P
><p class="para">The decision as to whether it appends one address or many is
determined by the <code class="literal">F=m</CODE
> flag. If this flag is not specified,
the delivery agent is given only one recipient.
Otherwise, if it is specified, the delivery agent may be given
many recipients.
In either case, if there are more recipients than the argv can
accept, the delivery agent is rerun as many times as is necessary
to handle them all.</P
><p class="para">Note that <em class="emphasis">sendmail</EM
> is able to
distinguish only between failures involving one, many, or all of the recipients
when it is delivering with SMTP.
Otherwise, it judges delivery as successful if a zero <em class="emphasis">exit</EM
>(2) value is returned
by a delivery agent. If the delivery agent fails to deliver to
one of many recipients, it exits with a nonzero value, and  because of
that single failure, <em class="emphasis">sendmail</EM
> will presume that delivery to all
recipients failed.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-31">30.8.31 F=M</A
></H3
><p class="refpurpose">Need Message-ID: in header</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32289"></A
><a class="indexterm" name="AUTOID-32291"></A
>The <code class="literal">F=M</CODE
> flag is used by <em class="emphasis">sendmail.cf</EM
> header commands
to force the inclusion of message identification information.
(see <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
>):</P
><p class="para"><blockquote class="screen"><pre class="screen">H?M?Resent-Message-ID: &lt;$t.$i@$j&gt;
H?M?Message-ID: &lt;$t.$i@$j&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">F=M</CODE
> flag has no special internal meaning to <em class="emphasis">sendmail</EM
>.
It is a convention that is used only in the assorted <code class="literal">Message-ID:</CODE
> header
(see <a class="xref" href="ch35_10.htm" title="">Section 35.10.19, Message-ID:</A
>) definitions.
See <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
> for a general description of this process.</P
><p class="para">Note that the <code class="literal">Message-ID:</CODE
> header definition should always
be included in the <em class="emphasis">sendmail.cf</EM
> file because packages expect the presence of that header by many software packages.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-32">30.8.32 F=n</A
></H3
><p class="refpurpose">Don't use UNIX-style From in header</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32315"></A
><a class="indexterm" name="AUTOID-32317"></A
>The UNIX-style mailbox (a single file into which many mail messages
are placed) requires that each message be separated from the others
by a blank line followed by a line that begins with the five
characters &quot;<code class="literal">From&nbsp;</CODE
>&quot;:</P
><p class="para"><blockquote class="screen"><pre class="screen">and thanks again. - bill                  <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> one message ends</I
>
                                           <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> a blank line</I
>
From george Fri Apr  6 12:03:45 1990      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> next message starts</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Ordinarily, <em class="emphasis">sendmail</EM
> adds a five-character &quot;<code class="literal">From&nbsp;</CODE
>&quot;
line to a message if there isn't one.
The <code class="literal">F=n</CODE
> flag prevents <em class="emphasis">sendmail</EM
> from doing this. It is intended for
use when not dealing with a UNIX-style mailbox.</P
><p class="para">Note that if the <code class="literal">F=U</CODE
> flag is specified (but not <code class="literal">F=n</CODE
>),
then the five-character &quot;<code class="literal">From&nbsp;</CODE
>&quot;
header line is created, and the words <code class="literal">remote from $g</CODE
>
are appended to that line.
The <code class="literal">F=n</CODE
> flag should <em class="emphasis">always</EM
> be specified for SMTP
delivery agents. The five-character &quot;<code class="literal">From&nbsp;</CODE
>&quot; line
is not a valid RFC822 header (because it lacks a colon) and is not permitted.</P
><p class="para">Apart from SMTP, the use of the <code class="literal">F=n</CODE
> flag is best determined
on a case-by-case basis. Some delivery agents always generate
a &quot;<code class="literal">From&nbsp;</CODE
>&quot; line, so the <code class="literal">F=n</CODE
> flag can be used
to avoid duplication. Some delivery agents generate
a &quot;<code class="literal">From&nbsp;</CODE
>&quot; line only if there is not already one there,
so the <code class="literal">F=n</CODE
> flag is optional and perhaps best omitted.
Some delivery agents never generate
a &quot;<code class="literal">From&nbsp;</CODE
>&quot; line, yet require one (such as the <em class="emphasis">uux</EM
>
program); for these the <code class="literal">F=n</CODE
> flag should always be
omitted.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-33">30.8.33 F=o</A
></H3
><p class="refpurpose">Always run delivery agent as recipient</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32355"></A
><a class="indexterm" name="AUTOID-32357"></A
><a class="indexterm" name="AUTOID-32360"></A
>Under certain circumstances, before <em class="emphasis">sendmail</EM
> delivers to a file or through programs, 
it may assume the identity (<em class="emphasis">uid</EM
> and <em class="emphasis">gid</EM
>) of the controlling user
(see <a class="xref" href="ch24_02.htm#SML2-CH-24-SECT-2-2" title="Delivery to Files">Section 24.2.2</A
> for a description of this process).
Beginning with V8.7, the <code class="literal">F=o</CODE
> flag changes this behavior.
Specifying <code class="literal">F=o</CODE
> flag causes
<em class="emphasis">sendmail</EM
> to assume the identity of the recipient.
Omitting the <code class="literal">F=o</CODE
> flag causes <em class="emphasis">sendmail</EM
> to assume the identity
of the controlling user where appropriate.</P
><p class="para">In version 5 and earlier configuration files (<a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>)
this flag is automatically
set for the <code class="literal">prog</CODE
> and <code class="literal">*file*</CODE
> delivery agents.
Note that the <code class="literal">U=</CODE
> equate (see <a class="xref" href="ch30_04.htm" title="">Section 30.4.13</A
>), when specified,
always overrides the controlling user.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-34">30.8.34 F=p</A
></H3
><p class="refpurpose">Process return path per RFC821</P
>(deprecated)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32386"></A
><a class="indexterm" name="AUTOID-32388"></A
><a class="indexterm" name="AUTOID-32391"></A
>The SMTP <em class="emphasis">mail</EM
> command normally uses the envelope address for the sender:</P
><p class="para"><blockquote class="screen"><pre class="screen">MAIL From:&lt;jqp@wash.dc.gov&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">If the <code class="literal">F=p</CODE
> flag is specified, <em class="emphasis">sendmail</EM
> instead
sends a transformed version of that address. The transformation
can take one of two forms, depending on the first character of
the envelope address. If that address begins with an <code class="literal">@</CODE
>
character, then an <code class="literal">@</CODE
>, the local hostname and a comma are prepended
to that address to create a legal return path:</P
><p class="para"><blockquote class="screen"><pre class="screen">&lt;@hub:jqp@wash.dc.gov&gt;
  <i class="lineannotation"><img src="../chars/darr.gif" alt="-v"></I
>
<i class="lineannotation">becomes</I
>
  <i class="lineannotation"><img src="../chars/darr.gif" alt="-v"></I
>
&lt;@ourhost,@hub:jqp@wash.dc.gov&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">If the envelope address for the sender does not start with an
<code class="literal">@</CODE
> character, then an <code class="literal">@</CODE
>, the local hostname, and a colon
are prepended to that address:</P
><p class="para"><blockquote class="screen"><pre class="screen">&lt;jqp@wash.dc.gov&gt; <em class="emphasis">becomes</EM
> &lt;@ourhost:jqp@wash.dc.gov&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">See also the <code class="literal">DontPruneRoutes</CODE
> option.</P
><p class="para">Note that these forms of address transformations are discouraged by
RFC1123. For this reason the <code class="literal">F=p</CODE
> flag is deprecated
and may be removed from future versions of <em class="emphasis">sendmail</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-35">30.8.35 F=P</A
></H3
><p class="refpurpose">Need Return-Path: in header</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32426"></A
><a class="indexterm" name="AUTOID-32428"></A
>The <code class="literal">F=P</CODE
> flag is used by <em class="emphasis">sendmail.cf</EM
> header commands
to force the inclusion of return-path information:</P
><p class="para"><blockquote class="screen"><pre class="screen">H?P?Return-Path: &lt;$g&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">F=P</CODE
> flag has no special internal meaning to <em class="emphasis">sendmail</EM
>.
It is a convention that is used only in the assorted <code class="literal">Return-Path:</CODE
> header
(see <a class="xref" href="ch35_10.htm" title="">Section 35.10.28, Return-Path:</A
>) definitions.
See <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
> for a general description of this process.</P
><p class="para">The sender's envelope address (the address that would be used
to return mail if it were bounced, for example) is placed into <code class="literal">$g</CODE
>
for use in the <code class="literal">Return-Path:</CODE
> header line.
This is usually done during final delivery, although it can
also be done for delivery agents that lack a clear envelope
address.
The form of the address in the <code class="literal">$g</CODE
> macro (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.16</A
>) 
depends on the setting of the <code class="literal">F=p</CODE
> flag.
Note that this is normally the same as the address in the five character
&quot;<code class="literal">From&nbsp;</CODE
>&quot; line.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-36">30.8.36 F=q</A
></H3
><p class="refpurpose">250 versus 252 return for SMTP VRFY</P
>(8.8 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32455"></A
><a class="indexterm" name="AUTOID-32458"></A
><a class="indexterm" name="AUTOID-32460"></A
>Prior to RFC1123 a successful reply to the SMTP VRFY
command was always prefixed with a 250, meaning that sending to this
address was likely to result in successful delivery:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>VRFY user</B
></CODE
>
250 user@here.us.edu (Full Name)</PRE
></BLOCKQUOTE
></P
><p class="para">Here, <em class="emphasis">sendmail</EM
> states (with the <code class="literal">250</CODE
>) that it interpreted
the address as <em class="emphasis">valid locally</EM
> and that delivery or relaying to 
another site would be attempted.</P
><p class="para">RFC1123 now requires that shades of meaning be conveyed in
that success code, so the
correct prefix should be 252, which means that we will <em class="emphasis">accept</EM
> the address
and attempt to relay it elsewhere.</P
><p class="para">If the <code class="literal">F=q</CODE
> flag is set, <em class="emphasis">sendmail</EM
> returns the 250 prefix;
otherwise, it returns the 252 prefix.
It should be set only for delivery agents doing local delivery.
For configuration files earlier than version 7, the  <code class="literal">F=q</CODE
> 
flag is automatically set for the <code class="literal">local</CODE
>, <code class="literal">prog</CODE
>, and
<code class="literal">*file*</CODE
> delivery agents.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-37">30.8.37 F=r</A
></H3
><p class="refpurpose">Delivery agent adds -r to argv</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32486"></A
><a class="indexterm" name="AUTOID-32488"></A
>If <em class="emphasis">sendmail</EM
> is run with a <code class="literal">-f</CODE
> command-line argument,
and if the <code class="literal">F=r</CODE
> flag is specified, the <code class="literal">A=</CODE
> for
this delivery agent has the two additional arguments, <code class="literal">-r</CODE
>
and <code class="literal">$g</CODE
>, inserted between its <code class="literal">argv[0]</CODE
> and <code class="literal">argv[1]</CODE
>.

Consider a case in which <em class="emphasis">sendmail</EM
> is run as</P
><p class="para"><blockquote class="screen"><pre class="screen">/usr/lib/sendmail -f jim bill</PRE
></BLOCKQUOTE
></P
><p class="para">If <code class="literal">bill</CODE
> is a local user and the delivery agent for <code class="literal">local</CODE
>
is defined as</P
><p class="para"><blockquote class="screen"><pre class="screen">Mlocal, P=/bin/mail, F=rlsDFMmnP, S=10, R=20, A=mail -d $u</PRE
></BLOCKQUOTE
></P
><p class="para">then the <code class="literal">r</CODE
> in <code class="literal">F=rlsDFmnP</CODE
> will cause the <code class="literal">A=</CODE
>
of</P
><p class="para"><blockquote class="screen"><pre class="screen">A=mail -d $u</PRE
></BLOCKQUOTE
></P
><p class="para">to be rewritten as</P
><p class="para"><blockquote class="screen"><pre class="screen">A=mail -r $g -d $u</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">$g</CODE
> is <code class="literal">jim</CODE
> from the original command line (but
rewritten to be a return address relative to the recipient).
The original <code class="literal">-f</CODE
> argument <code class="literal">jim</CODE
> is first rewritten
by rule sets 3, 1, and 4. The result of those rewrites is placed
into <code class="literal">$f</CODE
> (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.14, $f</A
>). 
The <code class="literal">$f</CODE
> macro is rewritten by rule sets 3,
1, <code class="literal">S=</CODE
>, and 4, and the result is placed into <code class="literal">$g</CODE
> (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.16</A
>).</P
><p class="para">Note that the <code class="literal">F=f</CODE
> and the <code class="literal">F=r</CODE
> flags are very similar and easily
confused.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-38">30.8.38 F=R</A
></H3
><p class="refpurpose">Use a reserved TCP port</P
>(V8.6 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32537"></A
><a class="indexterm" name="AUTOID-32539"></A
><a class="indexterm" name="AUTOID-32541"></A
><a class="indexterm" name="AUTOID-32544"></A
>The <code class="literal">F=R</CODE
> flag causes
<em class="emphasis">sendmail</EM
> to connect on a reserved (privileged) TCP port for 
additional security. 
Privileged Internet  ports  are  those  in  the  range  0 to 1023.
Only <em class="emphasis">root</EM
> is allowed to connect to such ports.
The <em class="emphasis">sendmail</EM
> program calls <em class="emphasis">rresvport</EM
>(3) to obtain a socket
on its selected port.
Note that this is done only when instantiating an outgoing connection. See
<a class="xref" href="ch30_04.htm" title="$h and other arguments in A=[IPC]">Section 30.4.1.2, "$h and other arguments in A=[IPC]"</A
> for another way to set the outgoing port number.</P
><p class="para">This flag is suitable only for use with the <code class="literal">[IPC]</CODE
> and <code class="literal">[TCP]</CODE
>
delivery agents. Note that <em class="emphasis">sendmail</EM
> is usually 
<em class="emphasis">suid</EM
> <em class="emphasis">root</EM
> when run as a daemon.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-39">30.8.39 F=s</A
></H3
><p class="refpurpose">Strip quotation marks</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32566"></A
><a class="indexterm" name="AUTOID-32568"></A
><a class="indexterm" name="AUTOID-32571"></A
><a class="indexterm" name="AUTOID-32574"></A
><a class="indexterm" name="AUTOID-32577"></A
>Some delivery agents don't correctly understand
quotation marks in addresses, for example,</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;dechost::user&quot;@relay</PRE
></BLOCKQUOTE
></P
><p class="para">For delivery agents that do not correctly understand them,
the <code class="literal">F=s</CODE
> flag causes <em class="emphasis">sendmail</EM
> to strip all quotation marks
from the address before handing it to the delivery agent:</P
><p class="para"><blockquote class="screen"><pre class="screen">dechost::user@relay</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">local</CODE
> delivery agent should always have the <code class="literal">F=s</CODE
>
flag specified. The <code class="literal">prog</CODE
> delivery agent commonly
has the <code class="literal">F=s</CODE
> flag specified. The <code class="literal">uucp</CODE
> delivery agent
may or may not
require that flag depending on the specifics of the program specified
in the <code class="literal">P=</CODE
> equate.
The <code class="literal">[IPC]</CODE
> and <code class="literal">[TCP]</CODE
> delivery agents should <em class="emphasis">never</EM
>
specify the <code class="literal">F=s</CODE
> flag.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-40">30.8.40 F=S</A
></H3
><p class="refpurpose">Assume specified uid and gid</P
>(Revised for V8.7)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32606"></A
><a class="indexterm" name="AUTOID-32608"></A
><a class="indexterm" name="AUTOID-32611"></A
><a class="indexterm" name="AUTOID-32613"></A
>There are two major ways in which <em class="emphasis">sendmail</EM
> can be run:
as an <em class="emphasis">suid</EM
> <em class="emphasis">root</EM
> process (that is, with the permissions
of <em class="emphasis">root</EM
> no matter who runs it) or as an ordinary
process run by an ordinary (nonprivileged) user (that is,
with <em class="emphasis">root</EM
> privilege <em class="emphasis">only</EM
> if it is run by <em class="emphasis">root</EM
>).
When <em class="emphasis">sendmail</EM
> is running with <em class="emphasis">root</EM
> privilege
and when the <code class="literal">F=S</CODE
> flag is specified for a delivery agent,
<em class="emphasis">sendmail</EM
> <em class="emphasis">always</EM
> invokes that delivery agent as the
effective user and
effective group specified by the <code class="literal">U=</CODE
> equate.
[22]
If the <code class="literal">U=</CODE
> equate is unspecified or is specified as zero, it
runs as <em class="emphasis">root</EM
>. In both instances, the real GID and
UID remain that of the receiving user -that is, the <code class="literal">F=S</CODE
> flag
acts like the UNIX <em class="emphasis">suid</EM
> and <em class="emphasis">sgid</EM
> bits.</P
><blockquote class="footnote"><p class="para">[22] Prior to V8.7 there was no <code class="literal">U=</CODE
> equate, so
<code class="literal">F=S</CODE
> always ran as <em class="emphasis">root</EM
>.</P
></BLOCKQUOTE
><p class="para">If the <code class="literal">F=S</CODE
> is not specified for the delivery agent,
<em class="emphasis">sendmail</EM
> first checks to see whether there is a controlling
user for the address. If there is one, <em class="emphasis">sendmail</EM
> becomes that
user for delivery. If delivery is to a file
and if the <em class="emphasis">suid</EM
> bit is set for that file,
<em class="emphasis">sendmail</EM
> becomes the owner of the file. Similarly,
if delivery is to a file and the <em class="emphasis">sgid</EM
> bit is set,
<em class="emphasis">sendmail</EM
> sets its group identity to the group of the file.
Finally, if the user or group part of the <code class="literal">U=</CODE
> equate was missing
or 0, <em class="emphasis">sendmail</EM
> assumes the identity of the 
<code class="literal">DefaultUser</CODE
>  (<code class="literal">u</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.15</A
>).
Otherwise, it assumes the identity of the <code class="literal">U=</CODE
> equate.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-41">30.8.41 F=u</A
></H3
><p class="refpurpose">Preserve uppercase for username</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32660"></A
><a class="indexterm" name="AUTOID-32662"></A
><a class="indexterm" name="AUTOID-32665"></A
>The username portion of the recipient's address is ordinarily
converted to lowercase before being tucked into <code class="literal">$u</CODE
>.
The <code class="literal">$u</CODE
> is usually used with the <code class="literal">A=</CODE
> equate
of a delivery agent:</P
><p class="para"><blockquote class="screen"><pre class="screen">Mprog,  P=/bin/sh,   F=lsDFMeuP,  S=10, R=20, A=sh -c $u</PRE
></BLOCKQUOTE
></P
><p class="para">Some delivery agents, such as the <code class="literal">prog</CODE
> agent, execute programs.
They require
that the program (user) name be left as is (otherwise, the program name would
not be found). Specifying the <code class="literal">F=u</CODE
>
flag tells <em class="emphasis">sendmail</EM
> to <em class="emphasis">not</EM
> convert that name to lowercase.</P
><p class="para">Beginning with V8.7 <em class="emphasis">sendmail</EM
>, the <code class="literal">F=u</CODE
> flag also determines
how some aliases are treated. If it is set, usernames are stored in
the <em class="emphasis">aliases</EM
> database without conversion to lowercase. If it is
clear, they are converted to lowercase.</P
><p class="para">Also if the <code class="literal">F=u</CODE
> flag is set, looking up the owner part
that follows the <code class="literal">owner-</CODE
> in a mailing list is done in
a case-sensitive manner. If the <code class="literal">F=u</CODE
> flag is clear, the
owner is converted to lowercase before being looked up.</P
><p class="para">In general, the <code class="literal">F=u</CODE
> flag should be set in all delivery agent declarations, except the <code class="literal">local</CODE
> delivery agent.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-42">30.8.42 F=U</A
></H3
><p class="refpurpose">Use UUCP-Style From line</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32697"></A
><a class="indexterm" name="AUTOID-32699"></A
>The <code class="literal">F=U</CODE
> flag causes <em class="emphasis">sendmail</EM
> to prepend a five-character
&quot;<code class="literal">From&nbsp;</CODE
>&quot;
line to the start of the headers if there is not already one there.
Whether one was prepended or not, this flag also tells <em class="emphasis">sendmail</EM
>
to add the words <code class="literal">remote from </CODE
><em class="emphasis">host</EM
> to the end of that line and
also requires that <code class="literal">$g</CODE
> be in the form <em class="emphasis">host!...</EM
>.</P
><p class="para">The <code class="literal">F=U</CODE
> flag is required when a neighbor UUCP site runs
an old (or possibly SysV) version of the <em class="emphasis">rmail</EM
> program.
The newer BSD versions of <em class="emphasis">rmail</EM
> do not require this flag.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-43">30.8.43 F=w</A
></H3
><p class="refpurpose">Check for /etc/passwd entry</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32721"></A
><a class="indexterm" name="AUTOID-32723"></A
>The <em class="emphasis">sendmail</EM
> program uses the <em class="emphasis">passwd</EM
>(5) file to determine
whether a local address corresponds to a local account. If it does, the
home directory for the user is copied into <code class="literal">$z</CODE
> (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.46</A
>).
Then the full name of the user is extracted from the <em class="emphasis">gecos</EM
> field
of the <em class="emphasis">passwd</EM
>(5) file and placed into <code class="literal">$x</CODE
> (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.42, $x</A
>).</P
><p class="para">Beginning with V8.7 <em class="emphasis">sendmail</EM
>, the information in the <em class="emphasis">passwd</EM
>(5)
file is looked up only if the <code class="literal">F=w</CODE
> flag is set for the recipient's
delivery agent. In general, it must be present (set) for the <code class="literal">local</CODE
>
and any local-clone delivery agents but should be absent for all other delivery
agents. For configuration files less than 6 (see <a class="xref" href="ch27_05.htm#SML2-CH-27-SECT-5-1" title="The V Configuration Command">Section 27.5</A
>),
the <code class="literal">F=w</CODE
> flag is automatically set for the <code class="literal">local</CODE
> delivery agent.</P
><p class="para">Omitting the <code class="literal">F=w</CODE
> flag has several consequences:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">The recipient's
home directory is not looked up, and all user-level
forwarding is prevented. Note that this voids all forwarding, even if the user's
home is defined as part of the <code class="literal">ForwardPath</CODE
> (<code class="literal">J</CODE
>) option 
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.27, ForwardPath (J)</A
>).</P
></LI
><li class="listitem"><p class="para">The user's full name is not looked up in the <em class="emphasis">gecos</EM
> field of the
<em class="emphasis">passwd</EM
>(5) file. </P
></LI
><li class="listitem"><p class="para">The <em class="emphasis">uid</EM
> and <em class="emphasis">gid</EM
> of the recipient become unavailable, so
the identity of the controlling user cannot be set to that of the recipient.</P
></LI
></UL
><p class="para">Note that this flag should be considered mandatory for <code class="literal">local</CODE
>
and local clones.
If you want to cancel forwarding, use the <code class="literal">ForwardPath</CODE
> (<code class="literal">J</CODE
>) option.
Attempting to cancel forwarding by omitting the <code class="literal">F=w</CODE
> flag can have
unpredictable side effects that may cause mail to fail.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-44">30.8.44 F=x</A
></H3
><p class="refpurpose">Need Full-Name: in header</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32770"></A
><a class="indexterm" name="AUTOID-32772"></A
>The <code class="literal">F=x</CODE
> flag is used by <em class="emphasis">sendmail.cf</EM
> header commands
to force the inclusion of the user's full name (see <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
>):</P
><p class="para"><blockquote class="screen"><pre class="screen">H?x?Full-Name: $x</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">F=x</CODE
> flag has no special internal meaning to <em class="emphasis">sendmail</EM
>.
It is a convention that is used only in the assorted <code class="literal">Full-Name:</CODE
> header
(see <a class="xref" href="ch35_10.htm" title="">Section 35.10.15, Full-Name:</A
>) definitions.
See <a class="xref" href="ch30_04.htm" title="">Section 30.4.5</A
> for a general description of this process.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-8-45">30.8.45 F=X</A
></H3
><p class="refpurpose">Need RFC821 hidden dot</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-32793"></A
><a class="indexterm" name="AUTOID-32796"></A
><a class="indexterm" name="AUTOID-32799"></A
>Delivery agents that speak SMTP
require that any line of the message that begins with a dot have that
dot doubled.
Delivery agents speak SMTP when the <code class="literal">$u</CODE
> is missing
from the <code class="literal">A=</CODE
> equate. For example,</P
><p class="para"><blockquote class="screen"><pre class="screen">Mether, P=[TCP], F=msDFMuCX, S=11, R=21, A=TCP $h</PRE
></BLOCKQUOTE
></P
><p class="para">An example of a file that contains leading dots is 
a <em class="emphasis">troff</EM
>(1) source file:</P
><p class="para"><blockquote class="screen"><pre class="screen">.\&quot; Show example
.Ps
Mether, P=[TCP], F=msDFMuCX, S=11, R=21, A=TCP $h
.Ps</PRE
></BLOCKQUOTE
></P
><p class="para">In the above, three lines begin with a leading dot.
The <code class="literal">F=X</CODE
> flag causes <em class="emphasis">sendmail</EM
> to transmit the
above message as</P
><p class="para"><blockquote class="screen"><pre class="screen">..\&quot; Show example
..Ps
Mether, P=[TCP], F=msDFMuCX, S=11, R=21, A=TCP $h
..Pe</PRE
></BLOCKQUOTE
></P
><p class="para">The extra leading dot is
automatically restored to a single dot at the receiving end.&#13;</P
><p class="para">This <code class="literal">F=X</CODE
> flag should be used only with delivery agents that
speak SMTP. It should not be used with other delivery agents, because
they will not know to strip the extra dots.<a class="indexterm" name="AUTOID-32817"></A
><a class="indexterm" name="AUTOID-32818"></A
><a class="indexterm" name="AUTOID-32819"></A
></P
></DIV
></BLOCKQUOTE
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_07.htm" title="30.7 Pitfalls"><img src="../gifs/txtpreva.gif" alt="Previous: 30.7 Pitfalls" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch31_01.htm" title="31. Defined Macros"><img src="../gifs/txtnexta.gif" alt="Next: 31. Defined Macros" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">30.7 Pitfalls</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">31. Defined Macros</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
