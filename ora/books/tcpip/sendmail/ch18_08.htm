<html><head>
<title>[Chapter 18] 18.8 Alphabetized Reference</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T18:48:41Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch18_01.htm" title="18. Compile and Install sendmail"><link rel="prev" href="ch18_07.htm" title="18.7 Pitfalls"><link rel="next" href="ch19_01.htm" title="19. V8 m4 Configuration"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch18_07.htm" title="18.7 Pitfalls"><img src="../gifs/txtpreva.gif" alt="Previous: 18.7 Pitfalls" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 18<br>Compile and Install sendmail</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch19_01.htm" title="19. V8 m4 Configuration"><img src="../gifs/txtnexta.gif" alt="Next: 19. V8 m4 Configuration" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-18-SECT-8">18.8 Alphabetized Reference</A
></H2
><p class="para">In this section we present
each <code class="literal">#define</CODE
> macro (or group of them) in alphabetical order
rather than in the order in which they appear in your <em class="emphasis">Makefile</EM
>.</P
><p class="para">Note that the <b class="emphasis.bold">Tune</B
> column of
<a class="xref" href="#SML2-CH-18-TAB-2" title="#define Macros for Compiling sendmail">Table 18.3</A
>
recommends whether or not you should adjust
(tune) the values for any particular <code class="literal">#define</CODE
>. Those marked
<em class="emphasis">tune</EM
> may be adjusted from within your <em class="emphasis">Makefile</EM
>.
Those marked with <em class="emphasis">port</EM
> should be changed
only in the rare event that you need to port <em class="emphasis">sendmail</EM
>
to a new operating system.
[11]
Those marked with <em class="emphasis">debug</EM
> should only be defined during
porting to help debug the new binary but (for security reasons)
should never be defined for the final production version.</P
><blockquote class="footnote"><p class="para">[11] But note that final porting should be done in <em class="emphasis">conf.h</EM
> and <em class="emphasis">conf.c</EM
> instead
of <em class="emphasis">Makefile</EM
>.</P
></BLOCKQUOTE
><p class="para">Also note that the <b class="emphasis.bold">-d</B
> column shows which
debugging switches can be used to determine whether the corresponding
macro was defined when a <em class="emphasis">sendmail</EM
> binary was compiled (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1, -d0.1</A
>
for a description of this process).<a class="indexterm" name="SML2-CH-18-IX-MACROS-FOR-COMPILING-SENDMAIL"></A
><a class="indexterm" name="SML2-CH-18-IX-SENDMAIL-CONFIGURATION-MACROS"></A
><a class="indexterm" name="SML2-CH-18-IX-COMPILING-SENDMAIL-MACROS-FOR"></A
></P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-2">Table 18.3: #define Macros for Compiling sendmail</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">#define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Tune</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">-d</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">AUTO_NIS_ALIASES</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-1" title="">Section 18.8.1</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Add fallback alias techniques</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">BROKEN_RES_SEARCH</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-2" title="">Section 18.8.2, BROKEN-RES-SEARCH</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Broken resolver fix (e.g. Ultrix)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">BSD4_3</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-3" title="">Section 18.8.3, BSD4-3</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Use BSD 4.3 style signal handling</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">BSD4_4</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-4" title="">Section 18.8.4, BSD4-4</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Compile for BSD 4.4 UNIX</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">DSN</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-5" title="">Section 18.8.5, DSN</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Support Delivery Status Notification</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">ERRLIST_PREDEFINED</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-6" title="">Section 18.8.6</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Correct type conflicts on sys_errlist</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">_FFR_...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-7" title="">Section 18.8.7, -FFR-...</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">For Future Release</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FORK</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-8" title="">Section 18.8.8, FORK</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">The type of <em class="emphasis">fork</EM
>(5) to use</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HAS...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-9" title="">Section 18.8.9, HAS...</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">Has specific system call support</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HESIOD</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-10" title="">Section 18.8.10</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support hesiod database maps</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HES_GETMAILHOST</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-11" title="">Section 18.8.11, HES-GETMAILHOST</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Use hesiod <em class="emphasis">hes_getmailhost</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">IDENTPROTO</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-12" title="">Section 18.8.12, IDENTPROTO</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">See Timeout.ident (<a class="xref" href="ch34_08.htm" title="Timeout.ident">Section 34.8.70.10</A
>)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">IP_SRCROUTE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-13" title="">Section 18.8.13, IP-SRCROUTE</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">Add IP source-routing to $_</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_TYPE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-14" title="">Section 18.8.14, LA-TYPE</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">3.5</TD
><td class="entry" rowspan="1" colspan="1">Define your load-average support</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LDAPMAP</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-15" title="">Section 18.8.15</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Enable use of ldap databases</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOG</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-16" title="">Section 18.8.16, LOG</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Perform logging</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOTUS_NOTES_HACK</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-17" title="">Section 18.8.17, LOTUS-NOTES-HACK</A
></TD
><td class="entry" rowspan="1" colspan="1">V8.7.5</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Strip newlines from <code class="literal">From:</CODE
> headers</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MATCHGECOS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-18" title="">Section 18.8.18, MATCHGECOS</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support for fuzzy name matching</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAX...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-19" title="">Section 18.8.19, MAX...</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Redefine maximums</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MEMCHUNKSIZE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-20" title="">Section 18.8.20, MEMCHUNKSIZE</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Specify memory allocation size</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MIME7TO8</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-21" title="">Section 18.8.21, MIME7TO8</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support MIME 7- to 8-bit conversion</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MIME8TO7</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-22" title="">Section 18.8.22, MIME8TO7</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support MIME 8- to 7-bit conversion</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NAMED_BIND</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-23" title="">Section 18.8.23</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support DNS name resolution</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NDBM</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-24" title="">Section 18.8.24</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support UNIX ndbm(3) Databases</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEED...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-25" title="">Section 18.8.25, NEED...</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Something amiss with your OS?</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NET...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-26" title="">Section 18.8.26, NET...</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Select network type</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NETINFO</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-27" title="">Section 18.8.27</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support NeXT <em class="emphasis">netinfo</EM
>(3) databases</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEWDB</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-28" title="">Section 18.8.28</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support Berkeley <em class="emphasis">db</EM
>(3) Databases</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NIS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-29" title="">Section 18.8.29</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support <em class="emphasis">nis</EM
> maps</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NISPLUS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-30" title="">Section 18.8.30</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support <em class="emphasis">nis+</EM
> maps</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NO_GROUP_SET</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-31" title="">Section 18.8.31, NO-GROUP-SET</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Prevent multi-group file access</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NOTUNIX</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-32" title="">Section 18.8.32, NOTUNIX</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">30.2</TD
><td class="entry" rowspan="1" colspan="1">Exclude From line support</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">OLD_NEWDB</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-33" title="">Section 18.8.33</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support the old form of <em class="emphasis">db</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">_PATH...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-34" title="">Section 18.8.34</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Hard-code paths inside <kbd class="command">sendmail</KBD
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PICKY...</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-35" title="">Section 18.8.35, PICKY...</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Make a pickier <em class="emphasis">sendmail</EM
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PSBUFSIZE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-36" title="">Section 18.8.36, PSBUFSIZ</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Size of <em class="emphasis">prescan</EM
>() buffer</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">QUEUE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-37" title="">Section 18.8.37, QUEUE</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Enable queueing</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">QUEUESEGSIZE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-38" title="">Section 18.8.38, QUEUESEGSIZE</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Amount to grow queue work list</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SCANF</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-39" title="">Section 18.8.39, SCANF</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">Support <em class="emphasis">scanf</EM
>(3) with F command</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_TYPE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-40" title="">Section 18.8.40, SFS-TYPE</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">How to determine free disk space</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-41" title="">Section 18.8.41, SMTP</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Enable SMTP</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTPDEBUG</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-42" title="">Section 18.8.42, SMTPDEBUG</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Enable remote debugging</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTPLINELIM</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-43" title="">Section 18.8.43, SMTPLINELIM</A
></TD
><td class="entry" rowspan="1" colspan="1">n/a</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Default for obsolete F=L flag</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SOLARIS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-44" title="">Section 18.8.44, SOLARIS</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Support Sun's Solaris 2.x</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SPT_TYPE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-45" title="">Section 18.8.45, SPT-TYPE</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Adapt/exclude process title support</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SUID_ROOT_FILES_OK</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-46" title="">Section 18.8.46, SUID-ROOT-FILES-OK</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Allow root delivery to files</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SYSLOG_BUFSIZE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-47" title="">Section 18.8.47, SYSLOG-BUFSIZE</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Limit <em class="emphasis">syslog</EM
>(3) buffer size</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SYSTEM5</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-48" title="">Section 18.8.48, SYSTEM5</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">Support SysV derived machines</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SYS5SIGNALS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-48" title="">Section 18.8.48</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">Use SysV style signals</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TCPWRAPPERS</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-49" title="">Section 18.8.49, TCPWRAPPERS</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Use libwrap.a for connects</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TOBUFSIZE</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-50" title="">Section 18.8.50, TOBUFSIZE</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Set buffer for recipient list</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TRUST_POPEN</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-51" title="">Section 18.8.51, TRUST-POPEN</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Allow use of <em class="emphasis">popen</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TTYNAME</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-52" title="">Section 18.8.52, TTYNAME</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1">35.9</TD
><td class="entry" rowspan="1" colspan="1">Set $y to tty name (obsolete)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UDB_DEFAULT_SPEC</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-53" title="">Section 18.8.53</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Default User Database location</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USERDB</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-54" title="">Section 18.8.54</A
></TD
><td class="entry" rowspan="1" colspan="1">Tune</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support the User Database</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USESETEUID</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-55" title="">Section 18.8.55, USESETEUID</A
></TD
><td class="entry" rowspan="1" colspan="1">Port</TD
><td class="entry" rowspan="1" colspan="1">0.10</TD
><td class="entry" rowspan="1" colspan="1">Support <em class="emphasis">seteuid</EM
>(2) identity changes</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">WILDCARD_SHELL</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-56" title="">Section 18.8.56, WILDCARD-SHELL</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Redefine wildcard shell</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">XDEBUG</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-18-SECT-8-57" title="">Section 18.8.57, XDEBUG</A
></TD
><td class="entry" rowspan="1" colspan="1">Debug</TD
><td class="entry" rowspan="1" colspan="1">0.1</TD
><td class="entry" rowspan="1" colspan="1">Support sanity checks</TD
></TR
></TBODY
></TABLE
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-1">18.8.1 AUTO-NIS-ALIASES</A
></H3
><p class="refpurpose">Add fallback alias techniques</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10809"></A
><a class="indexterm" name="AUTOID-10811"></A
>Ordinarily, <em class="emphasis">sendmail</EM
> will first look for a service-switch
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.61</A
>)
to see how it should look up its aliases. If it finds one, and if
the service <em class="emphasis">aliases</EM
> is listed, it uses the techniques listed
with the service-switch
to look up its aliases. In the absence of a service-switch, or if
the service-switch could not be opened, <em class="emphasis">sendmail</EM
>'s fallback
position is to use the technique called <em class="emphasis">files</EM
> to look up its
aliases.</P
><p class="para">This AUTO_NIS_ALIASES definition, when specified during compilation,
also causes <em class="emphasis">sendmail</EM
> to automatically add the technique
<em class="emphasis">nis</EM
> if NIS was defined or <em class="emphasis">nis+</EM
> if NISPLUS
was defined:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNIS -DAUTO_NIS_ALIASES
DBMDEF= -DNISPLUS -DAUTO_NIS_ALIASES</PRE
></BLOCKQUOTE
></P
><p class="para">The first line causes the fallback list of techniques
to become <em class="emphasis">files</EM
> then <em class="emphasis">nis</EM
>, and the second causes it to become
<em class="emphasis">files</EM
> then <em class="emphasis">nisplus</EM
>. Note that AUTO_NIS_ALIASES is not defined in any
<em class="emphasis">Makefile</EM
> distributed with <em class="emphasis">sendmail</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-2">18.8.2 BROKEN-RES-SEARCH</A
></H3
><p class="refpurpose">Broken resolver fix (e.g. Ultrix)</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10840"></A
><a class="indexterm" name="AUTOID-10842"></A
>On Ultrix, and possibly other systems, the <em class="emphasis">res_search</EM
>(2) routine
incorrectly sets <em class="emphasis">h_errno</EM
> to 0 instead of HOST_NOT_FOUND if a host
name is unknown. On such systems you can
define BROKEN_RES_SEARCH
in your <em class="emphasis">Makefile</EM
>, which tells <em class="emphasis">sendmail</EM
> to consider
0 the same as HOST_NOT_FOUND:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DBROKEN_RES_SEARCH</PRE
></BLOCKQUOTE
></P
><p class="para">As distributed, this is not declared for any of the supplied
<em class="emphasis">Makefile</EM
> files. If you are running Ultrix you should
test your resolver library. If it fails, you should upgrade to 
the latest resolver library. If, for some reason, upgrading is not
possible, you may define this as a workaround. 
When porting to a
new system, you can test with the above ENVDEF= statement and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-3">18.8.3 BSD4-3</A
></H3
><p class="refpurpose">Use old style signal handling</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10861"></A
>Old BSD-based versions of UNIX, such as SunOS 4.0.x and BSD 4.3,
used the <em class="emphasis">signal</EM
>(2) and <em class="emphasis">sigsetmask</EM
>(2) calls to set
and release signals. Modern versions of UNIX use the <em class="emphasis">sigaction</EM
>(2)
and <em class="emphasis">sigprocmask</EM
>(2) pair of routines. For all currently
supported systems, BSD4_3
is already correctly defined in <em class="emphasis">src/Makefiles</EM
>
or in <em class="emphasis">conf.h</EM
>. You should need to define BSD4_3 only if you
are porting to a previously unsupported old BSD-based system:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DBSD4_3</PRE
></BLOCKQUOTE
></P
><p class="para">When porting to a
new system, you can test with the above ENVDEF= statement and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-4">18.8.4 BSD4-4</A
></H3
><p class="refpurpose">Compile for BSD 4.4 Unix</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para">BSD4_4 will automatically be defined when <em class="emphasis">sendmail</EM
> is built under
the BSD 4.4 release of UNIX. You will need to redefine this only if you
are porting to a new operating system that is based on BSD 4.4.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-5">18.8.5 DSN</A
></H3
><p class="refpurpose">Support Delivery Status Notification</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10890"></A
><a class="indexterm" name="AUTOID-10893"></A
>Delivery Status Notification (DSN) replaces
certain SMTP error codes
and the <code class="literal">Return-Receipt-To:</CODE
> header 
(<a class="xref" href="ch35_10.htm" title="">Section 35.10.29, Return-Receipt-To:</A
>) as a means of handling multiple
delivery status requests and problems. 
DSN is an improvement over earlier mechanisms for returning
delivery status information. It can, for example,
supply different status information
for each recipient when multiple recipients are specified. It
can also be used to generate return receipts on a per recipient basis.
DSN status is returned in the MIME encapsulated portion of
a mail message's body.</P
><p class="para">DSN is defined in RFC1891, RFC1892,
RFC1893, and RFC1894.
If you wish to exclude DSN support (not recommended), you may
turn it off like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF=  -DDSN=<code class="userinput"><b>0</B
></CODE
>
               <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
      <i class="lineannotation">turn off DSN support</I
></PRE
></BLOCKQUOTE
></P
><p class="para">MIME is described under the <code class="literal">EightBitMode</CODE
> (<code class="literal">8</CODE
>) option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.22, EightBitMode (8)</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-6">18.8.6 ERRLIST-PREDEFINED</A
></H3
><p class="refpurpose">Correct conflicts on sys-errlist</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10915"></A
><a class="indexterm" name="AUTOID-10917"></A
>Some systems define a type for <em class="emphasis">sys_errlist[]</EM
> that differs from
the internal declaration made by <em class="emphasis">sendmail</EM
>. In such instances
you will get a warning about <em class="emphasis">sys_errlist</EM
> being redefined when
you compile. Such warnings are usually harmless, but they are unattractive. To
eliminate them, add the following to your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DERRLIST_PREDEFINED</PRE
></BLOCKQUOTE
></P
><p class="para">When porting to a
new system, you can test with the above ENVDEF= statement and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-7">18.8.7 -FFR-...</A
></H3
><p class="refpurpose">For Future Release</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10936"></A
>Most releases of <em class="emphasis">sendmail</EM
> contain, within the C language code,
sections that are commented out. These are initial stabs at solutions
that either did not work as is, are incomplete or untested,
or are dreams for the future.</P
><p class="para">If you have a good reason and <em class="emphasis">thoroughly</EM
> understand the code and
why it is excluded (and if you are brave), you may include it
by adding an appropriate _FFR_ (For Future Release)
definition to ENVDEF= in <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -D_FFR_<code class="replaceable"><i>what</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="replaceable"><i>what</I
></CODE
> describes the appropriate future item that you
want to include (as found in the source).
We categorize this as a debugging technique (not a porting or tuning
one) because you may want to include future code for testing, but
should probably not include it in your production version.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-8">18.8.8 FORK</A
></H3
><p class="refpurpose">The type of fork to use</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10955"></A
>The <em class="emphasis">sendmail</EM
> program forks often to do its job in the most
efficient way possible. Prior to V8.8, <em class="emphasis">sendmail</EM
>
used <em class="emphasis">vfork</EM
>(2) whenever possible. 
Beginning with V8.8, <em class="emphasis">sendmail</EM
> now defaults to <em class="emphasis">fork</EM
>(2).
[12]
You should have to redefine FORK only when porting to a new system
or when you are certain that <em class="emphasis">vfork</EM
>(2) is indeed faster on your system
and is reliable.</P
><blockquote class="footnote"><p class="para">[12] Bugs in the interaction between NIS and <em class="emphasis">vfork</EM
>(2) at the
system level with Solaris and systems that lacked <em class="emphasis">vfork</EM
>(2)
altogether, such as IRIX, caused V8.8 to favor <em class="emphasis">fork</EM
>(2).<a class="indexterm" name="AUTOID-10967"></A
>
This is really okay because in modern systems, <em class="emphasis">fork</EM
>(2) is
just as fast as <em class="emphasis">vfork</EM
>(2).</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DFORK=vfork</PRE
></BLOCKQUOTE
></P
><p class="para">You can test with the above ENVDEF= statement and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-9">18.8.9 HAS...</A
></H3
><p class="refpurpose">Has specific system call support</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-10985"></A
>Macros that begin with HAS tell <em class="emphasis">sendmail</EM
> whether or
not your system supports (has) certain system-library routines.
In general, you should need to define or undefine the macros
shown in
<a class="xref" href="#SML2-CH-18-TAB-3" title="HAS... #defines for Specific System Call Support">Table 18.4</A
>
only if you are porting <em class="emphasis">sendmail</EM
> to a new system. In that instance
you should also read <em class="emphasis">src/READ_ME</EM
> for the latest information
and pitfalls.</P
><p class="para">Each of these is turned on or off with an assignment of 1 or 0:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF=  -DHASSETSID=1      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> turn on</I
>
ENVDEF=  -DHASSETSID=0      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> turn off</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Turning on tells <em class="emphasis">sendmail</EM
> that your site has support for this
system call (<em class="emphasis">setsid</EM
>(2) in this instance). Turning off
tells <em class="emphasis">sendmail</EM
> to work around the lack of that support.
When porting to a
new system, you can test with one of the above ENVDEF= statements and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.</P
><p class="para">These have probably been correctly defined for your system already. 
Therefore you should need to change them only when porting 
<em class="emphasis">sendmail</EM
> to a completely new system.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-3">Table 18.4: HAS... #defines for Specific System Call Support</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">#define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">System Call</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASFCHMOD</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">fchmod</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASFLOCK</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">flock</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASGETDTABLESIZE</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">getdtablesize</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASGETUSERSHELL</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">getusershell</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASINITGROUPS</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">initgroups</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASLSTAT</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">lstat</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSETREUID</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">setreuid</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSETRLIMIT</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">setrlimit</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSETSID</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">setsid</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSETUSERCONTEXT</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">setusercontext</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSETVBUF</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">setvbuf</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSIGSETMASK</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">sigsetmask</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASSNPRINTF</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">snprintf</EM
>(3) and <em class="emphasis">vsnprintf</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASULIMIT</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">ulimit</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASUNAME</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">uname</EM
>(2)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASUNSETENV</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">unsetenv</EM
>(3)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HASWAITPID</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">waitpid</EM
>(2)</TD
></TR
></TBODY
></TABLE
><p class="para">If you are running a precompiled binary of <em class="emphasis">sendmail</EM
>, you can 
determine whether any of these were defined when <em class="emphasis">sendmail</EM
> was
compiled by using the <code class="literal">-d0.10</CODE
> debugging switch 
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.3, -d0.10</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-10">18.8.10 HESIOD</A
></H3
><p class="refpurpose">Support hesiod database maps</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11093"></A
>Named after the 8th century B.C.E.
[13]
Greek poet Hesiod, the <em class="emphasis">hesiod</EM
>
system is a network information system developed as Project
Athena. Information that is shared among
many machines on a network can be accessed by each machine using
a common set of library routines. Files that are commonly represented in
this form are the <em class="emphasis">passwd</EM
>(4) and <em class="emphasis">aliases</EM
>(4) files used
by <em class="emphasis">sendmail</EM
>. The <em class="emphasis">hesiod</EM
> system is patterned after the
Internet Domain Naming System and uses modified BIND source:</P
><blockquote class="footnote"><p class="para">[13] Before Christian Era, although an alternative proposal that is making
the rounds calls for signed years, thus the -8th century.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DHESIOD</PRE
></BLOCKQUOTE
></P
><p class="para">If HESIOD is defined when <em class="emphasis">sendmail</EM
> is built, support is included
to look up aliases and user information via the <em class="emphasis">hesiod</EM
>
interface. Support is also included to declare and use <em class="emphasis">hesiod</EM
>
class maps (see <a class="xref" href="ch33_03.htm#SML2-CH-33-SECT-3-4-2" title="The class">Section 33.3.2, "The class"</A
>) with the <code class="literal">K</CODE
>
configuration command. Support is also included for the User Database
if USERDB is also defined.</P
><p class="para">Hesiod documentation and source are available from:</P
><p class="para"><blockquote class="literallayout"><p class="literallayout"><a class="systemitem.url" href="../../../WebStripper/protected.html#link=ftp://athena-dist.mit.edu/pub/ATHENA">ftp://athena-dist.mit.edu/pub/ATHENA</A
></P
></BLOCKQUOTE
></P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch 
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>)
to determine whether HESIOD support is included.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-11">18.8.11 HES-GETMAILHOST</A
></H3
><p class="refpurpose">Use hesiod hes-getmailhost()</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11126"></A
>The MIT distribution of <em class="emphasis">hesiod</EM
> supports the 
<em class="emphasis">hes_getmailhost</EM
>(3) call for looking up a user's postoffice.
If your site is running MIT's <em class="emphasis">hesiod</EM
>, you should
define this. If your are running DEC's <em class="emphasis">hesiod</EM
>, you
should not.</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DHES_GETMAILHOST</PRE
></BLOCKQUOTE
></P
><p class="para">HES_GETMAILHOST is by default not defined. If you need it,
you must define it in your <em class="emphasis">Makefile</EM
>. If you are running a
precompiled version of <em class="emphasis">sendmail</EM
>, you may use the <code class="literal">-d0.1</CODE
>
debugging switch
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>)
to determine whether HES_GETMAILHOST has been included.
The <code class="literal">-d28.8</CODE
> (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.100, -d28.8</A
>)
debugging flag can be used to trace the
behavior of the <em class="emphasis">hes_getmailhost</EM
>(3) routine.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-12">18.8.12 IDENTPROTO</A
></H3
><p class="refpurpose">See Timeout.ident in <a class="xref" href="ch34_08.htm" title="Timeout.ident">Section 34.8.70.10</A
></P
>(port)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11151"></A
><a class="indexterm" name="AUTOID-11153"></A
>Defining out IDENTPROTO neither includes nor excludes RFC1413
code. All it does is change the default value for the
<code class="literal">Timeout.ident</CODE
> option (see <a class="xref" href="ch34_08.htm" title="Timeout.ident">Section 34.8.70.10</A
>):</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DIDENTPROTO=0          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> set Timeout.ident=0 by default</I
>
ENVDEF= -DIDENTPROTO=1          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> set Timeout.ident=30 by default</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.10</CODE
> switch 
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.3</A
>)
to determine whether IDENTPROTO was defined as nonzero.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-13">18.8.13 IP-SRCROUTE</A
></H3
><p class="refpurpose">Add IP source-routing to $-</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11173"></A
><a class="indexterm" name="AUTOID-11175"></A
><a class="indexterm" name="AUTOID-11178"></A
>Mail is normally transported over networks with TCP/IP. At the
IP layer, packets are usually constructed to be point-to-point&nbsp;- from one 
host to another. IP packets can also be constructed 
to contain source-routing information&nbsp;- from one host, through
a second, then to a final host.</P
><p class="para">Although such source routing (when used) is generally legitimate,
it can also be used to generate fraudulent mail. V8.7 <em class="emphasis">sendmail</EM
>
attempts to extract source-routing information from the initial
connection's IP information. If any is found, <em class="emphasis">sendmail</EM
> adds
that information to the <code class="literal">$_</CODE
> macro

(see <a class="xref" href="ch31_10.htm" title="">Section 31.10.1, $-</A
>) for use
in the <code class="literal">Received:</CODE
> header (see <a class="xref" href="ch35_10.htm" title="">Section 35.10.25, Received:</A
>).
The <code class="literal">$_</CODE
> macro is usually used like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">Received: from $s ($_) ...</PRE
></BLOCKQUOTE
></P
><p class="para">where <code class="literal">$_</CODE
> will contain information like that shown below
when IP source-routing information is found:</P
><p class="para"><blockquote class="screen"><pre class="screen">       <i class="lineannotation">IP source-routing information</I
>
                   <i class="lineannotation"><img src="../chars/darr.gif" alt="-v"></I
>
user@host.domain [!@hostC@hostB:hostA]
<i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
<i class="lineannotation">RFC1413 identd information</I
></PRE
></BLOCKQUOTE
></P
><p class="para">IP source-routing information is presented inside square brackets.
If routing is strict, the information is prefixed with an
exclamation mark. The format of the information is made to resemble
that of source-route addressing
(see the <code class="literal">DontPruneRoutes</CODE
> option, <a class="xref" href="ch34_08.htm" title="">Section 34.8.20, DontPruneRoutes (R)</A
>).
In this example the IP packets will go first to <code class="literal">hostC</CODE
>,
then to <code class="literal">hostB</CODE
>, and finally to <code class="literal">hostA</CODE
>.</P
><p class="para">The inclusion of code to support this reporting is determined by
the IP_SRCROUTE definition in your <em class="emphasis">Makefile</EM
>. It is predefined
correctly for all supported systems in <em class="emphasis">conf.h</EM
>, so you should need to redefine it only if you are porting <em class="emphasis">sendmail</EM
> to a 
completely new system. Be sure to read <em class="emphasis">src/READ_ME</EM
> for
the latest information about IP_SRCROUTE.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.10</CODE
> switch
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.3</A
>)
to determine whether IP_SRCROUTE support was included.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-14">18.8.14 LA-TYPE</A
></H3
><p class="refpurpose">Define your load-average support</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="SML2-CH-18-IX-LA-TYPE-MACRO"></A
><a class="indexterm" name="SML2-CH-18-IX-PERFORMANCE-LOAD-AVERAGE"></A
>The load average is the average number of blocked processes
(processes that are runnable but not able to run because of a lack
of resources) over the last minute. The <em class="emphasis">sendmail</EM
> program can
vary its behavior appropriately as the load average changes. Thresholds
for change are defined by the options shown in 
<a class="xref" href="ch34_06.htm#SML2-CH-34-SECT-6-1" title="Options That Determine Load">Table 34.9</A
>
(see <a class="xref" href="ch34_06.htm#SML2-CH-34-SECT-6-1" title="Controlling Machine Load">Section 34.6.4, "Controlling Machine Load"</A
>).</P
><p class="para">The method that is used to get the current load average from the operating
system varies widely. This LA_TYPE definition determines
which method to use. It is correctly defined inside <em class="emphasis">conf.h</EM
>
for all currently supported operating systems. Porting <em class="emphasis">sendmail</EM
>
to a new system may require that you define LA_TYPE yourself.
The possible values and their meanings are shown in
<a class="xref" href="#SML2-CH-18-TAB-4" title="LA_ Methods for Getting the Load Average">Table 18.5</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-4">Table 18.5: LA_ Methods for Getting the Load Average</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">LA_</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Does What</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_ZERO</TD
><td class="entry" rowspan="1" colspan="1">Always returns 0. Essentially disables load average checking.  This is portable to all systems.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_INT</TD
><td class="entry" rowspan="1" colspan="1">Read <em class="emphasis">/dev/kmem</EM
> for the symbol <em class="emphasis">avenrun</EM
>. If found, interpret the result as a native (usually long) integer.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_FLOAT</TD
><td class="entry" rowspan="1" colspan="1">Read <em class="emphasis">/dev/kmem</EM
> for the symbol <em class="emphasis">avenrun</EM
>. If found, interpret the result as a floating-point value.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_SHORT</TD
><td class="entry" rowspan="1" colspan="1">Read <em class="emphasis">/dev/kmem</EM
> for the symbol <em class="emphasis">avenrun</EM
>. If found, interpret the result as a short integer.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_SUBR</TD
><td class="entry" rowspan="1" colspan="1">Call the library routine <em class="emphasis">getloadavg</EM
>(3) and use the result returned.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_MACH</TD
><td class="entry" rowspan="1" colspan="1">Call the MACH-specific <em class="emphasis">processor_set_info</EM
>(2) routine and use the result returned.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_PROCSTR</TD
><td class="entry" rowspan="1" colspan="1">Read the Linux-specific <em class="emphasis">/proc/loadavg</EM
> file and interpret the result as a floating-point value.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_READKSYM</TD
><td class="entry" rowspan="1" colspan="1">Use the (some SysV versions) <em class="emphasis">ioctl</EM
> of MIOC_READKSYM to read <em class="emphasis">/dev/kmem</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_DGUX</TD
><td class="entry" rowspan="1" colspan="1">DG/UX specific support for using the <em class="emphasis">pstat_getdynamic</EM
>(2)function to read the load average.</TD
></TR
></TBODY
></TABLE
><p class="para">The LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM
settings require additional tuning. For these, three additional definitions
are used as shown in
<a class="xref" href="#SML2-CH-18-TAB-5" title="Tuning for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM">Table 18.6</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-5">Table 18.6: Tuning for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">#define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Tunes</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FSHIFT</TD
><td class="entry" rowspan="1" colspan="1">Number of bits to shift right when using LA_INT, LA_SHORT, and LA_READKSYM. Default is 8.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">_PATH_UNIX</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The pathname of your kernel. This is required for LA_INT and LA_SHORT. Default is <em class="emphasis">/unix</EM
>
for SysV; <em class="emphasis">/hp_ux</EM
> for HP/UX V9; <em class="emphasis">/stand/unix</EM
>
for HP/UX V10, News, and UXP/OS; <em class="emphasis">/dev/ksyms</EM
> for Solaris; <em class="emphasis">/dynix</EM
> for DYNIX; otherwise <em class="emphasis">/vmunix</EM
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">_PATH_KMEM</TD
><td class="entry" rowspan="1" colspan="1">The pathname of your kernel memory. This is required for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM. Default is <em class="emphasis">/dev/kmem</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LA_AVENRUN</TD
><td class="entry" rowspan="1" colspan="1">The name of the kernel variable that holds the load average.  Used by LA_INT, LA_SHORT, and LA_FLOAT.  Default is <em class="emphasis">averun</EM
> for SysV, otherwise <em class="emphasis">_averun</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NAMELISTMASK</TD
><td class="entry" rowspan="1" colspan="1">The mask to bitwise-AND against the return value of nlist(3). If this is undefined, the return value is used as is. A common value is 0x7fffffff to strip off the high bit.</TD
></TR
></TBODY
></TABLE
><p class="para"><a class="indexterm" name="AUTOID-11316"></A
><a class="indexterm" name="AUTOID-11317"></A
></P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-15">18.8.15 LDAPMAP</A
></H3
><p class="refpurpose">Enable use of ldap databases</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11326"></A
><a class="indexterm" name="AUTOID-11328"></A
>LDAP stands for Lightweight Directory Access
Protocol. LDAP provides lightweight access to
the X.500 directory and is defined in 
RFC1777 and RFC1778.</P
><p class="para">The software and documentation for LDAP is available from</P
><p class="para"><blockquote class="literallayout"><p class="literallayout"><a class="systemitem.url" href="../../../WebStripper/protected.html#link=ftp://terminator.rs.itd.umich.edu/ldap/">ftp://terminator.rs.itd.umich.edu/ldap/</A
></P
></BLOCKQUOTE
></P
><p class="para">It is used by defining a map class called <code class="literal">ldapx</CODE
> 
(see <a class="xref" href="ch33_08.htm" title="">Section 33.8.9, ldapx</A
>) in your configuration file.
Its use is enabled by defining LDAPMAP at compile time:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF=LDAPMAP</PRE
></BLOCKQUOTE
></P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-16">18.8.16 LOG</A
></H3
><p class="refpurpose">Perform logging</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11347"></A
><a class="indexterm" name="AUTOID-11349"></A
><a class="indexterm" name="AUTOID-11352"></A
>If defined, LOG enables <em class="emphasis">sendmail</EM
> to use the <em class="emphasis">syslog</EM
>(3)
facility to log error messages and other useful information that is often
important for security and debugging.
Logging and <em class="emphasis">syslog</EM
>(3) are described in
<a class="xref" href="ch26_01.htm" title="Logging and Statistics">Chapter 26, <cite class="chapter">Logging and Statistics</CITE
></A
>.
Defining LOG should be considered mandatory, and it should
be turned off only if you have a well-thought-out reason for doing so.
LOG cannot be turned off in the <em class="emphasis">Makefile</EM
>. Instead, you must
edit <em class="emphasis">conf.h</EM
> directly and undefine it by commenting it out:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>/*</B
></CODE
> # define LOG                 /* enable logging - don't turn off */
<i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
comment out to remove support</PRE
></BLOCKQUOTE
></P
><p class="para">LOG requires that your system support <em class="emphasis">syslog</EM
>(3).
If you lack <em class="emphasis">syslog</EM
>(3), consider porting it to your system.</P
><p class="para">Defining LOG is meaningless unless the <code class="literal">LogLevel</CODE
>
(<code class="literal">L</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.33, LogLevel (L)</A
>) is also nonzero.
Fortunately, this is usually the case because the default is 9.</P
><p class="para">See also SYSLOG_BUFSIZE for a way to tune <em class="emphasis">syslog</EM
>(3)'s buffer size if necessary.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether LOG support was included
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-17">18.8.17 LOTUS-NOTES-HACK</A
></H3
><p class="refpurpose">Strip newlines from From: header</P
>(V8.7.2 through V8.7.5 only)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11385"></A
>The <em class="emphasis">Lotus Notes</EM
> mail-gateway SMTP
software can produce sender header lines that contain
newlines when the username part becomes too long:</P
><p class="para"><blockquote class="screen"><pre class="screen">From: Long Full Name/LongSite/Country
  &lt;user@site.domain&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">Although perfectly legal under RFC822, such split sender headers
can cause MUAs to fail in ways that are difficult to diagnose. If your site
receives mail from <em class="emphasis">Lotus Notes</EM
> gateways, you should define
LOTUS_NOTES_HACK when compiling <em class="emphasis">sendmail</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DLOTUS_NOTES_HACK</PRE
></BLOCKQUOTE
></P
><p class="para">Defining LOTUS_NOTES_HACK causes <em class="emphasis">sendmail</EM
> to include code in
support of the <code class="literal">SingleLineFromHeader</CODE
> option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.63, SingleLineFromHeader</A
>).
Setting that option to true causes the newlines in the above address to
be stripped and produces a single line:</P
><p class="para"><blockquote class="screen"><pre class="screen">From: Long Full Name/LongSite/Country &lt;user@site.domain&gt;</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-11402"></A
>If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you can define
<code class="literal">SingleLineFromHeader</CODE
> in your configuration file. If you don't get
a warning about a bad option name, then you have this support.
Note that under V8.8 <em class="emphasis">sendmail</EM
>, LOTUS_NOTES_HACK is
no longer required for <code class="literal">SingleLineFromHeader</CODE
> support.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-18">18.8.18 MATCHGECOS</A
></H3
><p class="refpurpose">Support fuzzy name matching</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11416"></A
><a class="indexterm" name="AUTOID-11418"></A
>Defining MATCHGECOS causes code to be included inside <em class="emphasis">sendmail</EM
>
for support of limited <em class="emphasis">fuzzy</EM
> name matching. This process
is described under the <code class="literal">MatchGECOS</CODE
> (<code class="literal">G</CODE
>) option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.34, MatchGECOS (G)</A
>). MATCHGECOS is normally defined
by default. If you want to turn it off, use ENVDEF= in <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DMATCHGECOS=0</PRE
></BLOCKQUOTE
></P
><p class="para">If you are running a vendor-supplied binary, you can check to
see whether MATCHGECOS was defined by using the
<code class="literal">-d0.1</CODE
> debugging switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-19">18.8.19 MAX...</A
></H3
><p class="refpurpose">Redefine maximums</P
>(port, edit specific files)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11439"></A
><a class="indexterm" name="AUTOID-11441"></A
>In porting <em class="emphasis">sendmail</EM
> to a new system or tuning
<em class="emphasis">sendmail</EM
> for special needs, it may be necessary to
adjust one of its defined maximums. These cannot be tuned
in <em class="emphasis">Makefile</EM
>. Instead, each needs to be changed in the
file indicated by the third column of
<a class="xref" href="#SML2-CH-18-TAB-6" title="MAX... #defines to Redefine Maximums">Table 18.7</A
>.
In general, maximums should never be lowered without first
examining the code for possible side effects; also, review the code to see whether any minimums are required or whether
there are warnings about maximums.&#13;</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-6">Table 18.7: MAX... #defines to Redefine Maximums</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">#define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Default</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">File</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Maximum</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXALIASDB</TD
><td class="entry" rowspan="1" colspan="1">12</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Number of alias databases</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXATOM</TD
><td class="entry" rowspan="1" colspan="1">200</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Atoms (tokens) in an address</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXDNSRCH</TD
><td class="entry" rowspan="1" colspan="1">6</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">domain.c</EM
></TD
><td class="entry" rowspan="1" colspan="1">Possible domains to search</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXHOSTNAMELEN</TD
><td class="entry" rowspan="1" colspan="1">256</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Length of a hostname</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXKEY</TD
><td class="entry" rowspan="1" colspan="1">128</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Length of a database key</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXLINE</TD
><td class="entry" rowspan="1" colspan="1">2048</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Length of an input line</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXMAILERS</TD
><td class="entry" rowspan="1" colspan="1">25</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Number of delivery agents</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXMAPSTACK</TD
><td class="entry" rowspan="1" colspan="1">12</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Size of sequenced map stack</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXMIMEARGS</TD
><td class="entry" rowspan="1" colspan="1">20</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Arguments per <code class="literal">Content-Type:</CODE
> header</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXMXHOSTS</TD
><td class="entry" rowspan="1" colspan="1">100</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Number of per host MX records</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXMIMENESTING</TD
><td class="entry" rowspan="1" colspan="1">20</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Multipart MIME nesting depth</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXNAME</TD
><td class="entry" rowspan="1" colspan="1">256</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Length of a name</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXPRIORITIES</TD
><td class="entry" rowspan="1" colspan="1">25</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Number of Priority lines</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXPV</TD
><td class="entry" rowspan="1" colspan="1">40</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Arguments to a delivery agent</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXRULERECURSION</TD
><td class="entry" rowspan="1" colspan="1">50</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.c</EM
></TD
><td class="entry" rowspan="1" colspan="1">Ruleset recursion</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXRWSETS</TD
><td class="entry" rowspan="1" colspan="1">200</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Number of rule sets</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXTOCLASS</TD
><td class="entry" rowspan="1" colspan="1">8</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Message timeout classes</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAXUSERENVIRON</TD
><td class="entry" rowspan="1" colspan="1">100</TD
><td class="entry" rowspan="1" colspan="1"><em class="emphasis">conf.h</EM
></TD
><td class="entry" rowspan="1" colspan="1">Environment items per delivery agent</TD
></TR
></TBODY
></TABLE
><p class="para">Also see QUEUESEGSIZE and SYSLOG_BUFSIZE for the discussion
of two other definitions that affect sizes.</P
><p class="para">Note that there are no debugging switches to display compiled maximums.
If you are running a binary distribution and  a maximum is of concern,
you should get the source and build <em class="emphasis">sendmail</EM
> yourself.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-20">18.8.20 MEMCHUNKSIZE</A
></H3
><p class="refpurpose">Specify memory allocation size</P
>(tune, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11578"></A
><a class="indexterm" name="AUTOID-11580"></A
><a class="indexterm" name="AUTOID-11582"></A
>When <em class="emphasis">sendmail</EM
> reads lines of text from the configuration
file or from <code class="literal">qf</CODE
> queue files, it calls an internal routine named
<em class="emphasis">fgetfolded</EM
>(). That routine is initially passed a buffer of
size MAXLINE into which to fit the read line. If the line is longer
than MAXLINE, the <em class="emphasis">sendmail</EM
> program dynamically increases the space
required to hold the line by MEMCHUNKSIZE.</P
><p class="para">When collecting the headers of a mail message, <em class="emphasis">sendmail</EM
> also begins
with a buffer sized to MAXLINE. If a header arrives that is larger than
MAXLINE characters, <em class="emphasis">sendmail</EM
> will increase the size of its
buffer by MEMCHUNKSIZE as many times as is necessary to fully
contain that header's data.</P
><p class="para">&#13;The default value assigned to MEMCHUNKSIZE is 1024 bytes. If you need
to change that value (for example, to port to a new system's strange
<em class="emphasis">malloc</EM
>(3) requirements or for performance reasons), you must edit <em class="emphasis">conf.h</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"># define MEMCHUNKSIZE   <code class="userinput"><b>1024</B
></CODE
>            /* chunk size for memory allocation */
                        <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                     <i class="lineannotation">change this</I
></PRE
></BLOCKQUOTE
></P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-21">18.8.21 MIME7TO8</A
></H3
><p class="refpurpose">Support MIME 7- to 8-bit conversion</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11607"></A
><a class="indexterm" name="AUTOID-11609"></A
><a class="indexterm" name="AUTOID-11611"></A
><a class="indexterm" name="AUTOID-11613"></A
><a class="indexterm" name="AUTOID-11616"></A
><a class="indexterm" name="AUTOID-11618"></A
>V8.8 <em class="emphasis">sendmail</EM
> contains the internal ability to 
convert messages that were converted into either <em class="emphasis">quoted-printable</EM
>
or <em class="emphasis">base64</EM
> (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.22</A
>) back into their
original eight-bit form. The decision of whether or not to do this
conversion is based on the <code class="literal">F=9</CODE
> delivery agent flag (see
<a class="xref" href="ch30_08.htm" title="">Section 30.8.6, F=9</A
>).</P
><p class="para">Defining MIME7TO8 to a value of 1 causes support
for conversion to be included
in <em class="emphasis">sendmail</EM
>. It is defined as 1 by default. To disable the inclusion
of conversion code, use ENVDEF= in <em class="emphasis">Makefile</EM
> to define
it as 0:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DMIME7TO8=<code class="userinput"><b>0</B
></CODE
>
                   <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
        <i class="lineannotation">exclude support</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Unless you have a compelling reason to do otherwise, we recommend that
MIME7TO8 remain enabled.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether MIME7TO8 support 
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>) was included.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-22">18.8.22 MIME8TO7</A
></H3
><p class="refpurpose">Support MIME 8- to 7-bit conversion</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11647"></A
>V8 <em class="emphasis">sendmail</EM
> contains the internal ability to convert 8-bit
MIME message contents into 7-bit MIME so that mail
can be transported to non-8-bit gateways. The methods used
and the circumstances required to trigger conversion are described
under the <code class="literal">EightBitMode</CODE
> (<code class="literal">8</CODE
>) option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.22</A
>). 
The conversion itself can be watched with the <code class="literal">-d43</CODE
> debugging
switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.150, -d43.1</A
>).</P
><p class="para">Defining MIME8TO7 to a value of 1 causes support
for conversion to be included
in <em class="emphasis">sendmail</EM
>. It is defined as 1 by default. To disable the inclusion
of conversion code, use ENVDEF= in <em class="emphasis">Makefile</EM
> to define
it as 0:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DMIME8TO7=<code class="userinput"><b>0</B
></CODE
>
                   <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
        <i class="lineannotation">exclude support</I
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;One side effect of excluding MIME8TO7 support is that defining
it to 0 causes all MIME support to also be excluded. 
Unless you have a compelling reason to do otherwise, we recommend that
MIME8TO7 remain enabled.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether MIME8TO7 support 
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>) was included.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-23">18.8.23 NAMED-BIND</A
></H3
><p class="refpurpose">Support DNS name resolution</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11676"></A
><a class="indexterm" name="AUTOID-11678"></A
>The <em class="emphasis">sendmail</EM
> program automatically takes advantage
of DNS lookups or MX records to resolve
addresses and canonical hostnames.
If your site is a UUCP-only site (or is otherwise not connected to
the Internet) and does not run <em class="emphasis">named</EM
>(8)
locally, you should probably disable NAMED_BIND:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DNAMED_BIND=<code class="userinput"><b>0</B
></CODE
>
                     <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
             <i class="lineannotation">disable DNS lookups</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If you are not currently
running <em class="emphasis">named</EM
>(8) but plan to connect to the Internet, you should
define NAMED_BIND but set the <code class="literal">ResolverOptions</CODE
>
(<code class="literal">I</CODE
>) (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.55, ResolverOptions (I)</A
>)
to false in the configuration
file. Later, when you connect to the Internet, you can then simply
change it to true.
(See also the service-switch file, <a class="xref" href="ch34_08.htm" title="">Section 34.8.61</A
>,
for an another way to achieve the same effect.)</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether NAMED_BIND support was included
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-24">18.8.24 NDBM</A
></H3
><p class="refpurpose">Support Unix ndbm(3) Databases</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11705"></A
>The <em class="emphasis">ndbm</EM
>(3) form of database
uses two files (<em class="emphasis">.pag</EM
> and <em class="emphasis">.dir</EM
>) for each database.
Databases cannot be shared by different architectures across a network.
If you intend to support aliasing in an efficient manner, you
should at least define this NDBM (or NEWDB described below)
in your <em class="emphasis">Makefile</EM
>.</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNDBM</PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">ndbm</EM
>(3) routines are used primarily to look up aliases.
They can also be used to declare <em class="emphasis">dbm</EM
> class maps
(see <a class="xref" href="ch33_03.htm#SML2-CH-33-SECT-3-4-2" title="The class">Section 33.3.2</A
>) with the <code class="literal">K</CODE
>
configuration command.</P
><p class="para">Library routines to support <em class="emphasis">ndbm</EM
>(3) are available with most
modern versions of UNIX. You may have to specify library support
with a <code class="literal">-lndbm</CODE
> in the LIBS= line of your <em class="emphasis">Makefile</EM
>.
If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether <em class="emphasis">ndbm</EM
>(3) support was included
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-25">18.8.25 NEED...</A
></H3
><p class="refpurpose">Something amiss with your OS?</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11734"></A
>The <em class="emphasis">sendmail</EM
> program requires certain C language library routines
to exist. If any is missing from your library, define
one of the needs listed in 
<a class="xref" href="#SML2-CH-18-TAB-7" title="Define Replacements for Missing C Library Routines">Table 18.8</A
>
and <em class="emphasis">sendmail</EM
> will try to emulate it.</P
><p class="para">Each is defined with ENVDEF= in <em class="emphasis">Makefile</EM
> by setting it
to a value of 1 (NEEDPUTENV is an exception in that 1 or 2
can be used).</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DNEEDFSYNC=1</PRE
></BLOCKQUOTE
></P
><p class="para">When porting to a
new system, you can test with this ENVDEF= statement and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.
Note that these are correctly defined for all currently supported systems.
You should need to redefine them only if you are porting <em class="emphasis">sendmail</EM
>
to a completely new system.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-7">Table 18.8: Define Replacements for Missing C Library Routines</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">#define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Emulates</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEEDFSYNC</TD
><td class="entry" rowspan="1" colspan="1">Replaces a missing <em class="emphasis">fsync</EM
>(2).  The <em class="emphasis">sendmail</EM
> program will try to simulate it by using <em class="emphasis">fcntl</EM
>(2), if available; otherwise, <em class="emphasis">sendmail</EM
> will not &quot;sync&quot; to disk. This latter circumstance is undesirable and may result in unreliable mail delivery, but it works.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEEDGETOPT</TD
><td class="entry" rowspan="1" colspan="1">The <em class="emphasis">sendmail</EM
> program calls <em class="emphasis">getopt</EM
>(3) twice when parsing its command-line arguments. Some version of <em class="emphasis">getopt</EM
>(3) do odd things when called twice. If yours is one of these, replace it.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEEDPUTENV</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Replace a missing <em class="emphasis">putenv</EM
>(3). If this is defined as 1, <em class="emphasis">sendmail</EM
>
emulates by using <em class="emphasis">setenv</EM
>(3). If this is defined as 2, <em class="emphasis">sendmail</EM
>
emulates by directly modifying the environmental section of memory.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEEDSTRSTR</TD
><td class="entry" rowspan="1" colspan="1">Replace a missing <em class="emphasis">strstr</EM
>(3) with a well-written internalversion.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEEDSTRTOL</TD
><td class="entry" rowspan="1" colspan="1">Replace a missing <em class="emphasis">strtol</EM
>(3) with a well-written internalversion.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NEEDVPRINTF</TD
><td class="entry" rowspan="1" colspan="1">Replace a missing <em class="emphasis">vprintf</EM
>(3). Note that the emulation supplied is not very elegant. It may not even work on some systems. See <em class="emphasis">conf.h</EM
> for a glimpse of systems that require this.</TD
></TR
></TBODY
></TABLE
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, there is
no way to discover whether any of these were defined when it was built.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-26">18.8.26 NET...</A
></H3
><p class="refpurpose">Define Network Support</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11798"></A
><a class="indexterm" name="AUTOID-11800"></A
>V8 <em class="emphasis">sendmail</EM
> is designed to support four
kinds of networks, as listed in
<a class="xref" href="#SML2-CH-18-TAB-8" title="Define for Network Support">Table 18.9</A
>.
Currently, 
only NETINET and NETISO are supported. </P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-8">Table 18.9: Define for Network Support</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NETINET</TD
><td class="entry" rowspan="1" colspan="1">A TCP/IP-based network</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NETISO</TD
><td class="entry" rowspan="1" colspan="1">An ISO 8022 network</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NETNS</TD
><td class="entry" rowspan="1" colspan="1">A Xerox NS protocol network (tentative)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NETX25</TD
><td class="entry" rowspan="1" colspan="1">A CCITT\*[=a] X.25 network (tentative)</TD
></TR
></TBODY
></TABLE
><p class="para">&#13;International Telephone and Telegraph Consultative Committee.&#13;</P
><p class="para">Stubs are included
in the source code for any programmer who is interested in implementing NETNS
or NETX25. NETINET is defined by default. If you don't want it,
you need to turn it off in your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DNETINET=0</PRE
></BLOCKQUOTE
></P
><p class="para">NETISO is undefined by default. If you want to include ISO support,
you need to specifically define it in your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DNETISO=1</PRE
></BLOCKQUOTE
></P
><p class="para">Defining NETINET or NETISO has the side effect of causing
SMTP and QUEUE also to be automatically defined.</P
><p class="para">Defining network support only causes the code for that network
to be included in <em class="emphasis">sendmail</EM
>. The network serviced by a
particular invocation of <em class="emphasis">sendmail</EM
> is selected with the
<code class="literal">Family</CODE
> parameter of the <code class="literal">DaemonPortOptions</CODE
> (<code class="literal">O</CODE
>) option 
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.13, DaemonPortOptions (O)</A
>).
In the absence of an option declaration,
<em class="emphasis">inet</EM
> (for NETINET) is used as the default.</P
><p class="para">If you are running a precompiled version of <em class="emphasis">sendmail</EM
>, you can
determine which network types are supported by using the <code class="literal">-d0.1</CODE
>
debugging switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-27">18.8.27 NETINFO</A
></H3
><p class="refpurpose">Support NeXT netinfo(3) databases</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11854"></A
>The <em class="emphasis">netinfo</EM
>(3) form of database is supplied with the
NeXT and NeXTSTeP operating systems. It is a network
information service that provides file contents such as 
<em class="emphasis">aliases</EM
> and <em class="emphasis">passwd</EM
>, and locations such as the
location of the <em class="emphasis">sendmail.cf</EM
> file.
If you are running on a NeXT or under NeXTSTeP, this
NETINFO will automatically be defined in your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNETINFO</PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">netinfo</EM
>(3) databases 
can also be used to declare <em class="emphasis">netinfo</EM
> class maps
(see <a class="xref" href="ch33_03.htm#SML2-CH-33-SECT-3-4-2" title="The class">Section 33.3.2</A
>) with the <code class="literal">K</CODE
>
configuration command.
If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether NETINFO support was included
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-28">18.8.28 NEWDB</A
></H3
><p class="refpurpose">Support Berkeley db(3) Databases</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11879"></A
><a class="indexterm" name="AUTOID-11881"></A
>The <em class="emphasis">db</EM
>(3) form of database uses a single
file and can be shared by different architectures.
If you intend to support aliasing in an efficient manner, you
should at least define this NEWDB (or the NDBM described above)
in your <em class="emphasis">Makefile</EM
>.
The <em class="emphasis">db</EM
>(3) routines are used to look up aliases and
are the routines used by the User Database (see <a class="xref" href="ch33_05.htm" title="The User Database">Section 33.5, "The User Database"</A
>).
They can also be used to declare <em class="emphasis">hash</EM
> and <em class="emphasis">btree</EM
> class maps
(see <a class="xref" href="ch33_03.htm#SML2-CH-33-SECT-3-4-2" title="The class">Section 33.3.2</A
>) with the <code class="literal">K</CODE
>
configuration command.</P
><p class="para">The <em class="emphasis">db</EM
>(3) libraries have overcome many of the limitations
of the earlier <em class="emphasis">ndbm</EM
>(3) libraries. If possible, you should
get and install the <em class="emphasis">db</EM
>(3) libraries before you build
<em class="emphasis">sendmail</EM
>. The <em class="emphasis">db</EM
>(3) source is available from</P
><p class="para"><blockquote class="literallayout"><p class="literallayout"><a class="systemitem.url" href="../../../WebStripper/protected.html#link=ftp://ftp.cs.berkeley.edu/ucb/4bsd/db.tar.Z">ftp://ftp.cs.berkeley.edu/ucb/4bsd/db.tar.Z</A
></P
></BLOCKQUOTE
></P
><p class="para">Do not use the Net2 distribution. (See OLD_NEWDB below if you
already have that distribution and can't easily get rid of it.)
The <em class="emphasis">src/READ_ME</EM
> file contains <em class="emphasis">critical</EM
>
information
[14]
about installing <em class="emphasis">db</EM
>(3).</P
><blockquote class="footnote"><p class="para">[14] Such as why you must remove <em class="emphasis">ndbm.h</EM
> and <em class="emphasis">ndbm.o</EM
> from <em class="emphasis">libdb.a</EM
>
before installing it for use by <em class="emphasis">sendmail</EM
>.</P
></BLOCKQUOTE
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>)
to determine whether <em class="emphasis">db</EM
>(3) support was included in it.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-29">18.8.29 NIS</A
></H3
><p class="refpurpose">Support for NIS</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11923"></A
>If you intend to have <em class="emphasis">sendmail</EM
> support <em class="emphasis">nis</EM
>
(formerly Yellow Pages) maps, you need to define NIS as part of your
DBMDEF= line in <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNIS</PRE
></BLOCKQUOTE
></P
><p class="para">If NIS is defined, the <code class="literal">AliasFile</CODE
> (<code class="literal">A</CODE
>) option 
can be specified as</P
><p class="para"><blockquote class="screen"><pre class="screen">OAnis:mail.aliases                <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> V8.6</I
>
O AliasFile=nis:mail.aliases      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> V8.7 and above (if no service-switch file)</I
></PRE
></BLOCKQUOTE
></P
><p class="para">See <a class="xref" href="ch34_08.htm" title="">Section 34.8.1, AliasFile (A)</A
> for more details about the <code class="literal">AliasFile</CODE
>
(<code class="literal">A</CODE
>) option.
See <a class="xref" href="ch34_08.htm" title="">Section 34.8.61</A
> for a description of the <code class="literal">ServiceSwitchFile</CODE
>
option and its effect on <em class="emphasis">nis</EM
> aliases. Be aware that the above <code class="literal">AliasFile</CODE
>
(<code class="literal">A</CODE
>) option declaration will override the lack of an <em class="emphasis">nis</EM
> entry
in the service-switch file.</P
><p class="para">&#13;NDBM also needs to be defined to allow <em class="emphasis">sendmail</EM
> to rebuild
its alias files for use by <em class="emphasis">nis</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNIS -DNDBM</PRE
></BLOCKQUOTE
></P
><p class="para">For this to work, the
path of the alias file needs to contain the substring &quot;/yp/&quot;.
A typical <em class="emphasis">/var/yp/Makefile</EM
> will contain a line like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">/usr/lib/sendmail -bi -oA$(YPDBDIR)/$(DOM)/mail.aliases</PRE
></BLOCKQUOTE
></P
><p class="para">Here, $(YPDBDIR)/ is usually <em class="emphasis">/var/yp/</EM
>, so the substring is
found. When &quot;/yp/&quot; is found,
<em class="emphasis">sendmail</EM
> augments the <em class="emphasis">aliases</EM
> database with
two special entries that are needed by <em class="emphasis">nis</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">YP_LAST_MODIFIED
YP_MASTER_NAME</PRE
></BLOCKQUOTE
></P
><p class="para">These allow the newly built <em class="emphasis">aliases</EM
> file to successfully
be distributed for use by <em class="emphasis">nis</EM
> clients. Without these entries
you will see an error like that shown below when pushing your
<em class="emphasis">nis</EM
> maps:</P
><p class="para"><blockquote class="screen"><pre class="screen">Status received from ypxfr on <code class="replaceable"><i>nisslave</I
></CODE
>:
        Failed - no local order number in map - use -f flag to ypxfr.</PRE
></BLOCKQUOTE
></P
><p class="para">The solution here is to rebuild <em class="emphasis">sendmail</EM
> with both
NDBM and NIS defined.</P
><p class="para">Defining NIS also causes support to
be included for declaring and using <em class="emphasis">nis</EM
>
class maps (see <a class="xref" href="ch33_03.htm#SML2-CH-33-SECT-3-4-2" title="The class">Section 33.3.2</A
>) with the <code class="literal">K</CODE
>
configuration command.</P
><p class="para">Note that defining NIS without also defining NAMED_BIND
will cause delivery to MX records to mysteriously fail.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether NIS support was included
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-30">18.8.30 NISPLUS</A
></H3
><p class="refpurpose">Support for NIS+</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-11989"></A
>If you intend to have <em class="emphasis">sendmail</EM
> support <em class="emphasis">nisplus</EM
>
maps, you need to define NISPLUS as part of your
DBMDEF= line in <em class="emphasis">Makefile</EM
>.
(The use of <em class="emphasis">nisplus</EM
> aliases and other maps is determined by the
<em class="emphasis">/etc/nsswitch.conf</EM
> file.)</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNISPLUS</PRE
></BLOCKQUOTE
></P
><p class="para">If NISPLUS is defined, the <code class="literal">AliasFile</CODE
> (<code class="literal">A</CODE
>) option 
can be used to override the setting of the <em class="emphasis">/etc/nsswitch.conf</EM
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen">O AliasFile=nisplus:mail.aliases      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> V8.7 and above</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="literal">nisplus</CODE
> aliases will be used even if the <em class="emphasis">/etc/nsswitch.conf</EM
> file
excludes them.</P
><p class="para">See <a class="xref" href="ch34_08.htm" title="">Section 34.8.1</A
> for details about the <code class="literal">AliasFile</CODE
>
(<code class="literal">A</CODE
>) option. Note that NISPLUS is new to V8.7 and not supported under
earlier versions of <em class="emphasis">sendmail</EM
>.</P
><p class="para">With NISPLUS defined,
support is also included to declare and use <em class="emphasis">nisplus</EM
>
class maps (see <a class="xref" href="ch33_03.htm#SML2-CH-33-SECT-3-4-2" title="The class">Section 33.3.2</A
>) with the <code class="literal">K</CODE
>
configuration command.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch to determine whether NISPLUS support was included
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-31">18.8.31 NO-GROUP-SET</A
></H3
><p class="refpurpose">Prevent multi-group file access</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12029"></A
><a class="indexterm" name="AUTOID-12031"></A
><a class="indexterm" name="AUTOID-12034"></A
><a class="indexterm" name="AUTOID-12036"></A
>When checking files and directories for group read and write permissions,
<em class="emphasis">sendmail</EM
> checks the group of the controlling user. On systems
that allow a user to belong to one group at a time, failure stops
here; on systems that allow users to belong to many groups at once,
failure causes <em class="emphasis">sendmail</EM
> to check any other groups to which
the controlling user may belong. It finds the list of groups by
calling <em class="emphasis">getgrgid</EM
>(3).</P
><p class="para">If your system lacks the <em class="emphasis">getgrgid</EM
>(3) call or doesn't need it,
you should exclude this code by defining
NO_GROUP_SET in <em class="emphasis">conf.h</EM
>.
NO_GROUP_SET causes the code containing the call to 
<em class="emphasis">getgrgid</EM
>(3) to be excluded from <em class="emphasis">sendmail</EM
>. 
Be aware that excluding <em class="emphasis">getgrgid</EM
>(3) support on systems that need
it can cause delivery to files to fail in mysterious ways.</P
><p class="para">If you are running a precompiled version of <em class="emphasis">sendmail</EM
>,
be aware that there is no debugging switch that can tell you what the setting
of NO_GROUP_SET was set to at compile time.</P
><p class="para">Note that NO_GROUP_SET affects only inclusion of the <em class="emphasis">getgrgid</EM
>(3)
system call. See the <code class="literal">DontInitGroups</CODE
> option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.19, DontInitGroups</A
>)
for a means to exclude the <em class="emphasis">getgrgid</EM
>(3) and <em class="emphasis">initgroups</EM
>(3) system calls.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-32">18.8.32 NOTUNIX</A
></H3
><p class="refpurpose">Exclude From line support</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12064"></A
><a class="indexterm" name="AUTOID-12066"></A
>Under UNIX a file of many mail messages normally has
one message separated from another by a blank line and then
a line that begins with the five characters &quot;<code class="literal">From&nbsp;</CODE
>&quot;
(four letters and a space). On such systems, <em class="emphasis">sendmail</EM
>
saves important information from such lines for later use.</P
><p class="para">On non-UNIX machines (VMS or MS-DOS) the conventions are
different, so you won't want <em class="emphasis">sendmail</EM
> to treat such
lines as special. Similarly, if your UNIX site has converted
entirely away from this convention (with <em class="emphasis">mhs</EM
> or the like),
you might not want this special treatment.</P
><p class="para">To disable special treatment of &quot;<code class="literal">From&nbsp;</CODE
>&quot; lines, define
the NOTUNIX macro in your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DNOTUNIX</PRE
></BLOCKQUOTE
></P
><p class="para">When porting to a
new system, you can test with this ENVDEF= statement and, if successful,
put a permanent porting entry into <em class="emphasis">conf.h</EM
>.
Defining NOTUNIX causes the code for <em class="emphasis">eatfrom</EM
>() to
be excluded from <em class="emphasis">sendmail</EM
>. The <code class="literal">-d30.2</CODE
> debugging
switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.109, -d30.2</A
>)
can be used to watch <em class="emphasis">eatfrom</EM
>() and to determine
whether NOTUNIX was declared when compiling <em class="emphasis">sendmail</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-33">18.8.33 OLD-NEWDB</A
></H3
><p class="refpurpose">Support the old form of db(3)</P
>(port with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12094"></A
>BSDI(BSD/386) 1.0, NetBSD 0.9, and FreeBSD 1.0 
were distributed
with an old version of the <em class="emphasis">db</EM
>(3) library. These systems
will not use the file locking of the latest version. For such
systems you must define</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNEWDB -DOLD_NEWDB=<code class="userinput"><b>1</B
></CODE
>
                            <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                <i class="lineannotation">don't support new file locking</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Although you can get and install the latest version of <em class="emphasis">db</EM
>(3),
you should not do so unless you can rebuild your entire UNIX
system. The old form of database is used throughout, and just
building <em class="emphasis">sendmail</EM
> with the new form will cause password lookups
and the like to fail.</P
><p class="para">In general, you should never have to declare OLD_NEWDB (instead,
we recommend upgrading your operating system). OLD_NEWDB is
automatically included in the <em class="emphasis">Makefile</EM
> for the systems that need it.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-34">18.8.34 PATH...</A
></H3
><p class="refpurpose">Hardcode paths inside sendmail</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12115"></A
>Only a few pathnames are hard-coded into <em class="emphasis">sendmail</EM
>. The most obvious
is its configuration file, because that file lists the locations of nearly
all other files. For various reasons a few other file locations are
also hard-coded. Here, we describe those that you can change.
Note that the general form for all such changes uses the ENVDEF=
declaration of your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -D_PATH...=\&quot;/new/path/filename\&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">The new path must be surrounded by backslashed quotation marks so that
the compiler will correctly interpret it as a string.

<em class="emphasis">/etc/sendmail.cf</EM
> <a class="indexterm" name="AUTOID-12123"></A
>
The <em class="emphasis">sendmail.cf</EM
> file is pivotal to all of the <em class="emphasis">sendmail</EM
> 
program's operations (see <a class="xref" href="ch27_01.htm" title="The Configuration File">Chapter 27, <cite class="chapter">The Configuration File</CITE
></A
>).
V8.7 <em class="emphasis">sendmail</EM
> recommends that it always be called <em class="emphasis">sendmail.cf</EM
>
and always be located in the <em class="emphasis">/etc</EM
> directory. For testing, debugging,
or other legitimate reasons you may prefer to locate that file elsewhere (at least temporarily). You do that with the _PATH_SENDMAILCF definition:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -D_PATH_SENDMAILCF=\&quot;/src/tests/test.cf\&quot;</PRE
></BLOCKQUOTE
></P
><p class="para"><em class="emphasis">/etc/sendmail.pid</EM
> <a class="indexterm" name="AUTOID-12136"></A
>
The <em class="emphasis">sendmail.pid</EM
> file contains two lines of information.
The first line is text representation of the <em class="emphasis">pid</EM
> of the
current running daemon. The second is a copy of the command line
that was originally used to start <em class="emphasis">sendmail</EM
>. This file is handy
for killing and restarting the daemon
(see <a class="xref" href="ch04_01.htm" title="Daemon Mode (-bd)">Section 4.1.1, "Daemon Mode (-bd)"</A
>).
If BSD4_4 is defined, the default becomes <em class="emphasis">/var/run/sendmail.pid</EM
>;
otherwise, the default is <em class="emphasis">/etc/sendmail.pid</EM
>. You can change this
default (and you must if you intend to run a test daemon in
parallel to the original), with the ENVDEF= of your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -D_PATH_SENDMAILPID=\&quot;/src/tests/test.pid\&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">Ordinarily, two daemons cannot run simultaneously on a single host.
If you need to run a second daemon, you must change the port that it
listens to with the
<code class="literal">Port</CODE
> parameter of the <code class="literal">DaemonPortOptions</CODE
> (<code class="literal">O</CODE
>) option  
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.13</A
>).
<em class="emphasis">/etc/hosts</EM
> <a class="indexterm" name="AUTOID-12153"></A
>
Ordinarily, <em class="emphasis">sendmail</EM
> will first look for a service-switch
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.61</A
>)
to see how it should look up the canonical names of hosts.
If it finds one and if
the service <em class="emphasis">hosts</EM
> is listed, it uses the techniques listed
with the service-switch
to look up its hosts. 
When a technique is <em class="emphasis">files</EM
>, <em class="emphasis">sendmail</EM
> reads the file
named by _PATH_HOSTS to get its canonical information.
Ordinarily, that file is called <em class="emphasis">/etc/hosts</EM
>. If that file
is different or has been customized on your system, you can redefine
the location like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -D_PATH_HOSTS=\&quot;/etc/privatehosts\&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">In general, most other techniques are preferred over the linear
parse of a hosts file. However, this file is useful in determining
the canonical name of the local host.
Note that the location of the <em class="emphasis">hosts</EM
> file can also be changed
with the <code class="literal">HostsFile</CODE
> option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.30, HostsFile</A
>).
<em class="emphasis">/dev/kmem</EM
> <a class="indexterm" name="AUTOID-12168"></A
>
The <em class="emphasis">sendmail</EM
> program decides when to refuse connections and when
to only queue mail on the basis of its perception of the machine load average.
The process of determining that average is hugely complex and varies

greatly from vendor to vendor. Three pathnames that may be used in
determining the load are
_PATH_KMEM,
_PATH_LOADAVG,
and _PATH_UNIX.
These should need to be changed only in the rare event that you are
porting <em class="emphasis">sendmail</EM
> to a previously unsupported platform. Read the
file <em class="emphasis">conf.c</EM
> to see the complex way they are presently used.
Also see <a class="xref" href="#SML2-CH-18-TAB-5" title="Tuning for LA_INT, LA_SHORT, LA_FLOAT, and LA_READKSYM">Table 18.6</A
> 
to see how to use these
to find the load average.
<em class="emphasis">/etc/shells</EM
> <a class="indexterm" name="AUTOID-12175"></A
>
A user is not allowed to run programs from a <em class="emphasis">.forward</EM
>
file unless that user has a valid login shell
(see <a class="xref" href="ch25_07.htm#SML2-CH-25-SECT-7-3" title="Piping Through Programs">Section 25.7.4, "Piping Through Programs"</A
>). Nor is a user allowed
to save mail directly to files without a valid shell.
To determine whether the login shell is valid, <em class="emphasis">sendmail</EM
> calls
<em class="emphasis">getusershell</EM
>(3). If <em class="emphasis">sendmail</EM
> was defined without
HASGETUSERSHELL defined (see <a class="xref" href="#SML2-CH-18-TAB-3" title="HAS... #defines for Specific System Call Support">Table 18.4</A
>), it instead
tries to look
up the shell in the <em class="emphasis">/etc/shells</EM
> file. If that file cannot 
be opened, <em class="emphasis">sendmail</EM
> gets valid shell names
from an internal list called <code class="literal">DefaultUserShells</CODE
> that is defined in <em class="emphasis">conf.c</EM
>.
This _PATH_SHELLS definition can be used to change the
location of the <em class="emphasis">/etc/shells</EM
> file.
<em class="emphasis">/usr/tmp</EM
> <a class="indexterm" name="AUTOID-12189"></A
>
In a panic situation (such as when <em class="emphasis">sendmail</EM
> cannot figure out
how to deliver or bounce a mail message) the message is saved into
the <em class="emphasis">/usr/tmp/dead.letter</EM
> file (see the <code class="literal">ErrorMode</CODE
> (<code class="literal">e</CODE
>)
option <a class="xref" href="ch34_08.htm" title="">Section 34.8.24, ErrorMode (e)</A
>).
The _PATH_VARTMP definition is used to tune the location
of the <em class="emphasis">/usr/tmp</EM
> directory. For some systems it is defined
as <em class="emphasis">/usr/tmp</EM
>; for others it will need to be named
<em class="emphasis">/var/tmp</EM
>. As distributed, it is undefined in all <em class="emphasis">Makefiles</EM
>,
and it defaults to <em class="emphasis">/usr/tmp</EM
>.</P
><p class="para">There is no debugging flag that will display the defaults for
these file locations. If any are of concern, you should build
<em class="emphasis">sendmail</EM
> yourself.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-35">18.8.35 PICKY...</A
></H3
><p class="refpurpose">Make sendmail pickier</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12211"></A
>The <em class="emphasis">sendmail</EM
> program can be made pickier by tuning its
<code class="literal">PrivacyOptions</CODE
> (<code class="literal">p</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.47, PrivacyOptions (p)</A
>) or by defining two
macros when compiling:
PICKY_HELO_CHECK <a class="indexterm" name="AUTOID-12217"></A
><a class="indexterm" name="AUTOID-12220"></A
>
The SMTP HELO command is used to introduce the calling machine to
the receiving machine. The form of that command is</P
><p class="para"><blockquote class="screen"><pre class="screen">HELO <i class="lineannotation">calling host name here</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Note that HELO and EHLO are equivalent in this regard. Ordinarily,
<em class="emphasis">sendmail</EM
> doesn't care what the calling host calls itself.
All <em class="emphasis">sendmail</EM
> cares about is that this name is the canonical name
of a machine. If you care whether the HELO hostname matches the real
hostname of the calling machine, you can define PICKY_HELO_CHECK.</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DPICKY_HELO_CHECK</PRE
></BLOCKQUOTE
></P
><p class="para">With PICKY_HELO_CHECK defined, a mismatch (other than the local
machine calling itself <em class="emphasis">localhost</EM
>) will result in this
being logged:</P
><p class="para"><blockquote class="screen"><pre class="screen">Host <code class="replaceable"><i>realname</I
></CODE
> claimed to be <code class="replaceable"><i>heloname</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Note that this check is ordinarily turned off
[15]
because a large number of hosts on the Internet
use a name that is different from their canonical name.  
PICKY_QF_NAME_CHECK <a class="indexterm" name="AUTOID-12239"></A
>
The name of a queue file's control file is narrowly defined
inside <em class="emphasis">sendmail</EM
> (see <a class="xref" href="ch23_02.htm#SML2-CH-23-SECT-2-5" title="The Queue Identifier">Section 23.2.1, "The Queue Identifier"</A
>). If only
<em class="emphasis">sendmail</EM
> will be placing files into your queue, you 
might wish to turn on this macro for additional protection:</P
><blockquote class="footnote"><p class="para">[15] Eric was getting complaints that the continual insertion of this 
warning was misleading and tended to cause people to ignore it entirely.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DPICKY_QF_NAME_CHECK</PRE
></BLOCKQUOTE
></P
><p class="para">With PICKY_QF_NAME_CHECK defined, <em class="emphasis">sendmail</EM
> will log
an error if the name of the <code class="literal">qf</CODE
> file is incorrectly
formed and will rename the <code class="literal">qf</CODE
> file into a <code class="literal">Qf</CODE
>
file (see <a class="xref" href="ch23_03.htm#SML2-CH-23-SECT-3-5" title="A Bogus qf File (V8 only): Qf">Section 23.3</A
> for details of this process).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-36">18.8.36 PSBUFSIZ</A
></H3
><p class="refpurpose">Size of prescan() buffer</P
>(tune, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"></P
><p class="para"><a class="indexterm" name="AUTOID-12261"></A
><a class="indexterm" name="AUTOID-12263"></A
>Whenever an address (including rules) is tokenized, it is
stored in a single buffer, one token following the next with
a zero-value byte separating them. The size of this buffer
is defined by PSBUFSIZ. The default size is defined
in <em class="emphasis">conf.h</EM
> as (MAXNAME + MAXATOM).</P
><p class="para">In general, this definition should never be changed.
If you start getting warning messages such as</P
><p class="para"><blockquote class="screen"><pre class="screen">Address too long</PRE
></BLOCKQUOTE
></P
><p class="para">look elsewhere (such as rule sets) for the cause. 
You should consider changing the size of PSBUFSIZ only as a last
resort.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-37">18.8.37 QUEUE</A
></H3
><p class="refpurpose">Enable queueing</P
>(tune, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12279"></A
>If <em class="emphasis">sendmail</EM
> cannot immediately deliver a mail message, it places
that message in a queue to await another try. The QUEUE definition
causes queue-handling code to be included in <em class="emphasis">sendmail</EM
>.
If queueing is not enabled and you need to queue, <em class="emphasis">sendmail</EM
>
prints the following message and either bounces or discards the message:</P
><p class="para"><blockquote class="screen"><pre class="screen">dropenvelope: queueup</PRE
></BLOCKQUOTE
></P
><p class="para">A word to the wise: <em class="emphasis">Always</EM
> define QUEUE.
Even if you have only a pure UUCP machine, mail can fail
(for a reason such as a full disk). Without queueing, such mail
will bounce when instead it should be queued for a later try.</P
><p class="para">The default is to always define QUEUE if
NETINET or NETISO are defined; otherwise, QUEUE is undefined. There is no debugging flag to show whether QUEUE is defined, but the the <code class="literal">-bp</CODE
> switch
(see <a class="xref" href="ch23_04.htm" title="Printing the Queue">Section 23.4, "Printing the Queue"</A
>)
can be used to determine whether it is supported.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-38">18.8.38 QUEUESEGSIZE</A
></H3
><p class="refpurpose">Amount to grow queue work list</P
>(tune, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12299"></A
><a class="indexterm" name="AUTOID-12301"></A
>During a queue run, <em class="emphasis">sendmail</EM
> holds information in memory
about all the files being processed. It does this so that it
can sort them by priority for delivery.
Beginning with V8.7 <em class="emphasis">sendmail</EM
>, there is no longer a limit
(other than consuming all memory) on how many queued messages
can be processed during any queue run. Prior to V8.7, that number
was fixed by the constant QUEUESIZE. QUEUESIZE
has been retired and replaced with QUEUESEGSIZE,
which is defined in <em class="emphasis">conf.h</EM
> as:</P
><p class="para"><blockquote class="screen"><pre class="screen"># define QUEUESEGSIZE   1000            /* increment for queue size */</PRE
></BLOCKQUOTE
></P
><p class="para">It should be changed only if your queue continually contains a huge
number of messages. If you notice many messages like this being
logged:</P
><p class="para"><blockquote class="screen"><pre class="screen">grew WorkList for...</PRE
></BLOCKQUOTE
></P
><p class="para">you may need to modify QUEUESEGSIZE. Doing so requires that you
edit <em class="emphasis">conf.h</EM
> and recompile.</P
><p class="para">QUEUESEGSIZE can be traced with the <code class="literal">-d41</CODE
> debugging
switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.144, -d41.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-39">18.8.39 SCANF</A
></H3
><p class="refpurpose">Support scanf(3) with F command</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12325"></A
><a class="indexterm" name="AUTOID-12327"></A
>The <code class="literal">F</CODE
> configuration command (see <a class="xref" href="ch32_01.htm" title="The F Class Command">Section 32.1.2, "The F Class Command"</A
>) allows
the specification of a <em class="emphasis">scanf</EM
>(3) style string
to aid in parsing files (see <a class="xref" href="ch32_01.htm" title="scanf(3) variations">Section 32.1.2.1, "scanf(3) variations"</A
>).
In general this is not recommended because a misdesigned
input file can cause <em class="emphasis">sendmail</EM
> to core dump.
However, because of its popularity, 

it is enabled at 
compile time by default. If you don't need it, we recommend
you exclude its support with ENVDEF= in <em class="emphasis">Makefile</EM
>.</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DSCANF=0
                <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
        <i class="lineannotation">disable scanf(3)</I
></PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">scanf</EM
>(3) is used only in reading files into a
class with the <code class="literal">F</CODE
> configuration command. If you are running
a precompiled version of <em class="emphasis">sendmail</EM
>, you can determine whether
SCANF was included by using the <code class="literal">-d0.1</CODE
> debugging
switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-40">18.8.40 SFS-TYPE</A
></H3
><p class="refpurpose">How to determine free disk space</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12353"></A
><a class="indexterm" name="AUTOID-12355"></A
><a class="indexterm" name="AUTOID-12357"></A
>The <em class="emphasis">sendmail</EM
> program can reject incoming mail messages if
they are too large for the queueing disk. This ability is enabled
by giving a positive, nonzero size to the <code class="literal">MinFreeBlocks</CODE
>
(<code class="literal">b</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.40, MinFreeBlocks (b)</A
>).
The method that <em class="emphasis">sendmail</EM
> uses to measure the free space on
a disk varies from system to system.
SFS_TYPE defines which of several methods <em class="emphasis">sendmail</EM
>
will use. Those available are shown in
<a class="xref" href="#SML2-CH-18-TAB-9" title="Method to Determine Free Disk Space">Table 18.10</A
>.<a class="indexterm" name="AUTOID-12367"></A
><a class="indexterm" name="AUTOID-12370"></A
></P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-18-TAB-9">Table 18.10: Method to Determine Free Disk Space</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Define</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_NONE</TD
><td class="entry" rowspan="1" colspan="1">Your system has no way to determine the free space on a disk.  This causes the  <code class="literal">MinFreeBlocks</CODE
> (<code class="literal">b</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.40</A
>)to be ignored.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_USTAT</TD
><td class="entry" rowspan="1" colspan="1">Your system uses the <em class="emphasis">ustat</EM
>(2) system call to get information about mounted file systems.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_4ARGS</TD
><td class="entry" rowspan="1" colspan="1">Your system uses the four-argument form of the <em class="emphasis">statfs</EM
>(2) system call and <em class="emphasis">&lt;sys/statfs.h&gt;</EM
>.  If you define this, you can also define SFS_BAVAIL as the field name for the <em class="emphasis">statfs</EM
> C language structure (by default, <em class="emphasis">f_bavail</EM
>).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_VFS</TD
><td class="entry" rowspan="1" colspan="1">Your system uses the two-argument form of the <em class="emphasis">statfs</EM
>(2) system call and <em class="emphasis">&lt;sys/vfs.h&gt;</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_MOUNT</TD
><td class="entry" rowspan="1" colspan="1">Your system uses the two-argument form of the <em class="emphasis">statfs</EM
>(2) system call and <em class="emphasis">&lt;sys/mount.h&gt;</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_STATFS</TD
><td class="entry" rowspan="1" colspan="1">Your system uses the two-argument form of the <em class="emphasis">statfs</EM
>(2) system call and <em class="emphasis">&lt;sys/statfs.h&gt;</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SFS_STATVFS</TD
><td class="entry" rowspan="1" colspan="1">Your system uses the <em class="emphasis">statvfs</EM
>(2) system call.</TD
></TR
></TBODY
></TABLE
><p class="para">In general, SFS_TYPE is correctly defined for all supported
systems. You should need to modify it only if you are porting
to a new system. To do so, you will need to edit <em class="emphasis">conf.h</EM
>.</P
><p class="para">You can use the <code class="literal">-d4.80</CODE
> debugging switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.19, -d4.80</A
>)
to watch <em class="emphasis">sendmail</EM
> check for enough disk space.
The only way to tell whether a precompiled version of <em class="emphasis">sendmail</EM
> 
has this ability is by setting 
the <code class="literal">MinFreeBlocks</CODE
> option to a positive value and watching the
<code class="literal">-d4.80</CODE
> output.
If <code class="literal">bavail=</CODE
> in that output is always <code class="literal">-1</CODE
>, no matter what,
your support was defined as SFS_NONE.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-41">18.8.41 SMTP</A
></H3
><p class="refpurpose">Enable SMTP</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12435"></A
>If you are running <em class="emphasis">sendmail</EM
> as a daemon, you need
to define SMTP to enable mail transfers. If you don't intend
to run <em class="emphasis">sendmail</EM
> as a daemon, SMTP might not need to be
defined.
The default is that SMTP is automatically defined if either
NETINET or NETISO is defined; otherwise, SMTP
is undefined.</P
><p class="para">SMTP support is recommended, even if <em class="emphasis">sendmail</EM
> is not running with
network support or as a daemon. 
To take advantage of the new DSN protocol,
future MUAs will talk
to <em class="emphasis">sendmail</EM
> using SMTP over a pipe connection
with the <code class="literal">-bs</CODE
> command-line switch (see <a class="xref" href="ch36_07.htm" title="">Section 36.7.11, -bs</A
>).
The <em class="emphasis">mh</EM
>(1) suite of programs does that now.
Delivery agents are also being designed with SMTP so that
they can take advantage of DSN.</P
><p class="para">You enable SMTP support with ENVDEF= in your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DSMTP=1</PRE
></BLOCKQUOTE
></P
><p class="para">If a precompiled <em class="emphasis">sendmail</EM
> lacks SMTP support, an attempt
to use <em class="emphasis">sendmail</EM
>'s <code class="literal">-bs</CODE
> command line switch will result
in this fatal error:</P
><p class="para"><blockquote class="screen"><pre class="screen">I don't speak SMTP</PRE
></BLOCKQUOTE
></P
><p class="para">SMTP activity can be watched with the <code class="literal">-d18</CODE
> and
<code class="literal">-d19</CODE
> debugging switches (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.65, -d19.1</A
>) and with the <code class="literal">-v</CODE
> command-line
switch (see <a class="xref" href="ch36_07.htm" title="">Section 36.7.41, -v</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-42">18.8.42 SMTPDEBUG</A
></H3
><p class="refpurpose">Enable remote debugging</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12469"></A
><a class="indexterm" name="AUTOID-12472"></A
><a class="indexterm" name="AUTOID-12475"></A
>The <em class="emphasis">sendmail</EM
> program allows the developer to turn on debugging
and to print the queue from any remote site. This capability is
useful for solving occasional problems but
opens a potentially wide security hole.</P
><p class="para">In general, SMTPDEBUG should always be undefined. Later, when you
become more expert with <em class="emphasis">sendmail</EM
>, you might want to have a
standby version of <em class="emphasis">sendmail</EM
> ready (one with SMTPDEBUG defined),
just in case you need it.</P
><p class="para">There is no debugging switch that will let you know whether a precompiled
version of <em class="emphasis">sendmail</EM
> had this defined. Instead, you must run
it as a daemon, connect to it with <em class="emphasis">telnet</EM
>(1), and issue
the SHOWQ SMTP command. If it displays the mail
queue, 

then that precompiled <em class="emphasis">sendmail</EM
> was built with
SMTPDEBUG defined, and you <em class="emphasis">should not use it</EM
>!</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-43">18.8.43 SMTPLINELIM</A
></H3
><p class="refpurpose">Default for obsolete F=L flag</P
>(don&#8217;t change)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12494"></A
><a class="indexterm" name="AUTOID-12496"></A
>Each delivery agent that is defined in the configuration file
may or may not have an <code class="literal">L=</CODE
> (Line length) equate
(see <a class="xref" href="ch30_04.htm" title="">Section 30.4.6, L=</A
>). If that equate is
missing or if the value assigned to it is less than or equal
to zero, and if the <code class="literal">F=L</CODE
> delivery agent flag
is set (see <a class="xref" href="ch30_08.htm" title="">Section 30.8.29, F=L</A
>),
the default value that is used becomes the value of SMTPLINELIM.
Otherwise, the default value is 0.
This logic is there to support old configuration files
that use <code class="literal">F=L</CODE
> in place of the newer <code class="literal">L=</CODE
>.</P
><p class="para">The default for SMTPLINELIM is 990 (defined in RFC821)
and that value should not be changed. 
Rather, if you need a different line-length limit for
a particular delivery agent, you should use the <code class="literal">L=</CODE
> equate
when defining it.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-44">18.8.44 SOLARIS</A
></H3
><p class="refpurpose">Support Sun's Solaris 2.x</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12514"></A
>If compiling for a Sun Solaris machine, you will find this
SOLARIS definition correctly defined for you in your
<em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF=    -DSOLARIS             <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> Solaris 2.1 and 2.2</I
>
ENVDEF=    -DSOLARIS=20300       <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> Solaris 2.3</I
>
ENVDEF=    -DSOLARIS=20400       <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> Solaris 2.4</I
>
ENVDEF=    -DSOLARIS=20500       <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> Solaris 2.5</I
>
ENVDEF=    -DSOLARIS=20501       <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> Solaris 2.5.1</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Be sure to see <em class="emphasis">src/READ_ME</EM
> for several 
well-known pitfalls concerning Solaris.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-45">18.8.45 SPT-TYPE</A
></H3
><p class="refpurpose">Adapt/exclude process title support</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12534"></A
>Whenever a program first begins to run, UNIX provides it with
two arrays of information: its command-line arguments, and the
environment under which it was run. When you run <em class="emphasis">ps</EM
>(1)
to see what processes are doing, <em class="emphasis">ps</EM
> prints the command
line that was used to run each program.</P
><p class="para">To provide more useful information (such as current status or
host connected to), <em class="emphasis">sendmail</EM
> saves its command line and
environment, then periodically uses that system space to
display its status. This ability provides a valuable tool
for monitoring what each invocation of <em class="emphasis">sendmail</EM
> is doing.</P
><p class="para">&#13;The method to display this information is correctly defined 
in <em class="emphasis">conf.c</EM
> for all supported systems. In the rare event that
you need to port <em class="emphasis">sendmail</EM
> to another system, you may
do so by defining SPT_TYPE in <em class="emphasis">conf.h</EM
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-46">18.8.46 SUID-ROOT-FILES-OK</A
></H3
><p class="refpurpose">Allow root delivery to files</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12553"></A
><a class="indexterm" name="AUTOID-12555"></A
><a class="indexterm" name="AUTOID-12558"></A
>When delivering to files, <em class="emphasis">sendmail</EM
> runs as the controlling
user unless the <em class="emphasis">suid</EM
> or <em class="emphasis">sgid</EM
> bits of the file are set.
If so, it runs as the owner of the file.
A question arises when such files are <em class="emphasis">root</EM
> owned.
Ordinarily, writing to <em class="emphasis">suid</EM
> and <em class="emphasis">sgid</EM
> <em class="emphasis">root</EM
> owned files 
as <em class="emphasis">root</EM
> is disallowed.</P
><p class="para">If, for some reason, your site needs to allow delivery 
to <em class="emphasis">root</EM
>-owned files with <em class="emphasis">sendmail</EM
> running as <em class="emphasis">root</EM
>,
you can enable this behavior with</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DSUID_ROOT_FILES_OK</PRE
></BLOCKQUOTE
></P
><p class="para">But be aware that you may open serious security holes on your system
if you do this. We recommend that SUID_ROOT_FILES_OK never
be defined, except as a temporary debugging technique.
If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you can 
use the <code class="literal">-d0.1</CODE
> debugging
switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>) to determine whether SUID_ROOT_FILES_OK
was defined in it.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-47">18.8.47 SYSLOG-BUFSIZE</A
></H3
><p class="refpurpose">Limit <em class="emphasis">syslog</EM
>(3) buffer size</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12588"></A
><a class="indexterm" name="AUTOID-12590"></A
>The <em class="emphasis">sendmail</EM
> program logs errors, information, and debugging
messages using the <em class="emphasis">syslog</EM
>(3) facility.
By default, <em class="emphasis">sendmail</EM
> uses a 1024-byte buffer to assemble
each message before dispatching it, but some systems don't accept
a buffer this big. For such systems you can reduce the size
of that buffer by defining SYSLOG_BUFSIZE with a new size:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DSYSLOG_BUFSIZE=<code class="userinput"><b>512</B
></CODE
>
                         <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
         <i class="lineannotation">reduce syslog</I
>(3)<i class="lineannotation">'s buffer size</I
></PRE
></BLOCKQUOTE
></P
><p class="para">First, note that SYSLOG_BUFSIZE is correctly set in
<em class="emphasis">conf.h</EM
> and <em class="emphasis">Makefiles/*</EM
> for all supported systems.
Second, note that setting the buffer to fewer than 256 bytes
causes <em class="emphasis">sendmail</EM
> to log many more smaller messages (each
item of information on a separate <em class="emphasis">syslog</EM
>(3) line).
If SYSLOG_BUFSIZE is less than 89, some logging information
will be lost.</P
><p class="para">SYSLOG_BUFSIZE has an effect only if <em class="emphasis">sendmail</EM
> was
compiled with LOG defined, (see <a class="xref" href="#SML2-CH-18-SECT-8-16" title="">Section 18.8.16</A
>),
and if the <code class="literal">LogLevel</CODE
> (<code class="literal">L</CODE
>) option 
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.33</A
>) is set to 6 or more, and if
your <em class="emphasis">syslog.conf</EM
>(5) file is configured to log
<em class="emphasis">mail</EM
> messages at LOG_INFO and above (see
<a class="xref" href="ch26_01.htm" title="Logging with syslog">Section 26.1, "Logging with syslog"</A
>).
If you are running a 

precompiled version of <em class="emphasis">sendmail</EM
>, there
is no way to determine the setting of SYSLOG_BUFSIZE.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-48">18.8.48 SYSTEM5</A
></H3
><p class="refpurpose">Support SysV-derived machines</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12625"></A
>If you are compiling <em class="emphasis">sendmail</EM
> on a SysVR4-derived machine,
you should define SYSTEM5. This automatically causes the
correct SysV support to be included.
For all systems that require SYSTEM5 to be defined,
it is already correctly defined in <em class="emphasis">conf.h</EM
>.</P
><p class="para">If you suspect that you need to define SYSTEM5 when porting
to a new system, you should also investigate SYS5SIGNALS
and SYS5SETPGRP in <em class="emphasis">conf.h</EM
> and <em class="emphasis">READ_ME</EM
>.
If you are running a precompiled version of <em class="emphasis">sendmail</EM
>, you
can use the <code class="literal">-d0.10</CODE
> debugging switch
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.3</A
>) to discover whether SYSTEM5 or 
SYS5SETPGRP were defined.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-49">18.8.49 TCPWRAPPERS</A
></H3
><p class="refpurpose">Use libwrap.a for connects</P
>(tune with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12643"></A
><a class="indexterm" name="AUTOID-12645"></A
>Beginning with V8.8 <em class="emphasis">sendmail</EM
>, it is now possible to use the
<em class="emphasis">libwrap.a</EM
> library to validate incoming SMTP connections.
To enable this ability, you need to define TCPWRAPPERS
and arrange for the <em class="emphasis">libwrap.a</EM
> library to be included in 
your <em class="emphasis">Makefile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DTCPWRAPPERS
LIBS= -lwrap</PRE
></BLOCKQUOTE
></P
><p class="para">See <em class="emphasis">src/README</EM
> and <a class="xref" href="ch22_04.htm#SML2-CH-22-SECT-4-2" title="Accept/Reject Connections via libwrap.a">Section 22.4.1, "Accept/Reject Connections via libwrap.a"</A
> for additional information.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-50">18.8.50 TOBUFSIZE</A
></H3
><p class="refpurpose">Set buffer for recipient list</P
>(tune, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12664"></A
><a class="indexterm" name="AUTOID-12666"></A
><a class="indexterm" name="AUTOID-12669"></A
>For each delivery of one or more recipients to a single
delivery agent, <em class="emphasis">sendmail</EM
> 
issues a summary of delivery
through <em class="emphasis">syslog</EM
>(3).
When logged, the recipient part of the message looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">to=<code class="replaceable"><i>recipients</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, <em class="emphasis">recipients</EM
> is a comma-separated list of recipients. The
maximum number of characters in this list is
determined by TOBUFSIZE. That limit is intended to prevent
the internal <em class="emphasis">syslog</EM
>(3) buffer from overflowing. On machines
with older versions of <em class="emphasis">syslog</EM
>(3) you may need to
reduce the size of TOBUFSIZE in <em class="emphasis">conf.h</EM
>.
In general, TOBUFSIZE is correctly defined for all
currently supported systems. You should need to change
it only if porting to a new system.</P
><p class="para">Note that one side effect of TOBUFSIZE is that it also limits the
total number of recipients that can be delivered at once. If you need to
increase that limit (and if you have a robust version of <em class="emphasis">syslog</EM
>),
you can experiment by cautiously increasing TOBUFSIZE.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-51">18.8.51 TRUST-POPEN</A
></H3
><p class="refpurpose">Allow use of popen(3)</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12691"></A
><a class="indexterm" name="AUTOID-12693"></A
>The <em class="emphasis">sendmail</EM
> program uses the <em class="emphasis">uname</EM
>(2) system call
to determine the UUCP name of the local host.
If your machine lacks the <em class="emphasis">uname</EM
>(2) call (if HASUNAME
was not defined), <em class="emphasis">sendmail</EM
> attempts to emulate
<em class="emphasis">uname</EM
>(2) with its own internal routine.
That internal routine first tries to read the <em class="emphasis">/etc/whoami</EM
>
file. If that fails, it then tries to parse
<em class="emphasis">/usr/include/whoami.h</EM
>. Finally, if that fails and
if TRUST_POPEN is defined, <em class="emphasis">sendmail</EM
> executes
the following command to get the UUCP name:<a class="indexterm" name="AUTOID-12703"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">popen(&quot;uuname -l&quot;, &quot;r&quot;)</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-12708"></A
>The result (no matter how it was obtained) is then placed into
the <code class="literal">$k</CODE
> macro (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.21, $k</A
>).</P
><p class="para">In general, you should <em class="emphasis">never</EM
> define TRUST_POPEN.
The <em class="emphasis">popen</EM
>(3) call presents a huge security risk.
If your system lacks <em class="emphasis">uname</EM
>(2) and is unable to
set its UUCP name, consider hard-coding that name
in the configuration file:</P
><p class="para"><blockquote class="screen"><pre class="screen">Dk<code class="replaceable"><i>uucpname</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">You may wish to define TRUST_POPEN temporarily to see whether
that causes your UUCP name to be found. Once that
is done, undefine it for your final release of <em class="emphasis">sendmail</EM
>.</P
><p class="para">There is no debugging switch that will tell you whether TRUST_POPEN
was defined in a precompiled version of <em class="emphasis">sendmail</EM
>. If that binary
is not stripped, you can use <em class="emphasis">nm</EM
>(1) to check for <em class="emphasis">popen</EM
>(3)
support:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>nm sendmail | grep popen</B
></CODE
>
00058bc8 T _popen                      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> found, so TRUST_POPEN was defined</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If <em class="emphasis">sendmail</EM
> is stripped, you can still run <em class="emphasis">strings</EM
>(1)
in order to check for the actual command:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>strings sendmail | grep &quot;uname -l&quot;</B
></CODE
>
uuname -l                              <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> found, so TRUST_POPEN was defined</I
></PRE
></BLOCKQUOTE
></P
><p class="para">In either event you should contact your vendor and ask for this
security risk to be removed.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-52">18.8.52 TTYNAME</A
></H3
><p class="refpurpose">Set $y to tty name (obsolete)</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12745"></A
><a class="indexterm" name="AUTOID-12747"></A
><a class="indexterm" name="AUTOID-12749"></A
>The <code class="literal">$y</CODE
> macro (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.44, $y</A
>)
is intended to hold as its value the
base name of the controlling <em class="emphasis">tty</EM
> device (if there is one).
On BSD-derived systems this is a name like the following,
but with the <code class="literal">/dev/</CODE
> prefix removed:</P
><p class="para"><blockquote class="screen"><pre class="screen">/dev/tty04</PRE
></BLOCKQUOTE
></P
><p class="para">Defining TTYNAME enables <em class="emphasis">sendmail</EM
> to put this information
into <code class="literal">$y</CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DTTYNAME</PRE
></BLOCKQUOTE
></P
><p class="para">Note that TTYNAME is useful only for debugging <em class="emphasis">sendmail</EM
>.
The <em class="emphasis">sendmail</EM
> program does not itself use <code class="literal">$y</CODE
> for
anything. Also note that defining TTYNAME requires that
your system support the <em class="emphasis">ttyname</EM
>(2) system call.
If you are running a precompiled version of <em class="emphasis">sendmail</EM
>,
you can determine whether TTYNAME was defined by sending mail with
the <code class="literal">-d35.9</CODE
> debugging switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.120, -d35.9</A
>) and watching
for <code class="literal">$y</CODE
> to be defined:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(y as ttyp1)</PRE
></BLOCKQUOTE
></P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-53">18.8.53 UDB-DEFAULT-SPEC</A
></H3
><p class="refpurpose">Default User Database location</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12781"></A
><a class="indexterm" name="AUTOID-12783"></A
><a class="indexterm" name="AUTOID-12786"></A
><a class="indexterm" name="AUTOID-12788"></A
>If you wish to define a default location for the User Database
that will take effect if the <code class="literal">UserDatabaseSpec</CODE
> (<code class="literal">U</CODE
>) option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.75, UserDatabaseSpec (U)</A
>)
is missing, you can define it, for example, like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNEWDB -DUDB_DEFAULT_SPEC=\&quot;/var/db/userdb.db\&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">The backslashed quotation marks are necessary to pass the path
to <em class="emphasis">sendmail</EM
> as a string. </P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-54">18.8.54 USERDB</A
></H3
><p class="refpurpose">Support the User Database</P
>(tune with DBMDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12805"></A
>The User Database (see <a class="xref" href="ch33_05.htm" title="The User Database">Section 33.5</A
>)
is code inside <em class="emphasis">sendmail</EM
> that allows sender and
recipient addresses to be rewritten under the control of an external
database.
This code is automatically included in <em class="emphasis">sendmail</EM
> when you define
NEWDB or HESIOD:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNEWDB          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> automatically include User Database code</I
>
DBMDEF= -DHESIOD         <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> automatically include User Database code</I
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;If you don't want to include support for the User Database, you need
to specifically turn it off by setting USERDB to 0:</P
><p class="para"><blockquote class="screen"><pre class="screen">DBMDEF= -DNEWDB -DUSERDB=0
DBMDEF= -DHESIOD -DUSERDB=0</PRE
></BLOCKQUOTE
></P
><p class="para">See UDB_DEFAULT_SPEC for a method to set a default for the database
location.
If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you may use
the <code class="literal">-d0.1</CODE
> switch
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>)
to determine whether USERDB support is included.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-55">18.8.55 USESETEUID</A
></H3
><p class="refpurpose">Support seteuid(2) identity changes</P
>(port, edit conf.h)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12829"></A
>.SS &quot;seteuid routine&quot;
To perform most kinds of delivery in a safe manner, <em class="emphasis">sendmail</EM
> 
must be able to change its <em class="emphasis">root</EM
> identity to that of another user,
deliver as that user, and then restore its identity to <em class="emphasis">root</EM
>.
The preferred method for doing this is with the Posix 1 
<em class="emphasis">seteuid</EM
>(2) routine. To determine whether your system correctly
supports this routine, compile and run the program
<em class="emphasis">test/t_seteuid.c</EM
>.
The compiled binary must be <em class="emphasis">suid-root</EM
> and must be
executed by an ordinary user.</P
><p class="para"><blockquote class="screen"><pre class="screen"># <code class="userinput"><b>cc t_seteuid.c</B
></CODE
>
# <code class="userinput"><b>chmod u+s a.out</B
></CODE
>
# <code class="userinput"><b>suspend</B
></CODE
>
% <code class="userinput"><b>a.out</B
></CODE
>
... <i class="lineannotation">lots of output here</I
>
This system cannot use seteuid</PRE
></BLOCKQUOTE
></P
><p class="para">Here the output shows failure, so you do not have <em class="emphasis">seteuid</EM
>(2) support.
Beginning with V8.8, <em class="emphasis">a.out</EM
> prints the following on success:</P
><p class="para"><blockquote class="screen"><pre class="screen">It is safe to define USESETEUID on this system</PRE
></BLOCKQUOTE
></P
><p class="para">If the output had not shown failure or had shown success
(if you had usable <em class="emphasis">seteuid</EM
>(2) support),
you could take advantage of that support by defining USESETEUID in
<em class="emphasis">conf.h</EM
>. In general, USESETEUID is correctly defined
for all systems that can take advantage of this <em class="emphasis">seteuid</EM
> support.</P
><p class="para">If <em class="emphasis">seteuid</EM
>(2) failed, you need to investigate using
<em class="emphasis">setreuid</EM
>(2) instead:</P
><p class="para"><blockquote class="screen"><pre class="screen"># <code class="userinput"><b>cc t_setreuid.c</B
></CODE
>
# <code class="userinput"><b>chmod u+s a.out</B
></CODE
>
# <code class="userinput"><b>suspend</B
></CODE
>
% <code class="userinput"><b>a.out</B
></CODE
>
initial uids (should be 678/0): r/euid=678/0
after setreuid(0, 1) (should be 0/1): r/euid=0/1
after setreuid(-1, 0) (should be 0/0): r/euid=0/0
after setreuid(realuid, 0) (should be 678/0): r/euid=678/0

after setreuid(0, 2) (should be 0/2): r/euid=0/2
after setreuid(-1, 0) (should be 0/0): r/euid=0/0
after setreuid(realuid, 0) (should be 678/0): r/euid=678/0

It is safe to define HASSETREUID on this system</PRE
></BLOCKQUOTE
></P
><p class="para">Here, the test succeeded (no failure message was printed prior to V8.8).
If your system can use <em class="emphasis">setreuid</EM
>(2), you can take
advantage of it by defining HASSETREUID in <em class="emphasis">conf.h</EM
>.</P
><p class="para">No matter which you define, be sure to read <em class="emphasis">src/READ_ME</EM
>
for possible pitfalls. Note that HASSETREUID
and USESETEUID are correctly defined for all currently
supported systems. You  need to define one only if
you are porting <em class="emphasis">sendmail</EM
> to a completely new system.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you
can use the <code class="literal">-d0.1</CODE
> switch
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>)
to discover whether HASSETREUID or USESETEUID
support is included.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-56">18.8.56 WILDCARD-SHELL</A
></H3
><p class="refpurpose">Redefine wildcard shell</P
>(debug, edit conf.c)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12880"></A
><a class="indexterm" name="AUTOID-12882"></A
>Ordinarily, <em class="emphasis">sendmail</EM
> prohibits ordinary users from running
programs from inside their <em class="emphasis">~./forward</EM
> files unless they
have a valid login shell. This restriction is in place to prevent
ordinary users from running arbitrary programs on a main mail server.
Some sites prefer to allow users to run arbitrary programs despite
the restriction about logging into the mail server. At such
sites, one can bypass this restriction by placing the special
string</P
><p class="para"><blockquote class="screen"><pre class="screen">/SENDMAIL/ANY/SHELL/</PRE
></BLOCKQUOTE
></P
><p class="para">in the <em class="emphasis">/etc/shells</EM
> file. If, for some reason, you need
to use a different string, you may do so by redefining
WILDCARD_SHELL in <em class="emphasis">conf.c</EM
>.</P
><p class="para">If you enable arbitrary programs you should also implement
the <em class="emphasis">sendmail</EM
> restricted shell <em class="emphasis">smrsh</EM
> (see <a class="xref" href="ch22_08.htm#SML2-CH-22-SECT-8-1" title="The smrsh Program">Section 22.8.2, "The smrsh Program"</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-18-SECT-8-57">18.8.57 XDEBUG</A
></H3
><p class="refpurpose">Support sanity checks</P
>(debug with ENVDEF= in Makefile)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-12903"></A
>In past releases of <em class="emphasis">sendmail</EM
>, changes in
file descriptors and other key variables have sometimes occurred 
for reasons that remain a mystery to this day. 
Small &quot;sanity checks&quot; have been included in the code
to discover such anomalies, should they happen again.
To exclude these checks, redefine XDEBUG to 0:</P
><p class="para"><blockquote class="screen"><pre class="screen">ENVDEF= -DXDEBUG=0</PRE
></BLOCKQUOTE
></P
><p class="para">Generally, however, XDEBUG should always remain
enabled. It adds only a microscopic amount of overhead
to <em class="emphasis">sendmail</EM
> and helps to certify <em class="emphasis">sendmail</EM
>'s
rational behavior.</P
><p class="para"><a class="indexterm" name="AUTOID-12912"></A
>If <em class="emphasis">sendmail</EM
>'s notion of who it is (as defined by
the <code class="literal">$j</CODE
> macro; see <a class="xref" href="ch31_10.htm" title="">Section 31.10.20, $j</A
>) gets
trashed by losing all its dots, <em class="emphasis">sendmail</EM
> will log the
following at LOG_ALERT if XDEBUG is defined, 
dump its state (see <a class="xref" href="ch26_03.htm" title="SIGUSR1  Dump States">Section 26.3.3, "SIGUSR1  Dump States"</A
>), and <em class="emphasis">abort</EM
>(3):</P
><p class="para"><blockquote class="screen"><pre class="screen">daemon process $j lost dot; see syslog</PRE
></BLOCKQUOTE
></P
><p class="para">At startup the value in the <code class="literal">$j</CODE
> macro (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.20</A
>)
is appended to the class <code class="literal">w</CODE
> (see <a class="xref" href="ch32_05.htm" title="">Section 32.5.8, $=w</A
>).
If <em class="emphasis">sendmail</EM
> is compiled with XDEBUG, it
periodically checks to make sure that <code class="literal">$j</CODE
> is still
listed in  class <code class="literal">w</CODE
>. If <code class="literal">$j</CODE
> should vanish,
<em class="emphasis">sendmail</EM
> will log the following at LOG_ALERT,
dump its state (see <a class="xref" href="ch26_03.htm" title="SIGUSR1  Dump States">Section 26.3.3</A
>), and <em class="emphasis">abort</EM
>(3):</P
><p class="para"><blockquote class="screen"><pre class="screen">daemon process doesn't have $j in $=w; see syslog</PRE
></BLOCKQUOTE
></P
><p class="para">With XDEBUG defined, <em class="emphasis">sendmail</EM
> periodically
checks to see whether its standard I/O file descriptors
have gotten clobbered. If so, it logs the following and
tries to recover by connecting it to <em class="emphasis">/dev/null</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="replaceable"><i>where</I
></CODE
>: fd <code class="replaceable"><i>which</I
></CODE
> not open</PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="replaceable"><i>where</I
></CODE
> will reflect the internal subroutine
name and arguments that led to the check, and <code class="replaceable"><i>which</I
></CODE
>
will be the bad file descriptor number.</P
><p class="para">If you are running a precompiled <em class="emphasis">sendmail</EM
> binary, you
can use the <code class="literal">-d0.1</CODE
> switch
(see <a class="xref" href="ch37_05.htm" title="">Section 37.5.1</A
>)
to determine whether XDEBUG support is included.<a class="indexterm" name="AUTOID-12951"></A
><a class="indexterm" name="AUTOID-12952"></A
><a class="indexterm" name="AUTOID-12953"></A
></P
></DIV
></BLOCKQUOTE
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch18_07.htm" title="18.7 Pitfalls"><img src="../gifs/txtpreva.gif" alt="Previous: 18.7 Pitfalls" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch19_01.htm" title="19. V8 m4 Configuration"><img src="../gifs/txtnexta.gif" alt="Next: 19. V8 m4 Configuration" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">18.7 Pitfalls</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">19. V8 m4 Configuration</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
