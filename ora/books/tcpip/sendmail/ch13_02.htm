<html><head>
<title>[Chapter 13] 13.2 Required Options</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T18:37:07Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch13_01.htm" title="13. Setting Options"><link rel="prev" href="ch13_01.htm" title="13.1 Options: An Overview"><link rel="next" href="ch13_03.htm" title="13.3 Testing the Options"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch13_01.htm" title="13.1 Options: An Overview"><img src="../gifs/txtpreva.gif" alt="Previous: 13.1 Options: An Overview" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 13<br>Setting Options</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch13_03.htm" title="13.3 Testing the Options"><img src="../gifs/txtnexta.gif" alt="Next: 13.3 Testing the Options" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-13-SECT-2">13.2 Required Options</A
></H2
><p class="para">The <em class="emphasis">sendmail</EM
> program offers over 70 options to
choose from. We will cover a few here and the rest in <a class="xref" href="ch34_01.htm" title="Options">Chapter 34</A
>.  Recall that the purpose of our configuration
file is to forward all mail to a central mail hub. In keeping with the
simplicity of this task, you need to declare only those options shown
in <a class="indexterm" name="SML2-CH-13-IX-OPTIONS-SENDMAIL-REQUIRED"></A
><a class="indexterm" name="AUTOID-7044"></A
><a class="xref" href="#SML2-CH-13-TAB-0" title="Some Required Options">Table 13.1</A
> (abstracted from <a class="xref" href="ch34_04.htm" title="All Options">Table 34.4</A
> in <a class="xref" href="ch34_04.htm" title="Alphabetical Table of All Options">Section 34.4, "Alphabetical Table of All Options"</A
>).[2]</P
><blockquote class="footnote"><p class="para">[2] For a description of the Type, leap ahead to <a class="xref" href="ch34_05.htm" title="Option Argument Types">Section 34.5, "Option Argument Types"</A
>.</P
></BLOCKQUOTE
><table class="table"><caption class="table"><a class="title" name="SML2-CH-13-TAB-0">Table 13.1: Some Required Options</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Option Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Type</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Description</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">QueueDirectory (<code class="literal">Q</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">String</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.48, QueueDirectory (Q)</A
></TD
><td class="entry" rowspan="1" colspan="1">Location of queue directory</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Timeout (<code class="literal">r</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">String</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.70, Timeout (r)</A
></TD
><td class="entry" rowspan="1" colspan="1">Set timeouts</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">DeliveryMode (<code class="literal">d</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">Character</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.16, DeliveryMode (d)</A
></TD
><td class="entry" rowspan="1" colspan="1">Set delivery mode</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TempFileMode (<code class="literal">F</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">Octal</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.68, TempFileMode (F)</A
></TD
><td class="entry" rowspan="1" colspan="1">Permissions for temporary files</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">DefaultUser (<code class="literal">u</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">String</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.15, DefaultUser (g)(u)</A
></TD
><td class="entry" rowspan="1" colspan="1">Default delivery agent identity</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LogLevel (<code class="literal">L</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">Numeric</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.33, LogLevel (L)</A
></TD
><td class="entry" rowspan="1" colspan="1">Set (increase) logging level</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">OldStyleHeaders(<code class="literal">o</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">Boolean</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.44, OldStyleHeaders (o)</A
></TD
><td class="entry" rowspan="1" colspan="1">Allow spaces in recipient lists</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">BlankSub(<code class="literal">B</CODE
>)</TD
><td class="entry" rowspan="1" colspan="1">Character</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="ch34_08.htm" title="">Section 34.8.5, BlankSub (B)</A
></TD
><td class="entry" rowspan="1" colspan="1">Unquoted space replacement</TD
></TR
></TBODY
></TABLE
><p class="para">&#13;We'll describe each of these required options briefly,
add them to the <em class="emphasis">client.cf</EM
> file, and then test them.&#13;</P
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-1">13.2.1 The Location of the Queue Directory</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7124"></A
><a class="indexterm" name="AUTOID-7126"></A
><a class="indexterm" name="AUTOID-7129"></A
><a class="indexterm" name="AUTOID-7133"></A
><a class="indexterm" name="AUTOID-7135"></A
><a class="indexterm" name="AUTOID-7138"></A
>We have already described queue directories (in <a class="xref" href="ch03_01.htm" title="The Queue Directory">Section 3.1.2, "The Queue Directory"</A
>).
Queued mail always looks like <em class="emphasis">authentic</EM
> mail to <em class="emphasis">sendmail</EM
>.
That is, the <em class="emphasis">sendmail</EM
> program <em class="emphasis">trusts</EM
> the mail it finds
there, believing that only <em class="emphasis">root</EM
> placed it there.
If the queue directory were world-writable (as <em class="emphasis">/tmp</EM
> is),
anyone could create queued mail and thereby create forged mail
messages. To help prevent forged mail, the queue directory should
be writable only by <em class="emphasis">root</EM
>. Unfortunately, for the purpose
of our exercises, this would
prevent you from sending mail using the <em class="emphasis">client.cf</EM
> file.
You would need to be <em class="emphasis">root</EM
>, which isn't desirable and
may not be possible.</P
><p class="para">Instead, we will temporarily declare the location of the queue directory
to be <em class="emphasis">/tmp</EM
>.
To help you to remember to change the <em class="emphasis">client.cf</EM
> file later, add 
a comment now showing the need to make the change and the correct path to use:</P
><p class="para"><blockquote class="screen"><pre class="screen">O QueueDirectory=/tmp           # BEWARE: use /var/spool/mqueue upon release</PRE
></BLOCKQUOTE
></P
><p class="para">Note that on some systems, <code class="literal">/var</CODE
> needs to be replaced with <code class="literal">/usr</CODE
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-2">13.2.2 Limit the Life of Queued Messages</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7161"></A
><a class="indexterm" name="AUTOID-7164"></A
><a class="indexterm" name="AUTOID-7167"></A
><a class="indexterm" name="AUTOID-7170"></A
><a class="indexterm" name="AUTOID-7172"></A
><a class="indexterm" name="AUTOID-7174"></A
><a class="indexterm" name="AUTOID-7177"></A
><a class="indexterm" name="AUTOID-7180"></A
>Mail is usually placed into the queue because it could not be transmitted
immediately. Periodically, <em class="emphasis">sendmail</EM
> attempts to retransmit
each queued message. If the message has not been delivered
after a reasonable interval, <em class="emphasis">sendmail</EM
> sends a warning to the sender,
informing the sender that the message has not yet been delivered
but that <em class="emphasis">sendmail</EM
> will continue
to try. After a longer interval in the queue,
messages that have not been successfully transmitted are bounced. 
The <code class="literal">Timeout</CODE
> (<code class="literal">r</CODE
>) option is used to specify both intervals:</P
><p class="para"><blockquote class="screen"><pre class="screen">O Timeout.queuewarn=4h
O Timeout.queuereturn=5d</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">Timeout</CODE
> (<code class="literal">r</CODE
>) option is special in that it takes a dot and a keyword
to tell it what to time out.<a class="indexterm" name="AUTOID-7193"></A
><a class="indexterm" name="AUTOID-7195"></A
><a class="indexterm" name="AUTOID-7197"></A
>
In the first case the keyword <code class="literal">queuewarn</CODE
> sets the warning interval.
In the second, the keyword <code class="literal">queuereturn</CODE
> sets the return (bounce) interval.
(The complete list of keywords that apply to the <code class="literal">Timeout</CODE
> option
is in <a class="xref" href="ch34_08.htm" title="">Section 34.8.70</A
>.)</P
><p class="para"><a class="indexterm" name="AUTOID-7204"></A
><a class="indexterm" name="AUTOID-7207"></A
>The <code class="literal">Timeout</CODE
> option is one that takes a time interval as its argument.
Here, <code class="literal">4h</CODE
> represents four hours (if the message is undelivered
after four hours, warn the sender and continue to try) and 
<code class="literal">5d</CODE
> represents five days (return the message to the
sender as bounced mail). 

The letter
following the number in each specifies the units.
The <code class="literal">queuereturn</CODE
>, for example,
could have been represented like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">O Timeout.queuereturn=120h</PRE
></BLOCKQUOTE
></P
><p class="para">This tells <em class="emphasis">sendmail</EM
> to bounce queued mail after 120 hours,
which is the same as five days.</P
><p class="para">Five days may seem like a long time. After all, the mail hub
should always be up and always be accepting mail. But suppose the
hub crashed on Friday evening and replacement parts weren't
available until Thursday morning. In this situation, queued mail
on all the clients would start bouncing before the hub was repaired.</P
><p class="para">In choosing a value for the <code class="literal">Timeout</CODE
> (<code class="literal">r</CODE
>) option's 
<code class="literal">queuereturn</CODE
> keyword, take into account
the worst-case scenario you can imagine. If the hub has 
same-day service, a value of <code class="literal">1d</CODE
> might be enough. If the hub
has to be shipped out for repair, you may want to consider a value
such as <code class="literal">14d</CODE
> (two weeks).
[3]&#13;</P
><blockquote class="footnote"><p class="para">[3] You should also consider including MX records for the hub (see <a class="xref" href="ch21_03.htm#SML2-CH-21-SECT-3-1" title="Set Up MX Records">Section 21.3, "Set Up MX Records"</A
>)
so that mail will be sent to another server if the hub is down.</P
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-3">13.2.3 The Default Delivery Mode</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7230"></A
><a class="indexterm" name="AUTOID-7233"></A
><a class="indexterm" name="AUTOID-7235"></A
>There are several modes in which the <em class="emphasis">sendmail</EM
> program can run.
Each determines how <em class="emphasis">sendmail</EM
> interacts
with the program that invoked it. For the <em class="emphasis">client.cf</EM
> file,
you want the user's MUA to execute <em class="emphasis">sendmail</EM
> for
message transmission but to give the appearance that
the message was sent almost instantaneously. This prevents
users from waiting
for their prompt to return whenever the mail hub is busy.</P
><p class="para"><a class="indexterm" name="AUTOID-7243"></A
><a class="indexterm" name="AUTOID-7245"></A
>The delivery mode to use is called <em class="emphasis">background</EM
> because
it causes <em class="emphasis">sendmail</EM
> to accept a message and then run
in the background (thus allowing the MUA to continue on).
The delivery mode is set with the <code class="literal">DeliveryMode</CODE
> (<code class="literal">d</CODE
>) option:</P
><p class="para"><blockquote class="screen"><pre class="screen">O DeliveryMode=background</PRE
></BLOCKQUOTE
></P
><p class="para">Note that <em class="emphasis">sendmail</EM
> recognizes only the <code class="literal">b</CODE
> of <code class="literal">background</CODE
>. 
So you will sometimes find this same declaration in other configuration files more succinctly
expressed like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">O DeliveryMode=b</PRE
></BLOCKQUOTE
></P
><p class="para">Other possible values for the <code class="literal">DeliveryMode</CODE
> (<code class="literal">d</CODE
>) option are documented in
<a class="xref" href="ch34_08.htm" title="">Section 34.8.16</A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-4">13.2.4 The Default File Permissions</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7266"></A
><a class="indexterm" name="AUTOID-7268"></A
><a class="indexterm" name="AUTOID-7271"></A
><a class="indexterm" name="AUTOID-7274"></A
><a class="indexterm" name="AUTOID-7276"></A
><a class="indexterm" name="AUTOID-7279"></A
><a class="indexterm" name="AUTOID-7282"></A
>The <em class="emphasis">sendmail</EM
> program frequently needs to create new files 
(such as files in its queue).
The file permissions that are given to each created file are determined by
the value of the <code class="literal">TempFileMode</CODE
> (<code class="literal">F</CODE
>) option.
That value can range from 0600 (readable
and writable only by <em class="emphasis">sendmail</EM
>) to 0666 (readable and writable
by anyone in the world). For security, we'll select
the first value&nbsp;- the most restrictive:</P
><p class="para"><blockquote class="screen"><pre class="screen">O TempFileMode=0600</PRE
></BLOCKQUOTE
></P
><p class="para">Note that the value must be expressed in octal notation. (See <em class="emphasis">chmod</EM
>(1)
for details.)
The <code class="literal">TempFileMode</CODE
> (<code class="literal">F</CODE
>) option is further documented in <a class="xref" href="ch34_08.htm" title="">Section 34.8.68</A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-5">13.2.5 The Default User Identities</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7299"></A
><a class="indexterm" name="AUTOID-7302"></A
><a class="indexterm" name="AUTOID-7305"></A
><a class="indexterm" name="AUTOID-7308"></A
>Again, for security, <em class="emphasis">sendmail</EM
> tries to avoid running as <em class="emphasis">root</EM
>
whenever possible. When delivering failed mail to your <em class="emphasis">~/dead.letter</EM
>
file, for example, it runs as you. If it finds itself in a situation
in which it must not be <em class="emphasis">root</EM
> but cannot otherwise decide on a real
user's identity, <em class="emphasis">sendmail</EM
> assumes the identity of the user
defined by the <code class="literal">DefaultUser</CODE
> (<code class="literal">u</CODE
>) option:</P
><p class="para"><blockquote class="screen"><pre class="screen">O DefaultUser=1:1</PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">uid</EM
> under which to run (the
number to the left of the colon) is
here defined to be 1 (for the user <em class="emphasis">daemon</EM
>).
The <em class="emphasis">gid</EM
> under which to run (the number to the right
of the colon) is here defined as 1
(for the group <em class="emphasis">daemon</EM
>).</P
><p class="para">The values given to these options may also be names:</P
><p class="para"><blockquote class="screen"><pre class="screen">O DefaultUser=daemon:daemon</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-7328"></A
>At security-conscious sites these are often set to
the user <em class="emphasis">nobody</EM
> and the group <em class="emphasis">nogroup</EM
>.
The <code class="literal">DefaultUser</CODE
> (<code class="literal">u</CODE
>) option is further documented in <a class="xref" href="ch34_08.htm" title="">Section 34.8.15</A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-6">13.2.6 The Default Logging Level</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7339"></A
><a class="indexterm" name="AUTOID-7341"></A
>Recall that the <code class="literal">DeliveryMode</CODE
> (<code class="literal">d</CODE
>) option 
told <em class="emphasis">sendmail</EM
> to run in the background.
Because it is running in the background,
<em class="emphasis">sendmail</EM
> should not print information about its
activities to your screen. On the other hand, you do want to
record information about its activities to help solve future
problems.</P
><p class="para">The method used by <em class="emphasis">sendmail</EM
> to record its activities is called <em class="emphasis">logging</EM
>.
[4]<a class="indexterm" name="AUTOID-7355"></A
><a class="indexterm" name="AUTOID-7357"></A
>
The setting of the <code class="literal">LogLevel</CODE
> (<code class="literal">L</CODE
>) option allows you to turn logging
completely off or to specify a logging level. The higher the
logging level, the more detailed the information that is logged. That is,
low levels 

log only serious problems, middle levels also log statistical
information, and high levels include debugging information.</P
><blockquote class="footnote"><p class="para">[4] The actual mechanism used is called <em class="emphasis">syslog</EM
>(3) and is described in 
<a class="xref" href="ch26_01.htm" title="Logging and Statistics">Chapter 26, <cite class="chapter">Logging and Statistics</CITE
></A
>.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">O LogLevel=9</PRE
></BLOCKQUOTE
></P
><p class="para">Here, we've chosen a level of 9. This is a middle level, which,
in addition to causing serious problems to be logged, also 
causes statistics such as message size to be logged.</P
><p class="para">Typically, logged information is written by the system into
a file called <em class="emphasis">syslog</EM
> by a means documented in <a class="xref" href="ch26_01.htm" title="Logging with syslog">Section 26.1, "Logging with syslog"</A
>.
The <code class="literal">LogLevel</CODE
> (<code class="literal">L</CODE
>) option is further documented in <a class="xref" href="ch34_08.htm" title="">Section 34.8.33</A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-7">13.2.7 Accept Old-Style Lists of Addresses</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7375"></A
><a class="indexterm" name="AUTOID-7378"></A
><a class="indexterm" name="AUTOID-7380"></A
><a class="indexterm" name="AUTOID-7383"></A
>The current standard for specifying multiple recipients is
to separate each address from the others with commas. Unfortunately,
this has not always been the standard;
old software may still exist that separates addresses with
spaces:</P
><p class="para"><blockquote class="screen"><pre class="screen">abe,george,andrew      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> new style</I
>
abe george andrew      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> old style</I
></PRE
></BLOCKQUOTE
></P
><p class="para">To prevent old software from breaking, you need to tell <em class="emphasis">sendmail</EM
>
that the use of spaces is acceptable and that if it finds such old-style lists,
it should replace the 
spaces with commas. You tell <em class="emphasis">sendmail</EM
>
this by specifying the <code class="literal">OldStyleHeaders</CODE
> (<code class="literal">o</CODE
>) option:<a class="indexterm" name="AUTOID-7394"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">O OldStyleHeaders=True</PRE
></BLOCKQUOTE
></P
><p class="para">The value is either
true (accept and convert) or false (don't accept). The <code class="literal">True</CODE
>
makes it true. In actual practice, only the first letter is recognized, and
either <code class="literal">T</CODE
> or <code class="literal">t</CODE
> will work. To turn it off,
use <code class="literal">F</CODE
> or <code class="literal">f</CODE
> (for false) or omit the entire
declaration. If you omit the true or false but include the option,
it defaults to true.
The <code class="literal">OldStyleHeaders</CODE
> (<code class="literal">o</CODE
>) option is further documented in <a class="xref" href="ch34_08.htm" title="">Section 34.8.44</A
>.&#13;</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SML2-CH-13-SECT-2-8">13.2.8 The Unquoted Space Replacement Character</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7410"></A
>Recall from
<a class="xref" href="ch08_01.htm" title="Addresses and Rules">Chapter 8, <cite class="chapter">Addresses and Rules</CITE
></A
>,
that any address can be split up into tokens
in the workspace. The address is then rewritten according to rules
specified in rule sets. After all the tokens have been
(possibly) rewritten, they are rejoined to form an address again.</P
><p class="para"><a class="indexterm" name="AUTOID-7414"></A
><a class="indexterm" name="AUTOID-7417"></A
>The <code class="literal">BlankSub</CODE
> (<code class="literal">B</CODE
>) option exists for those times when two adjoining
tokens are just words (rather than a word and a separating character).
For example, suppose the workspace began by containing the
following tokens:</P
><p class="para"><blockquote class="screen"><pre class="screen">a @ b . c</PRE
></BLOCKQUOTE
></P
><p class="para">Then suppose some rule always changed the last two tokens into
the single word <code class="literal">LOCAL</CODE
>. The result of rewriting would
look like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">a @ b LOCAL</PRE
></BLOCKQUOTE
></P
><p class="para">Here we have four tokens, the last two of which are text. The
question becomes: What do we insert between them? Unless you
tell <em class="emphasis">sendmail</EM
> to do otherwise, it always sticks
a space between them. Therefore the default is to join
these tokens together into this:</P
><p class="para"><blockquote class="screen"><pre class="screen">a@b LOCAL</PRE
></BLOCKQUOTE
></P
><p class="para">Because we set the <code class="literal">OldStyleHeaders</CODE
> (<code class="literal">o</CODE
>) option above to true,
this single (but odd) address wrongly becomes two:</P
><p class="para"><blockquote class="screen"><pre class="screen">a@b, LOCAL</PRE
></BLOCKQUOTE
></P
><p class="para">To prevent this kind of mishap, we use the <code class="literal">BlankSub</CODE
> (<code class="literal">B</CODE
>) option to
change the replacement character from a space to a dot:</P
><p class="para"><blockquote class="screen"><pre class="screen">O BlankSub=.                    # Replace unquoted spaces with a dot.</PRE
></BLOCKQUOTE
></P
><p class="para">With this declaration in the configuration file the previous
tokens are joined together like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">a@b.LOCAL</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-7445"></A
><a class="indexterm" name="AUTOID-7447"></A
><a class="indexterm" name="AUTOID-7449"></A
><a class="indexterm" name="AUTOID-7451"></A
><a class="indexterm" name="AUTOID-7453"></A
>This forms a single address, which is what is wanted.
But what
does the &quot;unquoted&quot; in the comment mean?</P
><p class="para">When parts of an address are surrounded in full quotation marks,
those parts are viewed by <em class="emphasis">sendmail</EM
> as a single token.
Therefore an address like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;abe lincoln&quot;@wash.dc.gov</PRE
></BLOCKQUOTE
></P
><p class="para">is tokenized like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;abe lincoln&quot;   @   wash   .   dc   .   gov</PRE
></BLOCKQUOTE
></P
><p class="para">When these tokens are joined back together, the quoted words
<code class="literal">abe</CODE
> and <code class="literal">lincoln</CODE
> are viewed by <em class="emphasis">sendmail</EM
> as one
token (with a space included), rather than two (with need
of a space replacement character).
[5]
The <code class="literal">BlankSub</CODE
> (<code class="literal">B</CODE
>) option is further documented in <a class="xref" href="ch34_08.htm" title="">Section 34.8.5</A
>.<a class="indexterm" name="AUTOID-7474"></A
>&#13;</P
><blockquote class="footnote"><p class="para">[5] Actually, the address is sent as is to another site. The <code class="literal">BlankSub</CODE
> (<code class="literal">B</CODE
>)
option at the other site causes the confusion, because the address
arrives there unquoted.</P
></BLOCKQUOTE
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch13_01.htm" title="13.1 Options: An Overview"><img src="../gifs/txtpreva.gif" alt="Previous: 13.1 Options: An Overview" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch13_03.htm" title="13.3 Testing the Options"><img src="../gifs/txtnexta.gif" alt="Next: 13.3 Testing the Options" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">13.1 Options: An Overview</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">13.3 Testing the Options</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
