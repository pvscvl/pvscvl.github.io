<html><head>
<title>[Chapter 30] 30.4 The Equates</TITLE>
<meta name="DC.title" content="sendmail"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T19:53:39Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-222-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch30_01.htm" title="30. Delivery Agents"><link rel="prev" href="ch30_03.htm" title="30.3 m4 Configuration Syntax"><link rel="next" href="ch30_05.htm#SML2-CH-30-SECT-5-2-1" title="30.5 Internally Defined Names"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail"><area shape="RECT" coords="467,0,514,18" href="../search/ssrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_03.htm" title="30.3 m4 Configuration Syntax"><img src="../gifs/txtpreva.gif" alt="Previous: 30.3 m4 Configuration Syntax" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 30<br>Delivery Agents</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch30_05.htm#SML2-CH-30-SECT-5-2-1" title="30.5 Internally Defined Names"><img src="../gifs/txtnexta.gif" alt="Next: 30.5 Internally Defined Names" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SML2-CH-30-SECT-4">30.4 The Equates</A
></H2
><p class="para"><a class="indexterm" name="SML2-CH-30-IX-DELIVERY-AGENTS-MTAS-EQUATES-FOR"></A
><a class="indexterm" name="SML2-CH-30-IX-EQUATES"></A
><a class="indexterm" name="AUTOID-28853"></A
>Recall that the form for the <code class="literal">M</CODE
> command is</P
><p class="para"><blockquote class="screen"><pre class="screen">M<code class="replaceable"><i>symname, equate, equate, equate, ...</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Each <code class="replaceable"><i>equate</I
></CODE
> expression is of the form</P
><p class="para"><blockquote class="screen"><pre class="screen">field=arg</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">field</CODE
> is one of those in 
<a class="xref" href="#SML2-CH-30-TAB-0" title="Delivery Agent Equates">Table 30.1</A
>.
Only the
first character of the <code class="literal">field</CODE
> is recognized. That is, all
of the following are equivalent:</P
><p class="para"><blockquote class="screen"><pre class="screen">S=21
Sender=21
SenderRuleSet=21</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">field</CODE
> is followed by more optional
whitespace, the mandatory <code class="literal">=</CODE
> character, optional whitespace,
and finally the <code class="literal">arg</CODE
>. The form that 
the <code class="replaceable"><i>arg</I
></CODE
> takes varies depending on the <code class="replaceable"><i>field</I
></CODE
>. It may
or may not be required.</P
><p class="para">Special characters can be embedded into the <code class="replaceable"><i>field</I
></CODE
> as shown in
<a class="xref" href="ch31_03.htm" title="Special Characters Allowed in Macro Text">Table 31.3</A
> of <a class="xref" href="ch31_03.htm" title="Syntax of the Configuration File Macro's Text">Section 31.3.2, "Syntax of the Configuration File Macro's Text"</A
>.
For example, the backslash notation can be used to embed commas
and a newline character into the <code class="literal">A=</CODE
> equate like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">...    A=eatmail -F0\,12\,99 -E\n</PRE
></BLOCKQUOTE
></P
><p class="para">The complete list of equates is shown in
<a class="xref" href="#SML2-CH-30-TAB-0" title="Delivery Agent Equates">Table 30.1</A
>.
A full description of each begins in the next section. They are presented in 
alphabetical order rather than in the order in which they would appear
in typical delivery agent definitions.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-30-TAB-0">Table 30.1: Delivery Agent Equates</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Equate</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Field Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Meaning</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">A=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Argv</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-1" title="">Section 30.4.1, A=</A
></TD
><td class="entry" rowspan="1" colspan="1">Delivery agent's command-line arguments</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">C=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Charset</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-2" title="">Section 30.4.2, C=</A
></TD
><td class="entry" rowspan="1" colspan="1">Default MIME character set (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">D=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Directory</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-3" title="">Section 30.4.3, D=</A
></TD
><td class="entry" rowspan="1" colspan="1">Paths to directories for execution (V8.6 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">E=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">EOL</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-4" title="">Section 30.4.4, E=</A
></TD
><td class="entry" rowspan="1" colspan="1">End-of-line string</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">F=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Flags</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-5" title="">Section 30.4.5, F=</A
></TD
><td class="entry" rowspan="1" colspan="1">Flags describing a delivery agent's behavior</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">L=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Linelimit</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-6" title="">Section 30.4.6, L=</A
></TD
><td class="entry" rowspan="1" colspan="1">Maximum line length (V8.1 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">M=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Maximum</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-7" title="">Section 30.4.7</A
></TD
><td class="entry" rowspan="1" colspan="1">Maximum message size</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">N=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Niceness</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-8" title="">Section 30.4.8, N=</A
></TD
><td class="entry" rowspan="1" colspan="1">How to <em class="emphasis">nice</EM
>(2) the agent (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">P=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Path</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-9" title="">Section 30.4.9, P=</A
></TD
><td class="entry" rowspan="1" colspan="1">Path to the delivery program</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">R=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Recipient</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-10" title="">Section 30.4.10, R=</A
></TD
><td class="entry" rowspan="1" colspan="1">Recipient rewriting rule set</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">S=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Sender</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-11" title="">Section 30.4.11, S=</A
></TD
><td class="entry" rowspan="1" colspan="1">Sender rewriting rule set</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">T=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Type</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-12" title="">Section 30.4.12, T=</A
></TD
><td class="entry" rowspan="1" colspan="1">Types for DSN diagnostics (V8.7 and above)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">U=</CODE
></TD
><td class="entry" rowspan="1" colspan="1">UID</TD
><td class="entry" rowspan="1" colspan="1"><a class="xref" href="#SML2-CH-30-SECT-4-13" title="">Section 30.4.13, U=</A
></TD
><td class="entry" rowspan="1" colspan="1">Run agent as uid:gid (V8.7 and above)</TD
></TR
></TBODY
></TABLE
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-1">30.4.1 A=</A
></H3
><p class="refpurpose">The argv for this delivery agent</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-28995"></A
>The program that is to be run (specified by the <code class="literal">P=</CODE
> equate) is given
its C language <code class="literal">char **argv</CODE
> array (list of command-line arguments)
by this <code class="literal">A=</CODE
> equate. 
This equate is traditionally the last one specified,
because, prior to V8.7, the <code class="literal">argv</CODE
> arguments were all those
from the <code class="literal">=</CODE
> to the end of the line:</P
><p class="para"><blockquote class="screen"><pre class="screen">Mlocal, P=/bin/mail, F=rlsDFMmnP, S=10, R=20, A=mail -d $u
                                                <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                                 <i class="lineannotation">prior to V8.7, argv to end of line <img src="../chars/rarr.gif" alt="-&gt;"></I
></PRE
></BLOCKQUOTE
></P
><p class="para">Beginning with V8.7, the <code class="literal">A=</CODE
> is treated like any other equate, in that
it ends at the end of line <em class="emphasis">or</EM
> at the first comma. The backslash character
can be used as a prefix to embed commas in the <code class="literal">A=</CODE
> equate.</P
><p class="para">Macros are expanded and may be used in this
<code class="literal">argv</CODE
> array.  For example,</P
><p class="para"><blockquote class="screen"><pre class="screen">A=mail -d $u</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">A=</CODE
> begins the declaration of the argument array.
The program that is specified by the <code class="literal">P=</CODE
> equate (<code class="literal">/bin/mail</CODE
>) 
will be executed with an <code class="literal">argv</CODE
> of</P
><p class="para"><blockquote class="screen"><pre class="screen">argv[0] = &quot;mail&quot;
argv[1] = &quot;-d&quot;              <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> switch means perform final delivery</I
>
argv[2] = &quot;fred&quot;            <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> where macro </I
>$u<i class="lineannotation"> contains &quot;fred&quot;</I
></PRE
></BLOCKQUOTE
></P
><p class="para">The macro value of <code class="literal">$u</CODE
> contains the current recipient name (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.36, $u</A
>). 
Another macro that commonly appears in <code class="literal">A=</CODE
> fields is <code class="literal">$h</CODE
>, the recipient host
(see <a class="xref" href="ch31_10.htm" title="">Section 31.10.17, $h</A
>).
You are, of course, free to use any macro you find necessary as a part
of this <code class="literal">argv</CODE
> array.
Note that <code class="literal">$u</CODE
> is special in that if it is missing, <em class="emphasis">sendmail</EM
> will
speak SMTP to the delivery agent (see <a class="xref" href="#SML2-CH-30-SECT-4-1-3" title="$u in A=">Section 30.4.1.3, "$u in A="</A
>).
Also note that any arguments in excess of the maximum number defined by MAXPV
(see <a class="xref" href="ch18_08.htm" title="">Section 18.8.19, MAX...</A
>), usually 40, are silently ignored.&#13;</P
><div class="refsect2"><h4 class="refsect2"><a class="title" name="SML2-CH-30-SECT-4-1-1">30.4.1.1 m4 A= definitions</A
></H4
><p class="para">Under V8 <em class="emphasis">sendmail</EM
>'s m4 configuration you can define
the <code class="literal">A=</CODE
> equate using the values shown in the leftmost column of
<a class="xref" href="#SML2-CH-30-TAB-1" title="m4 Modification of A= Equates">Table 30.2</A
>.
For example, to modify the <code class="literal">A=</CODE
> equate for the <code class="literal">local</CODE
>
delivery agent, 

you might include this definition in your <code class="literal">mc</CODE
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`LOCAL_MAILER_ARGS', `put.local -d $u -l')dnl</PRE
></BLOCKQUOTE
></P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-30-TAB-1">Table 30.2: m4 Modification of A= Equates</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">define()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Agent</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">MAILER()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Default A=</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">deliver -e -m $h -- $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_BB_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">cyrusbb</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">deliver -e -m $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">mailfax $u $h $f</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">mail -d $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_ARGS</TD
><td class="entry" rowspan="1" colspan="1">prog</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">sh -c $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL11_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">mail11 $g $x $h $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PH_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">ph</TD
><td class="entry" rowspan="1" colspan="1">phquery</TD
><td class="entry" rowspan="1" colspan="1">phquery -- $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">POP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">pop $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">procmail -m $h $f $u</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">IPC $h</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP8_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">smtp8</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">IPC $h</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">ESMTP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">esmtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">IPC $h</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">RELAY_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">relay</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">IPC $h</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">inews -m -h -n</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">uux - -r -a$g -gC $h!rmail ($u)</TD
></TR
></TBODY
></TABLE
><p class="para">In general, the definitions in the <em class="emphasis">_CF_DIR_/ostype</EM
> subdirectory are
pretuned in a way that is best for most sites. 
If you want to make changes, remember that
each definition that you put in your <code class="literal">mc</CODE
> file <em class="emphasis">replaces</EM
> the
definition in <em class="emphasis">_CF_DIR_/ostype</EM
>. Therefore it's best to copy an existing definition
and modify it for your own use. Just be sure you don't omit something important.
(The <em class="emphasis">_CF_DIR_</EM
> prefix is described in <a class="xref" href="ch19_02.htm" title="Maintain local files with _CF_DIR_">Section 19.2.1</A
>.)</P
></DIV
><div class="refsect2"><h4 class="refsect2"><a class="title" name="SML2-CH-30-SECT-4-1-2">30.4.1.2 $h and other arguments in A=[IPC]</A
></H4
><p class="para">For network delivery via the <code class="literal">P=[IPC]</CODE
> delivery agent, the <code class="literal">A=</CODE
>
equate is usually declared like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">A=IPC $h</PRE
></BLOCKQUOTE
></P
><p class="para">The value in <code class="literal">$h</CODE
> is the value returned by rule set 0's
<code class="literal">$@</CODE
> operator and is usually the name of the host to which
<em class="emphasis">sendmail</EM
> should connect. 
During delivery the <em class="emphasis">sendmail</EM
> program expands this hostname
into a possible list of MX records.
[3]
It attempts delivery
to each MX record. If all delivery attempts fail and if
the V8 <code class="literal">FallbackMXhost</CODE
> (<code class="literal">V</CODE
>) option (see <a class="xref" href="ch34_08.htm" title="">Section 34.8.25, FallbackMXhost (V)</A
>)
is set, delivery is attempted to that fallback host. In all cases, if there are
no MX records, delivery is attempted to the A record instead.</P
><blockquote class="footnote"><p class="para">[3] Unless the V8.8 <code class="literal">F=0</CODE
> flag is set (see <a class="xref" href="ch30_08.htm" title="">Section 30.8.1, F=0</A
>).</P
></BLOCKQUOTE
><p class="para">Beginning with V8 <em class="emphasis">sendmail</EM
>, <code class="literal">$h</CODE
> (possibly as returned by rule set 0)
can be a colon-separated list of hosts. The <em class="emphasis">sendmail</EM
> program
attempts to connect to each in turn, left to right:</P
><p class="para"><blockquote class="screen"><pre class="screen">A=IPC <code class="replaceable"><i>hostA</I
></CODE
>:<code class="replaceable"><i>hostB</I
></CODE
>:<code class="replaceable"><i>hostC</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, it tries to connect to <code class="replaceable"><i>hostA</I
></CODE
> first.
If that fails, it next tries <code class="replaceable"><i>hostB</I
></CODE
>, and so on.
As usual, trying a host means trying its MX records first, or
its A record if there are no MX records.</P
><p class="para">The host (as <code class="literal">$h</CODE
>) is usually the only argument
given to <code class="literal">IPC</CODE
>. But, strictly speaking, <code class="literal">IPC</CODE
> can accept
three arguments, like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">A=IPC <code class="replaceable"><i>hostlist</I
></CODE
> <code class="replaceable"><i>port</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>port</I
></CODE
> (third argument) is usually omitted and so
defaults to 25. However, a port number can be included to force
<em class="emphasis">sendmail</EM
> to connect on a different port.</P
><p class="para">To illustrate, consider the need to force mail to a gateway
machine to be always delivered on a particular port. First,
design a new delivery agent that uses <code class="literal">IPC</CODE
> for transport.</P
><p class="para"><blockquote class="screen"><pre class="screen">Mgateway, P=[IPC], ..., A=IPC gateway.domain $h</PRE
></BLOCKQUOTE
></P
><p class="para">Here, any mail that selects the <code class="literal">gateway</CODE
> delivery agent
is transported over the network (the <code class="literal">[IPC]</CODE
>) to
the machine <code class="literal">gateway.domain</CODE
>. The port number is carried
in <code class="literal">$h</CODE
>, which usually carries the hostname.</P
><p class="para">Next, design a rule in rule set 0 that selects this delivery agent:</P
><p class="para"><blockquote class="screen"><pre class="screen">R$+ &lt; @ $+ .gateway &gt; $*            $#gateway $@ 26 $: $1 &lt; @ $2 .gateway&gt; $3</PRE
></BLOCKQUOTE
></P
><p class="para">This rule selects the <code class="literal">gateway</CODE
> delivery agent for any address
that ends in <code class="literal">.gateway</CODE
>. The host part that is returned by the <code class="literal">$@</CODE
>
is the port number to use. The <code class="literal">$:</CODE
> part (the address) is
passed in the envelope. Note that the gateway also has to be
listening on the same port for this to work.</P
><p class="para">In the event that you wish to carry the port number in a macro,
you may do so by specifying the host with <code class="literal">$h</CODE
>. For example,</P
><p class="para"><blockquote class="screen"><pre class="screen">Mgateway, P=[IPC], ..., A=IPC <code class="userinput"><b>$h $P</B
></CODE
>
R$+ &lt; @ $+ .gateway &gt; $*            $#gateway $@ <code class="userinput"><b>$2</B
></CODE
> $: $1 &lt; @ $2 .gateway&gt; $3</PRE
></BLOCKQUOTE
></P
><p class="para">Then <em class="emphasis">sendmail</EM
> can be run with the command-line argument</P
><p class="para"><blockquote class="screen"><pre class="screen">-MP26</PRE
></BLOCKQUOTE
></P
><p class="para">to cause <code class="literal">gateway</CODE
> mail to go out on port 26.</P
></DIV
><div class="refsect2"><h4 class="refsect2"><a class="title" name="SML2-CH-30-SECT-4-1-3">30.4.1.3 $u in A=</A
></H4
><p class="para">The <code class="literal">$u</CODE
> macro is special in the <code class="literal">A=</CODE
> equate's field.
If <code class="literal">$u</CODE
> <em class="emphasis">does not</EM
> appear in the array, <em class="emphasis">sendmail</EM
> assumes
the program in <code class="literal">P=</CODE
> equate speaks SMTP. Consequently, you
should <em class="emphasis">never</EM
> use a
<code class="literal">$u</CODE
> when defining mail delivery agents that
speak SMTP. All agents that use <code class="literal">[IPC]</CODE
>
or <code class="literal">[TCP]</CODE
> in their <code class="literal">P=</CODE
> equate's field must use SMTP.</P
><p class="para">If <code class="literal">$u</CODE
> <em class="emphasis">does</EM
> appear in the array, <em class="emphasis">sendmail</EM
> 
assumes that the program in <code class="literal">P=</CODE
> does <em class="emphasis">not</EM
> speak SMTP.</P
><p class="para">If <code class="literal">$u</CODE
> appears and the <code class="literal">F=m</CODE
> delivery agent flag
is also specified, then the argument containing <code class="literal">$u</CODE
>
is repeated as many times as there are recipients. For example,
a typical <code class="literal">uucp</CODE
> delivery agent definition looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">Muucp, P=/bin/uux, F=<code class="userinput"><b>m</B
></CODE
>sDFMhuU, S=13, R=23, A=uux - -r $h!rmail (<code class="userinput"><b>$u</B
></CODE
>)
                     <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>                                          <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                     <i class="lineannotation">note</I
>                                      <i class="lineannotation">note</I
></PRE
></BLOCKQUOTE
></P
><p class="para">In the above, the <code class="literal">m</CODE
> flag is set in the <code class="literal">F=</CODE
> equate's field,
which tells <em class="emphasis">sendmail</EM
> that this delivery agent can
deliver to multiple recipients simultaneously.
The <code class="literal">$u</CODE
> macro is also included as one of the arguments specified
by the <code class="literal">A=</CODE
> command-line array. Thus if mail is sent with this
delivery agent to multiple recipients, say <code class="literal">jim</CODE
>, <code class="literal">bill</CODE
>,
and <code class="literal">joe</CODE
>, then the <code class="literal">($u)</CODE
> argument
[4]
is repeated
three times, once for each recipient:</P
><blockquote class="footnote"><p class="para">[4] When <code class="literal">$u</CODE
> is used as part of a UUCP delivery agent's
<code class="literal">F=A</CODE
> array, it should be parenthesized. This is what the
<em class="emphasis">uux</EM
>(1) program expects.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">uux - -r $h!rmail (jim) (bill) (joe)</PRE
></BLOCKQUOTE
></P
></DIV
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-2">30.4.2 C=</A
></H3
><p class="refpurpose">The default MIME character set</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29267"></A
><a class="indexterm" name="AUTOID-29269"></A
><a class="indexterm" name="AUTOID-29272"></A
><a class="indexterm" name="AUTOID-29274"></A
>The <code class="literal">C=</CODE
> equate (introduced with V8.7 <em class="emphasis">sendmail</EM
>)
is used to define a default character set for use with
the MIME <code class="literal">Content-Type:</CODE
> header (see <a class="xref" href="ch35_10.htm" title="">Section 35.10.9, Content-Type:</A
>).
If it is present, its value supersedes that of the <code class="literal">DefaultCharSet</CODE
> option
(see <a class="xref" href="ch34_08.htm" title="">Section 34.8.14, DefaultCharSet</A
>).</P
><p class="para">Note that the <code class="literal">C=</CODE
> equate is examined only when the delivery agent is selected for
a sender address. </P
><p class="para">When a mail message is converted from 8 to 7 bits
(see the <code class="literal">EightBitMode</CODE
> (<code class="literal">8</CODE
>) option in <a class="xref" href="ch34_08.htm" title="">Section 34.8.22, EightBitMode (8)</A
>), it is important  
that the result looks like a MIME message. V8.7 <em class="emphasis">sendmail</EM
> first
outputs the following header (if one is not already present):  </P
><p class="para"><blockquote class="screen"><pre class="screen">MIME-Version: 1.0</PRE
></BLOCKQUOTE
></P
><p class="para">Next, V8.7 <em class="emphasis">sendmail</EM
> looks for a <code class="literal">Content-Type:</CODE
> header
(see <a class="xref" href="ch35_10.htm" title="">Section 35.10.9</A
>).
If none is found, the following is inserted, where <code class="replaceable"><i>charset</I
></CODE
>
is the value declared for the <code class="literal">C=</CODE
> equate of the sender's delivery
agent:</P
><p class="para"><blockquote class="screen"><pre class="screen">Content-Type: text/plain; charset=<code class="replaceable"><i>charset</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">If the argument to the <code class="literal">C=</CODE
> is missing, the following
error is printed and the <code class="literal">C=</CODE
> becomes undefined:</P
><p class="para"><blockquote class="screen"><pre class="screen">mailer <code class="replaceable"><i>agent_name</I
></CODE
>: null charset</PRE
></BLOCKQUOTE
></P
><p class="para">If the <code class="literal">C=</CODE
> equate
is undefined in your configuration file, <code class="replaceable"><i>charset</I
></CODE
>
defaults to the value of the <code class="literal">DefaultCharSet</CODE
> option. If both
are undefined, the value for <code class="replaceable"><i>charset</I
></CODE
> becomes &quot;unknown-8bit.&quot;</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-3">30.4.3 D=</A
></H3
><p class="refpurpose">Paths to directories for execution</P
>(V8.6 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29319"></A
><a class="indexterm" name="AUTOID-29321"></A
>Ordinarily, whenever <em class="emphasis">sendmail</EM
> executes a program via the
<code class="literal">prog</CODE
> delivery agent, it does so from within the <em class="emphasis">sendmail</EM
>
queue directory. One unfortunate side effect of this behavior
is that shell scripts written with the C-shell (and possibly
other programs) may fail
because they cannot <em class="emphasis">stat</EM
>(2) the current directory.
To alleviate this problem, V8 <em class="emphasis">sendmail</EM
> has introduced the
<code class="literal">D=</CODE
> delivery agent equate. This new equate allows you
to specify a series of directories for <em class="emphasis">sendmail</EM
> to
attempt to <em class="emphasis">chdir</EM
>(2) into
before invoking the delivery program.</P
><p class="para">The form of the <code class="literal">D=</CODE
> equate looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">D=<code class="replaceable"><i>path1</I
></CODE
>:<code class="replaceable"><i>path2</I
></CODE
>...</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">D=</CODE
> is followed by a colon-separated series of
directory pathnames. Before running the delivery program,
<em class="emphasis">sendmail</EM
> tries to <em class="emphasis">chdir</EM
>(2) into each in turn,
leftmost to rightmost, until it succeeds. If it does not
succeed with any of the directories (perhaps
because none of them exist), <em class="emphasis">sendmail</EM
> remains in
its queue directory.</P
><p class="para">One recommended setting for the <code class="literal">D=</CODE
> equate is this:</P
><p class="para"><blockquote class="screen"><pre class="screen">D=$z:/tmp</PRE
></BLOCKQUOTE
></P
><p class="para">Here, <em class="emphasis">sendmail</EM
> first tries to <em class="emphasis">chdir</EM
>(2) into the
directory defined by the <code class="literal">$z</CODE
> macro (see <a class="xref" href="ch31_10.htm" title="">Section 31.10.46, $z</A
>).
That macro either
contains the full pathname of the recipient's home directory or
is NULL. If it is NULL or if the home directory is unavailable,
the <em class="emphasis">chdir</EM
>(2) fails, and <em class="emphasis">sendmail</EM
>
instead does a <em class="emphasis">chdir</EM
>(2) to the <em class="emphasis">/tmp</EM
> directory.</P
><p class="para">In using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, the value given
to <code class="literal">D=</CODE
> can be easily changed only for 
the <code class="literal">prog</CODE
> delivery agent, which defaults to</P
><p class="para"><blockquote class="screen"><pre class="screen">D=$z:/</PRE
></BLOCKQUOTE
></P
><p class="para">For <code class="literal">prog</CODE
> it can be redefined by using LOCAL_SHELL_DIR, as, for example,</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`LOCAL_SHELL_DIR', `$z:/var/tmp')dnl
MAILER(local)</PRE
></BLOCKQUOTE
></P
><p class="para">Here, LOCAL_SHELL_DIR is given a new value before the <code class="literal">prog</CODE
> delivery
agent is loaded (via the <code class="literal">local</CODE
>).</P
><p class="para">For all other delivery agents you must first
copy an existing delivery agent definition, then
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1, "Tuning Without an Appropriate Keyword"</A
>.</P
><p class="para">If the <code class="literal">D=</CODE
> argument is missing, the following error is printed
and the <code class="literal">D=</CODE
> becomes undefined:</P
><p class="para"><blockquote class="screen"><pre class="screen">mailer <code class="replaceable"><i>agent_name</I
></CODE
>: null working directory</PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">chdir</EM
>(2) process can be traced with the 
<code class="literal">-d11.20</CODE
> debugging switch (see <a class="xref" href="ch37_05.htm" title="">Section 37.5.46, -d11.20</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-4">30.4.4 E=</A
></H3
><p class="refpurpose">The end-of-line string</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29389"></A
><a class="indexterm" name="AUTOID-29391"></A
>The <code class="literal">E=</CODE
> equate specifies the end-of-line character or characters.
Those characters are generated by <em class="emphasis">sendmail</EM
> for outgoing messages
and recognized by <em class="emphasis">sendmail</EM
> for incoming messages.</P
><p class="para">The end-of-line characters are defined with the <code class="literal">E=</CODE
>
equate as backslash-escaped control characters, such as</P
><p class="para"><blockquote class="screen"><pre class="screen">E=\r\n</PRE
></BLOCKQUOTE
></P
><p class="para">Prior to V8.8
the default end-of-line string, if the <code class="literal">E=</CODE
> field was missing,
was the C language newline character, <code class="literal">\n</CODE
>.
[5]
Beginning with V8.8 <em class="emphasis">sendmail</EM
>, the default is <code class="literal">\n</CODE
> for all
but delivery agents that speak SMTP, in which case the default is
<code class="literal">\r\n</CODE
>.</P
><blockquote class="footnote"><p class="para">[5] On some NeXT computers (prior to OS version 2.0)
the default E= terminator is <code class="literal">\r\n</CODE
>.
This can cause serious problems when used with some non-TCP delivery
agents like UUCP. If you have a system that does this, you can
override that improper default with <code class="literal">E=\n</CODE
>.</P
></BLOCKQUOTE
><p class="para">In general, delivery agents that speak SMTP (those that <em class="emphasis">lack</EM
>
a <code class="literal">$u</CODE
> in the <code class="literal">A=</CODE
> argument array, should have their
end-of-line field set to <code class="literal">E=\r\n</CODE
> (for a carriage return/line feed
pair). 
[6]
Delivery agents that do not speak
SMTP (those that <em class="emphasis">include</EM
> a <code class="literal">$u</CODE
> in the <code class="literal">A=</CODE
> argument array)
should have their
end-of-line field set to <code class="literal">E=\n</CODE
> (for a lone linefeed character).</P
><blockquote class="footnote"><p class="para">[6] line feed is the same ASCII character as newline.</P
></BLOCKQUOTE
><p class="para">In using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, the value given
to <code class="literal">E=</CODE
> cannot be easily changed. It is supplied to
the MAILER(smtp) delivery agents as <code class="literal">\r\n</CODE
> but is left as the default <code class="literal">\n</CODE
> for
all others.
If you need to change this value at the m4 level, you must first
copy an existing delivery agent definition, then
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
><p class="para">If the <code class="literal">E=</CODE
> equate's argument is missing, the following error message is printed
and the <code class="literal">E=</CODE
> becomes undefined:</P
><p class="para"><blockquote class="screen"><pre class="screen">mailer <code class="replaceable"><i>agent_name</I
></CODE
>: null end-of-line string</PRE
></BLOCKQUOTE
></P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-5">30.4.5 F=</A
></H3
><p class="refpurpose">Flags describing a delivery agent's behavior</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29441"></A
><a class="indexterm" name="AUTOID-29443"></A
>The <code class="literal">F=</CODE
> equate is probably more fraught with peril than the others.
The flags specified with <code class="literal">F=</CODE
> tell <em class="emphasis">sendmail</EM
> how the
delivery agent will behave and what its needs will be.
These flags are used in one or more of three ways:</P
><p class="para">First, if a header definition relies conditionally on a flag:</P
><p class="para"><blockquote class="screen"><pre class="screen">H?<code class="userinput"><b>P</B
></CODE
>?Return-Path: &lt;$g&gt;
  <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
  <i class="lineannotation">apply if P flag specified in F= equate.</I
></PRE
></BLOCKQUOTE
></P
><p class="para">and if that flag is listed as a part of the <code class="literal">F=</CODE
> equate:</P
><p class="para"><blockquote class="screen"><pre class="screen">Mlocal, P=/bin/mail, F=rlsDFMmn<code class="userinput"><b>P</B
></CODE
>, S=10, R=20, A=mail -d $u
                               <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                               <i class="lineannotation">apply in header</I
></PRE
></BLOCKQUOTE
></P
><p class="para">then that header is included
in all mail messages that are sent via this delivery agent.</P
><p class="para">Second, if a delivery agent needs a special command-line argument that
<em class="emphasis">sendmail</EM
> can produce for it but requires that argument
only under special circumstances, selected <code class="literal">F=</CODE
> flags can
produce that result. For example, the <code class="literal">F=f</CODE
> flag specifies
that the delivery agent needs a <code class="literal">-f</CODE
> command-line
switch when it is forwarding network mail.</P
><p class="para">Third, the <code class="literal">F=</CODE
> flags also tell <em class="emphasis">sendmail</EM
> how this particular
delivery agent behaves. For example, it performs final
delivery or requires uppercase preserved for usernames.</P
><p class="para">Many flags have special meaning to <em class="emphasis">sendmail</EM
>; others are strictly user-defined. All of the flags are
detailed at the end of this chapter (<a class="xref" href="ch30_08.htm" title="Alphabetized F= Flags">Section 30.8, "Alphabetized F= Flags"</A
>).</P
><p class="para">Note that whitespace characters cannot be used as flags. Also note that
flags OR together (they are really just bits), so they can be declared
separately, for clarity, as in the following:</P
><p class="para"><blockquote class="screen"><pre class="screen">F=D,     # include Date: header if not present
F=F,     # include From: header if not present
F=7,     # strip the hi bit when delivering</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;Or they can be declared all together, with no change in meaning or effect, like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">F=DF7,</PRE
></BLOCKQUOTE
></P
><p class="para">Note that the argument following
the <code class="literal">F=</CODE
> is optional, and an empty declaration is silently ignored.
Also note that the comma can be used as a flag by prefixing it with 
a backslash.
&#13;</P
></DIV
><div class="refsect1"><h4 class="refsect1"><a class="title" name="SML2-CH-30-SECT-4-5-1">30.4.5.1 </A
>m4 modification of F=</H4
><p class="para">When using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, you can modify various flags
for inclusion with most delivery agents. As shown in
<a class="xref" href="#SML2-CH-30-TAB-2" title="m4 Modification of F= Equates">Table 30.3</A
>
some modifications are made by appending the new flags to the original flags.
Others are made by replacing a few flags with new ones and appending the result
to the originals. For example, the following declaration:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`LOCAL_MAILER_FLAGS', `f')dnl</PRE
></BLOCKQUOTE
></P
><p class="para">results in these flags being defined for the <code class="literal">local</CODE
> delivery agent:</P
><p class="para"><blockquote class="screen"><pre class="screen">lsDFMAwq5:/|@f</PRE
></BLOCKQUOTE
></P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-30-TAB-2">Table 30.3: m4 Modification of F= Equates</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">define()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Agent</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">MAILER()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Append to</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Replace</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">lsDFMnPq</CODE
></TD
><td class="entry" rowspan="1" colspan="1">5@A</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">cyrusbb</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">lsDFMnPq</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">DFMhu</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">lsDFMAwq5:/|@</CODE
></TD
><td class="entry" rowspan="1" colspan="1">rmn</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">prog</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">lsDFMoq</CODE
></TD
><td class="entry" rowspan="1" colspan="1">eu</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL11_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal"></CODE
></TD
><td class="entry" rowspan="1" colspan="1">nsFx</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PH_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">ph</TD
><td class="entry" rowspan="1" colspan="1">phquery</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">nrDFM</CODE
></TD
><td class="entry" rowspan="1" colspan="1">ehmu</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">POP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">lsDFMq</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Penu</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">DFMm</CODE
></TD
><td class="entry" rowspan="1" colspan="1">Shu</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMuX</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">esmtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMuXa</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">smtp8</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMuX8</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">relay</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMuXa8</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal"></CODE
></TD
><td class="entry" rowspan="1" colspan="1">rlsDFMmn</TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">DFMhuUd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">uucp-old</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">DFMhuUd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">suucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMhuUd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">uucp-new</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMhuUd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">uucp-dom</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMhuUd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">uucp-uudom</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">mDFMhuUd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
></TBODY
></TABLE
><p class="para">&#13;To append to flags or to replace them, use the appropriate definition from the
left-most column of the table and make sure your definition precedes
the MAILER <em class="emphasis">m4</EM
> command, for example,</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`SMTP_MAILER_FLAGS', `P')dnl                 <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> first</I
>
MAILER(smtp)                                        <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> second</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If you reverse them, the <em class="emphasis">define</EM
> will be silently ignored.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-6">30.4.6 L=</A
></H3
><p class="refpurpose">Maximum line length</P
>(V8.1 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29659"></A
><a class="indexterm" name="AUTOID-29661"></A
><a class="indexterm" name="AUTOID-29663"></A
>The <code class="literal">L=</CODE
> equate is used to limit the length of text lines
in the body of a mail message. If this equate is omitted
and if the delivery agent has the obsolete <code class="literal">F=L</CODE
> flag set
(see <a class="xref" href="ch30_08.htm" title="">Section 30.8.29, F=L</A
>),
<em class="emphasis">sendmail</EM
> defaults to SMTPLINELIM (990) as defined
in <em class="emphasis">conf.h</EM
> (see <a class="xref" href="ch18_08.htm" title="">Section 18.8.43, SMTPLINELIM</A
>).
If the <code class="literal">F=L</CODE
> is clear (as it is in modern configuration
files), <em class="emphasis">sendmail</EM
> defaults to 0.
The <code class="literal">F=L</CODE
> is honored for compatibility with older versions of
<em class="emphasis">sendmail</EM
> that lack this <code class="literal">L=</CODE
> equate.</P
><p class="para">Limiting line length causes overly long lines to be split.
When an output line is split, the text up to the split
is first transmitted, followed by the <code class="literal">!</CODE
> character.
After that the characters defined by the <code class="literal">E=</CODE
> equate
are transmitted. A line may be split into two or more pieces.
For example, consider the following text from the body of a 
mail message:</P
><p class="para"><blockquote class="screen"><pre class="screen">The maximum line length for SMTP mail is 990 characters.
A delivery agent speaks
SMTP when the $u macro is omitted from the A= equate.</PRE
></BLOCKQUOTE
></P
><p class="para">A delivery agent could limit line length to 20 characters with
a declaration of</P
><p class="para"><blockquote class="screen"><pre class="screen">L=20</PRE
></BLOCKQUOTE
></P
><p class="para">With that limit, the above text would be split during transmission into
the following lines:</P
><p class="para"><blockquote class="screen"><pre class="screen">The maximum line len!
gth for SMTP mail is!
990 characters.
But that length is o!
nly enforced if the !
F=L flag is included
in a delivery agent !
definition. A delive!
ry agent speaks
SMTP when the $u mac!
ro is omitted from t!
he A= equate.</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;Limiting the line length can find application with programs that can't handle
long lines. A 40-character braille print-driving program might be one example.</P
><p class="para">If the argument to <code class="literal">L=</CODE
> is missing or if it evaluates to 0 or less,
the maximum line limit is set to zero, in which case no limit is enforced.</P
><p class="para">In using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration,
the default for the <code class="literal">smtp</CODE
>, <code class="literal">esmtp</CODE
>, and <code class="literal">smtp8</CODE
> delivery
agents is 990. The default for the <code class="literal">relay</CODE
> delivery agent is 2040.
The default for all other delivery agents is 0.
To change the default at the m4 level,
copy an existing delivery agent definition and 
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-7">30.4.7 M=</A
></H3
><p class="refpurpose">Maximum message size</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29705"></A
><a class="indexterm" name="AUTOID-29707"></A
><a class="indexterm" name="AUTOID-29710"></A
>The <code class="literal">M=</CODE
> equate is used to limit the total
size (header and body combined) of messages handled
by a delivery agent. The form for the <code class="literal">M=</CODE
> equate is</P
><p class="para"><blockquote class="screen"><pre class="screen">M=<code class="replaceable"><i>nbytes</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="replaceable"><i>nbytes</I
></CODE
> is the ASCII representation of 
an integer that specifies the largest size in bytes that
can be transmitted. If <code class="replaceable"><i>nbytes</I
></CODE
> is missing, or if the
entire <code class="literal">M=</CODE
> equate is missing, <code class="replaceable"><i>nbytes</I
></CODE
> becomes
zero. If the value is zero, no checking is done for a maximum.</P
><p class="para">If the size of the message exceeds the limit specified, an error
message is returned (bounced) that looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">--- Transcript of session follows ---
552 &lt;<code class="replaceable"><i>recipient</I
></CODE
>&gt;... Message is too large; <code class="replaceable"><i>nbytes</I
></CODE
> bytes max</PRE
></BLOCKQUOTE
></P
><p class="para">Bounced mail includes only a copy of the headers. The body is specifically
not bounced. The DSN status is set to 5.2.3 (see RFC1893).</P
><p class="para">This equate is usually used with UUCP agents, where the cost
of telephone connections is of concern. It may also find
application in mail to files, where disk space is limited.</P
><p class="para">Prior to V8 <em class="emphasis">sendmail</EM
>,
care had to be used to avoid setting <code class="literal">M=</CODE
> to a non-zero value when
the delivery agent had the <code class="literal">F=e</CODE
> flag set. That flag tells
<em class="emphasis">sendmail</EM
> that the delivery agent is <em class="emphasis">expensive</EM
>. If the
<code class="literal">c</CODE
> option is also set, expensive mail is queued
rather than delivered. A problem arose because the size of
the message was ignored when it was delivered from the queue, so
no queued messages were ever bounced for exceeding
the <code class="literal">M=</CODE
> limit.  This bug is fixed in V8 <em class="emphasis">sendmail</EM
>.&#13;</P
></DIV
><div class="refsect1"><h4 class="refsect1"><a class="title" name="SML2-CH-30-SECT-4-7-1">30.4.7.1 </A
>m4 modifications of M=</H4
><p class="para">In using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, the maximum message size can
be changed by using the definitions listed in the leftmost column of
<a class="xref" href="#SML2-CH-30-TAB-3" title="m4 Modification of M= Equates">Table 30.4</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-30-TAB-3">Table 30.4: m4 Modification of M= Equates</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">define()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Agent</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">MAILER()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Default M=</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">cyrusbb</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">prog</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">ph</TD
><td class="entry" rowspan="1" colspan="1">phquery</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">esmtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">smtp8</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">relay</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">0</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">uucp-old</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">suucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">uucp-new</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">uucp-dom</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">uucp-uudom</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">100000</TD
></TR
></TBODY
></TABLE
><p class="para">To change a maximum size, place your definition before
the MAILER command in your <code class="literal">mc</CODE
> file. For example,
here is one way to increase the limit on UUCP traffic to
a more reasonable one million:</P
><p class="para"><blockquote class="screen"><pre class="screen">define(`UUCP_MAILER_MAX', `1000000')dnl
MAILER(`uucp')</PRE
></BLOCKQUOTE
></P
><p class="para">To change the limit for agents that lack a definition,
copy an existing delivery agent definition, then
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-8">30.4.8 N=</A
></H3
><p class="refpurpose">How to <em class="emphasis">nice</EM
>(3) the agent</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29869"></A
><a class="indexterm" name="AUTOID-29871"></A
>The <code class="literal">N=</CODE
> equate is used to give a delivery
agent a priority in relation to other processes.
The mechanism is discussed in the
online manual for <em class="emphasis">nice</EM
>(3).</P
><p class="para">&#13;The form for the <code class="literal">N=</CODE
> equate looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">N=<code class="replaceable"><i>incr</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, <code class="replaceable"><i>incr</I
></CODE
> is a signed integer expression that will adjust
the &quot;niceness&quot; up or down. If <code class="replaceable"><i>incr</I
></CODE
> is zero or missing,
the niceness of the delivery agent is unchanged.
Positive numbers reduce system priority. Negative
numbers increase it.</P
><p class="para">One possible application for the <code class="literal">N=</CODE
> equate might be with Usenet
news. Because news seldom needs to flow as quickly as normal email,
its delivery agent (<code class="literal">usenet</CODE
>) can be forced to run at a low
system priority:</P
><p class="para"><blockquote class="screen"><pre class="screen">Musenet, P=/usr/lib/news/inews, F=rlsDFMmn, M=10000, <code class="userinput"><b>N=10,</B
></CODE
> A=inews -m -h -n</PRE
></BLOCKQUOTE
></P
><p class="para">To change the niceness at the m4 level,
copy an existing delivery agent definition and 
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-9">30.4.9 P=</A
></H3
><p class="refpurpose">Path to the delivery agent</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-29899"></A
><a class="indexterm" name="AUTOID-29901"></A
>The <code class="literal">P=</CODE
> equate specifies the full pathname of the
program that will act as the delivery agent. The form
for the <code class="literal">P=</CODE
> equate looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">P=<code class="replaceable"><i>path</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">If <code class="replaceable"><i>path</I
></CODE
> is missing, <em class="emphasis">sendmail</EM
> will print the following
error message and set  <code class="literal">P=</CODE
> to NULL.</P
><p class="para"><blockquote class="screen"><pre class="screen">mailer <code class="replaceable"><i>agent_name</I
></CODE
>: empty path name</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>path</I
></CODE
> can also be one of three names 
that are defined internally to <em class="emphasis">sendmail</EM
>.
Those internally defined names 
are <code class="literal">[IPC]</CODE
>, which tells <em class="emphasis">sendmail</EM
> 
to forward
mail over a kernel-supported (usually TCP/IP) network;
<code class="literal">[FILE]</CODE
>, which tells <em class="emphasis">sendmail</EM
>
to deliver to a file; and <code class="literal">[LPC]</CODE
>, which is used for
debugging.</P
><dl class="variablelist"><dt class="term"><em class="emphasis">P=path</EM
></DT
><dd class="listitem"><p class="para">When the <code class="replaceable"><i>path</I
></CODE
> begins with a slash character
(when it is a full pathname), <em class="emphasis">sendmail</EM
> first
forks (creates a copy of itself), and then the child process 
(the copy) execs (replaces itself with)
the program. The argument vector (<em class="emphasis">argv</EM
>, or command-line
arguments) supplied to the program is specified by the <code class="literal">A=</CODE
>
equate (see <a class="xref" href="#SML2-CH-30-SECT-4-1" title="">Section 30.4.1</A
>). The program inherits the environment
[7]
of <em class="emphasis">sendmail</EM
>
and has its standard input and output connected to the parent process
(the <em class="emphasis">sendmail</EM
> that forked).
The message (header and body) is  fed to the program through
its standard input. The envelope (sender and recipient addresses)
may or may not be provided on the command line, depending on the
nature of the program as defined by its <code class="literal">F=</CODE
> flags.
If the <code class="literal">A=</CODE
> <em class="emphasis">does not</EM
> include the <code class="literal">$u</CODE
> macro,
then <em class="emphasis">sendmail</EM
> will speak SMTP on standard I/O with the program.</P
><blockquote class="footnote"><p class="para">[7] In most versions of <em class="emphasis">sendmail</EM
> the environment is stripped for
security. V8 passes only TZ=, AGENT=, and (beginning with V8.7) the
environmental variables specified with the <code class="literal">E</CODE
> configuration
command (see <a class="xref" href="ch22_02.htm#SML2-CH-22-SECT-2-1" title="The E Configuration Command">Section 22.2.1, "The E Configuration Command"</A
>).</P
></BLOCKQUOTE
></DD
><dt class="term"><em class="emphasis">P=[IPC]</EM
></DT
><dd class="listitem"><p class="para">The special internal name <code class="literal">[IPC]</CODE
> specifies that <em class="emphasis">sendmail</EM
>
is to make a network connection to the recipient host and that
it should talk SMTP to that host. Most current versions of <em class="emphasis">sendmail</EM
>
allow the name <code class="literal">[TCP]</CODE
>
[8]
to be a synonym for
<code class="literal">[IPC]</CODE
>, but <code class="literal">[IPC]</CODE
> should be used when portability
is of concern.
The <code class="literal">$u</CODE
> macro should <em class="emphasis">never</EM
> be included in the <code class="literal">A=</CODE
>
for this internal name.</P
><blockquote class="footnote"><p class="para">[8] Originally, IPC meant &quot;interprocessor communications,&quot; not
&quot;interprocess communications&quot; as it does today. Some vendors
have made TCP a synonym, thinking that it was more descriptive
of the TCP/IP network mechanism.
That may be a mistake on their part, because <em class="emphasis">sendmail</EM
> can interface to other network
protocols such as XNS and OSI.</P
></BLOCKQUOTE
></DD
><dt class="term"><em class="emphasis">P=[FILE]</EM
></DT
><dd class="listitem"><p class="para">Beginning with V8 <em class="emphasis">sendmail</EM
>, the internal name <code class="literal">[FILE]</CODE
>
specifies that delivery will be made by appending the message to
a file. This name is intended for use by the <code class="literal">*file*</CODE
> delivery agent (see
<a class="xref" href="ch30_05.htm#SML2-CH-30-SECT-5-2-1" title="Internally Defined Names">Section 30.5, "Internally Defined Names"</A
>).
<code class="literal">[FILE]</CODE
> can be useful for designing a custom delivery agent whose
purpose is to append to files (perhaps coupled with the <code class="literal">U=</CODE
> equate,
<a class="xref" href="#SML2-CH-30-SECT-4-13" title="">Section 30.4.13</A
>, to force particular ownership of the file).</P
></DD
><dt class="term"><em class="emphasis">P=[LPC]</EM
></DT
><dd class="listitem"><p class="para">The special internal name <code class="literal">[LPC]</CODE
> (for local person communication)
causes <em class="emphasis">sendmail</EM
> to
run in a sort of debugging mode. In this mode the mail message
is sent to the <em class="emphasis">sendmail</EM
> program's
standard input, and replies are read (in the case of
SMTP) from its standard output; you act as the SMTP server.</P
></DD
></DL
><p class="para">The <code class="literal">[LPC]</CODE
> mode can be very helpful in tracking down
mail problems. Consider the mystery of duplicate five-character
&quot;<code class="literal">From&nbsp;</CODE
>&quot; header lines that appear at the beginning of a mail message
when mail is sent with UUCP. To solve the mystery, make a copy of your
<em class="emphasis">sendmail.cf</EM
> file 
and change the <code class="literal">P=</CODE
> for the UUCP
delivery agent to <code class="literal">[LPC]</CODE
> in that copy:</P
><p class="para"><blockquote class="screen"><pre class="screen">Muucp, P=/usr/bin/uux, F=msDFMhuU, S=13, R=23, A=uux - -r $h!rmail ($u)
          <i class="lineannotation"><img src="../chars/darr.gif" alt="-v"></I
>
          <i class="lineannotation">change to</I
>
          <i class="lineannotation"><img src="../chars/darr.gif" alt="-v"></I
>
Muucp, P=[LPC], F=msDFMhuU, S=13, R=23, A=uux - -r $h!rmail ($u)</PRE
></BLOCKQUOTE
></P
><p class="para">Then run <em class="emphasis">sendmail</EM
> by hand to see what it is sending to
the <em class="emphasis">uux</EM
> program:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>/usr/lib/sendmail -C</B
></CODE
><code class="replaceable"><i>copy.cf uucpaddress</I
></CODE
><code class="userinput"><b> &lt; </B
></CODE
><code class="replaceable"><i>message</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Here, the <code class="literal">-C</CODE
><code class="replaceable"><i>copy.cf</I
></CODE
> command-line argument causes
<em class="emphasis">sendmail</EM
> to use the copy of the <em class="emphasis">sendmail.cf</EM
> file rather
than the original. The <code class="replaceable"><i>uucpaddress</I
></CODE
> is the address of
a recipient that would normally be sent 

via UUCP. The <code class="replaceable"><i>message</I
></CODE
>
should contain only a <code class="literal">Subject:</CODE
> header line and a minimal
body:</P
><p class="para"><blockquote class="screen"><pre class="screen">Subject: test   <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> one line header</I
>
                <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> a blank line</I
>
This is a test. <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> one line body</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If <em class="emphasis">sendmail</EM
> prints the message with a five-character &quot;<code class="literal">From&nbsp;</CODE
>&quot;
header line at the top, then you know that <em class="emphasis">sendmail</EM
>
is the culprit.&#13;</P
></DIV
><div class="refsect1"><h4 class="refsect1"><a class="title" name="SML2-CH-30-SECT-4-9-1">30.4.9.1 </A
>m4 modifications of P=</H4
><p class="para">In using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration technique, the <code class="literal">P=</CODE
> equate
can be easily changed for all delivery agents by
using the definitions in the leftmost column of
<a class="xref" href="#SML2-CH-30-TAB-4" title="m4 Modification of P= Equates">Table 30.5</A
>.</P
><table class="table"><caption class="table"><a class="title" name="SML2-CH-30-TAB-4">Table 30.5: m4 Modification of P= Equates</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">define()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Agent</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">MAILER()</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Default P=</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">/usr/cyrus/bin/deliver</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">cyrusbb</TD
><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">/usr/cyrus/bin/deliver</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">/usr/local/lib/fax/mailfax</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">/bin/mail</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_PATH</TD
><td class="entry" rowspan="1" colspan="1">prog</TD
><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">/bin/sh</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL11_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">/usr/etc/mail11</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PH_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">ph</TD
><td class="entry" rowspan="1" colspan="1">phquery</TD
><td class="entry" rowspan="1" colspan="1">/usr/local/etc/phquery</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">POP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">/usr/lib/mh/spop</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_PATH</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">/usr/local/bin/procmail</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">[IPC]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">esmtp</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">[IPC]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">smtp8</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">[IPC]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">none</TD
><td class="entry" rowspan="1" colspan="1">relay</TD
><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">[IPC]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">/usr/lib/news/inews</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">/usr/bin/uux</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">uucp-old</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">/usr/bin/uux</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">suucp</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">/usr/bin/uux</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">uucp-new</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">/usr/bin/uux</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">uucp-dom</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">/usr/bin/uux</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">uucp-uudom</TD
><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">/usr/bin/uux</TD
></TR
></TBODY
></TABLE
><p class="para">In general, the default values given to these are automatically set when
you include the appropriate OSTYPE() directive (see <a class="xref" href="ch20_03.htm" title="">Section 20.3.1, addheader()</A
>).</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-10">30.4.10 R=</A
></H3
><p class="refpurpose">Recipient Rewriting Set</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-30147"></A
><a class="indexterm" name="AUTOID-30149"></A
>The <code class="literal">R=</CODE
> equate specifies a rule set
to be used for processing all envelope- and header-recipient addresses
for a specific delivery agent.
Mail messages are always addressed to at least one recipient,
but there may be more. The addresses of the recipients are given
in the envelope and are usually repeated in the mail message's header. The envelope
address is given to <em class="emphasis">sendmail</EM
> in one of three ways:
as a command-line argument;
as an SMTP RCPT command; or as <code class="literal">To:</CODE
>, <code class="literal">Cc:</CODE
>,
and <code class="literal">Bcc:</CODE
> headers (if the <code class="literal">-t</CODE
> command-line switch is given).
[9]
<a class="xref" href="#SML2-CH-30-FIG-0" title="The flow of addresses through rule sets">Figure 30.1</A
>
shows how the <code class="literal">R=</CODE
> rule set fits into the flow of addresses through
rule sets.</P
><blockquote class="footnote"><p class="para">[9] The <code class="literal">-t</CODE
> switch is intended for initial submissions only.</P
></BLOCKQUOTE
><h4 class="figure"><a class="title" name="SML2-CH-30-FIG-0">Figure 30.1: The flow of addresses through rule sets</A
></H4
><img class="graphic" src="figs/sm1001.gif" alt="Figure 30.1"><p class="para"></P
><p class="para">There are two forms for the <code class="literal">R=</CODE
> equate. One is the standard form,
and the other is an enhanced alternative beginning with V8 <em class="emphasis">sendmail</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">R=<code class="replaceable"><i>ruleset            </I
></CODE
><i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> legal for all</I
>
R=<code class="replaceable"><i>eset/hset          </I
></CODE
><i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> legal beginning with V8</I
></PRE
></BLOCKQUOTE
></P
><p class="para">In the first case, <code class="replaceable"><i>ruleset</I
></CODE
> specifies the rule set to use in
rewriting both headers and the envelope.
If that
value is zero or if the entire <code class="literal">R=</CODE
> equate is
missing, no rule set is called.</P
><p class="para">In the second case, two rule sets may be specified.
[10]
One rule set
is specific to the envelope, and the other is specific to headers.
The envelope-specific rule set is the one to the left of the slash; the
header-specific rule set is to the right (<code class="literal">R=eset/hset</CODE
>). 
If both values are missing, both default to zero.
If only one is missing, the missing value defaults to the other value.</P
><blockquote class="footnote"><p class="para">[10] This form was inspired by an identical form in IDA <em class="emphasis">sendmail</EM
>.</P
></BLOCKQUOTE
><p class="para">Either rule set may be specified by using names or numbers or both:</P
><p class="para"><blockquote class="screen"><pre class="screen">R=Myset                   <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> name</I
>
R=12                      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> number</I
>
R=Myset=12                <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> both</I
></PRE
></BLOCKQUOTE
></P
><p class="para">See <a class="xref" href="ch29_01.htm" title="The S Configuration Command">Section 29.1, "The S Configuration Command"</A
> for a discussion of the various
legal ways in which rule sets can be specified.</P
><p class="para">Macros may not be used in delivery agent rule-set specifications.
That is,</P
><p class="para"><blockquote class="screen"><pre class="screen">R=$X</PRE
></BLOCKQUOTE
></P
><p class="para">will not give the expected result. Instead, <em class="emphasis">sendmail</EM
> will
complain about a missing rule-set specification.</P
><p class="para">When using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, you cannot
change or specify <code class="literal">R=</CODE
> rule sets.
If the need arises, however, you can
copy an existing delivery agent definition and then
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-11">30.4.11 S=</A
></H3
><p class="refpurpose">Sender rewriting set</P
>(All versions)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-30210"></A
><a class="indexterm" name="AUTOID-30212"></A
>The <code class="literal">S=</CODE
> equate specifies a rule set
to be used for processing both envelope- and header-sender addresses.
The sender's address is given 
in the envelope and generally repeated in the mail message's <code class="literal">From:</CODE
>
header line.
[11]
The envelope
address is given to <em class="emphasis">sendmail</EM
> in one of four ways: 
as a <code class="literal">-f</CODE
> command-line argument,
as an SMTP <code class="literal">MAIL</CODE
> command, as a
<code class="literal">From:</CODE
> header, or derived from the identity of the user
who ran the program (these latter two are used only during initial message submission).
<a class="xref" href="#SML2-CH-30-FIG-0" title="The flow of addresses through rule sets">Figure 30.1</A
>
shows how the <code class="literal">S=</CODE
> rule set fits into the flow of addresses through
rule sets.</P
><blockquote class="footnote"><p class="para">[11] It is not unusual for these to differ. For example, mail that
has been passed through a mailing list exploder may show one address
in the envelope and another in the <code class="literal">From:</CODE
> header line.</P
></BLOCKQUOTE
><p class="para">There are two forms for the <code class="literal">S=</CODE
> equate. One is the standard form,
and the other is an enhanced alternative beginning with V8 <em class="emphasis">sendmail</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">S=<code class="replaceable"><i>ruleset            </I
></CODE
><i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> legal for all</I
>
S=<code class="replaceable"><i>eset/hset          </I
></CODE
><i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> legal beginning with V8</I
></PRE
></BLOCKQUOTE
></P
><p class="para">The first case specifies a rule set (<code class="replaceable"><i>ruleset</I
></CODE
>) that will process
both recipient and header addresses.
If <code class="replaceable"><i>ruleset</I
></CODE
> is zero or if the entire <code class="literal">S=</CODE
> equate is
missing, no rule set is called.</P
><p class="para">In the second case, 
one rule set is specific to the envelope, and the other is specific to
headers.  The envelope-specific rule is the one to the left of the 
slash; the header-specific rule is the one to the right (<code class="literal">S=eset/hset</CODE
>).
If both values are both missing, no sender <code class="literal">S=</CODE
> processing is done.
If only one is missing, the missing value defaults to become the other value.
(See <a class="xref" href="ch29_01.htm" title="Rule Sets">Chapter 29, <cite class="chapter">Rule Sets</CITE
></A
>, for a description
of possible errors and how the new V8.7 symbolic rule set names can be used.)</P
><p class="para">Either rule set may be specified using names or numbers or both:</P
><p class="para"><blockquote class="screen"><pre class="screen">S=Myset                   <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> name</I
>
S=12                      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> number</I
>
S=Myset=12                <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> both</I
></PRE
></BLOCKQUOTE
></P
><p class="para">See <a class="xref" href="ch29_01.htm" title="The S Configuration Command">Section 29.1</A
> for a discussion of the various
legal ways rule sets can be specified.</P
><p class="para">Macros may not be used in delivery agent rule set specifications.
That is,</P
><p class="para"><blockquote class="screen"><pre class="screen">S=$X</PRE
></BLOCKQUOTE
></P
><p class="para">will not give the expected result. Instead, <em class="emphasis">sendmail</EM
> will
complain about a missing rule set specification.</P
><p class="para">When using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, you cannot
change or specify <code class="literal">S=</CODE
> rule sets.
If the need arises, however, you can
copy an existing delivery agent definition, then
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-12">30.4.12 T=</A
></H3
><p class="refpurpose">Types for DSN diagnostics</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-30269"></A
><a class="indexterm" name="AUTOID-30271"></A
>Beginning with V8.7 <em class="emphasis">sendmail</EM
>, notification of successful, deferred,
or failed delivery is now determined by Delivery Status
Notification (DSN, see RFC1891). 
The <code class="literal">T=</CODE
> equate provides three pieces of required information to DSN.
The pieces are separated by the slash character:</P
><p class="para"><blockquote class="screen"><pre class="screen">T=<code class="replaceable"><i>mta-type</I
></CODE
>/<code class="replaceable"><i>addr-type</I
></CODE
>/<code class="replaceable"><i>diag-type</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The first piece, the <code class="replaceable"><i>mta-type</I
></CODE
>, is later supplied
to the <code class="literal">Reporting-MTA:</CODE
> DSN header, as its first argument:</P
><p class="para"><blockquote class="screen"><pre class="screen">Reporting-MTA: dns; here.us.edu
               <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
               <i class="lineannotation">mta-type here</I
></PRE
></BLOCKQUOTE
></P
><p class="para">The second piece, the <code class="replaceable"><i>addr-type</I
></CODE
>, is later supplied
to the <code class="literal">Final-Recipient:</CODE
> DSN header, as its first argument:</P
><p class="para"><blockquote class="screen"><pre class="screen">Final-Recipient: rfc822; badname@here.us.edu
                 <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                 <i class="lineannotation">addr-type here</I
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;The third piece, the <code class="replaceable"><i>diag-type</I
></CODE
>, is later supplied
to the <code class="literal">Diagnostic-Code:</CODE
> DSN header, as its first argument:</P
><p class="para"><blockquote class="screen"><pre class="screen">Diagnostic-Code: smtp; 550 &lt;badname@here.us.edu&gt;... User unknown
                 <i class="lineannotation"><img src="../chars/uarr.gif" alt="-^"></I
>
                 <i class="lineannotation">diag-type here</I
></PRE
></BLOCKQUOTE
></P
><p class="para">If the <code class="literal">P=</CODE
> for a delivery agent is <code class="literal">[IPC]</CODE
> or
<code class="literal">[TCP]</CODE
>, an undeclared <code class="replaceable"><i>mta-type</I
></CODE
> defaults to <code class="literal">dns</CODE
>,
an undeclared <code class="replaceable"><i>addr-type</I
></CODE
> to <code class="literal">rfc822</CODE
>, and an undeclared
<code class="replaceable"><i>diag-type</I
></CODE
> to <code class="literal">smtp</CODE
>. For any other <code class="literal">P=</CODE
> the default
for an undeclared entry is NULL.</P
><p class="para">In configuring with the <em class="emphasis">m4</EM
> technique, the declarations of the
<code class="literal">T=</CODE
> equates are</P
><p class="para"><blockquote class="screen"><pre class="screen">T=X-Unix                        <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> cyrus and prog (equivalent to X-Unix/X-Unix/X-Unix)</I
>
T=X-Phone/X-FAX/X-Unix          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> fax</I
>
T=DNS/RFC822/X-Unix             <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> local, pop, and procmail</I
>
T=DNS/RFC822/SMTP               <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> all SMTP agents</I
>
T=X-Usenet/X-Usenet/X-Unix      <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> Usenet</I
>
T=X-UUCP/X-UUCP/X-Unix          <i class="lineannotation"><img src="../chars/larr.gif" alt="&lt;-"> all UUCP agents</I
></PRE
></BLOCKQUOTE
></P
><p class="para">You cannot change these <code class="literal">T=</CODE
> defaults.
If the need arises, you can, however,
copy an existing delivery agent definition and then
modify it as outlined in <a class="xref" href="ch30_03.htm" title="Tuning Without an Appropriate Keyword">Section 30.3.1</A
>.</P
></DIV
></BLOCKQUOTE
></DIV
><div class="refentry"><div class="refnamediv"><h3 class="refname"><a class="refname" name="SML2-CH-30-SECT-4-13">30.4.13 U=</A
></H3
><p class="refpurpose">Run agent as uid:gid</P
>(V8.7 and above)</DIV
><blockquote><div class="refsect1"><p class="para"><a class="indexterm" name="AUTOID-30336"></A
><a class="indexterm" name="AUTOID-30338"></A
>Prior to V8.7 the user and group identities under which <em class="emphasis">sendmail</EM
>
ran were defined by an elaborate set of properties (described under
the <code class="literal">F=S</CODE
> flag in <a class="xref" href="ch30_08.htm" title="">Section 30.8.40, F=S</A
>).
Beginning with V8.7, <em class="emphasis">sendmail</EM
> now offers the <code class="literal">U=</CODE
> equate
as the means to define those identities.
If the <code class="literal">U=</CODE
> equate is specified, it sets the default
user and group identities for the delivery agent and always overrides
the values of the <code class="literal">DefaultUser</CODE
> (<code class="literal">u</CODE
>) (<code class="literal">g</CODE
>) option (see
<a class="xref" href="ch34_08.htm" title="">Section 34.8.15, DefaultUser (g)(u)</A
>).
If the <code class="literal">F=S</CODE
> flag is not set, any controlling user will override this
<code class="literal">U=</CODE
> equate.
If the <code class="literal">F=S</CODE
> flag is set, this <code class="literal">U=</CODE
> equate is absolute, overriding
everything, including any controlling user.</P
><p class="para">The form of the <code class="literal">U=</CODE
> equate looks like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">U=<code class="replaceable"><i>user</I
></CODE
>:<code class="replaceable"><i>group</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>user</I
></CODE
> is the alphanumeric identity of a user on the local
system. If <code class="replaceable"><i>user</I
></CODE
> is found in the local <em class="emphasis">passwd</EM
>(5) file, the
numeric <em class="emphasis">uid</EM
> from that file becomes the value used. Otherwise, <code class="replaceable"><i>user</I
></CODE
>,
which must be fully numeric, becomes the value used.</P
><p class="para">The colon,
[12]
if present, is followed by the alphanumeric identity of a group on the
local system. If the <code class="replaceable"><i>group</I
></CODE
> is found in the local <em class="emphasis">group</EM
>(5)
file, the numeric <em class="emphasis">gid</EM
> from that file is used. Otherwise, <code class="replaceable"><i>group</I
></CODE
>,
which must be fully numeric, becomes the value used. If the colon
and group are missing or if the <code class="replaceable"><i>user</I
></CODE
> was found in the
<em class="emphasis">passwd</EM
>(5) file, the value is taken from the <em class="emphasis">gid</EM
> field of the
<em class="emphasis">passwd</EM
>(5) file.</P
><blockquote class="footnote"><p class="para">[12] A colon is used because the POSIX standard allows login names to contain
a dot.</P
></BLOCKQUOTE
><p class="para">In using V8 <em class="emphasis">sendmail</EM
>'s m4 configuration, no <code class="literal">U=</CODE
> equate is specified
for any delivery agent. You cannot add a <code class="literal">U=</CODE
> equate with the <em class="emphasis">m4</EM
> technique.
If the need arises, however, you can
copy an existing delivery agent definition 
and then modify it as outlined in <a class="xref" href="ch30_03.htm" title="m4 Configuration Syntax">Section 30.3, "m4 Configuration Syntax"</A
>.<a class="indexterm" name="AUTOID-30384"></A
><a class="indexterm" name="AUTOID-30385"></A
></P
></DIV
></BLOCKQUOTE
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_03.htm" title="30.3 m4 Configuration Syntax"><img src="../gifs/txtpreva.gif" alt="Previous: 30.3 m4 Configuration Syntax" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail"><img src="../gifs/txthome.gif" alt="sendmail" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch30_05.htm#SML2-CH-30-SECT-5-2-1" title="30.5 Internally Defined Names"><img src="../gifs/txtnexta.gif" alt="Next: 30.5 Internally Defined Names" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">30.3 m4 Configuration Syntax</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">30.5 Internally Defined Names</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
