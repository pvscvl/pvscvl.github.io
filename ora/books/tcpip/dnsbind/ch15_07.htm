<html><head>
<title>[Chapter 15] 15.7 Additional Resource Records</TITLE>
<meta name="DC.title" content="DNS &amp; BIND"><meta name="DC.creator" content="Cricket Liu &amp; Paul Albitz"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-01-06T18:44:34Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-512-2" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch15_01.htm" title="15. Miscellaneous"><link rel="prev" href="ch15_06.htm" title="15.6 Network Names and Numbers"><link rel="next" href="ch15_08.htm" title="15.8 DNS Versus X.500"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="DNS &amp; BIND" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="DNS &amp; BIND"><area shape="RECT" coords="467,0,514,18" href="../search/dsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch15_06.htm" title="15.6 Network Names and Numbers"><img src="../gifs/txtpreva.gif" alt="Previous: 15.6 Network Names and Numbers" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 15<br>Miscellaneous</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch15_08.htm" title="15.8 DNS Versus X.500"><img src="../gifs/txtnexta.gif" alt="Next: 15.8 DNS Versus X.500" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="AUTOID-17510">15.7 Additional Resource Records</A
></H2
><p class="para"><a class="indexterm" name="CH15.RESOURCE"></A
>There are a couple of resource records
that we haven't covered yet in this book. The first of these has
been around since the beginning, <span class="acronym">HINFO</SPAN
>, but hasn't been widely used.
The others were defined in <span class="acronym">RFC</SPAN
> 1183 and several successive <span class="acronym">RFC</SPAN
>s.
 Most are experimental, but some are on the standards track and are
coming into more prevalent use. We'll describe them here to give
you a little head start in getting used to them.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="AUTOID-17518">15.7.1 Host Information</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-17521"></A
><span class="acronym">HINFO</SPAN
> stands for <em class="emphasis">Host <span class="acronym">INFO</SPAN
>rmation</EM
>.
The data are a pair of strings identifying the host's hardware type
and operating system. The strings should come from the <span class="acronym">MACHINE</SPAN
> <span class="acronym">NAMES</SPAN
>
and <span class="acronym">OPERATING</SPAN
> <span class="acronym">SYSTEM</SPAN
> <span class="acronym">NAMES</SPAN
> listed in the &quot;Assigned Numbers&quot; <span class="acronym">RFC</SPAN
>
(currently <span class="acronym">RFC</SPAN
> 1700), but this requirement is not enforced; you
can use your own abbreviations. The <span class="acronym">RFC</SPAN
> isn't at all comprehensive,
so it is quite possible you won't find your system in the list anyway.
Originally, host information records were designed to let services
like <span class="acronym">FTP</SPAN
> determine how to interact with the remote system. This
would have made it possible to negotiate data type transformations
automatically. Unfortunately, this didn't happen&nbsp;- few sites supply
accurate <span class="acronym">HINFO</SPAN
> values for all their systems. Some network administrators
use <span class="acronym">HINFO</SPAN
> records to help them keep track of the machine types,
instead of recording the machine types in a database or a notebook.
Here are two examples of <span class="acronym">HINFO</SPAN
> records; note that the hardware type
or operating system must be surrounded with quotes if it includes
any whitespace:</P
><blockquote class="screen"><pre class="screen">;
; These machine names and system names did not come from <span class="acronym">RFC</SPAN
> 1340
;
wormhole  <span class="acronym">IN</SPAN
>  <span class="acronym">HINFO</SPAN
>  <span class="acronym">ACME</SPAN
>-<span class="acronym">HW</SPAN
>  <span class="acronym">ACME</SPAN
>-<span class="acronym">GW</SPAN
>
cujo      <span class="acronym">IN</SPAN
>  <span class="acronym">HINFO</SPAN
>  &quot;Watch Dog Hardware&quot;  &quot;Rabid <span class="acronym">OS</SPAN
>&quot;</PRE
></BLOCKQUOTE
><p class="para">As we pointed out, <span class="acronym">HINFO</SPAN
> records are a security risk&nbsp;- by
providing easily accessible information about a system, you are
making it easier for a hacker to break in.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="AUTOID-17551">15.7.2 <span class="acronym">AFSDB</SPAN
></A
></H3
><p class="para"><a class="indexterm" name="AUTOID-17555"></A
><a class="indexterm" name="AUTOID-17557"></A
><span class="acronym">AFSDB</SPAN
>
has a syntax like that of the <span class="acronym">MX</SPAN
> record, and semantics a bit like
that of the <span class="acronym">NS</SPAN
> record. An <span class="acronym">AFSDB</SPAN
> record gives either the location
of an <span class="acronym">AFS</SPAN
> cell database server or of a <span class="acronym">DCE</SPAN
> cell's authenticated
name server. The type of server the record points to, and the name
of the host running the server, are contained in the record-specific
data portion of the record.</P
><p class="para">So what's an <span class="acronym">AFS</SPAN
> cell database
server? Or <span class="acronym">AFS</SPAN
>, for that matter? <span class="acronym">AFS</SPAN
> originally stood for the Andrew
File System, designed by the good folks at Carnegie-Mellon University
as part of the Andrew Project. (It's now a registered trademark
of Transarc Corporation, which sells <span class="acronym">AFS</SPAN
> as a product.) <span class="acronym">AFS</SPAN
> is a
network filesystem, like <span class="acronym">NFS</SPAN
>, but one that handles the latency of
wide area networks much better than <span class="acronym">NFS</SPAN
> does and provides local
caching of files to enhance performance. An <span class="acronym">AFS</SPAN
> cell database server
runs the process responsible for tracking the location of filesets (groups
of files) on various <span class="acronym">AFS</SPAN
> fileservers within a cell (a logical group
of hosts). So being able to find the <span class="acronym">AFS</SPAN
> cell database server is
the key to finding any file in the cell.</P
><p class="para">And what's
an<a class="indexterm" name="AUTOID-17577"></A
>
authenticated
name server? It holds location information about all sorts of services
available within a <span class="acronym">DCE</SPAN
> cell. A <span class="acronym">DCE</SPAN
> cell? That's a logical group
of hosts that share services offered by the Open Group's Distributed
Computing Environment (<span class="acronym">DCE</SPAN
>).</P
><p class="para">And now, back to our story.
To access another cell's <span class="acronym">AFS</SPAN
> or <span class="acronym">DCE</SPAN
> services across a network, you
must first find out where that cell's cell database servers or authenticated
name servers are. Hence the new record type. The domain name the record
is attached to gives the name of the cell the server knows about.
Cells are often named after <span class="acronym">DNS</SPAN
> domains, so this usually doesn't
look at all odd.</P
><p class="para">As we said, the <span class="acronym">AFSDB</SPAN
> record's syntax is like
the <span class="acronym">MX</SPAN
> record's syntax. In place of the preference
value, you specify the number 1 for an <span class="acronym">AFS</SPAN
> cell
database server or 2 for a <span class="acronym">DCE</SPAN
> authenticated name
server.</P
><p class="para">In place of the mail exchanger host, you specify the name
of the host running the server. Simple!</P
><p class="para">Say an <em class="emphasis">fx.movie.edu</EM
> systems
administrator sets up a <span class="acronym">DCE</SPAN
> cell (which includes <span class="acronym">AFS</SPAN
> services) because
she wants to experiment with distributed processing to speed up
graphics rendering. She runs both an <span class="acronym">AFS</SPAN
> cell database server and
a <span class="acronym">DCE</SPAN
> name server on <em class="emphasis">bladerunner.fx.movie.edu</EM
>,
another cell database server on <em class="emphasis">empire</EM
>, and
another <span class="acronym">DCE</SPAN
> name server on <em class="emphasis">aliens</EM
>. She should
set up the <span class="acronym">AFSDB</SPAN
> records as follows:</P
><blockquote class="screen"><pre class="screen">; Our <span class="acronym">DCE</SPAN
> cell is called fx.movie.edu, same as the domain
fx.movie.edu.  <span class="acronym">IN</SPAN
>  <span class="acronym">AFSDB</SPAN
>  1 bladerunner.fx.movie.edu.
               <span class="acronym">IN</SPAN
>  <span class="acronym">AFSDB</SPAN
>  2 bladerunner.fx.movie.edu.
               <span class="acronym">IN</SPAN
>  <span class="acronym">AFSDB</SPAN
>  1 empire.fx.movie.edu.
               <span class="acronym">IN</SPAN
>  <span class="acronym">AFSDB</SPAN
>  2 aliens.fx.movie.edu.</PRE
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="AUTOID-17613">15.7.3 X25, <span class="acronym">ISDN</SPAN
>, and <span class="acronym">RT</SPAN
></A
></H3
><p class="para">These three record
types were created specifically in support of research on next-generation
internets. Two of the records,<a class="indexterm" name="AUTOID-17618"></A
><a class="indexterm" name="AUTOID-17620"></A
><a class="indexterm" name="AUTOID-17622"></A
><a class="indexterm" name="AUTOID-17625"></A
>
X25
and<a class="indexterm" name="AUTOID-17628"></A
>
<span class="acronym">ISDN</SPAN
>, are simply address records specific
to X.25 and <span class="acronym">ISDN</SPAN
> networks, respectively. Both take arguments (record-specific
data) appropriate to the type of network. The X25 record type uses
an X.121<a class="indexterm" name="AUTOID-17632"></A
><a class="indexterm" name="AUTOID-17634"></A
>
address
(X.121 is the <span class="acronym">ITU</SPAN
>-T recommendation that specifies the format of addresses
used in X.25 networks). The <span class="acronym">ISDN</SPAN
> record type uses an <span class="acronym">ISDN</SPAN
> address.</P
><p class="para"><span class="acronym">ISDN</SPAN
> stands for Integrated Services Digital Network. Telephone
companies around the world have proposed using <span class="acronym">ISDN</SPAN
> protocols to
allow their telephone networks to carry both voice and data, creating
an integrated network. Although <span class="acronym">ISDN</SPAN
>'s availability is spotty throughout
the U.S., it has been widely adopted in some international markets. Since
<span class="acronym">ISDN</SPAN
> uses the telephone companies' networks, an <span class="acronym">ISDN</SPAN
> address is
just a phone number, and in fact consists of a country code, followed
by an area code or city code, then by a local phone number. Sometimes
there are a few extra digits you wouldn't see in a phone number
at the end, called a subaddress. The subaddress is specified in
a separate field in the record-specific data.</P
><p class="para">Examples
of the X25 and <span class="acronym">ISDN</SPAN
> record types are:</P
><blockquote class="screen"><pre class="screen">relay.pink.com.  <span class="acronym">IN</SPAN
>  X25  31105060845

delay.hp.com.    <span class="acronym">IN</SPAN
>  <span class="acronym">ISDN</SPAN
>  141555514539488
hep.hp.com.      <span class="acronym">IN</SPAN
>  <span class="acronym">ISDN</SPAN
>  141555514539488 004</PRE
></BLOCKQUOTE
><p class="para">These records are intended for use in conjunction
with the Route Through (<span class="acronym">RT</SPAN
>)<a class="indexterm" name="AUTOID-17656"></A
><a class="indexterm" name="AUTOID-17659"></A
>
record
type. <span class="acronym">RT</SPAN
> is syntactically and semantically similar to the <span class="acronym">MX</SPAN
> record
type: it specifies an intermediate host that will route <em class="emphasis">packets</EM
> (instead
of mail) to a destination host. So now, instead of only being able
to route mail to a host that isn't directly connected to the Internet,
you can route any kind of <span class="acronym">IP</SPAN
> packet to that host by using another
host as a forwarder. The packet could be part of a <em class="emphasis">telnet</EM
> or
<em class="emphasis">ftp</EM
> session, or perhaps even a <span class="acronym">DNS</SPAN
> query!</P
><p class="para">Like <span class="acronym">MX</SPAN
>, <span class="acronym">RT</SPAN
> includes a preference value, which indicates how
desirable delivery to a particular host is. For example, the records:</P
><blockquote class="screen"><pre class="screen">housesitter.movie.edu.  <span class="acronym">IN</SPAN
>  <span class="acronym">RT</SPAN
>  10 relay.pink.com.
                        <span class="acronym">IN</SPAN
>  <span class="acronym">RT</SPAN
>  20 delay.hp.com.</PRE
></BLOCKQUOTE
><p class="para">instruct hosts to route packets bound for <em class="emphasis">housesitter</EM
> through <em class="emphasis">relay.pink.com</EM
> (the
first choice) or through <em class="emphasis">delay.hp.com</EM
> (the
second choice).</P
><p class="para">The way <span class="acronym">RT</SPAN
> works with X25 and <span class="acronym">ISDN</SPAN
> (and
even A) records is like this:</P
><ol class="orderedlist"><li class="listitem"><p class="para">Internet host A wants to send a packet
to host B, which is not connected to the Internet.</P
></LI
><li class="listitem"><p class="para">Host A looks up host B's <span class="acronym">RT</SPAN
> records. This search
also returns all address records (A, X25, <em class="emphasis">and</EM
> <span class="acronym">ISDN</SPAN
>)
for each intermediate host.</P
></LI
><li class="listitem"><p class="para">Host A sorts the list of intermediate hosts and
looks for its own domain name. If it finds it, it removes it and
all intermediate hosts at higher preference values. This is analogous
to <em class="emphasis">sendmail</EM
>'s &quot;paring down&quot; a list of mail
exchangers. </P
></LI
><li class="listitem"><p class="para">Host A examines the address record(s) for the most
preferred intermediate host that remains. If host A is attached
to a network that corresponds to the type of address record indicated,
it uses that network to send the packet to the intermediate host.
For example, if host A were trying to send a packet through <em class="emphasis">relay.pink.com</EM
>,
it would need connectivity to an X.25 network.</P
></LI
><li class="listitem"><p class="para">If host A lacks appropriate connectivity, it tries
the next intermediate host specified by the <span class="acronym">RT</SPAN
> records. For example,
if host A lacked X.25 connectivity, it might fall back to delivering
via <span class="acronym">ISDN</SPAN
> to <em class="emphasis">delay.hp.com</EM
>.</P
></LI
></OL
><p class="para">This process continues until the packet is routed to the most
preferred intermediate host. The most preferred intermediate host
may then deliver the packet directly to the destination host's address
(which may be A, X25, or <span class="acronym">ISDN</SPAN
>).<a class="indexterm" name="AUTOID-17704"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="AUTOID-17706">15.7.4 Location</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-17709"></A
><span class="acronym">RFC</SPAN
> 1876 defines
an experimental record type, <span class="acronym">LOC</SPAN
>, that allows domain administrators
to encode the location of their computers, subnets and networks.
 In this case, location means latitude, longitude and altitude.
 Future applications could use this information to produce network
maps, assess routing efficiency, and more.</P
><p class="para">In its basic
form, the <span class="acronym">LOC</SPAN
> record takes latitude, longitude and altitude (in
that order) as its record-specific data.  Latitude and longitude
are expressed in the format:</P
><blockquote class="screen"><pre class="screen">&lt;degrees&gt; [minutes [seconds.&lt;fractional seconds&gt;]] (N|S|E|W)</PRE
></BLOCKQUOTE
><p class="para">Altitude is expressed in meters.</P
><p class="para">If you're
wondering how in the world you're going to get that data, check out
&quot;<span class="acronym">RFC</SPAN
> 1876 Resources,&quot; at <a class="systemitem.url" href="../../../../../../../www.ckdhr.com/dns-loc/">http://www.ckdhr.com/dns-loc/</A
>.
 This site, created by Christopher Davis, one of the authors of
<span class="acronym">RFC</SPAN
> 1876, is an indispensable collection of information and useful
links and utilities for people creating <span class="acronym">LOC</SPAN
> records.</P
><p class="para"><a class="indexterm" name="AUTOID-17723"></A
>If
you don't have your own Global Positioning System receiver to carry around
to all of your computers, two sites that may come in handy are Etak's
Eagle Geocoder, at <a class="systemitem.url" href="../../../../../../../www.geocode.com/eagle.html-ssi">http://www.geocode.com/eagle.html-ssi</A
>, which
you can use to find the latitude and longitude of most addresses
in the United States; and AirNav's Airport Information, at <a class="systemitem.url" href="../../../../../../../www.airnav.com/airports/">http://www.airnav.com/airports/</A
>,
which will let you find the elevation of the closest airport to
you.  If you don't have a major airport near you, don't worry:
the database even includes the helipad at my neighborhood hospital!</P
><p class="para">Here's a <span class="acronym">LOC</SPAN
> record for one of our hosts:</P
><blockquote class="screen"><pre class="screen">huskymo.acmebw.com.      IN     LOC     40 2 0.373 N 105 17 23.528 W 1638m</PRE
></BLOCKQUOTE
><p class="para">Optional fields in the record-specific data allow
you to specify how large the entity you're describing is, in meters
(<span class="acronym">LOC</SPAN
> records can describe networks, after all, which can be quite
large), as well as the horizontal and vertical precision.  The size
defaults to one meter, which is perfect for a single host.  Horizontal
precision defaults to 10,000 meters, and vertical precision to ten
meters.  These defaults represent the size of a typical <span class="acronym">ZIP</SPAN
> or postal code,
the idea being that you can fairly easily find a latitude and longitude
given a <span class="acronym">ZIP</SPAN
> code.</P
><p class="para">You can also attach <span class="acronym">LOC</SPAN
> records to
the names of subnets and networks.  If you've taken the time to
enter information about the names and addresses of your networks
in the format described in <span class="acronym">RFC</SPAN
> 1101 (covered earlier in this chapter),
you can attach <span class="acronym">LOC</SPAN
> records to the network names:</P
><blockquote class="screen"><pre class="screen">;
; Map <span class="acronym">HP</SPAN
>'s network name to 15.0.0.0.
;
hp-net.hp.com.   IN   PTR 0.0.0.15.in-addr.arpa.
                 IN   LOC 37 24 55.393 N 122 8 37 W 26m</PRE
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="AUTOID-17740">15.7.5 <span class="acronym">IP</SPAN
>v6 Addresses</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-17744"></A
><a class="indexterm" name="AUTOID-17746"></A
>If you're to believe the
hype, <span class="acronym">IP</SPAN
>v6 is coming soon to a network near you.  Clearly, the existing
A record won't accommodate <span class="acronym">IP</SPAN
>v6's 128-bit addresses:  <span class="acronym">BIND</SPAN
> expects
an A record's record-specific data to be a 32-bit address in dotted-octet format.</P
><p class="para"><a class="indexterm" name="AUTOID-17753"></A
><span class="acronym">RFC</SPAN
> 1886 introduces a new address record, <span class="acronym">AAAA</SPAN
>, used to store
a 128-bit <span class="acronym">IP</SPAN
>v6 address.  <span class="acronym">AAAA</SPAN
> takes as its record-specific data
the textual format of an <span class="acronym">IP</SPAN
>v6 record described in <span class="acronym">RFC</SPAN
> 1884.  This
format expresses the 128 bits of the address as eight sets of four
hexadecimal digits, separated by colons (&quot;:&quot;).  The first set of
four digits encodes the high-order 16 bits of the address.  Every
set of four bits are compressed into the equivalent hexadecimal
digit (e.g., <code class="literal">1111</CODE
> becomes <code class="literal">f</CODE
>).  You can omit leading zeroes in a set
of hexadecimal digits.</P
><p class="para">So, for example, you'd see <span class="acronym">AAAA</SPAN
>
records like this:</P
><blockquote class="screen"><pre class="screen">ipv6         IN     AAAA            4321:0:1:2:3:4:567:89ab</PRE
></BLOCKQUOTE
><p class="para"><span class="acronym">RFC</SPAN
> 1886 also extends the additional processing that
<span class="acronym">BIND</SPAN
> and other name servers do, so that name servers include <span class="acronym">AAAA</SPAN
>
records for mail exchangers and name servers that speak <span class="acronym">IP</SPAN
>v6, for
example.</P
><p class="para">Finally, <span class="acronym">RFC</SPAN
> 1886 establishes a new reverse
mapping namespace for <span class="acronym">IP</SPAN
>v6 addresses, called <i class="filename">ip6.int</I
>.  Each level
of subdomain under <i class="filename">ip6.int</I
> represents a nibble (a 4-bit quantity)
in the 128-bit address, with the low-order nibble encoded first
(appearing at the far left of the domain name).  Unlike the format
of addresses in <span class="acronym">AAAA</SPAN
> records, omitting leading zeroes is not allowed,
so there are always 32 nibbles and 32 levels of subdomain below
<i class="filename">ip6.int</I
> in a domain name corresponding to a full <span class="acronym">IP</SPAN
>v6 address.
The domain name that corresponds to the address in the example above
is:</P
><blockquote class="screen"><pre class="screen">b.a.9.8.7.6.5.0.4.0.0.0.3.0.0.0.2.0.0.0.1.0.0.0.0.0.0.0.1.2.3.4.<span class="acronym">IP</SPAN
>6.<span class="acronym">INT</SPAN
>.</PRE
></BLOCKQUOTE
><p class="para">These domain names have <span class="acronym">PTR</SPAN
> records attached, just
as domain names under <i class="systemitem.sitename">in-addr.arpa</I
> do.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="AUTOID-17785">15.7.6 <span class="acronym">SRV</SPAN
></A
></H3
><p class="para"><a class="indexterm" name="CH15.SRV"></A
>Locating a service or server within
a zone, if you don't know which host it runs on, is a difficult
problem.  Some domain administrators have attempted to solve this problem
by using service-specific aliases in their zones.  For example,
at Movie U. we created the alias <i class="systemitem.sitename">ftp.movie.edu</I
> and point it to the
domain name of our <span class="acronym">FTP</SPAN
> archive:</P
><blockquote class="screen"><pre class="screen">ftp.movie.edu.      IN    CNAME           plan9.fx.movie.edu.</PRE
></BLOCKQUOTE
><p class="para">This makes it easy for people to guess a domain name
that will get them to our <span class="acronym">FTP</SPAN
> archive, and separates the name people
use to access to archive from the domain name of the host it runs
on.  If we were to move the archive to a different host, we could
simply change the <span class="acronym">CNAME</SPAN
> record.</P
><p class="para">The experimental <span class="acronym">SRV</SPAN
>
record, introduced in <span class="acronym">RFC</SPAN
> 2052, is a general mechanism for locating
services.  <span class="acronym">SRV</SPAN
> also provides powerful features that allow domain
administrators to distribute load and provide backup services, similar
to the <span class="acronym">MX</SPAN
> record.</P
><p class="para">A unique aspect of the <span class="acronym">SRV</SPAN
> record
is the format of the domain name it's attached to.  Like service-specific aliases,
the domain name to which an <span class="acronym">SRV</SPAN
> record is attached gives the name
of the service sought, as well as the protocol it runs over, concatenated
with a domain name.  So, for example:</P
><blockquote class="screen"><pre class="screen">ftp.tcp.movie.edu</PRE
></BLOCKQUOTE
><p class="para">would represent the <span class="acronym">SRV</SPAN
> records someone <kbd class="command">ftp</KBD
>ing to
<i class="systemitem.sitename">movie.edu</I
> should retrieve in order to find the <i class="systemitem.sitename">movie.edu</I
> <span class="acronym">FTP</SPAN
> servers,
while:</P
><blockquote class="screen"><pre class="screen">http.tcp.www.movie.edu</PRE
></BLOCKQUOTE
><p class="para">represents the <span class="acronym">SRV</SPAN
> records someone accessing the
<span class="acronym">URL</SPAN
> <a class="systemitem.url" href="../../../../../../../www.movie.edu/">http://www.movie.edu/</A
> should look up in order to find the <i class="systemitem.sitename">www.movie.edu</I
>
web servers.</P
><p class="para">The names of the service and protocol should
appear in the latest Assigned Numbers <span class="acronym">RFC</SPAN
> (the most recent as of
this writing is <span class="acronym">RFC</SPAN
> 1700), or be unique names used only locally.
 Don't use the port or protocol <em class="emphasis">numbers</EM
>, just the names.</P
><p class="para">The
<span class="acronym">SRV</SPAN
> record has four resource record-specific fields:</P
><blockquote class="screen"><pre class="screen">priority    weight    port    target</PRE
></BLOCKQUOTE
><p class="para"><i class="parameter">priority</I
>, <i class="parameter">weight</I
>, and <i class="parameter">port</I
> are unsigned 16-bit numbers (between
0 and 65535).  <i class="parameter">target</I
> is a domain name.</P
><p class="para"><em class="emphasis">Priority</EM
> works
very similarly to the preference in an <span class="acronym">MX</SPAN
> record:  the lower the
number in the priority field, the more desirable the associated
target.  When searching for the hosts offering a given service, clients
should try targets at the same priority before trying those at a
higher priority value.</P
><p class="para"><em class="emphasis">Weight</EM
> allows domain administrators
to distribute load to multiple targets.  Clients should query targets
at the same priority in proportion to their weight.  For example,
if one target has a priority of zero and a weight of one, and another
target also has a priority of zero but a weight of two, the second
target should receive twice as much load (in queries, connections,
whatever) as the first.</P
><p class="para"><em class="emphasis">Port</EM
> specifies the port on which
the service being sought is running.  This allows domain administrators
to run servers on non-standard ports.  For example, a domain administrator
could use <span class="acronym">SRV</SPAN
> records to point web browsers at a web server running
on port 8000 instead of the standard <span class="acronym">HTTP</SPAN
> port (80).</P
><p class="para"><em class="emphasis">Target</EM
>,
finally, specifies the domain name of a host on which the service
is running (on the port specified in the <i class="parameter">port</I
> field).  <i class="parameter">Target</I
> must
be the canonical name of the host (not an alias), with address records
attached to it.</P
><p class="para">So, for the <i class="systemitem.sitename">movie.edu</I
> <span class="acronym">FTP</SPAN
> server, we
added these records to <i class="filename">db.movie</I
>:</P
><blockquote class="screen"><pre class="screen">ftp.tcp             IN     SRV     1       0       21      plan9.fx.movie.edu.
                    IN     SRV     2       0       21      thing.fx.movie.edu.</PRE
></BLOCKQUOTE
><p class="para">This instructs <span class="acronym">SRV</SPAN
>-capable <span class="acronym">FTP</SPAN
> clients to try the
<span class="acronym">FTP</SPAN
> server on <i class="systemitem.sitename">plan9.fx.movie.edu</I
>'s port 21 first when connecting
to <i class="systemitem.sitename">movie.edu</I
>, and then to try the <span class="acronym">FTP</SPAN
> server on <i class="systemitem.sitename">thing.fx.movie.edu</I
>'s
port 21 if <i class="systemitem.sitename">plan9</I
>'s <span class="acronym">FTP</SPAN
> server isn't available.</P
><p class="para">The records:</P
><blockquote class="screen"><pre class="screen">http.tcp.www  <span class="acronym">IN</SPAN
> <span class="acronym">SRV</SPAN
> 0 2 80   www.movie.edu.
              <span class="acronym">IN</SPAN
> <span class="acronym">SRV</SPAN
> 0 1 80   www2.movie.edu.
              <span class="acronym">IN</SPAN
> <span class="acronym">SRV</SPAN
> 1 1 8000 postmanrings2x.movie.edu.</PRE
></BLOCKQUOTE
><p class="para">direct web queries for <i class="systemitem.sitename">www.movie.edu</I
> to <i class="systemitem.sitename">www.movie.edu</I
>'s
port 80 and <i class="systemitem.sitename">www2.movie.edu</I
>'s port 80, with <i class="systemitem.sitename">www.movie.edu</I
> getting
twice the queries that <i class="systemitem.sitename">www2.movie.edu</I
> does.  If neither is available,
queries go to <i class="systemitem.sitename">postmanrings2x</I
>, on port 8000.</P
><p class="para">Unfortunately,
we don't know of any clients that support the <span class="acronym">SRV</SPAN
> record yet.  That's
really too bad, given how useful <span class="acronym">SRV</SPAN
> could be.  Since <span class="acronym">SRV</SPAN
> isn't
widely supported, don't use SRV records in lieu of address records.  It's
prudent to include at least one address record for the &quot;base&quot; domain
name to which your <span class="acronym">SRV</SPAN
> records are attached, and more if you'd like
the load spread between addresses.  If you only list a host as a
backup in the <span class="acronym">SRV</SPAN
> records, don't include its <span class="acronym">IP</SPAN
> address.  Also,
if a host runs a service on a non-standard port, don't include an
address record for it, since there's no way to redirect clients
to a non-standard port with an A record.</P
><p class="para">So, for <i class="systemitem.sitename">www.movie.edu</I
>,
we include all of these records:</P
><blockquote class="screen"><pre class="screen">http.tcp.www <span class="acronym">IN</SPAN
> <span class="acronym">SRV</SPAN
> 0 2 80   www.movie.edu.
             <span class="acronym">IN</SPAN
> <span class="acronym">SRV</SPAN
> 0 1 80   www2.movie.edu.
             <span class="acronym">IN</SPAN
> <span class="acronym">SRV</SPAN
> 1 1 8000 postmanrings2x.movie.edu.
www          <span class="acronym">IN</SPAN
> A 200.1.4.3
             <span class="acronym">IN</SPAN
> A 200.1.4.4</PRE
></BLOCKQUOTE
><p class="para">Browsers that can handle <span class="acronym">SRV</SPAN
>
records (whenever they come out) will send twice as many requests
to <i class="systemitem.sitename">www.movie.edu</I
> as to <i class="systemitem.sitename">www2.movie.edu</I
>, and will only use <i class="systemitem.sitename">postmanrings2x.movie.edu</I
>
if both of the main web servers are unavailable.  Browsers that
don't use <span class="acronym">SRV</SPAN
> records will have their requests round-robinned between
<i class="systemitem.sitename">www</I
> and <i class="systemitem.sitename">www2</I
>.</P
><a class="indexterm" name="AUTOID-17899"></A
></DIV
><a class="indexterm" name="AUTOID-17900"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch15_06.htm" title="15.6 Network Names and Numbers"><img src="../gifs/txtpreva.gif" alt="Previous: 15.6 Network Names and Numbers" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="DNS &amp; BIND"><img src="../gifs/txthome.gif" alt="DNS &amp; BIND" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch15_08.htm" title="15.8 DNS Versus X.500"><img src="../gifs/txtnexta.gif" alt="Next: 15.8 DNS Versus X.500" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">15.6 Network Names and Numbers</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">15.8 DNS Versus X.500</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
