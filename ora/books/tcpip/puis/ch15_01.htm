<html><head>
<title>[Chapter 15] UUCP</TITLE>
<meta name="DC.title" content="Practical UNIX &amp; Internet Security"><meta name="DC.creator" content="Simson Garfinkel &amp; Gene Spafford"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:11:58Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-148-8" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part04.htm" title="IV. Network and Internet Security"><link rel="prev" href="ch14_06.htm" title="14.6 Additional Security for Modems"><link rel="next" href="ch15_02.htm" title="15.2 Versions of UUCP"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Practical UNIX &amp; Internet Security" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Practical UNIX &amp; Internet Security"><area shape="RECT" coords="467,0,514,18" href="../search/psrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch14_06.htm" title="14.6 Additional Security for Modems"><img src="../gifs/txtpreva.gif" alt="Previous: 14.6 Additional Security for Modems" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 15</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch15_02.htm" title="15.2 Versions of UUCP"><img src="../gifs/txtnexta.gif" alt="Next: 15.2 Versions of UUCP" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="PUIS-CHP-15">15. UUCP</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="SECT1" href="#PUIS-CHP-15-SECT-1" title="15.1 About UUCP">About UUCP</A
><br><a class="SECT1" href="ch15_02.htm" title="15.2 Versions of UUCP">Versions of UUCP</A
><br><a class="SECT1" href="ch15_03.htm#PUIS-CHP-15-SECT-3.3" title="15.3 UUCP and Security">UUCP and Security</A
><br><a class="SECT1" href="ch15_04.htm#PUIS-CHP-15-SECT-4.1" title="15.4 Security in Version 2 UUCP">Security in Version 2 UUCP</A
><br><a class="SECT1" href="ch15_05.htm#PUIS-CHP-15-SECT-5.1.2" title="15.5 Security in BNU UUCP">Security in BNU UUCP</A
><br><a class="SECT1" href="ch15_06.htm#PUIS-CHP-15-SECT-6.1" title="15.6 Additional Security Concerns">Additional Security Concerns</A
><br><a class="SECT1" href="ch15_07.htm" title="15.7 Early Security Problems with UUCP">Early Security Problems with UUCP</A
><br><a class="SECT1" href="ch15_08.htm" title="15.8 UUCP Over Networks">UUCP Over Networks</A
><br><a class="SECT1" href="ch15_09.htm" title="15.9 Summary">Summary</A
></P
><p></P
></DIV
><p class="para"><span class="acronym">UUCP</SPAN
><a class="indexterm" name="AUTOID-18202"></A
>
is
the <span class="acronym">UNIX</SPAN
>-to<span class="acronym">-UNIX</SPAN
> Copy system,
a collection of programs that have provided rudimentary networking
for <span class="acronym">UNIX</SPAN
> computers since 1977.</P
><p class="para"><span class="acronym">UUCP</SPAN
>
has three main uses:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Sending mail and news to users on
remote systems</P
></LI
><li class="listitem"><p class="para">Transferring files between <span class="acronym">UNIX</SPAN
>
systems</P
></LI
><li class="listitem"><p class="para">Executing commands on remote systems</P
></LI
></UL
><p class="para">Until recently, <span class="acronym">UUCP</SPAN
> was very popular in
the <span class="acronym">UNIX</SPAN
> world for a number of reasons:</P
><ul class="itemizedlist"><li class="listitem"><p class="para"><span class="acronym">UUCP</SPAN
> came with
almost every version of <span class="acronym">UNIX</SPAN
>; indeed, for many
users, <span class="acronym">UUCP</SPAN
> used to be the reason to purchase
a <span class="acronym">UNIX</SPAN
> computer in the first place.</P
></LI
><li class="listitem"><p class="para"><span class="acronym">UUCP</SPAN
> required no special hardware:
it runs over standard RS-232 serial cables, and over standard modems
for long-distance networks.</P
></LI
><li class="listitem"><p class="para"><span class="acronym">UUCP</SPAN
> can store messages during
the day and send them in a single batch at night, substantially
lowering the cost of phone-based networking.</P
></LI
></UL
><p class="para">The <span class="acronym">UUCP</SPAN
> programs also allow you to connect
your computer to a worldwide network of computer systems called
Usenet. Usenet is a multihost electronic bulletin board with several
thousand special interest groups; articles posted on one computer
are automatically forwarded to all of the other computers on the
network. The Usenet reaches millions of users on computer systems
around the world on every continent.</P
><p class="para">In recent years,
interest in <span class="acronym">UUCP</SPAN
> has declined for a number of
reasons:</P
><ul class="itemizedlist"><li class="listitem"><p class="para"><span class="acronym">UUCP</SPAN
> was designed
and optimized for low-speed connections. When used with modems capable
of transmitting at 14.4 Kbps or a faster rate, the protocols become
increasingly inefficient.</P
></LI
><li class="listitem"><p class="para">New network protocols such as <span class="acronym">SLIP</SPAN
>
and <span class="acronym">PPP</SPAN
> use the same hardware as <span class="acronym">UUCP</SPAN
>,
yet allow the connecting machine to have access to the full range
of Internet services.</P
></LI
><li class="listitem"><p class="para"><span class="acronym">UUCP</SPAN
> links that were used to
provide access for one or a few people are being replaced with dial-up
<span class="acronym">POP</SPAN
> (Post Office Protocol) and <span class="acronym">IMAP</SPAN
>
servers, which allow much more flexibility when retrieving electronic
mail over a slow connection and which are easier to administer.</P
></LI
></UL
><p class="para">Thus, while <span class="acronym">UUCP</SPAN
> is still used by a number
of legacy systems, few sites are installing new <span class="acronym">UUCP</SPAN
>
systems.</P
><p class="para">Nevertheless, a working knowledge of <span class="acronym">UUCP</SPAN
>
is still important for the <span class="acronym">UNIX</SPAN
> system administrator
for a number of reasons:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Even if you don't use <span class="acronym">UUCP</SPAN
>,
you probably have the <span class="acronym">UUCP</SPAN
> programs on your system.
If they are improperly installed, an attacker could use those programs
to gain further access.[1]</P
><blockquote class="footnote"><p class="para">[1] For this reason, you may
wish to remove the UUCP subsystem (or remove the SUID/SGID
permissions from the various UUCP executables) if you have no intention
of using it.</P
></BLOCKQUOTE
></LI
><li class="listitem"><p class="para">If you are a newly hired administrator for an existing
system, people could be using <span class="acronym">UUCP</SPAN
> on your system
without your knowledge.</P
></LI
><li class="listitem"><p class="para">The <span class="acronym">UUCP</SPAN
> programs are still used
by many sites to exchange netnews. Thus, your computer may be using
<span class="acronym">UUCP</SPAN
> without <em class="emphasis">anybody'</EM
>s knowledge.[2]</P
><blockquote class="footnote"><p class="para">[2] Rich Salz's Internet News system (INN) provides an
excellent means for sites on the Internet to exchange netnews without
relying on UUCP.</P
></BLOCKQUOTE
></LI
></UL
><p class="para">The Nutshell Handbook <em class="emphasis">Using and Managing UUCP</EM
>
(O'Reilly &amp; Associates) describes in detail how
to set up and run a <span class="acronym">UUCP</SPAN
> system, as well as how
to connect to the Usenet. This chapter focuses solely on those aspects
of <span class="acronym">UUCP</SPAN
> that relate to computer security.</P
><div class="sect1"><h2 class="sect1"><a class="title" name="PUIS-CHP-15-SECT-1">15.1 About UUCP</A
></H2
><p class="para">From the user's
point of view, <span class="acronym">UUCP</SPAN
> consists of two main programs:</P
><ul class="itemizedlist"><li class="listitem"><p class="para"><em class="emphasis">uucp</EM
>, which copies
files between computers</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">uux</EM
>, which executes programs
on remote machines</P
></LI
></UL
><p class="para"><span class="acronym">UNIX</SPAN
>'s
electronic mail system also interfaces with the <span class="acronym">UUCP</SPAN
>
system. As most people use <span class="acronym">UUCP</SPAN
> primarily for
mail, this chapter also discusses the <em class="emphasis">mail</EM
>
and <em class="emphasis">rmail</EM
> commands.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="PUIS-CHP-15-SECT-1.1">15.1.1 uucp Command</A
></H3
><p class="para">The <em class="emphasis"><a class="indexterm" name="AUTOID-18299"></A
><a class="indexterm" name="AUTOID-18301"></A
><a class="indexterm" name="AUTOID-18304"></A
><a class="indexterm" name="AUTOID-18306"></A
>uucp</EM
> command allows you to
transfer files between two <span class="acronym">UNIX</SPAN
> systems. The
command has the form:</P
><blockquote class="screen"><pre class="screen">uucp [flags] source-file destination-file</PRE
></BLOCKQUOTE
><p class="para"><span class="acronym">UUCP</SPAN
> filenames can be regular pathnames
(such as <em class="emphasis">/tmp/file1</EM
>) or can have the form:</P
><blockquote class="screen"><pre class="screen"><kbd class="command">system-name!pathname</KBD
></PRE
></BLOCKQUOTE
><p class="para">For example,
to transfer the <em class="emphasis">/tmp/file12</EM
> file from your
local machine to the machine idr, you might use the command:</P
><blockquote class="screen"><pre class="screen">$ uucp /tmp/file12 idr!/tmp/file12
$&#13;</PRE
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-18320"></A
><a class="indexterm" name="AUTOID-18323"></A
>You can also use <em class="emphasis">uucp</EM
> to
transfer a file between two remote computers, assuming that your
computer is connected to both of the other two machines. For example,
to transfer a file from prose to idr, you might use the command:</P
><blockquote class="screen"><pre class="screen">$ uucp prose!/tmp/myfile idr!/u1/lance/yourfile
$</PRE
></BLOCKQUOTE
><p class="para">For security reasons, <span class="acronym">UUCP</SPAN
> is usually configured
so that files can be copied only into the <em class="emphasis"><a class="indexterm" name="AUTOID-18332"></A
>/usr/spool/uucppublic</EM
> directory:
the <span class="acronym">UUCP</SPAN
> public directory. Because <em class="emphasis">/usr/spool/uucppublic</EM
>
is lengthy to type, <span class="acronym">UUCP</SPAN
> allows you to abbreviate
the entry with a tilde (~):</P
><blockquote class="screen"><pre class="screen">$ uucp file12 idr!~/anotherfile
$</PRE
></BLOCKQUOTE
><p class="para">Notice that you can change the name of a file when you send
it.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="PUIS-CHP-15-SECT-1.1.1">15.1.1.1 uucp with the C shell</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-18342"></A
><a class="indexterm" name="AUTOID-18345"></A
>The above examples
were all typed with <em class="emphasis">sh</EM
>, the Bourne shell. They
will not work as is with the C shell. The reason for this is the
<em class="emphasis">csh</EM
> history feature.[3]</P
><blockquote class="footnote"><p class="para">[3] The <em class="emphasis">ksh</EM
>
also has a history mechanism, but it does not use a special character
that interferes with other programs.</P
></BLOCKQUOTE
><p class="para">The
C shell's history feature interprets the exclamation mark
as a command to recall previously typed lines. As a result, if you
are using <em class="emphasis">csh</EM
> and you wish to have the exclamation
mark sent to the <em class="emphasis">uucp</EM
> program, you have to
quote, or &quot;escape,&quot; the exclamation mark with
a backslash:</P
><blockquote class="screen"><pre class="screen">% uucp /tmp/file12 idr\!/tmp/file12
%</PRE
></BLOCKQUOTE
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PUIS-CHP-15-SECT-1.2">15.1.2 uux Command</A
></H3
><p class="para">The <em class="emphasis"><a class="indexterm" name="AUTOID-18360"></A
><a class="indexterm" name="AUTOID-18362"></A
><a class="indexterm" name="AUTOID-18365"></A
><a class="indexterm" name="AUTOID-18368"></A
>uux</EM
> command enables you to execute
a command on a remote system. In its simplest form, <em class="emphasis">uux</EM
>
reads an input file from standard input to execute a command on
a remote computer. The command has the form:</P
><blockquote class="screen"><pre class="screen">uux - system\!command &lt; inputfile</PRE
></BLOCKQUOTE
><p class="para">In the days before local area networks, <em class="emphasis">uux</EM
>
was often used to print a file from one computer on the printer
of another. For sites that don't have local area networks,
<em class="emphasis">uux</EM
> is still useful for that purpose. For example,
to print the file <em class="emphasis">report</EM
> on the computer <i class="filename">idr</I
>,
you might use the command:</P
><blockquote class="screen"><pre class="screen">$ uux - &quot;idr!lpr&quot; &lt; report
$</PRE
></BLOCKQUOTE
><p class="para">The notation <i class="filename">idr!lpr </I
>causes the <em class="emphasis">lpr</EM
>
command to be run on the computer called <i class="filename">idr</I
>.
Standard input for the <em class="emphasis">lpr</EM
> command is read
by the <span class="acronym">UUCP</SPAN
> system and transferred to the machine
<i class="filename">idr </I
>before the command is run.</P
><p class="para">Today,
the main use of <em class="emphasis">uux</EM
> is to send mail and Usenet
articles between machines that are not otherwise connected to <span class="acronym">LANS</SPAN
>
or the Internet.</P
><p class="para">You can use the <em class="emphasis">uux</EM
>
command to send mail &quot;by hand&quot; from one computer
to another by running the program <em class="emphasis">rmail</EM
> on
a remote machine:</P
><blockquote class="screen"><pre class="screen">$ uux - &quot;idr!rmail leon&quot;
Hi, Leon!
How is it going?

Sincerely,
Mortimer
^D
$</PRE
></BLOCKQUOTE
><p class="para">The <a class="indexterm" name="AUTOID-18394"></A
>
hyphen
(-) option to the <em class="emphasis">uux</EM
> command means
that <em class="emphasis">uux</EM
> should take its input from standard
input and run the command <em class="emphasis">rmail leon</EM
> on the
machine idr. The message will be sent to the user <em class="emphasis">leon</EM
>.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PUIS-CHP-15-SECT-1.3">15.1.3 mail Command</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-18404"></A
>Because
people send mail a lot, the usual <span class="acronym">UNIX</SPAN
> <em class="emphasis">mail</EM
>
command understands <span class="acronym">UUCP</SPAN
>-style addressing, and
automatically invokes <em class="emphasis">uux</EM
> when in use. [4]</P
><blockquote class="footnote"><p class="para">[4] There are many different programs that can be used to send
mail. Most of them either understand UUCP addressing or give your
message to another program, such as <em class="emphasis">sendmail</EM
>,
that does.</P
></BLOCKQUOTE
><p class="para">For example, you could
send mail to <em class="emphasis">leon</EM
> on the<i class="filename"> idr </I
>machine
simply by typing:</P
><blockquote class="screen"><pre class="screen">$ <b class="emphasis.bold">mail idr!leon </B
>
Subject: <b class="emphasis.bold">Hi, Leon!
How is it going?

Sincerely,
Mortimer
^D</B
>
$</PRE
></BLOCKQUOTE
><p class="para">When <em class="emphasis">mail</EM
> processes a mail address contain
an <a class="indexterm" name="AUTOID-18421"></A
><a class="indexterm" name="AUTOID-18423"></A
><a class="indexterm" name="AUTOID-18425"></A
>
exclamation
mark, the program automatically invokes the <em class="emphasis">uux</EM
>
command to cause the mail message to be transmitted to the recipient
machine.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="PUIS-CHP-15-SECT-1.4">15.1.4 How the UUCP Commands Work</A
></H3
><p class="para"><em class="emphasis">uucp</EM
>,
<em class="emphasis">uux</EM
>, and <em class="emphasis">mail</EM
> don't
actually transmit information to the remote computer; they simply
store it on the local machine in a <a class="indexterm" name="AUTOID-18434"></A
>
spool
file. The spool file contains the names of files to transfer to
the remote computer and the names of programs to run after the transfer
takes place. Spool files are normally kept in the <em class="emphasis"><a class="indexterm" name="AUTOID-18437"></A
>/usr/spool/uucp</EM
>
directory (or a subdirectory inside this directory).</P
><p class="para">If
the <em class="emphasis"><a class="indexterm" name="AUTOID-18442"></A
>uux</EM
>
command is invoked without its <em class="emphasis">-r</EM
> option, the
<em class="emphasis"><a class="indexterm" name="AUTOID-18447"></A
>uucico</EM
>
(<span class="acronym">UNIX</SPAN
>-to<span class="acronym">-UNIX</SPAN
> Copy-In-Copy-Out)
program is executed immediately.[5]
In many applications, such as in sending email, the <em class="emphasis">-r</EM
>
option is provided by default, and the commands are queued until
the <em class="emphasis">uucp</EM
> queue is run at some later time. Normally,
<em class="emphasis">uucico</EM
> is run on a regular basis by <em class="emphasis">cron</EM
>.
However started, when the program <em class="emphasis">uucico</EM
> runs
it initiates a telephone call to the remote computer and sends out
the spooled files. If the phone is busy or for some other reason
<em class="emphasis">uucico</EM
> is unable to transfer the spool files,
they remain in the <i class="systemitem">/usr/spool/uucp</I
>
directory, and <em class="emphasis">uucico</EM
> tries again when it is
run by <em class="emphasis">cron</EM
> or another invocation of <em class="emphasis">uux</EM
>.</P
><blockquote class="footnote"><p class="para">[5] A few versions of
UUCP support a <em class="emphasis">-L</EM
> flag to <em class="emphasis">uux</EM
>
that acts opposite to the <em class="emphasis">-r</EM
> flag, and causes
<em class="emphasis">uucico</EM
> to be started immediately.</P
></BLOCKQUOTE
><p class="para">When it calls the remote computer, <em class="emphasis">uucico</EM
>
gets the <kbd class="command">login:</KBD
> and <kbd class="command">password:</KBD
>
prompts as does any other user. <em class="emphasis">uucico</EM
> replies
with a special username and password for logging into a special
account. This account, sometimes named <em class="emphasis">uucp</EM
>
or <em class="emphasis"><a class="indexterm" name="AUTOID-18474"></A
>nuucp</EM
>,
has another copy of the <em class="emphasis">uucico</EM
> program as its
shell; the <em class="emphasis">uucico</EM
> program that sends the files
operates in the <a class="indexterm" name="AUTOID-18478"></A
>
Master
mode, while the <em class="emphasis">uucico</EM
> program receiving the
files operates in the <a class="indexterm" name="AUTOID-18481"></A
>
Slave
mode.</P
><p class="para">The <em class="emphasis"><a class="indexterm" name="AUTOID-18485"></A
><a class="indexterm" name="AUTOID-18487"></A
>/etc/passwd</EM
>
entry for the special <em class="emphasis">uucp</EM
> user often looks
similar to this:</P
><blockquote class="screen"><pre class="screen">uucp:mdDF32KJqwerk:4:4:Mr. UUCP:/usr/spool/uucppublic:/usr/lib/uucp/uucico</PRE
></BLOCKQUOTE
><p class="para">After the files are transferred, a program on the remote machine
named <i class="filename">uuxqt </I
>executes the queued commands. Any
errors encountered during remote command execution are captured
and sent back as email to the initiating user on the first machine.</P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch14_06.htm" title="14.6 Additional Security for Modems"><img src="../gifs/txtpreva.gif" alt="Previous: 14.6 Additional Security for Modems" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Practical UNIX &amp; Internet Security"><img src="../gifs/txthome.gif" alt="Practical UNIX &amp; Internet Security" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch15_02.htm" title="15.2 Versions of UUCP"><img src="../gifs/txtnexta.gif" alt="Next: 15.2 Versions of UUCP" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">14.6 Additional Security for Modems</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">15.2 Versions of UUCP</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
