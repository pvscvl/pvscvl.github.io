<html><head>
<title>[Chapter 9] 9.2 Screened Host Architecture</TITLE>
<meta name="DC.title" content="Building Internet Firewalls"><meta name="DC.creator" content="D. Brent Chapman &amp; Elizabeth D. Zwicky"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:28:18Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-124-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch09_01.htm" title="9. Two Sample Firewalls"><link rel="prev" href="ch09_01.htm" title="9.1 Screened Subnet Architecture"><link rel="next" href="ch10_01.htm" title="10. Authentication and Inbound Services"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Building Internet Firewalls" usemap="#srchmap" border="0"></H1
><map name="srchmap"index.html><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Building Internet Firewalls"><area shape="RECT" coords="467,0,514,18" href="../search/fsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_01.htm" title="9.1 Screened Subnet Architecture"><img src="../gifs/txtpreva.gif" alt="Previous: 9.1 Screened Subnet Architecture" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 9<br>Two Sample Firewalls</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch10_01.htm" title="10. Authentication and Inbound Services"><img src="../gifs/txtnexta.gif" alt="Next: 10. Authentication and Inbound Services" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="FIRE-09-S1-2">9.2 Screened Host Architecture</A
></H2
><p class="para"><a class="indexterm" name="CH09SHA"></A
><a class="indexterm" name="CH09HAS"></A
>The screened host architecture, described in <a class="xref" href="ch04_01.htm" title="Firewall Design">Chapter 4</A
> and shown in <a class="xref" href="#FIRE-09-FIG-2" title="Screened host architecture">Figure 9.2</A
>, is a lower-security, lower-cost alternative
to the screened subnet architecture discussed in the previous
sections. The screened host architecture is often used by very small
sites that are facing significant cost constraints.</P
><h4 class="figure"><a class="title" name="FIRE-09-FIG-2">Figure 9.2: Screened host architecture</A
></H4
><img class="graphic" src="figs/fire0902.gif" alt="Figure 9.2"><p class="para">In a screened host architecture, there is no perimeter net, no interior
router, and often no bastion host per se. (Obviously, there is a host
that the outside world talks to, but this host is often not dedicated
solely to that task.) What you have instead is a single router (most
analogous to the exterior router in the dual-router screened subnet
architecture) and a services host that provides Internet services to
internal and external clients (and is often used for other tasks as
well).</P
><p class="para"><a class="indexterm" name="AUTOID-19225"></A
>The router is there to protect and control access to the internal net,
and the services host is there to interact with the outside world,
much like a bastion host. We call it a <em class="emphasis">services host,</EM
> rather than a bastion host, because it's often fulfilling
many other roles. For example, it's probably the mail server, Usenet
news server, and <span class="acronym">DNS</SPAN
> server for the site; it might
possibly be a file server, print server, and so on, as well; it might
even be the only machine the site has.</P
><p class="para">In this example, we're going to assume:

<ul class="itemizedlist"><li class="listitem"><p class="para">That the services host is the site's mail server, news server, and
<span class="acronym">DNS</SPAN
> server, but that it's not the only machine at the site.</P
></LI
><li class="listitem"><p class="para">As in the previous example, that internal users are trusted not to
actively try to circumvent the firewall, and that we have no particular
need to monitor or log their Internet activities.</P
></LI
><li class="listitem"><p class="para">Also as in the previous example, that you're using proper <span class="acronym">IP</SPAN
>
addresses: addresses that have been properly assigned to your
site and that are being properly routed and advertised to the rest of
the Internet by your service provider.</P
></LI
></UL
></P
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-09-S2-6">9.2.1 Service Configuration</A
></H3
><p class="para">How do we provide the basic Internet services with a screened host
architecture?</P
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-16">9.2.1.1 Telnet</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19245"></A
><a class="indexterm" name="AUTOID-19249"></A
>Telnet can be safely and conveniently provided through packet filtering.
 For this example, that's what we're going to do. We've discussed in the
previous sections how proxying Telnet is usually too expensive for its
benefits in a larger configuration; it's that much sillier here in the
screened host architecture. Similarly, providing incoming Telnet is
difficult in the larger configuration, and verges on the suicidal here,
where compromising the services host instantly compromises the entire
network. Therefore, we will not provide incoming Telnet service.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-17">9.2.1.2 <span class="acronym">FTP</SPAN
></A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19257"></A
><a class="indexterm" name="AUTOID-19261"></A
>
As in the screened subnet architecture, <span class="acronym">FTP</SPAN
> can be
safely and conveniently provided via packet filtering if our internal
<span class="acronym">FTP</SPAN
> clients support <span class="acronym">FTP</SPAN
>'s
passive mode. We'll need to set up an <span class="acronym">FTP</SPAN
> proxy
server on the services host if we wish to support clients that can't
use passive mode. We can support both passive- and normal-mode
<span class="acronym">FTP</SPAN
> clients, if needed, but doing so is not as
likely at a smaller site. At smaller sites, it's better to do one or
the other, rather than try to keep track of both. In this example,
we'll do only passive mode.</P
><p class="para">Be aware that in order to use an <span class="acronym">FTP</SPAN
> proxy server on
your services host, your filtering router would have to allow
<span class="acronym">TCP</SPAN
> connections from port 20 on external systems to
ports above 1023 on your services host. For a regular bastion host,
this wouldn't be a problem, because nothing should be using
such ports. For a services host that's also serving other purposes,
however, that may not be true.</P
><p class="para">Incoming user <span class="acronym">FTP</SPAN
> goes the same way as incoming
Telnet in any configuration. Because we've already decided to deny
incoming Telnet, we'll deny incoming user <span class="acronym">FTP</SPAN
> as
well.</P
><p class="para">As we've seen with the screened subnet architecture, incoming
anonymous <span class="acronym">FTP</SPAN
> is an acceptable risk when it's going
to a bastion host. However, it's not an acceptable risk going to the
services host, with confidential data and full access to the internal
network right there.  We will therefore deny it.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-18">9.2.1.3 <span class="acronym">SMTP</SPAN
></A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19282"></A
><a class="indexterm" name="AUTOID-19286"></A
>
In this architecture, there is probably only one good way to set up
<span class="acronym">SMTP</SPAN
>. Incoming mail should be directed (via
<span class="acronym">DNS</SPAN
> <span class="acronym">MX</SPAN
> records) to the services
host, and outgoing mail should go out via the services host.  There
really is no feasible alternative. As we've discussed above, it's
never advisable to let incoming mail go directly to all of your
internal machines. Also, once you're directing incoming mail through a
single point, it's actually easier&nbsp;- not to mention safer&nbsp;- to route
outgoing mail through there than to send it direct.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-19">9.2.1.4 <span class="acronym">NNTP</SPAN
></A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19297"></A
><a class="indexterm" name="AUTOID-19301"></A
>
As with <span class="acronym">SMTP</SPAN
>, there is probably only one good way
to set up <span class="acronym">NNTP</SPAN
> in the screened host architecture,
and that is to make another internal machine a
Usenet news server and allow
<span class="acronym">NNTP</SPAN
> directly to it. We could, if forced to do so,
make the services host a news server. However, it might be better to
forgo news altogether, given how much of a load news places on a
machine and how critical the services host is.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-20">9.2.1.5 <span class="acronym">HTTP</SPAN
></A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19312"></A
><a class="indexterm" name="AUTOID-19316"></A
>
As we've discussed in the previous example, <span class="acronym">HTTP</SPAN
>
can be provided directly via packet filtering or indirectly via a
proxy server.  However, it makes the most sense to provide
<span class="acronym">HTTP</SPAN
> indirectly via a caching proxy server such as
the <span class="acronym">CERN HTTP</SPAN
> server. There is one good reason for
this: better performance due to caching.</P
><p class="para">For this example, we're going to assume we're providing
<span class="acronym">HTTP</SPAN
> service via a <span class="acronym">CERN</SPAN
> proxy
server running on the services host. Once again, we decide to deny
service to external clients due to the risks (which are further
compounded by the sensitive position of the services host).</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-21">9.2.1.6 <span class="acronym">DNS</SPAN
></A
></H4
><a class="indexterm" name="AUTOID-19329"></A
><a class="indexterm" name="AUTOID-19333"></A
><p class="para">As with most of the other services, there is really only one good
place to put the <span class="acronym">DNS</SPAN
> server in the screened host
architecture: on the services host. For this example, we're going to
assume that:

<ul class="itemizedlist"><li class="listitem"><p class="para">The services host is your primary <span class="acronym">DNS</SPAN
> server.</P
></LI
><li class="listitem"><p class="para">You have an external <span class="acronym">DNS</SPAN
> secondary server for your
domain, e.g., one of your service provider's machines.</P
></LI
><li class="listitem"><p class="para">You're not going to do any <span class="acronym">DNS</SPAN
> information
hiding: you can't if the services host is your internal and external primary server.</P
></LI
></UL
></P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-09-S2-7">9.2.2 Packet Filtering Rules</A
></H3
><p class="para"><a class="indexterm" name="CH09PFER"></A
>Let's look at the packet filtering rules necessary to support the
screened host configuration we've described in the previous sections. 
As in the earlier example of the screened subnet architecture, we're
going to assume an &quot;ideal&quot; router. The router needs the
following rules to support the configuration we've outlined.</P
><p class="para"></P
><table class="informaltable"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Direc-</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Source</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Dest.</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Pro-</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Source</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Dest.</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"><span class="acronym">ACK</SPAN
></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
></TR
><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Rule</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">tion</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Address</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Address</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">tocol</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Port</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Port</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Set</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Action</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Spoof</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal </P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Deny</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Telnet-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">23</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Telnet-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">23</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">FTP</SPAN
>-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">21</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">FTP</SPAN
>-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">21</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">FTP</SPAN
>-3</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">FTP</SPAN
>-4</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Internal</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">SMTP</SPAN
>-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">25</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">SMTP</SPAN
>-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">25</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">SMTP</SPAN
>-3</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">25</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">SMTP</SPAN
>-4</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">25</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
>-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">News server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
> feed server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">119</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
>-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
> feed server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">News server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">119</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
>-3</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
> feed server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">News server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">119</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
>-4</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">News server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">NNTP</SPAN
> feed server</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">119</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">HTTP</SPAN
>-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">HTTP</SPAN
>-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">UDP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">[3]</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">UDP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">[3]</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-3</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">UDP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">[3]</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-4</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">UDP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">[3]</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-5</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-6</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-7</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">DNS</SPAN
>-8</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Services</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><span class="acronym">TCP</SPAN
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">53</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">&gt;1023</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Yes</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Permit</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Default-1</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Out</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Deny</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Default-2</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">In</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Any</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Deny</P
></TD
></TR
></TBODY
></TABLE
><blockquote class="footnote"><p class="para">[3] <span class="acronym">UDP</SPAN
> packets do not
have <span class="acronym">ACK</SPAN
> bits.</P
></BLOCKQUOTE
><p class="para">Here is some additional information about each set of rules in this
table:

<dl class="variablelist"><dt class="term"><em class="emphasis">Spoof</EM
></DT
><dd class="listitem"><p class="para">Blocks incoming packets that claim to have internal
<span class="acronym">IP</SPAN
> addresses, that is, forged packets, presumably
sent by an attacker.</P
></DD
><dt class="term"><em class="emphasis">Telnet-1 and Telnet-2</EM
></DT
><dd class="listitem"><p class="para">Allow outgoing Telnet connections.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">FTP</SPAN
>-1 through <span class="acronym">FTP</SPAN
>-4</EM
></DT
><dd class="listitem"><p class="para">Allow outgoing passive-mode <span class="acronym">FTP</SPAN
> connections. The
<span class="acronym">FTP</SPAN
>-1 and <span class="acronym">FTP</SPAN
>-2 rules allow the
command channel, and the <span class="acronym">FTP</SPAN
>-3 and
<span class="acronym">FTP</SPAN
>-4 rules allow the data channel. In fact,
<span class="acronym">FTP</SPAN
>-3 and <span class="acronym">FTP</SPAN
>-4 allow any
<span class="acronym">TCP</SPAN
> connection to be opened from the services host
to any host on the Internet, as long as the port numbers used on both
ends are above 1023.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">SMTP</SPAN
>-1 and <span class="acronym">SMTP</SPAN
>-2</EM
></DT
><dd class="listitem"><p class="para">Allow outgoing mail from the services host to the outside world.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">SMTP</SPAN
>-3 and <span class="acronym">SMTP</SPAN
>-4</EM
></DT
><dd class="listitem"><p class="para">Allow incoming mail from the outside world to the services host.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">NNTP</SPAN
>-1 to <span class="acronym">NNTP</SPAN
>-4</EM
></DT
><dd class="listitem"><p class="para">Allow Usenet news both ways between your news
server and your service provider's news server.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">HTTP</SPAN
>-1 and <span class="acronym">HTTP</SPAN
>-2</EM
></DT
><dd class="listitem"><p class="para">Allow the services host <span class="acronym">HTTP</SPAN
> proxy server to
connect to the <span class="acronym">HTTP</SPAN
> servers on any machine on the
Internet. Actually, these rules allow any <span class="acronym">TCP</SPAN
>
client program on the services host using a port above 1023 to contact
any server program on any host on the Internet using any port. This is
done so that the <span class="acronym">HTTP</SPAN
> proxy server can contact
<span class="acronym">HTTP</SPAN
> servers on nonstandard port numbers (i.e.,
other than port 80). As broad as these rules are, it's important that
these rules allow only outgoing connections; they can do this by
examining the <span class="acronym">ACK</SPAN
> bit. Note the overlap between
these rules and rules <span class="acronym">FTP</SPAN
>-3 and
<span class="acronym">FTP</SPAN
>-4; removing either set would still
allow both <span class="acronym">FTP</SPAN
> and <span class="acronym">HTTP</SPAN
> clients
access to most servers.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">DNS</SPAN
>-1</EM
></DT
><dd class="listitem"><p class="para">Allows <span class="acronym">UDP</SPAN
>-based <span class="acronym">DNS</SPAN
> queries and
answers from the services host <span class="acronym">DNS</SPAN
> server to
<span class="acronym">DNS</SPAN
> servers in the outside world.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">DNS</SPAN
>-2</EM
></DT
><dd class="listitem"><p class="para">Allows <span class="acronym">UDP</SPAN
>-based <span class="acronym">DNS</SPAN
> queries and
answers from Internet <span class="acronym">DNS</SPAN
> servers to the services
host <span class="acronym">DNS</SPAN
> server.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">DNS</SPAN
>-3 and <span class="acronym">DNS</SPAN
>-4</EM
></DT
><dd class="listitem"><p class="para">Allow external <span class="acronym">UDP</SPAN
>-based <span class="acronym">DNS</SPAN
>
clients to query the <span class="acronym">DNS</SPAN
> server on the services
host, and it to answer them.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">DNS</SPAN
>-5 and <span class="acronym">DNS</SPAN
>-6</EM
></DT
><dd class="listitem"><p class="para">Allow <span class="acronym">TCP</SPAN
>-based <span class="acronym">DNS</SPAN
> queries from
the services host to <span class="acronym">DNS</SPAN
> servers on the Internet,
as well as answers to those queries. Also allow zone transfers in which the
services host <span class="acronym">DNS</SPAN
> server is the secondary server
and an external <span class="acronym">DNS</SPAN
> server is the primary server.</P
></DD
><dt class="term"><em class="emphasis"><span class="acronym">DNS</SPAN
>-7 and <span class="acronym">DNS</SPAN
>-8</EM
></DT
><dd class="listitem"><p class="para">Allow <span class="acronym">TCP</SPAN
>-based <span class="acronym">DNS</SPAN
> queries from
the outside world to the services host <span class="acronym">DNS</SPAN
> server,
as well as answers to those queries. Also allow zone transfers in which the
services host <span class="acronym">DNS</SPAN
> server is the primary server and
an external <span class="acronym">DNS</SPAN
> server is the secondary server.</P
></DD
><dt class="term"><em class="emphasis">Default-1 and Default-2</EM
></DT
><dd class="listitem"><p class="para">Block all packets not specifically allowed by one of the preceding
rules.</P
></DD
></DL
><a class="indexterm" name="AUTOID-20085"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-09-S2-8">9.2.3 Analysis</A
></H3
><p class="para">Just how good a firewall is this? The short
answer is, &quot;not very.&quot; Let's consider it in relation to
the strategies and principles discussed in <a class="xref" href="ch03_01.htm" title="Security Strategies">Chapter 3</A
>, and in comparison to the screened subnet
architecture we configured in the first example.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-22">9.2.3.1 Least privilege</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-20093"></A
><a class="indexterm" name="AUTOID-20096"></A
>You can see the principle of least privilege in action in some places
in this setup. For example, configuring <span class="acronym">SMTP</SPAN
> so
that outgoing mail goes out via the services host rather than directly
to remote systems is an application of least privilege. Why? Because
it lets you control more tightly how internal systems connect to
external systems. (In this case, it makes it unnecessary for internal
systems to talk directly to external systems in order to provide this
service.)</P
><p class="para">On the other hand, having the services host fulfill so many roles (and
thus requiring it to have the aggregate set of privileges required for
all those roles) is definitely not in accord with the principle of least
privilege. The services host has far too much privilege for most of the
services it needs to provide.</P
><p class="para">The screened subnet architecture we described earlier in this chapter
does a somewhat better job of applying the principle of least privilege
than the screened host architecture described in this section.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-23">9.2.3.2 Defense in depth</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-20104"></A
><a class="indexterm" name="AUTOID-20106"></A
>The principle of defense in depth is almost completely missing from
this setup. Internal hosts are protected from the outside world by the
filtering router and the services host, but nothing protects them from
the services host if it is compromised. The filtering router and the
services host are providing separate protection, not backing each
other up. If either one is compromised, the entire site is
compromised.</P
><p class="para">The screened subnet architecture we described earlier in this chapter
does a much better job of applying the principle of defense in depth.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-24">9.2.3.3 Choke point</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-20113"></A
><a class="indexterm" name="AUTOID-20115"></A
>The principle of a choke point is clearly applied in this example of a
screened host architecture, because everything between internal clients
and the Internet comes through at least the filtering router. Further,
much of it comes through the services host, via proxies.</P
><p class="para">The screened subnet architecture described earlier in the chapter does
a slightly better job of applying the principle of a choke point, but
not by much.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-25">9.2.3.4 Weakest link</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-20122"></A
><a class="indexterm" name="AUTOID-20124"></A
>The obvious weak link to attack in the screened host architecture is the
services host. A compromised services host is going to severely affect
the security of the rest of the internal hosts, because it's on the same
network as these internal hosts and because there is nothing to protect
them from it. With the screened subnet architecture, on the other hand,
the interior router protects the internal hosts from the bastion host. </P
><p class="para">Further, because of the multitude of services being provided by the
services host, it's more likely an attacker will be able to
find a way to break in than with the bastion host in the screened subnet
example.</P
><p class="para">All in all, the screened subnet architecture presents a much stronger
&quot;weakest link&quot; to an attacker.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-26">9.2.3.5 Fail-safe stance</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-20132"></A
><a class="indexterm" name="AUTOID-20134"></A
>You can see the principle of a fail-safe stance applied through the
packet filtering rules specified for the screened host architecture. In
general, the rules specify what you're going to allow, and deny
everything else by default. This is a fail-safe approach, because if
something unanticipated comes along (for example, a new service), it
won't be allowed through your firewall, unless, of course, it mimics
or is tunneled through some other service that you do allow.</P
><p class="para">However, the design of the screened host architecture itself is not
fail-safe. If the services host is compromised, your whole site's
security is severely compromised. The screened subnet architecture is
much better about this.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-27">9.2.3.6 Universal participation</A
></H4
><p class="para">If this is your site's only connection to the Internet, you've got
involuntary universal participation: everybody has to go through the
firewall to get to the Internet. Voluntary universal participation
would be better, but that would require some user education concerning
the goals of and the need for your security measures. </P
><p class="para">In terms of the universal participation principle, there really isn't
much difference between the screened subnet and screened host
architectures.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="FIRE-09-S3-28">9.2.3.7 Diversity of defense</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-20145"></A
>There are few opportunities here to apply the principle of
diversity of defense, because you pretty much have only one of
everything: there is only one router on which to set up filtering and
only one services host. </P
><p class="para">This is another area in which the screened subnet architecture is
superior to the screened host architecture.</P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-09-S2-9">9.2.4 Conclusions</A
></H3
><p class="para">The screened host architecture may be cheaper to implement than the
screened subnet architecture, but it's much less secure. There is
little or no redundancy in the design, and it's not really fail-safe. 
Even so, it is providing fewer services than the screened subnet
architecture, and it can't increase either the security or the services.</P
><p class="para">To do a screened host architecture right, you pretty much need to
dedicate a machine to being the services host and nothing else; you
essentially need a bastion host. At that point, if you compare the
equipment between a screened subnet architecture and a screened host
architecture, you see that the only difference in equipment is either:

<ul class="itemizedlist"><li class="listitem"><p class="para">For a two-router screened subnet architecture&nbsp;- a second router.</P
></LI
><li class="listitem"><p class="para">For a one-router screened subnet architecture&nbsp;- a third interface
on your single router.</P
></LI
></UL
></P
><p class="para">The cost of a suitable second router really isn't that much: a couple
of thousand dollars. The cost of an additional interface for a router
is often much less: a few hundred dollars difference in price between
a two-interface and a three-interface model of the same router. The
incremental cost might actually be nothing if you already have a
suitable spare <span class="acronym">PC</SPAN
> lying around, and if you can use
one of the <span class="acronym">PC</SPAN
>-based filtering packages freely
available off the Internet (such as Drawbridge or KarlBridge,
described in <a class="xref" href="appb_01.htm" title="Tools">Appendix B, <cite class="appendix">Tools</CITE
></A
>).</P
><p class="para">The difference between the screened subnet architecture and the screened
host architecture is gigantic in terms of security, scalability, and
services. You can't reasonably offer inbound services of even the most
limited type in a screened host architecture. You can't increase
anything, even the number of supportable machines, without making an
architecture change.<a class="indexterm" name="AUTOID-20163"></A
><a class="indexterm" name="AUTOID-20164"></A
><a class="indexterm" name="AUTOID-20165"></A
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_01.htm" title="9.1 Screened Subnet Architecture"><img src="../gifs/txtpreva.gif" alt="Previous: 9.1 Screened Subnet Architecture" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Building Internet Firewalls"><img src="../gifs/txthome.gif" alt="Building Internet Firewalls" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch10_01.htm" title="10. Authentication and Inbound Services"><img src="../gifs/txtnexta.gif" alt="Next: 10. Authentication and Inbound Services" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">9.1 Screened Subnet Architecture</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_a.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">10. Authentication and Inbound Services</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
