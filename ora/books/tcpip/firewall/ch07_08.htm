<html><head>
<title>[Chapter 7] 7.8 What If You Can't Proxy?</TITLE>
<meta name="DC.title" content="Building Internet Firewalls"><meta name="DC.creator" content="D. Brent Chapman &amp; Elizabeth D. Zwicky"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:19:11Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-124-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch07_01.htm" title="7. Proxy Systems"><link rel="prev" href="ch07_07.htm#FIRE-07-S2-16" title="7.7 Using the TIS Internet Firewall Toolkit for Proxying"><link rel="next" href="ch08_01.htm" title="8. Configuring Internet Services"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Building Internet Firewalls" usemap="#srchmap" border="0"></H1
><map name="srchmap"index.html><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Building Internet Firewalls"><area shape="RECT" coords="467,0,514,18" href="../search/fsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch07_07.htm#FIRE-07-S2-16" title="7.7 Using the TIS Internet Firewall Toolkit for Proxying"><img src="../gifs/txtpreva.gif" alt="Previous: 7.7 Using the TIS Internet Firewall Toolkit for Proxying" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 7<br>Proxy Systems</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch08_01.htm" title="8. Configuring Internet Services"><img src="../gifs/txtnexta.gif" alt="Next: 8. Configuring Internet Services" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="FIRE-07-S1-8">7.8 What If You Can't Proxy?</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-7673"></A
>You might find yourself unable to proxy a service for one of three
reasons:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">There's no proxy server available.</P
></LI
><li class="listitem"><p class="para">Proxying doesn't secure the service sufficiently.</P
></LI
><li class="listitem"><p class="para">You can't modify the client, and the protocol doesn't allow you to use
modified procedures.</P
></LI
></UL
><p class="para">We describe each of these situations in the following sections.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-07-S2-17">7.8.1 No Proxy Server Is Available</A
></H3
><p class="para">If the service is proxyable, but you can't find a modified-procedure
server or modified clients for your platform, you can always do the
work yourself. Modifying a normal <span class="acronym">TCP</SPAN
> client
program to use <span class="acronym">SOCKS</SPAN
> is relatively trivial. As long
as the <span class="acronym">SOCKS</SPAN
> libraries are available for the
platform you're interested in, it's usually a matter of changing a few
library calls and recompiling. You do have to have the source for the
client.</P
><p class="para">Writing your own modified-procedure server is considerably more
difficult, because it means writing the server from scratch. </P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-07-S2-18">7.8.2 Proxying Won't Secure the Service</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7694"></A
>If you need to use a service that's inherently insecure, proxying
can't do much for you. You're going to need to set up a victim
machine, as described in <a class="xref" href="ch05_01.htm" title="Bastion Hosts">Chapter 5</A
>, and let people
run the service there. This may be difficult if you're using a
dual-homed nonrouting host to make a firewall where all connections
must be proxied; the victim machine is going to need to be on the
Internet side of the dual-homed host.</P
><p class="para">Using an intelligent application-level server that filters out
insecure commands may help, but requires extreme caution in
implementing the server and may make important parts of the service
nonfunctional.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="FIRE-07-S2-19">7.8.3 Can't Modify Client or Procedures</A
></H3
><p class="para">There are some services that just don't have room for modifying user
procedures (for example <em class="emphasis">ping</EM
> and
<em class="emphasis">traceroute)</EM
>. Fortunately, services that don't
allow the user to pass any data to the server tend to be small,
stupid, and safe. You may be able to safely provide them on the
bastion host, letting users log in to the bastion host but giving them
a shell that only allows them to run the un-proxyable services you
want to support.<a class="indexterm" name="AUTOID-7704"></A
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch07_07.htm#FIRE-07-S2-16" title="7.7 Using the TIS Internet Firewall Toolkit for Proxying"><img src="../gifs/txtpreva.gif" alt="Previous: 7.7 Using the TIS Internet Firewall Toolkit for Proxying" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Building Internet Firewalls"><img src="../gifs/txthome.gif" alt="Building Internet Firewalls" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch08_01.htm" title="8. Configuring Internet Services"><img src="../gifs/txtnexta.gif" alt="Next: 8. Configuring Internet Services" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">7.7 Using the TIS Internet Firewall Toolkit for Proxying</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_a.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">8. Configuring Internet Services</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
