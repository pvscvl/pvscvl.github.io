<html><head>
<title>[Chapter 2] 2.2 File Transfer</TITLE>
<meta name="DC.title" content="Building Internet Firewalls"><meta name="DC.creator" content="D. Brent Chapman &amp; Elizabeth D. Zwicky"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:09:01Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-124-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" title="2. Internet Services"><link rel="prev" href="ch02_01.htm" title="2.1 Electronic Mail"><link rel="next" href="ch02_03.htm" title="2.3 Remote Terminal Access and Command Execution"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Building Internet Firewalls" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Building Internet Firewalls"><area shape="RECT" coords="467,0,514,18" href="../search/fsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_01.htm" title="2.1 Electronic Mail"><img src="../gifs/txtpreva.gif" alt="Previous: 2.1 Electronic Mail" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 2<br>Internet Services</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_03.htm" title="2.3 Remote Terminal Access and Command Execution"><img src="../gifs/txtnexta.gif" alt="Next: 2.3 Remote Terminal Access and Command Execution" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="FIRE-02-S1-2">2.2 File Transfer</A
></H2
><p class="para"><a class="indexterm" name="CH02TRANSFERFILES"></A
><a class="indexterm" name="CH02FILESTRANSFER"></A
><a class="indexterm" name="AUTOID-729"></A
>Electronic mail transfers data from place to place, but
it's designed for small files, in human-readable form. Electronic mail
transfer protocols are allowed to make changes in a message that are
acceptable to humans (for instance, inserting &quot;&gt;&quot; before
the word &quot;from&quot; at the beginning of a line, so that the
mailer doesn't get it confused with a header line), but are
unacceptable to programs.[1]</P
><blockquote class="footnote"><p class="para">[1] Inserting &quot;&gt;&quot; before &quot;from&quot; is so common that
some published books still contain the occasional &quot;&gt;from&quot; in
the text, where the &quot;&gt;&quot; was inserted as authors exchanged
drafts via electronic mail.</P
></BLOCKQUOTE
><p class="para">Although electronic mail systems these days include
elaborate workarounds for such problems, so that a large binary file
may be split into small pieces and encoded on the sending side and
decoded and reassembled on the receiving side, the workarounds are
cumbersome and error prone. Also, people may want to actively go out
and look for files, instead of waiting for someone to send
them. Therefore, even when electronic mail is available it's
useful to have a method designed for transferring files on request.</P
><p class="para"><a class="indexterm" name="CH02FTP"></A
><a class="indexterm" name="AUTOID-739"></A
>File Transfer Protocol (<span class="acronym">FTP</SPAN
>) is the Internet
standard protocol for this purpose. In theory, allowing your users to
bring files in is not an increase of risk over allowing electronic
mail; in fact, some sites offer services allowing you to access
<span class="acronym">FTP</SPAN
> via email. In practice, however, people will do
more file transfers when <span class="acronym">FTP</SPAN
> is available, and are
more likely to bring in undesirable programs and data.</P
><p class="para">What makes these programs and data undesirable? The primary worry at
most sites is that users will bring in Trojan horse software. Although
this can happen, actually the larger concern is that users will bring
in computer games, pirated software, and pornographic pictures, which
tend to take up an annoying amount of time and disk space, but don't
represent a major security risk. If you make sure to do the following,
then you can consider inbound <span class="acronym">FTP</SPAN
> to be a
reasonably safe service that eases access to important Internet
resources:

<ul class="itemizedlist"><li class="listitem"><p class="para">Educate your users to appropriately mistrust any software they
bring in via <span class="acronym">FTP</SPAN
>.</P
></LI
><li class="listitem"><p class="para">Communicate to users your site's guidelines about sexual
harassment policies and organizational resource usage. </P
></LI
></UL
></P
><p class="para"><a class="indexterm" name="AUTOID-755"></A
><a class="indexterm" name="AUTOID-757"></A
>How about the other side of the coin: allowing other people to use FTP
to transfer files from your computers? This is somewhat riskier.
Anonymous <span class="acronym">FTP</SPAN
> is an extremely popular mechanism for
giving remote users access to files without having to give them full
access to your machine. If you run an <span class="acronym">FTP</SPAN
> server,
you can let users retrieve files you've placed in a separate, public
area of your system without letting them log in and potentially get
access to everything on your system. Your site's anonymous
<span class="acronym">FTP</SPAN
> area can be your organization's public archive
of papers, standards, software, graphics images, and information of
other kinds that people need
 from you or that you want to share with
them. For many organizations, establishing an <span class="acronym">FTP</SPAN
>
site is the first step towards doing business on the Internet.</P
><p class="para">To get access to the files you've made available, users log
into your system using <span class="acronym">FTP</SPAN
> with the special login
name &quot;anonymous.&quot; Most sites request that users enter their own email
address, in response to the password prompt, as a courtesy so that the site
can track who is using the anonymous <span class="acronym">FTP</SPAN
> server, but
this requirement is rarely enforced (mostly because there is no easy way
to verify the validity of an email address).</P
><p class="para">In setting up an anonymous <span class="acronym">FTP</SPAN
> server, you'll need
to ensure that people who use it can't get access to other areas or
files on the system, and that they can't use <span class="acronym">FTP</SPAN
> to
get shell-level access to the system itself. Writable directories in
the anonymous <span class="acronym">FTP</SPAN
> area are a special concern, as
we'll see in <a class="xref" href="ch08_01.htm" title="Configuring Internet Services">Chapter 8</A
>.</P
><p class="para">You'll also need to ensure that your users don't use the server
inappropriately. It can be very tempting for people to put up files
that they want specific people to read. Many times
people don't realize that anybody on the Internet can read them, or
they do realize this, but believe in security through
obscurity. Unfortunately for these innocents, a number of tools
attempt to index anonymous <span class="acronym">FTP</SPAN
> servers, and they
succeed in removing most of the obscurity.<a class="indexterm" name="AUTOID-774"></A
></P
><p class="para"><a class="indexterm" name="AUTOID-776"></A
><a class="indexterm" name="AUTOID-778"></A
>You may have heard of other file transfer protocols. Trivial File
Transport Protocol (<span class="acronym">TFTP</SPAN
>) is a simplified
<span class="acronym">FTP</SPAN
> protocol that diskless
machines use to transfer information. It's extremely simple so that it can
be built into hardware, and therefore supports no authentication.
There's no reason to provide <span class="acronym">TFTP</SPAN
> access outside of
your network; ordinary users don't transfer files with
<span class="acronym">TFTP</SPAN
>.</P
><p class="para"><a class="indexterm" name="AUTOID-786"></A
><span class="acronym">UUCP</SPAN
> (<span class="acronym">UNIX</SPAN
> to
<span class="acronym">UNIX</SPAN
> CoPy) is an older file transfer protocol used
over modems, and it is sometimes still used for the transfer of
Usenet news and email even over the Internet, particularly by sites
with intermittent Internet connections. Such sites use
<span class="acronym">UUCP</SPAN
>-over-<span class="acronym">TCP</SPAN
> to obtain their
email from their service provider whenever they bring their network
connection up. While it used to be common, few sites now provide
anonymous <span class="acronym">UUCP</SPAN
> service for file access. As a file
transfer protocol, it is of interest only to people
who don't have an Internet connection and use modems. Unless your
entire business involves providing information for downloading,
<span class="acronym">UUCP</SPAN
> is probably not useful for your
external users.</P
><p class="para"><a class="indexterm" name="AUTOID-796"></A
><a class="indexterm" name="AUTOID-798"></A
>File Service Protocol (<span class="acronym">FSP</SPAN
>) is a file transfer
protocol developed for circumventing <span class="acronym">FTP</SPAN
>
restrictions. Ordinary users can't set up <span class="acronym">FTP</SPAN
>
servers, but they can set up <span class="acronym">FSP</SPAN
> servers, and
<span class="acronym">FSP</SPAN
> transfers will go through when
<span class="acronym">FTP</SPAN
> transfers have been blocked. There are two
disadvantages in setting up an <span class="acronym">FSP</SPAN
> server:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Security is not a particular concern to the designers
and users of <span class="acronym">FSP</SPAN
>; although it shouldn't inherently
reduce the security of your machine, it's susceptible to the same
kinds of bugs as <span class="acronym">FTP</SPAN
>, and fewer attempts have been
made to avoid or fix them.</P
></LI
><li class="listitem"><p class="para">Providing <span class="acronym">FSP</SPAN
> service is not going to make friends
for you among remote system administrators, since the point of FSP is
to allow people to transfer files after their sites have decided to
block file transfers.</P
></LI
></UL
><p class="para"><span class="acronym">FSP</SPAN
> does have some actual advantages over
<span class="acronym">FTP</SPAN
>&nbsp;- being designed for stealth makes it a very
sparing user of resources&nbsp;- but there are almost no legitimate
<span class="acronym">FSP</SPAN
> users, and its history makes it unlikely 
there will be many.</P
><p class="para"><a class="indexterm" name="AUTOID-821"></A
>Within a site, you may want to use <em class="emphasis">rcp</EM
> to
transfer files between systems. <em class="emphasis">rcp</EM
> (described in
<a class="xref" href="ch08_01.htm" title="Configuring Internet Services">Chapter 8</A
> with the rest of the so-called
&quot;Berkeley `r' commands&quot;) is a file transfer program
that behaves like an extended version of the <span class="acronym">UNIX</SPAN
>
<em class="emphasis">cp</EM
> command. It is inappropriate for use across
the Internet, because it uses a trusted host authentication model.
Rather than requiring user authentication on the remote machine, it
looks at the <span class="acronym">IP</SPAN
> address of the host the request is
coming from. Unfortunately, you can't know that packets are really
coming from that host.<a class="indexterm" name="AUTOID-829"></A
><a class="indexterm" name="AUTOID-830"></A
></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_01.htm" title="2.1 Electronic Mail"><img src="../gifs/txtpreva.gif" alt="Previous: 2.1 Electronic Mail" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Building Internet Firewalls"><img src="../gifs/txthome.gif" alt="Building Internet Firewalls" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_03.htm" title="2.3 Remote Terminal Access and Command Execution"><img src="../gifs/txtnexta.gif" alt="Next: 2.3 Remote Terminal Access and Command Execution" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">2.1 Electronic Mail</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_a.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">2.3 Remote Terminal Access and Command Execution</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
