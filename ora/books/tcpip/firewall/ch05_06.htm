<html><head>
<title>[Chapter 5] 5.6 Selecting Services Provided by the Bastion Host</TITLE>
<meta name="DC.title" content="Building Internet Firewalls"><meta name="DC.creator" content="D. Brent Chapman &amp; Elizabeth D. Zwicky"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:14:20Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-124-0" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch05_01.htm" title="5. Bastion Hosts"><link rel="prev" href="ch05_05.htm" title="5.5 Locating the Bastion Host on the Network"><link rel="next" href="ch05_07.htm" title="5.7 Don't Allow User Accounts on the Bastion Host"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="Building Internet Firewalls" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="Building Internet Firewalls"><area shape="RECT" coords="467,0,514,18" href="../search/fsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch05_05.htm" title="5.5 Locating the Bastion Host on the Network"><img src="../gifs/txtpreva.gif" alt="Previous: 5.5 Locating the Bastion Host on the Network" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 5<br>Bastion Hosts</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch05_07.htm" title="5.7 Don't Allow User Accounts on the Bastion Host"><img src="../gifs/txtnexta.gif" alt="Next: 5.7 Don't Allow User Accounts on the Bastion Host" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="FIRE-05-S1-6">5.6 Selecting Services Provided by the
Bastion Host</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-2743"></A
><a class="indexterm" name="AUTOID-2746"></A
>The bastion host provides any services your site needs to access the
Internet, or wants to offer to the Internet&nbsp;- services you don't
feel secure providing directly via packet filtering. (<a class="xref" href="#FIRE-05-FIG-1" title="The bastion host may run a variety of Internet services">Figure 5.1</A
> shows a typical set.) You should not put any
services on the bastion host not intended to be used to or from the
Internet. For example, it shouldn't provide booting services for
internal hosts (unless, for some reason, you intend to provide booting
services for hosts on the Internet). You have to assume that the
bastion host will be compromised, and that all services on it will be
available to the Internet.</P
><h4 class="figure"><a class="title" name="FIRE-05-FIG-1">Figure 5.1: The bastion host may run a variety of Internet services</A
></H4
><img class="graphic" src="figs/fire0501.gif" alt="Figure 5.1"><p class="para">You can divide services into four classes:</P
><dl class="variablelist"><dt class="term"><em class="emphasis">Services that are secure</EM
></DT
><dd class="listitem"><p class="para">Services in this category can be provided via packet
filtering, if you're using this approach. (In a pure-proxy firewall,
<em class="emphasis">everything</EM
> must be provided on the bastion host
or not provided at all.)</P
></DD
><dt class="term"><em class="emphasis">Services that are insecure as normally provided but can be
secured</EM
></DT
><dd class="listitem"><p class="para">Services in this category can be provided on the
bastion host.</P
></DD
><dt class="term"><em class="emphasis">Services that are insecure as normally provided and can't be
secured</EM
></DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-2771"></A
><a class="indexterm" name="AUTOID-2773"></A
>These will have to be disabled and provided on a
victim host (discussed above) if you absolutely need them.</P
></DD
><dt class="term"><em class="emphasis">Services that you don't use, or that you don't use in
conjunction with the Internet</EM
></DT
><dd class="listitem"><p class="para">You must disable services in
this category.</P
></DD
></DL
><p class="para">We'll discuss individual services in detail in <a class="xref" href="ch08_01.htm" title="Configuring Internet Services">Chapter 8, <cite class="chapter">Configuring Internet Services</CITE
></A
>, but here we cover the most commonly provided
and denied services for bastion hosts.</P
><p class="para"><a class="indexterm" name="AUTOID-2785"></A
><a class="indexterm" name="AUTOID-2787"></A
>Electronic mail (<span class="acronym">SMTP</SPAN
>) is the most basic of the
services bastion hosts normally provide. You may also want to access
or provide information services such as:</P
><ul class="itemizedlist"><li class="listitem"><p class="para"><span class="acronym">FTP</SPAN
>&nbsp;- file transfer</P
></LI
><li class="listitem"><p class="para">Gopher&nbsp;- menu-based information retrieval</P
></LI
><li class="listitem"><p class="para"><span class="acronym">WAIS</SPAN
>&nbsp;- keyword-search information retrieval</P
></LI
><li class="listitem"><p class="para"><span class="acronym">HTTP</SPAN
>&nbsp;- hypertext-driven information retrieval (the World Wide
Web)</P
></LI
><li class="listitem"><p class="para"><span class="acronym">NNTP</SPAN
>&nbsp;- Usenet news</P
></LI
></UL
><p class="para"><a class="indexterm" name="AUTOID-2806"></A
>In order to support any of these services (including
<span class="acronym">SMTP</SPAN
>), you must access and provide domain name
service (<span class="acronym">DNS</SPAN
>). <span class="acronym">DNS</SPAN
> is seldom
used directly, but it underlies all the other protocols by providing
the means to translate hostnames to <span class="acronym">IP</SPAN
> addresses
and vice versa, as well as providing other distributed information
about sites and hosts.</P
><p class="para"><a class="indexterm" name="AUTOID-2813"></A
>You may also want to provide some version of the
<em class="emphasis">finger</EM
> service, to provide information about your
site and the people at it. However, you should decide what information
you want people to have, and use a modified
<em class="emphasis">finger</EM
> daemon that provides only that. It is
generally not desirable to tell the world which accounts are available
on the bastion host and which are in use. Not only is this information
useful to attackers, it's useless to genuine inquirers, who want to
know information about your site as a whole, not about the bastion
host in particular. The section on <em class="emphasis">finger</EM
> in
<a class="xref" href="ch08_01.htm" title="Configuring Internet Services">Chapter 8</A
> discusses some possible modified
<em class="emphasis">finger</EM
> daemons.</P
><p class="para">The book <cite class="citetitle">Managing Internet Information
Services</CITE
>, referenced above, has a good chapter on
providing information services through <em class="emphasis">finger</EM
>,
<em class="emphasis">inetd</EM
>, and Telnet. One particular technique
described, that of creating &quot;captured&quot; or
&quot;no-break&quot; shells, creates site-specific
modified-procedure proxy services fairly easily. These services are a
way for users within your network to be able to run<a class="indexterm" name="AUTOID-2824"></A
><a class="indexterm" name="AUTOID-2826"></A
>
<em class="emphasis">ping</EM
> or <em class="emphasis">traceroute</EM
> against
external hosts, from a captured shell on the bastion host.</P
><p class="para"><a class="indexterm" name="AUTOID-2831"></A
><a class="indexterm" name="AUTOID-2833"></A
>Many <span class="acronym">LAN</SPAN
>-oriented services include vulnerabilities
that attackers can exploit from outside, and all of them are
opportunities for an attacker who has succeeded in compromising the
bastion host. Basically, you should disable anything that you aren't
going to use, and you should choose what to use very carefully.</P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch05_05.htm" title="5.5 Locating the Bastion Host on the Network"><img src="../gifs/txtpreva.gif" alt="Previous: 5.5 Locating the Bastion Host on the Network" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="Building Internet Firewalls"><img src="../gifs/txthome.gif" alt="Building Internet Firewalls" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch05_07.htm" title="5.7 Don't Allow User Accounts on the Bastion Host"><img src="../gifs/txtnexta.gif" alt="Next: 5.7 Don't Allow User Accounts on the Bastion Host" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">5.5 Locating the Bastion Host on the Network</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_a.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">5.7 Don't Allow User Accounts on the Bastion Host</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
