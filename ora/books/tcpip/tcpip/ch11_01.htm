<html><head>
<title>[Chapter 11] Troubleshooting TCP/IP </TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:40:11Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="index.htm" title="TCP/IP Network Administration"><link rel="prev" href="ch10_09.htm" title="10.9 Summary "><link rel="next" href="ch11_02.htm" title="11.2 Diagnostic Tools "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch10_09.htm" title="10.9 Summary "><img src="../gifs/txtpreva.gif" alt="Previous: 10.9 Summary " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 11</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch11_02.htm" title="11.2 Diagnostic Tools "><img src="../gifs/txtnexta.gif" alt="Next: 11.2 Diagnostic Tools " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="TCP2-CH-11">11. Troubleshooting TCP/IP </A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="SECT1" href="#TCP2-CH-11-SECT-1" title="11.1 Approaching a Problem ">Approaching a Problem </A
><br><a class="SECT1" href="ch11_02.htm" title="11.2 Diagnostic Tools ">Diagnostic Tools </A
><br><a class="SECT1" href="ch11_03.htm#TCP2-CH-11-SECT-3.1" title="11.3 Testing Basic Connectivity ">Testing Basic Connectivity </A
><br><a class="SECT1" href="ch11_04.htm#TCP2-CH-11-SECT-4.3" title="11.4 Troubleshooting Network Access ">Troubleshooting Network Access </A
><br><a class="SECT1" href="ch11_05.htm#TCP2-CH-11-SECT-5.2" title="11.5 Checking Routing ">Checking Routing </A
><br><a class="SECT1" href="ch11_06.htm" title="11.6 Checking Name Service ">Checking Name Service </A
><br><a class="SECT1" href="ch11_07.htm#TCP2-CH-11-SECT-7.1" title="11.7 Analyzing Protocol Problems ">Analyzing Protocol Problems </A
><br><a class="SECT1" href="ch11_08.htm" title="11.8 Protocol Case Study ">Protocol Case Study </A
><br><a class="SECT1" href="ch11_09.htm" title="11.9 Simple Network Management Protocol ">Simple Network Management Protocol </A
><br><a class="SECT1" href="ch11_10.htm" title="11.10 Summary ">Summary </A
></P
><p></P
></DIV
><p class="para"><a class="indexterm" name="AUTOID-15183"></A
>Network administration tasks fall into two very different categories:
configuration and troubleshooting. Configuration tasks prepare for the
expected; they require detailed knowledge of command syntax,
but are usually simple and predictable. Once a system is properly
configured, there is rarely any reason to change it. The configuration
process is repeated each time a new operating system release is
installed, but with very few changes.</P
><p class="para">In contrast, network troubleshooting deals with the unexpected.<a class="indexterm" name="AUTOID-15188"></A
>
Troubleshooting frequently requires knowledge that is conceptual rather
than detailed. Network problems are usually unique and sometimes
difficult to resolve. Troubleshooting is an important part of
maintaining a stable, reliable network service.</P
><p class="para"><a class="indexterm" name="TCP2-CH-11-IX-NETWORK-PROBLEMS-HOW-TO-APPROACH"></A
>In this chapter, we discuss the tools you will use to ensure that the
network is in good running condition. However, good tools are not
enough. No troubleshooting tool is effective if applied
haphazardly. Effective troubleshooting requires a methodical approach
to the problem, and a basic understanding of how the network
works. We'll start our discussion by looking at ways to approach a
network problem.</P
><div class="sect1"><h2 class="sect1"><a class="title" name="TCP2-CH-11-SECT-1">11.1 Approaching a Problem </A
></H2
><p class="para">To approach a problem properly, you need a basic understanding of<a class="indexterm" name="AUTOID-15197"></A
>
TCP/IP. The first few chapters of this book discuss the basics of
TCP/IP and provide enough background information to troubleshoot most
network problems. Knowledge of how TCP/IP routes data through the
network, between individual hosts, and between the layers in the<a class="indexterm" name="AUTOID-15200"></A
>
protocol stack, is important for understanding a network problem. But
detailed knowledge of each protocol usually isn't necessary. When you need these details, look them up in a definitive reference&nbsp;- don't try to
recall them from memory.</P
><p class="para">Not all TCP/IP problems are alike, and not all problems can be
approached in the same manner. But the key to solving any problem is
understanding what the problem is. This is not as easy as it may
seem. The &quot;surface&quot; problem is sometimes misleading, and the &quot;real&quot;
problem is frequently obscured by many layers of software. Once you understand the
true nature of the problem, the solution to the problem
is often obvious.</P
><p class="para"><a class="indexterm" name="AUTOID-15205"></A
>First, gather detailed information about exactly what's happening.
When a user reports a problem, talk to her. Find out which
application failed. What is the remote host's name and IP address?
What is the user's hostname and address? What error message was
displayed? If possible, verify the problem by having the user run the
application while you talk her through it. If possible, duplicate the
problem on your own system.</P
><p class="para">Testing from the user's system, and other systems, find out:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Does the problem occur in other applications on the user's host, or is
only one application having trouble? If only one application is
involved, the application may be misconfigured or disabled on the
remote host. Because of security concerns, many systems disable some
services.</P
></LI
><li class="listitem"><p class="para">Does the problem occur with only one remote host, all remote hosts, or
only certain &quot;groups&quot; of remote hosts? If only one remote host is
involved, the problem could easily be with that host. If all remote
hosts are involved, the problem is probably with the user's system
(particularly if no other hosts on your local network are experiencing
the same problem). If only hosts on certain subnets or external
networks are involved, the problem may be related to routing.</P
></LI
><li class="listitem"><p class="para">Does the problem occur on other local systems? Make sure you check
other systems on the same subnet. If the problem only occurs on the
user's host, concentrate testing on that system. If
the problem
affects every system on a subnet, concentrate on the router for that
subnet.</P
></LI
></UL
><p class="para">Once you know the symptoms of the problem, visualize each protocol and
device that handles the data. Visualizing the problem will help you
avoid oversimplification, and keep you from assuming that you know the
cause even before you start testing. Using your TCP/IP knowledge,
narrow your attack to the most likely causes of the problem, but keep
an open mind.<a class="indexterm" name="AUTOID-15217"></A
></P
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-11-SECT-1.1">11.1.1 Troubleshooting Hints </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-11-IX-TROUBLESHOOTING-HINTS"></A
>Below we offer several useful troubleshooting hints. They
are not part of a troubleshooting methodology&nbsp;- just good ideas to keep in
mind.</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Approach problems methodically. Allow the information gathered from
each test to guide your testing. Don't jump on a hunch into another test
scenario without ensuring that you can pick up your
original scenario where you left off.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15229"></A
>Work carefully through the problem, dividing it into manageable pieces.
Test each piece before moving on to the next. For example, when
testing a network connection, test each part of the network until you
find the problem.</P
></LI
><li class="listitem"><p class="para">Keep good records of the tests you have completed and their results.<a class="indexterm" name="AUTOID-15233"></A
>
Keep a historical record of the problem in case it reappears.</P
></LI
><li class="listitem"><p class="para">Keep an open mind. Don't assume too much about the cause of the<a class="indexterm" name="AUTOID-15238"></A
>
problem. Some people believe their network
is always at fault, while others assume the remote end is always the
problem. Some are so sure they know the cause of a problem that
they ignore the evidence of the tests. Don't fall into these traps.
Test each possibility and base your actions on the evidence of the
tests.</P
></LI
><li class="listitem"><p class="para">Be aware of security barriers. Security firewalls sometimes block<a class="indexterm" name="AUTOID-15242"></A
>
<b class="emphasis.bold">ping</B
>, <b class="emphasis.bold">traceroute</B
>, and even ICMP error messages. If problems
seem to cluster around a specific remote site, find out if they have a
firewall.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15249"></A
>Pay attention to error messages. Error messages are often vague, but
they frequently contain important hints for solving the problem.</P
></LI
><li class="listitem"><p class="para">Duplicate the reported problem yourself. Don't rely too heavily on the
user's problem report. The user has probably only seen this problem
from the application level. If necessary, obtain the user's data files
to duplicate the problem. Even if you cannot duplicate the problem,
log the details of the reported problem for your records.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15257"></A
><a class="indexterm" name="AUTOID-15259"></A
>Most problems are caused by human error. You can prevent some of these errors<a class="indexterm" name="AUTOID-15262"></A
>
by providing information and training on network configuration and
usage.</P
></LI
><li class="listitem"><p class="para">Keep your users informed. This reduces the number of duplicated
trouble reports, and the duplication of effort when several system
administrators work on the same problem without knowing others are
already working on it. If you're lucky, someone may have seen the
problem before and have a helpful suggestion about how to resolve it.</P
></LI
><li class="listitem"><p class="para">Don't speculate about the cause of the problem while talking to the
user. Save your speculations for discussions with your networking
colleagues. Your speculations may be accepted by the user as gospel,
and become rumors. These rumors can cause users to avoid using
legitimate network services and may undermine confidence in your<a class="indexterm" name="AUTOID-15269"></A
>
network. Users want solutions to their problems; they're not
interested in speculative techno-babble.</P
></LI
><li class="listitem"><p class="para">Stick to a few simple troubleshooting tools. For most TCP/IP software
problems, the tools discussed in this chapter are sufficient. Just learning how to use a new tool is often more time-consuming than solving the problem with an old familiar tool.</P
></LI
><li class="listitem"><p class="para">Thoroughly test the problem at your end of the network before locating
the owner of the remote system to coordinate testing with him. The
greatest difficulty of network troubleshooting is that you do not
always control the systems at both ends of the network. In many cases,<a class="indexterm" name="AUTOID-15275"></A
>
you may not even know who does control the remote system.
[1]
The more information you have about your end, the simpler the job will be when
you have to contact the remote administrator.</P
><blockquote class="footnote"><p class="para">[1] <a class="xref" href="ch13_01.htm" title="Internet Information Resources ">Chapter 13, <cite class="chapter">Internet Information Resources </CITE
></A
> explains how to find out who is responsible for a remote
network</P
></BLOCKQUOTE
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15284"></A
>Don't neglect the obvious. A loose or damaged cable is always a
possible problem. Check plugs, connectors, cables, and switches.
Small things can cause big problems.<a class="indexterm" name="AUTOID-15287"></A
></P
></LI
></UL
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch10_09.htm" title="10.9 Summary "><img src="../gifs/txtpreva.gif" alt="Previous: 10.9 Summary " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch11_02.htm" title="11.2 Diagnostic Tools "><img src="../gifs/txtnexta.gif" alt="Next: 11.2 Diagnostic Tools " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">10.9 Summary </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">11.2 Diagnostic Tools </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
