<html><head>
<title>[Appendix E] E.3 m4 sendmail Macros</TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:44:28Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appe_01.htm" title="E. A sendmail Reference"><link rel="prev" href="appe_02.htm" title="E.2 The sendmail Command"><link rel="next" href="appe_04.htm#TCP2-AP-5-SECT-4.2" title="E.4 More sendmail.cf"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appe_02.htm" title="E.2 The sendmail Command"><img src="../gifs/txtpreva.gif" alt="Previous: E.2 The sendmail Command" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Appendix E<br>A sendmail Reference</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appe_04.htm#TCP2-AP-5-SECT-4.2" title="E.4 More sendmail.cf"><img src="../gifs/txtnexta.gif" alt="Next: E.4 More sendmail.cf" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="TCP2-AP-5-SECT-3">E.3 m4 sendmail Macros</A
></H2
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-M4-MACROS"></A
>The sendmail distribution comes with several sample configuration files.
<a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> provides an example of how the <em class="emphasis">tcpproto.mc</EM
> file is
modified to produce a configuration file suitable for a Linux system.
The prototype files are <b class="emphasis.bold">m4</B
> macro configuration files that
produce useable <em class="emphasis">sendmail.cf</EM
> files as output. The prototype
files are located in the <em class="emphasis">sendmail/cf/cf</EM
> directory of the sendmail
distribution. All of the <b class="emphasis.bold">m4</B
> macro configuration files end with
the <em class="emphasis">.mc</EM
> file name extension. The <em class="emphasis">.mc</EM
> files can be composed
of the following <b class="emphasis.bold">m4</B
> macros:
[1]</P
><blockquote class="footnote"><p class="para">[1] The macro commands are listed in the order they would occur in the
configuration file.</P
></BLOCKQUOTE
><dl class="variablelist"><dt class="term">VERSIONID</DT
><dd class="listitem"><p class="para">Defines the version number of the <em class="emphasis">.mc</EM
> source file. RCS or SCCS
version numbers are commonly used. This command is optional.</P
></DD
><dt class="term">OSTYPE</DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-26553"></A
>Points to the <b class="emphasis.bold">m4</B
> source file that contains the operating
system-specific information for this configuration. This is required.</P
></DD
><dt class="term">DOMAIN</DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-26561"></A
>Points to the <b class="emphasis.bold">m4</B
> source file that contains configuration information
specific to this domain. This is optional.</P
></DD
><dt class="term">FEATURE</DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-26568"></A
>Points to an <b class="emphasis.bold">m4</B
> source file that defines an optional sendmail
feature. This is not required for <b class="emphasis.bold">m4</B
> to process the <em class="emphasis">.mc</EM
>
source file, but many configurations have multiple FEATURE entries.</P
></DD
><dt class="term">HACKS</DT
><dd class="listitem"><p class="para">Points to an <b class="emphasis.bold">m4</B
> source file that contains site-specific
configuration information. This is a temporary configuration used to
fix a temporary problem. The use of HACKS is discouraged.</P
></DD
><dt class="term">SITECONFIG</DT
><dd class="listitem"><p class="para">Points to a source file that contains <b class="emphasis.bold">m4</B
> SITE commands that define
the UUCP sites<a class="indexterm" name="AUTOID-26584"></A
>
connected to this host. The format of the command is:
<b class="emphasis.bold">SITECONFIG(</B
><em class="emphasis">file</EM
><b class="emphasis.bold">, </B
><em class="emphasis">local-hostname</EM
><b class="emphasis.bold">, </B
><em class="emphasis">class</EM
><b class="emphasis.bold">)</B
>, which
reads the UUCP hostnames from <em class="emphasis">file</EM
> into <em class="emphasis">class</EM
>. </P
></DD
><dt class="term">define</DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-26599"></A
>Defines a local value. Most &quot;defines&quot; are done in the <b class="emphasis.bold">m4</B
> source
files that are called by the <em class="emphasis">.mc</EM
> file, not in the <em class="emphasis">.mc</EM
>
file itself. It can define a value for a <em class="emphasis">sendmail.cf</EM
> macro,
option, or other command.</P
></DD
><dt class="term">MAILER</DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-26609"></A
>Points to an <b class="emphasis.bold">m4</B
> source file that contains the configuration commands
that define a sendmail mailer. A least one MAILER command must appear in
the configuration file. Generally more than one MAILER command is used.</P
></DD
><dt class="term">LOCAL_RULE_<code class="replaceable"><i>n</I
></CODE
></DT
><dd class="listitem"><p class="para">Heads a section of code to be added to ruleset <code class="replaceable"><i>n</I
></CODE
>, where <code class="replaceable"><i>n</I
></CODE
> is
0, 1, 2, or 3. The code that follows the LOCAL_RULE_<code class="replaceable"><i>n</I
></CODE
> command is
composed of standard <em class="emphasis">sendmail.cf</EM
> rewrite rules.
[2]
The LOCAL_RULE_<em class="emphasis">n</EM
> command is rarely used.</P
><blockquote class="footnote"><p class="para">[2] The one exception to this is the UUCPSMTP macro that can be used in
the local rule. See the <em class="emphasis">New sendmail Configuration Files</EM
>
document that come with the sendmail V8 distribution if you have
questions about UUCP configuration.</P
></BLOCKQUOTE
></DD
><dt class="term">LOCAL_CONFIG</DT
><dd class="listitem"><p class="para">Heads a section of code to be added to the <em class="emphasis">sendmail.cf</EM
> file after
the local information section and before the rewrite rules. The section
of code contains standard <em class="emphasis">sendmail.cf</EM
> configuration commands.
This macro is rarely used.</P
></DD
></DL
><p class="para">Most of the macros in the <em class="emphasis">.mc</EM
> file point to other <b class="emphasis.bold">m4</B
> source
files. The macro names OSTYPE, DOMAIN, FEATURE, MAILER, HACKS, and
SITECONFIG are all names of subdirectories within the <em class="emphasis">sendmail/cf</EM
>
directory. The value passed to each of these macros is the name of a file
within the specified directory. For example, the command FEATURE(nouucp)
tells <b class="emphasis.bold">m4</B
> to load the file <em class="emphasis">nouucp.m4</EM
> from the <em class="emphasis">feature</EM
>
directory and process the <b class="emphasis.bold">m4</B
> source code found there. The real
meat of the sendmail configuration is contained in the source files
pointed to by the OSTYPE, DOMAIN, FEATURE, and MAILER commands.</P
><p class="para">The macro commands HACK, SITECONFIG, LOCAL_RULE_<em class="emphasis">n</EM
>, and LOCAL_CONFIG
are rarely used in a macro configuration file. To simplify this appendix,
we do not mention them again.
[3]
Likewise, for the sake of simplicity we avoid discussing UUCP
configuration and concentrate on SMTP. Still, <b class="emphasis.bold">m4</B
> configuration can
appear to be enormously complex. Please remember that this appendix is a
reference, and as such lists as many of the <b class="emphasis.bold">m4</B
> macros as possible.
Most of these you will never need to use. Refer to <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> for a
realistic example of how <b class="emphasis.bold">m4</B
> is used to build a <em class="emphasis">sendmail.cf</EM
>
file.</P
><blockquote class="footnote"><p class="para">[3] To see examples of some of these commands, look at the <em class="emphasis">ucbvax.mc</EM
>
sample file that comes with the sendmail V8 distribution.</P
></BLOCKQUOTE
><p class="para">In the following section we provide additional information about the
OSTYPE, DOMAIN, FEATURE, and MAILER macros and details of the various
commands used to build the <b class="emphasis.bold">m4</B
> source files they call. <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
>
provides an example of building a custom DOMAIN macro source file.
The source files can contain any of the macros we have already mentioned
as well as the additional ones documented below. The macro configuration
(<em class="emphasis">.mc</EM
>) file also can contain any of the commands documented below.
In fact, pretty much any macro can appear in any file.</P
><p class="para">To bring some order out of this chaos, we have organized the commands
according to the files they are most likely to appear in, which is
similar to the organization found in the documentation that comes with
sendmail distribution. Just remember, actual implementation files may
have a different organization. We start by examining the <b class="emphasis.bold">define</B
>
macros and the <b class="emphasis.bold">FEATURE</B
> macros that are the primary building
blocks of all the other files.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-5-SECT-3.1">E.3.1 define</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-DEFINE-MACRO-IN-SENDMAIL"></A
>The syntax of the <b class="emphasis.bold">define</B
> macro is:</P
><blockquote class="blockquote"><p class="para"><code class="userinput"><b>define('</B
></CODE
><code class="replaceable"><i>parameter</I
></CODE
><b class="emphasis.bold">', '</B
><code class="replaceable"><i>value</I
></CODE
><b class="emphasis.bold">')</B
></P
></BLOCKQUOTE
><p class="para">Where <code class="replaceable"><i>parameter</I
></CODE
> is the keyword name of a sendmail configuration
parameter and <code class="replaceable"><i>value</I
></CODE
> is the value assigned to that configuration
parameter. The <code class="replaceable"><i>parameter</I
></CODE
> and the <code class="replaceable"><i>value</I
></CODE
> are normally

enclosed in single quotes to prevent inappropriate macro expansion.</P
><p class="para">Many of the configuration parameters that can be set using the
<b class="emphasis.bold">define</B
> command are shown below. Most of the parameters
correspond to sendmail options, macros, or classes. The name of the
option, macro, or class set by the parameter is listed in the parameter
description enclosed in square brackets ([]). Macro names begin with a
dollar sign (<b class="emphasis.bold">$j</B
>), class names begin with a dollar sign and an equal
sign (<b class="emphasis.bold">$=w</B
>), and options are shown with long option names
(<b class="emphasis.bold">SingleThreadDelivery</B
>). To find out more about these parameters, see
the descriptions of the macros, options, and classes they represent that
are provided later in this appendix.</P
><p class="para">Because many <b class="emphasis.bold">define</B
> parameters are equivalent to options, macros,
and classes, the command:</P
><p class="para"><blockquote class="screen"><pre class="screen">define('confDOMAIN_NAME', 'peanut.nuts.com')</PRE
></BLOCKQUOTE
></P
><p class="para">placed in an <b class="emphasis.bold">m4</B
> source file has the same effect as:</P
><p class="para"><blockquote class="screen"><pre class="screen">Djpeanut.nuts.com</PRE
></BLOCKQUOTE
></P
><p class="para">placed directly in the <em class="emphasis">sendmail.cf</EM
> file. If you compile and
install a new version of sendmail, build your configuration with
<b class="emphasis.bold">m4</B
> and set values for macros, classes, and options with the
<b class="emphasis.bold">m4 define</B
> macro.</P
><p class="para">The list of <b class="emphasis.bold">define</B
> parameters is quite long. However, because
most of the parameters default to a reasonable value they do not have
to be explicitly set in the <b class="emphasis.bold">m4</B
> source file. The default value of
each parameter is shown in the listing&nbsp;- unless there is no default.</P
><dl class="variablelist"><dt class="term">confMAILER_NAME</DT
><dd class="listitem"><p class="para">Default is MAILER-DAEMON. The sender name used on error messages. [$n]</P
></DD
><dt class="term">confDOMAIN_NAME</DT
><dd class="listitem"><p class="para">The full hostname. [$j]</P
></DD
><dt class="term">confCF_VERSION</DT
><dd class="listitem"><p class="para">The configuration file's version number. [$Z]</P
></DD
><dt class="term">confFROM_HEADER</DT
><dd class="listitem"><p class="para">Default is <code class="literal">$?x$x &lt;$g&gt;$|$g$.</CODE
> .  The From: header format.</P
></DD
><dt class="term">confRECEIVED_HEADER</DT
><dd class="listitem"><p class="para">Default is <code class="literal">$?sfrom $s $.$?_($?s$|from $.$_) $.by $j ($v/$Z)$?r
with $r$. id $i$?u for $u$.; $b</CODE
> .  The Received: header format.</P
></DD
><dt class="term">confCW_FILE</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">/etc/sendmail.cw</EM
>. The file of local host aliases. [$=w]</P
></DD
><dt class="term">confCT_FILE</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">/etc/sendmail.ct</EM
>. The file of trusted usernames. [$=t]</P
></DD
><dt class="term">confTRUSTED_USERS</DT
><dd class="listitem"><p class="para">Trusted users name to add to <em class="emphasis">root</EM
>, <em class="emphasis">uucp</EM
>, and <em class="emphasis">daemon</EM
>.</P
></DD
><dt class="term">confSMTP_MAILER</DT
><dd class="listitem"><p class="para">Default is esmtp. The mailer used for SMTP connections; must be smtp,
smtp8, or esmtp.</P
></DD
><dt class="term">confUUCP_MAILER</DT
><dd class="listitem"><p class="para">Default is uucp-old. The default UUCP mailer.</P
></DD
><dt class="term">confLOCAL_MAILER</DT
><dd class="listitem"><p class="para">Default is local. The mailer used for local connections.</P
></DD
><dt class="term">confRELAY_MAILER</DT
><dd class="listitem"><p class="para">Default is relay. The default mailer name for relaying.</P
></DD
><dt class="term">confSEVEN_BIT_INPUT</DT
><dd class="listitem"><p class="para">Default is False. Force input to seven bits. [SevenBitInput]</P
></DD
><dt class="term">confEIGHT_BIT_HANDLING</DT
><dd class="listitem"><p class="para">Default is pass8. Defines how 8-bit data is handled. [EightBitMode]</P
></DD
><dt class="term">confALIAS_WAIT</DT
><dd class="listitem"><p class="para">Default is 10m. The amount of time to wait for alias file rebuild.
[AliasWait]</P
></DD
><dt class="term">confMIN_FREE_BLOCKS</DT
><dd class="listitem"><p class="para">Default is 100. The minimum number of free blocks on the queue
filesystem that must be available to accept SMTP mail. [MinFreeBlocks]</P
></DD
><dt class="term">confMAX_MESSAGE_SIZE</DT
><dd class="listitem"><p class="para">Default is infinite. The maximum message size. [MaxMessageSize]</P
></DD
><dt class="term">confBLANK_SUB</DT
><dd class="listitem"><p class="para">The character used to replace unquoted blank characters in email
addresses. [BlankSub]</P
></DD
><dt class="term">confCON_EXPENSIVE</DT
><dd class="listitem"><p class="para">Default is False. Tells system to hold mail bound for mailers that
have the <b class="emphasis.bold">e</B
> flag set until the next queue run. [HoldExpensive]</P
></DD
><dt class="term">confCHECKPOINT_INTERVAL</DT
><dd class="listitem"><p class="para">Default is 10. Tells system to checkpoint the queue files after this
number of queued items are processed. [CheckpointInterval]</P
></DD
><dt class="term">confDELIVERY_MODE</DT
><dd class="listitem"><p class="para">Default is background. Sets the default delivery mode. [DeliveryMode]</P
></DD
><dt class="term">confAUTO_REBUILD</DT
><dd class="listitem"><p class="para">Default is False. Automatically rebuilds alias file. [AutoRebuildAliases]</P
></DD
><dt class="term">confERROR_MODE</DT
><dd class="listitem"><p class="para">Default is print. Defines how errors are handled. [ErrorMode]</P
></DD
><dt class="term">confERROR_MESSAGE</DT
><dd class="listitem"><p class="para">Points to a file containing a message that is prepended to error
messages. [ErrorHeader]</P
></DD
><dt class="term">confSAVE_FROM_LINES</DT
><dd class="listitem"><p class="para">Tells system not to discard UNIX From: lines. They are discarded if
this is not set.  [SaveFromLine]</P
></DD
><dt class="term">confTEMP_FILE_MODE</DT
><dd class="listitem"><p class="para">Default is 0600. File mode for temporary files. [TempFileMode]</P
></DD
><dt class="term">confMATCH_GECOS</DT
><dd class="listitem"><p class="para">Tells system to match the email username to the GECOS field. This match is not done if this is not set. [MatchGECOS]</P
></DD
><dt class="term">confMAX_HOP</DT
><dd class="listitem"><p class="para">Default is 25. The counter used to determine mail loops. [MaxHopCount]</P
></DD
><dt class="term">confIGNORE_DOTS</DT
><dd class="listitem"><p class="para">Default is False. Tells system to ignore dots in incoming messages. [IgnoreDots]</P
></DD
><dt class="term">confBIND_OPTS</DT
><dd class="listitem"><p class="para">Default is undefined. Sets options for DNS resolver. [ResolverOptions]</P
></DD
><dt class="term">confMIME_FORMAT_ERRORS*</DT
><dd class="listitem"><p class="para">Default is True. Tells system to send MIME-encapsulated error messages. [SendMimeErrors]</P
></DD
><dt class="term">confFORWARD_PATH</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">$z/.forward.$w:$z/.forward</EM
>. Places to search
for <em class="emphasis">.forward</EM
> files. [ForwardPath]</P
></DD
><dt class="term">confMCI_CACHE_SIZE</DT
><dd class="listitem"><p class="para">Default is 2. The number of open connections that can be cached.
[ConnectionCacheSize]</P
></DD
><dt class="term">confMCI_CACHE_TIMEOUT</DT
><dd class="listitem"><p class="para">Default is 5m. The amount of time inactive open connections are held
in the cache. [ConnectionCacheTimeout]</P
></DD
><dt class="term">confHOST_STATUS_DIRECTORY</DT
><dd class="listitem"><p class="para">Directory in which host status is saved. [HostStatusDirectory]</P
></DD
><dt class="term">confUSE_ERRORS_TO*</DT
><dd class="listitem"><p class="para">Default is False. Delivers errors using the Errors-To: header. [UserErrorsTo]</P
></DD
><dt class="term">confLOG_LEVEL</DT
><dd class="listitem"><p class="para">Default is 9. Level of detail for the logfile. [LogLevel]</P
></DD
><dt class="term">confME_TOO</DT
><dd class="listitem"><p class="para">Default is False. Sends a copy to the sender. [MeToo]</P
></DD
><dt class="term">confCHECK_ALIASES</DT
><dd class="listitem"><p class="para">Default is False. Looks up every alias during alias file build. [CheckAliases]</P
></DD
><dt class="term">confOLD_STYLE_HEADERS*</DT
><dd class="listitem"><p class="para">Default is True. Treats headers without special chars as old style. [OldStyleHeaders]</P
></DD
><dt class="term">confDAEMON_OPTIONS</DT
><dd class="listitem"><p class="para">SMTP daemon options. [DaemonPortOptions]</P
></DD
><dt class="term">confPRIVACY_FLAGS</DT
><dd class="listitem"><p class="para">Default is authwarnings. These flags restrict the use of some mail
commands. [PrivacyOptions]</P
></DD
><dt class="term">confCOPY_ERRORS_TO</DT
><dd class="listitem"><p class="para">Address to receive copies of error messages. [PostmasterCopy]</P
></DD
><dt class="term">confQUEUE_FACTOR</DT
><dd class="listitem"><p class="para">Default is 600000. Used to calculate when a loaded system should queue
mail instead of attempting delivery. [QueueFactor]</P
></DD
><dt class="term">confDONT_PRUNE_ROUTES</DT
><dd class="listitem"><p class="para">Default is False. Don't prune route-addresses to the minimum possible. [DontPruneRoutes]</P
></DD
><dt class="term">confSAFE_QUEUE</DT
><dd class="listitem"><p class="para">Create a queue file, then attempt delivery. This is not done unless
this paramter is specified. [SuperSafe]</P
></DD
><dt class="term">confTO_INITIAL</DT
><dd class="listitem"><p class="para">Default is 5m. Maximum time to wait for the initial connect response.
[Timeout.initial]</P
></DD
><dt class="term">confTO_CONNECT</DT
><dd class="listitem"><p class="para">Default is 0. Maximum time to wait for a connect to complete.
[Timeout.connect]</P
></DD
><dt class="term">confTO_ICONNECT</DT
><dd class="listitem"><p class="para">Maximum time to wait for the very first connect attempt to a host.
[Timeout.iconnect]</P
></DD
><dt class="term">confTO_HELO</DT
><dd class="listitem"><p class="para">Default is 5m. Maximum time to wait for a HELO or EHLO response.
[Timeout.helo]</P
></DD
><dt class="term">confTO_MAIL</DT
><dd class="listitem"><p class="para">Default is 10m. Maximum time to wait for a MAIL command response.
[Timeout.mail]</P
></DD
><dt class="term">confTO_RCPT</DT
><dd class="listitem"><p class="para">Default is 1h. Maximum time to wait for a RCPT command response.
[Timeout.rcpt]</P
></DD
><dt class="term">confTO_DATAINIT</DT
><dd class="listitem"><p class="para">Default is 5m. Maximum time to wait for a DATA command response.
[Timeout.datainit]</P
></DD
><dt class="term">confTO_DATABLOCK</DT
><dd class="listitem"><p class="para">Default is 1h. Maximum time to wait for a block during DATA phase.
[Timeout.datablock]</P
></DD
><dt class="term">confTO_DATAFINAL</DT
><dd class="listitem"><p class="para">Default is 1h. Maximum time to wait for a response to the terminating
&quot;.&quot;. [Timeout.datafinal]</P
></DD
><dt class="term">confTO_RSET</DT
><dd class="listitem"><p class="para">Default is 5m. Maximum time to wait for a RSET command response.
[Timeout.rset]</P
></DD
><dt class="term">confTO_QUIT</DT
><dd class="listitem"><p class="para">Default is 2m. Maximum time to wait for a QUIT command response.
[Timeout.quit]</P
></DD
><dt class="term">confTO_MISC</DT
><dd class="listitem"><p class="para">Default is 2m. Maximum time to wait for other SMTP command responses.
[Timeout.misc]</P
></DD
><dt class="term">confTO_COMMAND</DT
><dd class="listitem"><p class="para">Default is 1h. Maximum time to wait for a command to be issued.
[Timeout.command]</P
></DD
><dt class="term">confTO_IDENT</DT
><dd class="listitem"><p class="para">Default is 30s. Maximum time to wait for an IDENT query response.
[Timeout.ident]</P
></DD
><dt class="term">confTO_FILEOPEN</DT
><dd class="listitem"><p class="para">Default is 60s. Maximum time to wait for a file open.
[Timeout.fileopen]</P
></DD
><dt class="term">confTO_QUEUERETURN</DT
><dd class="listitem"><p class="para">Default is 5d. Time until a message is returned from the queue as
undeliverable. [Timeout.queuereturn]</P
></DD
><dt class="term">confTO_QUEUERETURN_NORMAL</DT
><dd class="listitem"><p class="para">&quot;Undeliverable&quot; timeout for normal priority messages. [Timeout.queuereturn.normal]</P
></DD
><dt class="term">confTO_QUEUERETURN_URGENT</DT
><dd class="listitem"><p class="para">&quot;Undeliverable&quot; timeout for urgent priority messages. [Timeout.queuereturn.urgent]</P
></DD
><dt class="term">confTO_QUEUERETURN_NONURGENT</DT
><dd class="listitem"><p class="para">&quot;Undeliverable&quot; timeout for low priority messages. [Timeout.queuereturn.non-urgent]</P
></DD
><dt class="term">confTO_QUEUEWARN</DT
><dd class="listitem"><p class="para">Default is 4h. Time until a &quot;still queued&quot; warning is sent about a message. [Timeout.queuewarn]</P
></DD
><dt class="term">confTO_QUEUEWARN_NORMAL</DT
><dd class="listitem"><p class="para">Time until a &quot;still queued&quot; warning is sent for normal priority messages. [Timeout.queuewarn.normal]</P
></DD
><dt class="term">confTO_QUEUEWARN_URGENT</DT
><dd class="listitem"><p class="para">Time until a &quot;still queued&quot; warning is sent for urgent priority messages. [Timeout.queuewarn.urgent]</P
></DD
><dt class="term">confTO_QUEUEWARN_NONURGENT</DT
><dd class="listitem"><p class="para">Time until a &quot;still queued&quot; warning is sent for low priority messages. [Timeout.queuewarn.non-urgent]</P
></DD
><dt class="term">confTO_HOSTSTATUS</DT
><dd class="listitem"><p class="para">Default is 30m. Timer for stale host status information. [Timeout.hoststatus]</P
></DD
><dt class="term">confTIME_ZONE</DT
><dd class="listitem"><p class="para">Default is USE_SYSTEM. Sets time zone from the system (USE_SYSTEM) or the TZ variable (USE_TZ). [TimeZoneSpec]</P
></DD
><dt class="term">confDEF_USER_ID</DT
><dd class="listitem"><p class="para">Default is 1:1. Default user ID and group ID. [DefaultUser]</P
></DD
><dt class="term">confUSERDB_SPEC</DT
><dd class="listitem"><p class="para">Path of the user database file. [UserDatabaseSpec]</P
></DD
><dt class="term">confFALLBACK_MX</DT
><dd class="listitem"><p class="para">Backup MX host. [FallbackMXhost]</P
></DD
><dt class="term">confTRY_NULL_MX_LIST</DT
><dd class="listitem"><p class="para">Default is False. Instructs system to connect to the remote host directly if the MX point to the local host. [TryNullMXList]</P
></DD
><dt class="term">confQUEUE_LA</DT
><dd class="listitem"><p class="para">Default is 8. Sends mail directly to the queue when this load average
is reached. [QueueLA]</P
></DD
><dt class="term">confREFUSE_LA</DT
><dd class="listitem"><p class="para">Default is 12. Refuses incoming SMTP connections at this load average. [RefuseLA]</P
></DD
><dt class="term">confMAX_DAEMON_CHILDREN</DT
><dd class="listitem"><p class="para">If set, refuses connection when this number of children is reached. [MaxDaemonChildren]</P
></DD
><dt class="term">confCONNECTION_RATE_THROTTLE</DT
><dd class="listitem"><p class="para">Maximum number of connections permitted per second, if set. [ConnectionRateThrottle]</P
></DD
><dt class="term">confWORK_RECIPIENT_FACTOR</DT
><dd class="listitem"><p class="para">Default is 30000. Factor used to lower the priority of a job for each
additional recipient. [RecipientFactor]</P
></DD
><dt class="term">confSEPARATE_PROC</DT
><dd class="listitem"><p class="para">Default is False. Delivers messages with separate processes. [ForkEachJob]</P
></DD
><dt class="term">confWORK_CLASS_FACTOR</DT
><dd class="listitem"><p class="para">Default is 1800. The factor used to favor a high-priority job. [ClassFactor]</P
></DD
><dt class="term">confWORK_TIME_FACTOR</DT
><dd class="listitem"><p class="para">Default is 90000. Factor used to lower the priority of a job for each
delivery attempt. [RetryFactor]</P
></DD
><dt class="term">confQUEUE_SORT_ORDER</DT
><dd class="listitem"><p class="para">Default is Priority. Sorts queue by Priority or Host order. [QueueSortOrder]</P
></DD
><dt class="term">confMIN_QUEUE_AGE</DT
><dd class="listitem"><p class="para">Default is 0. Minimum time a job must be queued. [MinQueueAge]</P
></DD
><dt class="term">confDEF_CHAR_SET</DT
><dd class="listitem"><p class="para">Default is unknown-8bit. Default character set for unlabeled 8-bit MIME data. [DefaultCharSet]</P
></DD
><dt class="term">confSERVICE_SWITCH_FILE</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">/etc/service.switch</EM
>. The path to the service switch file. [ServiceSwitchFile]</P
></DD
><dt class="term">confHOSTS_FILE</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">/etc/hosts</EM
>. The path to the hostnames file. [HostsFile]</P
></DD
><dt class="term">confDIAL_DELAY</DT
><dd class="listitem"><p class="para">Default is 0s. Amount of time to delay before retrying a &quot;dial on
demand&quot; connection. 0s means &quot;don't retry&quot;. [DialDelay]</P
></DD
><dt class="term">confNO_RCPT_ACTION</DT
><dd class="listitem"><p class="para">Default is <b class="emphasis.bold">none</B
>. Handling for mail with no recipient headers: do
nothing (<b class="emphasis.bold">none</B
>); add To: header (<b class="emphasis.bold">add-to</B
>); add
Apparently-To: header (<b class="emphasis.bold">add-apparently-to</B
>); add a Bcc: header
(<b class="emphasis.bold">add-bcc</B
>); add &quot;To: undisclosed-recipients&quot; header
(<b class="emphasis.bold">add-to-undisclosed</B
>).  [NoRecipientAction]</P
></DD
><dt class="term">confSAFE_FILE_ENV</DT
><dd class="listitem"><p class="para">Default is undefined. <b class="emphasis.bold">chroot()</B
> to this directory before writing files.
[SafeFileEnvironment]</P
></DD
><dt class="term">confCOLON_OK_IN_ADDR</DT
><dd class="listitem"><p class="para">Default is True. Treats colons as regular characters in addresses.
[ColonOkInAddr]</P
></DD
><dt class="term">confMAX_QUEUE_RUN_SIZE</DT
><dd class="listitem"><p class="para">Default is 0. Limits the number of entries processed in a queue run. 0
means no limit. [MaxQueueRunSize]</P
></DD
><dt class="term">confDONT_EXPAND_CNAMES</DT
><dd class="listitem"><p class="para">Default is False. If true, don't convert nicknames to canonical
names. False means &quot;do convert.&quot; [DontExpandCnames]</P
></DD
><dt class="term">confFROM_LINE</DT
><dd class="listitem"><p class="para">Default is From $g  $d. The format of the UNIX From: line. [UnixFromLine]</P
></DD
><dt class="term">confOPERATORS</DT
><dd class="listitem"><p class="para">Default is .:%@!^/[]+.  Address operator characters. [OperatorChars]</P
></DD
><dt class="term">confSMTP_LOGIN_MSG</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">$j sendmail $v/$Z; $b</EM
>. The SMTP greeting
message. [SmtpGreetingMessage]</P
></DD
><dt class="term">confDONT_INIT_GROUPS</DT
><dd class="listitem"><p class="para">Default is False. If true, disable the initgroups(3) routine. False
means &quot;use the initgroups(3) routine.  [DontInitGroups]</P
></DD
><dt class="term">confUNSAFE_GROUP_WRITES</DT
><dd class="listitem"><p class="para">Default is False. If true, don't reference programs or file from
group-writable <em class="emphasis">:include:</EM
> and <em class="emphasis">.forward</EM
>
files. [UnsafeGroupWrites]</P
></DD
><dt class="term">confDOUBLE_BOUNCE_ADDRESS</DT
><dd class="listitem"><p class="para">Default is <em class="emphasis">postmaster</EM
>. When errors occur sending an error
message, send the second error message to this
address. [DoubleBounceAddress]</P
></DD
><dt class="term">confRUN_AS_USER</DT
><dd class="listitem"><p class="para">Default is undefined. Run as this user to read and deliver mail.
[RunAsUser]</P
></DD
><dt class="term">confSINGLE_THREAD_DELIVERY</DT
><dd class="listitem"><p class="para">Default is False. Force single threaded mail deliver<a class="indexterm" name="AUTOID-27126"></A
>
when set with
HostStatusDirectory. [SingleThreadDelivery]</P
></DD
></DL
><p class="para"><b class="emphasis.bold">define</B
> macros are the most common macros in the <b class="emphasis.bold">m4</B
> source
files. The next most commonly used macro is the FEATURE macro.<a class="indexterm" name="AUTOID-27131"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-5-SECT-3.2">E.3.2 FEATURE</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-FEATURE-MACRO-IN-SENDMAIL"></A
>The FEATURE macro processes <b class="emphasis.bold">m4</B
> source code from the <em class="emphasis">cf/feature</EM
><a class="indexterm" name="AUTOID-27140"></A
>
directory. Source files in that directory define optional sendmail
features that you may wish to include in your configuration. The syntax
of the FEATURE macro is:</P
><blockquote class="blockquote"><p class="para"><code class="literal">FEATURE</CODE
>(<code class="replaceable"><i>name</I
></CODE
>, [<code class="replaceable"><i>argument</I
></CODE
>])</P
></BLOCKQUOTE
><p class="para">The FEATURE source file can be called with or without an optional
argument. If an argument is passed to the source file the argument is
used by the source file to generate code for the <em class="emphasis">sendmail.cf</EM
> file.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">FEATURE(mailertable, dbm /usr/lib/mailertable)</PRE
></BLOCKQUOTE
></P
><p class="para">generates the code for accessing the mailertable and defines that table
as being a dbm database located in the file <em class="emphasis">/usr/lib/mailertable</EM
>.</P
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-FEATURE-MACRO-IN-SENDMAIL-FEATURES-LISTED"></A
>There are several features available in sendmail V8. They are all
listed in 
<a class="xref" href="#TCP2-AP-5-TAB-2" title="sendmail V8 Features">Table 13.6</A
>
The table provides the name of each feature and
its purpose.</P
><table class="table"><caption class="table"><a class="title" name="TCP2-AP-5-TAB-2">Table E.3: sendmail V8 Features</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Purpose</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">use_cw_file</TD
><td class="entry" rowspan="1" colspan="1">Load <b class="emphasis.bold">$=w</B
> from <em class="emphasis">/etc/sendmail.cw</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">use_ct_file</TD
><td class="entry" rowspan="1" colspan="1">Load <b class="emphasis.bold">$=t</B
> from <em class="emphasis">/etc/sendmail.ct</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">redirect</TD
><td class="entry" rowspan="1" colspan="1">Support the .REDIRECT pseudo-domain.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nouucp</TD
><td class="entry" rowspan="1" colspan="1">Don't include UUCP address processing.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nocanonify</TD
><td class="entry" rowspan="1" colspan="1">Don't convert names with $[ ... $] syntax.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">stickyhost</TD
><td class="entry" rowspan="1" colspan="1">Treat &quot;user&quot; different than &quot;user@local.host&quot;.[4]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">mailertable</TD
><td class="entry" rowspan="1" colspan="1">Mail routing using a mailer table.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">domaintable</TD
><td class="entry" rowspan="1" colspan="1">Domain name mapping using a domain table.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">bitdomain</TD
><td class="entry" rowspan="1" colspan="1">Use a table to map bitnet hosts to Internet addresses.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">uucpdomain</TD
><td class="entry" rowspan="1" colspan="1">Use a table to map UUCP hosts to Internet addresses.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">always_add_domain</TD
><td class="entry" rowspan="1" colspan="1">Add the local hostname to all locally delivered mail.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">allmasquerade</TD
><td class="entry" rowspan="1" colspan="1">Also masquerade recipient addresses.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">limited_masquerade</TD
><td class="entry" rowspan="1" colspan="1">Only masquerade hosts listed in <b class="emphasis.bold">$=M</B
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">masquerade_entire_domain</TD
><td class="entry" rowspan="1" colspan="1">Masquerade all hosts within the masquerading domains.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">genericstable</TD
><td class="entry" rowspan="1" colspan="1">Use a table to rewrite local addresses.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">virtusertable</TD
><td class="entry" rowspan="1" colspan="1">Maps virtual domain names to real mail addresses.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nodns</TD
><td class="entry" rowspan="1" colspan="1">Don't include DNS support.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">nullclient</TD
><td class="entry" rowspan="1" colspan="1">Forwarding all mail to a central server.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">local_procmail</TD
><td class="entry" rowspan="1" colspan="1">Use procmail as the local mailer.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">bestmx_is_local</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Accept mail as local when it is addressed to a host that lists us as its MX server.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">smrsh</TD
><td class="entry" rowspan="1" colspan="1">Use <b class="emphasis.bold">smrsh</B
> as the prog mailer.</TD
></TR
></TBODY
></TABLE
><blockquote class="footnote"><p class="para">[4] See the discussion of &quot;stickyhost&quot; in the &quot;DOMAIN&quot; section later in this
appendix.</P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">use_cw_file</B
> and the <b class="emphasis.bold">use_ct_file features</B
> are equivalent to
<b class="emphasis.bold">Fw/etc/sendmail.cw</B
> and <b class="emphasis.bold">Fw/etc/sendmail.ct</B
> commands in the 
<em class="emphasis">sendmail.cf</EM
> file. See <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> for descriptions of host 
aliases (<b class="emphasis.bold">$=w</B
>) and trusted users (<b class="emphasis.bold">$=t</B
>).<a class="indexterm" name="AUTOID-27248"></A
></P
><p class="para">The .REDIRECT pseudo-domain code returns an error message to the sender
telling them to try a new address for the recipient. This is used to
handle mail for people who no longer read mail at your site but who are
still getting mail sent to a very old address. Enable this feature with
the <b class="emphasis.bold">FEATURE(redirect)</B
> command and then add aliases for each obsolete
mailing address in the form:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="replaceable"><i>old-address        new-address.</I
></CODE
>REDIRECT</PRE
></BLOCKQUOTE
></P
><p class="para">For example: assume that Edward Winslow is no longer a valid user of
<em class="emphasis">almond.nuts.com</EM
>. His old username, <em class="emphasis">ed</EM
>, should no longer
accept mail. His new mailing address is <em class="emphasis">WinslowE@industry.com</EM
>. We enter
the following alias in the <em class="emphasis">/etc/aliases</EM
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen">ed                 WinslowE@industry.com.REDIRECT</PRE
></BLOCKQUOTE
></P
><p class="para">Now when mail is to the <em class="emphasis">ed</EM
> account on <em class="emphasis">almond</EM
>, the following
error is returned to the sender:</P
><p class="para"><blockquote class="screen"><pre class="screen">551 User not local; please try &lt;WinslowE@industry.com&gt;</PRE
></BLOCKQUOTE
></P
><p class="para">Several of the FEATURE macros actually remove features from the
<em class="emphasis">sendmail.cf</EM
> file instead of adding them. nouucp removes the code
to handle UUCP addresses for systems that do not have access to UUCP
networks, and nodns removes the code for DNS lookups for systems that
do not have access to DNS. nocanonify, which is rarely used, disables
the <b class="emphasis.bold">$[</B
><em class="emphasis">name</EM
><b class="emphasis.bold">]$</B
> syntax that converts nicknames and IP
addresses; see Table 10-7. Finally, the nullclient feature strips
everything out of the configuration except for the ability to forward
mail to a single mail server via a local SMTP link. The name of the
mail server is provided as the argument on the nullclient command
line. For example, <b class="emphasis.bold">FEATURE(nullclient, ms.big.com</B
>) forwards all
mail to <em class="emphasis">ms.big.com</EM
> without any local mail processing.</P
><p class="para">Several features relate to mail relaying and masquerading. They
are: stickyhost, allmasquerade, limited_masquerade and
masquerade_entire_domain. All of these features are covered in the
&quot;DOMAIN&quot; section later in this appendix.</P
><p class="para">Several of the features define databases that are used to perform special
address processing. All of these features accept an optional argument
that defines the database. (See the sample <b class="emphasis.bold">mailertable</B
> command at the
beginning of this section for an example of defining the database with
the optional argument.) If the optional argument is not provided the
database description always defaults to <b class="emphasis.bold">hash -o /etc/</B
><em class="emphasis">filename</EM
>,
where <em class="emphasis">filename</EM
> matches the name of the feature. For example:
<b class="emphasis.bold">mailertable</B
> defaults to the definition <code class="literal">hash -o /etc/mailertable</CODE
>.
The database features are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">mailertable</B
></DT
><dd class="listitem"><p class="para">Maps host and domain names to specific mailer:host pairs.
[5]
If the host or domain name in the recipient addresses matches a key
field in the mailertable database, it returns the mailer and host for
that address. The format of mailertable entries is:</P
><blockquote class="footnote"><p class="para">[5] See <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> for a description of the mailer, host, and user
triple returned by ruleset 0.</P
></BLOCKQUOTE
><p class="para"><code class="replaceable"><i>domain-name      mailer</I
></CODE
><b class="emphasis.bold">:</B
><code class="replaceable"><i>host</I
></CODE
></P
><p class="para">where <code class="replaceable"><i>domain-name</I
></CODE
> is either a full hostname (host plus domain)
or a domain name. If a domain name is used it must start with a dot
(.), and it will match every host in the specified domain.</P
></DD
><dt class="term"><b class="emphasis.bold">domaintable</B
></DT
><dd class="listitem"><p class="para">Converts an old domain name to a new domain name. The old name is the
key and the new name is the value returned for the key.</P
></DD
><dt class="term"><b class="emphasis.bold">bitdomain</B
></DT
><dd class="listitem"><p class="para">Converts a Bitnet hostname to an Internet hostname. The Bitnet
name is the key and the Internet hostname is the value returned.
The <b class="emphasis.bold">bitdomain</B
> program that comes with sendmail V8 can be used to
build this database.</P
></DD
><dt class="term"><b class="emphasis.bold">uucpdomain</B
></DT
><dd class="listitem"><p class="para">Converts a UUCP name to an Internet hostname. The key is the UUCP host
name and the value returned is the Internet hostname.</P
></DD
><dt class="term"><b class="emphasis.bold">generictable</B
></DT
><dd class="listitem"><p class="para">Converts a sender email address. The key to the database is either a
username or a full email address (username and hostname). The value
returned by the database is always a full email address. If the value
specified in the database is not a full address, <b class="emphasis.bold">genericstable</B
>
appends the value from <b class="emphasis.bold">$j</B
> to the value to force it to be a full
address.  <b class="emphasis.bold">genericstable</B
> converts the same address as those
processed for masquerading<a class="indexterm" name="AUTOID-27320"></A
>
and the features that affect masquerading
affect the <b class="emphasis.bold">genericstable</B
> conversion in exactly the same way. See
<a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> for an example of using the <b class="emphasis.bold">genericstable</B
> and
see the &quot;DOMAIN&quot; section later in this appendix for information on
masquerading. Note that if you use the <b class="emphasis.bold">genericstable</B
> and you
don't use masquerading, you can still get the functionality of the
MASQUERADE_DOMAIN and the MASQUERADE_DOMAIN_FILE by using
GENERICS_DOMAIN and GENERICS_DOMAIN_FILE. These commands have the same
function and are used in the same way as their masquerade
counterparts, which are described in the following section.</P
></DD
><dt class="term"><b class="emphasis.bold">virtusertable</B
></DT
><dd class="listitem"><p class="para">Aliases incoming email addresses. Essentially, this is an extended alias
database for aliasing addresses that are not local to this host. The key
to the database is a full email address or a domain name. The value
returned by the database is the recipient address to which the mail
is delivered. If a domain name is used as a key, it must begin with
an at-sign (@). Mail addressed to any user in the specified domain is
sent to the recipient defined by the virtusertable database. Any host
name used as a key in the virtusertable database must also be defined in
class w.</P
></DD
></DL
><p class="para">Two of the remaining FEATURE commands relate to domains.<a class="indexterm" name="AUTOID-27332"></A
>
The
<b class="emphasis.bold">always_add_domain</B
> macro makes sendmail add the local hostname to
all locally delivered mail, even to those pieces of mail that would
normally have just a username as an address. The <b class="emphasis.bold">bestmx_is_local</B
>
feature accepts mail addressed to a host that lists the local host as
its preferred MX server as if the mail was local mail. If this feature
is not used, mail bound for a remote host is sent directly to the
remote host even if its MX record lists the local host as its preferred
MX server. The <b class="emphasis.bold">bestmx_is_local</B
> feature should not be used if you use a
wildcard MX record for your domain.</P
><p class="para">The last two features are used to select optional programs for the local
and the prog mailers. local_procmail selects <b class="emphasis.bold">procmail</B
> as the
local mailer. Provide the path to <b class="emphasis.bold">procmail</B
> as the argument in
the FEATURE command. The <b class="emphasis.bold">smrsh</B
> feature selects the sendmail Restricted
SHell (<b class="emphasis.bold">smrsh</B
>) as the prog mailer. <b class="emphasis.bold">smrsh</B
> provides improved
security over /bin/sh, which is normally used as the prog mailer.
Provide the path to <b class="emphasis.bold">smrsh</B
> as the argument in the FEATURE command.</P
><p class="para">The FEATURE commands discussed in this section and the <b class="emphasis.bold">define</B
> macros
discussed previously are used to build the <b class="emphasis.bold">m4</B
> source files. The
remainder of this section describes the purpose and structure of the
OSTYPE, DOMAIN, and MAILER source files.<a class="indexterm" name="AUTOID-27347"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-5-SECT-3.3">E.3.3 OSTYPE</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-OSTYPE-MACRO-IN-SENDMAIL"></A
>The source file for the OSTYPE macro defines operating system-specific
parameters. Many operating systems are pre-defined. Look in the
<em class="emphasis">sendmail/cf/ostype</EM
> directory for a full listing of the systems
that are already defined.</P
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-OSTYPE-MACRO-DEFINES-LISTED"></A
>OSTYPE source files are mostly composed of <b class="emphasis.bold">define</B
> macros.
<a class="xref" href="#TCP2-AP-5-TAB-3" title="OSTYPE Defines">Table 13.7</A
>
lists the <b class="emphasis.bold">define</B
> parameters most frequently
associated with the OSTYPE source file and the function of each
parameter. The default value assigned to each parameter is shown
enclosed in square brackets after its functional description, if the
parameter has a default value.</P
><table class="table"><caption class="table"><a class="title" name="TCP2-AP-5-TAB-3">Table E.4: OSTYPE Defines</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Parameter</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">ALIAS_FILE</TD
><td class="entry" rowspan="1" colspan="1">Name of the alias file. [<em class="emphasis">/etc/aliases</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">HELP_FILE</TD
><td class="entry" rowspan="1" colspan="1">Name of the help file. [<em class="emphasis">/usr/lib/sendmail.hf</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">QUEUE_DIR</TD
><td class="entry" rowspan="1" colspan="1">Directory containing queue files. [<em class="emphasis">/var/spool/mqueue</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">STATUS_FILE</TD
><td class="entry" rowspan="1" colspan="1">Name of the status file. [<em class="emphasis">/etc/sendmail.st</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">The local mail delivery program. [<em class="emphasis">/bin/mail</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Local mailer flags added to &quot;lsDFM&quot;. [<b class="emphasis.bold">rmn</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">Arguments for local mail delivery. [<b class="emphasis.bold">mail -d $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size of local mail. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_MAILER_CHARSET</TD
><td class="entry" rowspan="1" colspan="1">Character set for local 8-bit MIME mail. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_PATH</TD
><td class="entry" rowspan="1" colspan="1">Shell used to deliver piped email. [<em class="emphasis">/bin/sh</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to lsDFM for the shell mailer. [<b class="emphasis.bold">eu</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_ARGS</TD
><td class="entry" rowspan="1" colspan="1">Arguments for the &quot;prog&quot; mail. [<b class="emphasis.bold">sh -c $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_SHELL_DIR</TD
><td class="entry" rowspan="1" colspan="1">Directory which the shell should run. [<em class="emphasis">$z:/</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Program used for news. [<em class="emphasis">/usr/lib/news/inews</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Usenet mailer flags. [<b class="emphasis.bold">rlsDFMmn</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">Arguments for the usenet mailer. [<b class="emphasis.bold">-m -h -n</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USENET_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size of usenet mail messages. [100000]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to &quot;mDFMUX&quot; for all SMTP mailers. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size of messages for all SMTP mailers. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">smtp mailer arguments. [<b class="emphasis.bold">IPC $h</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">ESMTP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">esmtp mailer arguments. [<b class="emphasis.bold">IPC $h</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP8_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">smtp8 mailer arguments. [<b class="emphasis.bold">IPC $h</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">RELAY_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">relay mailer arguments. [<b class="emphasis.bold">IPC $h</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMTP_MAILER_CHARSET</TD
><td class="entry" rowspan="1" colspan="1">Character set for SMTP 8-bit MIME mail. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path to the UUCP mail program. [<em class="emphasis">/usr/bin/uux</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to &quot;DFMhuU&quot; for the UUCP mailer. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">UUCP mailer arguments.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">&nbsp;&nbsp;&nbsp;[<em class="emphasis">uux - -r -z -a$g -gC $h!rmail ($u)</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size for UUCP messages. [100000]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_MAILER_CHARSET</TD
><td class="entry" rowspan="1" colspan="1">Character set for UUCP 8-bit MIME mail. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path to the FAX program. [<em class="emphasis">/usr/local/lib/fax/mailfax</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">FAX mailer arguments. [<b class="emphasis.bold">mailfax $u $h $f</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size of a FAX. [100000]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">POP_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path of the POP mailer. [<em class="emphasis">/usr/lib/mh/spop</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">POP_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to &quot;lsDFM&quot; for the POP mailer. [<b class="emphasis.bold">Penu</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">POP_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">POP mailer arguments. [<b class="emphasis.bold">pop $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path to the procmail program. [<em class="emphasis">/usr/local/bin/procmail</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to &quot;DFMmn&quot; for the Procmail mailer. [<b class="emphasis.bold">Shu</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">Procmail mailer arguments. [<b class="emphasis.bold">procmail -m $h $f $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PROCMAIL_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size message for the Procmail mailer. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL11_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path to the mail11 mailer. [<em class="emphasis">/usr/etc/mail11</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL11_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags for the mail11 mailer. [<b class="emphasis.bold">nsFx</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL11_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">mail11 mailer arguments. [<b class="emphasis.bold">mail11 $g $x $h $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PH_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path to the phquery program. [<em class="emphasis">/usr/local/etc/phquery</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PH_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags for the phquery mailer. [<b class="emphasis.bold">ehmu</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PH_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">phquery mailer arguments. [<b class="emphasis.bold">phquery -- $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to &quot;lsDFMnP&quot; for the cyrus mailer. [<b class="emphasis.bold">A5@</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_PATH</TD
><td class="entry" rowspan="1" colspan="1">Path to the cyrus mailer. [<em class="emphasis">/usr/cyrus/bin/deliver</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">cyrus mailer arguments. [<b class="emphasis.bold">deliver -e -m $h -- $u</B
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_MAX</TD
><td class="entry" rowspan="1" colspan="1">Maximum size message for the cyrus mailer. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_MAILER_USER</TD
><td class="entry" rowspan="1" colspan="1">User and group used to the cyrus mailer. [<em class="emphasis">cyrus:mail</EM
>]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_BB_MAILER_FLAGS</TD
><td class="entry" rowspan="1" colspan="1">Flags added to &quot;lsDFMnP&quot; for the cyrusbb mailer. </TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CYRUS_BB_MAILER_ARGS</TD
><td class="entry" rowspan="1" colspan="1">cyrusbb mailer arguments. [<b class="emphasis.bold">deliver -e -m $u</B
>]</TD
></TR
></TBODY
></TABLE
><p class="para">Despite the long list of parameters in 
<a class="xref" href="#TCP2-AP-5-TAB-3" title="OSTYPE Defines">Table 13.7</A
>
most OSTYPE macros
are very short. The largest OSTYPE file in the sendmail V8
distribution contains only eight <b class="emphasis.bold">define</B
>s. There are a few reasons for
this. First, many of the parameters in the table are redundant. They
define the same things for different mailers, and no operating systems
uses all of the mailers. Second, the default values are often
correct. A <b class="emphasis.bold">define</B
> only needs to be made if the operating system
requires a value different than the default.<a class="indexterm" name="AUTOID-27572"></A
><a class="indexterm" name="AUTOID-27573"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-5-SECT-3.4">E.3.4 DOMAIN</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-DOMAIN-SOURCE-FILE-IN-SENDMAIL"></A
>The DOMAIN source file defines configuration parameters that are
related to the local domain. <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> provides an example of a
DOMAIN file built for the imaginary <em class="emphasis">nuts.com</EM
> domain.</P
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-DOMAIN-SOURCE-FILE-IN-SENDMAIL-MAIL-RELAY-DEFINES-LISTED"></A
><a class="xref" href="#TCP2-AP-5-TAB-4" title="Mail Relay Defines">Table 13.8</A
>
shows some <b class="emphasis.bold">define</B
> macros that commonly appear in DOMAIN
files. (See the syntax of the <b class="emphasis.bold">define</B
> macro earlier.) This table
lists the parameters and the function of each parameter. All of these
parameters are used to define mail relay hosts. The value provided for
each parameter is either a hostname, i.e., the name of a mail relay
server, or a mailer:hostname pair where the mailer is the internal name
of a local sendmail mailer and the hostname is the name of the
remote mail relay server. If only a hostname is used, the mailer
defaults to <em class="emphasis">relay</EM
>, which is the name of the SMTP relay mailer.
If no values are provided for these parameters, the BITNET, DECNET, and
FAX pseudo-domains are not used, and the local host must be able to
handle its own UUCP and &quot;local&quot; mail.</P
><table class="table"><caption class="table"><a class="title" name="TCP2-AP-5-TAB-4">Table E.5: Mail Relay Defines</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Parameter</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UUCP_RELAY</TD
><td class="entry" rowspan="1" colspan="1">Server for UUCP-addressed email</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">BITNET_RELAY</TD
><td class="entry" rowspan="1" colspan="1">Server for BITNET-addressed email</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">DECNET_RELAY</TD
><td class="entry" rowspan="1" colspan="1">Server for DECNET-addressed email</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">FAX_RELAY</TD
><td class="entry" rowspan="1" colspan="1">Server for mail to the .FAX pseudo-domain[6]</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LOCAL_RELAY</TD
><td class="entry" rowspan="1" colspan="1">Sever for unqualified names</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">LUSER_RELAY</TD
><td class="entry" rowspan="1" colspan="1">Server for apparently local names that really aren't local</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">MAIL_HUB</TD
><td class="entry" rowspan="1" colspan="1">Server for all incoming mail</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SMART_HOST</TD
><td class="entry" rowspan="1" colspan="1">Server for all outgoing mail</TD
></TR
></TBODY
></TABLE
><blockquote class="footnote"><p class="para">[6] The &quot;fax&quot; mailer overrides this value.</P
></BLOCKQUOTE
><p class="para">The precedence of the relays defined by these parameters is from the
most specific to the least specific. If both the BITNET_RELAY and
the SMART_HOST relay are defined, the BITNET_RELAY is used for outgoing
BITNET mail even though the SMART_HOST relay is defined as handling &quot;all&quot;
outgoing mail. If you define both LOCAL_RELAY and MAIL_HUB, you must
also use the FEATURE(stickyhost) command to get the expected behavior.</P
><p class="para">When the stickyhost feature is specified, LOCAL_RELAY handles all local
addresses that do not have a host part, and MAIL_HUB handles all local
addresses that do have a host part. If stickyhost is not specified and
both relays are defined, the LOCAL_RELAY is ignored and MAIL_HUB handles
all local addresses.<a class="indexterm" name="AUTOID-27625"></A
>&#13;</P
><p class="para">In addition to the defines shown in 
<a class="xref" href="#TCP2-AP-5-TAB-4" title="Mail Relay Defines">Table 13.8</A
>
there are a group of
macros that relate to masquerading and relaying that also appear in the
DOMAIN source file. Some of these are used in the examples in <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
>.
The macros are:</P
><dl class="variablelist"><dt class="term">LOCAL_USER(<code class="replaceable"><i>usernames</I
></CODE
>)</DT
><dd class="listitem"><p class="para">Defines local usernames that should not be relayed even if LOCAL_RELAY
or MAIL_HUB are defined. This command is the same as adding usernames
to class L in the <em class="emphasis">sendmail.cf</EM
> file.</P
></DD
><dt class="term">MASQUERADE_AS(<code class="replaceable"><i>host.domain</I
></CODE
>)</DT
><dd class="listitem"><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-MASQUERADING"></A
>Converts the host portion of the sender address on outgoing mail to the
domain name defined by <em class="emphasis">host.domain</EM
>. Sender addresses that have
no hostname or that have a hostname found in the w class are converted.
This has the same as effect as defining <em class="emphasis">host.domain</EM
> for the M
macro in the <em class="emphasis">sendmail.cf</EM
> file. See examples of MASQUERADE_AS and
macro M in <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
>.</P
></DD
><dt class="term">MASQUERADE_DOMAIN(<code class="replaceable"><i>otherhost.domain</I
></CODE
>)</DT
><dd class="listitem"><p class="para">Converts the host portion of the sender address on outgoing mail to the
domain name defined by the MASQUERADE_AS command, if the host portion of
the sender address matches <em class="emphasis">otherhost.domain</EM
>. This command must be
used in conjunction with MASQUERADE_AS. Its effect is the same as adding
hostnames to class M in the <em class="emphasis">sendmail.cf</EM
> file. See <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
>.</P
></DD
><dt class="term">MASQUERADE_DOMAIN_FILE(<code class="replaceable"><i>filename</I
></CODE
>)</DT
><dd class="listitem"><p class="para">Loads <em class="emphasis">otherhost.domain</EM
> hostnames from the file identified by
<em class="emphasis">filename</EM
>. This can be used in place of multiple MASQUERADE_DOMAIN
commands. Its effect is the same as loading class M from a file by
using the <b class="emphasis.bold">FM</B
><code class="replaceable"><i>filename</I
></CODE
> command in the <em class="emphasis">sendmail.cf</EM
> file.</P
></DD
><dt class="term">EXPOSED_USER(<code class="replaceable"><i>username</I
></CODE
>)</DT
><dd class="listitem"><p class="para">Disables masquerading when the user portion of the sender address matches
<em class="emphasis">username</EM
>. Some usernames, such as root, occur on many systems
and are therefore not unique across a domain. For those usernames, converting
the host portion of the address makes it impossible to sort out where
the message really came from and makes replies impossible. This command
prevents the MASQUERADE_AS command from having an effect on the sender
addresses for specific users. This is the same as setting the values in
class E in the <em class="emphasis">sendmail.cf</EM
> file.</P
></DD
></DL
><p class="para">There are several features that affect relaying and masquerading.
We have already discussed FEATURE(stickyhost). Others are:</P
><dl class="variablelist"><dt class="term">FEATURE(masquerade_envelope)</DT
><dd class="listitem"><p class="para">Causes envelop addresses to be masqueraded in the same way that sender
addresses are masqueraded. See <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
> for an example of this
command.</P
></DD
><dt class="term">FEATURE(allmasquerade)</DT
><dd class="listitem"><p class="para">Causes recipient addresses to be masqueraded in the same way that
sender addresses are masqueraded. Thus, if the host portion of the
recipient address matches the requirements of the MASQUERADE_AS
command, it is converted.

Don't use this feature unless you are positive that every alias known
to the local system is also known to the mail server that handles mail
for the masquerade domain.</P
></DD
><dt class="term">FEATURE(limited_masquerade)</DT
><dd class="listitem"><p class="para">Limits masquerading to those hosts defined
in class M. The hosts defined in class w are not masqueraded.</P
></DD
><dt class="term">FEATURE(masquerade_entire_domain)</DT
><dd class="listitem"><p class="para">Causes MASQUERADE_DOMAIN to be interpreted as referring to all hosts
with an entire domain.  If this feature is not used, only an address
that exactly matches the value defined by MASQUERADE_DOMAIN is
converted. If this feature is used, all addresses that end with the
value defined by MASQUERADE_DOMAIN are converted.

For example, assume that the options MASQUERADE_AS(nuts.com) and
MASQUERADE_DOMAIN(sales.nuts.com) are defined. If
FEATURE (masquerade_entire_domain) is set, every hostname in the
<em class="emphasis">sales.nuts.com</EM
> domain is converted to <em class="emphasis">nuts.com</EM
> on outgoing
email. Otherwise only the hostname <em class="emphasis">sales.nuts.com</EM
> is converted.<a class="indexterm" name="AUTOID-27694"></A
></P
></DD
></DL
><p class="para">See the &quot;FEATURE&quot; section earlier in this chapter for more information
on the available features.<a class="indexterm" name="AUTOID-27696"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-5-SECT-3.5">E.3.5 MAILER</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-MAILER-SOURCE-FILE-IN-SENDMAIL"></A
>It is possible that you will need to customize a file location in an
OSTYPE file or that you will need to define domain specific information in a
DOMAIN file, but unless you develop your own mail delivery program you
will not need to create a MAILER source file. Instead, you will need
to invoke one or more existing files in your macro configuration file.</P
><p class="para"><a class="indexterm" name="TCP2-AP-5-IX-MAILER-SOURCE-FILE-IN-SENDMAIL-VALUES-AVAILABLE-LISTED"></A
>The available MAILER files are listed in 
<a class="xref" href="#TCP2-AP-5-TAB-5" title="MAILER Values">Table 13.9</A
>
This table lists
each MAILER value and its function. These are invoked using the
MAILER(<code class="replaceable"><i>value</I
></CODE
>) command in the macro configuration (<em class="emphasis">.mc</EM
>)
file, where <code class="replaceable"><i>value</I
></CODE
> is one of the mailer names from the table.</P
><table class="table"><caption class="table"><a class="title" name="TCP2-AP-5-TAB-5">Table E.6: MAILER Values</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">local</TD
><td class="entry" rowspan="1" colspan="1">The local and prog mailers</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">smtp</TD
><td class="entry" rowspan="1" colspan="1">All SMTP mailers: smtp, esmtp, smtp8, and relay</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">uucp</TD
><td class="entry" rowspan="1" colspan="1">All UUCP mailers: uucp-old (uucp) and uucp-new (suucp)</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">usenet</TD
><td class="entry" rowspan="1" colspan="1">Usenet news support</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">fax</TD
><td class="entry" rowspan="1" colspan="1">Fax support using FlexFAX software</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">pop</TD
><td class="entry" rowspan="1" colspan="1">Post Office Protocol (POP) support</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">procmail</TD
><td class="entry" rowspan="1" colspan="1">An interface for procmail</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">mail11</TD
><td class="entry" rowspan="1" colspan="1">The DECnet mail11 mailer</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">phquery</TD
><td class="entry" rowspan="1" colspan="1">The phquery program for CSO phone book</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">cyrus</TD
><td class="entry" rowspan="1" colspan="1">The cyrus and cyrusbb mailers</TD
></TR
></TBODY
></TABLE
><p class="para">Your macro configuration file should have a MAILER(local) and a
MAILER(smtp) entry. This gives you the local and prog mailers required by
sendmail, the smtp mailer for standard SMTP mail, the esmtp mailer
for Extended SMTP, the smtp8 mailer for 8-bit MIME mail, and the relay
mailer for the various mail relay servers mentioned in the &quot;DOMAIN&quot;
section of this appendix. Selecting <b class="emphasis.bold">local</B
> and <b class="emphasis.bold">smtp</B
> provides
everything you need for a standard TCP/IP installation.<a class="indexterm" name="AUTOID-27751"></A
></P
><p class="para">Of all the remaining mailers, only uucp is widely used.
uucp provides UUCP mail support for<a class="indexterm" name="AUTOID-27753"></A
>
systems directly connected to
UUCP networks. The uucp-old mailer supports standard UUCP mail and the
uucp-new mailer is used for remote sites that can handle multiple
recipients in one transfer. The system needs the mailer that is
correct for the capabilities of the remote site. Use class U to
define the hostnames of systems that need the old mailer and class Y
for the names of remote systems that can work with the new mailer.
Specify MAILER(uucp) after the MAILER(smtp) entry if your system has
both TCP/IP and UUCP connections. Ordering the MAILER statements in
this way adds two more mailers to the two standard UUCP mailers: the
uucp-dom mailer to support standard domain names, and the uucp-uudom
mailer to support standard domain names with a standard UUCP envelop.</P
><p class="para">The other mailers are rarely used:</P
><dl class="variablelist"><dt class="term"><em class="emphasis">usenet</EM
></DT
><dd class="listitem"><p class="para">Modifies the sendmail rewrite rules to send local mail that contains
&quot;.usenet&quot; in the username to the program inews. Instead of this
mailer, choose a user mail agent that supports Usenet news.<a class="indexterm" name="AUTOID-27762"></A
>
Don't hack sendmail to handle it.</P
></DD
><dt class="term"><em class="emphasis">fax</EM
></DT
><dd class="listitem"><p class="para">This is still experimental in sendmail V8, though built-in fax support<a class="indexterm" name="AUTOID-27769"></A
>
could be useful when it is ready.</P
></DD
><dt class="term"><em class="emphasis">pop</EM
></DT
><dd class="listitem"><p class="para">On most systems, POP support is provided separately by the <b class="emphasis.bold">popd</B
>
daemon, and the MAILER(pop) command is not used.</P
></DD
><dt class="term"><em class="emphasis">procmail</EM
></DT
><dd class="listitem"><p class="para">Only provides an interface to procmail<a class="indexterm" name="AUTOID-27782"></A
>
for use in the mailertable.
The sendmail V8 distribution does not provide procmail. Even when
procmail is used as the local mailer, as it is in Slackware Linux,
the <b class="emphasis.bold">MAILER(procmail)</B
> command is not required.</P
></DD
><dt class="term"><em class="emphasis">mail11</EM
></DT
><dd class="listitem"><p class="para">Only used on DECNET mail networks that use the mail11 mailer.</P
></DD
><dt class="term"><em class="emphasis">phquery</EM
></DT
><dd class="listitem"><p class="para">Provides a name lookup program for the CSO phone book (ph) directory
service. User directory services are usually configured in the user
mail agent, not in sendmail.</P
></DD
><dt class="term"><em class="emphasis">cyrus</EM
></DT
><dd class="listitem"><p class="para">This is a local mail delivery program with a mailbox architecture. cyrus<a class="indexterm" name="AUTOID-27800"></A
>
and cyrusbb mailers are not widely used.</P
></DD
></DL
><p class="para">This concludes our discussion of <b class="emphasis.bold">m4</B
> macros. The output of all of
the files and commands that go into the <b class="emphasis.bold">m4</B
> processor is a
<em class="emphasis">sendmail.cf</EM
> file. The remainder of this appendix provides
additional details about the <em class="emphasis">sendmail.cf</EM
> configuration and
excerpts from a <em class="emphasis">sendmail.cf</EM
> file. The bulk of information about
<em class="emphasis">sendmail.cf</EM
> is found in <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10</A
>.<a class="indexterm" name="AUTOID-27810"></A
><a class="indexterm" name="AUTOID-27811"></A
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appe_02.htm" title="E.2 The sendmail Command"><img src="../gifs/txtpreva.gif" alt="Previous: E.2 The sendmail Command" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appe_04.htm#TCP2-AP-5-SECT-4.2" title="E.4 More sendmail.cf"><img src="../gifs/txtnexta.gif" alt="Next: E.4 More sendmail.cf" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">E.2 The sendmail Command</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">E.4 More sendmail.cf</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
