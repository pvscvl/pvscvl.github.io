<html><head>
<title>[Appendix B] B.8 Protocol Statements</TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:42:57Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appb_01.htm" title="B. A gated Reference"><link rel="prev" href="appb_07.htm" title="B.7 Definition Statements"><link rel="next" href="appb_09.htm" title="B.9 static Statements"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appb_07.htm" title="B.7 Definition Statements"><img src="../gifs/txtpreva.gif" alt="Previous: B.7 Definition Statements" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Appendix B<br>A gated Reference</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appb_09.htm" title="B.9 static Statements"><img src="../gifs/txtnexta.gif" alt="Next: B.9 static Statements" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="TCP2-AP-2-SECT-8">B.8 Protocol Statements</A
></H2
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-PROTOCOL-STATEMENTS-IN-GATED"></A
>Protocol statements enable or disable protocols and set protocol
options. The protocol statements occur after the definition statements
and before the static statements. There are many protocol statements
and more may be added at any time. There are statements for the
various interior and exterior routing protocols, and for other things
that are not really routing protocols. &#13;</P
><p class="para">In this section we begin with the interior protocols, move on to the
exterior protocols, and finish with the special &quot;protocols.&quot;</P
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.1">B.8.1 The ospf Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-OSPF-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">ospf yes </B
>|<b class="emphasis.bold"> no </B
>|<b class="emphasis.bold"> on </B
>|<b class="emphasis.bold"> off</B
> [<b class="emphasis.bold">{<br>    defaults {<br>        preference</B
> <code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;<br>        cost</B
> <code class="replaceable"><i>cost</I
></CODE
><b class="emphasis.bold"> ;<br>        tag </B
>[<b class="emphasis.bold">as</B
>] <code class="replaceable"><i>tag</I
></CODE
><b class="emphasis.bold"> ;<br>        type 1 </B
>|<b class="emphasis.bold"> 2 ; } ;<br>    exportlimit</B
> <code class="replaceable"><i>routes</I
></CODE
><b class="emphasis.bold"> ;<br>    exportinterval</B
> <code class="replaceable"><i>time</I
></CODE
><b class="emphasis.bold"> ;<br>    traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>    monitorauthkey</B
> <code class="replaceable"><i>password</I
></CODE
><b class="emphasis.bold"> ;<br>    backbone </B
>|<b class="emphasis.bold"> area</B
> <code class="replaceable"><i>number</I
></CODE
><b class="emphasis.bold"> {<br>        authtype 0 </B
>|<b class="emphasis.bold"> 1 </B
>|<b class="emphasis.bold"> none </B
>|<b class="emphasis.bold"> simple ;<br>        stub </B
>[<b class="emphasis.bold">cost</B
> <code class="replaceable"><i>cost</I
></CODE
>]<b class="emphasis.bold"> ;<br>        networks {</B
><br>          <code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">mask</B
> <code class="replaceable"><i>mask |</I
></CODE
><b class="emphasis.bold">masklen</B
> <code class="replaceable"><i>number</I
></CODE
>] [<b class="emphasis.bold">restrict</B
>]<b class="emphasis.bold"> ;<br>            host</B
> <code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">restrict</B
>]<b class="emphasis.bold"> ; } ;<br>        stubhosts {</B
><br>          <code class="replaceable"><i>address </I
></CODE
><b class="emphasis.bold">cost</B
> <code class="replaceable"><i>cost</I
></CODE
><b class="emphasis.bold"> ; } ;<br>        interface</B
> <code class="replaceable"><i>interface_list </I
></CODE
>[<b class="emphasis.bold"></B
><b class="emphasis.bold">nonbroadcast</B
>] [<b class="emphasis.bold">cost</B
> <code class="replaceable"><i>cost</I
></CODE
>]<b class="emphasis.bold"> {<br>            pollinterval</B
> <code class="replaceable"><i>time</I
></CODE
><b class="emphasis.bold"> ;<br>            routers {</B
><br>            <code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">eligible</B
>]<b class="emphasis.bold"> ; } ;</B
><br>            <code class="replaceable"><i>interface_parameters</I
></CODE
><b class="emphasis.bold"> } ;<br>        virtuallink neighborid</B
> <code class="replaceable"><i>router_id </I
></CODE
><b class="emphasis.bold">transitarea</B
> <code class="replaceable"><i>area</I
></CODE
> {<br>            <code class="replaceable"><i>interface_parameters</I
></CODE
><b class="emphasis.bold"> } ;<br>    } ;<br>} </B
>] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">ospf</B
> statement enables or disables the Open Shortest Path First (OSPF) routing protocol.<a class="indexterm" name="AUTOID-21551"></A
>
By default, OSPF is disabled. It is enabled by
specifying <b class="emphasis.bold">yes</B
> or <b class="emphasis.bold">on</B
> (it doesn't matter which you use) and
it is disabled with <b class="emphasis.bold">no</B
> or <b class="emphasis.bold">off</B
>.</P
><blockquote class="note"><p class="para"><strong>NOTE:</STRONG
> For the sake of brevity, this text explains only the first occurrence
of any <em class="emphasis">gated.conf</EM
> parameter if it is used the same way in subsequent
commands. Only differences between commands are explained. For example,
<b class="emphasis.bold">yes</B
> | <b class="emphasis.bold">no</B
> | <b class="emphasis.bold">on</B
> | <b class="emphasis.bold">off</B
> is not explained again,
because it is always used in the same way to enable or disable a protocol.</P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">ospf</B
> statement has many configuration parameters:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">defaults</B
></DT
><dd class="listitem"><p class="para">Defines the defaults used when importing OSPF routes from an external
autonomous system and announcing those routes to other OSPF routers.
The link-state advertisement (LSA)<a class="indexterm" name="AUTOID-21573"></A
>
used to announce these routes is
called an ASE (autonomous system external)<a class="indexterm" name="AUTOID-21575"></A
>
because it contains routes
from external autnomous systems. See the description of OSFP in
<a class="xref" href="ch07_01.htm" title="Configuring Routing ">Chapter 7</A
>.

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the preference of OSPF ASE routes. The default is 150.</P
></DD
><dt class="term"><b class="emphasis.bold">cost</B
> <code class="replaceable"><i>cost</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the cost used when advertising a non-OSPF route in an ASE. The
default is 1.</P
></DD
><dt class="term"><b class="emphasis.bold">tag </B
>[<b class="emphasis.bold">as</B
>] <code class="replaceable"><i>tag</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the OSPF ASE tag value. The tag is not used by the OSPF protocol,
but may be used by an export policy to filter routes. (See the <b class="emphasis.bold">export</B
>
statement later in this appendix.) When the <b class="emphasis.bold">as</B
> keyword is specified,
the tag field may contain AS path information.</P
></DD
><dt class="term"><b class="emphasis.bold">type </B
><b class="emphasis.bold">1 </B
>| <b class="emphasis.bold">2</B
></DT
><dd class="listitem"><p class="para">Defines the type of ASE used. The default is type 1. Type 1 contains
routes learned from an external protocol that provides a metric
directly comparable to the OSPF metric. The metric is added to the
cost of reaching the border router when routes are advertised. A type
2 ASE contains routes learned from an exterior gateway protocol that
does not provide a routing metric comparable to the OSPF metric. These
routes are advertised with the cost of reaching the border router. See
<a class="xref" href="ch07_01.htm" title="Configuring Routing ">Chapter 7</A
>.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">exportlimit</B
> <code class="replaceable"><i>routes</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the maximum number of ASE LSAs that will be flooded<a class="indexterm" name="AUTOID-21615"></A
>
at one time. The default is 100.</P
></DD
><dt class="term"><b class="emphasis.bold">exportinterval</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines how frequently ASE link-state advertisements are flooded to the
network. The default is once per second.</P
></DD
><dt class="term"><b class="emphasis.bold">traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the tracing used to debug OSPF. In addition to the standard
trace flags, OSPF supports:
<dl class="variablelist"><dt class="term"><b class="emphasis.bold">lsabuild</B
></DT
><dd class="listitem"><p class="para">Traces construction of link-state advertisements (LSA). </P
></DD
><dt class="term"><b class="emphasis.bold">spf</B
></DT
><dd class="listitem"><p class="para">Traces the Shortest Path First (SPF) calculations. </P
></DD
><dt class="term"><b class="emphasis.bold">hello</B
></DT
><dd class="listitem"><p class="para">Traces the OSPF HELLO packets. </P
></DD
><dt class="term"><b class="emphasis.bold">dd</B
></DT
><dd class="listitem"><p class="para">Traces the OSPF Database Description packets. </P
></DD
><dt class="term"><b class="emphasis.bold">request</B
></DT
><dd class="listitem"><p class="para">Traces the OSPF Link-State Request packets. </P
></DD
><dt class="term"><b class="emphasis.bold">lsu</B
></DT
><dd class="listitem"><p class="para">Traces the OSPF Link-State Update packets. </P
></DD
><dt class="term"><b class="emphasis.bold">ack</B
></DT
><dd class="listitem"><p class="para">Traces OSPF Link-State Ack packets. </P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">monitorauthkey</B
> <code class="replaceable"><i>password</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the password used for <b class="emphasis.bold">ospf_monitor</B
> queries. By default
these queries are not authenticated. If <b class="emphasis.bold">monitorauthkey</B
> is
specified, incoming queries must contain the specified password.</P
></DD
><dt class="term"><b class="emphasis.bold">backbone </B
>|<b class="emphasis.bold"> area</B
> <code class="replaceable"><i>number</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the OSPF area of which this router is a member. Every router must
belong to an area. If more than one area is configured, at least one must
be the backbone. The backbone is defined using the <b class="emphasis.bold">backbone</B
> keyword.
All other areas are defined by the <b class="emphasis.bold">area</B
> keyword and the number of
the area, e.g., <code class="literal">area 1</CODE
>. See <a class="xref" href="ch07_01.htm" title="Configuring Routing ">Chapter 7</A
> for a discussion of OSPF
areas. Several configuration parameters are associated with each area:

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">authtype 0</B
> | <b class="emphasis.bold">1 </B
>| <b class="emphasis.bold">none </B
>| <b class="emphasis.bold">simple</B
></DT
><dd class="listitem"><p class="para">Specifies the authentication scheme used in this area. The
authentication schemes can be defined by <b class="emphasis.bold">none</B
> or <b class="emphasis.bold">0</B
> for no
authentication, or <b class="emphasis.bold">simple</B
> or <b class="emphasis.bold">1</B
> for password
authentication. Each system in an area must use this same
authentication scheme.</P
></DD
><dt class="term"><b class="emphasis.bold">stub </B
>[<b class="emphasis.bold">cost</B
> <code class="replaceable"><i>cost</I
></CODE
>]</DT
><dd class="listitem"><p class="para">Specifies that this is a stub area.<a class="indexterm" name="AUTOID-21704"></A
>
A stub area is one in which there
are no ASE routes. If a cost is specified, it is used to advertise a
default route into the stub area.</P
></DD
><dt class="term"><b class="emphasis.bold">networks</B
></DT
><dd class="listitem"><p class="para">Defines the range of networks contained within this area. The specified
ranges are advertised into other areas as summary network LSAs and
not as inter-area routes. If <b class="emphasis.bold">restrict</B
> is specified, the summary
network LSAs are not advertised. The entries in the networks list are
either specified as host addresses by using the <b class="emphasis.bold">host</B
> keyword before
the address, or as a network address by simply specifying the address.
An address mask can be defined for a network address. The mask can be
defined in dotted decimal notation using the <b class="emphasis.bold">mask</B
> keyword or as
a numeric prefix length using the <b class="emphasis.bold">masklen</B
> keyword. The address
masks <code class="literal">mask 255.255.0.0</CODE
> and <code class="literal">masklen 16</CODE
> are equivalent.
If no address mask is specified, the natural mask is used. This option
can reduce the amount of routing information propagated between areas.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">stubhosts</B
></DT
><dd class="listitem"><p class="para">Lists the directly attached hosts, and their costs, that should be
advertised as reachable from this router. List point-to-point
interfaces here.</P
></DD
><dt class="term"><b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list </I
></CODE
>[<b class="emphasis.bold">nobroadcast</B
>] [<b class="emphasis.bold">cost</B
> <code class="replaceable"><i>cost</I
></CODE
>]</DT
><dd class="listitem"><p class="para">Defines the interfaces used by OSPF. If the keyword <b class="emphasis.bold">nobroadcast</B
> is
specified, the interface connects to a non-broadcast multi-access (NBMA)
network.<a class="indexterm" name="AUTOID-21732"></A
><a class="indexterm" name="AUTOID-21734"></A
>
If <b class="emphasis.bold">nobroadcast</B
> is not used, the interface connects to a
broadcast or a point-to-point network. Specify the cost of the interface
with the <b class="emphasis.bold">cost</B
> keyword, e.g., <code class="literal">cost 5</CODE
>. The default cost is 1.

Two options are specific to NBMA interfaces: 
<dl class="variablelist"><dt class="term"><b class="emphasis.bold">pollinterval</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the time interval at which OSPF HELLO packets are sent to
neighbors.</P
></DD
><dt class="term"><b class="emphasis.bold">routers</B
></DT
><dd class="listitem"><p class="para">Lists all neighbors by address. The <b class="emphasis.bold">eligible</B
> keyword indicates
if the neighbor can become a designated router.&#13;</P
></DD
></DL
>&#13;</P
><p class="para">Point-to-point interfaces have one additional parameter: </P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">nomulticast</B
></DT
><dd class="listitem"><p class="para">Forces <b class="emphasis.bold">gated</B
> to unicast OSPF packets over this interface. By
default, OSPF packets to neighbors on point-to-point interfaces are
sent via the IP multicast mechanism. Use this option if the remote
neighbor does not support multicasting.</P
></DD
></DL
><p class="para">All interfaces&nbsp;- NBMA, point-to-point, and 
broadcast&nbsp;- can use these parameters:
<dl class="variablelist"><dt class="term"><b class="emphasis.bold">enable </B
>|<b class="emphasis.bold"> disable ;</B
></DT
><dd class="listitem"><p class="para">Enables or disables the interface.</P
></DD
><dt class="term"><b class="emphasis.bold">retransmitinterval</B
> <code class="replaceable"><i>time </I
></CODE
><b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Defines the number of seconds between link-state advertisement
retransmissions.</P
></DD
><dt class="term"><b class="emphasis.bold">transitdelay</B
> <code class="replaceable"><i>time </I
></CODE
><b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Defines the estimated number of seconds required to transmit a link-state
update over this interface. It must be greater than 0.</P
></DD
><dt class="term"><b class="emphasis.bold">priority</B
> <code class="replaceable"><i>priority </I
></CODE
><b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Defines this system's priority for the designated router election.
<code class="replaceable"><i>priority</I
></CODE
> is a number from 0 to 255. The router with the highest
priority becomes the designated router. A router whose priority is 0 is
ineligible to become the designated router. See <a class="xref" href="ch07_01.htm" title="Configuring Routing ">Chapter 7</A
> for a discussion
of desginated routers.</P
></DD
><dt class="term"><b class="emphasis.bold">hellointerval</B
> <code class="replaceable"><i>time </I
></CODE
><b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Defines the number of seconds between transmissions of HELLO packets. </P
></DD
><dt class="term"><b class="emphasis.bold">routerdeadinterval</B
> <code class="replaceable"><i>time</I
></CODE
> <b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Defines the timeout before a neighbor is declared down. <code class="replaceable"><i>time</I
></CODE
>
is the maximum number of seconds this router will wait for a neighbor's
Hello packet.</P
></DD
><dt class="term"><b class="emphasis.bold">authkey</B
> <code class="replaceable"><i>key </I
></CODE
><b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Defines a key used to authenticate OSPF packets.<a class="indexterm" name="AUTOID-21813"></A
>
The <code class="replaceable"><i>key</I
></CODE
> is
specified as one to eight decimal digits separated by periods, a one- to
eight-byte hexadecimal string preceded by 0x, or a one- to eight-character 
string in double quotes.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">virtuallink neighborid</B
> <code class="replaceable"><i>router_id </I
></CODE
><b class="emphasis.bold">transitarea</B
> <code class="replaceable"><i>area</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines a virtual link<a class="indexterm" name="AUTOID-21825"></A
>
for the backbone area. The <code class="replaceable"><i>router_id</I
></CODE
> is the
router identifier of the remote router at the other end of the virtual
link. The transit area must be one of the other areas configured on
this system. All standard interface parameters defined above may be
specified on a virtual link.<a class="indexterm" name="AUTOID-21829"></A
></P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.2">B.8.2 The rip Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-ROUTING-INFORMATION-PROTOCOL-RIP-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">rip yes | no | on | off </B
>[<b class="emphasis.bold"> {<br>    broadcast ;<br>    nobroadcast ;<br>    nocheckzero ;<br>    preference</B
> <code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;<br>    defaultmetric</B
> <code class="replaceable"><i>metric</I
></CODE
><b class="emphasis.bold"> ;<br>    query authentication </B
>[<b class="emphasis.bold">none </B
>| [<b class="emphasis.bold">simple </B
>|<b class="emphasis.bold"> md5</B
> <code class="replaceable"><i>password</I
></CODE
>]]<b class="emphasis.bold"> ;<br>    interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
><br>        [<b class="emphasis.bold">noripin</B
>] | [<b class="emphasis.bold">ripin</B
>]<br>        [<b class="emphasis.bold">noripout</B
>] | [<b class="emphasis.bold">ripout</B
>]<br>        [<b class="emphasis.bold">metricin</B
> <code class="replaceable"><i>metric</I
></CODE
>] <br>        [<b class="emphasis.bold">metricout</B
> <code class="replaceable"><i>metric</I
></CODE
>]<br>        [<b class="emphasis.bold">version 1 </B
>| <b class="emphasis.bold">2 [</B
><b class="emphasis.bold">multicast </B
>| <b class="emphasis.bold">broadcast</B
>]] <br>        [[<b class="emphasis.bold">secondary</B
>] <b class="emphasis.bold">authentication </B
>[<b class="emphasis.bold">none </B
>| [<b class="emphasis.bold">simple </B
>| <b class="emphasis.bold">md5</B
> <code class="replaceable"><i>password</I
></CODE
>]] <b class="emphasis.bold">;<br>    trustedgateways</B
> <code class="replaceable"><i>gateway_list</I
></CODE
><b class="emphasis.bold"> ;<br>    sourcegateways</B
> <code class="replaceable"><i>gateway_list</I
></CODE
><b class="emphasis.bold"> ;<br>    traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>} </B
>] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">rip</B
> statement enables or disables RIP. By default RIP is enabled.
The <b class="emphasis.bold">rip</B
> statement options are: </P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">broadcast</B
></DT
><dd class="listitem"><p class="para">Forces <b class="emphasis.bold">gated</B
> to broadcast RIP update packets even if the system
has only one network interface. By default, RIP updates are not broadcast
if the system has only one network interface and are broadcast if it has
more than one network interface; i.e., hosts do not broadcast updates and
routers do.

Forces <b class="emphasis.bold">gated</B
> to not broadcast RIP update packets even if the
system has more than one network interface. If a <b class="emphasis.bold">sourcegateways</B
>
clause is present, routes are still unicast directly to that gateway.
See <b class="emphasis.bold">sourcegateways</B
> later in this section.

Specifies that <b class="emphasis.bold">gated</B
> should not reject incoming version 1 RIP
packets where the reserved fields are 0. Rejecting those packets is
standard practice.</P
></DD
><dt class="term"><b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;</B
></DT
><dd class="listitem"><p class="para">Sets the <b class="emphasis.bold">gated</B
> preference for routes learned from
RIP. The default preference for these routes is 100.</P
></DD
><dt class="term"><b class="emphasis.bold">defaultmetric</B
> <code class="replaceable"><i>metric</I
></CODE
><b class="emphasis.bold"> ;</B
></DT
><dd class="listitem"><p class="para">Defines the metric used when advertising routes via RIP that were
learned from other protocols. The default <code class="replaceable"><i>metric</I
></CODE
> is 16,
which to RIP indicates an unusable route. This means that by default,
routes learned from other protocols are not advertised as valid routes
by RIP. Set a lower value only if you want all routes
learned from other protocols advertised at that metric.</P
></DD
><dt class="term"><b class="emphasis.bold">query authentication </B
>[<b class="emphasis.bold">none </B
>| [<b class="emphasis.bold">simple </B
>| <b class="emphasis.bold">md5</B
> <code class="replaceable"><i>key</I
></CODE
>]] <b class="emphasis.bold">;</B
></DT
><dd class="listitem"><p class="para">Specifies the authentication used for non-router query packets. The
default is <b class="emphasis.bold">none</B
>. If <b class="emphasis.bold">simple</B
> is specified, the <code class="replaceable"><i>key</I
></CODE
> is a
16-byte password. If <b class="emphasis.bold">md5</B
> is specified, the <code class="replaceable"><i>key</I
></CODE
> is a 16-byte
value used with the packet contents to generate a Message Digest 5
cryptographic checksum.<a class="indexterm" name="AUTOID-21920"></A
></P
></DD
><dt class="term"><b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
></DT
><dd class="listitem"><p class="para">Identifies the interfaces over which RIP runs and defines the
configuration parameters of those interfaces. The <code class="replaceable"><i>interface_list</I
></CODE
>
can contain interface names, hostnames, IP addresses, or the keyword
<b class="emphasis.bold">all</B
>. Possible parameters are:

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">noripin</B
></DT
><dd class="listitem"><p class="para">Tells system to ignore RIP packets received on this interface. The default is
to listen to RIP packets on all non-loopback interfaces.</P
></DD
><dt class="term"><b class="emphasis.bold">ripin</B
></DT
><dd class="listitem"><p class="para">Tells system to listen to RIP packets received on this interface. This is the default.</P
></DD
><dt class="term"><b class="emphasis.bold">noripout</B
></DT
><dd class="listitem"><p class="para">Tells system not to send RIP packets out this interface. The default is to
send RIP on all broadcast and non-broadcast interfaces when in broadcast mode.
See the <b class="emphasis.bold">nobroadcast</B
> option defined earlier in this list.</P
></DD
><dt class="term"><b class="emphasis.bold">ripout</B
></DT
><dd class="listitem"><p class="para">Tells system to send RIP packets out this interface. This is the default.</P
></DD
><dt class="term"><b class="emphasis.bold">metricin</B
> <code class="replaceable"><i>metric</I
></CODE
></DT
><dd class="listitem"><p class="para">Specifies the RIP metric used for routes received on this interface.
The default is the kernel interface metric plus 1, which is the default
RIP hop count. If this metric is specified it is used as the absolute
value, and is not added to the kernel metric.</P
></DD
><dt class="term"><b class="emphasis.bold">metricout</B
></DT
><dd class="listitem"><p class="para">Specifies the RIP metric added to routes sent out this interface. The
default is 0. This option can only increase the metric.</P
></DD
><dt class="term"><b class="emphasis.bold">version 1</B
> | <b class="emphasis.bold">2 </B
>[<b class="emphasis.bold">multicast</B
> | <b class="emphasis.bold">broadcast</B
>]</DT
><dd class="listitem"><p class="para">Identifies the version of RIP used for updates sent out this
interface. Available versions are RIP 1 and RIP 2. RIP 1 is the
default. If RIP 2 is specified and IP multicast is supported,
full version 2 packets are sent via multicast. If
multicast is not available, version 1-compatible version 2 packets are
sent via broadcast. The keyword <b class="emphasis.bold">multicast</B
>, the default,
specifies this behavior. The keyword <b class="emphasis.bold">broadcast</B
> specifies that
RIP version 1-compatible version 2 packets should be broadcast on this
interface, even if IP multicast is available. Neither
keyword is used with version 1.</P
></DD
><dt class="term"><b class="emphasis.bold">[secondary] authentication </B
>[<b class="emphasis.bold">none </B
>| <b class="emphasis.bold">simple </B
>| <b class="emphasis.bold">md5</B
> <code class="replaceable"><i>key</I
></CODE
>]</DT
><dd class="listitem"><p class="para">Defines the RIP version 2 authentication used on this interface. The
default authentication type is <b class="emphasis.bold">none</B
>. If <b class="emphasis.bold">simple</B
> is specified,
the <code class="replaceable"><i>key</I
></CODE
> is a 16-byte password. If <b class="emphasis.bold">md5</B
> is specified, the
<code class="replaceable"><i>key</I
></CODE
> is a 16-byte value used with the packet contents to generate a
Message Digest 5 cryptographic checksum. If <b class="emphasis.bold">secondary</B
> is specified,
this defines the secondary authentication. Packets are always sent using
the primary authentication technique. The secondary authentication
type is defined only for incoming packets. Inbound packets are checked
against both the primary and secondary authentication method before
being discarded as invalid.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">trustedgateways</B
> <code class="replaceable"><i>gateway_list</I
></CODE
><b class="emphasis.bold"> ;</B
></DT
><dd class="listitem"><p class="para">Defines the list of gateways from which RIP accepts
updates. The <code class="replaceable"><i>gateway_list</I
></CODE
> is simply a list of hostnames or IP
addresses. By default, all gateways on the shared network are trusted
to supply routing information. But if the <b class="emphasis.bold">trustedgateways</B
> statement is
used, only updates from the gateways in the list are accepted.</P
></DD
><dt class="term"><b class="emphasis.bold">sourcegateways</B
> <code class="replaceable"><i>gateway_list</I
></CODE
><b class="emphasis.bold"> ;</B
></DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-22004"></A
>Defines a list of gateways to which RIP sends packets directly.
By default, RIP packets are broadcast or multicast to several systems on
the shared network&nbsp;- but if this statement is used, RIP unicasts packets
directly to the listed gateways.</P
></DD
><dt class="term"><b class="emphasis.bold">traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines tracing for RIP. RIP supports most of the standard tracing
options and these packet-tracing options:
<dl class="variablelist"><dt class="term"><b class="emphasis.bold">packets</B
></DT
><dd class="listitem"><p class="para">Traces all RIP packets. </P
></DD
><dt class="term"><b class="emphasis.bold">request</B
></DT
><dd class="listitem"><p class="para">Traces the RIP information request packets, such as REQUEST, POLL, and
POLLENTRY.</P
></DD
><dt class="term"><b class="emphasis.bold">response</B
></DT
><dd class="listitem"><p class="para">Traces all RIP RESPONSE packets. </P
></DD
><dt class="term"><b class="emphasis.bold">other</B
></DT
><dd class="listitem"><p class="para">Traces any other type of RIP packet.<a class="indexterm" name="AUTOID-22033"></A
></P
></DD
></DL
></P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.3">B.8.3 The hello Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-HELLO-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">hello yes | no | on | off </B
>[<b class="emphasis.bold"> {<br>    broadcast ;<br>    nobroadcast ;<br>    preference </B
><code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;<br>    defaultmetric</B
> <code class="replaceable"><i>metric</I
></CODE
><b class="emphasis.bold"> ;<br>    interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
> <br>            [<b class="emphasis.bold">nohelloin</B
>] | [<b class="emphasis.bold">helloin</B
>]<br>            [<b class="emphasis.bold">nohelloout</B
>] | [<b class="emphasis.bold">helloout</B
>]<br>            [<b class="emphasis.bold">metricin</B
> <code class="replaceable"><i>metric</I
></CODE
>]<br>            [<b class="emphasis.bold">metricout</B
> <code class="replaceable"><i>metric</I
></CODE
>] <b class="emphasis.bold">;<br>    trustedgateways</B
> <code class="replaceable"><i>gateway_list </I
></CODE
><b class="emphasis.bold">;<br>    sourcegateways</B
> <code class="replaceable"><i>gateway_list </I
></CODE
><b class="emphasis.bold">;<br>    traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>}</B
> ]<b class="emphasis.bold"> ;</B
></P
></BLOCKQUOTE
><p class="para">This statement enables or disables Hello. By default, Hello is disabled.
The default metric is 30000 (30 seconds is the highest possible Hello
metric) and the default preference is 90. Unless the preference values
are altered, routes learned from Hello are preferred over those learned
from RIP.</P
><p class="para">The <b class="emphasis.bold">hello</B
> statement has basically the same options as the <b class="emphasis.bold">rip</B
>
statement. The only command differences are the keywords
<b class="emphasis.bold">nohelloin</B
> and <b class="emphasis.bold">nohelloout</B
>, but they perform the same
function for Hello as <b class="emphasis.bold">noripin</B
> and <b class="emphasis.bold">noripout</B
> do for RIP.</P
><p class="para">The <b class="emphasis.bold">hello</B
> statement supports most of the standard trace options. In
addition, the option <b class="emphasis.bold">packets</B
> can be specified to trace all HELLO
packets.<a class="indexterm" name="AUTOID-22075"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.4">B.8.4 The isis Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-ISIS-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">isis yes </B
>|<b class="emphasis.bold"> no </B
>|<b class="emphasis.bold"> dual </B
>| <b class="emphasis.bold">ip </B
>| <b class="emphasis.bold">iso {<br>        level 1 </B
>| <b class="emphasis.bold">2 ;<br>        traceoptions</B
> <code class="replaceable"><i>isis_traceoptions</I
></CODE
><b class="emphasis.bold"> ;<br>        systemid</B
> <code class="replaceable"><i>6_digit_hexstring</I
></CODE
><b class="emphasis.bold"> ;<br>        area</B
> <code class="replaceable"><i>hexstring</I
></CODE
><b class="emphasis.bold"> ;<br>        set</B
> <code class="replaceable"><i>isis_parm value </I
></CODE
><b class="emphasis.bold">; </B
>...<b class="emphasis.bold">        circuit</B
> <code class="replaceable"><i>string</I
></CODE
><b class="emphasis.bold">            metric level 1 </B
>| <b class="emphasis.bold">2</B
> <code class="replaceable"><i>metric</I
></CODE
><b class="emphasis.bold">            priority level 1 </B
>| <b class="emphasis.bold">2</B
> <code class="replaceable"><i>priority</I
></CODE
><b class="emphasis.bold"> ;<br>} ;</B
></P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">isis</B
> statement enables the IS-IS protocol.<a class="indexterm" name="AUTOID-22107"></A
>
By default, it is disabled. The <b class="emphasis.bold">dual</B
> keyword enables
IS-IS for both ISO and IP
addressing. The <b class="emphasis.bold">ip</B
> keyword enables it for IP addressing and
<b class="emphasis.bold">iso</B
> enables it for ISO addressing. The options that may appear
in the <b class="emphasis.bold">isis</B
> statement are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">level</B
></DT
><dd class="listitem"><p class="para">Indicates whether the router, called an <em class="emphasis">intermediate system</EM
> (IS)<a class="indexterm" name="AUTOID-22120"></A
><a class="indexterm" name="AUTOID-22123"></A
>
in OSI terminology, is a Level 1 (intra-area) or Level 2 (inter-area)
IS. Default is Level 1.</P
></DD
><dt class="term"><b class="emphasis.bold">traceoptions</B
></DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-22130"></A
>Defines the IS-IS trace options. These are different from other
<b class="emphasis.bold">gated</B
> trace options. The <b class="emphasis.bold">isis_traceoptions</B
> are:

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">all</B
></DT
><dd class="listitem"><p class="para">Traces everything. &#13;</P
></DD
><dt class="term"><b class="emphasis.bold">iih</B
></DT
><dd class="listitem"><p class="para">Traces ISIS HELLO packets.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">lanadj</B
></DT
><dd class="listitem"><p class="para">Traces LAN adjacency updates.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">p2padj</B
></DT
><dd class="listitem"><p class="para">Traces point-to-point adjacency updates.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">lspdb</B
></DT
><dd class="listitem"><p class="para">Traces signatures in the LSP database.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">lspcontent</B
></DT
><dd class="listitem"><p class="para">Traces contents of the LSP database.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">lspinput</B
></DT
><dd class="listitem"><p class="para">Traces input processing of the LSPs.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">flooding</B
></DT
><dd class="listitem"><p class="para">Traces flooding of the LSPs. &#13;</P
></DD
><dt class="term"><b class="emphasis.bold">buildlsp</B
></DT
><dd class="listitem"><p class="para">Traces creation of the LSPs.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">csnp</B
></DT
><dd class="listitem"><p class="para">Traces processing of the CSNPs.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">psnp</B
></DT
><dd class="listitem"><p class="para">Traces processing of the PSNPs.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">route</B
></DT
><dd class="listitem"><p class="para">Traces route changes.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">update</B
></DT
><dd class="listitem"><p class="para">Traces routing updates.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">paths</B
></DT
><dd class="listitem"><p class="para">Traces paths calculated by the Shortest Path First (SPF) algorithm.&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">spf</B
></DT
><dd class="listitem"><p class="para">Traces the operation of the Shortest Path First (SPF) algorithm. &#13;</P
></DD
><dt class="term"><b class="emphasis.bold">events</B
></DT
><dd class="listitem"><p class="para">Traces protocol events.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">systemid</B
></DT
><dd class="listitem"><p class="para">Defines the IS-IS system ID. If no system identifier is specified,
the system ID portion of the first circuit's NSAP address is used.</P
></DD
><dt class="term"><b class="emphasis.bold">area</B
></DT
><dd class="listitem"><p class="para">Adds area addresses to those configured automatically from the circuits.
IS-IS area addresses are automatically configured based on the real
circuits over which IS-IS runs.</P
></DD
><dt class="term"><b class="emphasis.bold">circuit</B
></DT
><dd class="listitem"><p class="para">Defines the circuits used by IS-IS. Circuits normally are UNIX interfaces,
and <code class="replaceable"><i>string</I
></CODE
> is an interface name. The circuit options are:
<dl class="variablelist"><dt class="term"><code class="replaceable"><i>metric</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the Level 1 and Level 2 metrics for each circuit. <code class="replaceable"><i>metric</I
></CODE
>
is a numeric value in the range 1 to 63. The default value is 63.</P
></DD
><dt class="term"><code class="replaceable"><i>priority</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the value used by IS-IS when electing a designated router.
Routers with high priority values are preferred for the designated
router. <code class="replaceable"><i>priority</I
></CODE
><a class="indexterm" name="AUTOID-22245"></A
>
is a numeric value between 0 and 127. If no
priority is specified, a random value is selected.</P
></DD
></DL
>&#13;</P
></DD
></DL
><p class="para">See <em class="emphasis">A Guide to Gated Integrated IS-IS</EM
>, by Steve Heimlich, for
information on IS-IS configuration. The document is included in the
<b class="emphasis.bold">gated</B
> distribution.<a class="indexterm" name="AUTOID-22250"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.5">B.8.5 The bgp Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-BORDER-GATEWAY-PROTOCOL-BGP-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">bgp yes | no | on | off</B
> [ <b class="emphasis.bold">{<br>        preference</B
> <code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;<br>        defaultmetric</B
> <code class="replaceable"><i>metric</I
></CODE
><b class="emphasis.bold"> ;<br>        traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>        group type external peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
><br>            | <b class="emphasis.bold">internal peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
><br>            | <b class="emphasis.bold">igp peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
> <b class="emphasis.bold">proto</B
> <code class="replaceable"><i>proto</I
></CODE
><br>            | <b class="emphasis.bold">routing peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
> <b class="emphasis.bold">proto</B
> <code class="replaceable"><i>proto </I
></CODE
><b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
><br>            | <b class="emphasis.bold">test peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
><b class="emphasis.bold"> {<br>            allow {</B
><br>                <code class="replaceable"><i>address </I
></CODE
><b class="emphasis.bold">mask</B
> <code class="replaceable"><i>mask | </I
></CODE
><b class="emphasis.bold">masklen</B
> <code class="replaceable"><i>number</I
></CODE
><br>                   <b class="emphasis.bold">all<br>                   host</B
> <code class="replaceable"><i>address</I
></CODE
><b class="emphasis.bold"> } ;<br>            peer</B
> <code class="replaceable"><i>address</I
></CODE
><br>                [<b class="emphasis.bold">metricout</B
> <code class="replaceable"><i>metric</I
></CODE
>]<br>                [<b class="emphasis.bold">localas</B
> <code class="replaceable"><i>as_number</I
></CODE
>]<br>                [<b class="emphasis.bold">nogendefault</B
>]<br>                [<b class="emphasis.bold">gateway</B
> <code class="replaceable"><i>address</I
></CODE
>]<br>                [<b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
>]<br>                [<b class="emphasis.bold">preference2</B
> <code class="replaceable"><i>preference</I
></CODE
>]<br>                [<b class="emphasis.bold">lcladdr</B
> <code class="replaceable"><i>address</I
></CODE
>]<br>                [<b class="emphasis.bold">holdtime</B
> <code class="replaceable"><i>time</I
></CODE
>]<br>                [<b class="emphasis.bold">version</B
> <code class="replaceable"><i>number</I
></CODE
>]<br>                [<b class="emphasis.bold">passive</B
>]<br>                [<b class="emphasis.bold">sendbuffer</B
> <code class="replaceable"><i>number</I
></CODE
>]<br>                [<b class="emphasis.bold">recvbuffer</B
> <code class="replaceable"><i>number</I
></CODE
>]<br>                [<b class="emphasis.bold">indelay</B
> <code class="replaceable"><i>time</I
></CODE
>]<br>                [<b class="emphasis.bold">outdelay</B
> <code class="replaceable"><i>time</I
></CODE
>]<br>                [<b class="emphasis.bold">keep all</B
> | <b class="emphasis.bold">none</B
>]<br>                [<b class="emphasis.bold">analretentive</B
>]<br>                [<b class="emphasis.bold">noauthcheck</B
>]<br>                [<b class="emphasis.bold">noaggregatorid</B
>]<br>                [<b class="emphasis.bold">keepalivesalways</B
>]<br>                [<b class="emphasis.bold">v3asloopokay</B
>]<br>                [<b class="emphasis.bold">nov4asloop</B
>]<br>                [<b class="emphasis.bold">logupdown</B
>]<br>                [<b class="emphasis.bold">ttl</B
> <code class="replaceable"><i>ttl</I
></CODE
>]<br>                [<b class="emphasis.bold">traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
>]<b class="emphasis.bold"> ; } ;<br>}</B
>] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">This statement enables or disables BGP. By default, BGP is disabled.
The default preference is 170. By default, BGP does not advertise a
metric. Unlike the RIP metric, the BGP metric does not play a primary
role in determining the best route. The BGP metric is simply an
arbitrary 16-bit value that can be used as one criterion for choosing a
route. The <b class="emphasis.bold">defaultmetric</B
> statement can be used to define a metric that
BGP will use when advertising routes.</P
><p class="para">Trace options can be specified for all of BGP or for individual BGP
peers. BGP supports most of the standard trace options as well as the
following:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">packets</B
></DT
><dd class="listitem"><p class="para">Traces all BGP packets.

Traces BGP OPEN packets. 

Traces BGP UPDATE packets. 

Traces BGP KEEPALIVE packets. </P
></DD
></DL
><p class="para">BGP peers must be members of a group. The group statement declares the
group, defines which peers are members of the group, and defines the
group &quot;type.&quot;  Multiple group statements may be specified, but each
must have a unique combination of type and autonomous system number.
There are four possible group types:<a class="indexterm" name="AUTOID-22342"></A
></P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">group type external peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
></DT
><dd class="listitem"><p class="para">Specifies that BGP will run as a classic exterior gateway protocol.
The peers listed in this group are members of an external autonomous
system. Full policy checking is applied to all incoming and outgoing
routes.</P
></DD
><dt class="term"><b class="emphasis.bold">group type internal peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
></DT
><dd class="listitem"><p class="para">Specifies that BGP will be used to distribute routes to an internal
group that has no traditional interior gateway protocol. Routes
received from external BGP peers are readvertised to this group with
the received metric.</P
></DD
><dt class="term"><b class="emphasis.bold">group type igp peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
><b class="emphasis.bold"> proto</B
> <code class="replaceable"><i>proto</I
></CODE
></DT
><dd class="listitem"><p class="para">Specifies that BGP will be used to distribute path attributes to an
internal group that runs an interior gateway protocol. BGP advertises
the AS path, path origin, and transitive optional attributes if the path
attributes are provided by the IGP's tag mechanism. <code class="replaceable"><i>proto</I
></CODE
> is the
name of the interior gateway protocol, e.g., <code class="literal">proto ospf</CODE
>.</P
></DD
><dt class="term"><b class="emphasis.bold">group type routing peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
><b class="emphasis.bold"> proto</B
> <code class="replaceable"><i>proto </I
></CODE
><b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
></DT
><dd class="listitem"><p class="para">Specifies that BGP will be used internally to carry external routes,
while an interior gateway protocol is used to carry only internal
routes. Normally the routes learned by BGP from external autonomous
systems are written in the routing table, where they are picked up and
distributed by an interior protocol to the local autonomous sytem. For
this type of group, BGP distributes the external routes itself and the
interior protocol is limited to distributing only those routes that are
interior to the local autonomous system. <code class="replaceable"><i>proto</I
></CODE
> is the name of
the interior protocol.</P
></DD
><dt class="term"><b class="emphasis.bold">group type test peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
></DT
><dd class="listitem"><p class="para">Specifies that the members of this group are test peers. All routing
information exchanged by test peers is discarded.</P
></DD
></DL
><p class="para">A <code class="literal">group</CODE
> clause contains <code class="literal">peer</CODE
> subclauses. Any number of
<code class="literal">peer</CODE
> subclauses<a class="indexterm" name="AUTOID-22388"></A
>
may belong to a group. Peers are specified explicitly with a <b class="emphasis.bold">peer</B
> statement, or implicitly with the <b class="emphasis.bold">allow</B
> statement.</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">allow</B
></DT
><dd class="listitem"><p class="para">Any peer whose address is contained in the specified address range is a
member of the group. The keyword <b class="emphasis.bold">all</B
> matches all possible
addresses. The keyword <b class="emphasis.bold">host</B
> precedes an individual host
address. The address and mask pairs define a range of addresses.
Network masks can be defined with the keyword <b class="emphasis.bold">mask</B
> and an address
mask written in dotted decimal notation or with the keyword
<b class="emphasis.bold">masklen</B
> and the prefix length written as a decimal number. All
parameters for these peers must be defined in the <code class="literal">group</CODE
> clause.</P
></DD
><dt class="term"><b class="emphasis.bold">peer</B
> <code class="replaceable"><i>address</I
></CODE
></DT
><dd class="listitem"><p class="para">The peer identified by <code class="replaceable"><i>address</I
></CODE
> is a member of the group.</P
></DD
></DL
><p class="para">The BGP <code class="literal">peer</CODE
> subclause allows the following parameters, which can also
be specified on the <code class="literal">group</CODE
> clause. If placed on the <code class="literal">group</CODE
>
clause, the parameters affect all peers in the group. The available options
are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">metricout</B
> <code class="replaceable"><i>metric</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the primary metric for routes sent to the peer, which overrides
the default metric, a metric specified on the group and any metric
specified by export policy.</P
></DD
><dt class="term"><b class="emphasis.bold">localas</B
> <code class="replaceable"><i>as_number</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the local system's autonomous system number (asn).<a class="indexterm" name="AUTOID-22428"></A
>
The default is to
use the asn defined in the <b class="emphasis.bold">autonomoussystem</B
> statement.</P
></DD
><dt class="term"><b class="emphasis.bold">nogendefault</B
></DT
><dd class="listitem"><p class="para">Prevents <b class="emphasis.bold">gated</B
> from generating a default route when BGP peers
with this neighbor, even if <b class="emphasis.bold">gendefault</B
> is set in the
<b class="emphasis.bold">options</B
> directive statement.</P
></DD
><dt class="term"><b class="emphasis.bold">gateway</B
> <code class="replaceable"><i>address</I
></CODE
></DT
><dd class="listitem"><p class="para">Identifies the next-hop gateway through which packets for this peer
are routed. Use this only if the neighbor does not share a network with
the local system. This option is rarely needed.</P
></DD
><dt class="term"><b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the preference<a class="indexterm" name="AUTOID-22452"></A
>
used for routes learned from this peer,
which permits <b class="emphasis.bold">gated</B
> to prefer routes from one peer, or group
of peers, over another.</P
></DD
><dt class="term"><b class="emphasis.bold">preference2</B
> <code class="replaceable"><i>preference</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the &quot;second&quot; preference. In the case of a preference tie, the
second preference is used to break the tie. The default value is 0.</P
></DD
><dt class="term"><b class="emphasis.bold">lcladdr</B
> <code class="replaceable"><i>address</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the address of the local interface used to communicate with
this neighbor.</P
></DD
><dt class="term"><b class="emphasis.bold">holdtime</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the number of seconds the peer should wait for a keepalive,<a class="indexterm" name="AUTOID-22473"></A
>
update, or notification message before closing the connection. The
value is sent to the peer in the Hold Time field of the BGP Open
message. The value must be either 0 (no keepalives will be sent) or at
least 3.</P
></DD
><dt class="term"><b class="emphasis.bold">version</B
> <code class="replaceable"><i>version</I
></CODE
></DT
><dd class="listitem"><p class="para">Identifies the version of the BGP protocol to use with this peer. By
default, the version is negotiated when the connection is opened.
Currently supported versions are 2, 3, and 4.</P
></DD
><dt class="term"><b class="emphasis.bold">passive</B
></DT
><dd class="listitem"><p class="para">Specifies that <b class="emphasis.bold">gated</B
> should wait for the peer to issue an OPEN.
By default, <b class="emphasis.bold">gated</B
> periodically sends OPEN messages until the peer
responds.</P
></DD
><dt class="term"><b class="emphasis.bold">sendbuffer</B
> <code class="replaceable"><i>buffer_size</I
></CODE
></DT
><dd class="listitem"><p class="para"></P
></DD
><dt class="term"><b class="emphasis.bold">recvbuffer</B
> <code class="replaceable"><i>buffer_size</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the size of the send and receive buffers. The default is 65535
bytes, which is the maximum. These parameters are not used on normally
functioning systems.</P
></DD
><dt class="term"><b class="emphasis.bold">indelay</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para"></P
></DD
><dt class="term"><b class="emphasis.bold">outdelay</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Implements &quot;route dampening.&quot;<a class="indexterm" name="AUTOID-22512"></A
>
<b class="emphasis.bold">indelay</B
> defines the number of
seconds a route must be stable before it is accepted.
<b class="emphasis.bold">outdelay</B
> is the number of seconds a route must be present in the
<b class="emphasis.bold">gated</B
> routing database before it is exported to this peer. The
default value for each is 0, meaning that these features are disabled.
Use this only if the routing table<a class="indexterm" name="AUTOID-22518"></A
>
is fluctuating so rapidly it is
unstable.</P
></DD
><dt class="term"><b class="emphasis.bold">keep all</B
></DT
><dd class="listitem"><p class="para">Tells system to retain routes learned from this peer even if the routes' AS
paths contain our local AS number. Normally routes that contain the local AS
number are discarded as potential routing loops.</P
></DD
><dt class="term"><b class="emphasis.bold">analretentive</B
></DT
><dd class="listitem"><p class="para">Tells system to issue warning messages for events, such as duplicate routes,
that are normally &quot;silently ignored.&quot;<a class="indexterm" name="AUTOID-22532"></A
></P
></DD
><dt class="term"><b class="emphasis.bold">noauthcheck</B
></DT
><dd class="listitem"><p class="para">Instructs system not to verify that incoming packets have an authentication field of all 1s. Use this to interoperate with an implementation that uses the
authentication field.</P
></DD
><dt class="term"><b class="emphasis.bold">noaggregatorid</B
></DT
><dd class="listitem"><p class="para">Sets the routerid in the aggregator attribute to 0. By default, it
is set to the router identifier. Use this to prevent this router from
creating aggregate routes with AS paths that differ from other routers
in the AS.</P
></DD
><dt class="term"><b class="emphasis.bold">keepalivesalways</B
></DT
><dd class="listitem"><p class="para">Instructs system to send a keepalive even when an update could have correctly substituted
for one. Used for interoperability with some routers.<a class="indexterm" name="AUTOID-22550"></A
></P
></DD
><dt class="term"><b class="emphasis.bold">v3asloopokay</B
></DT
><dd class="listitem"><p class="para">Allows advertisement of a route with a loop in the AS path, i.e., with
an AS appearing more than once in the path, to version 3 external peers.</P
></DD
><dt class="term"><b class="emphasis.bold">nov4asloop</B
></DT
><dd class="listitem"><p class="para">Prevents a route with a loop in the AS path from being advertised to version 4
external peers. Used to avoid passing such routes to a peer
that incorrectly forwards them to version 3 neighbors. </P
></DD
><dt class="term"><b class="emphasis.bold">logupdown</B
></DT
><dd class="listitem"><p class="para">Logs every time a BGP peer enters or leaves the ESTABLISHED state.<a class="indexterm" name="AUTOID-22568"></A
></P
></DD
><dt class="term"><b class="emphasis.bold">ttl</B
> <code class="replaceable"><i>ttl</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the IP ttl<a class="indexterm" name="AUTOID-22576"></A
>
for local neighbors. By default it is set to 1.
Use this option if the local neighbor discards packets sent with a ttl
of 1. Not all UNIX kernels allow the ttl to be specified
for TCP connections.</P
></DD
></DL
><p class="para">The BGP trace options are covered previously.<a class="indexterm" name="AUTOID-22579"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.6">B.8.6 The egp Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-EXTERIOR-GATEWAY-PROTOCOL-EGP-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">egp yes | no | on | off</B
> [ <b class="emphasis.bold">{<br>       preference</B
> <code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;<br>       defaultmetric</B
> <code class="replaceable"><i>metric</I
></CODE
><b class="emphasis.bold"> ;<br>       packetsize</B
> <code class="replaceable"><i>maxpacketsize</I
></CODE
><b class="emphasis.bold"> ;<br>       traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>       group</B
> [<b class="emphasis.bold">peeras</B
> <code class="replaceable"><i>as_number</I
></CODE
>] [<b class="emphasis.bold">localas</B
> <code class="replaceable"><i>as_number</I
></CODE
>] [<b class="emphasis.bold">maxup</B
> <code class="replaceable"><i>number</I
></CODE
>] <b class="emphasis.bold">{<br>         neighbor</B
> <code class="replaceable"><i>address</I
></CODE
><br>           [<b class="emphasis.bold">metricout</B
> <code class="replaceable"><i>metric</I
></CODE
>]<br>           [<b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
>]<br>           [<b class="emphasis.bold">preference2</B
> <code class="replaceable"><i>preference</I
></CODE
>]<br>           [<b class="emphasis.bold">ttl</B
> <code class="replaceable"><i>ttl</I
></CODE
>]<br>           [<b class="emphasis.bold">nogendefault</B
>]<br>           [<b class="emphasis.bold">importdefault</B
>]<br>           [<b class="emphasis.bold">exportdefault</B
>]<br>           [<b class="emphasis.bold">gateway</B
> <code class="replaceable"><i>address</I
></CODE
>]<br>           [<b class="emphasis.bold">lcladdr</B
> <code class="replaceable"><i>address</I
></CODE
>]<br>           [<b class="emphasis.bold">sourcenet</B
> <code class="replaceable"><i>network</I
></CODE
>]<br>           [<b class="emphasis.bold">minhello </B
>| <b class="emphasis.bold">p1</B
>  <code class="replaceable"><i>interval</I
></CODE
>]<br>           [<b class="emphasis.bold">minpoll </B
>| <b class="emphasis.bold">p2</B
>  <code class="replaceable"><i>interval</I
></CODE
>]<br>           [<b class="emphasis.bold">traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
>] <b class="emphasis.bold">;</B
> <b class="emphasis.bold">} ;</B
><br><b class="emphasis.bold">}</B
>] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">This statement enables or disables EGP. By default, EGP is disabled.
The default metric for announcing routes via EGP is 255, and the
default preference for routes learned from EGP is 200.</P
><p class="para">The <b class="emphasis.bold">packetsize</B
> argument defines the size of the largest EGP
packet that will be sent or accepted. <code class="replaceable"><i>maxpacketsize</I
></CODE
><a class="indexterm" name="AUTOID-22638"></A
>
is the size
in bytes. The default is 8192 bytes. If <b class="emphasis.bold">gated</B
> receives a packet
larger than <code class="replaceable"><i>maxpacketsize</I
></CODE
> it is discarded, but <code class="replaceable"><i>maxpacketsize</I
></CODE
>
is increased to the size of the larger packet so that future packets
won't have to be discarded.</P
><p class="para">The <b class="emphasis.bold">traceoptions</B
> statement<a class="indexterm" name="AUTOID-22645"></A
>
defines the tracing for EGP. Tracing can be
specified for the EGP protocol or for an individual EGP neighbor. The
EGP trace options are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">packets</B
></DT
><dd class="listitem"><p class="para">Traces all EGP packets.</P
></DD
><dt class="term"><b class="emphasis.bold">hello</B
></DT
><dd class="listitem"><p class="para">Traces EGP HELLO/I-HEARD-U packets. </P
></DD
><dt class="term"><b class="emphasis.bold">acquire</B
></DT
><dd class="listitem"><p class="para">Traces EGP ACQUIRE/CEASE packets. </P
></DD
><dt class="term"><b class="emphasis.bold">update</B
></DT
><dd class="listitem"><p class="para">Traces EGP POLL/UPDATE packets. </P
></DD
></DL
><p class="para">The <b class="emphasis.bold">egp</B
> statement has two clauses: the <code class="literal">group</CODE
> clause and the
<code class="literal">neighbor</CODE
> clause. EGP neighbors must be part of a group, and all of the
neighbors in a group must be members of the same autonomous system. Use the
<code class="literal">group</CODE
> clause<a class="indexterm" name="AUTOID-22674"></A
>
to define parameters for a group of EGP neighbors. Values set in
a <code class="literal">group</CODE
> clause apply to all neighbor clauses in the group. There can
be multiple <code class="literal">group</CODE
> clauses. The following parameters are set by the
<code class="literal">group</CODE
> clause:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">peeras</B
></DT
><dd class="listitem"><p class="para">Identifies the autonomous system number of the autonomous system to
which the members of the group belong. If not specified, this number is
learned from the neighbors.</P
></DD
><dt class="term"><b class="emphasis.bold">localas</B
></DT
><dd class="listitem"><p class="para">Defines the local system's autonomous system number. The default is to
use the asn defined in the <b class="emphasis.bold">autonomoussystem</B
> statement.</P
></DD
><dt class="term"><b class="emphasis.bold">maxup</B
></DT
><dd class="listitem"><p class="para">Defines the number of EGP neighbors <b class="emphasis.bold">gated</B
> is to acquire. The
default is to acquire all listed neighbors.</P
></DD
></DL
><p class="para">The <code class="literal">neighbor</CODE
> clause defines one EGP neighbor.<a class="indexterm" name="AUTOID-22699"></A
>
The only part of the
clause that is required is the <b class="emphasis.bold">address</B
> argument, which is the host
name or IP address of the neighbor. All other parameters are optional.
All of these optional parameters can also be specified in the <code class="literal">group</CODE
>
clause if you want to apply the parameter to all neighbors.
The <code class="literal">neighbor</CODE
> clause parameters are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">metricout</B
> <code class="replaceable"><i>metric</I
></CODE
></DT
><dd class="listitem"><p class="para">Used for all routes sent to this neighbor. This value
overrides the <b class="emphasis.bold">defaultmetric</B
> value set in the <b class="emphasis.bold">egp</B
> statement, but
only for this specific neighbor.</P
></DD
><dt class="term"><b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the preference used for routes learned from this neighbor,
which permits <b class="emphasis.bold">gated</B
> to prefer routes from one neighbor, or group
of neighbors, over another.</P
></DD
><dt class="term"><b class="emphasis.bold">preference2</B
> <code class="replaceable"><i>preferenc</I
></CODE
>e</DT
><dd class="listitem"><p class="para">Defines the &quot;second&quot; preference. In the case of a preference tie, the
second preference is used to break the tie. The default value is 0.</P
></DD
><dt class="term"><b class="emphasis.bold">ttl</B
> <code class="replaceable"><i>ttl</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the IP ttl for local neighbors. By default, it is set to 1.
Use this option if the local neighbor discards packets sent with a ttl of 1.</P
></DD
><dt class="term"><b class="emphasis.bold">nogendefault</B
></DT
><dd class="listitem"><p class="para">Prevents <b class="emphasis.bold">gated</B
> from generating a default route when EGP peers
with this neighbor, even if <b class="emphasis.bold">gendefault</B
> is set in the
<b class="emphasis.bold">options</B
> directive statement.</P
></DD
><dt class="term"><b class="emphasis.bold">importdefault</B
></DT
><dd class="listitem"><p class="para">Tells system to accept the default route if it is included in this neighbor's
EGP update. By default, it is ignored.</P
></DD
><dt class="term"><b class="emphasis.bold">exportdefault</B
></DT
><dd class="listitem"><p class="para">Tells system to send the default route in EGP updates to this EGP neighbor.
Normally a default route is not included in an EGP update.</P
></DD
><dt class="term"><b class="emphasis.bold">gateway</B
> <code class="replaceable"><i>address</I
></CODE
></DT
><dd class="listitem"><p class="para">Identifies the next-hop gateway through which packets for this neighbor
are routed. Use this only if the neighbor does not share a network with
the local system. This option is rarely needed.</P
></DD
><dt class="term"><b class="emphasis.bold">lcladdr</B
> <code class="replaceable"><i>address</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the address of the local interface used to communicate with the
neighbor.</P
></DD
><dt class="term"><b class="emphasis.bold">sourcenet</B
> <code class="replaceable"><i>network</I
></CODE
></DT
><dd class="listitem"><p class="para">Changes the network queried in EGP POLL packets. By default, this is the
shared network. However, if the neighbor does not share a network with
your system, the neighbor's network address should be specified here.
This parameter is normally not needed. Do not use it if you share a
network with the EGP neighbor.</P
></DD
><dt class="term"><b class="emphasis.bold">minhello </B
>| <b class="emphasis.bold">p1</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Sets the interval between the transmission of EGP HELLO packets.
[1]
The default Hello interval is 30 seconds. If the neighbor fails to respond
to three HELLO packets, the system stops trying to acquire the
neighbor. Setting a larger interval gives the neighbor a better chance
to respond. The interval can be defined as seconds, minutes:seconds, or
hours:minutes:seconds. For example, a 3-minute interval could be
specified as 180 (seconds), 3:00 (minutes), or 0:3:00 (no hours and 3
minutes). The keyword <b class="emphasis.bold">p1</B
> can be used instead of the keyword
<b class="emphasis.bold">minhello</B
>.</P
><blockquote class="footnote"><p class="para">[1] Don't confuse this with the Hello protocol. Refer to the discussion of
HELLO and I-H-U packets in <a class="xref" href="ch07_01.htm" title="Configuring Routing ">Chapter 7</A
>.</P
></BLOCKQUOTE
></DD
><dt class="term"><b class="emphasis.bold">minpoll </B
>| <b class="emphasis.bold">p2</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Sets the time interval between sending polls to the neighbor. The
default is 120 seconds. If three polls are sent without a response, the
neighbor is declared &quot;down&quot; and all routes learned from that neighbor
are removed from the routing table. This can cause the routing table to
be very unstable if a neighbor becomes congested and can't respond to
rapid polls. A longer polling interval provides a more stable, but less
responsive, routing table. Again the interval is defined as seconds,
minutes:seconds, or hours:minutes:seconds.<a class="indexterm" name="AUTOID-22788"></A
></P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.7">B.8.7 The snmp Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-SIMPLE-NETWORK-MANAGEMENT-PROTOCOL-SNMP-STATEMENT-IN-GATED"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">snmp yes | no | on | off [ {<br>    port</B
> <code class="replaceable"><i>port</I
></CODE
><b class="emphasis.bold"> ;<br>    debug ;<br>    traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>} ] ;</B
></P
></BLOCKQUOTE
><p class="para">This command controls whether <b class="emphasis.bold">gated</B
> informs the SNMP
management software of its status. SNMP is not a routing protocol and
is not started by this command. You must run SNMP software
independently. This statement only controls whether <b class="emphasis.bold">gated</B
> keeps
the management software apprised of its status. The default is on, so <b class="emphasis.bold">gated</B
> does inform SNMP of its status.</P
><p class="para">The snmp statement supports three options:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">port</B
> <code class="replaceable"><i>port</I
></CODE
></DT
><dd class="listitem"><p class="para">This option changes the SNMP port used by <b class="emphasis.bold">gated</B
>. By default, the
SNMP daemon listens to port 199.</P
></DD
><dt class="term"><b class="emphasis.bold">debug</B
></DT
><dd class="listitem"><p class="para">Enables debugging of <b class="emphasis.bold">gated</B
>'s SNMP code. By default, it is disabled.
This option is used by code developers.</P
></DD
><dt class="term"><b class="emphasis.bold">traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
></DT
><dd class="listitem"><p class="para">Traces the interactions between <b class="emphasis.bold">gated</B
> and the SNMP daemon. The
<b class="emphasis.bold">detail</B
>, <b class="emphasis.bold">send</B
>, and <b class="emphasis.bold">recv</B
> options are not supported.
Instead, the <b class="emphasis.bold">snmp</B
> statement uses these options:

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">receive</B
></DT
><dd class="listitem"><p class="para">Traces all requests received from the SNMP daemon. </P
></DD
><dt class="term"><b class="emphasis.bold">register</B
></DT
><dd class="listitem"><p class="para">Traces SNMP requests to register variables. </P
></DD
><dt class="term"><b class="emphasis.bold">resolve</B
></DT
><dd class="listitem"><p class="para">Traces SNMP requests to resolve variable names. </P
></DD
><dt class="term"><b class="emphasis.bold">trap</B
></DT
><dd class="listitem"><p class="para">Traces SNMP trap requests. <a class="indexterm" name="AUTOID-22852"></A
></P
></DD
></DL
>&#13;</P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.8">B.8.8 The redirect Statement</A
></H3
><blockquote class="literallayout"><p class="literallayout"><a class="indexterm" name="TCP2-AP-2-IX-REDIRECT-STATEMENT-IN-GATED"></A
><b class="emphasis.bold">redirect yes | no | on | off</B
> [ <b class="emphasis.bold">{<br>    preference</B
> <code class="replaceable"><i>preference</I
></CODE
><b class="emphasis.bold"> ;<br>    interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
> [<b class="emphasis.bold">noredirects </B
>| <b class="emphasis.bold">redirects</B
>]<b class="emphasis.bold"> ;<br>    trustedgateways</B
> <code class="replaceable"><i>gateway_list</I
></CODE
><b class="emphasis.bold"> ;<br>    traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;<br>}</B
> ] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">This statement controls whether ICMP redirects are allowed to modify
the kernel routing table. It does not prevent a system from sending
redirects, only from listening to them. If <b class="emphasis.bold">no</B
> or <b class="emphasis.bold">off</B
> is
specified, <b class="emphasis.bold">gated</B
> attempts to remove the effects of ICMP redirects
from the kernel routing table whenever the redirects are detected.
Remember that ICMP is part of IP; therefore, the redirects may be
installed in the kernel table before they are seen by <b class="emphasis.bold">gated</B
>. If
you disable redirects, <b class="emphasis.bold">gated</B
> actively removes the redirected
routes from the routing table. By default, ICMP redirects are enabled
on hosts that quietly listen to interior routing protocols and disabled
on gateways that actively participate in interior routing protocols.</P
><p class="para">The default preference of a route learned from a redirect is 30, which
can be changed with the <b class="emphasis.bold">preference</B
> option. The <b class="emphasis.bold">interface</B
>
statement controls how redirects are handled on an
interface-by-interface basis. Redirects are ignored if
<b class="emphasis.bold">noredirects</B
> is specified and are permitted if <b class="emphasis.bold">redirects</B
>,
which is the default, is specified. The <b class="emphasis.bold">trustedgateways</B
> statement
enables redirects on a gateway-by-gateway basis. By default, redirects
are accepted from all routers on the local network. If the
<b class="emphasis.bold">trustedgateways</B
> statement is used, only redirects received from a
gateway listed in the <code class="replaceable"><i>gateway_list</I
></CODE
> are accepted. The
gateway_list is simply a list of hostnames or addresses. The
<code class="replaceable"><i>trace_options</I
></CODE
> defined on the <b class="emphasis.bold">traceoptions</B
> statement are the
standard <b class="emphasis.bold">gated</B
> trace options.<a class="indexterm" name="AUTOID-22888"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.9">B.8.9 The icmp Statement</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-22892"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">icmp {<br>    traceoptions</B
> <code class="replaceable"><i>trace_options </I
></CODE
><b class="emphasis.bold">;<br>}</B
></P
></BLOCKQUOTE
><p class="para">On some systems, <b class="emphasis.bold">gated</B
> listens to all ICMP messages but only
processes the ICMP redirect packets. That processing is controlled by
the redirect statement. In the future, more functionality may be
added. At present the <b class="emphasis.bold">icmp</B
> statement is used only to enable
tracing of ICMP messages.<a class="indexterm" name="AUTOID-22902"></A
>
The tracing options supported by the
<b class="emphasis.bold">icmp</B
> statement are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">packets</B
></DT
><dd class="listitem"><p class="para">Traces all ICMP packets. </P
></DD
><dt class="term"><b class="emphasis.bold">redirect</B
></DT
><dd class="listitem"><p class="para">Traces ICMP REDIRECT packets. </P
></DD
><dt class="term"><b class="emphasis.bold">routerdiscovery</B
></DT
><dd class="listitem"><p class="para">Traces ICMP ROUTER DISCOVERY packets. </P
></DD
><dt class="term"><b class="emphasis.bold">info</B
></DT
><dd class="listitem"><p class="para">Traces ICMP informational packets. </P
></DD
><dt class="term"><b class="emphasis.bold">error</B
></DT
><dd class="listitem"><p class="para">Traces ICMP error packets. </P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.10">B.8.10 The routerdiscovery Statement</A
></H3
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-ROUTERDISCOVERY-STATEMENT-IN-GATED"></A
>The Router Discovery Protocol informs hosts of the routers that are
available on the network. It provides an alternative to static routes,
routing protocols, and ICMP redirects for hosts that simply need to know
the address of their default router. The Router Discovery Protocol is
implemented as a server running on the router and a client running on
the host. Both the server (router) software and the client (host)
software are provided by <b class="emphasis.bold">gated</B
>.</P
><p class="para">First let's look at the server configuration statement:<a class="indexterm" name="AUTOID-22939"></A
></P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">routerdiscovery server yes | no | on | off</B
> [ <b class="emphasis.bold">{<br>    traceoptions</B
> <code class="replaceable"><i>trace_options </I
></CODE
><b class="emphasis.bold">;<br>    interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
><br>        [<b class="emphasis.bold">minadvinterval</B
> <code class="replaceable"><i>time</I
></CODE
>]<br>        [<b class="emphasis.bold">maxadvinterval</B
> <code class="replaceable"><i>time</I
></CODE
>]<br>        [<b class="emphasis.bold">lifetime</B
> <code class="replaceable"><i>time</I
></CODE
>] <b class="emphasis.bold">;<br>    address</B
> <code class="replaceable"><i>interface_list</I
></CODE
><br>        [<b class="emphasis.bold">advertise</B
> | <b class="emphasis.bold">ignore</B
>]<br>        [<b class="emphasis.bold">broadcast</B
> | <b class="emphasis.bold">multicast</B
>]<br>        [<b class="emphasis.bold">ineligible</B
> | <b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
>]<b class="emphasis.bold"> ;<br>} </B
>] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">routerdiscovery</B
> statement for both the client and server support
tracing. The <b class="emphasis.bold">state</B
> trace flag can be used to trace finite state
machine transitions.<a class="indexterm" name="AUTOID-22968"></A
>
Router discovery packet tracing, however, is not
done here. It is enabled via the ICMP statement.</P
><p class="para">The <code class="literal">interface</CODE
> clause defines the physical interfaces and the parameters
that apply to them. Only physical interfaces can be defined in the
interface clause. Addresses are specified in the address clauses
shown below. The interface parameters are: </P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">maxadvinterval</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the maximum time interval between sending router
advertisements. It must be more than 4 seconds and less than 30:00
minutes. The default is 10:00 minutes (600 seconds).</P
></DD
><dt class="term"><b class="emphasis.bold">minadvinterval</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the minimum time interval between sending router
advertisements. It must be no less than 3 seconds and no greater than
<b class="emphasis.bold">maxadvinterval</B
>. The default is 0.75 &#215; maxadvinterval.</P
></DD
><dt class="term"><b class="emphasis.bold">lifetime</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines how long clients should consider the addresses in a router
advertisement valid. It must be greater than <b class="emphasis.bold">maxadvinterval</B
> and
no more than 2:30:00 (two hours, thirty minutes). The default is 3 &#215;
maxadvinterval.</P
></DD
></DL
><p class="para">The address clause defines the IP addresses used and the parameters that
apply to them. The address clause parameters are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">advertise </B
>| <b class="emphasis.bold">ignore</B
></DT
><dd class="listitem"><p class="para"><b class="emphasis.bold">advertise</B
> specifies that the address should be included in router
advertisements, which is the default. <b class="emphasis.bold">ignore</B
> specifies that the
address should not be included in router advertisements.</P
></DD
><dt class="term"><b class="emphasis.bold">broadcast </B
>| <b class="emphasis.bold">multicast</B
></DT
><dd class="listitem"><p class="para"><b class="emphasis.bold">broadcast </B
> specifies that the address should be included in a
broadcast router advertisement because some systems on the network do
not support multicasting. This is the default if the router does not
support multicasting.</P
><p class="para"><b class="emphasis.bold">multicast</B
> specifies that the address should only be included
in a multicast router advertisement. If the system does not support
multicasting, the address is not advertised.</P
></DD
><dt class="term"><b class="emphasis.bold">ineligible</B
> | <b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the preference of the address as a default
router. <code class="replaceable"><i>preference</I
></CODE
> is a  32-bit signed integer. The higher
values mean the address is more preferable. Note that this is not
<b class="emphasis.bold">gated</B
> preference. This is a value transmitted as part of the
Router Discovery Protocol.</P
><p class="para">The keyword <b class="emphasis.bold">ineligible</B
> assigns a preference of hex 80000000 that
means the address is not eligible to be the default router. Hosts use
ineligible addresses to verify ICMP redirects.</P
></DD
></DL
><p class="para">For <b class="emphasis.bold">routerdiscovery</B
> to work, the hosts must have the <b class="emphasis.bold">routerdiscovery</B
> client software. It is part of <b class="emphasis.bold">gated</B
> and is configured by the
<b class="emphasis.bold">routerdiscovery</B
> client statement.<a class="indexterm" name="AUTOID-23029"></A
></P
><div class="sect3"><h4 class="sect3"><a class="title" name="TCP2-AP-2-SECT-8.10.1">B.8.10.1 The routerdiscovery client statement</A
></H4
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">routerdiscovery client yes | no | on | off</B
> [ <b class="emphasis.bold">{<br>    traceoptions</B
> <code class="replaceable"><i>trace_options </I
></CODE
><b class="emphasis.bold">;<br>    preference</B
> <code class="replaceable"><i>preference </I
></CODE
><b class="emphasis.bold">;<br>    interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
><br>        [<b class="emphasis.bold">enable </B
>| <b class="emphasis.bold">disable</B
>]<br>        [<b class="emphasis.bold">broadcast </B
>| <b class="emphasis.bold">multicast</B
>]<br>        [<b class="emphasis.bold">quiet </B
>| <b class="emphasis.bold">solicit</B
>]<b class="emphasis.bold"> ;<br>} </B
>] <b class="emphasis.bold">;</B
></P
></BLOCKQUOTE
><p class="para">The client uses the same trace options as the server. Other options
are different, however. The full list of client options is:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
> ;</DT
><dd class="listitem"><p class="para">Defines the preference of default routes learned from <b class="emphasis.bold">routerdiscovery</B
>.
The default is 55. Unlike the server statement, this is
<b class="emphasis.bold">gated</B
> preference.</P
></DD
><dt class="term"><b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the interfaces used by <b class="emphasis.bold">routerdiscovery</B
>.</P
></DD
><dt class="term"><b class="emphasis.bold">enable</B
> | <b class="emphasis.bold">disable</B
></DT
><dd class="listitem"><p class="para">Enables or disables <b class="emphasis.bold">routerdiscovery</B
> on the
interface. <b class="emphasis.bold">enable</B
> is the default. </P
></DD
><dt class="term"><b class="emphasis.bold">broadcast</B
> | <b class="emphasis.bold">multicast</B
></DT
><dd class="listitem"><p class="para">Specifies whether router solicitations should be broadcast or multicast
on the interface. By default, router solicitations are multicast if
it is supported; otherwise, router solicitations are broadcast. If the
<b class="emphasis.bold">multicast</B
> keyword is specified and multicast is not available,
the router solicitations are not sent. Generally, if these options are
not specified, <b class="emphasis.bold">gated</B
> will do the right thing.</P
></DD
><dt class="term"><b class="emphasis.bold">quiet</B
> | <b class="emphasis.bold">solicit</B
></DT
><dd class="listitem"><p class="para">Specifies whether router solicitations are sent on this interface.
<b class="emphasis.bold">solicit</B
>, which is the default, sends router solicitations.
<b class="emphasis.bold">quiet</B
> listens to Router Advertisements but does not send router
solicitations.<a class="indexterm" name="AUTOID-23090"></A
><a class="indexterm" name="TCP2-AP-2-IX-KERNEL-STATEMENT-IN-GATED"></A
></P
></DD
></DL
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-AP-2-SECT-8.11">B.8.11 The kernel Statement</A
></H3
><p class="para"><b class="emphasis.bold">kernel {
    options</B
>
        [<b class="emphasis.bold">nochange</B
>]
        [<b class="emphasis.bold">noflushatexit</B
>]
        [<b class="emphasis.bold">remnantholdtime</B
> <code class="replaceable"><i>time</I
></CODE
>]<b class="emphasis.bold"> ;
    routes</B
> <code class="replaceable"><i>number</I
></CODE
><b class="emphasis.bold"> ;
    flash</B
>
        [<b class="emphasis.bold">limit</B
> <code class="replaceable"><i>number</I
></CODE
>]
        [<b class="emphasis.bold">type interface </B
>|<b class="emphasis.bold"> interior </B
>| <b class="emphasis.bold">all</B
>]<b class="emphasis.bold"> ;
    background</B
>
        [<b class="emphasis.bold">limit</B
> <code class="replaceable"><i>number</I
></CODE
>]
        [<b class="emphasis.bold">priority flash </B
>| <b class="emphasis.bold">higher </B
>| <b class="emphasis.bold">lower</B
>]<b class="emphasis.bold"> ;
    traceoptions</B
> <code class="replaceable"><i>trace_options</I
></CODE
><b class="emphasis.bold"> ;
} ;</B
></P
><p class="para">The <b class="emphasis.bold">kernel</B
> statement defines the interactions between <b class="emphasis.bold">gated</B
> and
the kernel.</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">options</B
></DT
><dd class="listitem"><p class="para">Defines three possible configuration options. These are:

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">nochange</B
></DT
><dd class="listitem"><p class="para">Limits <b class="emphasis.bold">gated</B
> to deletes and adds. Use on early versions of the
routing socket code that have a malfunctioning change operation.</P
></DD
><dt class="term"><b class="emphasis.bold">noflushatexit</B
></DT
><dd class="listitem"><p class="para">Prevents route deletions at shutdown. Normally shutdown processing deletes
routes that do not have a &quot;retain&quot; indication. Use to speed startup on
systems with thousands of routes.</P
></DD
><dt class="term"><b class="emphasis.bold">remnantholddimte</B
> <code class="replaceable"><i>time</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the length of time routes read from the kernel forwarding table
at startup are retained. The default is 3 minutes or as soon as
they are overridden. <code class="replaceable"><i>time</I
></CODE
> can be a value between 0 and 15
minutes. A 0 value causes the routes to be deleted immediately.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">routes</B
> <code class="replaceable"><i>number</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines the maximum number of routes <b class="emphasis.bold">gated</B
> will install in the
kernel. By default there is no limit to the number of routes in the
kernel forwarding table. </P
></DD
><dt class="term"><b class="emphasis.bold">flash</B
></DT
><dd class="listitem"><p class="para">Tunes the parameters used for flash updates. When routes change,
the process of notifying the kernel is called a &quot;flash update.&quot;
<dl class="variablelist"><dt class="term"><b class="emphasis.bold">limit</B
> <code class="replaceable"><i>number</I
></CODE
></DT
><dd class="listitem"><p class="para">Sets the maximum number of routes processed during one flash update. The
default is 20. A value of -1 causes all route changes to be processed.
Large updates can slow the processing of &quot;time critical&quot; protocols.
20 is a good default.</P
></DD
><dt class="term"><b class="emphasis.bold">type interface </B
>| <b class="emphasis.bold">interior </B
>| <b class="emphasis.bold">all</B
></DT
><dd class="listitem"><p class="para">Specifies the type of routes processed during a flash update. By default,
only interface routes are installed during a flash update. <b class="emphasis.bold">interior</B
>
specifies that interior routes are also installed, and <b class="emphasis.bold">all</B
>
specifies that interior and exterior routes should be processed.
Specifying <code class="literal">flash limit -1 all</CODE
> causes all routes to be installed
during the flash update, which mimics the behavior of previous versions
of <b class="emphasis.bold">gated</B
>.</P
></DD
></DL
>&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">background</B
></DT
><dd class="listitem"><p class="para">Tunes the parameters used for background processing. Since only
interface routes are normally installed during a flash update, most
routes are processed in batches in the background.

<dl class="variablelist"><dt class="term"><b class="emphasis.bold">limit</B
> <code class="replaceable"><i>number</I
></CODE
></DT
><dd class="listitem"><p class="para">Sets the number of routes processed in one batch. The default is 120.</P
></DD
><dt class="term"><b class="emphasis.bold">priority flash </B
>| <b class="emphasis.bold">higher </B
>| <b class="emphasis.bold">lower</B
></DT
><dd class="listitem"><p class="para">Sets the priority for processing batch updates. The default is
<b class="emphasis.bold">lower</B
>, which means that batch updates are processed at a lower
priority than flash updates. To process kernel updates at the same
priority as flash updates, specify flash.</P
></DD
></DL
>&#13;</P
></DD
></DL
><p class="para">Many tracing options work for the kernel interface because, in many
cases, it is handled as a routing protocol. The command-line trace,
<b class="emphasis.bold">symbols</B
> and <b class="emphasis.bold">iflist</B
>, provide information about the kernel.
The kernel statement trace options are:</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">remnants</B
></DT
><dd class="listitem"><p class="para">Traces routes read from the kernel when <b class="emphasis.bold">gated</B
> starts. </P
></DD
><dt class="term"><b class="emphasis.bold">request</B
></DT
><dd class="listitem"><p class="para">Traces <b class="emphasis.bold">gated</B
> kernel Add/Delete/Change operations. </P
></DD
></DL
><p class="para">The remaining trace options only apply to systems that
use the routing socket to exchange routing information with the kernel.</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">info</B
></DT
><dd class="listitem"><p class="para">Traces informational messages received from the routing socket.</P
></DD
><dt class="term"><b class="emphasis.bold">routes</B
></DT
><dd class="listitem"><p class="para">Traces routes exchanged with the kernel. </P
></DD
><dt class="term"><b class="emphasis.bold">redirect</B
></DT
><dd class="listitem"><p class="para">Traces redirect messages received from the kernel. </P
></DD
><dt class="term"><b class="emphasis.bold">interface</B
></DT
><dd class="listitem"><p class="para">Traces interface status messages received from the kernel.</P
></DD
><dt class="term"><b class="emphasis.bold">other</B
></DT
><dd class="listitem"><p class="para">Traces any other messages received from the kernel. <a class="indexterm" name="AUTOID-23240"></A
><a class="indexterm" name="AUTOID-23241"></A
></P
></DD
></DL
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appb_07.htm" title="B.7 Definition Statements"><img src="../gifs/txtpreva.gif" alt="Previous: B.7 Definition Statements" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appb_09.htm" title="B.9 static Statements"><img src="../gifs/txtnexta.gif" alt="Next: B.9 static Statements" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">B.7 Definition Statements</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">B.9 static Statements</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
