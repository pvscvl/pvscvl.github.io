<html><head>
<title>[Chapter 13] 13.3 Finding Files </TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:42:16Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch13_01.htm" title="13. Internet Information Resources "><link rel="prev" href="ch13_02.htm#TCP2-CH-13-SECT-2.1" title="13.2 Anonymous FTP "><link rel="next" href="ch13_04.htm" title="13.4 Retrieving RFCs "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch13_02.htm#TCP2-CH-13-SECT-2.1" title="13.2 Anonymous FTP "><img src="../gifs/txtpreva.gif" alt="Previous: 13.2 Anonymous FTP " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 13<br>Internet Information Resources </FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch13_04.htm" title="13.4 Retrieving RFCs "><img src="../gifs/txtnexta.gif" alt="Next: 13.4 Retrieving RFCs " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="TCP2-CH-13-SECT-3">13.3 Finding Files </A
></H2
><p class="para"><a class="indexterm" name="TCP2-CH-13-IX-FILE-FINDING"></A
>Anonymous FTP requires detailed knowledge from the user. To
retrieve a file, you must know the FTP server and the directory
where the file is located. When the network was small, this was not a
major problem. There were a limited number of important FTP
servers, and they were well stocked with files. You could always
<b class="emphasis.bold">ftp</B
> to a major server and search through some directories using
<b class="emphasis.bold">ftp</B
>'s <b class="emphasis.bold">ls</B
> command. This old approach is not compatible with
a large and expanding Internet for two reasons:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">There are now thousands of major anonymous FTP servers. Knowing
them all is difficult.</P
></LI
><li class="listitem"><p class="para">There are now millions of Internet users. They cannot all rely on a
few well-known servers. The servers would quickly be overwhelmed with
<b class="emphasis.bold">ftp</B
> requests.</P
></LI
></UL
><p class="para"><b class="emphasis.bold">archie</B
> is an application designed to help with this problem. It
provides a database of information about anonymous FTP sites and
the files they contain.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-13-SECT-3.1">13.3.1 archie </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-13-IX-ARCHIE"></A
><b class="emphasis.bold">archie</B
> expands the usefulness of anonymous FTP by helping
you locate the file, program, or other information that you need.
<b class="emphasis.bold">archie</B
> uses information servers that maintain databases
containing information about hundreds of FTP servers, and
thousands of files and programs throughout the Internet.</P
><p class="para"><b class="emphasis.bold">archie</B
>'s primary database is a listing of files and the
servers from which the files can be retrieved. In the simplest
sense, you tell <b class="emphasis.bold">archie</B
> which file you're looking for, and
<b class="emphasis.bold">archie</B
> tells you which FTP servers the file is available
from.</P
><p class="para"><b class="emphasis.bold">archie</B
> can be used in four different ways: interactively, through
electronic mail, via a Web browser, or from an <b class="emphasis.bold">archie</B
> client.<a class="indexterm" name="AUTOID-18874"></A
>
To use <b class="emphasis.bold">archie</B
> interactively, <b class="emphasis.bold">telnet</B
> to one of the
<b class="emphasis.bold">archie</B
> servers.<a class="indexterm" name="AUTOID-18879"></A
>
[3]
Log in using the username <em class="emphasis">archie</EM
> and no password. At the
<code class="literal">archie&gt;</CODE
> prompt, type <b class="emphasis.bold">help</B
> to get a full set of interactive
<b class="emphasis.bold">archie</B
> commands.</P
><blockquote class="footnote"><p class="para">[3] The list of publicly accessible servers is available at
<a class="systemitem.sitename" href="../../../../../../../www.bunyip.com/products/archie/world/servers.html">http://www.bunyip.com/products/archie/world/servers.html</A
>.</P
></BLOCKQUOTE
><p class="para">There are many interactive <b class="emphasis.bold">archie</B
> commands, but the basic
function of locating a program that is accessible via anonymous FTP can
be reduced to two commands.</P
><dl class="variablelist"><dt class="term"><b class="emphasis.bold">prog</B
> <code class="replaceable"><i>pattern</I
></CODE
></DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-18898"></A
>Display all files in the database with names that match the specified
<code class="replaceable"><i>pattern</I
></CODE
>.</P
></DD
><dt class="term"><b class="emphasis.bold">mail</B
> <code class="replaceable"><i>address</I
></CODE
></DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-18907"></A
>Mail the output of the last command to <code class="replaceable"><i>address</I
></CODE
>, which
is normally your own email address.</P
></DD
></DL
><p class="para">The following example uses both of these commands to interactively
search for <em class="emphasis">gated-R3_5_5.tar</EM
>, and then mail the results of the
search to <em class="emphasis">craig@peanut.nuts.com</EM
>.</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>telnet archie.internic.net</B
></CODE
>
Trying 198.49.45.10...
Connected to archie.ds.internic.net.
Escape character is ']'.
UNIX(r) System V Release 4.0 (ds0)

login: <code class="userinput"><b>archie</B
></CODE
>
 
# Bunyip Information Systems, Inc., 1993, 1994, 1995
 
archie&gt; <code class="userinput"><b>prog gated-R3_5_5.tar</B
></CODE
>
# Search type: sub.
# Your queue position: 1
# Estimated time for completion: 5 seconds.
working... O

Host ftp.zcu.cz    (147.228.206.16)
Last updated 11:32 27 Jun 1997

 Location: /pub/security/merit/gated
  FILE -r--r--r-- 1460773 bytes Jan 1997 gated-R3_5_5.tar.gz

archie&gt; <code class="userinput"><b>mail craig@peanut.nuts.com</B
></CODE
>
archie&gt; <code class="userinput"><b>quit</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <b class="emphasis.bold">archie</B
> output provides all of the information you need to
initiate an anonymous FTP transfer:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">The name of the server (<em class="emphasis">ftp.zcu.cz</EM
> in our example)</P
></LI
><li class="listitem"><p class="para">The directory on the server that contains the file
(<em class="emphasis">/pub/security/merit/gated</EM
> in our example)</P
></LI
><li class="listitem"><p class="para">The full name of the file (<em class="emphasis">gated-R3_5_5.tar.gz</EM
> in our
example)</P
></LI
></UL
><p class="para">You can also use <b class="emphasis.bold">archie</B
> by sending email to <em class="emphasis">archie</EM
> at any
one of the <b class="emphasis.bold">archie</B
> servers; for example,
<em class="emphasis">archie@archie.internic.net</EM
>.  The text of the mail message must
contain a valid <b class="emphasis.bold">archie</B
> email command. To get a complete list of
<b class="emphasis.bold">archie</B
> email commands, send mail containing the <em class="emphasis">help</EM
>
command to one of the servers. In the example below, the email help
file is requested from <em class="emphasis">archie.internic.net</EM
>.<a class="indexterm" name="AUTOID-18942"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>mail archie@archie.internic.net</B
></CODE
>
Subject:
<code class="userinput"><b>help
^D</B
></CODE
>
EOT</PRE
></BLOCKQUOTE
></P
><p class="para">While these two methods of accessing <b class="emphasis.bold">archie</B
> work fine, the best
way to use <b class="emphasis.bold">archie</B
> is through a Web browser. Many Web
servers provide an <b class="emphasis.bold">archie</B
> interface.
<a class="systemitem.sitename" href="../../../../../../../pubweb.nexor.co/uk/public/archie/servers.html">http://pubweb.nexor.co/uk/public/archie/servers.html</A
> lists several of
these gateways. The server used in 
<a class="xref" href="#TCP2-CH-13-FIG-3" title="Archie Web interface">Figure 13.4</A
>
is <a class="systemitem.sitename" href="../../../../../../../archie.bunyip.com/archie.html">http://archie.bunyip.com/archie.html</A
>.</P
><h4 class="figure"><a class="title" name="TCP2-CH-13-FIG-3">Figure 13.4: Archie Web interface</A
></H4
><img class="graphic" src="figs/tcp2_1304.gif" alt="Figure 13.4"><p class="para">Enter the name of the program you want to locate in the <code class="literal">Search
for:</CODE
> box and press the <code class="literal">Search</CODE
> button. Your browser displays
the search results with links directly to the file you're
seeking. For example, assume we rerun the search for
<em class="emphasis">gated-R3_5_5.tar.gz</EM
> using the
<a class="systemitem.sitename" href="../../../../../../../archie.bunyip.com/archie.html">http://archie.bunyip.com/archie.html</A
> Web page. The server returns a
list of eight matches, the first of which is the anonymous FTP server
at <em class="emphasis">ftp.zcu.cz</EM
>. The filename <em class="emphasis">gated-R3_5_5.tar.gz</EM
> that is
displayed next to the FTP server is a link. Clicking on the link
transfers the file from <em class="emphasis">ftp.zcu.cz</EM
> to your system. Search and
retrieval all in one interface!</P
><p class="para">While the Web browser provides the easiest interface to <b class="emphasis.bold">archie</B
>, some
people prefer to run an <b class="emphasis.bold">archie</B
> client on their local system. Using an
<b class="emphasis.bold">archie</B
> client reduces the load on the servers and improves
responsiveness for the user. If you believe you'll access
<b class="emphasis.bold">archie</B
> very frequently, it might be worth setting up an
<b class="emphasis.bold">archie</B
> client.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="TCP2-CH-13-SECT-3.1.1">13.3.1.1 archie client software </A
></H4
><p class="para"><a class="indexterm" name="TCP2-CH-13-IX-ARCHIE-CLIENT-SOFTWARE"></A
><b class="emphasis.bold">archie</B
> client software is available via anonymous FTP from the<a class="indexterm" name="AUTOID-18979"></A
>
<em class="emphasis">ftp.bunyip.com</EM
> server. The software is stored in the
<em class="emphasis">pub/archie/clients</EM
> directory. The README file in this directory
provides a short description of each type of client. There are at
least three different client software packages for UNIX: an X windows
client and two command-line clients, one written in C and the other
written in Perl. Check the <b class="emphasis.bold">archie</B
> servers for the latest
developments in client software.</P
><p class="para">This section uses the command-line <b class="emphasis.bold">archie</B
> client written in C as
an example. The C code and the instruction to <b class="emphasis.bold">make</B
> the client are
all contained in the <em class="emphasis">c-archie-1.4.1.tar.gz</EM
> file from
<em class="emphasis">ftp.bunyip.com</EM
>. Once the client has been made and installed, it
is invoked using the command:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>archie</B
></CODE
> [<code class="replaceable"><i>options</I
></CODE
>] <code class="replaceable"><i>string</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="replaceable"><i>string</I
></CODE
> is the name of the file that you are asking
<b class="emphasis.bold">archie</B
>
to find. It can be the exact filename, a substring of the
name, or a regular expression.</P
><p class="para">The <em class="emphasis">options</EM
> control how the <em class="emphasis">string</EM
> is interpreted. The
<b class="emphasis.bold">-e</B
>
option searches for a filename that exactly matches the string; the
<b class="emphasis.bold">-s</B
> option matches on any
record that contains the string as any part of the filename; and the
<b class="emphasis.bold">-r</B
> option interprets the string as a UNIX regular expression
when looking for matches.</P
><p class="para">The following example uses the <b class="emphasis.bold">archie</B
> client to search for sites
from which the <b class="emphasis.bold">ppp</B
> software can be retrieved. The search uses a
regular expression that will match any compressed <b class="emphasis.bold">tar</B
> file with a
name that starts with <b class="emphasis.bold">ppp</B
>.</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>archie -r '^ppp.*\.tar\.Z' &gt; ppp.locations</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;Our example stores <b class="emphasis.bold">archie</B
>'s output in the file <em class="emphasis">ppp.locations</EM
>.
You can then examine <em class="emphasis">ppp.locations</EM
> to find the closest FTP
server that has the latest version of the <b class="emphasis.bold">ppp</B
> tar file.
Redirecting the output to a file is usually a good idea because
<b class="emphasis.bold">archie</B
> often produces a lot of output. By default, the <b class="emphasis.bold">archie</B
>
client will return as many as 95 matches to the search. To limit the
number of matches returned, use the option <b class="emphasis.bold">-m</B
><em class="emphasis">n</EM
>, where <em class="emphasis">n</EM
>
is the maximum number of matches <b class="emphasis.bold">archie</B
> should return. For example,
<b class="emphasis.bold">-m</B
>5 limits the search to five matches.<a class="indexterm" name="AUTOID-19023"></A
><a class="indexterm" name="AUTOID-19024"></A
><a class="indexterm" name="AUTOID-19025"></A
></P
><p class="para">The <b class="emphasis.bold">archie</B
> database is frequently out-of-date or dominated by obscure
FTP servers that have poor connectivity. This limits its utility. But
sometimes <b class="emphasis.bold">archie</B
> is the only place you have to start your search for
a file.</P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch13_02.htm#TCP2-CH-13-SECT-2.1" title="13.2 Anonymous FTP "><img src="../gifs/txtpreva.gif" alt="Previous: 13.2 Anonymous FTP " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch13_04.htm" title="13.4 Retrieving RFCs "><img src="../gifs/txtnexta.gif" alt="Next: 13.4 Retrieving RFCs " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">13.2 Anonymous FTP </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">13.4 Retrieving RFCs </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
