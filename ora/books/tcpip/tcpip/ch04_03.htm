<html><head>
<title>[Chapter 4] 4.3 Planning Routing </TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:32:44Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch04_01.htm" title="4. Getting Started "><link rel="prev" href="ch04_02.htm#TCP2-CH-4-SECT-2.1" title="4.2 Basic Information "><link rel="next" href="ch04_04.htm#TCP2-CH-4-SECT-4.1.1" title="4.4 Planning Naming Service "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_02.htm#TCP2-CH-4-SECT-2.1" title="4.2 Basic Information "><img src="../gifs/txtpreva.gif" alt="Previous: 4.2 Basic Information " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 4<br>Getting Started </FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_04.htm#TCP2-CH-4-SECT-4.1.1" title="4.4 Planning Naming Service "><img src="../gifs/txtnexta.gif" alt="Next: 4.4 Planning Naming Service " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="TCP2-CH-4-SECT-3">4.3 Planning Routing </A
></H2
><p class="para"><a class="indexterm" name="TCP2-CH-4-IX-ROUTING-PLANNING"></A
>In <a class="xref" href="ch02_01.htm" title="Delivering the Data">Chapter 2</A
>, we learned that hosts communicate directly only with other
computers connected to the same network. Gateways<a class="indexterm" name="AUTOID-4367"></A
>
are needed to
communicate with systems on other networks. If the hosts on your
network need to communicate with computers on other networks, a route
through a gateway must be defined. There are two ways to do this:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Routing can be handled by a <em class="emphasis">static routing table</EM
><a class="indexterm" name="AUTOID-4373"></A
>
built by the system administrator. Static routing tables are most useful
when the number of gateways is limited. Static tables do not dynamically adjust
to changing network conditions, so each change in the table is made
manually by the network administrator. Complex environments
require a more
flexible approach to routing than a static routing table provides.</P
></LI
><li class="listitem"><p class="para">Routing can be handled by a <em class="emphasis">dynamic routing table</EM
><a class="indexterm" name="AUTOID-4379"></A
>
that responds
to changing network conditions. Dynamic routing tables are built by
routing protocols. Routing protocols exchange routing information that
is used to update the routing table. Dynamic routing is used when there
are multiple gateways on a network, and is essential when more than one
gateway can reach the same destination.</P
></LI
></UL
><p class="para">Many networks use a combination of both static and dynamic routing.
Some systems on the network use static routing tables, while others run
routing protocols and have dynamic tables. While it is often
appropriate for hosts to use static routing tables, gateways usually
run routing protocols.</P
><p class="para">The network administrator <a class="indexterm" name="AUTOID-4384"></A
>
is responsible for deciding what type of
routing to use and for choosing the default gateway<a class="indexterm" name="AUTOID-4386"></A
>
for each
host. Make these decisions before you start to configure your system.
Here are a few guidelines to help you plan routing. If you have:</P
><dl class="variablelist"><dt class="term"><em class="emphasis">A network with no gateways to other TCP/IP networks</EM
></DT
><dd class="listitem"><p class="para">No special
routing configuration is required in this case. The gateways referred
to in this discussion are IP routers that interconnect TCP/IP
networks. If you are not interconnecting TCP/IP networks, you do not
need an IP router. Neither a default gateway nor a routing protocol
needs to be specified.</P
></DD
><dt class="term"><em class="emphasis">A network with a single gateway</EM
></DT
><dd class="listitem"><p class="para">If you have only one gateway, don't
run any routing protocols. Specify the single gateway as the default
gateway in a static routing table.</P
></DD
><dt class="term"><em class="emphasis">A network with internal gateways to other subnets and a single gateway to the world</EM
></DT
><dd class="listitem"><p class="para">Here there is a real choice. You can statically specify
each subnet route and make the gateway to the world your default route,
or you can run a routing protocol. Decide which you want to do based on
the effort involved in maintaining a static table versus the slight
overhead of running a routing protocol on your hosts and networks. If
you have more than a few hosts, running a routing protocol is probably
easiest.</P
></DD
><dt class="term"><em class="emphasis">A network with multiple gateways to the world</EM
></DT
><dd class="listitem"><p class="para">If you have multiple
gateways that can reach the same destination, use a routing protocol.
This allows the gateways to adapt to network changes, giving you
redundant access to the remote networks.</P
></DD
></DL
><p class="para"><a class="xref" href="#TCP2-CH-4-FIG-0" title="Routing and subnets">Figure 4.1</A
>
shows a subnetted network with five gateways identified as
<em class="emphasis">A</EM
> through <em class="emphasis">E</EM
>. A central subnet (172.16.1.0) interconnects
five other subnets. One of the subnets has a gateway to an external
network. The network administrator would probably choose to run a
routing protocol on the central subnet (172.16.1.0) and perhaps on
subnet 172.16.12.0, which is attached to an external network.
Dynamic routing<a class="indexterm" name="AUTOID-4414"></A
>
is appropriate on these subnets because they have
multiple gateways. Without dynamic routing, the administrator would
need to update every one of these gateways manually whenever any change
occurred in the network&nbsp;- for example, whenever a new subnet was added.
A mistake during the manual update could disrupt network service. Running
a routing protocol on these two subnets is simpler and more reliable.</P
><h4 class="figure"><a class="title" name="TCP2-CH-4-FIG-0">Figure 4.1: Routing and subnets</A
></H4
><img class="graphic" src="figs/tcp2_0401.gif" alt="Figure 4.1"><p class="para">On the other hand, the administrator would probably choose static<a class="indexterm" name="AUTOID-4422"></A
>
routing for the other subnets (172.16.3.0, 172.16.6.0, and 172.16.9.0).
These subnets each use only one gateway to reach all destinations.
Changes external to the subnets, such as the addition of a new subnet,
do not change the fact that these three subnets still have only one
routing choice. Newly added networks are still reached through the same
gateway. The hosts on these subnets specify the subnet's gateway as
their default route. In other words, the hosts on subnet 172.16.3.0
specify <em class="emphasis">B</EM
> as the default gateway, while the hosts on subnet
172.16.9.0 specify <em class="emphasis">D</EM
> as the default, no matter what happens on
the external networks.</P
><p class="para">Some routing decisions are thrust upon you by the external networks
to which you connect. In 
<a class="xref" href="#TCP2-CH-4-FIG-0" title="Routing and subnets">Figure 4.1</A
>
the local network connects to an
external network that requires that Border Gateway Protocol
(BGP) be used for routing. Therefore, gateway <em class="emphasis">E</EM
> has to run BGP to
exchange routes with the external network.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-4-SECT-3.0.1">4.3.1 Obtaining an autonomous system number </A
></H3
><p class="para">The Border Gateway Protocol (BGP)<a class="indexterm" name="AUTOID-4434"></A
>
requires that gateways have a special
identifier called an <em class="emphasis">autonomous system number</EM
> (ASN).<a class="indexterm" name="AUTOID-4437"></A
>
(Refer to the
section &quot;Internet Routing Architecture&quot; in <a class="xref" href="ch02_01.htm" title="Delivering the Data">Chapter 2</A
> for a discussion
of autonomous systems.) Most sites do not need to run BGP. Most sites
do not need a unique ASN, even when they do run BGP. Usually those sites
can select one of the ASNs that have been set aside
for private use, which are the numbers from 64512 to 65535. Select a
number and coordinate your selection with your border gateway peers to
avoid any possible conflicts. If you connect to the Internet through
a single ISP, you almost certainly do not need an official ASN. If 
after discussions with your service provider you find
that you must obtain an official ASN, obtain the
application form at <a class="systemitem.url" href="../../../WebStripper/protected.html#link=ftp://rs.internic.net/templates/asn&#8211;template.txt.">ftp://rs.internic.net/templates/asn-template.txt.</A
>
(See the &quot;Internet Registries&quot; sidebar earlier in this chapter.)<a class="indexterm" name="AUTOID-4442"></A
></P
><p class="para">If you submit an application, you're asked to explain why you need a
unique autonomous system number. Unless you are an ISP, probably the
only reason to obtain an ASN is that you are a <em class="emphasis">multi-homed site</EM
>.<a class="indexterm" name="AUTOID-4446"></A
>
A multi-homed site is any site that connects to more than one ISP.
Reachability information for the site may be advertised by both ISPs,
confusing the routing policy. Assigning the site an ASN gives it direct
responsibility for setting its own routing policy and advertising its own
reachability information. This doesn't prevent the site from advertising
bad routes, but it makes the advertisement traceable back to one site and
ultimately to one technical contact.

(Once you submit an ASN application, you have no one to blame but yourself!)<a class="indexterm" name="AUTOID-4449"></A
></P
><p class="para">All of the items we have discussed so far (addressing, subnetting, and
routing) are required to configure the basic physical network on top of
which the applications and services run. Now we begin planning the
services that make the network useful and usable.</P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_02.htm#TCP2-CH-4-SECT-2.1" title="4.2 Basic Information "><img src="../gifs/txtpreva.gif" alt="Previous: 4.2 Basic Information " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_04.htm#TCP2-CH-4-SECT-4.1.1" title="4.4 Planning Naming Service "><img src="../gifs/txtnexta.gif" alt="Next: 4.4 Planning Naming Service " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">4.2 Basic Information </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">4.4 Planning Naming Service </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
