<html><head>
<title>[Appendix B] B.9 static Statements</TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:43:21Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appb_01.htm" title="B. A gated Reference"><link rel="prev" href="appb_08.htm#TCP2-AP-2-SECT-8.4" title="B.8 Protocol Statements"><link rel="next" href="appb_10.htm#TCP2-AP-2-SECT-10.1" title="B.10 Control Statements"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appb_08.htm#TCP2-AP-2-SECT-8.4" title="B.8 Protocol Statements"><img src="../gifs/txtpreva.gif" alt="Previous: B.8 Protocol Statements" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Appendix B<br>A gated Reference</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appb_10.htm#TCP2-AP-2-SECT-10.1" title="B.10 Control Statements"><img src="../gifs/txtnexta.gif" alt="Next: B.10 Control Statements" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="TCP2-AP-2-SECT-9">B.9 static Statements</A
></H2
><p class="para"><a class="indexterm" name="TCP2-AP-2-IX-STATIC-STATEMENTS-IN-GATED"></A
><b class="emphasis.bold">static</B
> statements define the static routes used by <b class="emphasis.bold">gated</B
>. A
single <b class="emphasis.bold">static</B
> statement can specify several routes. The <b class="emphasis.bold">static</B
>
statements occur after protocol statements and before control
statements in the <em class="emphasis">gated.conf</EM
> file. To <b class="emphasis.bold">gated</B
>, static routes are
any routes defined with <b class="emphasis.bold">static</B
> statements. However, unlike the routes in
a static routing table, these routes can be overridden by routes with
better preference values.</P
><p class="para">The structure of a <b class="emphasis.bold">static</B
> statement is:</P
><blockquote class="literallayout"><p class="literallayout"><b class="emphasis.bold">static {<br>   </B
>[<b class="emphasis.bold">default</B
>] | [[<b class="emphasis.bold">host</B
>] <code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">mask</B
> <code class="replaceable"><i>mask </I
></CODE
>| <b class="emphasis.bold">masklen</B
> <code class="replaceable"><i>n</I
></CODE
>]] <b class="emphasis.bold">gateway</B
> <code class="replaceable"><i>gateways</I
></CODE
><br>        [<b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
>]<br>        [<b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
>]<br>        [<b class="emphasis.bold">retain</B
>]<br>        [<b class="emphasis.bold">reject</B
>]<br>        [<b class="emphasis.bold">blackhole</B
>]<br>        [<b class="emphasis.bold">noinstall</B
>] <b class="emphasis.bold">;</B
><br>   <code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">mask</B
> <code class="replaceable"><i>mask </I
></CODE
>| <b class="emphasis.bold">masklen</B
> <code class="replaceable"><i>n</I
></CODE
>] <b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface</I
></CODE
><br>        [<b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
>] <br>        [<b class="emphasis.bold">retain</B
>]<br>        [<b class="emphasis.bold">reject</B
>]<br>        [<b class="emphasis.bold">blackhole</B
>]<br>        [<b class="emphasis.bold">noinstall</B
>] <b class="emphasis.bold">;<br>} ;</B
></P
></BLOCKQUOTE
><p class="para">The <b class="emphasis.bold">static</B
> statement has two different clauses. The one with the
keyword <b class="emphasis.bold">gateway</B
> is the one you'll use. This clause contains
information similar to that provided by the <b class="emphasis.bold">route</B
> command. A
static route is defined as a destination address reached though a
gateway. The format of this clause is:</P
><dl class="variablelist"><dt class="term">[<b class="emphasis.bold">default</B
>] | [[<b class="emphasis.bold">host</B
>] <code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">mask</B
> <code class="replaceable"><i>mask </I
></CODE
>| <b class="emphasis.bold">masklen</B
> <code class="replaceable"><i>number</I
></CODE
>]] <b class="emphasis.bold">gateway</B
> <code class="replaceable"><i>gateways</I
></CODE
></DT
><dd class="listitem"><p class="para">Defines a static route through one or more gateways. The destination is
defined by the keyword <b class="emphasis.bold">default</B
> (for the default route) or by a
destination address. The destination address can be preceded by the
keyword <b class="emphasis.bold">host</B
>, if it is a host address, or followed by an address
mask. The address mask can be defined with the keyword <b class="emphasis.bold">mask</B
> and
a dotted decimal address mask, or by the keyword <b class="emphasis.bold">masklen</B
> and a
numeric prefix length. The listed gateways must be on a directly
attached network. Possible configuration parameters are:
<dl class="variablelist"><dt class="term"><b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface_list</I
></CODE
></DT
><dd class="listitem"><p class="para">When specified, gateways in the <code class="replaceable"><i>gateway_list</I
></CODE
> must be directly
reachable through one of these interfaces.</P
></DD
><dt class="term"><b class="emphasis.bold">preference</B
> <code class="replaceable"><i>preference</I
></CODE
></DT
><dd class="listitem"><p class="para">Sets the <b class="emphasis.bold">gated</B
> preference<a class="indexterm" name="AUTOID-23328"></A
>
for this static route. The default is
60.</P
></DD
><dt class="term"><b class="emphasis.bold">retain</B
></DT
><dd class="listitem"><p class="para">Prevents this static route from being removed during a graceful
shutdown. Normally only interface routes are retained in the kernel
forwarding table. Use this to provide some routing when <b class="emphasis.bold">gated</B
> is
not running.</P
></DD
><dt class="term"><b class="emphasis.bold">reject</B
></DT
><dd class="listitem"><p class="para">Installs this route as a &quot;reject route.&quot; Packets sent to a reject route<a class="indexterm" name="AUTOID-23341"></A
>
are dropped and an &quot;unreachable&quot; message is sent back to the source. Not
all kernels support reject routes.</P
></DD
><dt class="term"><b class="emphasis.bold">blackhole</B
></DT
><dd class="listitem"><p class="para">Installs this route as a &quot;blackhole route.&quot;  A blackhole route<a class="indexterm" name="AUTOID-23348"></A
>
is the
same as a reject route except the &quot;unreachable&quot; message is not sent.</P
></DD
><dt class="term"><b class="emphasis.bold">noinstall</B
></DT
><dd class="listitem"><p class="para">Instructs system to advertise this route via routing protocols but not
to install it in the kernel forwarding table.</P
></DD
></DL
>&#13;</P
></DD
></DL
><p class="para">The other <b class="emphasis.bold">static</B
> statement clause uses the keyword <b class="emphasis.bold">interface</B
>
instead of the keyword <b class="emphasis.bold">gateway</B
>. Use this clause only if you have
a single physical network with more than one network address&nbsp;- a rare
occurrence. <b class="emphasis.bold">ifconfig</B
> normally creates only one destination for
each interface. This special form of the static statement adds
additional destinations to the interface.</P
><dl class="variablelist"><dt class="term"><code class="replaceable"><i>address </I
></CODE
>[<b class="emphasis.bold">mask</B
> <code class="replaceable"><i>mask </I
></CODE
>| <b class="emphasis.bold">masklen</B
> <code class="replaceable"><i>number</I
></CODE
>] <b class="emphasis.bold">interface</B
> <code class="replaceable"><i>interface</I
></CODE
></DT
><dd class="listitem"><p class="para"></P
></DD
></DL
><p class="para">The <b class="emphasis.bold">preference, retain, reject, blackhole,</B
> and <b class="emphasis.bold">noinstall</B
> options are the
same as described above.</P
><p class="para">The default preference of a static route is 60, which prefers static
routes over several other routing sources. If you want other types of
routes to override static routes, use the <b class="emphasis.bold">preference</B
> argument on
the <b class="emphasis.bold">static</B
> statement to increase the preference
number. (Remember that high preference values mean less-preferred
routes.) </P
><p class="para">The following example defines a static default route through
the gateway 172.16.12.1. The preference is set to 125 so that routes
learned from RIP are preferred over this static route:<a class="indexterm" name="AUTOID-23380"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">static  {
	default gateway 128.66.12.1 preference 125 ;
 } ;</PRE
></BLOCKQUOTE
></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appb_08.htm#TCP2-AP-2-SECT-8.4" title="B.8 Protocol Statements"><img src="../gifs/txtpreva.gif" alt="Previous: B.8 Protocol Statements" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appb_10.htm#TCP2-AP-2-SECT-10.1" title="B.10 Control Statements"><img src="../gifs/txtnexta.gif" alt="Next: B.10 Control Statements" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">B.8 Protocol Statements</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">B.10 Control Statements</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
