<html><head>
<title>[Chapter 8] 8.3 Configuring named </TITLE>
<meta name="DC.title" content="TCP/IP Network Administration"><meta name="DC.creator" content="Craig Hunt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T01:36:36Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-322-7" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch08_01.htm" title="8. Configuring DNS Name Service "><link rel="prev" href="ch08_02.htm#TCP2-CH-8-SECT-2.1" title="8.2 Configuring the Resolver "><link rel="next" href="ch08_04.htm" title="8.4 Using nslookup "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="TCP/IP Network Administration" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="TCP/IP Network Administration"><area shape="RECT" coords="467,0,514,18" href="../search/tsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch08_02.htm#TCP2-CH-8-SECT-2.1" title="8.2 Configuring the Resolver "><img src="../gifs/txtpreva.gif" alt="Previous: 8.2 Configuring the Resolver " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 8<br>Configuring DNS Name Service </FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch08_04.htm" title="8.4 Using nslookup "><img src="../gifs/txtnexta.gif" alt="Next: 8.4 Using nslookup " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="TCP2-CH-8-SECT-3">8.3 Configuring named </A
></H2
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-NAMED-SERVER-DAEMON-CONFIGURING"></A
>While the resolver configuration requires, at most, one configuration
file, several files are used to configure <b class="emphasis.bold">named</B
>. The complete set of <b class="emphasis.bold">named</B
> configuration files are:</P
><dl class="variablelist"><dt class="term"><em class="emphasis">named.boot</EM
></DT
><dd class="listitem"><p class="para">Sets general <b class="emphasis.bold">named</B
> parameters and points to the sources
of domain database information used by this server. These sources can
be local disk files or remote servers.</P
></DD
><dt class="term"><em class="emphasis">named.ca</EM
></DT
><dd class="listitem"><p class="para">Points to the root domain servers</P
></DD
><dt class="term"><em class="emphasis">named.local</EM
></DT
><dd class="listitem"><p class="para">Used to locally resolve the loopback address</P
></DD
><dt class="term"><em class="emphasis">named.hosts</EM
></DT
><dd class="listitem"><p class="para">The zone file that maps hostnames to IP addresses</P
></DD
><dt class="term"><em class="emphasis">named.rev</EM
></DT
><dd class="listitem"><p class="para">The zone file for the reverse domain that maps IP addresses to
hostnames</P
></DD
></DL
><p class="para">The filenames shown here are generic names. We use them to make it
easier to discuss the files in this text. The files can have any names
you wish. Use the filenames <em class="emphasis">named.boot</EM
> and <em class="emphasis">named.local</EM
> for
the boot file and the loopback address file. Use the name
<em class="emphasis">named.ca</EM
> or one of the well-known alternatives, <em class="emphasis">named.root</EM
>
and <em class="emphasis">root.ca</EM
>, for the file that lists the root servers.  However,
don't use the names <em class="emphasis">named.hosts</EM
> and <em class="emphasis">named.rev</EM
> for your
zone files. Use descriptive names. In the following sections, we'll
look at how each of these files is used, starting with
<em class="emphasis">named.boot</EM
>.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-8-SECT-3.1">8.3.1 The named.boot File </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-NAMED-BOOT-FILE"></A
>The <em class="emphasis">named.boot</EM
> file points <b class="emphasis.bold">named</B
> to sources of DNS
information. Some of these sources are local files; others are remote
servers. You only need to create the files referenced in the primary
and cache statements. We'll look at an example of each type of file
you may need to create.</P
><p class="para"><a class="xref" href="#TCP2-CH-8-TAB-0" title="named.boot Configuration Commands">Table 8.1</A
>
summarizes the <em class="emphasis">named.boot</EM
> configuration statements used<a class="indexterm" name="AUTOID-9510"></A
>
in this chapter. It provides just enough information to help you
understand the examples. Not all of the <em class="emphasis">named.boot</EM
> configuration
commands are used in the examples, and you probably won't use all of
the commands in your configuration. The commands are designed to cover
the full spectrum of configurations, even the configurations of root<a class="indexterm" name="AUTOID-9515"></A
>
servers. If you want more details about all of the <em class="emphasis">named.boot</EM
>
configuration statements, <a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
> contains a full explanation of
each command.</P
><table class="table"><caption class="table"><a class="title" name="TCP2-CH-8-TAB-0">Table 8.1: named.boot Configuration Commands</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Command</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">directory</TD
><td class="entry" rowspan="1" colspan="1">Defines a directory for all subsequent file references</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">primary</TD
><td class="entry" rowspan="1" colspan="1">Declares this server as primary for the specified zone</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">secondary</TD
><td class="entry" rowspan="1" colspan="1">Declares this server as secondary for the specified zone</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">cache</TD
><td class="entry" rowspan="1" colspan="1">Points to the cache file</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">forwarders</TD
><td class="entry" rowspan="1" colspan="1">Lists servers to which queries are forwarded</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">options</TD
><td class="entry" rowspan="1" colspan="1">Enables optional BIND processing</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">xfrnets</TD
><td class="entry" rowspan="1" colspan="1">Limits zone transfers to specific addresses</TD
></TR
></TBODY
></TABLE
><p class="para">The way in which you configure the <em class="emphasis">named.boot</EM
> file controls
whether the nameserver acts as a primary server, a secondary server,
or a caching-only server. The best way to understand these different
configurations is to look at sample <b class="emphasis.bold">named.boot</B
> files. The next
sections show examples of each type of configuration.&#13;</P
><div class="sect3"><h4 class="sect3"><a class="title" name="TCP2-CH-8-SECT-3.1.1">8.3.1.1 Configuring a caching-only nameserver </A
></H4
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-CACHING-ONLY-SERVERS"></A
>A caching-only server configuration is simple. A <em class="emphasis">named.boot</EM
> file
and a <em class="emphasis">named.ca</EM
> file are all that you need, though the
<em class="emphasis">named.local</EM
> file is usually also used. The most common
<em class="emphasis">named.boot</EM
> file for a caching-only server is:</P
><p class="para"><blockquote class="screen"><pre class="screen">;
;  a caching-only server configuration
;
primary         0.0.127.IN-ADDR.ARPA    /etc/named.local
cache           .                       /etc/named.ca</PRE
></BLOCKQUOTE
></P
><p class="para">The only line in this sample file required for a caching-only
configuration is the <b class="emphasis.bold">cache</B
> statement. <a class="indexterm" name="AUTOID-9566"></A
>
It tells <b class="emphasis.bold">named</B
> to
maintain a cache of nameserver responses, and to initialize the cache
with the list of root servers found in the file <em class="emphasis">named.ca</EM
>. The
name of the file containing the root server list can be any name you
wish, but <em class="emphasis">root.cache</EM
>, <em class="emphasis">named.root</EM
>, and <em class="emphasis">named.ca</EM
> are
often used. The presence of a cache statement does not make this a
caching-only configuration; a cache statement is used in every server
configuration. It is the absence of primary and secondary
statements that makes this a caching-only configuration.</P
><p class="para">However, there is one primary statement that is an exception to this 
rule. You'll see it in our sample <em class="emphasis">named.boot</EM
> file, and in 
almost every caching-only
configuration. It defines the local server as the primary server for
its own loopback domain, <a class="indexterm" name="AUTOID-9576"></A
>
and it says that the information for the
loopback domain is stored in the file <em class="emphasis">named.local</EM
>. The loopback
domain is an <em class="emphasis">in-addr.arpa</EM
> domain
[5]
that maps the address 127.0.0.1 to the name <em class="emphasis">localhost</EM
>.

The idea of resolving your own loopback
address makes sense to most people, so most <em class="emphasis">named.boot</EM
> files
contain this entry.</P
><blockquote class="footnote"><p class="para">[5] See <a class="xref" href="ch04_01.htm" title="Getting Started ">Chapter 4, <cite class="chapter">Getting Started </CITE
></A
>, for a description of <em class="emphasis">in-addr.arpa</EM
> domains.</P
></BLOCKQUOTE
><p class="para">These primary and cache statements are the only statements used in most
caching-only server configurations, but other statements can be added.
A <b class="emphasis.bold">forwarders</B
> statement, and even an <b class="emphasis.bold">options</B
> statement are sometimes
used. The <b class="emphasis.bold">forwarders</B
> statement causes the caching-only server to send
all of the queries that it cannot resolve from its own cache to
specific servers. For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">forwarders 172.16.12.1 172.16.1.2</PRE
></BLOCKQUOTE
></P
><p class="para">This statement forwards every query that cannot be answered
from the local cache to 172.16.12.1 and 172.16.1.2. The <b class="emphasis.bold">forwarders</B
><a class="indexterm" name="AUTOID-9595"></A
>
command builds a rich DNS cache on selected servers
located on the local network. This reduces the number of times that
queries must be sent out on the wide area network, which is
particularly useful if you have limited bandwidth <a class="indexterm" name="AUTOID-9597"></A
>
to the wide area
network or if you are charged for usage.</P
><p class="para">When network access to the outside world is severely limited, use the
following statement to force the local server to always use the
forwarder.</P
><p class="para"><blockquote class="screen"><pre class="screen">options forward-only</PRE
></BLOCKQUOTE
></P
><p class="para">With this statement in the configuration file, the local server will not
attempt to resolve a query itself even if it cannot get an answer to that
query from the forwarders.</P
><p class="para">Adding <b class="emphasis.bold">forwarders</B
> or <b class="emphasis.bold">options</B
> statements does not change
this from being a caching-only server configuration. Only the addition
of primary and secondary commands will do that.<a class="indexterm" name="AUTOID-9607"></A
></P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="TCP2-CH-8-SECT-3.1.2">8.3.1.2 Primary and secondary server configurations </A
></H4
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-PRIMARY-NAMESERVERS-CONFIGURING"></A
>The imaginary <em class="emphasis">nuts.com</EM
> domain is the basis for our sample
primary and secondary server configurations. Here is the
<em class="emphasis">named.boot</EM
> file to define <em class="emphasis">almond</EM
> as the primary server for
the <em class="emphasis">nuts.com</EM
> domain:</P
><p class="para"><blockquote class="screen"><pre class="screen">;
;  nuts.com primary nameserver boot file.
;
directory                              /etc
primary   nuts.com                     named.hosts
primary   16.172.IN-ADDR.ARPA          named.rev
primary   0.0.127.IN-ADDR.ARPA         named.local
cache     .                            named.ca</PRE
></BLOCKQUOTE
></P
><p class="para">The <b class="emphasis.bold">directory</B
> statement <a class="indexterm" name="AUTOID-9622"></A
>
saves keystrokes on the subsequent
filenames. It tells <b class="emphasis.bold">named</B
> that all relative filenames (i.e.,
filenames that don't begin with a /), no matter where they occur in the
<b class="emphasis.bold">named</B
> configuration, are relative to the directory <em class="emphasis">/etc</EM
>.</P
><p class="para">The first primary statement declares that this is the primary server
for the <em class="emphasis">nuts.com</EM
> domain, and that the data for that domain is
loaded from the file <em class="emphasis">named.hosts</EM
>. In our examples, we'll use the
filename <em class="emphasis">named.hosts</EM
> as the zone filename, but you
should choose a more descriptive filename.
For example, a better name for the <em class="emphasis">nuts.com</EM
> zone
file is <em class="emphasis">nuts.com.hosts</EM
>.</P
><p class="para">The second primary statement points to the file that maps IP addresses
from 172.16.0.0 to hostnames. This statement says that the local
server is the primary server for the reverse domain
<em class="emphasis">16.172.in-addr.arpa</EM
>, and that the data for that domain is loaded
from the file <em class="emphasis">named.rev</EM
>. Again, the filename <em class="emphasis">named.rev</EM
> is
just an example; use descriptive names in your actual
configuration.</P
><p class="para">The format of a primary statement is the keyword <code class="literal">primary</CODE
>, the
domain name, and the name of the zone file from which the domain
information is read. All primary statements have this simple
format.</P
><p class="para">The final two statements in the sample configuration are the primary
statement for the loopback domain and the cache statement. These
statements are discussed earlier in the section about caching-only
configurations. They have the same function in every configuration and
are found in almost every configuration.<a class="indexterm" name="AUTOID-9641"></A
></P
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-SECONDARY-NAMESERVERS-CONFIGURING"></A
>A secondary server's configuration differs from a primary's by using
<b class="emphasis.bold">secondary</B
> instead of <b class="emphasis.bold">primary</B
> statements. Secondary
statements point to remote servers as the source of the domain
information instead of local disk files. Secondary statements begin
with the keyword <code class="literal">secondary</CODE
>, followed by the name of the domain,
the address of one or more authoritative servers for that domain, and
finally the name of a local file where information received from the
remote server will be stored. The following <em class="emphasis">named.boot</EM
> file
configures <em class="emphasis">filbert</EM
> as a secondary server for the <em class="emphasis">nuts.com</EM
>
domain:</P
><p class="para"><blockquote class="screen"><pre class="screen">;
;  nuts.com secondary nameserver boot file.
;
directory                                       /etc
secondary   nuts.com              172.16.12.1   nuts.com.hosts
secondary   16.172.IN-ADDR.ARPA   172.16.12.1   172.16.rev
primary     0.0.127.IN-ADDR.ARPA                named.local
cache       .                                   named.ca</PRE
></BLOCKQUOTE
></P
><p class="para">The first secondary statement makes this a secondary server for
the <em class="emphasis">nuts.com</EM
> domain. The statement tells <b class="emphasis.bold">named</B
> to
download the data for the <em class="emphasis">nuts.com</EM
> domain from the server
at IP address 172.16.12.1, and to store that data in the file
<em class="emphasis">/etc/nuts.com.hosts</EM
>. If the <em class="emphasis">nuts.com.hosts</EM
> file does not
exist, <b class="emphasis.bold">named</B
> creates it, gets the zone data from the remote server,
and writes the data in the newly created file. If the file does exist,
<b class="emphasis.bold">named</B
> checks with the remote server to see if the remote server's
data is different from the data in the file. If the data has changed,
<b class="emphasis.bold">named</B
> downloads the updated data and overwrites the file contents
with the new data. If the data has not changed, <b class="emphasis.bold">named</B
> loads the
contents of the disk file and doesn't bother with a zone transfer.
[6]
Keeping a copy of the database on a local disk file makes it unnecessary
to transfer the zone file <a class="indexterm" name="AUTOID-9668"></A
>
every time the local host is rebooted.
It's only necessary to transfer the zone when the data changes.</P
><blockquote class="footnote"><p class="para">[6] <a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
> (in the SOA record section) discusses
how <b class="emphasis.bold">named</B
> determines if data has been updated.</P
></BLOCKQUOTE
><p class="para">The next line in this configuration says that the local server is also
a secondary server for the reverse domain <em class="emphasis">16.172.in-addr.arpa</EM
>,
and that the data for that domain should also be downloaded from
172.16.12.1. The reverse domain data is stored locally in a file named
<em class="emphasis">172.16.rev</EM
>, following the same rules discussed previously for
creating and overwriting <em class="emphasis">nuts.com.hosts</EM
>.<a class="indexterm" name="AUTOID-9675"></A
><a class="indexterm" name="AUTOID-9676"></A
></P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-8-SECT-3.2">8.3.2 Standard Resource Records </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-STANDARD-RESOURCE-RECORDS-RRS"></A
><a class="indexterm" name="TCP2-CH-8-IX-STANDARD-RESOURCE-RECORDS-RRS2"></A
>The configuration commands discussed above and listed in 
<a class="xref" href="#TCP2-CH-8-TAB-0" title="named.boot Configuration Commands">Table 8.1</A
>
are used only in the <em class="emphasis">named.boot</EM
> file. All other files used to
configure <b class="emphasis.bold">named</B
> (<em class="emphasis">named.hosts</EM
>, <em class="emphasis">named.rev</EM
>,
<em class="emphasis">named.local</EM
>, and <em class="emphasis">named.ca</EM
>) store domain database
information. These files all have the same basic format and use the
same type of database records. They use standard resource records,
called RRs. These are defined in RFC 1033, the <em class="emphasis">Domain
Administrators Operations Guide</EM
>, and other RFCs.
<a class="xref" href="#TCP2-CH-8-TAB-1" title="Standard Resource Records">Table 8.2</A
>
summarizes all of the standard resource records used in this chapter.
These records are covered in detail in <a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
>.</P
><table class="table"><caption class="table"><a class="title" name="TCP2-CH-8-TAB-1">Table 8.2: Standard Resource Records</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Resource Record</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Record</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Text Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Type</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"></TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Start of Authority</TD
><td class="entry" rowspan="1" colspan="1">SOA</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Marks the beginning of a zone's data, and defines
parameters that affect the entire zone.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Nameserver</TD
><td class="entry" rowspan="1" colspan="1">NS</TD
><td class="entry" rowspan="1" colspan="1">Identifies a domain's nameserver.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Address</TD
><td class="entry" rowspan="1" colspan="1">A</TD
><td class="entry" rowspan="1" colspan="1">Converts a hostname to an address.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Pointer</TD
><td class="entry" rowspan="1" colspan="1">PTR</TD
><td class="entry" rowspan="1" colspan="1">Converts an address to a hostname.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Mail Exchange</TD
><td class="entry" rowspan="1" colspan="1">MX</TD
><td class="entry" rowspan="1" colspan="1">Identifies where to deliver mail for a given domain name.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Canonical Name</TD
><td class="entry" rowspan="1" colspan="1">CNAME</TD
><td class="entry" rowspan="1" colspan="1">Defines an alias hostname.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Host Information</TD
><td class="entry" rowspan="1" colspan="1">HINFO</TD
><td class="entry" rowspan="1" colspan="1">Describes a host's hardware and OS.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Well-Known Service</TD
><td class="entry" rowspan="1" colspan="1">WKS</TD
><td class="entry" rowspan="1" colspan="1">Advertises network services.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Text</TD
><td class="entry" rowspan="1" colspan="1">TXT</TD
><td class="entry" rowspan="1" colspan="1">Stores arbitrary text strings.</TD
></TR
></TBODY
></TABLE
><p class="para">The resource record syntax is described in <a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
>, but a little
understanding of the structure of these records is necessary to read
the sample configuration files used in this chapter.&#13;</P
><p class="para">The format of DNS resource records is:</P
><p class="para">&nbsp;&nbsp;&nbsp;[<code class="replaceable"><i>name</I
></CODE
>] [<code class="replaceable"><i>ttl</I
></CODE
>] <b class="emphasis.bold">IN</B
> <code class="replaceable"><i>type data</I
></CODE
></P
><dl class="variablelist"><dt class="term"><code class="replaceable"><i>name</I
></CODE
></DT
><dd class="listitem"><p class="para">This is the name of the domain object the resource record references.
It can be an individual host or an entire domain. The string entered
for the <code class="replaceable"><i>name</I
></CODE
> field is relative to the current domain unless it ends with a
dot. If the name field is blank, the record applies to the domain
object that was named last. For example, if the A record for
<em class="emphasis">peanut</EM
> is followed by an MX record <a class="indexterm" name="AUTOID-9760"></A
><a class="indexterm" name="AUTOID-9762"></A
>
with a blank <em class="emphasis">name</EM
> field,
both the A record and the MX record apply to <em class="emphasis">peanut</EM
>.</P
></DD
><dt class="term"><code class="replaceable"><i>ttl</I
></CODE
></DT
><dd class="listitem"><p class="para"><a class="indexterm" name="AUTOID-9771"></A
>Time-to-live defines the length of time, in seconds, that the
information in this resource record should be kept in a remote system's
cache. Usually this field is left blank and the default <code class="replaceable"><i>ttl</I
></CODE
>, set
for the entire zone in the SOA record,<a class="indexterm" name="AUTOID-9774"></A
>
is used.
[7]</P
><blockquote class="footnote"><p class="para">[7] See the section on SOA records in <a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
>.</P
></BLOCKQUOTE
></DD
><dt class="term"><b class="emphasis.bold">IN</B
></DT
><dd class="listitem"><p class="para">Identifies the record as an Internet DNS resource record. There are
other classes of records, but they are rarely used. Curious? See
<a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
> for the other, non-Internet, classes.</P
></DD
><dt class="term"><code class="replaceable"><i>type</I
></CODE
></DT
><dd class="listitem"><p class="para">Identifies the kind of resource record. 
<a class="xref" href="#TCP2-CH-8-TAB-1" title="Standard Resource Records">Table 8.2</A
>
lists the record types under the heading &quot;Record Type.&quot; Specify one of
these values in the <code class="replaceable"><i>type</I
></CODE
> field.</P
></DD
><dt class="term"><code class="replaceable"><i>data</I
></CODE
></DT
><dd class="listitem"><p class="para">The information specific to this type of resource record. For
example, in an A record this is the field that contains the actual IP
address.<a class="indexterm" name="AUTOID-9797"></A
><a class="indexterm" name="AUTOID-9798"></A
></P
></DD
></DL
><p class="para">In the following sections we look at each of the remaining
configuration files. As you look at the files, remember that all of
the records in these files are standard resource records that follow
the format described above.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-8-SECT-3.3">8.3.3 The Cache Initialization File </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-CACHE-INITIALIZATION-FILE"></A
>The cache statement in <em class="emphasis">named.boot</EM
> points to a cache
initialization file. Each server that maintains a cache has such
a file. It contains the information needed to begin building a cache of
domain data when the nameserver starts.
The root domain is indicated on the cache statement by a single dot,
and the <em class="emphasis">named.ca</EM
> file contains the names and
addresses of the root servers.</P
><p class="para">The <em class="emphasis">named.ca</EM
> file is sometimes called a &quot;hints&quot; file, because it<a class="indexterm" name="AUTOID-9810"></A
>
contains hints <b class="emphasis.bold">named</B
> uses to initialize the cache. The hints it
contains are the names and addresses of the root servers. It is used to
help the local server locate a root server during startup. Once a root
server is found, an authoritative list of root servers is downloaded from
that server. The hints are not referred to again until the local server
is forced to restart. The information in the <em class="emphasis">named.ca</EM
> file is not
referred to often, but it is critical for booting a <b class="emphasis.bold">named</B
> server.<a class="indexterm" name="AUTOID-9815"></A
></P
><p class="para">The basic <em class="emphasis">named.ca</EM
> file contains NS records that name the root
servers, and A records that provide the addresses of the root servers.
A sample <em class="emphasis">named.ca</EM
> file is shown below:</P
><p class="para"><blockquote class="screen"><pre class="screen">;
.                     3600000  IN  NS   A.ROOT-SERVERS.NET.
A.ROOT-SERVERS.NET.   3600000  IN  A    198.41.0.4
;
.                     3600000      NS   B.ROOT-SERVERS.NET.
B.ROOT-SERVERS.NET.   3600000  IN  A    128.9.0.107
;
.                     3600000      NS   C.ROOT-SERVERS.NET.
C.ROOT-SERVERS.NET.   3600000  IN  A    192.33.4.12
;
.                     3600000      NS   D.ROOT-SERVERS.NET.
D.ROOT-SERVERS.NET.   3600000  IN  A    128.8.10.90
;
.                     3600000      NS   E.ROOT-SERVERS.NET.
E.ROOT-SERVERS.NET.   3600000  IN  A    192.203.230.10
;
.                     3600000      NS   F.ROOT-SERVERS.NET.
F.ROOT-SERVERS.NET.   3600000  IN  A    192.5.5.241
;
.                     3600000      NS   G.ROOT-SERVERS.NET.
G.ROOT-SERVERS.NET.   3600000  IN  A    192.112.36.4
;
.                     3600000      NS   H.ROOT-SERVERS.NET.
H.ROOT-SERVERS.NET.   3600000  IN  A    128.63.2.53
;
.                     3600000      NS   I.ROOT-SERVERS.NET.
I.ROOT-SERVERS.NET.   3600000  IN  A    192.36.148.17</PRE
></BLOCKQUOTE
></P
><p class="para">This file contains only nameserver and address records. Each
NS record identifies a nameserver for the root (<code class="literal">.</CODE
>)
domain. The associated A record gives the
address of each root server. The ttl value for all of these records is
3600000&nbsp;- a very large value that is approximately 42 days.</P
><p class="para">Create the <em class="emphasis">named.ca</EM
> file by downloading the file
<em class="emphasis">domain/named.root</EM
> from <em class="emphasis">rs.internic.net</EM
> (198.41.0.7)
via anonymous <b class="emphasis.bold">ftp</B
>. The file stored at the InterNIC is in the<a class="indexterm" name="AUTOID-9830"></A
>
correct format for a UNIX system. The example below shows the<a class="indexterm" name="AUTOID-9832"></A
>
superuser downloading the <em class="emphasis">named.root</EM
> file directly into
the local system's <em class="emphasis">named.ca</EM
> file. The file doesn't
even need to be edited: it is ready to run.</P
><p class="para"><blockquote class="screen"><pre class="screen"># <b class="emphasis.bold">ftp rs.internic.net</B
>
Connected to rs.internic.net.
Name (rs.internic.net:craig): <b class="emphasis.bold">anonymous</B
>
331 Guest login ok, send your email address as password.
Password: <b class="emphasis.bold">craig@nuts.com</B
>
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; <b class="emphasis.bold">get domain/named.root named.ca</B
>
200 PORT command successful.
150 Opening data connection for domain/named.root (2119 bytes).
226 Transfer complete.
2119 bytes received in 0.137 secs (15 Kbytes/sec)
ftp&gt; <b class="emphasis.bold">quit</B
>
221 Goodbye.</PRE
></BLOCKQUOTE
></P
><p class="para">Download the <em class="emphasis">named.root</EM
> file every few months to keep accurate
root server information in your cache. A bogus root server entry could<a class="indexterm" name="AUTOID-9845"></A
>
cause problems with your local server. The data given above is correct
as of publication, but could change at any time.</P
><p class="para">If your system is not connected to the Internet, it won't be able to
communicate with the root servers. Initializing your cache file with the
servers listed above would be useless. In this case, initialize your
cache with entries that point to the major nameservers on your local
network. Those servers must also be configured to answer queries for
the &quot;root&quot; domain. However, this root domain contains only NS records
pointing to the domain servers on your local network. For example:
assume that <em class="emphasis">nuts.com</EM
> is not connected to the Internet and that
<em class="emphasis">almond</EM
> and <em class="emphasis">pecan</EM
> are going to act as root servers for
this isolated domain. Both servers declare they are primary for
the root domain in their <em class="emphasis">named.boot</EM
> files. They load the root
from a zone file that contains NS records and A records, stating that
they are authoritative for the root and delegating the <em class="emphasis">nuts.com</EM
>
and <em class="emphasis">16.172.in-addr.arpa</EM
> domains to the local nameservers that
service those domains. (How domains are delegated is covered later in
the chapter.) Details of this type of configuration are provided in
<em class="emphasis">DNS and BIND</EM
> by Liu and Albitz (O'Reilly &amp; Associates).<a class="indexterm" name="AUTOID-9856"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-8-SECT-3.4">8.3.4 The named.local File </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-NAMED-LOCAL-FILE"></A
>The <em class="emphasis">named.local</EM
> file is used to convert the address 127.0.0.1<a class="indexterm" name="AUTOID-9863"></A
>
(the &quot;loopback address&quot;) into the name <em class="emphasis">localhost</EM
>. <a class="indexterm" name="AUTOID-9867"></A
>
It's the zone
file for the reverse domain 0.0.127.IN-ADDR.ARPA. Because all systems
use 127.0.0.1 as the &quot;loopback&quot; address, this file is virtually
identical on every server. Here's a sample <em class="emphasis">named.local</EM
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen">@          IN  SOA      almond.nuts.com. jan.almond.nuts.com. (
                        1               ; serial

                        360000          ; refresh every 100 hours
                        3600            ; retry after 1 hour
                        3600000         ; expire after 1000 hours
                        360000          ; default ttl is 100 hours
                        )
           IN  NS       almond.nuts.com.
0          IN  PTR      loopback.
1          IN  PTR      localhost.</PRE
></BLOCKQUOTE
></P
><p class="para">Neither the NS record nor the first PTR record is required. The first
PTR record maps the network 127.0.0.0 to the name <em class="emphasis">loopback</EM
>, which
is an alternative to mapping the network name in the
<em class="emphasis">/etc/networks</EM
> file. Only the SOA record and the second PTR
record are needed. The required PTR record is the same on every host:
host address 1 on network 127.0.0 is mapped to the name
<em class="emphasis">localhost</EM
>.</P
><p class="para">The SOA record's <a class="indexterm" name="AUTOID-9877"></A
>
data fields and the NS record that contains the
computer's hostname vary from system to system. The sample SOA
record identifies <em class="emphasis">almond.nuts.com.</EM
> as the server originating this
zone, and the email address <em class="emphasis">jan.almond.nuts.com.</EM
> as the point of
contact for any questions about the zone. (Note that in an SOA record
the email address is written with a dot separating the recipient's
name from the hostname: <em class="emphasis">jan</EM
> is the user and
<em class="emphasis">almond.nuts.com</EM
> is the host.) Many systems do not include the NS
record; but when it is used, it contains the computer's hostname.
Change these three data fields and you can use this identical file on
any host.</P
><p class="para">The files discussed so far, <em class="emphasis">named.boot</EM
>, <em class="emphasis">named.ca</EM
>, and
<em class="emphasis">named.local</EM
>, are the only files required to configure caching-only
servers and secondary servers. Most of your servers will use only these
files, and the files used will contain almost identical information on
every server.</P
><p class="para">The simplest way to create these three files is to copy a sample file
and modify it for your system. Most systems come with sample files.
If your system doesn't, sample configuration files are available in the<a class="indexterm" name="AUTOID-9888"></A
>
<em class="emphasis">conf/master</EM
> directory
[8]
of the <em class="emphasis">bind.tar.gz</EM
> file. This compressed <b class="emphasis.bold">tar</B
> file can be
obtained via anonymous <b class="emphasis.bold">ftp</B
> from the <em class="emphasis">isc/bind/src</EM
> directory
on <em class="emphasis">ftp.isc.org</EM
>. <a class="indexterm" name="AUTOID-9900"></A
>
The <em class="emphasis">named.local</EM
> file shown above was
derived from the <em class="emphasis">named.local</EM
> sample that comes with BIND.<a class="indexterm" name="AUTOID-9904"></A
></P
><blockquote class="footnote"><p class="para">[8] The sample <em class="emphasis">named.ca</EM
> file in this directory is called
<em class="emphasis">root.cache</EM
>.</P
></BLOCKQUOTE
><p class="para">The remaining <b class="emphasis.bold">named</B
> configuration files, <em class="emphasis">named.hosts</EM
> and
<em class="emphasis">named.rev</EM
>, are more complex, but the relative number of systems
that require these files is small. Only the primary server needs all
of the configuration files, and there should be only one primary server
per zone.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-8-SECT-3.5">8.3.5 The Reverse Domain File </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-REVERSE-DOMAIN-FILES"></A
><a class="indexterm" name="TCP2-CH-8-IX-NAMED-REV-FILE"></A
>The <em class="emphasis">named.rev</EM
> file is very similar in structure to the
<em class="emphasis">named.local</EM
> file. Both of these files translate IP addresses into
hostnames, so both files contain PTR records.</P
><p class="para">The <em class="emphasis">named.rev</EM
> file in our example is the zone file for the
<em class="emphasis">16.172.in-addr.arpa</EM
> domain. The domain administrator creates this
file on <em class="emphasis">almond</EM
>, and every other host that needs this information
gets it from there.</P
><p class="para"><blockquote class="screen"><pre class="screen">;
;        Address to hostname mappings.
;
@       IN      SOA     almond.nuts.com. jan.almond.nuts.com. (
                                10099   ;   Serial
                                43200   ;   Refresh
                                3600    ;   Retry
                                3600000 ;   Expire
                                2592000 ) ; Minimum
                IN      NS      almond.nuts.com.
                IN      NS      filbert.nuts.com.
                IN      NS      foo.army.mil.
1.12            IN      PTR     almond.nuts.com.
2.12            IN      PTR     peanut.nuts.com.
3.12            IN      PTR     pecan.nuts.com.
4.12            IN      PTR     walnut.nuts.com.
2.1             IN      PTR     filbert.nuts.com.
6               IN      NS      salt.plant.nuts.com.
                IN      NS      pecan.nuts.com.</PRE
></BLOCKQUOTE
></P
><p class="para">Like all zone files, the <em class="emphasis">named.rev</EM
> file begins with an SOA
record. <a class="indexterm" name="AUTOID-9927"></A
>
The <code class="literal">@</CODE
> <a class="indexterm" name="AUTOID-9930"></A
><a class="indexterm" name="AUTOID-9933"></A
>
in the name field of the SOA record
references the current domain. In this case it is the domain defined
by the primary statement in our sample <em class="emphasis">named.boot</EM
> file:</P
><p class="para"><blockquote class="screen"><pre class="screen">primary   16.172.IN-ADDR.ARPA              named.rev</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">@</CODE
> in the SOA record allows the primary statement to define
the zone file domain. This same SOA record is used on every zone; it
always references the correct domain name because it references the
domain defined for that particular zone file in <em class="emphasis">named.boot</EM
>.
Change the hostname (<em class="emphasis">almond.nuts.com.</EM
>) and the manager's
mail address (<em class="emphasis">jan.almond.nuts.com.</EM
>), and use this SOA record in
any of your zone files.</P
><p class="para">The NS records <a class="indexterm" name="AUTOID-9945"></A
>
that follow the SOA record define the nameservers for
the domain. Generally the nameservers are listed immediately after the
SOA, before any other record has the chance to modify the domain name.
Recall that a blank name field means that the last domain name is still
in force. The SOA's domain reference is still in force because the
following NS records have blank name fields.</P
><p class="para">PTR records <a class="indexterm" name="AUTOID-9948"></A
>
dominate the <em class="emphasis">named.rev</EM
> file because they are used to
translate addresses to hostnames. The PTR records in our example
provide address-to-name conversions for hosts 12.1, 12.2, 12.3, 12.4,
and 2.1 on network 172.16. Because they don't end in dots, the
values in the
name fields of these PTR records are relative to the current domain. 
For example, the value 3.12 is interpreted as
<em class="emphasis">3.12.16.172.in-addr.arpa.</EM
>  The host
name in the data field of the PTR record is fully qualified to prevent
it from being relative to the current domain name. Using the
information in this PTR, <b class="emphasis.bold">named</B
> will translate
<em class="emphasis">3.12.16.172.in-addr.arpa</EM
> into <em class="emphasis">pecan.nuts.com.</EM
></P
><p class="para">The last two lines of this file are additional NS records. As with any
domain, subdomains can be created in an <em class="emphasis">in-addr.arpa</EM
> domain. <a class="indexterm" name="AUTOID-9957"></A
>
This is what the last two NS records do. These NS records point to
<em class="emphasis">pecan</EM
> and <em class="emphasis">salt</EM
> as nameservers for the subdomain
<em class="emphasis">6.16.172.in-addr.arpa</EM
>. Any query for information in the
<em class="emphasis">6.16.172.in-addr.arpa</EM
> subdomain is referred to them. NS records
that point to the servers for a subdomain must be placed in the
higher-level domain before you can use that subdomain.</P
><p class="para">Subdomains <a class="indexterm" name="AUTOID-9965"></A
>
in the <em class="emphasis">in-addr.arpa</EM
> domain are not as common or as useful as
subdomains in the host namespace. Domain names and IP addresses are
not the same thing, and do not have the same structure.  When an IP
address is turned into an <em class="emphasis">in-addr.arpa</EM
> domain name, the four
bytes of the address are treated as four distinct pieces. In reality,
the IP address is 32 contiguous bits. Subnets divide up the IP address
space and subnet masks are bit-oriented, which does not limit them to
byte boundaries. <em class="emphasis">in-addr.arpa</EM
> subdomains divide up the domain
name space and can only occur at a full byte boundary because each
byte of the address is treated as a distinct &quot;name.&quot;<a class="indexterm" name="AUTOID-9970"></A
><a class="indexterm" name="AUTOID-9971"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="TCP2-CH-8-SECT-3.6">8.3.6 The named.hosts File </A
></H3
><p class="para"><a class="indexterm" name="TCP2-CH-8-IX-NAMED-HOSTS-FILE"></A
>The <em class="emphasis">named.hosts</EM
> file contains most of the domain information.
This file converts hostnames to IP addresses, so A records
predominate; but it also contains MX, CNAME, and other records. The
<em class="emphasis">named.hosts</EM
> file, like the <em class="emphasis">named.rev</EM
> file, is only created
on the primary server. All others servers get this information from the
primary server.</P
><p class="para"><blockquote class="screen"><pre class="screen">;
;       Addresses and other host information.
;
@       IN      SOA     almond.nuts.com. jan.almond.nuts.com. (
                                10118      ; Serial
                                43200      ; Refresh
                                3600       ; Retry
                                3600000    ; Expire
                                2592000 )  ; Minimum
;	Define the nameservers and the mail servers
                IN      NS      almond.nuts.com.
                IN      NS      filbert.nuts.com.
                IN      NS      foo.army.mil.
                IN      MX      10 almond.nuts.com.
                IN      MX      20 pecan.nuts.com.
;
;       Define localhost
;
localhost       IN      A       127.0.0.1
;
;       Define the hosts in this zone
;
almond          IN      A       172.16.12.1
                IN      MX      5 almond.nuts.com.
loghost         IN      CNAME   almond.nuts.com.
peanut          IN      A       172.16.12.2
                IN      MX      5 almond.nuts.com.
goober          IN      CNAME   peanut.nuts.com.
pecan           IN      A       172.16.12.3
walnut          IN      A       172.16.12.4
filbert         IN      A       172.16.1.2
;       host table has BOTH host and gateway entries for 10.104.0.19
mil-gw          IN      A       10.104.0.19
;
;    Glue records for servers within this domain
;
pack.plant      IN      A       172.16.18.15
acorn.sales     IN      A       172.16.6.1
;
;       Define sub-domains
;
plant           IN      NS      pack.plant.nuts.com.
                IN      NS      pecan.nuts.com.
sales           IN      NS      acorn.sales.nuts.com.
                IN      NS      pack.plant.nuts.com.</PRE
></BLOCKQUOTE
></P
><p class="para">Like the <em class="emphasis">named.rev</EM
> file, the <em class="emphasis">named.hosts</EM
> file begins with<a class="indexterm" name="AUTOID-9985"></A
>
an SOA record and a few NS records <a class="indexterm" name="AUTOID-9987"></A
>
that define the domain and its
servers, but the <em class="emphasis">named.hosts</EM
> file contains a wider variety of
resource records than a <em class="emphasis">named.rev</EM
> file does. We'll look at each
of these records in the order in which they occur in the sample file, so
that you can follow along using the sample file as your reference.</P
><p class="para">The first MX record <a class="indexterm" name="AUTOID-9992"></A
><a class="indexterm" name="AUTOID-9994"></A
>
identifies a mail server for the entire domain.
This record says that <em class="emphasis">almond</EM
> is the mail server for <em class="emphasis">nuts.com</EM
>
with a preference of 10. Mail addressed to <em class="emphasis">user@nuts.com</EM
>
is redirected to <em class="emphasis">almond</EM
> for delivery. Of course for <em class="emphasis">almond</EM
>
to successfully deliver the mail, it must be properly configured as
a mail server. The MX record is only part of the story. We look at
configuring <b class="emphasis.bold">sendmail</B
> in <a class="xref" href="ch10_01.htm" title="sendmail ">Chapter 10, <cite class="chapter">sendmail </CITE
></A
>.</P
><p class="para">The second MX record identifies <em class="emphasis">pecan</EM
> as a mail server for
<em class="emphasis">nuts.com</EM
> with a preference of 20. Preference numbers let you
define alternate mail servers. The lower the preference number,
the more desirable the server. Therefore, our two sample MX records
say &quot;send mail for the <em class="emphasis">nuts.com</EM
> domain to <em class="emphasis">almond</EM
> first;
if <em class="emphasis">almond</EM
> is unavailable, try sending the mail to <em class="emphasis">pecan</EM
>.&quot;
Rather than relying on a single mail server, preference numbers allow
you to create backup servers. If the main mail server is unreachable,
the domain's mail is sent to one of the backups instead.</P
><p class="para">These sample MX records redirect mail addressed to <em class="emphasis">nuts.com</EM
>, but
mail addressed to <em class="emphasis">user@walnut.nuts.com</EM
> will still be sent
directly to <em class="emphasis">walnut.nuts.com</EM
>&nbsp;- not to <em class="emphasis">almond</EM
> or <em class="emphasis">pecan</EM
>.
This configuration allows simplified mail addressing in the form
<em class="emphasis">user@</EM
><em class="emphasis">nuts.com</EM
> for those who want to take advantage of it,
but it continues to allow direct mail delivery to individual hosts for
those who wish to take advantage of that.</P
><p class="para">The first A record in this example defines the address for
<em class="emphasis">localhost</EM
>. This is the opposite of the PTR entry in the
<em class="emphasis">named.local</EM
> file. It allows users within the <em class="emphasis">nuts.com</EM
> domain
to enter the name <em class="emphasis">localhost</EM
> and have it resolved to the address
127.0.0.1 by the local nameserver.</P
><p class="para">The next A record defines the IP address for <em class="emphasis">almond</EM
>. (Note that
the records that relate to a single host are grouped together, which
is the most common structure used in zone files.) The A record is
followed by an MX record and a CNAME record that both relate to
<em class="emphasis">almond</EM
>. The <em class="emphasis">almond</EM
> MX record points back to the host
itself, and the CNAME record <a class="indexterm" name="AUTOID-10027"></A
>
defines an alias for the host name.<a class="indexterm" name="AUTOID-10029"></A
></P
><p class="para">This host-specific MX record is provided as a courtesy to remote
mailers. Some
mailer implementations look for an MX record first, and then query for
the host's address. Providing an MX record saves these mailers one
additional nameserver query.  </P
><p class="para"><em class="emphasis">peanut</EM
>'s A record is also followed by an MX record and a CNAME
record. However, <em class="emphasis">peanut</EM
>'s MX record serves a different purpose.
It directs all mail addressed to <em class="emphasis">user@peanut.nuts.com</EM
> to
<em class="emphasis">almond</EM
>. This MX record is required because the MX records at
the beginning of the zone file redirect mail only if it is addressed
to <em class="emphasis">user@nuts.com</EM
>. If you also want to redirect mail
addressed to <em class="emphasis">peanut</EM
>, you need a &quot;peanut-specific&quot; MX record.</P
><p class="para">The name field of the CNAME record contains an alias for the official
hostname. The official name, called the canonical name, is provided
in the data field of the record. Because of these records, <em class="emphasis">almond</EM
>
can be referred to by the name <em class="emphasis">loghost</EM
>, and <em class="emphasis">peanut</EM
> can be
referred to as <em class="emphasis">goober</EM
>.
The <em class="emphasis">loghost</EM
>
alias
is a generic hostname used to direct
<b class="emphasis.bold">syslogd</B
> output to <em class="emphasis">almond</EM
>.
[9]
Hostname aliases should <em class="emphasis">not</EM
> be used in other resource
records.
[10]
For example, don't use an alias as the name of a mail
server in an MX record. Use <em class="emphasis">only</EM
> the &quot;canonical&quot; (official)
name that's defined in an A record.</P
><blockquote class="footnote"><p class="para">[9] See <a class="xref" href="ch03_01.htm" title="Network Services">Chapter 3</A
> for a further discussion of generic hostnames.</P
><p class="para">[10] See <a class="xref" href="appc_01.htm" title="A named Reference">Appendix C</A
> for additional information about using CNAME records
in the <em class="emphasis">named.hosts</EM
> file.</P
></BLOCKQUOTE
><p class="para">Your <em class="emphasis">named.hosts</EM
> file will be much larger than the sample file
we've discussed, 
but it will contain essentially the same records. If you know the
names and addresses of the hosts in your domain, you have most of the
information necessary to create the <b class="emphasis.bold">named</B
> configuration.<a class="indexterm" name="AUTOID-10060"></A
></P
><div class="sect3"><h4 class="sect3"><a class="title" name="TCP2-CH-8-SECT-3.6.1">8.3.6.1 Starting named </A
></H4
><p class="para">After you construct the <em class="emphasis">named.boot</EM
> file and the required zone
files, start <b class="emphasis.bold">named</B
>. <b class="emphasis.bold">named</B
> is usually started at boot time<a class="indexterm" name="AUTOID-10067"></A
>
from a startup script, <a class="indexterm" name="AUTOID-10070"></A
>
but it can be started at the command prompt:</P
><p class="para"><blockquote class="screen"><pre class="screen"># <code class="userinput"><b>named</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The first time you run it, watch for error messages. <b class="emphasis.bold">named</B
> logs
errors to the <em class="emphasis">messages</EM
> file.
[11]
Once <b class="emphasis.bold">named</B
> is running to your satisfaction, use <b class="emphasis.bold">nslookup</B
> to
query the nameserver to make sure it is providing the correct
information.<a class="indexterm" name="AUTOID-10083"></A
></P
><blockquote class="footnote"><p class="para">[11] This file if found at <em class="emphasis">/usr/adm/messages</EM
> on both our Linux and
Solaris sample systems but it might be located somewhere else on your
system. Check your system's documentation.</P
></BLOCKQUOTE
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch08_02.htm#TCP2-CH-8-SECT-2.1" title="8.2 Configuring the Resolver "><img src="../gifs/txtpreva.gif" alt="Previous: 8.2 Configuring the Resolver " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="TCP/IP Network Administration"><img src="../gifs/txthome.gif" alt="TCP/IP Network Administration" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch08_04.htm" title="8.4 Using nslookup "><img src="../gifs/txtnexta.gif" alt="Next: 8.4 Using nslookup " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">8.2 Configuring the Resolver </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">8.4 Using nslookup </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="../smdref/index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
