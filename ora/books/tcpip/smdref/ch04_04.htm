<html><head>
<title>[Chapter 4] 4.4 Virtual User Tables</TITLE>
<meta name="DC.title" content="sendmail Desktop Reference"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:04:36Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-278-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch04_01.htm" title="4. Configuring with m4"><link rel="prev" href="ch04_03.htm" title="4.3 MAILER Declarations"><link rel="next" href="ch04_05.htm" title="4.5 Mailer Tables"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail Desktop Reference" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail Desktop Reference"><area shape="RECT" coords="467,0,514,18" href="../search/rsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_03.htm" title="4.3 MAILER Declarations"><img src="../gifs/txtpreva.gif" alt="Previous: 4.3 MAILER Declarations" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 4<br>Configuring with m4</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_05.htm" title="4.5 Mailer Tables"><img src="../gifs/txtnexta.gif" alt="Next: 4.5 Mailer Tables" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SMQR-CH-4-SECT-4">4.4 Virtual User Tables</A
></H2
><p class="para">When using FEATURE(virtusertable),
<em class="emphasis">sendmail</EM
> will do translation based on the entire domain name
when the address is first read.
This is similar, but not identical, to aliasing.
It is commonly used to host multiple domains with different
(and possibly even overlapping) users
on one machine using MX records.
The format of the input file (e.g., <em class="emphasis">/etc/virtusertable</EM
>)
is:</P
><p class="para"><blockquote class="screen"><pre class="screen">[<code class="replaceable"><i>virtuser</I
></CODE
>]<b class="emphasis.bold">@</B
><code class="replaceable"><i>virtdomain   address</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">For example, an input file might read:</P
><p class="para"><blockquote class="screen"><pre class="screen">info@foo.com    foo-info
info@bar.com    bar-info
john@foo.com    jdoe
jane@foo.com    jroe@elsewhere.com
@bar.com        mary</PRE
></BLOCKQUOTE
></P
><p class="para">The first two entries translate <em class="emphasis">info@foo.com</EM
> and <em class="emphasis">info@bar.com</EM
>
into different names, which may be user names or aliases.
The third and fourth entries alias users to other names.
The fifth entry says that <em class="emphasis">anything@bar.com</EM
>
that wasn't otherwise recognized
should go to <em class="emphasis">mary</EM
>.</P
><p class="para">You build the database from the input file using the <em class="emphasis">makemap</EM
>(1) program:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>makemap hash </B
></CODE
><code class="replaceable"><i>/etc/virtusertable </I
></CODE
><code class="userinput"><b>&lt; </B
></CODE
><code class="replaceable"><i>/etc/virtusertable</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">You declare the database for use with your <em class="emphasis">.mc</EM
> file, like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">FEATURE(virtusertable, hash <code class="replaceable"><i>/etc/virtusertable</I
></CODE
>)</PRE
></BLOCKQUOTE
></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_03.htm" title="4.3 MAILER Declarations"><img src="../gifs/txtpreva.gif" alt="Previous: 4.3 MAILER Declarations" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail Desktop Reference"><img src="../gifs/txthome.gif" alt="sendmail Desktop Reference" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_05.htm" title="4.5 Mailer Tables"><img src="../gifs/txtnexta.gif" alt="Next: 4.5 Mailer Tables" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">4.3 MAILER Declarations</TD
><td align="CENTER" valign="TOP" width="171">&nbsp;</TD
><td align="RIGHT" valign="TOP" width="172">4.5 Mailer Tables</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
