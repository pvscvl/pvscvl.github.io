<html><head>
<title>[Chapter 2] 2.8 Rule Sets</TITLE>
<meta name="DC.title" content="sendmail Desktop Reference"><meta name="DC.creator" content="Bryan Costales &amp; Eric Allman"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1999-02-04T00:04:23Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-278-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" title="2. The sendmail.cf File"><link rel="prev" href="ch02_07.htm" title="2.7 The Timeout Option"><link rel="next" href="ch02_09.htm" title="2.9 Delivery Agent S= and R="></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" alt="sendmail Desktop Reference" usemap="#srchmap" border="0"></H1
><map name=index.html"srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" alt="sendmail Desktop Reference"><area shape="RECT" coords="467,0,514,18" href="../search/rsrch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_07.htm" title="2.7 The Timeout Option"><img src="../gifs/txtpreva.gif" alt="Previous: 2.7 The Timeout Option" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 2<br>The sendmail.cf File</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_09.htm" title="2.9 Delivery Agent S= and R="><img src="../gifs/txtnexta.gif" alt="Next: 2.9 Delivery Agent S= and R=" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SMQR-CH-2-SECT-8">2.8 Rule Sets</A
></H2
><p class="para">Rule sets are declared in the configuration file by beginning a line
with the letter <code class="literal">S</CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"><b class="emphasis.bold">S</B
><code class="replaceable"><i>number</I
></CODE
>
<b class="emphasis.bold">S</B
><code class="replaceable"><i>name</I
></CODE
>
<b class="emphasis.bold">S</B
><code class="replaceable"><i>name</I
></CODE
><b class="emphasis.bold">=</B
><code class="replaceable"><i>number</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Rule sets are identified either by <em class="emphasis">number</EM
> or symbolic <em class="emphasis">name</EM
>.
When identified by name, a number is internally assigned by
<em class="emphasis">sendmail</EM
>. An optional <b class="emphasis.bold">=</B
> and number may
follow a name to force specific association of number to name.</P
><p class="para">Rule sets numbered 0 through 9 are reserved for <em class="emphasis">sendmail</EM
>'s internal use.
Addresses are rewritten by a specific sequence of rules numbered
0 through 4 (see
<a class="xref" href="#SMQR-CH-2-FIG-1" title="Sequence of rule sets; envelope (solid) versus header (dashed)">Figure 2.1</A
>).</P
><h4 class="figure"><a class="title" name="SMQR-CH-2-FIG-1">Figure 2.1: Sequence of rule sets; envelope (solid) versus header (dashed)</A
></H4
><img class="graphic" src="figs/smq_0201.gif" alt="Figure 2.1"><dl class="variablelist"><dt class="term"><b class="emphasis.bold">S3</B
></DT
><dd class="listitem"><p class="para">Rewrites all addresses to prepare them for entry into the sequence
for rule sets. It usually focuses on the host part of an address
and detects the various forms of the local hostname, so that
local delivery can take place
(see &#167;29.4).&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">S4</B
></DT
><dd class="listitem"><p class="para">Undoes any special rewriting done by rule set 3.
Rule set 4 is always last
(see &#167;29.5).&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">S0</B
></DT
><dd class="listitem"><p class="para">Selects a delivery agent that determines the <b class="emphasis.bold">R=</B
> and <b class="emphasis.bold">S=</B
>
rule sets. It also selects the recipient user (which is separately
rewritten and placed into <b class="emphasis.bold">$u</B
>) and the recipient host (which
is placed as-is into <b class="emphasis.bold">$h</B
>).
(See &#167;.29.6)&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">S1</B
></DT
><dd class="listitem"><p class="para">Rewrites all sender addresses
(see &#167;29.9).&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">S2</B
></DT
><dd class="listitem"><p class="para">Rewrites all recipient addresses
(see &#167;29.8).&#13;</P
></DD
><dt class="term"><b class="emphasis.bold">S5</B
></DT
><dd class="listitem"><p class="para">&#13;(Not shown in  
<a class="xref" href="#SMQR-CH-2-FIG-1" title="Sequence of rule sets; envelope (solid) versus header (dashed)">Figure 2.1</A
>.)
Can select a new delivery agent (just like rule set 0).
If the address is <em class="emphasis">not</EM
> matched in the <em class="emphasis">aliases</EM
>(5) database,
it is passed to rule set 5. Addresses are given to rule set 5 before
<em class="emphasis">~/.forward</EM
> files are processed
(see &#167;29.7).</P
></DD
></DL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_07.htm" title="2.7 The Timeout Option"><img src="../gifs/txtpreva.gif" alt="Previous: 2.7 The Timeout Option" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" title="sendmail Desktop Reference"><img src="../gifs/txthome.gif" alt="sendmail Desktop Reference" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_09.htm" title="2.9 Delivery Agent S= and R="><img src="../gifs/txtnexta.gif" alt="Next: 2.9 Delivery Agent S= and R=" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">2.7 The Timeout Option</TD
><td align="CENTER" valign="TOP" width="171">&nbsp;</TD
><td align="RIGHT" valign="TOP" width="172">2.9 Delivery Agent S= and R=</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><p class="nav"><font size="-1">[ <a href="../index.htm" title="The Networking CD Bookshelf">Library Home</A
> | <a href="../dnsbind/index.htm" title="DNS &amp; BIND">DNS &amp; BIND</A
> | <a href="../tcpip/index.htm" title="TCP/IP Network Administration">TCP/IP</A
> | <a href="../sendmail/index.htm" title="sendmail">sendmail</A
> | <a href="index.htm" title="sendmail Desktop Reference">sendmail Reference</A
> | <a href="../firewall/index.htm" title="Building Internet Firewalls">Firewalls</A
> | <a href="../puis/index.htm" title="Practical UNIX &amp; Internet Security">Practical Security</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
