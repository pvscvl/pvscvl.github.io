<html>
<head>
<title>[Chapter 6] 6.5 Frames</TITLE>
<meta name="author" content="John Zukowski">
<meta name="date" content="Thu Jul 31 14:36:54 1997">
<meta name="form" content="html">
<meta name="metadata" content="dublincore.0.1">
<meta name="objecttype" content="book part">
<meta name="otheragent" content="gmat dbtohtml">
<meta name="publisher" content="O'Reilly &amp; Associates, Inc.">
<meta name="source" content="SGML">
<meta name="subject" content="Java AWT">
<meta name="title" content="Java AWT">
<meta http-equiv="index.htmlContent-Script-Type" content="text/javascript">
</HEAD>
<body bgcolor="#FFFFFF">

<div class=htmlnav>
<h1><a href='index.htm'><img src="gifs/smbanner.gif" alt="Java AWT" border=0></a></H1>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch06_04.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 6<br>Containers</FONT></B></TD>
<td width=172 align=right valign=top><a href="ch06_06.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
</table>

&nbsp;
<hr align=left width=515>
</DIV>
<div class=sect1>
<h2 class=sect1><a class="TITLE" name="JAWT-CH-6-SECT-5">6.5 Frames</A></h2>

<p class=para>
<a name="CH06.FRAME"></A>The <tt class=literal>Frame</tt> is a special type 
of <tt class=literal>Window</tt> that looks like other 
high level programs in your windowing environment. It adds a <tt class=literal>MenuBar</tt>, 
window title, and window gadgets (like resize, maximize, minimize, window 
menu) to the basic <tt class=literal>Window</tt> object. 
All the menu-related pieces are discussed in <a href="ch10_01.htm">Chapter 10, <i>Would You Like to Choose from the Menu?</i></A> 

<p class=para>
The default layout manager for a <tt class=literal>Frame</tt> 
is <tt class=literal>BorderLayout</tt>. 

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JAWT-CH-6-SECT-5.1">Frame Constants</A></h3><a name="CH06.FRAMECLASS"></A>

<p class=para>
The <tt class=literal>Frame</tt> class includes a number of constants used
to specify cursors.  These constants are left over from Java 1.0 and
maintained for compatibility.  In Java 1.1, you should use the new
<tt class=literal>Cursor</tt> class, introduced in the previous chapter,
and the <tt class=literal>Component.setCursor()</tt> method to change the
cursor over a frame. Avoid using the <tt class=literal>Frame</tt>
constants for new code. To see these cursors, refer to <a href="ch05_07.htm">Figure 5.6</A>.

<div class=simplelist>

<p>
<i class=emphasis>public final static int DEFAULT_CURSOR </I><br>
<i class=emphasis>public final static int CROSSHAIR_CURSOR </I><br>
<i class=emphasis>public final static int TEXT_CURSOR </I><br>
<i class=emphasis>public final static int WAIT_CURSOR </I><br>
<i class=emphasis>public final static int SW_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int SE_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int NW_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int NE_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int N_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int S_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int W_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int E_RESIZE_CURSOR </I><br>
<i class=emphasis>public final static int HAND_CURSOR </I><br>
<i class=emphasis>public final static int MOVE_CURSOR </I><br>
</DIV>

<div class=note>
<p class=note><blockquote><p><b>NOTE:</B> 
</blockquote><p>
</DIV>

<p class=para>
<tt class=literal>HAND_CURSOR</tt> and 
<tt class=literal>MOVE_CURSOR</tt> are not available 
on Windows platforms with Java 1.0. If you ask to use these and they are 
not available, you get <tt class=literal>DEFAULT_CURSOR</tt>. 
</blockquote><p>
</DIV>

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JAWT-CH-6-SECT-5.2">Frame Constructors</A></h3>

<dl class=variablelist>
<dt class=varlistentry><i class=emphasis>public Frame () </I><br>
<dd>

<p class=para>
The constructor for <tt class=literal>Frame</tt> creates 
a hidden window with a window title of "Untitled" (&nbsp;&nbsp;Java1.0) 
or an empty string (&nbsp;&nbsp;Java1.1). Like <tt class=literal>Window</tt>, 
the default <tt class=literal>LayoutManager</tt> of 
a <tt class=literal>Frame</tt> is <tt class=literal>BorderLayout</tt>. 
<tt class=literal>DEFAULT_CURSOR</tt> is the initial cursor. 
To position the <tt class=literal>Frame</tt> on the 
screen, call <tt class=literal>Component.move()</tt>. 
Since the <tt class=literal>Frame</tt> is initially 
hidden, you need to call the <tt class=literal>show()</tt> 
method before the user sees the <tt class=literal>Frame</tt>. 

<p>
<dt class=varlistentry><i class=emphasis>public Frame (String title) </I><br>
<dd>

<p class=para>
This version of <tt class=literal>Frame</tt>'s constructor is identical to the first but 
sets the window title to <tt class=literal>title</tt>. 
<a href="#JAWT-CH-6-FIG-3">Figure 6.3</A> shows the results of a call to <tt class=literal>new 
Frame("My Frame")</tt> followed by <tt class=literal>resize()</tt> 
and <tt class=literal>show()</tt>. </DL>
<div class=figure>
<h4 class=figure><a class="TITLE" name="JAWT-CH-6-FIG-3">Figure 6.3: A typical Frame</A></h4>


<p>
<img align=middle src="figs/jawt0603.gif" alt="[Graphic: Figure 6-3]" width=185 height=185 border=0>

</DIV>

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JAWT-CH-6-SECT-5.3">Frame Methods</A></h3>

<dl class=variablelist>
<dt class=varlistentry><i class=emphasis>public String getTitle () </I><br>
<dd>

<p class=para>
The <tt class=literal>getTitle()</tt> method returns 
the current title for the <tt class=literal>Frame</tt>. 
If there is no title, this method returns <tt class=literal>null</tt>. 

<p>
<dt class=varlistentry><i class=emphasis>public void setTitle (String title) </I><br>
<dd>

<p class=para>
The <tt class=literal>setTitle()</tt> method changes 
the <tt class=literal>Frame</tt>'s title to 
<tt class=literal>title</tt>. 

<p>
<dt class=varlistentry><i class=emphasis>public Image getIconImage () </I><br>
<dd>

<p class=para>
The <tt class=literal>getIconImage()</tt> method returns 
the image used as the icon. Initially, this returns <tt class=literal>null</tt>. 
For some platforms, the method should not be used because the platform 
does not support the concept. 

<p>
<dt class=varlistentry><i class=emphasis>public void setIconImage (Image image) </I><br>
<dd>

<p class=para>
The <tt class=literal>setIconImage()</tt> method changes 
the image to display when the <tt class=literal>Frame</tt> 
is iconified to <tt class=literal>image</tt>. Not 
all platforms utilize this resource. 

<p>
<dt class=varlistentry><i class=emphasis>public MenuBar getMenuBar () </I><br>
<dd>

<p class=para>
The <tt class=literal>getMenuBar()</tt> method retrieves 
the <tt class=literal>Frame</tt>'s current menu 
bar. 

<p>
<dt class=varlistentry><i class=emphasis>public synchronized void setMenuBar (MenuBar bar) </I><br>
<dd>

<p class=para>
The <tt class=literal>setMenuBar()</tt> method changes the menu bar of the
<tt class=literal>Frame</tt> to <tt class=literal>bar</tt>. If
<tt class=literal>bar</tt> is <tt class=literal>null</tt>, it removes the menu
bar so that none is available. It is possible to have multiple menu
bars based upon the context of the application. However, the same menu
bar cannot appear on multiple frames and only one can appear at a
time. The <tt class=literal>MenuBar</tt> class, and everything to do with
menus, is covered in <a href="ch10_01.htm">Chapter 10, <i>Would You Like to Choose from the Menu?</i></A>. 

<p>
<dt class=varlistentry><i class=emphasis>public synchronized void remove (MenuComponent component) </I><br>
<dd>

<p class=para>
The <tt class=literal>remove()</tt> method removes 
<tt class=literal>component</tt> from <tt class=literal>Frame</tt> 
if <tt class=literal>component</tt> is the frame's 
menu bar. This is equivalent to calling <tt class=literal>setMenuBar()</tt> 
with a parameter of <tt class=literal>null</tt> and 
in actuality is what <tt class=literal>remove()</tt> 
calls. 

<p>
<dt class=varlistentry><i class=emphasis>public synchronized void dispose () </I><br>
<dd>

<p class=para>
The <tt class=literal>dispose()</tt> method frees 
up the system resources used by the <tt class=literal>Frame</tt>. 
If any <tt class=literal>Dialogs</tt> or <tt class=literal>Windows</tt> 
are associated with this <tt class=literal>Frame</tt>, 
their resources are freed, too. Some people like to call <tt class=literal>Component.hide()</tt> 
before calling the <tt class=literal>dispose()</tt> method so 
users do not see the frame decomposing. 

<p>
<dt class=varlistentry><i class=emphasis>public boolean isResizable () </I><br>
<dd>

<p class=para>
The <tt class=literal>isResizable()</tt> method will 
tell you if the current <tt class=literal>Frame</tt> 
is resizable. 

<p>
<dt class=varlistentry><i class=emphasis>public void setResizable (boolean resizable) </I><br>
<dd>

<p class=para>
The <tt class=literal>setResizable()</tt> method changes 
the resize state of the <tt class=literal>Frame</tt>. 
A <tt class=literal>resizable</tt> value of <tt class=literal>true</tt> 
means the user can resize the <tt class=literal>Frame</tt>, 
<tt class=literal>false</tt> means the user cannot. 
This must be set before the <tt class=literal>Frame</tt> 
is shown or the peer created. 

<p>
<dt class=varlistentry><i class=emphasis>public void setCursor (int cursorType) </I><br>
<dd>

<p class=para>
The <tt class=literal>setCursor()</tt> method changes 
the cursor of the <tt class=literal>Frame</tt> to 
<tt class=literal>cursorType</tt>. <tt class=literal>cursorType</tt> 
must be one of the cursor constants provided with the <tt class=literal>Frame</tt> 
class. You cannot create your own cursor image yet. When changing from 
the <tt class=literal>DEFAULT_CURSOR</tt> to another 
cursor, the mouse must be moved for the cursor icon to change to the new 
cursor. If <tt class=literal>cursorType</tt> is not 
one of the predefined cursor types, <tt class=literal>setCursor()</tt> 
throws the <tt class=literal>IllegalArgumentException</tt> run-time exception. 

<p class=para>
This method has been replaced by the <tt class=literal>Component.setCursor()</tt> 
method. Both function equivalently, but this method is being phased out. 

<p>
<dt class=varlistentry><i class=emphasis>public int getCursorType () </I><br>
<dd>

<p class=para>
The <tt class=literal>getCursorType()</tt> method 
retrieves the current cursor. 

<p class=para>
This method has been replaced by the <tt class=literal>Component.getCursor()</tt> 
method. Both function equivalently, but this method is being phased out. </DL>
Miscellaneous methods

<p>
<dl class=variablelist>
<dt class=varlistentry><i class=emphasis>public synchronized void addNotify () </I><br>
<dd>

<p class=para>
The <tt class=literal>addNotify()</tt> method creates 
the <tt class=literal>Frame</tt> peer. This 
is automatically done when you call the <tt class=literal>show()</tt> 
method of the <tt class=literal>Frame</tt>. If you 
override this method, first call <tt class=literal>super.addNotify()</tt>, 
then add your customizations for the new class. Then you can do everything 
you need to do with the information about the newly created peer. 

<p>
<dt class=varlistentry><i class=emphasis>protected String paramString () </I><br>
<dd>

<p class=para>
When you call the <tt class=literal>toString()</tt> 
method of <tt class=literal>Frame</tt>, the default 
<tt class=literal>toString()</tt> method of <tt class=literal>Component</tt> 
is called. This in turn calls <tt class=literal>paramString()</tt>, 
which builds up the string to display. At the <tt class=literal>Frame</tt> 
level, <tt class=literal>paramString()</tt> appends 
<tt class=literal>resizable</tt> (if <tt class=literal>true</tt>) 
and the <tt class=literal>title</tt> (if present). Using the default <tt class=literal>Frame</tt> 
constructor, the results would be: 

<div class=screen>
<p>
<pre>
java.awt.Frame[0,0,0x0,invalid,hidden,layout=java.awt.BorderLayout,
resizable,title=]
</PRE>
</DIV>

<p class=para>
Until the <tt class=literal>Frame</tt> is shown, via 
<tt class=literal>show()</tt>, the position and size 
are not known and therefore appear as zeros. After showing the <tt class=literal>Frame</tt>, 
you might see: </DL>
<div class=screen>
<p>
<pre>
java.awt.Frame[44,44,300x300,layout=java.awt.BorderLayout,
resizable,title=]
</PRE>
</DIV>

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JAWT-CH-6-SECT-5.4">Frame Events</A></h3>

<p class=para>
In Java 1.0, a <tt class=literal>Frame</tt> peer generates all the events that 
are generated by the <tt class=literal>Component</tt> 
class; it does not generate events that are specific to a particular type 
of component. That is, it generates key events, mouse events, and focus 
events; it doesn't generate action events or list events. If an event 
happens within a child component of a <tt class=literal>Frame</tt>, 
the target of the event is the child component, not the <tt class=literal>Frame</tt>.Window

<p class=para>
In addition to the <tt class=literal>Component</tt> 
events, <tt class=literal>Frame</tt> generates the 
<tt class=literal>WINDOW</tt> events. These events are <tt class=literal>WINDOW_DESTROY</tt>, 
<tt class=literal>WINDOW_EXPOSE</tt>, <tt class=literal>WINDOW_ICONIFY</tt>, 
<tt class=literal>WINDOW_DEICONIFY</tt>, and <tt class=literal>WINDOW_MOVED</tt>. 

<p class=para>
One common event, <tt class=literal>WINDOW_DESTROY</tt>, 
is generated when the user tries to close the <tt class=literal>Frame</tt> 
by selecting Quit, Close, or Exit 
(depending on your windowing environment) from the window manager's 
menu. By default, this event does nothing. You must provide an event handler 
that explicitly closes the <tt class=literal>Frame</tt>. 
If you do not, your <tt class=literal>Frame</tt> will 
close only when the Java Virtual Machine exits--for example, when 
you quit Netscape Navigator. The <tt class=literal>handleEvent()</tt> 
method in the following example, or one like it, should therefore be included in all 
classes that extend <tt class=literal>Frame</tt>. 
If a <tt class=literal>WINDOW_DESTROY</tt> event occurs, 
it gets rid of the <tt class=literal>Frame</tt> and exits the program. Make sure your method calls 
<tt class=literal>super.handleEvent()</tt> to process 
the other events. 

<div class=screen>
<p>
<pre>
public boolean handleEvent (Event e) {
    if (e.id == Event.WINDOW_DESTROY) {
        hide();
        dispose();
        System.exit(0);
        return true;          // boolean method, must return something
    } else {
                              // handle other events we find interesting
    }
                              // make sure normal event processing happens
    return super.handleEvent (e);
}
</PRE>
</DIV>

Listeners and 1.1 event handling

<p class=para>
With the 1.1 event model, you register listeners for different event types; 
the listeners are told when the event happens. The <tt class=literal>Frame</tt> class inherits all its listener handling from <tt class=literal>Window</tt>.

<p class=para>
Here's the Java 1.1 code necessary to handle <tt class=literal>WINDOW_CLOSING</tt> 
events; it is equivalent to the <tt class=literal>handleEvent()</tt> 
method in the previous example. First, you must add the following line to the <tt class=literal>Frame</tt>'s 
constructor: 

<div class=screen>
<p>
<pre>
enableEvents (AWTEvent.WINDOW_EVENT_MASK);
</PRE>
</DIV>

<p class=para>
This line guarantees that we will receive window events, even if there 
is no listener. The <tt class=literal>processWindowEvent()</tt> 
method in the following code does the actual work of closing things down: 

<div class=screen>
<p>
<pre>
// Java 1.1 only
protected void processWindowEvent(WindowEvent e) {
    if (e.getID() == WindowEvent.WINDOW_CLOSING) {
        // Notify others we are closing
        if (windowListener != null)
            windowListener.windowClosing(e);
        System.exit(0);
    } else {
        super.processEvent(e);
    }
}
</PRE>
</DIV>

<p class=para>
If you forget to enable events, <tt class=literal>processWindowEvent()</tt> 
may never be called, and your windows will not shut down until the Java 
Virtual Machine exits. All subclasses of <tt class=literal>Frame</tt> 
should include code like this to make sure they terminate gracefully. 

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JAWT-CH-6-SECT-5.5">Building a New Component from a Window</A></h3>

<p class=para>
Now that we have discussed the <tt class=literal>Frame</tt> and <tt class=literal>Window</tt> objects, we can briefly 
investigate some ways to use them together. Previously I said that you can 
use a <tt class=literal>Window</tt> to build your own pop-up menu. That's no longer necessary 
in Java 1.1, but the same techniques apply to plenty of other objects. In the following example, we build a set of pop-up buttons; it also uses the 
<tt class=literal>Toolkit</tt> of a <tt class=literal>Frame</tt> 
to load images within an application. The pop-up button set appears when 
the user presses the right mouse button over the image. It is positioned 
at the coordinates of the <tt class=literal>mouseDown()</tt> 
event; to do so, we add the current <tt class=literal>location()</tt> 
of the <tt class=literal>Frame</tt> to the mouse's 
<tt class=literal>x</tt> and <tt class=literal>y</tt> 
coordinates. <a href="#JAWT-CH-6-FIG-4">Figure 6.4</A> shows what this application 
looks like when the pop-up button set is on the screen. 

<div class=screen>
<p>
<pre>
import java.awt.*;
public class PopupButtonFrame extends Frame {
    Image im;
    Window w = new PopupWindow (this);
    PopupButtonFrame () {
        super ("PopupButton Example");
        resize (250, 100);
        show();
        im = getToolkit().getImage ("rosey.jpg");
        MediaTracker mt = new MediaTracker (this);
        mt.addImage (im, 0);
        try {
            mt.waitForAll();
        } catch (Exception e) {e.printStackTrace(); }
    }
    public static void main (String args[]) {
        Frame f = new PopupMenuFrame ();
    }
    public void paint (Graphics g) {
        if (im != null)
            g.drawImage (im, 20, 20, this);
    }
    public boolean mouseDown (Event e, int x, int y) {
        if (e.modifiers == Event.META_MASK) {
            w.move (location().x+x, location().y+y);
            w.show();
            return true;
        }
        return false;
    }
}
class PopupWindow extends Window {
    PopupWindow (Frame f) {
        super (f);
        Panel p = new Panel ();
        p.add (new Button ("About"));
        p.add (new Button ("Save"));
        p.add (new Button ("Quit"));
        add ("North", p);
        setBackground (Color.gray);
        pack();
    }
    public boolean action (Event e, Object o) {
        if ("About".equals (o))
            System.out.println ("About");
        else if ("Save".equals (o))
            System.out.println ("Save Me");
        else if ("Quit".equals (o))
            System.exit (0);
        hide();
        return true;
    }
}
</PRE>
</DIV>

<div class=figure>
<h4 class=figure><a class="TITLE" name="JAWT-CH-6-FIG-4">Figure 6.4: Pop-up buttons</A></h4>


<p>
<img align=middle src="figs/jawt0605.gif" alt="[Graphic: Figure 6-4]" width=185 height=185 border=0>

</DIV>

<p class=para>
The most interesting method in this application is <tt class=literal>mouseDown()</tt>. 
When the user clicks on the mouse, <tt class=literal>mouseDown()</tt> 
checks whether the <tt class=literal>META_MASK</tt> 
is set in the event modifiers; this indicates that the user pressed the 
right mouse button, or pressed the left button while pressing the Meta key. 
If this is <tt class=literal>true</tt>, <tt class=literal>mouseDown()</tt> 
moves the window to the location of the mouse click, calls <tt class=literal>show()</tt> to display 
the window, and returns <tt class=literal>true</tt> 
to indicate that the event was handled completely. If <tt class=literal>mouseDown</tt> were called with any other 
kind of mouse event, we return <tt class=literal>false</tt> 
to let the event propagate to any other object that might be interested. 
Remember that the coordinates passed with the mouse event are the coordinates 
of the mouse click relative to the <tt class=literal>Frame</tt>; to find out where to position 
the pop-up window, we need an absolute location and therefore ask the <tt class=literal>Frame</tt> 
for its location. 

<p class=para>
<tt class=literal>PopupWindow</tt> itself is a simple 
class. Its constructor simply creates a display with three buttons. The 
call to <tt class=literal>pack()</tt> sizes the window 
so that it provides a nice border around the buttons but isn't excessively 
large; you can change the border by playing with the window's insets 
if you want, but that usually isn't necessary. The class <tt class=literal>PopupWindow</tt> 
has an <tt class=literal>action()</tt> method that 
is called when the user clicks one of the buttons. When the user clicks 
on a button, <tt class=literal>action()</tt> prints 
a message and hides the window. 

</DIV>

</DIV>


<div class=htmlnav>

<p>
<hr align=left width=515>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch06_04.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><a href="index.htm"><img src='gifs/txthome.gif' border=0 alt='Home'></a></td>
<td width=172 align=right valign=top><a href="ch06_06.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
<tr>
<td width=172 align=left valign=top>Window</td>
<td width=171 align=center valign=top><a href="index/idx_a.htm"><img src='gifs/index.gif' alt='Book Index' border=0></a></td>
<td width=172 align=right valign=top>Dialogs</td>
</tr>
</table>
<hr align=left width=515>

<img src="gifs/smnavbar.gif" usemap="#map" border=0> 
<map name="map"> 
<area shape=RECT coords="0,0,108,15" href="../javanut/index.htm" alt="Java in a Nutshell"> 
<area shape=RECT coords="109,0,200,15" href="../langref/index.htm" alt="Java Language Reference"> 
<area shape=RECT coords="203,0,290,15" href="index.htm" alt="Java AWT"> 
<area shape=RECT coords="291,0,419,15" href="../fclass/index.htm" alt="Java Fundamental Classes"> 
<area shape=RECT coords="421,0,514,15" href="../exp/index.htm" alt="Exploring Java"> 
</MAP>
</DIV>

</BODY>
</HTML>
