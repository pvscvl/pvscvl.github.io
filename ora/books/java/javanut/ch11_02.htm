<!doctype html public "-//ORA//DTD CD HTML 3.2//EN">
<html>
<head>
<title>[Chapter 11] 11.2 Unicode</TITLE>
<meta name="author" content="David Flanagan">
<meta name="date" content="Thu Jul 31 15:58:55 1997">
<meta name="form" content="html">
<meta name="metadata" content="dublincore.0.1">
<meta name="objecttype" content="book part">
<meta name="otheragent" content="gmat dbtohtml">
<meta name="publisher" content="O'Reilly &amp; Associates, Inc.">
<meta name="source" content="SGML">
<meta name="subject" content="Java">
<meta name="title" content="Java in a Nutshell">
<meta http-equiv="index.htmlContent-Script-Type" content="text/javascript">
</HEAD>
<body bgcolor="#FFFFFF">

<div class=htmlnav>
<h1><a href='index.htm'><img src="gifs/smbanner.gif" alt="Java in a Nutshell" border=0></a></H1>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch11_01.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 11<br>Internationalization</FONT></B></TD>
<td width=172 align=right valign=top><a href="ch11_03.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
</table>

&nbsp;
<hr align=left width=515>
</DIV>
<div class=sect1>
<h2 class=sect1><a class="TITLE" name="JNUT2-CH-11-SECT-2">11.2 Unicode</A></h2>

<p class=para>
<a name="CH11.UNICODE.CHAR1"></A><a name="CH11.CHARACTER.EN1"></A>Java uses the Unicode character encoding.  Java 1.0 used
Unicode version 1.1, while Java 1.1 has adopted the newer Unicode
2.0 standard.  Unicode is a 16-bit character encoding
established by the Unicode Consortium, which describes the
standard as follows (see <a href="../../../../../../../unicode.org/">http://unicode.org</A>):

<p class=blockquote><blockquote><p>
<p class=para>
The Unicode Worldwide Character Standard is a character
coding system designed to support the interchange,
processing, and display of the written texts of the diverse
languages of the modern world. In addition, it supports
classical and historical texts of many written languages.

<p class=para>
In its current version (2.0), the Unicode standard contains
38,885 distinct coded characters derived from 25 supported
scripts.  These characters cover the principal written
languages of the Americas, Europe, the Middle East, Africa,
India, Asia, and Pacifica.
</BLOCKQUOTE><p>
<p class=para>
In the canonical form of the Unicode encoding, which is
what Java <tt class=literal>char</tt> and <tt class=literal>String</tt> types use, every
character occupies two bytes.  The Unicode characters \u0020
to \u007E are equivalent to the ASCII and ISO8859-1
(Latin-1) characters 0x20 through 0x7E.  The Unicode
characters \u00A0 to \u00FF are identical to the ISO8859-1
characters 0xA0 to 0xFF.  Thus there is a trivial mapping
between Latin-1 and Unicode characters.  A number of other
portions of the Unicode encoding are based on pre-existing
standards, such as ISO8859-5 (Cyrillic) and ISO8859-8
(Hebrew), though the mappings between these standards and
Unicode may not be as trivial as the Latin-1 mapping.

<p class=para>
Note that Unicode support is quite limited on many
platforms. One of the difficulties with the use of Unicode
is the poor availability of fonts to display all of the
Unicode characters. <a href="#JNUT2-CH-11-FIG-1">Figure 11.1</A>
shows the characters that are available on a typical
configuration of the U.S. English Windows 95 platform.  Note the
special box glyph used to indicate undefined characters.

<div class=figure>
<h4 class=figure><a class="TITLE" name="JNUT2-CH-11-FIG-1">Figure 11.1: Some Unicode characters and their encodings</A></h4>


<p>
<img align=middle src="figs/jn2_1101.gif" alt="[Graphic: Figure 11-1]" width=464 height=503 border=0>

</DIV>

<p class=para>
Unicode is similar to, but not the same as, ISO 10646, the
UCS (Universal Character Set) encoding.  UCS is a 2- or
4-byte encoding originally intended to contain all national
standard character encodings.  For example, it was to
include the separate Chinese, Japanese, Korean, and Vietnamese encodings
for Han ideographic characters.  Unicode, in contrast,
"unifies" these disparate encodings into a single set of Han
characters that work for all four countries.  Unicode
has been so successful, however, that ISO 10646 has adopted
it in place of non-unified encodings.  Thus, ISO 10646 is
effectively Unicode, with the option of two extra bytes for
expansion purposes.

<p class=para>
Unicode is a trademark of the Unicode Consortium.  Version
2.0 of the standard is defined by the book <i class=emphasis>The Unicode
Standard, Version 2.0</I> (published by Addison-Wesley,
ISBN 0-201-48345-9). Further information about the Unicode
standard and the Unicode Consortium can be obtained at
<a href="../../../../../../../unicode.org/">http://unicode.org/</A>.

<p class=para>
<a href="#JNUT2-CH-11-TAB-1">Table 11.1</A>
provides an overview of the Unicode 2.0 encoding.

<p>
<div class=table>
<table border>
<caption><a class="TITLE" name="JNUT2-CH-11-TAB-1">Table 11.1: Outline of the Unicode 2.0 Encoding</A></CAPTION>
<tr class=row>
<th align="left">Start</TH>
<th align="left">End</TH>
<th align="left">Description</TH>
</TR>
<tr class=row>
<td align="left">0000</TD>
<td align="left">1FFF</TD>
<td align="left"><b>Alphabets</b></TD>
</TR>
<tr class=row>
<td align="left">0000</TD>
<td align="left">007F</TD>
<td align="left">Basic Latin</TD>
</TR>
<tr class=row>
<td align="left">0080</TD>
<td align="left">00FF</TD>
<td align="left">Latin-1 Supplement</TD>
</TR>
<tr class=row>
<td align="left">0100</TD>
<td align="left">017F</TD>
<td align="left">Latin Extended-A</TD>
</TR>
<tr class=row>
<td align="left">0180</TD>
<td align="left">024F</TD>
<td align="left">Latin Extended-B</TD>
</TR>
<tr class=row>
<td align="left">0250</TD>
<td align="left">02AF</TD>
<td align="left">IPA Extensions</TD>
</TR>
<tr class=row>
<td align="left">02B0</TD>
<td align="left">02FF</TD>
<td align="left">Spacing Modifier Letters</TD>
</TR>
<tr class=row>
<td align="left">0300</TD>
<td align="left">036F</TD>
<td align="left">Combining Diacritical Marks</TD>
</TR>
<tr class=row>
<td align="left">0370</TD>
<td align="left">03FF</TD>
<td align="left">Greek</TD>
</TR>
<tr class=row>
<td align="left">0400</TD>
<td align="left">04FF</TD>
<td align="left">Cyrillic</TD>
</TR>
<tr class=row>
<td align="left">0530</TD>
<td align="left">058F</TD>
<td align="left">Armenian</TD>
</TR>
<tr class=row>
<td align="left">0590</TD>
<td align="left">05FF</TD>
<td align="left">Hebrew</TD>
</TR>
<tr class=row>
<td align="left">0600</TD>
<td align="left">06FF</TD>
<td align="left">Arabic</TD>
</TR>
<tr class=row>
<td align="left">0900</TD>
<td align="left">097F</TD>
<td align="left">Devanagari</TD>
</TR>
<tr class=row>
<td align="left">0980</TD>
<td align="left">09FF</TD>
<td align="left">Bengali</TD>
</TR>
<tr class=row>
<td align="left">0A00</TD>
<td align="left">0A7F</TD>
<td align="left">Gurmukhi</TD>
</TR>
<tr class=row>
<td align="left">0A80</TD>
<td align="left">0AFF</TD>
<td align="left">Gujarati</TD>
</TR>
<tr class=row>
<td align="left">0B00</TD>
<td align="left">0B7F</TD>
<td align="left">Oriya</TD>
</TR>
<tr class=row>
<td align="left">0B80</TD>
<td align="left">0BFF</TD>
<td align="left">Tamil</TD>
</TR>
<tr class=row>
<td align="left">0C00</TD>
<td align="left">0C7F</TD>
<td align="left">Telugu</TD>
</TR>
<tr class=row>
<td align="left">0C80</TD>
<td align="left">0CFF</TD>
<td align="left">Kannada</TD>
</TR>
<tr class=row>
<td align="left">0D00</TD>
<td align="left">0D7F</TD>
<td align="left">Malayalam</TD>
</TR>
<tr class=row>
<td align="left">0E00</TD>
<td align="left">0E7F</TD>
<td align="left">Thai</TD>
</TR>
<tr class=row>
<td align="left">0E80</TD>
<td align="left">0EFF</TD>
<td align="left">Lao</TD>
</TR>
<tr class=row>
<td align="left">0F00</TD>
<td align="left">0FBF</TD>
<td align="left">Tibetan</TD>
</TR>
<tr class=row>
<td align="left">10A0</TD>
<td align="left">10FF</TD>
<td align="left">Georgian</TD>
</TR>
<tr class=row>
<td align="left">1100</TD>
<td align="left">11FF</TD>
<td align="left">Hangul Jamo</TD>
</TR>
<tr class=row>
<td align="left">1E00</TD>
<td align="left">1EFF</TD>
<td align="left">Latin Extended Additional</TD>
</TR>
<tr class=row>
<td align="left">1F00</TD>
<td align="left">1FFF</TD>
<td align="left">Greek Extended</TD>
</TR>
<tr class=row>
<td align="left">2000</TD>
<td align="left">2FFF</TD>
<td align="left"><b>Symbols and Punctuation</b></TD>
</TR>
<tr class=row>
<td align="left">2000</TD>
<td align="left">206F</TD>
<td align="left">General Punctuation</TD>
</TR>
<tr class=row>
<td align="left">2070</TD>
<td align="left">209F</TD>
<td align="left">Superscripts and Subscripts</TD>
</TR>
<tr class=row>
<td align="left">20A0</TD>
<td align="left">20CF</TD>
<td align="left">Currency Symbols</TD>
</TR>
<tr class=row>
<td align="left">20D0</TD>
<td align="left">20FF</TD>
<td align="left">Combining Marks for Symbols</TD>
</TR>
<tr class=row>
<td align="left">2100</TD>
<td align="left">214F</TD>
<td align="left">Letterlike Symbols</TD>
</TR>
<tr class=row>
<td align="left">2150</TD>
<td align="left">218F</TD>
<td align="left">Number Forms</TD>
</TR>
<tr class=row>
<td align="left">2190</TD>
<td align="left">21FF</TD>
<td align="left">Arrows</TD>
</TR>
<tr class=row>
<td align="left">2200</TD>
<td align="left">22FF</TD>
<td align="left">Mathematical Operators</TD>
</TR>
<tr class=row>
<td align="left">2300</TD>
<td align="left">23FF</TD>
<td align="left">Miscellaneous Technical</TD>
</TR>
<tr class=row>
<td align="left">2400</TD>
<td align="left">243F</TD>
<td align="left">Control Pictures</TD>
</TR>
<tr class=row>
<td align="left">2440</TD>
<td align="left">245F</TD>
<td align="left">Optical Character Recognition</TD>
</TR>
<tr class=row>
<td align="left">2460</TD>
<td align="left">24FF</TD>
<td align="left">Enclosed Alphanumerics</TD>
</TR>
<tr class=row>
<td align="left">2500</TD>
<td align="left">257F</TD>
<td align="left">Box Drawing</TD>
</TR>
<tr class=row>
<td align="left">2580</TD>
<td align="left">259F</TD>
<td align="left">Block Elements</TD>
</TR>
<tr class=row>
<td align="left">25A0</TD>
<td align="left">25FF</TD>
<td align="left">Geometric Shapes</TD>
</TR>
<tr class=row>
<td align="left">2600</TD>
<td align="left">26FF</TD>
<td align="left">Miscellaneous Symbols</TD>
</TR>
<tr class=row>
<td align="left">2700</TD>
<td align="left">27BF</TD>
<td align="left">Dingbats</TD>
</TR>
<tr class=row>
<td align="left">3000</TD>
<td align="left">33FF</TD>
<td align="left"><b>CJK Auxiliary</b></TD>
</TR>
<tr class=row>
<td align="left">3000</TD>
<td align="left">303F</TD>
<td align="left">CJK Symbols and Punctuation</TD>
</TR>
<tr class=row>
<td align="left">3040</TD>
<td align="left">309F</TD>
<td align="left">Hiragana</TD>
</TR>
<tr class=row>
<td align="left">30A0</TD>
<td align="left">30FF</TD>
<td align="left">Katakana</TD>
</TR>
<tr class=row>
<td align="left">3100</TD>
<td align="left">312F</TD>
<td align="left">Bopomofo</TD>
</TR>
<tr class=row>
<td align="left">3130</TD>
<td align="left">318F</TD>
<td align="left">Hangul Compatibility Jamo</TD>
</TR>
<tr class=row>
<td align="left">3190</TD>
<td align="left">319F</TD>
<td align="left">Kanbun</TD>
</TR>
<tr class=row>
<td align="left">3200</TD>
<td align="left">32FF</TD>
<td align="left">Enclosed CJK Letters and Months</TD>
</TR>
<tr class=row>
<td align="left">3300</TD>
<td align="left">33FF</TD>
<td align="left">CJK Compatibility</TD>
</TR>
<tr class=row>
<td align="left">4E00</TD>
<td align="left">9FFF</TD>
<td align="left">

<p class=para>
<b>CJK Unified Ideographs</b>
Han characters used in China, Japan, Korea, Taiwan, and Vietnam</TD>
</TR>
<tr class=row>
<td align="left">AC00</TD>
<td align="left">D7A3</TD>
<td align="left"><b>Hangul Syllables</b></TD>
</TR>
<tr class=row>
<td align="left">D800</TD>
<td align="left">DFFF</TD>
<td align="left"><b>Surrogates</b></TD>
</TR>
<tr class=row>
<td align="left">D800</TD>
<td align="left">DB7F</TD>
<td align="left">High Surrogates</TD>
</TR>
<tr class=row>
<td align="left">DB80</TD>
<td align="left">DBFF</TD>
<td align="left">High Private Use Surrogates</TD>
</TR>
<tr class=row>
<td align="left">DC00</TD>
<td align="left">DFFF</TD>
<td align="left">Low Surrogates</TD>
</TR>
<tr class=row>
<td align="left">E000</TD>
<td align="left">F8FF</TD>
<td align="left"><b>Private Use</b></TD>
</TR>
<tr class=row>
<td align="left">F900</TD>
<td align="left">FFFF</TD>
<td align="left"><b>Miscellaneous</b></TD>
</TR>
<tr class=row>
<td align="left">F900</TD>
<td align="left">FAFF</TD>
<td align="left">CJK Compatibility Ideographs</TD>
</TR>
<tr class=row>
<td align="left">FB00</TD>
<td align="left">FB4F</TD>
<td align="left">Alphabetic Presentation Forms</TD>
</TR>
<tr class=row>
<td align="left">FB50</TD>
<td align="left">FDFF</TD>
<td align="left">Arabic Presentation Forms-A</TD>
</TR>
<tr class=row>
<td align="left">FE20</TD>
<td align="left">FE2F</TD>
<td align="left">Combining Half Marks</TD>
</TR>
<tr class=row>
<td align="left">FE30</TD>
<td align="left">FE4F</TD>
<td align="left">CJK Compatibility Forms</TD>
</TR>
<tr class=row>
<td align="left">FE50</TD>
<td align="left">FE6F</TD>
<td align="left">Small Form Variants</TD>
</TR>
<tr class=row>
<td align="left">FE70</TD>
<td align="left">FEFE</TD>
<td align="left">Arabic Presentation Forms-B</TD>
</TR>
<tr class=row>
<td align="left">FEFF</TD>
<td align="left">FEFF</TD>
<td align="left">Specials</TD>
</TR>
<tr class=row>
<td align="left">FF00</TD>
<td align="left">FFEF</TD>
<td align="left">Halfwidth and Fullwidth Forms</TD>
</TR>
<tr class=row>
<td align="left">FFF0</TD>
<td align="left">FFFF</TD>
<td align="left">Specials</TD>
</TR>
</TABLE>
<p>
</DIV>
<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JNUT2-CH-11-SECT-2.1">Unicode and Local Encodings</A></h3>

<p class=para>
While Java programs use Unicode text internally, Unicode is
not the customary character encoding for most countries or
locales.  Thus, an important requirement for Java programs
is to be able to convert text from the local encoding to
Unicode as it is read (from a file or network, for example)
and to be able to convert text from Unicode to the local
encoding as it is written.  In Java 1.0, this requirement is
not well supported.  In Java 1.1, however, the conversion
can be done with the <tt class=literal>java.io.InputStreamReader</tt> and
<tt class=literal>java.io.OutputStreamWriter</tt> classes, respectively.
These classes load an appropriate
<tt class=literal>ByteToCharConverter</tt> or <tt class=literal>CharToByteConverter</tt>
class to perform the conversion.  Note that these converter
classes are part of the <tt class=literal>sun.io</tt> package and are not
for public use (although an explicit conversion interface may
be defined in a later release of Java).

</DIV>

<div class=sect2>
<h3 class=sect2><a class="TITLE" name="JNUT2-CH-11-SECT-2.2">The UTF-8 Encoding</A></h3>

<p class=para>
<a name="CH11.UCS.UNIVERS1"></A><a name="CH11.CHARACTER.EN2"></A><a name="CH11.UTF-8.ENCODI1"></A>The canonical two-bytes per character encoding is useful for
the manipulation of character data and is the internal
representation used throughout Java.  However, because a large amount
of text used by Java programs is 8-bit text, and because
there are so many existing computer systems that support
only 8-bit characters, the 16-bit canonical form is usually not
the most efficient way to store Unicode text nor the
most portable way to transmit it.

<p class=para>
Because of this, other encodings called "transformation formats"
have been developed.  Java provides simple support for the
UTF-8 encoding with the <tt class=literal>DataInputStream.readUTF()</tt>
and <tt class=literal>DataOutputStream.writeUTF()</tt> methods.
UTF-8 is a variable-width or "multi-byte" encoding format;
this means that different characters require different
numbers of bytes.  In UTF-8, the standard ASCII characters
occupy only one byte, and remain untouched by the encoding
(i.e., a string of ASCII characters is a legal UTF-8 string).
As a tradeoff, however, other Unicode characters occupy two
or three bytes.

<p class=para>
In UTF-8, Unicode characters between <tt class=literal>\u0000</tt> and <tt class=literal>\u007F</tt>
occupy a single byte, which has a value of between <tt class=literal>0x00</tt> and
<tt class=literal>0x7F</tt>, and which always has its high-order bit set to <tt class=literal>0</tt>.
Characters between <tt class=literal>\u0080</tt> and <tt class=literal>\u07FF</tt> occupy
two bytes, and characters between <tt class=literal>\u0800</tt> and <tt class=literal>\uFFFF</tt>
occupy three bytes.
The first byte of a two-byte character always has high-order
bits <tt class=literal>110</tt>, and the first byte of a three-byte character
always has high-order bits <tt class=literal>1110</tt>.  Since single-byte
characters always have 0 as their high-order bit, the one-,
two-, and three-byte characters can easily be distinguished
from each other.

<p class=para>
The second and third bytes of two- and three-byte characters
always have high-order bits <tt class=literal>10</tt>, which distinguishes them
from one-byte characters, and also distinguishes them from
the first byte of a two- or three-byte sequence.  This is
important because it allows a program to locate the start of
a character in a multi-byte sequence.

<p class=para>
The remaining bits in each character (i.e., the bits that are
not part of one of the required high-order bit sequences)
are used to encode the actual Unicode character data.  In
the single-byte form, there are seven bits available, suitable
for encoding characters up to <tt class=literal>\u007F</tt>.  In the two-byte
form, there are 11 data bits available, which is enough to
encode values to <tt class=literal>\u07FF</tt>, and in the three-byte form there
are 16 available data bits, which is enough to encode all
16-bit Unicode characters. <a href="#JNUT2-CH-11-TAB-2">Table 11.2</A>
summarizes the UTF-8 encoding.

<p>
<div class=table>
<table border>
<caption><a class="TITLE" name="JNUT2-CH-11-TAB-2">Table 11.2: The UTF-8 Encoding</A></CAPTION>
<tr class=row>
<th align="left">

<p class=para>
Start Character</TH>
<th align="left">

<p class=para>
End Character</TH>
<th align="left">

<p class=para>
Required Data Bits</TH>
<th align="left">

<p class=para>
Binary Byte Sequence (<tt class=literal>x</tt> = data bits)</TH>
</TR>
<tr class=row>
<td align="left">\u0000</TD>
<td align="left">\u007F</TD>
<td align="left">7</TD>
<td align="left">0xxxxxxx</TD>
</TR>
<tr class=row>
<td align="left">\u0080</TD>
<td align="left">\u07FF</TD>
<td align="left">11</TD>
<td align="left">110xxxxx 10xxxxxx</TD>
</TR>
<tr class=row>
<td align="left">\u0800</TD>
<td align="left">\uFFFF</TD>
<td align="left">16</TD>
<td align="left">1110xxxx 10xxxxxx 10xxxxxx</TD>
</TR>
</TABLE>
<p>
</DIV>
<p class=para>
The UTF-8 has the following desirable features:

<p>
<ul class=itemizedlist>
<li class=listitem>All ASCII characters are one-byte UTF-8 characters.  A legal
ASCII string is a legal UTF-8 string.

<p>
<li class=listitem>Any non-ASCII character (i.e., any character with the high-order
bit set) is part of a multi-byte character.

<p>
<li class=listitem>The first byte of any UTF-8 character indicates the number
of additional bytes in the character.

<p>
<li class=listitem>The first byte of a multi-byte character is easily
distinguished from the subsequent bytes.  Thus, it is easy
to locate the start of a character from an arbitrary
position in a data stream.

<p>
<li class=listitem>It is easy to convert between UTF-8 and Unicode.

<p>
<li class=listitem>The UTF-8 encoding is relatively compact.  For text with a
large percentage of ASCII characters, it is more compact
than Unicode.  In the worst case, a UTF-8 string is only 50%
larger than the corresponding Unicode string.

<p>
</UL>
<p class=para>
Java actually uses a slightly modified form of UTF-8.  The
Unicode character <tt class=literal>\u0000</tt> is encoded using a two-byte
sequence, so that an encoded Unicode string never contains
null characters.

</DIV>

</DIV>


<div class=htmlnav>

<p>
<hr align=left width=515>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="ch11_01.htm"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><a href="index.htm"><img src='gifs/txthome.gif' border=0 alt='Home'></a></td>
<td width=172 align=right valign=top><a href="ch11_03.htm"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
<tr>
<td width=172 align=left valign=top>A Word About Locales</td>
<td width=171 align=center valign=top><a href="index/idx_0.htm"><img src='gifs/index.gif' alt='Book Index' border=0></a></td>
<td width=172 align=right valign=top>Character Encodings</td>
</tr>
</table>
<hr align=left width=515>

<img src="gifs/smnavbar.gif" usemap="#map" border=0> 
<map name="map"> 
<area shape=RECT coords="0,0,108,15" href="index.htm" alt="Java in a Nutshell"> 
<area shape=RECT coords="109,0,200,15" href="../langref/index.htm" alt="Java Language Reference"> 
<area shape=RECT coords="203,0,290,15" href="../awt/index.htm" alt="Java AWT"> 
<area shape=RECT coords="291,0,419,15" href="../fclass/index.htm" alt="Java Fundamental Classes"> 
<area shape=RECT coords="421,0,514,15" href="../exp/index.htm" alt="Exploring Java"> 
</MAP>
</DIV>

</BODY>
</HTML>
