<HTML
><HEAD
><TITLE
>[Chapter 16] 16.4 Site Priority Groups with DBMS_REPCAT</TITLE
><META
NAME="DC.Creator"
CONTENT="Steven Feuerstein, Charles Dye &amp; John Beresniewicz"><META
NAME="DC.Date"
CONTENT="2000-04-29T18:04:02Z"><META
NAME="DC.Format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.Identifier"
CONTENT="O'Reilly and Associates-1-56592-375-8E"><META
NAME="DC.Language"
CONTENT="en-US"><META
NAME="DC.Publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.Source"
CONTENT="1-56592-375-8E"
SCHEME="ISBN"><META
NAME="DC.Subject.Keyword"
CONTENT="Oracle Packages"><META
NAME="DC.Title"
CONTENT="Oracle Built-in Packages"><META
NAME="DC.Type"
CONTENT="Text.Monograph"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REL="stylesheet"
TYPE="text/css"
HREF="../style/style1.css"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch16_01.htm"
TITLE="16. Conflict Resolution"><LINK
REL="prev"
HREF="ch16_03.htm#ch16-SECT-3.3.1"
TITLE="16.3 Priority Groups with DBMS_REPCAT"><LINK
REL="next"
HREF="ch16_05.htm#ch16-SECT-5.1.1"
TITLE="16.5 Assigning Resolution Methods with DBMS_REPCAT"></HEAD
><BODY
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Oracle Built-in Packages"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Oracle Built-in Packages"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_03.htm#ch16-SECT-3.3.1"
TITLE="16.3 Priority Groups with DBMS_REPCAT"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 16.3 Priority Groups with DBMS_REPCAT"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><SPAN
CLASS="NAVTITLE"
><A
CLASS="chapter"
REL="up"
HREF="ch16_01.htm"
TITLE="16. Conflict Resolution"
>Chapter 16<BR>Conflict Resolution</A
></SPAN
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_05.htm#ch16-SECT-5.1.1"
TITLE="16.5 Assigning Resolution Methods with DBMS_REPCAT"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 16.5 Assigning Resolution Methods with DBMS_REPCAT"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch16-31681"
>16.4 Site Priority Groups with DBMS_REPCAT</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch16-idx-963205-0"
></A
>The site priority group technique resolves conflicts by accepting the data that originated from the site with the highest priority. </P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch16-SECT-4.1"
>16.4.1 About Site Priority Groups</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch16-idx-963209-0"
></A
>The procedures for creating and maintaining site priority groups are almost completely analogous to those used for priority groups. The similarity arises because a <EM
CLASS="emphasis"
>site priority group</EM
> is actually a special case of a priority group in which the range of data values is the range of global names in the replicated environment. In fact, Oracle stores the information about priority groups and site priority groups in the same data dictionary views (DBA_REPPRIORITY_GROUP and DBA_REPPRIORITY). However, unlike in the priority group technique, you should base site priority group rankings on your confidence in the data from each site, as opposed to the business rules associated with a workflow.</P
><P
CLASS="para"
>Use the following programs to maintain site priority groups:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.ADD_SITE_PRIORITY_SITE</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.ALTER_SITE_PRIORITY</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.ALTER_SITE_PRIORITY_SITE</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.COMMENT_ON_SITE_PRIORITY</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.DEFINE_SITE_PRIORITY</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.DROP_SITE_PRIORITY</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.DROP_SITE_PRIORITY_SITE</TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch16-SECT-4.2"
>16.4.2 Creating, Maintaining, and Dropping Site Priorities</A
></H3
><P
CLASS="para"
>DBMS_REPCAT's DEFINE_SITE_PRIORITY and DROP_SITE_PRIORITY procedures allow you to create and drop site priorities. Use the COMMENT_ON_SITE_PRIORITY procedure to maintain the comment on the site priority.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.2.1"
>16.4.2.1 The DBMS_REPCAT.DEFINE_SITE_PRIORITY procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963210-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963210-1"
></A
>DEFINE_SITE_PRIORITY procedure creates a site priority group. You can   add sites to this group later. Specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DEFINE_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    comment IN VARCHAR2 := NULL,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DEFINE_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    comment IN VARCHAR2 := NULL)</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group containing the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment, visible in DBA_REPPRIORITY_GROUP data dictionary view</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-36860"
>16.4.2.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The DEFINE_SITE_PRIORITY procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicateprioritygroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23335</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site priority group name already exists</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-36898"
>16.4.2.1.2 Restrictions</A
></H4
><P
CLASS="para"
>You must call DBMS_REPCAT.DEFINE_SITE_PRIORITY from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-36901"
>16.4.2.1.3 Example</A
></H4
><P
CLASS="para"
>The following call creates a site priority group called SP_NORTH_AMERICA:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.DEFINE_SITE_PRIORITY(
			gname	=&gt; 'SPROCKET',
			name	=&gt; 'SP_NORTH_AMERICA',
			comment	=&gt; 'Site Priority for North American Locations');
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>These changes take effect after the next call to DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT for an object in the SPROCKET replication <A
CLASS="indexterm"
NAME="ch16-idx-963212-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963212-1"
></A
>group.</P
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.2.2"
>16.4.2.2 The DBMS_REPCAT.DROP_SITE_PRIORITY procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963214-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963214-1"
></A
>DROP_SITE_PRIORITY procedure drops an existing site priority group that is no longer in use. Specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DROP_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DROP_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2)</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group containing the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><BLOCKQUOTE
CLASS="warning"
><P
CLASS="para"
><STRONG
>WARNING:</STRONG
> As with the DROP_PRIORITY_GROUP procedure, do not attempt to drop a site priority group that is acting as an UPDATE conflict resolution handler for a column group. First, use DROP_UPDATE_RESOLUTION to drop the conflict handler for the column group.</P
></BLOCKQUOTE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-36949"
>16.4.2.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The DROP_SITE_PRIORITY procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>referenced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23332</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site priority group is used by existing conflict resolution method</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-36987"
>16.4.2.2.2 Restrictions</A
></H4
><P
CLASS="para"
>You must call DBMS_REPCAT.DROP_SITE_PRIORITY from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-36990"
>16.4.2.2.3 Example</A
></H4
><P
CLASS="para"
>The following example shows how to drop a site priority group that is no longer in use:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.DROP_SITE_PRIORITY(
			gname	=&gt; 'SPROCKET',
			name	=&gt; 'SP_NORTH_AMERICA');
	<A
CLASS="indexterm"
NAME="ch16-idx-963216-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963216-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.2.3"
>16.4.2.3 The DBMS_REPCAT.COMMENT_ON_SITE_PRIORITY procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963218-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963218-1"
></A
>COMMENT_ON_SITE_PRIORITY procedure creates or replaces the comment field in the DBA_REPPRIORITY_GROUP data dictionary view for the specified site priority group. Specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.COMMENT_ON_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    comment IN VARCHAR2,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.COMMENT_ON_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    comment IN VARCHAR2)</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group containing the priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37040"
>16.4.2.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_SITE_PRIORITY procedure may raise the following exceptions:                                                                       </P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingpriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1403</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site priority group name does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37078"
>16.4.2.3.2 Restrictions</A
></H4
><P
CLASS="para"
>You must call DBMS_REPCAT.COMMENT_ON_SITE_PRIORITY from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37081"
>16.4.2.3.3 Example</A
></H4
><P
CLASS="para"
>The following example shows how to replace a comment on a site priority group:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.COMMENT_ON_SITE_PRIORITY(
			gname	=&gt; 'SPROCKET',
			name	=&gt; 'SP_NORTH_AMERICA',
			comment	=&gt; 'Comment added on '||sysdate|| ' by '|| user);
	<A
CLASS="indexterm"
NAME="ch16-idx-963220-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963220-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch16-SECT-4.3"
>16.4.3 Maintaining Site Priorities</A
></H3
><P
CLASS="para"
>Once you have created a site priority group as described in the previous section, you can add and drop sites (with ADD_SITE_PRIORITY_SITE and DROP_SITE_PRIORITY_SITE) and modify their priority values (with ALTER_SITE_PRIORITY and ALTER_SITE_PRIORITY_SITE).</P
><P
CLASS="para"
>You can query the data dictionary table DBA_REPPRIORITY for information about site priority group members and their priorities.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.3.1"
>16.4.3.1 The DBMS_REPCAT.ADD_SITE_PRIORITY_SITE procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963222-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963222-1"
></A
>ADD_SITE_PRIORITY_SITE procedure adds a new site to a site priority group. Specifications for Oracle7 and Oracle8 differ as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ADD_SITE_PRIORITY_SITE
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    site IN VARCHAR2,
    priority IN NUMBER,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ADD_SITE_PRIORITY_SITE
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    site IN VARCHAR2,
    priority IN NUMBER);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which site priority group name belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>site</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the new site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>priority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Priority designated to site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37140"
>16.4.3.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The ADD_SITE_PRIORITY_SITE procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicatepriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23335</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Another site is already designated with priority specified by priority parameter</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicatesite</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23338</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site is already in the site priority group name</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingpriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1403</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37192"
>16.4.3.1.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ADD_SITE_PRIORITY_SITE:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call the ADD_SITE_PRIORITY_SITE procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The new priority must be unique within the site priority group.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37200"
>16.4.3.1.3 Example</A
></H4
><P
CLASS="para"
>This example adds four sites to the site priority group SP_NORTH_AMERICA:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.ADD_SITE_PRIORITY_SITE(
			gname		=&gt; 'SPROCKET',
			name		=&gt; 'SP_NORTH_AMERICA',
			site		=&gt; 'D7OH.BIGWHEEL.COM',
			priority	=&gt; 10);
		DBMS_REPCAT.ADD_SITE_PRIORITY_SITE(
			gname		=&gt; 'SPROCKET',
			name		=&gt; 'SP_NORTH_AMERICA',
			site		=&gt; 'D7NY.BIGWHEEL.COM',
			priority	=&gt; 20);
		DBMS_REPCAT.ADD_SITE_PRIORITY_SITE(
			gname		=&gt; 'SPROCKET',
			name		=&gt; 'SP_NORTH_AMERICA',
			site		=&gt; 'D7HI.BIGWHEEL.COM',
			priority	=&gt; 30);
		DBMS_REPCAT.ADD_SITE_PRIORITY_SITE(
			gname		=&gt; 'SPROCKET',
			name		=&gt; 'SP_NORTH_AMERICA',
			site		=&gt; 'D7CA.BIGWHEEL.COM',
			priority	=&gt; 40);
	END;</PRE
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="tip"
><P
CLASS="para"
><STRONG
>TIP:</STRONG
> As with the ADD_PRIORITY_&lt;datatype&gt; procedure, it is a good idea to use multiples of 10 or more for the priority values so that you have some flexibility for future changes and additions.</P
></BLOCKQUOTE
><P
CLASS="para"
>After making these calls, we can query DBA_REPPRIORITY to confirm that Oracle added the sites.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>&#13;SQL&gt;  SELECT		gname,
  2  			priority_group,
  3  			varchar2_value		site_name,
  4  			priority
  5  FROM		dba_reppriority
  6  WHERE		priority_group = 'SP_NORTH_AMERICA'
  7  ORDER BY		priority;

GNAME	 PRIORITY_GROUP      SITE_NAME 	   	  PRIORITY
-------- -------------------- -------------------- --------
SPROCKET SP_NORTH_AMERICA     D7OH.BIGWHEEL.COM 	10
SPROCKET SP_NORTH_AMERICA     D7NY.BIGWHEEL.COM 	20
SPROCKET SP_NORTH_AMERICA     D7HI.BIGWHEEL.COM 	30</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Although DBA_REPPRIORITY reflects the changes from the ADD_SITE_PRIORITY_SITE call, you must call DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT for an object in the replication group for the changes to propagate to the other master sites. This is the case for all of the DBMS_REPCAT procedures pertaining to site priority <A
CLASS="indexterm"
NAME="ch16-idx-963224-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963224-1"
></A
>groups.</P
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.3.2"
>16.4.3.2 The DBMS_REPCAT.DROP_SITE_PRIORITY_SITE procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963226-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963226-1"
></A
>DROP_SITE_PRIORITY_SITE procedure removes a site from a site priority group. Specifications for Oracle7 and Oracle8 differ as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DROP_SITE_PRIORITY_SITE
  (gname IN VARCHAR2 := '',
   name IN VARCHAR2,
   site IN VARCHAR2,
   sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DROP_SITE_PRIORITY_SITE
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    site IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which site priority group name belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>site</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the new site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37255"
>16.4.3.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The DROP_SITE_PRIORITY_SITE procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingpriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1403</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site priority does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37293"
>16.4.3.2.2 Restrictions</A
></H4
><P
CLASS="para"
>You must call DROP_SITE_PRIORITY_SITE from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37296"
>16.4.3.2.3 Example</A
></H4
><P
CLASS="para"
>Here we drop D7TX.BIGWHEEL.COM from the SP_NORTH_AMERICA site priority:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.DROP_SITE_PRIORITY_SITE(
			gname	=&gt; 'SPROCKET',
			name	=&gt; 'SP_NORTH_AMERICA',
			site	=&gt; 'D7TX.BIGWHEEL.COM');
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>As with the other site priority procedures, you must call GENERATE_REPLICATION_SUPPORT for an object in the replication group to propagate this change to other master <A
CLASS="indexterm"
NAME="ch16-idx-963228-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963228-1"
></A
>sites.</P
><DIV
CLASS="sidebar"
><H4
CLASS="sidebar"
><A
CLASS="title"
NAME="ch16-TABLE-49"
>Can I Drop a Site Priority Referenced by Priority Level?</A
></H4
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch16-idx-963230-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963230-1"
></A
>You may have noticed that there is no procedure that will drop a member of a site priority referenced by priority level&nbsp;-- that is, there is no analog to DBMS_REPCAT.DROP_PRIORITY. Perhaps the team at Oracle decided that a procedure name like DROP_SITE_PRIORITY_PRIORITY is too cumbersome.</P
><P
CLASS="para"
>However, you can use DBMS_REPCAT.DROP_PRIORITY to drop a site priority referenced by priority level! Pass the name of the site priority to the pgroup parameters, and the priority value to the priority_num parameter.</P
><P
CLASS="para"
>Site priority groups really are priority groups in disguise.</P
></DIV
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.3.3"
>16.4.3.3 The DBMS_REPCAT.ALTER_SITE_PRIORITY procedure</A
></H4
><P
CLASS="para"
>Just as you can change the priority of a value in a priority group, you can change the priority of a site in a site priority group. Use the <A
CLASS="indexterm"
NAME="ch16-idx-963234-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963234-1"
></A
>ALTER_SITE_PRIORITY procedure to do this. The specifications for Oracle7 and Oracle8 differ as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ALTER_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    old_priority IN NUMBER,
    new_priority IN NUMBER,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ALTER_SITE_PRIORITY
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    old_priority IN NUMBER,
    new_priority IN NUMBER);
    site IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which the site priority group name belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>old_priority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site's current priority</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>new_priority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site's new priority</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37363"
>16.4.3.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The ALTER_SITE_PRIORITY procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicatepriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Priority new_priority already exists for the site priority group name</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingpriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1403</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Priority old_priority is not associated with any sites</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingvalue</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23337</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Value old_value does not already exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>paramtype</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23325</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Parameter new_value is incorrect datatype</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37422"
>16.4.3.3.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ALTER_SITE_PRIORITY:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must run this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The new priority must be unique within the site priority group.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37430"
>16.4.3.3.3 Example</A
></H4
><P
CLASS="para"
>In this example, we move D7NY.BIGWHEEL.COM (from a previous example) to a higher priority, between D7HI.BIGWHEEL.COM and D7CA.BIGWHEEL.COM:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.ALTER_SITE_PRIORITY(
			gname		=&gt; 'SPROCKET',
			name		=&gt; 'SP_NORTH_AMERICA',
			old_priority	=&gt; 20,
			new_priority	=&gt; 35);
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>And, querying the DBA_REPPRIORITY data dictionary view again, we see the changed data (shown here in boldface):</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>SQL&gt;  SELECT		gname,
  2  			priority_group,
  3  			varchar2_value		site_name,
  4  			priority
  5  FROM		dba_reppriority
  6  WHERE		priority_group = 'SP_NORTH_AMERICA'
  7  ORDER BY		priority;

GNAME	 PRIORITY_GROUP      SITE_NAME 	   	  PRIORITY
-------- -------------------- -------------------- --------
SPROCKET SP_NORTH_AMERICA     D7OH.BIGWHEEL.COM 	10
SPROCKET SP_NORTH_AMERICA     D7HI.BIGWHEEL.COM 	30<B
CLASS="emphasis.bold"
>&#13;SPROCKET SP_NORTH_AMERICA     D7NY.BIGWHEEL.COM 	35</B
>
SPROCKET SP_NORTH_AMERICA     D7CA.BIGWHEEL.COM 	40</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This shows D7NY.BIGWHEEL.COM with its new and higher <A
CLASS="indexterm"
NAME="ch16-idx-963236-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963236-1"
></A
>priority.</P
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-4.3.4"
>16.4.3.4 The DBMS_REPCAT.ALTER_SITE_PRIORITY_SITE</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963238-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963238-1"
></A
>ALTER_SITE_PRIORITY_SITE procedure is analogous to the DBMS_REPCAT.ADD_PRIORITY_&lt;datatype&gt; procedure; use it to change the site name for an existing named site in a site priority group. The specifications for Oracle7 and Oracle8 differ as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ALTER_SITE_PRIORITY_SITE
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    old_site IN VARCHAR2,
    new_site IN VARCHAR2,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ALTER_SITE_PRIORITY_SITE
   (gname IN VARCHAR2 := '',
    name IN VARCHAR2,
    old_site IN VARCHAR2,
    new_site IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which the site priority group name belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>old_site</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the site currently associated with the priority level</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>new_site</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the site that is to replace old_site at old_site's priority level</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37489"
>16.4.3.4.1 Exceptions</A
></H4
><P
CLASS="para"
>The ALTER_SITE_PRIORITY_SITE procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicatesite</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>new_site is already in the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingpriority</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1403</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site priority group name does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingvalue</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23337</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>old_site is not in the site priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37541"
>16.4.3.4.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ALTER_SITE_PRIORITY_SITE:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The new site must be unique in the site priority group.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37549"
>16.4.3.4.3 Example</A
></H4
><P
CLASS="para"
>In this example, we replace the site associated with priority level 10 with D7TX.BIGWHEEL.COM:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.ALTER_SITE_PRIORITY_SITE(
			gname		=&gt; 'SPROCKET',
			name		=&gt; 'SP_NORTH_AMERICA',
			old_site	=&gt; 'D7OH.BIGWHEEL.COM',
			new_site	=&gt; 'D7TX.BIGWHEEL.COM');
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>And again, we can see the change in DBA_REPPRIORITY:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>&#13;SQL&gt;  SELECT		gname,
  2  			priority_group,
  3  			varchar2_value		site_name,
  4  			priority
  5  FROM		dba_reppriority
  6  WHERE		priority_group = 'SP_NORTH_AMERICA'
  7  ORDER BY		priority;

GNAME	 PRIORITY_GROUP      SITE_NAME 	   	  PRIORITY
-------- -------------------- -------------------- --------
SPROCKET SP_NORTH_AMERICA     D7TX.BIGWHEEL.COM 	10
SPROCKET SP_NORTH_AMERICA     D7HI.BIGWHEEL.COM         30
SPROCKET SP_NORTH_AMERICA     D7NY.BIGWHEEL.COM         35
SPROCKET SP_NORTH_AMERICA     <A
CLASS="indexterm"
NAME="ch16-idx-963240-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963240-1"
></A
>D7CA.BIGWHEEL.COM         <A
CLASS="indexterm"
NAME="ch16-idx-963281-0"
></A
>40</PRE
></BLOCKQUOTE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_03.htm#ch16-SECT-3.3.1"
TITLE="16.3 Priority Groups with DBMS_REPCAT"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 16.3 Priority Groups with DBMS_REPCAT"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Oracle Built-in Packages"
><IMG
SRC="../gifs/txthome.gif"
ALT="Oracle Built-in Packages"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_05.htm#ch16-SECT-5.1.1"
TITLE="16.5 Assigning Resolution Methods with DBMS_REPCAT"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 16.5 Assigning Resolution Methods with DBMS_REPCAT"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>16.3 Priority Groups with DBMS_REPCAT</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>16.5 Assigning Resolution Methods with DBMS_REPCAT</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><IMG SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The Oracle Library Navigation">

<P><font size="-1">
<a href="../copyrght.htm#copy">Copyright (c) 2000</a> O'Reilly &amp; Associates. All rights reserved.
</font></P>

<MAP NAME="map">

<AREA SHAPE="RECT"
COORDS="0,0,35,30"
HREF="../index.htm"
ALT="Library Home">

<AREA SHAPE="RECT"
COORDS="40,0,95,30"
HREF="../prog2/index.htm"
ALT="Oracle PL/SQL Programming, 2nd. Ed.">

<AREA SHAPE="RECT"
COORDS="100,0,200,30"
HREF="../guide8i/index.htm"
ALT="Guide to Oracle 8i Features">

<AREA SHAPE="RECT"
COORDS="205,0,245,30"
HREF="index.htm"
ALT="Oracle Built-in Packages">

<AREA SHAPE="RECT"
COORDS="250,0,320,30"
HREF="../advprog/index.htm"
ALT="Advanced PL/SQL Programming with Packages">

<AREA SHAPE="RECT"
COORDS="325,0,420,30"
HREF="../webapp/index.htm"
ALT="Oracle Web Applications">

<AREA SHAPE="RECT"
COORDS="425,0,490,30"
HREF="../langpkt/index.htm"
ALT="Oracle PL/SQL Language Pocket Reference">

<AREA SHAPE="RECT"
COORDS="495,0,570,30"
HREF="../bipkt/index.htm"
ALT="Oracle PL/SQL Built-ins Pocket Reference">
</MAP>

</BODY
>
<!-- Mirrored from liso.cs.pusan.ac.kr by HTTrack Website Copier/3.x [XR&CO'2001] -->
</HTML
>
