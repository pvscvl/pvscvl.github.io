<HTML
><HEAD
><TITLE
>[Chapter 16] 16.5 Assigning Resolution Methods with DBMS_REPCAT</TITLE
><META
NAME="DC.Creator"
CONTENT="Steven Feuerstein, Charles Dye &amp; John Beresniewicz"><META
NAME="DC.Date"
CONTENT="2000-04-29T18:04:08Z"><META
NAME="DC.Format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.Identifier"
CONTENT="O'Reilly and Associates-1-56592-375-8E"><META
NAME="DC.Language"
CONTENT="en-US"><META
NAME="DC.Publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.Source"
CONTENT="1-56592-375-8E"
SCHEME="ISBN"><META
NAME="DC.Subject.Keyword"
CONTENT="Oracle Packages"><META
NAME="DC.Title"
CONTENT="Oracle Built-in Packages"><META
NAME="DC.Type"
CONTENT="Text.Monograph"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REL="stylesheet"
TYPE="text/css"
HREF="../style/style1.css"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch16_01.htm"
TITLE="16. Conflict Resolution"><LINK
REL="prev"
HREF="ch16_04.htm#ch16-SECT-4.3.1"
TITLE="16.4 Site Priority Groups with DBMS_REPCAT"><LINK
REL="next"
HREF="ch16_06.htm#ch16-SECT-6.1.2"
TITLE="16.6 Monitoring Conflict Resolution with DBMS_REPCAT"></HEAD
><BODY
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Oracle Built-in Packages"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Oracle Built-in Packages"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_04.htm#ch16-SECT-4.3.1"
TITLE="16.4 Site Priority Groups with DBMS_REPCAT"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 16.4 Site Priority Groups with DBMS_REPCAT"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><SPAN
CLASS="NAVTITLE"
><A
CLASS="chapter"
REL="up"
HREF="ch16_01.htm"
TITLE="16. Conflict Resolution"
>Chapter 16<BR>Conflict Resolution</A
></SPAN
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_06.htm#ch16-SECT-6.1.2"
TITLE="16.6 Monitoring Conflict Resolution with DBMS_REPCAT"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 16.6 Monitoring Conflict Resolution with DBMS_REPCAT"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch16-38384"
>16.5 Assigning Resolution Methods with DBMS_REPCAT</A
></H2
><P
CLASS="para"
>Once you have configured your column, priority, and/or site priority groups, you can assign conflict resolution techniques to your replicated tables. </P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch16-SECT-5.1"
>16.5.1 About Resolution Methods</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch16-idx-963242-0"
></A
>In addition to column groups, priority groups, and site priority groups, the advanced replication option includes eleven other built-in resolution methods to handle update and uniqueness conflicts (see <A
CLASS="xref"
HREF="ch16_05.htm#ch16-SECT-5.1.1"
>Table 16.14</A
>). You can also write your own resolution handlers. In particular, if you require a <A
CLASS="indexterm"
NAME="ch16-idx-963244-0"
></A
>delete conflict handler, you must write your own because Oracle does not supply one.</P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch16-17142"
>Table 16.14: Built-in Conflict Resolution Methods </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Conflict Type</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Method Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comments</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch16-idx-963245-0"
></A
>Update</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>MINIMUM</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Data from the row having the minimum value for the designated column prevails. Data is guaranteed to converge if the value is always decreasing, or if there are fewer than three master sites.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>MAXIMUM</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Data from the row having the maximum value for the designated column prevails. Data is guaranteed to converge if the value is always increasing, or if there are fewer than three master sites.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>EARLIEST TIME-STAMP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Data from the row having the earliest time-stamp for the designated column prevails. Data is guaranteed to converge if there are fewer than three master sites.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>LATEST TIME-STAMP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Data from the row having the latest timestamp for the designated column prevails. Data is guaranteed to converge if the value is always increasing, or if there are fewer than three master sites.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>OVERWRITE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Intended for a single master site with one or more updateable snapshot sites. Data from the site originating the update prevails. Convergence is not guaranteed with more than one master site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DISCARD</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Intended for a single master site with one or more updateable snapshot sites. Data from the site originating the update is discarded. Convergence is not guaranteed with more than one master site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ADDITIVE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Intended for use with a column group con-sisting of a single numeric column. Oracle determines the new value of the column by adding the difference between the old value and new value at the originating site to the current value at the destination site. Convergence is guaranteed for any number of master sites.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
></P
>&nbsp;</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>AVERAGE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Intended for a single master site with one or more updateable snapshot sites. Oracle determines the new value of the column by averaging the current value at the destination with the value from the originating site. Convergence is not guaranteed with more than one master site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="3"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch16-idx-963246-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963246-1"
></A
>Uniqueness</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>APPEND SITE NAME</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Oracle resolves unique key violations (DUP_VAL_ON_INDEX) by appending the global name of the destination site (up to the first `.') to the offending column. The column must be a CHAR or VARCHAR2 type. Convergence is not guaranteed with more than one master site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>APPEND SEQUENCE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Oracle resolves unique key violations (DUP_VAL_ON_INDEX) by appending a generated sequence number to the offending column.</P
><P
CLASS="para"
>The column must be a CHAR or VARCHAR2 type. Convergence is not guaranteed with more than one master site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DISCARD</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Oracle resolves unique key violations (DUP_VAL_ON_INDEX) by ignoring (i.e., not inserting) the new row. Convergence is not guaranteed with more than one master site.</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
></P
><P
CLASS="para"
>You'll use the following procedures to manipulate the conflict resolution methods associated with a given table:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>ADD_&lt;conflicttype&gt;_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>DROP_&lt;conflicttype&gt;_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>COMMENT_ON_&lt;conflicttype&gt;_RESOLUTION</TD
></TR
></TABLE
><P
CLASS="para"
>&lt;conflicttype&gt; can be UPDATE, UNIQUE, or DELETE. Therefore, the complete set of procedures in this category <A
CLASS="indexterm"
NAME="ch16-idx-963243-0"
></A
>follows:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>ADD_UPDATE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>ADD_UNIQUE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>ADD_DELETE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>DROP_UPDATE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>DROP_UNIQUE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>DROP_DELETE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>COMMENT_ON_UPDATE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>COMMENT_ON_UNIQUE_RESOLUTION</TD
></TR
><TR
><TD
CLASS="member"
>COMMENT_ON_DELETE_RESOLUTION</TD
></TR
></TABLE
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-5.1.1"
>16.5.1.1 The DBMS_REPCAT.ADD_&lt;conflicttype&gt;_RESOLUTION</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963247-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963247-1"
></A
>ADD_&lt;conflicttype&gt;_RESOLUTION procedure adds a conflict resolution type to a table. The value of &lt;conflicttype&gt; can be <A
CLASS="indexterm"
NAME="ch16-idx-963251-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963251-1"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963251-2"
></A
>UPDATE, UNIQUE, or DELETE. Here are the specifications:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ADD_UPDATE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    column_group IN VARCHAR2,
    sequence_no IN NUMBER,
    method IN VARCHAR2,
    {parameter_column_name  IN dbms_repcat.varchar2s,|
    parameter_column_name IN VARCHAR2,}
    priority_group IN VARCHAR2 := NULL,
    function_name IN VARCHAR2 := NULL,
    comment IN VARCHAR2 := NULL);

PROCEDURE DBMS_REPCAT.ADD_UNIQUE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    constraint_name IN VARCHAR2,
    sequence_no IN NUMBER,
    method IN VARCHAR2,
    {parameter_column_name  IN dbms_repcat.varchar2s, |
    parameter_column_name IN VARCHAR2,}
    comment IN VARCHAR2 := NULL);

PROCEDURE DBMS_REPCAT.ADD_DELETE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    sequence_no IN NUMBER,
    {parameter_column_name  IN dbms_repcat.varchar2s, |
    parameter_column_name IN VARCHAR2,}
    function_name IN VARCHAR2 := NULL,
    comment IN VARCHAR2 := NULL);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema containing the replicated schema. Defaults to current user.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replicated table.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ADD_UPDATE_RESOLUTION only. Column group for which the conflict resolution method is being defined.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>constraint_name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ADD_UNIQUE_RESOLUTION only. Name of the constraint name or unique index for which the conflict resolution method is being added.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sequence_no</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number indicating when this conflict resolution method should be applied relative to other methods defined for the same column group or priority group.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>method</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The conflict resolution method. Valid values are,</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>PRIORITY GROUP</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>SITE PRIORITY</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>USER FUNCTION</P
></LI
></UL
><P
CLASS="para"
>or one of the methods in <A
CLASS="xref"
HREF="ch16_05.htm#ch16-SECT-5.1.1"
>Table 16.14</A
>.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>parameter_column_name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comma-separated list of columns to be used to resolve the conflict (if VARCHAR2) or a PL/SQL table of column names.</P
><P
CLASS="para"
></P
><P
CLASS="para"
>If column_group is passed, the column(s) passed to parameter_column_name must be in the group.</P
><P
CLASS="para"
></P
><P
CLASS="para"
>A `*' indicates that all columns in the table or column group should be passed to the conflict resolution function, in alphabetical order.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>priority_group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ADD_UPDATE_RESOLUTION only. If using a priority group or site priority group, the name of the group.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>function_name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If designating a user-defined conflict resolution method, the name of the user function.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment on the conflict resolution method, visible in the DBA_REPRESOLUTION data dictionary view.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37776"
>16.5.1.1.1 Exception</A
></H4
><P
CLASS="para"
>The ADD_&lt;conflicttype&gt;RESOLUTION procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicatesequence</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Resolution method already exists with sequence number sequence_no for this column or priority group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>invalidmethod</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23340</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Resolution method method does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>invalidparameter</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23342</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Column(s) specified in parameter_column_name invalid</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingcolumn</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23334</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Specified column(s) do not exist in table oname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingconstraint</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23344</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Constraint constraint_name specified in ADD_UNIQUE_RESOLUTION does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingfunction</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23341</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>User-defined function function_name does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missinggroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23331</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_group does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table oname does not exist in the replication group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingprioritygroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23336</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>priority_group does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Datatype of one of the columns specified in parameter_column_name is not appropriate for the resolution method</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37870"
>16.5.1.1.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ADD_&lt;conflicttype&gt;_RESOLUTION:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>After this call, you must generate replication support for the table passed to oname.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37878"
>16.5.1.1.3 Examples</A
></H4
><P
CLASS="para"
>The following examples illustrate how to assign various conflict resolution methods to replicated tables. These examples use the products table used in earlier examples; for convenience, we've included its description here again.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>Sql&gt;desc products
Name	                        Null?             Type
 ---------------------  	---------	---
 PRODUCT_ID                     NOT NULL	NUMBER(9)
 PRODUCT_TYPE                   NOT NULL	NUMBER(6)
 CATALOG_ID                     NOT NULL	VARCHAR2(15)
 DESCRIPTION                    NOT NULL	VARCHAR2(30)
 REV_LEVEL                      NOT NULL	VARCHAR2(15)
 PRODUCTION_DATE                NOT NULL	DATE
 PRODUCTION_STATUS              NOT NULL	VARCHAR2(12)
 AUDIT_DATE                     NOT NULL	DATE
 AUDIT_USER                     NOT NULL	VARCHAR2(30)
 GLOBAL_NAME                    NOT NULL	VARCHAR2(20)</PRE
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37882"
>16.5.1.1.4 Examples of ADD_UPDATE_RESOLUTION</A
></H4
><P
CLASS="para"
>Assume that we have created a priority group PG_PRODUCTION_STATUS and have designated priorities to the full range of values for the column PRODUCTION_STATUS. The following call implements this priority group as the conflict handler that Oracle invokes first (because sequence_no = 1) when an update conflict occurs.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
	DBMS_REPCAT.ADD_UPDATE_RESOLUTION(
		sname		=&gt; 'SPROCKET',
		oname		=&gt; 'PRODUCTS',
		sequence_no	=&gt;	1,
		method		=&gt; 'PRIORITY GROUP',
		priority_group	=&gt; 'PG_PRODUCTION_STATUS',
		comment		=&gt; 'Update Res. 1 added on '||sysdate);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This next call assigns the column group CG_PRODUCT_MFG_COLS as the second update conflict resolution handler for table products. Oracle invokes this resolution method if and only if the first method failed to resolve the conflict.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
	DBMS_REPCAT.ADD_UPDATE_RESOLUTION(
		sname			=&gt; 'SPROCKET',
		oname			=&gt; 'PRODUCTS',
		colunn_group		=&gt; 'CG_PRODUCT_PRICE_COLS',
		method			=&gt; 'LATEST TIMESTAMP',
		parameter_column_name	=&gt; 'PRODUCTION_DATE',
		comment			=&gt; 'Update Res. 2 added on '||sysdate);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>The following example assigns a third update conflict resolution handler to the products table. This handler would simply ignore an update if the first two conflict handlers failed to resolve it.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
	DBMS_REPCAT.ADD_UPDATE_RESOLUTION(
		sname			=&gt; 'SPROCKET',
		oname			=&gt; 'PRODUCTS',
		sequence_no		=&gt; 3,
		method			=&gt; 'DISCARD',
		comment			=&gt; 'Update Res. 3 added on '||sysdate);
END;</PRE
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37890"
>16.5.1.1.5 Examples of ADD_UNIQUE_RESOLUTION</A
></H4
><P
CLASS="para"
>Uniqueness conflicts may occur during inserts; for example, two different sites may insert a record with the same primary key. While you can guard against this sort of conflict by partitioning primary key values among your sites, this design is not always possible. Note that if you wish to use the APPEND SITE NAME or APPEND SEQUENCE NUMBER methods, the column with the unique constraint must specify a character datatype (CHAR or VARCHAR2). This choice of datatype may not be appropriate for a primary key column.</P
><P
CLASS="para"
>The following example configures the products table to discard records that result in uniqueness conflicts:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
	DBMS_REPCAT.ADD_UNIQUE_RESOLUTION(
		sname			=&gt; 'SPROCKET',
		oname			=&gt; 'PRODUCTS',
		constraint_name		=&gt; 'PK_PRODUCTS',
		sequence_no		=&gt; 1,
		method			=&gt; 'DISCARD',
		parameter_column	=&gt; 'PRODUCT_ID',
		comment			=&gt; 'Unique Res. 1 added on '||sysdate);
END;</PRE
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37895"
>16.5.1.1.6 Examples of ADD_DELETE_RESOLUTION</A
></H4
><P
CLASS="para"
>As we have mentioned, Oracle does not provide any built-in conflict resolution techniques for delete conflicts. In fact, Oracle recommends that applications that use the advanced replication option avoid delete entirely, and simply use a status column to flag records as deleted. However, if you must delete rows, you can write your own conflict resolution method and assign it to your table. See the <A
CLASS="xref"
HREF="ch16_05.htm#ch16-SECT-5.1.1"
>Section 16.5.1.1.7, "User-defined methods"</A
>" section later in this chapter.</P
><P
CLASS="para"
>The following function serves as a delete conflict handler for the products table. It forces a delete against the table. </P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	CREATE OR REPLACE FUNCTION products_delete_handler (
		old_product_id		  IN OUT NUMBER,
		Old_product_type	  IN OUT NUMBER,
		old_catalog_id	          IN OUT VARCHAR2,
		old_description		  IN OUT VARCHAR2,
		old_rev_level		  IN OUT VARCHAR2,
		old_production_date	  IN OUT DATE,
		old_production_status	  IN OUT VARCHAR2,
		old_audit_date		  IN OUT DATE,
		old_audit_user		  IN OUT VARCHAR2,
		old_global_name		  IN OUT VARCHAR2,
		ignore_discard_flag	  OUT BOOLEAN ) RETURN BOOLEAN IS

	BEGIN
		DELETE	FROM products
		WHERE	product_id = old_product_id;

		ignore_discard_flag := TRUE;

		RETURN TRUE;
	END products_delete_handler;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This final example designates the function products_delete_handler from the previous example and a user-defined delete conflict handler for the PRODUCTS_TABLE:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	DECLARE param_col_list DBMS_REPCAT.VARCHAR2S;
	BEGIN
		param_col_list( 1) := 'PRODUCT_ID';
		param_col_list( 2) := 'PRODUCT_TYPE';
		param_col_list( 3) := 'CATALOG_ID';
		param_col_list( 4) := 'DESCRIPTION';
		param_col_list( 5) := 'REV_LEVEL';
		param_col_list( 6) := 'PRODUCTION_DATE';
		param_col_list( 7) := 'PRODUCTION_STATUS',
		param_col_list( 8) := 'AUDIT_DATE',
		param_col_list( 9) := 'AUDIT_USER',
		param_col_list(10) := 'GLOBAL_NAME',

		DBMS_REPCAT.ADD_DELETE_RESOLUTION(
			sname			=&gt; 'SPROCKET',
			oname			=&gt; 'PRODUCTS',
			sequence_no		=&gt; 1,
			paramekter_column_name	=&gt; param_col_list,
			function_name		=&gt; 'PRODUCTS_DELETE_HANDLER',
			comment			=&gt; 'Del handler 1 added <A
CLASS="indexterm"
NAME="ch16-idx-963253-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963253-1"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963253-2"
></A
>on ' ||  <A
CLASS="indexterm"
NAME="ch16-idx-963249-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963249-1"
></A
>sysdate);
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
></P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="ch16-19914"
>16.5.1.1.7 User-defined methods</A
></H4
><P
CLASS="para"
>User-defined methods must meet the following criteria:</P
><OL
CLASS="orderedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>Must be a PL/SQL function.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Must return BOOLEAN TRUE if successful, FALSE otherwise.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Must not perform DDL.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Must not perform transaction control (e.g., ROLLBACK).</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Must not perform session control (e.g., ALTER SESSION).</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Must not perform system control (e.g. ALTER SYSTEM).</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Update handlers accept old, new, and current column values for columns specified in parameter_column_name parameter of ADD_UPDATE_RESOLUTION. Old and current column values are IN parameters, new column values are IN OUT parameters.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Delete handlers accept old column values as IN parameters for all table columns.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Uniqueness handlers accept new values as IN OUT parameters for columns specified in the parameter_column_name parameter of ADD_UNIQUE_RESOLUTION.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Last parameter is ignore_discard_flag OUT BOOLEAN, which is set to TRUE if new values are to be discarded, or FALSE if they are to be  <A
CLASS="indexterm"
NAME="ch16-idx-963881-0"
></A
>accepted.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-5.1.2"
>16.5.1.2 The DBMS_REPCAT.DROP_&lt;conflicttype&gt;_RESOLUTION procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch16-idx-963272-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963272-1"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963272-2"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963272-3"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963272-4"
></A
>DROP_&lt;conflicttype&gt;_RESOLUTION procedure removes a conflict resolution type from a table. The value of &lt;conflicttype&gt; can be UPDATE, UNIQUE, DELETE. Here are the specifications:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DROP_UPDATE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    column_group IN VARCHAR2,
    sequence_no IN NUMBER) ;

PROCEDURE DBMS_REPCAT.DROP_UNIQUE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    constraint_name IN VARCHAR2,
    sequence_no IN NUMBER) ;

PROCEDURE DBMS_REPCAT.DROP_DELETE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    sequence_no IN NUMBER) ;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema containing the replicated schema. Defaults to current user.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replicated table.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Column group for which the conflict resolution method is defined.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>constraint_name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>For procedure DROP_UNIQUE_RESOLUTION only. Name of the constraint name or unique index for which the conflict resolution method is defined.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sequence_no</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number indicating when this conflict resolution method is applied relative to other conflict resolution methods defined for the same column group or priority group.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-37986"
>16.5.1.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The DROP_&lt;conflicttype&gt;_RESOLUTION procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table oname does not exist in the replication group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23306</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema sname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-38024"
>16.5.1.2.2 Restrictions</A
></H4
><P
CLASS="para"
>Note these restrictions on calling DROP_&lt;conflicttype&gt;_RESOLUTION:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>After this call, you must generate replication support for the table passed to oname.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-38032"
>16.5.1.2.3 Example</A
></H4
><P
CLASS="para"
>In this example we drop the delete handler (created in a previous example) from the products table:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.DROP_DELETE_RESOLUTION(
			sname		=&gt; 'SPROCKETS',
			oname		=&gt; 'PRODUCTS',
			sequence_no	=&gt; 1);
	<A
CLASS="indexterm"
NAME="ch16-idx-963266-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963266-1"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963266-2"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963266-3"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963266-4"
></A
>END;
</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch16-SECT-5.1.3"
>16.5.1.3 The DBMS_REPCAT.COMMENT_ON_&lt;conflicttype&gt;_RESOLUTION procedure</A
></H4
><P
CLASS="para"
>You can use the <A
CLASS="indexterm"
NAME="ch16-idx-963283-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963283-1"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963283-2"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963283-3"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963283-4"
></A
>COMMENT_ON_&lt;conflicttype&gt;_RESOLUTION procedure to create or replace a comment for a given resolution type. You can see this comment in the DBA_REPRESOLUTION data dictionary view. Following are the specifications for the three values of &lt;conflicttype&gt; (UPDATE, UNIQUE, DELETE):</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.COMMENT_ON_UPDATE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    column_group IN VARCHAR2,
    sequence_no IN NUMBER,
    comment IN VARCHAR2);

PROCEDURE DBMS_REPCAT.COMMENT_ON_UNIQUE_RESOLUTION
   (sname IN VARCHAR2,
    oname in VARCHAR2,
    constraint_name IN VARCHAR2,
    sequence_no IN NUMBER,
    comment IN VARCHAR2) ;

PROCEDURE DBMS_REPCAT.COMMENT_ON_DELETE_RESOLUTION
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    sequence_no IN NUMBER,
    comment IN VARCHAR2) ;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which object oname belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the object</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of column group for which conflict resolution method is defined</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>constraint_name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of unique constraint the method resolves (COMMENT_ON_UNIQUE_RESOLUTION only)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sequence_no</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Sequence number associated with the resolution method</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-38098"
>16.5.1.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_&lt;conflicttype&gt;_RESOLUTION procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingresolution</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23343</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No resolution method exists for column_group and sequence_no</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-38136"
>16.5.1.3.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling COMMENT_ON_<A
CLASS="systemitem.url"
HREF="_.html"
>&lt;</A
>conflicttype&gt;_RESOLUTION:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>After this call, you must generate replication support for the table passed to oname.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-38145"
>16.5.1.3.3 Example</A
></H4
><P
CLASS="para"
>This example replaces the comment on the unique resolution method created in a previous example:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.COMMENT_ON_UNIQUE_RESOLUTION(
			sname			=&gt; 'SPROCKET',
			oname			=&gt; 'PRODUCTS',
			constraint_name		=&gt; 'PK_PRODUCTS',
			sequence_no		=&gt; 1,
			comment			=&gt; 'New comment added on '||sysdate);
	<A
CLASS="indexterm"
NAME="ch16-idx-963285-0"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963285-1"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963285-2"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963285-3"
></A
><A
CLASS="indexterm"
NAME="ch16-idx-963285-4"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_04.htm#ch16-SECT-4.3.1"
TITLE="16.4 Site Priority Groups with DBMS_REPCAT"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 16.4 Site Priority Groups with DBMS_REPCAT"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Oracle Built-in Packages"
><IMG
SRC="../gifs/txthome.gif"
ALT="Oracle Built-in Packages"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch16_06.htm#ch16-SECT-6.1.2"
TITLE="16.6 Monitoring Conflict Resolution with DBMS_REPCAT"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 16.6 Monitoring Conflict Resolution with DBMS_REPCAT"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>16.4 Site Priority Groups with DBMS_REPCAT</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>16.6 Monitoring Conflict Resolution with DBMS_REPCAT</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><IMG SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The Oracle Library Navigation">

<P><font size="-1">
<a href="../copyrght.htm#copy">Copyright (c) 2000</a> O'Reilly &amp; Associates. All rights reserved.
</font></P>

<MAP NAME="map">

<AREA SHAPE="RECT"
COORDS="0,0,35,30"
HREF="../index.htm"
ALT="Library Home">

<AREA SHAPE="RECT"
COORDS="40,0,95,30"
HREF="../prog2/index.htm"
ALT="Oracle PL/SQL Programming, 2nd. Ed.">

<AREA SHAPE="RECT"
COORDS="100,0,200,30"
HREF="../guide8i/index.htm"
ALT="Guide to Oracle 8i Features">

<AREA SHAPE="RECT"
COORDS="205,0,245,30"
HREF="index.htm"
ALT="Oracle Built-in Packages">

<AREA SHAPE="RECT"
COORDS="250,0,320,30"
HREF="../advprog/index.htm"
ALT="Advanced PL/SQL Programming with Packages">

<AREA SHAPE="RECT"
COORDS="325,0,420,30"
HREF="../webapp/index.htm"
ALT="Oracle Web Applications">

<AREA SHAPE="RECT"
COORDS="425,0,490,30"
HREF="../langpkt/index.htm"
ALT="Oracle PL/SQL Language Pocket Reference">

<AREA SHAPE="RECT"
COORDS="495,0,570,30"
HREF="../bipkt/index.htm"
ALT="Oracle PL/SQL Built-ins Pocket Reference">
</MAP>

</BODY
>
<!-- Mirrored from liso.cs.pusan.ac.kr by HTTrack Website Copier/3.x [XR&CO'2001] -->
</HTML
>
