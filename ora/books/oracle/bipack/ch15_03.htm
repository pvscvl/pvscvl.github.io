<HTML
><HEAD
><TITLE
>[Chapter 15] 15.3 DBMS_REPCAT: Replication Environment Administration</TITLE
><META
NAME="DC.Creator"
CONTENT="Steven Feuerstein, Charles Dye &amp; John Beresniewicz"><META
NAME="DC.Date"
CONTENT="2000-04-29T18:02:12Z"><META
NAME="DC.Format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.Identifier"
CONTENT="O'Reilly and Associates-1-56592-375-8E"><META
NAME="DC.Language"
CONTENT="en-US"><META
NAME="DC.Publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.Source"
CONTENT="1-56592-375-8E"
SCHEME="ISBN"><META
NAME="DC.Subject.Keyword"
CONTENT="Oracle Packages"><META
NAME="DC.Title"
CONTENT="Oracle Built-in Packages"><META
NAME="DC.Type"
CONTENT="Text.Monograph"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REL="stylesheet"
TYPE="text/css"
HREF="../style/style1.css"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch15_01.htm"
TITLE="15. Advanced Replication"><LINK
REL="prev"
HREF="ch15_02.htm#ch15-SECT-2.1.1"
TITLE="15.2 DBMS_REPCAT_ADMIN: Setting Up More Administrator Accounts"><LINK
REL="next"
HREF="ch15_04.htm#ch15-SECT-4.2.1"
TITLE="15.4 DBMS_OFFLINE_OG: Performing Site Instantiation"></HEAD
><BODY
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Oracle Built-in Packages"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Oracle Built-in Packages"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch15_02.htm#ch15-SECT-2.1.1"
TITLE="15.2 DBMS_REPCAT_ADMIN: Setting Up More Administrator Accounts"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 15.2 DBMS_REPCAT_ADMIN: Setting Up More Administrator Accounts"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><SPAN
CLASS="NAVTITLE"
><A
CLASS="chapter"
REL="up"
HREF="ch15_01.htm"
TITLE="15. Advanced Replication"
>Chapter 15<BR>Advanced Replication</A
></SPAN
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch15_04.htm#ch15-SECT-4.2.1"
TITLE="15.4 DBMS_OFFLINE_OG: Performing Site Instantiation"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 15.4 DBMS_OFFLINE_OG: Performing Site Instantiation"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch15-33582"
>15.3 DBMS_REPCAT: Replication Environment Administration</A
></H2
><P
CLASS="para"
>The DBMS_REPCAT package performs many advanced replication operations, including some described in other chapters. This section describes only the DBMS_REPCAT programs that you'll use to administer the advanced replication environment.</P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.1"
>15.3.1 Getting Started with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960604-0"
></A
>DBMS_REPCAT package is <A
CLASS="indexterm"
NAME="ch15-idx-960609-0"
></A
>created when the Oracle database is installed. The <I
CLASS="filename"
>dbmsrepc.sql</I
><A
CLASS="indexterm"
NAME="ch15-idx-960610-0"
></A
> script (found in the built-in packages source directory, as described in <A
CLASS="xref"
HREF="ch01_01.htm"
>Chapter 1</A
>) contains the source code for this package's specification. This script is called by <I
CLASS="filename"
>catrep.sql</I
>, which must be run to install the advanced replication packages. The script creates the public synonym DBMS_REPCAT. The package procedure <A
CLASS="indexterm"
NAME="ch15-idx-962840-0"
></A
>DBMS_REPCAT_AUTH.GRANT_SURROGATE_REPCAT grants EXECUTE privileges on the package to the specified grantee. In addition, the package owner (SYS) and users with the EXECUTE ANY PROCEDURE system privilege may execute it.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.1.1"
>15.3.1.1 DBMS_REPCAT programs</A
></H4
><P
CLASS="para"
><A
CLASS="xref"
HREF="ch15_03.htm#ch15-SECT-3.1.1"
>Table 15.3</A
> <A
CLASS="indexterm"
NAME="ch15-idx-960611-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960611-1"
></A
>lists in alphabetical order the DBMS_REPCAT procedures used to maintain an advanced replication environment. In the sections that follow, we divide these programs by category (replication groups, replication objects, replication support, master sites, the "repcatlog" queue, and quiescence); each section includes a table showing the programs available in that category. For example, the section <A
CLASS="xref"
HREF="ch15_03.htm#ch15-SECT-3.1.1"
>Section 15.3.2, "Replication Groups with DBMS_REPCAT"</A
>" describes only the replication group programs.</P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch15-24772"
>Table 15.3: DBMS_REPCAT Programs (Replication Administration Only) </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Use in SQL?</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960617-0"
></A
>ADD_MASTER_DATABASE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Adds master database to replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960618-0"
></A
>ALTER_MASTER_PROPAGATION</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Alters propagation method for a replication group at a given site (options are SYNCHRONOUS or ASYNCHRONOUS)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960619-0"
></A
>ALTER_MASTER_REPOBJECT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Performs DDL on a replicated object</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960614-0"
></A
>COMMENT_ON_REPGROUP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Creates or updates a comment on a replication group; visible in DBA_REPGROUP data dictionary view</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960620-0"
></A
>COMMENT_ON_REPSITES</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Creates or updates a comment on a replication site; visible in DBA_REPSITES data dictionary view</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960621-0"
></A
>COMMENT_ON_REPOBJECT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Creates or updates a comment on a replicated object; visible in DBA_REPOBJECT data dictionary view</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960612-0"
></A
>CREATE_MASTER_REPGROUP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Creates a master replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960615-0"
></A
>CREATE_MASTER_REPOBJECT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Adds an object to a replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960622-0"
></A
>DO_DEFERRED_REPCAT_ADMIN</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Performs outstanding administrative tasks at local master site</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960613-0"
></A
>DROP_MASTER_REPGROUP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Drops a replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960623-0"
></A
>DROP_MASTER_REPOBJECT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Drops an object from a replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960624-0"
></A
>EXECUTE_DDL</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Specifies DDL to execute at master sites</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960625-0"
></A
>GENERATE_REPLICATION_PACKAGE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Generates packages required to replicate a given table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960626-0"
></A
>GENERATE_REPLICATION_SUPPORT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Generates triggers, packages, and procedures required to replicate a given table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960627-0"
></A
>GENERATE_REPLICATION_TRIGGER</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Generates triggers and packages required to replicate a given table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960628-0"
></A
>PURGE_MASTER_LOG</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Deletes entries from the local RepCatLog (DBA_REPCATLOG)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960629-0"
></A
>RELOCATE_MASTERDEF</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Changes the master definition site for a replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960630-0"
></A
>REMOVE_MASTER_DATABASES</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Drops one or more master databases from a replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960631-0"
></A
>REPCAT_IMPORT_CHECK</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Confirms a replicated object's validity after an import</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960632-0"
></A
>RESUME_MASTER_ACTIVITY</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Enables propagation of a replication group that had been quiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-962912-0"
></A
>SEND_AND_COMPARE_OLD_VALUES</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Reduces propagation overhead by not sending unchanged columns to a master site.</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960616-0"
></A
>SET_COLUMNS</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Designates alternative column(s) to use instead of a primary to uniquely identify rows of a replicated table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960633-0"
></A
>SUSPEND_MASTER_ACTIVITY</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Quiesces a replication group</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-960634-0"
></A
>WAIT_MASTER_LOG</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Determines whether asynchronous DML has been applied at a master site</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.1.2"
>15.3.1.2 Exceptions</A
></H4
><P
CLASS="para"
><A
CLASS="xref"
HREF="ch15_03.htm#ch15-SECT-3.1.1"
>Table 15.4</A
> describes <A
CLASS="indexterm"
NAME="ch15-idx-960635-0"
></A
>exceptions raised by the DBMS_REPCAT programs described in this chapter. </P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch15-15117"
>Table 15.4: DBMS_REPCAT Exceptions </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with remote site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>dbnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23375</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Operation not available for current version of RDBMS</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddlfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23318</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DDL failed during object creation or maintenance activity</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicateobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23309</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replicated object already exists</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicateschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23307</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Attempt to create duplicate replication group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>fullqueue</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23353</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Attempt to drop replication group or schema for which RPC entries are queued</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>invalidpropmode</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23380</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Invalid propagation mode (used internally)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingcolumn</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23334</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Reference to nonexistent column</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missinggroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23331</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23306</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingvalue</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23337</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Missing value (used internally)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23313</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site is not a master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site is not a master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonsnapshot</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23314</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site is not a snapshot site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>norepoption</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23364</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication option not installed</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notnormal</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23311</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group is not in normal propagation mode</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>paramtype</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23325</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Invalid parameter type (used internally)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>reconfigerror</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23316</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Attempt to drop master definition site with REMOVE_MASTER_DATABASES</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>repnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23376</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication versions not compatible (used internally)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Attempt to replicate nonsupported datatype</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>version</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23315</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication versions not compatible (used internally)</P
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-15645"
>15.3.2 Replication Groups with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>Once you have created administrative accounts for your advanced replication environment and established the appropriate database links among your various sites, you are ready for the next step, which is to create a replication group. Here are the procedures you will use:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.CREATE_MASTER_REPGROUP</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.DROP_MASTER_REPGROUP</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.COMMENT_ON_REPGROUP</TD
></TR
></TABLE
><P
CLASS="para"
>The following sections describe these programs in detail. </P
><DIV
CLASS="sidebar"
><H4
CLASS="sidebar"
><A
CLASS="title"
NAME="ch15-28316"
>Replication Groups versus Replication Schema</A
></H4
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-961947-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-961947-1"
></A
>Prior to Oracle 7.3, the concept of a <EM
CLASS="emphasis"
>replication group</EM
> does not exist. Instead, you have to replicate <EM
CLASS="emphasis"
>replication schema groups</EM
>. As you would suspect, schema groups can contain only objects from a single schema. In addition, the name of the group has to be the same as the name of the schema.</P
><P
CLASS="para"
>In Version 7.3, Oracle introduced replication groups, which can contain objects from one or more schema. Replication groups do not have to have the same name as any of the schema they contain. In Oracle 8.0, Oracle improved the manageability of replication groups by allowing you to quiesce a single replication group at a time. (The <EM
CLASS="emphasis"
>syntax</EM
> for quiescing a single group exists in 7.3, but it does not work!)</P
><P
CLASS="para"
>As you configure and manage a replicated environment, you may notice that for each program that operates on a replication group, such as DBMS_REPCAT.GRANT_ADMIN_ANY_REPGROUP, there is a corresponding procedure that operates on a replication schema, such as DBMS_REPCAT.GRANT_ADMIN_ANY_REPSCHEMA. You may also notice that many of the Oracle 7.3 procedure calls contain an undocumented sname parameter.</P
><P
CLASS="para"
>Oracle provided these procedures and parameters for backward compatibility only. Although the REPSCHEMA procedures exist in Versions 7.3 and 8.0, you are strongly encouraged <EM
CLASS="emphasis"
>not</EM
> to use them, as their support will not continue indefinitely. The sname parameters are already gone from many programs in the first Oracle8 release.</P
></DIV
><P
CLASS="para"
><A
CLASS="xref"
HREF="ch15_03.htm#ch15-SECT-3.1.1"
>Figure 15.1</A
> shows how replication groups work.</P
><H4
CLASS="figure"
><A
CLASS="title"
NAME="ch15-16482"
>Figure 15.1: . Replication groups</A
></H4
><IMG
CLASS="graphic"
SRC="figs/obip.1501.gif"
ALT="Figure 15.1"><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="AUTOID-30045"
>15.3.2.1 The DBMS_REPCAT.CREATE_MASTER_REPGROUP procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960637-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960637-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960637-2"
></A
>CREATE_MASTER_REPGROUP procedure creates a replication group at the master definition site. Here's the specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.CREATE_MASTER_REPGROUP
   (gname IN VARCHAR2,
    group_comment  IN VARCHAR2 := '',
    master_comment IN VARCHAR2 := '',
    qualifier      IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the new replication group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>group_comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment for new replication group visible in DBA_REPGROUP data dictionary view </P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master_comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment for the calling site, visible in DBA_REPSITES data dictionary view</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>qualifier</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>For internal use</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30089"
>15.3.2.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The CREATE_MASTER_REPGROUP procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddlfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23318</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to create REP$WHAT_AM_I package or package body</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicaterepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23374</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname already exists</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicateschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23307</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema gname is already a replication group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The gname was not specified correctly</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>norepoption</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23364</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication option not installed</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>dbnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23375</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The gname is not a schema name, and RDBMS is a pre-7.3 release</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30148"
>15.3.2.1.2 Restrictions</A
></H4
><P
CLASS="para"
>You must be connected to the replication administrator account (typically REPADMIN) to call CREATE_MASTER_REPGROUP.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30151"
>15.3.2.1.3 Example</A
></H4
><P
CLASS="para"
>The following call creates a replication group named SPROCKET:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.CREATE_MASTER_REPGROUP(	gname=&gt; 'SPROCKET', -
	group_comment =&gt; 'Replication group SPROCKET created on
		'||sysdate|| ' by ' ||user, -
	master_comment =&gt; 'Master  Definition Site created on
	   '||sysdate|| ' by ' ||user);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This call creates a replication group with no objects. The site from which you make the call is the <A
CLASS="indexterm"
NAME="ch15-idx-960642-0"
></A
>master definition site for the group.</P
><P
CLASS="para"
>For an additional example, see the <I
CLASS="filename"
>repgroup.sql </I
><A
CLASS="indexterm"
NAME="ch15-idx-960641-0"
></A
>file on the companion disk. That example queries the DBA_REPGROUP data dictionary view and lists all replication groups in the <A
CLASS="indexterm"
NAME="ch15-idx-960639-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960639-1"
></A
>database.</P
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.2.1"
>15.3.2.2 The DBMS_REPCAT.DROP_MASTER_REPGROUP procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960679-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960679-1"
></A
>DROP_MASTER_REPGROUP procedure drops one or more replication groups at the master definition site. Here's the specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DROP_MASTER_REPGROUP
   (gname IN VARCHAR2,
    drop_contents IN BOOLEAN := FALSE,
    all_sites IN BOOLEAN := FALSE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>all_sites</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE and call is the master definition site, then drop the replication group from all sites in the environment</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>drop_contents</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE, drop the objects in the replication group as well as the group itself</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the new replication group</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30200"
>15.3.2.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The DROP_MASTER_REPGROUP procedure raises the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with all masters, and all_sites is TRUE</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>fullqueue</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23353</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Outstanding transactions queued for replication group gname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname is not specified correctly</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23313</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master definition site, and all_sites is TRUE</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30252"
>15.3.2.2.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling DROP_MASTER_REPGROUP:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must be connected to the replication administrator account (typically REPADMIN) to call DROP_MASTER_REPGROUP.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>DROP_MASTER_REPGROUP does not drop all <A
CLASS="indexterm"
NAME="ch15-idx-960683-0"
></A
>snapshots if the gname parameter is the master of any snapshot groups. Dropping a master site does not necessarily remove it from the DBA_REPSITES at other masters.</P
></LI
></UL
><BLOCKQUOTE
CLASS="tip"
><P
CLASS="para"
><STRONG
>TIP:</STRONG
> <A
CLASS="indexterm"
NAME="ch15-idx-960684-0"
></A
>Before calling DROP_MASTER_REPGROUP, call DBMS_REPCAT.REMOVE_MASTER_DATABASES from the master definition site to remove all masters for which you plan to drop the group and that do not contain any other replication groups. In addition, you can avoid the full queue error by quiescing the replication group before attempting to drop the replication group.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30268"
>15.3.2.2.3 Example</A
></H4
><P
CLASS="para"
>This call, from the master definition site, drops a replication group from all sites where it exists:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.DROP_MASTER_REPGROUP(
        gname =&gt; 'SPROCKET',
        all_sites =&gt; TRUE );
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>The next call drops a replication group and all of its objects from the calling site, assumed to be a master site (not a master definition site):</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.DROP_MASTER_REPGROUP(
        gname =&gt; 'SPROCKET',
        drop_contents =&gt; TRUE );
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>If you want to drop a replication group from all master sites, along with the replicated objects, you can do the following:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.DROP_MASTER_REPGROUP(
        gname =&gt; 'SPROCKET',
        all_sites =&gt; TRUE
        drop_contents =&gt; TRUE );
 <A
CLASS="indexterm"
NAME="ch15-idx-960681-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960681-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.2.2"
>15.3.2.3 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960685-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960685-1"
></A
>COMMENT_ON_REPGROUP procedure</A
></H4
><P
CLASS="para"
>This procedure adds a new schema comment field to the DBA_REPCAT data dictionary view, or changes an existing one. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DMBS_REPCAT.COMMENT_ON_REPGROUP
   (gname IN VARCHAR2 := '',
    comment IN VARCHAR2,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DMBS_REPCAT.COMMENT_ON_REPGROUP
   (gname IN VARCHAR2,
    comment IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group to which comment is added</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> As noted in the earlier sidebar entitled <A
CLASS="xref"
HREF="ch15_03.htm#ch15-SECT-3.1.1"
>the sidebar "Replication Groups versus Replication Schema"</A
>," you can see that Oracle has dispensed with the sname parameter in Oracle8.</P
></BLOCKQUOTE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30320"
>15.3.2.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_REPROUP procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with one or more master sites</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missinggroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23331</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30358"
>15.3.2.3.2 Restrictions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_REPGROUP procedure must be called from the master definition site. </P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30361"
>15.3.2.3.3 Example</A
></H4
><P
CLASS="para"
>This call adds or replaces the comment in DBA_REPGROUP for the SPROCKET replication group:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.COMMENT_ON_REPGROUP(
        gname 'SPROCKET',
        comment =&gt; 'Comment added on '||sysdate|| ' by '||user);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>COMMENT_ON_REPGROUP queues an RPC to update the field at all other master <A
CLASS="indexterm"
NAME="ch15-idx-960687-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960687-1"
></A
>sites.</P
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.3"
>15.3.3 Replicated Objects with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>After you have created your replication group(s) (with or without comments), you are ready to add, alter, and remove member objects. Here are the procedures you need:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.CREATE_MASTER_REPOBJECT</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.SET_COLUMNS</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.DROP_MASTER_REPOBJECT</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.COMMENT_ON_REPOBJECT</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.ALTER_MASTER_REPOBJECT</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.EXECUTE_DDL</TD
></TR
></TABLE
><P
CLASS="para"
>The following sections describe these programs in detail.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.3.1"
>15.3.3.1 The DBMS_REPCAT.CREATE_MASTER_REPOBJECT procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960689-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960689-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960689-2"
></A
>CREATE_MASTER_REPOBJECT procedure creates a replicated object. Its specification follows:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.CREATE_MASTER_REPOBJECT(
   sname IN VARCHAR2,
   oname IN VARCHAR2,
   type IN VARCHAR2,
   use_existing_object IN BOOLEAN := TRUE,
   ddl_text IN VARCHAR2 := NULL,
   comment IN VARCHAR2 := '',
   retry IN BOOLEAN := FALSE,
   copy_rows IN BOOLEAN := TRUE,
   gname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which oname belongs.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the object to be added.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>type</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object type. Valid types: TABLE, INDEX, SYNONYM, TRIGGER, VIEW, PROCEDURE, FUNCTION, PACKAGE, and PACKAGE BODY.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>use_existing_object</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Set to TRUE to reuse existing objects with the same name and structure at master sites.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddl_text</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Text of DDL statement to create object oname (use this parameter if and only if object does not already exist).</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment on replicated object, visible in DBA_REPOBJECT data dictionary view.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>retry</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Flag indicating that this call is a reattempt of an earlier call. An attempt is made to create object only at master sites where it does not exist with a status of valid.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>copy_rows</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Populate tables and other master sites with data from master definition site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which oname should be added.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30448"
>15.3.3.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The CREATE_MASTER_REPOBJECT procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not all master sites are reachable</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddlfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23309</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname already exists in replication group gname, and retry is not set to TRUE</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicateobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23374</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname already exists</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site for replication group gname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The type is not supported</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30514"
>15.3.3.1.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling CREATE_MASTER_REPOBJECT:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>This procedure must be called from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must already exist and be quiesced.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30522"
>15.3.3.1.3 Example</A
></H4
><P
CLASS="para"
>This section contains a series of examples showing how to create replication objects.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30525"
>15.3.3.1.4 Adding an existing table to a replication group</A
></H4
><P
CLASS="para"
>This call adds table SPROCKET. PRODUCTS to the replication group SPROCKET:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.CREATE_MASTER_REPOBJECT(sname   =&gt;    'SPROCKET', 
                                        oname   =&gt;    'PRODUCTS', 
                                        type    =&gt;    'TABLE', 
                                        gname   =&gt;    'SPROCKET');
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Since we have not specified ddl_text in this example, the table must already exist.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30530"
>15.3.3.1.5 Creating an object at the master definition site</A
></H4
><P
CLASS="para"
>In this next example, we use CREATE_MASTER_REPOBJECT to create an object at the master definition site and add it to the replication group:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.CREATE_MASTER_REPOBJECT(
		sname 		=&gt; 	'SPROCKET', 
		oname 		=&gt;	'STATES', 
		type		=&gt;	'TABLE'
		ddl_text	=&gt;	'CREATE TABLE sprocket.states(state_id VARCHAR2(2),
   						state_name VARCHAR2(20))',
		gname 		=&gt;	'SPROCKET');
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Notice that the CREATE TABLE statement in this example specifies the owner of the table. Typically, the replication administrator account uses DBMS_REPCAT, not the owner of the replicated schema. When this is the case, you must be sure to specify the schema in which to create objects. One of the privileges granted through DBMS_REPCAT_ADMIN.GRANT_ADMIN_ANY_REPGROUP is CREATE ANY TABLE.</P
><P
CLASS="para"
>In all likelihood, you will not create objects with the CREATE_MASTER_REPOBJECT procedure very often, because doing so is rather clumsy for all but the most simple objects. But it's there if you want it.</P
><P
CLASS="para"
>Setting the retry and use_existing_object parameters to TRUE in this third example creates the table PRODUCTS at all master sites where it does not already exist; setting copy_rows to TRUE copies the data from the master definition site to the master sites.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.CREATE_MASTER_REPOBJECT(
			sname 			=&gt; 	'SPROCKET', 
			oname 			=&gt;	'PRODUCTS', 
			type			=&gt;	'TABLE', 
			use_existing_object 	=&gt;	TRUE,
			retry			=&gt;	TRUE,
			copy_rows		=&gt;	TRUE,
			gname 			=&gt;	'SPROCKET');
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>If tables exist at master sites, but do not have the same definition as at the master definition site, Oracle returns an error.</P
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> If you are incorporating an existing database into a replication group, you should consider precreating all of the objects at the new site manually, especially if the objects have interdependencies. At my sites, we always run a "catalog" script to create all schema objects, including triggers, primary and foreign key definitions, check constraints, etc. We then let Oracle generate the replication support objects. This methodology gives us complete control over how the schema is created, and we can easily reproduce the objects in other environments.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30541"
>15.3.3.1.6 Replicating a package</A
></H4
><P
CLASS="para"
>In this final example, we replicate a package. To replicate a package, you must make two calls to CREATE_MASTER_REPOBJECT, one for the package, and one for the package body.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.CREATE_MASTER_REPOBJECT
			sname						=&gt; 'SPROCKET',
			oname						=&gt; 'PRODUCTMAINT',
			type						=&gt; 'PACKAGE',
			use_existing_object				=&gt; TRUE,
			comment						=&gt; 'Added on '||sysdate,
			retry						=&gt; FALSE,
			gname						=&gt; 'SPROCKET');
 
		DBMS_REPCAT.CREATE_MASTER_REPOBJECT
			sname						=&gt; 'SPROCKET',
			oname						=&gt; 'PRODUCTMAINT',
			type						=&gt; 'PACKAGE BODY', 
			use_existing_object				=&gt; TRUE,
			comment						=&gt; 'Added on '||sysdate,
			retry						=&gt; FALSE,
			gname						=&gt; 'SPROCKET');
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>For an additional example, see the <I
CLASS="filename"
>repobjs.sql </I
><A
CLASS="indexterm"
NAME="ch15-idx-960690-0"
></A
> file on the companion disk. The example queries the DBA_REPOBJECT data dictionary view and lists all replicated objects in the <A
CLASS="indexterm"
NAME="ch15-idx-960723-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960723-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960723-2"
></A
>database.</P
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.3.2"
>15.3.3.2 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960691-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960691-1"
></A
>SET_COLUMNS procedure</A
></H4
><P
CLASS="para"
>When you replicate a table, Oracle must be able to uniquely identify each record in the table so that it can propagate changes to the correct row or rows. By default, the advanced replication facility uses the primary key to identify rows. However, if your table does not have a primary key, or if you wish to use a different criteria to uniquely identify records, you can use SET_COLUMNS to designate a pseudo-primary key.</P
><P
CLASS="para"
>Here's the specification for the package:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.SET_COLUMNS  
  (sname IN VARCHAR2,
   oname IN VARCHAR2,
   column_list IN VARCHAR2 | column_table IN
   dbms_utility.name_array);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema that owns the replicated table.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the table with the column_group.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_list</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>A comma-delimited list of column names to use as the pseudo-primary key. Use either column_list or column_table.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>A PL/SQL table of column names. Use either column_list or column_table.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30594"
>15.3.3.2.1 Exceptions</A
></H4
><P
CLASS="para"
>DBMS_REPCAT.SET_COLUMNS may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Invoking site is not master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingcolumn</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23334</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Column(s) specified do not exist in table oname</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30632"
>15.3.3.2.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling DBMS_REPCAT.SET_COLUMNS.</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>DBMS_REPCAT.SET_COLUMNS must be run from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The changes do not take effect until the next call to DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30640"
>15.3.3.2.3 Example</A
></H4
><P
CLASS="para"
>The following call designates columns COLOR, MODEL, and YEAR as the pseudo-primary key columns in table <A
CLASS="indexterm"
NAME="ch15-idx-960693-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960693-1"
></A
>SPROCKET.PRODUCTS:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>&#13;BEGIN
	DBMS_REPCAT.SET_COLUMNS(sname		=&gt; 'SPROCKET',
				oname		=&gt; 'PRODUCTS', 
				 column_list	=&gt; 'COLOR,MODEL,YEAR');
END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.3.3"
>15.3.3.3 The DBMS_REPCAT.DROP_MASTER_REPOBJECT procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960695-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960695-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960695-2"
></A
>DROP_MASTER_REPOBJECT procedure drops a replicated object at the master site. The specification follows:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPOBJECT.DROP_MASTER_REPOBJECT
  (sname IN VARCHAR2,
   oname IN VARCHAR2,
   type IN VARCHAR2,
   drop_objects IN BOOLEAN := FALSE);	</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.	</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which oname belongs.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the object to be added.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>type</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object type. Valid types: TABLE, INDEX, SYNONYM, TRIGGER, VIEW, PROCEDURE, FUNCTION, PACKAGE, and PACKAGE BODY.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>drop_objects</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE, drop the object at all master sites; default is FALSE.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30690"
>15.3.3.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The DROP_MASTER_REPOBJECT procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not all master sites are reachable</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site for replication group gname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The type is not supported</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30735"
>15.3.3.3.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling DROP_MASTER_REPOBJECT:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>This procedure must be called from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must already exist and be quiesced.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30743"
>15.3.3.3.3 Examples</A
></H4
><P
CLASS="para"
>The following call removes table SPROCKET.PRODUCTS from the SPROCKET replication group, but preserves the table:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.DROP_MASTER_REPOBJECT(
					sname 		=&gt; 'SPROCKET',
					oname		=&gt; 'PRODUCTS',
					type		=&gt; 'TABLE');
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Dropping a table from a replication group automatically drops all <A
CLASS="indexterm"
NAME="ch15-idx-960696-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960696-1"
></A
>replication triggers associated with the table and removes it from the replication data dictionary views.</P
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960729-0"
></A
>DROP_MASTER_REPOBJECT procedure can remove the object from the replication group, and also drop the object from the schema by setting the drop_objects parameter to TRUE, as shown in this example:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
	DBMS_REPCAT.DROP_MASTER_REPOBJECT(
				sname 			=&gt; 'SPROCKET',
				oname			=&gt; 'PRODUCTS',
				type			=&gt; 'TABLE',
				drop_objects		=&gt;  TRUE);
<A
CLASS="indexterm"
NAME="ch15-idx-960699-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960699-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.3.4"
>15.3.3.4 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960701-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960701-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960701-2"
></A
>EXECUTE_DDL procedure</A
></H4
><P
CLASS="para"
>DBMS_REPCAT.CREATE_MASTER_REPOBJECT and DBMS_REPCAT.DROP_MASTER_REPOBJECT do not support every type of object. For example, you cannot use these procedures to drop and create constraints. Enter DBMS_REPCAT's EXECUTE_DDL procedure.</P
><P
CLASS="para"
>The EXECUTE_DDL procedure allows you to perform DDL at multiple sites. The specification follows:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.EXECUTE_DDL
   (gname        IN VARCHAR2 := '',
    {master_list IN VARCHAR2 := NULL, | 
    master_table IN dbms_utility.dblink_array,}
    ddl_text     IN VARCHAR2,
    sname        IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replicated object group.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master_list</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comma-separated string of master site global names at which DDL is to be performed. If NULL (the default), DDL is applied at all master sites in the replication group. Use either parameter master_list or master_table.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master_table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>PL/SQL table of master site global names at which DDL is to be performed. Use either parameter master_list or master_table.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddl_text</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DDL statement to apply.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30814"
>15.3.3.4.1 Exceptions</A
></H4
><P
CLASS="para"
>The EXECUTE_DDL procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddlfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23318</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to perform DDL</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>At least one site in master_list or master_table is not a master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30859"
>15.3.3.4.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling EXECUTE_DDL:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>This procedure must be called from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must already exist. </P
></LI
></UL
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> The environment does not have to be quiesced.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30869"
>15.3.3.4.3 Example</A
></H4
><P
CLASS="para"
>This example creates an index on the SPROCKET.STATES table at sites D7CA.BIGWHEEL.COM and D7NY.BIGWHEEL.COM. Note that as in the example of CREATE_MASTER_REPOBJECT, we must specify the schema in which to create the <A
CLASS="indexterm"
NAME="ch15-idx-960703-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960703-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960703-2"
></A
>index.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>DECLARE vMasters VARCHAR2(30);
BEGIN
	vMasters := 'D7CA.BIGWHEEL.COM,D7NY.BIGWHEEL.COM';
	DBMS_REPCAT.EXECUTE_DDL(
		gname			=&gt; 'SPROCKET',
		master_list		=&gt; vMasters,
		ddl_text		=&gt;'CREATE INDEX sprocket.i_state_id ON
		   sprocket.tstates(state_id)',
		sname			=&gt;'SPROCKET');
END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.3.5"
>15.3.3.5 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960705-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960705-1"
></A
>ALTER_MASTER_REPOBJECT procedure</A
></H4
><P
CLASS="para"
>Just as you can propagate DDL to create objects with the EXECUTE_DDL procedure, you can also propagate DDL to alter objects with DBMS_REPCAT.ALTER_MASTER_REPOBJECT. Unlike EXECUTE_DDL, ALTER_MASTER_REPOBJECT does not allow you to specify a list of master sites; the call affects all masters. In other words, Oracle does not support site-specific customizations of replicated objects. The specification follows:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ALTER_MASTER_REPOBJECT
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    type IN VARCHAR2,
    ddl_text IN VARCHAR2,
    comment IN VARCHAR2 := '',
    retry IN BOOLEAN := FALSE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which object oname belongs.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the object to alter.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>type</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The oname object type. Supported types: FUNCTION, INDEX, PACKAGE, PACKAGE BODY, SYNONYM, TABLE, TRIGGER, and VIEW.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddl_text</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Text of DDL statement to apply.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment visible in DBA_REPOBJECT data dictionary view.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>retry</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If set to TRUE, procedure alters only objects whose status is not VALID at master sites.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30927"
>15.3.3.5.1 Exceptions</A
></H4
><P
CLASS="para"
>The ALTER_MASTER_REPOBJECT procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with one or more master site(s)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>ddlfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23318</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DDL at master definition site failed</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DDL on objects of type type is not supported</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30986"
>15.3.3.5.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ALTER_MASTER_REPOBJECT:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>This procedure must be run from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960709-0"
></A
>GENERATE_REPLICATION_SUPPORT for the altered object before resuming replication.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-30999"
>15.3.3.5.3 Example</A
></H4
><P
CLASS="para"
>If you set the retry parameter to TRUE, ALTER_MASTER_REPOBJECT applies the DDL only at sites where the object has a status of INVALID in the DBA_OBJECTS data dictionary view.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
DBMS_REPCAT.ALTER_MASTER_REPOBJECT(
		sname		=&gt; 'SPROCKET',
		oname		=&gt; 'PRODUCTMAINT',
		type		=&gt; 'PACKAGE BODY'
		ddl_text	=&gt; 'ALTER PACKAGE SPROCKET.PRODUCTMAINT COMPILE BODY',
		comment		=&gt; 'Recompiled on '||sysdate|| ' by '||user,
		retry		=&gt; TRUE );
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Notice that we specify the schema for the object that we are altering. As with DBMS_REPCAT.EXECUTE_DDL, the ALTER_MASTER_REPOBJECT procedure operates on objects in the caller's schema by default, and the caller is generally the replication administrator account, not the schema account.</P
><P
CLASS="para"
>This example alters the width of the state_id column in table SPROCKET.STATES at <EM
CLASS="emphasis"
>all</EM
> sites:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
DBMS_REPCAT.ALTER_MASTER_REPOBJECT(
		sname		=&gt; 'SPROCKET',
		oname		=&gt; 'PRODUCTMAINT',
		type		=&gt; 'PACKAGE BODY'
		ddl_text	=&gt; 'ALTER TABLE SPROCKET.STATES MODIFY
			 (STATE_ID NUMBER(10))' ,
		comment		=&gt; 'state_id widened on '||sysdate|| ' by '||user);
<A
CLASS="indexterm"
NAME="ch15-idx-960720-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960720-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.3.6"
>15.3.3.6 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960730-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960730-1"
></A
>COMMENT_ON_REPOBJECT procedure</A
></H4
><P
CLASS="para"
>As you have seen in the previous examples, you can associate comments with a replicated object when you create or alter it by passing a VARCHAR2 string to the comment parameter. You can see these comments in the object_comment field of DBA_REPOBJECTS.</P
><P
CLASS="para"
>You can also create comments without creating or altering the object with DBMS_REPCAT's COMMENT_ON_REPOBJECT procedure. The specification follows:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.COMMENT_ON_REPOBJECT
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    type IN VARCHAR2,
    comment IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of schema to which object belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the object</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>type</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object type</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31051"
>15.3.3.6.1 Exceptions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_REPOBJECT procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with one or more master sites</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object type is not supported</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31096"
>15.3.3.6.2 Restrictions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_REPOBJECT procedure must be called from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31099"
>15.3.3.6.3 Example</A
></H4
><P
CLASS="para"
>The following call updates the comment for replicated table SPROCKET.PRICES:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.COMMENT_ON_REPOBJECT(
			sname		=&gt;	'SPROCKET', -
			oname 		=&gt;	'PRICES', -
			type		=&gt;	'TABLE', -
			comment		=&gt;	'Headquarters updates this table once a month.');
<A
CLASS="indexterm"
NAME="ch15-idx-960732-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960732-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.4"
>15.3.4 Replication Support with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>The next step in the creation of a replicated environment is to generate replication support for your replicated tables, packages, and package bodies. In the case of replicated tables, this step creates a <A
CLASS="indexterm"
NAME="ch15-idx-960743-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960743-1"
></A
>BEFORE ROW trigger, called tablename$RT, and three packages:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>tablename$RP</TD
></TR
><TR
><TD
CLASS="member"
>tablename$RR</TD
></TR
><TR
><TD
CLASS="member"
>tablename$TP</TD
></TR
></TABLE
><P
CLASS="para"
>This code <A
CLASS="indexterm"
NAME="ch15-idx-960734-0"
></A
>propagates DML to remote sites, and applies DML on behalf of remote sites. We'll examine this code in the examples of these procedures:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.GENERATE_REPLICATION_PACKAGE</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER</TD
></TR
></TABLE
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.4.1"
>15.3.4.1 The DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960747-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960747-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960747-2"
></A
>GENERATE_REPLICATION_SUPPORT procedure generates support for replicated tables, packages, and package bodies. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT
   (sname            IN VARCHAR2,
    oname            IN VARCHAR2,
    type             IN VARCHAR2,
    package_prefix   IN VARCHAR2 := NULL,
    procedure_prefix IN VARCHAR2 := NULL,
    distributed      IN BOOLEAN  := TRUE,
    gen_objs_owner   IN VARCHAR2 := NULL,
    gen_rep2_trigger IN BOOLEAN := FALSE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT
   (sname             IN VARCHAR2,
    oname             IN VARCHAR2,
    type              IN VARCHAR2,
    package_prefix    IN VARCHAR2 := NULL,
    procedure_prefix  IN VARCHAR2 := NULL,
    distributed       IN BOOLEAN  := TRUE,
    gen_objs_owner    IN VARCHAR2 := NULL,
    min_communication IN BOOLEAN := TRUE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which table oname belongs.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of table for which package is being generated.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>type</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object type. Supported types: TABLE, PROCEDURE, PACKAGE, and PACKAGE BODY.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>package_prefix</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Prefix used to name generated wrapper package for packages and package bodies.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>procedure_prefix</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Prefix used to name generated wrapper package for procedures.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>distributed</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE (the default), generate replication support for the object at each master; if FALSE, copy the reapplication support objects generated at the master definition site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gen_objs_owner</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Specifies schema in which to generate replication support objects; if NULL (the default), objects are generated under schema sname.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gen_rep2_trigger</P
><P
CLASS="para"
> (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Provided for backward compatibility; if any masters are pre-7.3 releases, this must be set to TRUE. The default is FALSE.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>min_communication </P
><P
CLASS="para"
>(Oracle8 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE (the default), Oracle propagates changes with the minimum communication parameter, which avoids sending the old and new column values of unmodified fields.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31199"
>15.3.4.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The GENERATE_REPLICATION_SUPPORT procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with all masters</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>dbnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23375</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One or more masters is a pre-7.3 release</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table oname does not exist in schema sname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23306</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema sname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group to which object belongs is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Specified type is not a supported type</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31265"
>15.3.4.1.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling GENERATE_REPLICATION_SUPPORT:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site for each object in the replication group.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>If the object is not owned by the replication administrator account, the owner must have explicit EXECUTE privileges on the DBMS_DEFER package (described in <A
CLASS="xref"
HREF="ch17_01.htm"
>Chapter 17</A
>).</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch15-idx-962516-0"
></A
>If the <I
CLASS="filename"
>INIT.ORA</I
> parameter COMPATIBLE is 7.3 or higher, the distributed parameter must be set to TRUE.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>If the <I
CLASS="filename"
>INIT.ORA</I
> parameter COMPATIBLE is less than 7.3 in any snapshot sites, the gen_rep2_trigger parameter must be set to TRUE, and the COMPATIBLE parameter at the master definition site must be set to 7.3.0.0 or greater.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31285"
>15.3.4.1.3 Example</A
></H4
><P
CLASS="para"
>Suppose that we have a table SPROCKET.REON defined as follows:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Field Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Nullable?</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Datatype</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>region_id</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>NOT NULL</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>NUMBER(6)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>region_name</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>NOT NULL</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>VARCHAR2(15)</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>Assuming that we have already added this table to the SPROCKET replication group, here is how we would generate replication support for it:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
EXECUTE dbms_repcat.generate_replication_support( -
		sname =&gt; 'SPROCKET',	-
		oname =&gt; 'REGION',	-
		type =&gt; 'TABLE', 	-
		distributed =&gt; TRUE,	-
		gen_objs_owner=&gt; 'SPROCKET',	-
		gen_rep2_trigger=&gt; FALSE);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This call creates a trigger and three packages, as described in the following table. Oracle immediately creates these objects at the master definition site, as well as the participating master sites.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object Type</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>REGION$RT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>BEFORE ROW Trigger</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Invokes procedure REGION$TP.REPLICATE.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>REGION$RR</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Package + Body</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Invokes conflict resolution handler. REGIONS$RP invokes this procedure only in the event of a conflict.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>REGION$RP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Package + Body</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Applies DML that originated at a remote site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>REGION$TP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Package + Body</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Determines whether DML originates locally, and if so, queues as an RPC call the REGION$RP procedure corresponding to the type of DML (insert, update, or delete). Oracle propagates this RPC call to all master sites.</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>In the next sections, we examine what Oracle creates for us when we generate replication support for this <A
CLASS="indexterm"
NAME="ch15-idx-962874-0"
></A
>table.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31363"
>15.3.4.1.4 <A
CLASS="indexterm"
NAME="ch15-idx-962766-0"
></A
>The replication support trigger</A
></H4
><P
CLASS="para"
>The following example shows the text of the REGION$RT trigger that the GENERATE_REPLICATION_SUPPORT call generates:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>declare
  flag char;
begin
  if &quot;REGION$TP&quot;.active then
    if inserting then
      flag := 'I';
    elsif updating then
      flag := 'U';
    elsif deleting then
      flag := 'D';
    end if;
    &quot;REGION$TP&quot;.replicate(
      :old.&quot;REGION_ID&quot;,:new.&quot;REGION_ID&quot;,
      :old.&quot;REGION_NAME&quot;,:new.&quot;REGION_NAME&quot;,
      flag);
  end if;
end;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>As you can see, this BEFORE ROW trigger simply sets a flag to indicate the type of DML being performed: "I" for inserts, "U" for updates, and "D" for deletes. It then passes this flag, along with the new and old values of each field, to the REGIONS$TP.REPLICATE procedure.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31371"
>15.3.4.1.5 <A
CLASS="indexterm"
NAME="ch15-idx-962767-0"
></A
>The replication support packages</A
></H4
><P
CLASS="para"
>The replication package REGION$TP invokes DBMS_SNAPSHOT.I_AM_A_REFRESH (see the description of this procedure in <A
CLASS="xref"
HREF="ch14_01.htm"
>Chapter 14</A
>) to determine if the DML that fired the REGION$RT trigger originated locally, or if it is DML that another site has propagated. If the DML originated locally, then the REGION$TP builds a deferred call&nbsp;-- one of the REGION$RP procedures (REP_UPDATE, REP_INSERT, or REP_DELETE), as appropriate. Oracle queues this deferred call to all master sites. Here is the Oracle-generated code:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>package body		&quot;REGION$TP&quot; as
  I_am_a_snapshot CHAR;
  is_snapshot BOOLEAN;
  function active return boolean
  is
  begin
    return (not((is_snapshot and dbms_snapshot.I_am_a_refresh) or
		not dbms_reputil.replication_is_on));
  end active;
  procedure replicate(
    &quot;REGION_ID1_o&quot; IN NUMBER,
    &quot;REGION_ID1_n&quot; IN NUMBER,
    &quot;REGION_NAME2_o&quot; IN VARCHAR2,
    &quot;REGION_NAME2_n&quot; IN VARCHAR2,
    flag IN CHAR)
  is
  begin
    if flag = 'U' then
      dbms_defer.call('SPROCKET','REGION$RP','REP_UPDATE',6,'SPROCKET');
      dbms_defer.number_arg(&quot;REGION_ID1_o&quot;);
      dbms_defer.number_arg(&quot;REGION_ID1_n&quot;);
      dbms_defer.varchar2_arg(&quot;REGION_NAME2_o&quot;);
      dbms_defer.varchar2_arg(&quot;REGION_NAME2_n&quot;);
    elsif flag = 'I' then
      dbms_defer.call('SPROCKET','REGION$RP','REP_INSERT',4,'SPROCKET');
      dbms_defer.number_arg(&quot;REGION_ID1_n&quot;);
      dbms_defer.varchar2_arg(&quot;REGION_NAME2_n&quot;);
    elsif flag = 'D' then
      dbms_defer.call('SPROCKET','REGION$RP','REP_DELETE',4,'SPROCKET');
      dbms_defer.number_arg(&quot;REGION_ID1_o&quot;);
      dbms_defer.varchar2_arg(&quot;REGION_NAME2_o&quot;);
    end if;
    dbms_defer.varchar2_arg(dbms_reputil.global_name);
    dbms_defer.char_arg(I_am_a_snapshot);
  end replicate;
begin
  select decode(master, 'N', 'Y', 'N')
    into I_am_a_snapshot
    from all_repcat where gname = 'SPROCKET';
  is_snapshot := (I_am_a_snapshot = 'Y');
end &quot;REGION$TP&quot;;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Notice that Oracle passes the old and new values of each column in the table to the REGION$RP procedure. Oracle uses these values to confirm that the version of the row at the originating site is the same as the version of the row at the destination sites. If the old column values at the originating site do not match the current column values at the destination site, then Oracle detects a conflict and invokes the appropriate <A
CLASS="indexterm"
NAME="ch15-idx-962773-0"
></A
>conflict resolution method.</P
><P
CLASS="para"
>You can see this logic in the package body of REGION$RP:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>package body		&quot;REGION$RP&quot; as
  procedure rep_delete(
    &quot;REGION_ID1_o&quot; IN NUMBER,
    &quot;REGION_NAME2_o&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR) is
  begin
    if propagation_flag = 'N' then
      dbms_reputil.replication_off;
    end if;
    dbms_reputil.rep_begin;
    dbms_reputil.global_name := site_name;
    delete from &quot;REGION&quot;
    where (&quot;REGION_ID1_o&quot; = &quot;REGION_ID&quot;
    and   &quot;REGION_NAME2_o&quot; = &quot;REGION_NAME&quot;);
    if sql%rowcount = 0 then
      raise no_data_found;
    elsif sql%rowcount &gt; 1 then
      raise too_many_rows;
    end if;
    dbms_reputil.rep_end;
  exception
    when no_data_found then
      begin
	if not &quot;REGION$RR&quot;.delete_conflict_handler(
	  &quot;REGION_ID1_o&quot;,
	  &quot;REGION_NAME2_o&quot;,
	  site_name,
	  propagation_flag) then
	  dbms_reputil.rep_end;
	  raise;
	end if;
	dbms_reputil.rep_end;
      exception
	when others then
	  dbms_reputil.rep_end;
	  raise;
      end;
    when others then
      dbms_reputil.rep_end;
      raise;
  end rep_delete;
  procedure rep_insert(
    &quot;REGION_ID1_n&quot; IN NUMBER,
    &quot;REGION_NAME2_n&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR) is
  begin
    if propagation_flag = 'N' then
      dbms_reputil.replication_off;
    end if;
    dbms_reputil.rep_begin;
    dbms_reputil.global_name := site_name;
    insert into &quot;REGION&quot; (
      &quot;REGION_ID&quot;,
      &quot;REGION_NAME&quot;)
    values (
      &quot;REGION_ID1_n&quot;,
      &quot;REGION_NAME2_n&quot;);
    dbms_reputil.rep_end;
  exception
    when dup_val_on_index then
      begin
	if not &quot;REGION$RR&quot;.unique_conflict_insert_handler(
	  &quot;REGION_ID1_n&quot;,
	  &quot;REGION_NAME2_n&quot;,
	  site_name,
	  propagation_flag,
	  SQLERRM) then
	  dbms_reputil.rep_end;
	  raise;
	end if;
	dbms_reputil.rep_end;
      exception
	when others then
	  dbms_reputil.rep_end;
	  raise;
      end;
    when others then
      dbms_reputil.rep_end;
      raise;
  end rep_insert;
  procedure rep_update(
    &quot;REGION_ID1_o&quot; IN NUMBER,
    &quot;REGION_ID1_n&quot; IN NUMBER,
    &quot;REGION_NAME2_o&quot; IN VARCHAR2,
    &quot;REGION_NAME2_n&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR) is
  begin
    if propagation_flag = 'N' then
      dbms_reputil.replication_off;
    end if;
    dbms_reputil.rep_begin;
    dbms_reputil.global_name := site_name;
    update &quot;REGION&quot; set
      &quot;REGION_ID&quot; = &quot;REGION_ID1_n&quot;,
      &quot;REGION_NAME&quot; =
	decode(&quot;REGION_NAME2_o&quot;,
	       &quot;REGION_NAME2_n&quot;, &quot;REGION_NAME&quot;,
	       &quot;REGION_NAME2_n&quot;)
    where (((1 = 1 and
	    &quot;REGION_NAME2_o&quot; = &quot;REGION_NAME2_n&quot;)) or
	   (1 = 1 and
	    &quot;REGION_NAME2_o&quot; = &quot;REGION_NAME&quot;))
      and &quot;REGION_ID1_o&quot; = &quot;REGION_ID&quot;;
    if sql%rowcount = 0 then
      raise no_data_found;
    elsif sql%rowcount &gt; 1 then
      raise too_many_rows;
    end if;
    dbms_reputil.rep_end;
  exception
    when no_data_found then
      begin
	if not &quot;REGION$RR&quot;.update_conflict_handler(
	  &quot;REGION_ID1_o&quot;,
	  &quot;REGION_ID1_n&quot;,
	  &quot;REGION_NAME2_o&quot;,
	  &quot;REGION_NAME2_n&quot;,
	  site_name,
	  propagation_flag) then
	  dbms_reputil.rep_end;
	  raise;
	end if;
	dbms_reputil.rep_end;
      exception
	when others then
	  dbms_reputil.rep_end;
	  raise;
      end;
    when dup_val_on_index then
      begin
	if not &quot;REGION$RR&quot;.unique_conflict_update_handler(
	  &quot;REGION_ID1_o&quot;,
	  &quot;REGION_ID1_n&quot;,
	  &quot;REGION_NAME2_o&quot;,
	  &quot;REGION_NAME2_n&quot;,
	  site_name,
	  propagation_flag,
	  SQLERRM) then
	  dbms_reputil.rep_end;
	  raise;
	end if;
	dbms_reputil.rep_end;
      exception
	when others then
	  dbms_reputil.rep_end;
	  raise;
      end;
    when others then
      dbms_reputil.rep_end;
      raise;
  end rep_update;
end &quot;REGION$RP&quot;;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>As you can see, Oracle invokes REGION$RR, the <A
CLASS="indexterm"
NAME="ch15-idx-962780-0"
></A
>conflict resolution package:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>package body		&quot;REGION$RR&quot; as
  function unique_conflict_insert_handler(
    &quot;REGION_ID1_n&quot; IN NUMBER,
    &quot;REGION_NAME2_n&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR,
    errmsg IN VARCHAR2) return boolean is
  begin
    return FALSE;
  end unique_conflict_insert_handler;

  function delete_conflict_handler(
    &quot;REGION_ID1_o&quot; IN NUMBER,
    &quot;REGION_NAME2_o&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR) return boolean is
  begin
    return FALSE;
  end delete_conflict_handler;

  function update_conflict_handler(
    &quot;REGION_ID1_o&quot; IN NUMBER,
    &quot;REGION_ID1_n&quot; IN NUMBER,
    &quot;REGION_NAME2_o&quot; IN VARCHAR2,
    &quot;REGION_NAME2_n&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR) return boolean is
  begin
    return FALSE;
  end update_conflict_handler;

  function unique_conflict_update_handler(
    &quot;REGION_ID1_o&quot; IN NUMBER,
    &quot;REGION_ID1_n&quot; IN NUMBER,
    &quot;REGION_NAME2_o&quot; IN VARCHAR2,
    &quot;REGION_NAME2_n&quot; IN VARCHAR2,
    site_name IN VARCHAR2,
    propagation_flag IN CHAR,
    errmsg IN VARCHAR2) return boolean is
  begin
    return FALSE;
  end unique_conflict_update_handler;
end &quot;REGION$RR&quot;;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This is the default conflict handling package that GENERATE_REPLICATION_SUPPORT creates. Since no conflict resolution methods are defined for REGION, the unique_conflict_insert_handler, delete_conflict_handler, update_conflict_handler, and unique_conflict_update_handler programs all return FALSE, indicating that they cannot resolve the conflict. <A
CLASS="xref"
HREF="ch17_01.htm"
>Chapter 17</A
> contains details about how to define conflict resolution handlers.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31391"
>15.3.4.1.6 <A
CLASS="indexterm"
NAME="ch15-idx-962782-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-962782-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-962782-2"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-962782-3"
></A
>Generating replication support for packages and procedures</A
></H4
><P
CLASS="para"
>As well as <A
CLASS="indexterm"
NAME="ch15-idx-962798-0"
></A
>tables, you can also replicate procedures and packages. When you call a replicated procedure, Oracle builds a deferred RPC that it propagates to all master sites. This deferred RPC invokes the same procedure with the same arguments as the originating call. Oracle recommends procedural replication for situations that call for massive updates to tables (i.e., updates affecting tens of thousands of rows). Procedural replication duplicates the procedure call only, which is more efficient and network-friendly than row-level replication. (Row-level replication sends the old and new column values for every field of every row.)</P
><P
CLASS="para"
>Just as we made two calls to CREATE_MASTER_REPOBJECT to create a replicated package, we must also make two calls to GENERATE_REPLICATION_SUPPORT:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT( 
			sname		=&gt; 'SPROCKET',
			oname		=&gt; 'PRODUCTMAINT',
			type		=&gt; 'PACKAGE',
			distributed	=&gt; TRUE,
			gen_objs_owner	=&gt; 'SPROCKET',
			gen_rep2_trigger=&gt; FALSE);   
 
		DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT(
			sname		=&gt; 'SPROCKET',
			oname		=&gt; 'PRODUCTMAINT',
			type		=&gt; 'PACKAGE BODY',
			distributed	=&gt; TRUE,
			gen_objs_owner	=&gt; 'SPROCKET',
			gen_rep2_trigger=&gt; FALSE);
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>These two calls create a "wrapper" package and package body, named DEFER_PRODUCTMAINT. This package uses DBMS_DEFER.CALL (described in <A
CLASS="xref"
HREF="ch17_01.htm"
>Chapter 17</A
>) to build RPCs to PRODUCTMAINT. To replicate a call to procedure ADDPRODUCT, we would call DEFER_PRODUCTMAINT.ADDPRODUCT.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>package &quot;DEFER_PRODUCTMAINT&quot; as
  I_am_a_snapshot CHAR;
  procedure &quot;ADDPRODUCT&quot;(
    &quot;PRODUCT_TYPE_IN&quot; IN number,
    &quot;CATALOG_ID_IN&quot; IN varchar2,
    &quot;DESCRIPTION_IN&quot; IN varchar2,
    &quot;REV_LEVEL_IN&quot; IN varchar2,
    &quot;PRODUCTION_DATE_IN&quot; IN date,
    &quot;PRODUCT_STATUS_IN&quot; IN varchar2,
    call_local IN char := 'N',
    call_remote IN char := 'Y');
end &quot;DEFER_PRODUCTMAINT&quot;;

package body "DEFER_PRODUCTMAINT&quot; as
  procedure &quot;ADDPRODUCT&quot;(
    &quot;PRODUCT_TYPE_IN&quot; IN NUMBER,
    &quot;CATALOG_ID_IN&quot; IN VARCHAR2,
    &quot;DESCRIPTION_IN&quot; IN VARCHAR2,
    &quot;REV_LEVEL_IN&quot; IN VARCHAR2,
    &quot;PRODUCTION_DATE_IN&quot; IN DATE,
    &quot;PRODUCT_STATUS_IN&quot; IN VARCHAR2,
    call_local IN char := 'N',
    call_remote IN char := 'Y') is
  begin
    select decode(master, 'N', 'Y', 'N')
      into I_am_a_snapshot
      from all_repcat where gname = 'SPROCKET';
    if call_local = 'Y' then
      &quot;SPROCKET&quot;.&quot;PRODUCTMAINT&quot;.&quot;ADDPRODUCT&quot;(
	&quot;PRODUCT_TYPE_IN&quot;,
	&quot;CATALOG_ID_IN&quot;,
	&quot;DESCRIPTION_IN&quot;,
	&quot;REV_LEVEL_IN&quot;,
	&quot;PRODUCTION_DATE_IN&quot;,
	&quot;PRODUCT_STATUS_IN&quot;);
    end if;
    if call_remote = 'Y' then
	8, 'SPROCKET');
      dbms_defer.number_arg(&quot;PRODUCT_TYPE_IN&quot;);
      dbms_defer.varchar2_arg(&quot;CATALOG_ID_IN&quot;);
      dbms_defer.varchar2_arg(&quot;DESCRIPTION_IN&quot;);
      dbms_defer.varchar2_arg(&quot;REV_LEVEL_IN&quot;);
      dbms_defer.date_arg(&quot;PRODUCTION_DATE_IN&quot;);
      dbms_defer.varchar2_arg(&quot;PRODUCT_STATUS_IN&quot;);
      dbms_defer.char_arg('Y');
      dbms_defer.char_arg(I_am_a_snapshot);
    end if;
  end &quot;ADDPRODUCT&quot;;
begin
  select decode(master, 'N', 'Y', 'N')
    <A
CLASS="indexterm"
NAME="ch15-idx-962784-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-962784-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-962784-2"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-962784-3"
></A
>into I_am_a_snapshot
    <A
CLASS="indexterm"
NAME="ch15-idx-962769-0"
></A
>from all_repcat where gname = 'SPROCKET';
<A
CLASS="indexterm"
NAME="ch15-idx-960782-0"
></A
>end &quot;DEFER_PRODUCTMAINT&quot;;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.4.2"
>15.3.4.2 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960790-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960790-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960790-3"
></A
>GENERATE_REPLICATION_PACKAGE procedure</A
></H4
><P
CLASS="para"
>In some situations, you may wish to generate only replication support triggers or replication support packages. For example, if you use DBMS_REPCAT's ALTER_MASTER_PROPAGATION procedure to change from synchronous to asynchronous replication, you will have to recreate replication triggers. The GENERATE_REPLICATION_PACKAGE and GENERATE_REPLICATION_TRIGGERS procedures provide this functionality.</P
><P
CLASS="para"
>The GENERATE_REPLICATION_PACKAGE procedure allows you to generate replication support packages. The specification follows:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_PACKAGE
   (sname IN VARCHAR2,
    oname IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which table oname belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of table for which package is being generated</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31456"
>15.3.4.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The GENERATE_REPLICATON_PACKAGE procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with all masters</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>dbnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23375</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One or more masters is a pre-7.3 release</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table oname does not exist in schema sname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group to which object belongs is not quiesced</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31508"
>15.3.4.2.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling GENERATE_REPLICATION_PACKAGE:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The Oracle version must be 7.3 or later.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31518"
>15.3.4.2.3 Example</A
></H4
><P
CLASS="para"
>The following call generates the replication support packages for table SPROCKET.PRODUCTS in all master <A
CLASS="indexterm"
NAME="ch15-idx-960807-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960807-1"
></A
>sites:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.GENERATE_REPLICATION_PACKAGE(
			sname	=&gt; 'SPROCKET', 
			oname 	=&gt; 'PRODUCTS');
	END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.4.3"
>15.3.4.3 The DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960809-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960809-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960809-2"
></A
>GENERATE_REPLICATION_TRIGGER procedure allows you to generate replication support triggers. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    gen_objs_owner IN VARCHAR2 := NULL,
    gen_rep2_trigger IN BOOLEAN := FALSE);

PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER
   (gname IN VARCHAR2,
   {master_list IN VARCHAR2 := NULL 
   | master_table IN dbms_utility.dblink_array},
    gen_objs_owner IN VARCHAR2 := NULL);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER
   (sname IN VARCHAR2,
    oname IN VARCHAR2,
    gen_objs_owner IN VARCHAR2 := NULL,
    min_communication IN BOOLEAN  := TRUE);

PROCEDURE DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER
   (gname IN VARCHAR2,
    gen_objs_owner IN VARCHAR2 := NULL,
    min_communication IN BOOLEAN := NULL);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the schema to which table oname belongs.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of object for which support objects are being generated.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gen_rep2_trigger</P
><P
CLASS="para"
> (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Provided for backward compatibility; if any master sites are pre-7.3 releases, this parameter must be set to TRUE (default is FALSE).</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The replication group to which oname belongs.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master_list</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comma-delimited string of global names for masters in which support objects are to be generated.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master_table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>PL/SQL table of global names for masters in which support objects are to be generated.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gen_objs_owner</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Specifies schema in which to generate replication support objects; if NULL (the default), objects are generated under schema in which they currently reside.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>min_communication </P
><P
CLASS="para"
>(Oracle8 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE (the default) the generated trigger sends the new value of a column only if the value has changed. Old field values are sent only if the field is part of the primary key, or part of a column group for which member columns have changed.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31594"
>15.3.4.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The GENERATE_REPLICATION_TRIGGER procedure may raise the following exceptions: </P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with all masters</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>dbnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23375</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One or more masters is a pre-7.3 release and gen_rep2_trigger is not set to TRUE</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table oname does not exist in schema sname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23306</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema sname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group to which object belongs is not quiesced</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31653"
>15.3.4.3.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling GENERATE_REPLICATION_TRIGGER:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The GENERATE_REPLICATION_SUPPORT or GENERATE_PACKAGE_SUPPORT must previously have been called for the object specified in the oname parameter.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31663"
>15.3.4.3.3 Examples</A
></H4
><P
CLASS="para"
>The simplest invocation of the GENERATE_REPLICATION_TRIGGER procedure does the most work; this call generates replication triggers for all replicated tables at all master sites:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER(gname=&gt; 'SPROCKET' );
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>This next example generates replication triggers for the replicated table SPROCKET.PRODUCTS at all master sites:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER(
		    gname    =&gt; 'SPROCKET',
		    oname    =&gt; 'PRODUCTS' );
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>The following call generates replication triggers for all replicated tables in the SPROCKET replication group at the master sites D7HI.BIGWHEEL.COM and D7WA.BIGWHEEL.COM:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER(
		    gname    =&gt; 'SPROCKET',
		    master_list=&gt; 'D7HI.BIGWHEEL.COM, D7WA.BIGWHEEL.COM' );
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>The following call regenerates the replication support for all objects in replication group SPROCKET at all master sites:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>EXECUTE DBMS_REPCAT.GENERATE_REPLICATION_TRIGGER(gname=&gt; 'SPROCKET' )</PRE
></BLOCKQUOTE
><P
CLASS="para"
>For an additional example, see the <I
CLASS="filename"
>invalids.sql </I
><A
CLASS="indexterm"
NAME="ch15-idx-960810-0"
></A
> file on the companion disk. The example lists all objects in the database with a status of INVALID and generates the appropriate SQL statements to attempt to validate <A
CLASS="indexterm"
NAME="ch15-idx-960812-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960812-1"
></A
>them.</P
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.5"
>15.3.5 Adding and Removing Master Sites with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>Now you have generated replication support for those objects you intend to replicate, and you are ready to add <A
CLASS="indexterm"
NAME="ch15-idx-960814-0"
></A
>master sites to your environment. In advanced replication parlance, a <EM
CLASS="emphasis"
>master site</EM
> is a database instance where replicated objects and their replication support triggers and packages exist. Master sites are sometimes called <EM
CLASS="emphasis"
>peers</EM
><A
CLASS="indexterm"
NAME="ch15-idx-960815-0"
></A
>, because every master site has the same objects and identical (or nearly identical) data. Any master site can perform DML on a replicated table, and Oracle propagates the DML to all other master sites. There is no single authoritative site, not even the <A
CLASS="indexterm"
NAME="ch15-idx-960816-0"
></A
>master definition site. The distinction between the master definition site and the other masters is that the master definition site is the only site that can perform DDL on replicated objects, and the only one that can suspend or resume replication activity.</P
><P
CLASS="para"
>Here are the DBMS_REPCAT programs associated with creating and maintaining master sites in your replicated environment:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.ADD_MASTER_DATABASE</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.REMOVE_MASTER_DATABASES</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.COMMENT_ON_REPSITES</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.RELOCATE_MASTERDEF</TD
></TR
></TABLE
><P
CLASS="para"
>We describe these programs in the following sections.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.5.1"
>15.3.5.1 The DBMS_REPCAT.ADD_MASTER_DATABASE procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960817-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960817-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960817-2"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960817-3"
></A
>ADD_MASTER_DATABASE procedure adds a master site. The specifications differ for Oracle7 and Oracle8 as follows. (Note that the sname parameter no longer exists in Oracle8.)</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ADD_MASTER_DATABASE
   (gname     IN VARCHAR2 := '',
    master    IN VARCHAR2,
    use_existing_objects IN BOOLEAN := TRUE,
    copy_rows IN BOOLEAN := TRUE,
    comment   IN VARCHAR2 := '',
    propagation_mode IN VARCHAR2 := 'ASYNCHRONOUS',
    sname N VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ADD_MASTER_DATABASE
   (gname     IN VARCHAR2 := '',
    master    IN VARCHAR2,
    use_existing_objects IN BOOLEAN := TRUE,
    copy_rows IN BOOLEAN := TRUE,
    comment   IN VARCHAR2 := '',
    propagation_mode IN VARCHAR2 := 'ASYNCHRONOUS');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which master site is being added</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the new master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>use_existing_objects</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Reuse existing objects at the new site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>copy_rows</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Copy rows from the invoking site to the new master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment on new master site, visible in DBA_REPSITES data dictionary view</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>propagation_mode</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Propagation mode (SYNCHRONOUS or ASYNCHRONOUS)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema name (not used)</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31765"
>15.3.5.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The ADD_MASTER_DATABASE procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Site master is not reachable</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>duplicateschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23307</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname already exists at site master</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>invalidpropmode</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23380</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Propagation_mode is not SYNCHRONOUS or ASYNCHRONOUS</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingrepgroup</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23373</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist at the calling site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>repnotcompatible</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23376</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname does not exist at master, and master is a pre-7.3 release</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31831"
>15.3.5.1.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ADD_MASTER_DATABASE:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>This procedure must be run from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31839"
>15.3.5.1.3 Example</A
></H4
><P
CLASS="para"
>The ADD_MASTER_DATABASE procedure is relatively simple to use. For example, this call adds site D7NY.BIGWHEEL.COM to the SPROCKET replication group and instantiates all objects there:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.ADD_MASTER_DATABASE(
			gname		=&gt; 'SPROCKET', 
			master		=&gt; 'D7NY.BIGWHEEL.COM', 
			use_existing_objects=&gt; 'FALSE', 
			copy_rows	=&gt; 'TRUE', 
			propagation_mode=&gt; 'ASYNCHRONOUS');
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>For additional examples, see the <I
CLASS="filename"
>repsites.sql</I
><A
CLASS="indexterm"
NAME="ch15-idx-962984-0"
></A
> and <A
CLASS="indexterm"
NAME="ch15-idx-962985-0"
></A
><I
CLASS="filename"
>links.sql </I
> files on the companion disk. The<I
CLASS="filename"
> repsites.sql</I
> example queries all replication sites, sorted by replication group, and queries the DBA_REPSITES data dictionary view. The <I
CLASS="filename"
>links.sql</I
> example lists all database links in the database (but not the passwords for those that were created using a CONNECT clause).</P
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> It is generally easier to instantiate all objects at the new master site first. That way, the call to ADD_MASTER_DATABASE does not have to perform DDL to create the schema or send all of the data across a network link. If you instantiate the objects first, the call to ADD_MASTER_DATABASE has to generate replication support only for the objects at the new site and update other master sites with the new master's <A
CLASS="indexterm"
NAME="ch15-idx-960819-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960819-1"
></A
>existence.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.5.2"
>15.3.5.2 The DBMS_REPCAT.REMOVE_MASTER_DATABASES procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960823-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960823-1"
></A
>REMOVE_MASTER_DATABASES procedure complements the ADD_MASTER_DATABASE procedure by removing master sites. The master sites being removed do not need to be accessible, but all other masters do. As with the ADD_MASTER_DATABASE procedure, the Oracle7 and Oracle8 specifications differ; Oracle8 does not have the sname parameter.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.REMOVE_MASTER_DATABASES
   (gname IN VARCHAR2 := '',
    master_list IN VARCHAR2,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.REMOVE_MASTER_DATABASES
   (gname IN VARCHAR2 := '',
    master_list IN VARCHAR2);,</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group from which master site(s) will be removed</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master_list</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>A comma-delimited list of global_names of master sites to be removed; use either master_list or master_table</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema name (not used)</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31895"
>15.3.5.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The REMOVE_MASTER_DATABASES procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One or more remaining master sites is not reachable</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23313</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One or more of the specified masters is not a master database</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>reconfigerror</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23316</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One of the specified masters in the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31940"
>15.3.5.2.2 Restrictions</A
></H4
><P
CLASS="para"
>The REMOVE_MASTER_DATABASES procedure must be run from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31943"
>15.3.5.2.3 Example</A
></H4
><P
CLASS="para"
>To remove site D7NY.BIGWHEEL.COM from the SPROCKET replication group and inform all other master sites, specify the following:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.REMOVE_MASTER_DATABASES(
			name		=&gt; 'SPROCKET', 
			master_list 		=&gt; 'D7NY.BIGWHEEL.COM');
	END;</PRE
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> After removing master sites with REMOVE_MASTER_DATABASES, you should call DBMS_REPCAT.DROP_MASTER_REPGROUP at each of the master sites you removed. Although you do not need to quiesce the replication group to remove one or more master database(s), you are strongly encouraged to do so. Otherwise, you will have to manually clear the RPC queue and resolve any <A
CLASS="indexterm"
NAME="ch15-idx-960825-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960825-1"
></A
>inconsistencies.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.5.3"
>15.3.5.3 The DBMS_REPCAT.COMMENT_ON_REPSITES procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960827-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960827-1"
></A
>COMMENT_ON_REPSITES procedure allows you to add or change a comment associated with a master site specified in the DBA_REPSITES data dictionary view. Here's the specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.COMMENT_ON_REPSITES
   (gname IN VARCHAR2,
    master IN VARCHAR,
    comment IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group to which master belongs</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-31987"
>15.3.5.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The COMMENT_ON_REPSITES procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with one or more master sites</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23313</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The master is not a master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32025"
>15.3.5.3.2 Restrictions</A
></H4
><P
CLASS="para"
>You must call the COMMENT_ON_REPSITES procedure from the master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32028"
>15.3.5.3.3 Example</A
></H4
><P
CLASS="para"
>The following call updates the comment for master site D7NY. BIGWHEEL.COM:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.COMMENT_ON_REPSITES(
			gname		=&gt; 'SPROCKET', 
			master		=&gt; 'D7NY.BIGWHEEL.COM', 
			comment		=&gt; 'Comment added on '||sysdate|| ' by ' ||user)
	<A
CLASS="indexterm"
NAME="ch15-idx-960829-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960829-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.5.4"
>15.3.5.4 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960831-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960831-1"
></A
>RELOCATE_MASTERDEF procedure</A
></H4
><P
CLASS="para"
>If your master definition site becomes unusable, or if you simply want another site to serve that role, you can configure a different master site as the master definition site with the RELOCATE_MASTERDEF procedure described in this section. Follow these guidelines:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>If your relocation is planned (i.e., all sites are up and reachable), set the notify_masters and include_old_masterdef parameters to TRUE. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>If the current master definition site is not available, set the notify_masters parameter to TRUE and set include_old_masterdef to FALSE. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>If the master definition site as well as some master sites are unavailable, invoke the RELOCATE_MASTERDEF procedure from each functioning master site with both the notify_masters and the include_old_masterdef parameters set to FALSE.</P
></LI
></UL
><P
CLASS="para"
>The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.RELOCATE_MASTERDEF
   (gname IN VARCHAR2 := '',
    old_masterdef IN VARCHAR2,
    new_masterdef IN VARCHAR2,
    notify_masters IN BOOLEAN := TRUE,
    include_old_masterdef IN BOOLEAN := TRUE,
    sname IN VARCHAR2 := '')</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.RELOCATE_MASTERDEF
   (gname IN VARCHAR2,
    old_masterdef IN VARCHAR2,
    new_masterdef IN VARCHAR2,
    notify_masters IN BOOLEAN := TRUE,
    include_old_masterdef IN BOOLEAN := TRUE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>old_masterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the current master definition site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>new_masterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the new master definition site.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notify_masters</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE (the default), synchronously multicast information about the change to all masters; if FALSE, do not inform masters.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>include_old_masterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE (the default), notify current master definition site of the change.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32096"
>15.3.5.4.1 Exceptions</A
></H4
><P
CLASS="para"
>The RELOCATE_MASTERDEF procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with master site(s) and notify_masters is TRUE</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23313</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The new_masterdef is not a master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The old_masterdef is not the master definition site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32134"
>15.3.5.4.2 Restrictions</A
></H4
><P
CLASS="para"
>You must call RELOCATE_MASTERDEF from a master or master definition site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32137"
>15.3.5.4.3 Example</A
></H4
><P
CLASS="para"
>The following call relocates the master definition site for replication group SPROCKET from D7CA.BIGWHEEL.COM to D7NY.BIGWHEEL.COM, and informs all masters, as well as the master definition site, of the change:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.RELOCATE_MASTERDEF(
		gname		=&gt; 'SPROCKET', 
		old_master_def	=&gt; 'D7CA.BIGWHEEL.COM', 
		new_master_def	=&gt; 'D7NY.BIGWHEEL.COM', 
		notify_masters	=&gt; TRUE, 
		include_old_masterdef=&gt; TRUE);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Suppose that the master definition site D7CA.BIGWHEEL.COM becomes permanently unavailable. We can convert another site, such as D7NY.BIGWHEEL.COM, into the master definition site without having to communicate with D7CA.BIGWHEEL.COM. We set the include_old_masterdef parameter to FALSE.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.RELOCATE_MASTERDEF(
		gname		=&gt; 'SPROCKET', 
		old_master_def	=&gt; 'D7CA.BIGWHEEL.COM', 
		new_master_def	=&gt; 'D7NY.BIGWHEEL.COM', 
		notify_masters	=&gt; TRUE, 
		include_old_masterdef=&gt; FALSE);
<A
CLASS="indexterm"
NAME="ch15-idx-960833-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960833-1"
></A
>END;</PRE
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.6"
>15.3.6 Maintaining the Repcatlog Queue with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>The programs in this category maintain the "<A
CLASS="indexterm"
NAME="ch15-idx-960835-0"
></A
>repcatlog" queue. You'll use these procedures:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.DO_DEFERRED_REPCAT_ADMIN</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.WAIT_MASTER_LOG</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.PURGE_MASTER_LOG</TD
></TR
></TABLE
><P
CLASS="para"
>The following sections describe these programs. </P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.6.1"
>15.3.6.1 The DBMS_REPCAT<A
CLASS="indexterm"
NAME="ch15-idx-960839-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960839-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960839-2"
></A
>.DO_DEFERRED_REPCAT_ADMIN procedure</A
></H4
><P
CLASS="para"
>Whenever you create or alter replicated objects&nbsp;-- for example, with the GENERATE_REPLICATION_SUPPORT or ALTER_MASTER_REPOBJECT procedure&nbsp;-- Oracle queues the changes in the "repcatlog" queue; the entries in this queue correspond to entries in the DBA_REPCATLOG data dictionary view. All DDL changes must originate at the master definition site, but the repcatlog queue exists at every master site.</P
><P
CLASS="para"
>The DO_DEFERRED_REPCAT_ADMIN procedure processes entries in the repcatlog queue at all master sites. You may have noticed this job in the job queue, scheduled to run once every ten minutes. Oracle creates this scheduled job the first time you execute one of the packages that performs DDL.</P
><P
CLASS="para"
>The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DO_DEFERRED_REPCAT_ADMIN
   (gname IN VARCHAR2 := '',
    all_sites IN BOOLEAN := FALSE,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.DO_DEFERRED_REPCAT_ADMIN
   (gname IN VARCHAR2,
    all_sites IN BOOLEAN := FALSE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>As with all of the other DBMS_REPCAT procedures, the Oracle8 version does not have the sname parameter.</P
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group for which to push the repcatlog queue</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>all_sites</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE, execute queued procedures at every master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32200"
>15.3.6.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The DO_DEFERRED_REPCAT_ADMIN procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Master site associated with snapshot group is no longer a master site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32231"
>15.3.6.1.2 Restrictions</A
></H4
><P
CLASS="para"
>The DO_DEFERRED_REPCAT_ADMIN procedure performs only the procedures that have been queued by the invoking user. Note that the job queue is used to perform the queued procedures automatically.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32234"
>15.3.6.1.3 Example.</A
></H4
><P
CLASS="para"
>If you want to run DO_DEFERRED_REPCAT_ADMIN manually, either because you do not have DBMS_JOB background processes running, or because you want to push the repcatlog queue immediately, you can do so. Here is an example:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.DO_DEFFERED_REPCAT_ADMIN
	( gname =&gt; 'SPROCKET',  all_sites =&gt; TRUE);
END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>For an additional example, see the <I
CLASS="filename"
>catlog.sql</I
><A
CLASS="indexterm"
NAME="ch15-idx-960843-0"
></A
> file on the companion disk. The example lists entries in the repcatlog (DBA_REPCATLOG) with the time of submission in hours, minutes, and <A
CLASS="indexterm"
NAME="ch15-idx-960841-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960841-1"
></A
>seconds.</P
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.6.2"
>15.3.6.2 The DBMS_REPCAT.WAIT_MASTER_LOG procedure</A
></H4
><P
CLASS="para"
>You can use the <A
CLASS="indexterm"
NAME="ch15-idx-960844-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960844-1"
></A
>WAIT_MASTER_LOG procedure to ascertain whether the changes in the repcatlog queue have reached the master sites. This procedure has an OUT parameter, true_count, which the procedure populates with the number of outstanding tasks. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.WAIT_MASTER_LOG
   (gname IN VARCHAR2 := '',
    record_count IN NATURAL,
    timeout IN NATURAL,
    true_count OUT NATURAL,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.WAIT_MASTER_LOG
   (gname IN VARCHAR2,
    record_count IN NATURAL,
    timeout IN NATURAL,
    true_count OUT NATURAL); </PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>record_count</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number of records to allow to be entered in the DBA_REPCATLOG data dictionary view before returning</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>timeout</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number of seconds to wait before returning</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>true_count</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Output variable containing the actual number of incomplete activities queued in the DBA_REPCATLOG data dictionary view</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>There are no restrictions on calling WAIT_MASTER_LOG.</P
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32294"
>15.3.6.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The WAIT_MASTER_LOG procedure may raise the following exception:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not a master site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32318"
>15.3.6.2.2 Example</A
></H4
><P
CLASS="para"
>The following call returns after 60 seconds, or after five entries have been entered into the DBA_REPCATLOG data dictionary view at the current master for replication group SPROCKET. The number of records (corresponding to incomplete tasks) is stored in the variable vRecCount.</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	VARIABLE vRecCount NATURAL
	BEGIN
		DBMS_REPCAT.WAIT_MASTER_LOG(gname=&gt; 'SPROCKET', 
						record_count =&gt; 5, 
						timeout =&gt; 60, 
						true_count =&gt; vRecCount);
	END;</PRE
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> You might find it more convenient to query the DBA_REPCATLOG data dictionary view <A
CLASS="indexterm"
NAME="ch15-idx-960846-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960846-1"
></A
>directly.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.6.3"
>15.3.6.3 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960848-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960848-1"
></A
>PURGE_MASTER_LOG procedure</A
></H4
><P
CLASS="para"
>The DBA_REPCATLOG data dictionary view retains entries on DDL propagations that have failed; these entries are not removed when you resolve the problem that caused the failure. You may notice entries such as these:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>  1  SELECT	source, status, request, to_char(timestamp, 'HH24:MI:SS') timestamp
  2  FROM dba_repcatlog
  3* ORDER BY id
system@d7ca SQL&gt; /
</PRE
></BLOCKQUOTE
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>&#13;Source	                Status	Request                         Time
--------------------	-------	------------------------	---------------
D7CA.BIGWHEEL.COM 	ERROR	CREATE_MASTER_REPOBJECT	        23:13:07
D7CA.BIGWHEEL.COM	ERROR	CREATE_MASTER_REPOBJECT	        23:13:07
D7CA.BIGWHEEL.COM	ERROR	CREATE_MASTER_REPOBJECT	        23:25:20
D7CA.BIGWHEEL.COM	ERROR	CREATE_MASTER_REPOBJECT	        23:25:20
D7CA.BIGWHEEL.COM	ERROR	CREATE_MASTER_REPOBJECT	        23:26:53
D7CA.BIGWHEEL.COM	ERROR	CREATE_MASTER_REPOBJECT	        23:26:53
D7CA.BIGWHEEL.COM	ERROR	DROP_MASTER_REPOBJECT	        14:03:27
D7CA.BIGWHEEL.COM	ERROR	DROP_MASTER_REPOBJECT	        14:03:27

8 rows selected.</PRE
></BLOCKQUOTE
><P
CLASS="para"
>You must use the PURGE_MASTER_LOG procedure to remove these entries from DBA_REPCATLOG. You can specify records to delete by id, originating master, replication group, and schema. If a parameter is NULL, it is treated as a wildcard. Specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.PURGE_MASTER_LOG
   (id IN NATURAL,
    source IN VARCHAR2,
    gname IN VARCHAR2 := '',
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.PURGE_MASTER_LOG
   (id IN NATURAL,
    source IN VARCHAR2,
    gname IN VARCHAR2);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>id</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Identification of the request (i.e., the ID field in DBA_REPCATLOG data dictionary view)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>source</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of originating master</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group for which request was made</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32373"
>15.3.6.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The PURGE_MASTER_LOG procedure may raise the following exception:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The gname is NULL and calling site is not a master site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32397"
>15.3.6.3.2 Restrictions</A
></H4
><P
CLASS="para"
>The calling site must be a master site.</P
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32400"
>15.3.6.3.3 Example</A
></H4
><P
CLASS="para"
>The following call removes all entries associated with replication group SPROCKET from the DBA_REPCATLOG data dictionary view:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.PURGE_MASTER_LOG(gname=&gt; 'SPROCKET' );
	END;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>For an additional example, see the <I
CLASS="filename"
>caterr.sql</I
><A
CLASS="indexterm"
NAME="ch15-idx-960852-0"
></A
> file on the companion disk. The example lists entries in the repcatlog (DBA_REPCATLOG) containing errors, and displays the error message associated with each error.</P
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> To clear all entries from the DBA_REPCATLOG data dictionary view, set all parameters <A
CLASS="indexterm"
NAME="ch15-idx-963106-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-963106-1"
></A
>to <A
CLASS="indexterm"
NAME="ch15-idx-963107-0"
></A
>NULL.</P
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.7"
>15.3.7 Quiescence with DBMS_REPCAT</A
></H3
><P
CLASS="para"
>You may have noticed that many of the DBMS_REPCAT packages require you to quiesce the environment before using them. <EM
CLASS="emphasis"
>Quiescence,</EM
> as it is called, accomplishes two things:</P
><OL
CLASS="orderedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>It applies all outstanding DML for the replication group at all master sites.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>It prevents any additional DML on any of the replicated objects at all master sites.</P
></LI
></OL
><P
CLASS="para"
>In other words, quiescence ensures that all sites are up to date, and forces the replicated environment to stand still.</P
><BLOCKQUOTE
CLASS="warning"
><P
CLASS="para"
><STRONG
>WARNING:</STRONG
> Do not attempt to quiesce an environment that has unresolved errors or any other serious problems. If you cannot complete outstanding transactions, you will not be able to quiesce the environment.</P
></BLOCKQUOTE
><P
CLASS="para"
>You will use the following programs to quiesce your environment and start it up again:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
>DBMS_REPCAT.SUSPEND_MASTER_ACTIVITY</TD
></TR
><TR
><TD
CLASS="member"
>DBMS_REPCAT.RESUME_MASTER_ACTIVITY</TD
></TR
></TABLE
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.7.1"
>15.3.7.1 The DBMS_REPCAT.SUSPEND_MASTER_ACTIVITY procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960857-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960857-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960857-2"
></A
>SUSPEND_MASTER_ACTIVITY procedure quiesces an environment. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBS_REPCAT.SUSPEND_MASTER_ACTIVITY
   (gname IN VARCHAR2 := '',
    execute_as_user IN BOOLEAN  := FALSE,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.SUSPEND_MASTER_ACTIVITY
   (gname IN VARCHAR2,
    override IN BOOLEAN  := FALSE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group for which replication activity is to be suspended</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>execute_as_user</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>FALSE (default), indicates that remote system will authenticate calls using authentication context user who originally queued the RPC; TRUE indicates that remote system will use authentication context of the session user</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32470"
>15.3.7.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The SUSPEND_MASTER_ACTIVITY procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with one or more master site(s)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notnormal</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23311</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not in NORMAL state</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32508"
>15.3.7.1.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling SUSPEND_MASTER_ACTIVITY:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must run this procedure from the master definition site. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Prior to Oracle8, this procedure quiesces all replication groups at the master definition site, not just the group specified by the gname parameter.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32516"
>15.3.7.1.3 Example</A
></H4
><P
CLASS="para"
>The following call suspends replication activity for the SPROCKET replication group:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.SUSPEND_MASTER_ACTIVITY(  gname =&gt; 'SPROCKET' );
END;</PRE
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> This call can take some time to complete if you have many master sites and/or many outstanding transactions. You can monitor the progress by querying the status field in the DBA_REPCATLOG data dictionary <A
CLASS="indexterm"
NAME="ch15-idx-960859-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960859-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960859-2"
></A
>view.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.7.2"
>15.3.7.2 The DBMS_REPCAT.RESUME_MASTER_ACTIVITY procedure</A
></H4
><P
CLASS="para"
>The <A
CLASS="indexterm"
NAME="ch15-idx-960861-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960861-1"
></A
>RESUME_MASTER_ACTIVITY procedure starts up an environment that has been quiesced. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.RESUME_MASTER_ACTIVITY
   (gname IN VARCHAR2 := '',
    override IN BOOLEAN := FALSE,
    sname IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.RESUME_MASTER_ACTIVITY
   (gname IN VARCHAR2,
    override IN BOOLEAN := FALSE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group for which replication activity is to be resumed.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>override</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If FALSE (the default), activity is resumed only after all deferred REPCAT activity is completed; if set to TRUE, activity is resumed as soon as possible</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32564"
>15.3.7.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The RESUME_MASTER_ACTIVITY procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>commfailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23317</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Unable to communicate with one or more master site(s)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not quiesced</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32602"
>15.3.7.2.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling RESUME_MASTER_ACTIVITY:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must run this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced or quiescing.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32610"
>15.3.7.2.3 Example</A
></H4
><P
CLASS="para"
>The following example resumes replication activity for a replication <A
CLASS="indexterm"
NAME="ch15-idx-960863-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960863-1"
></A
>group:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.RESUME_MASTER_ACTIVITY(  gname =&gt; 'SPROCKET' );
END;</PRE
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch15-SECT-3.8"
>15.3.8 Miscellaneous DBMS_REPCAT Procedures</A
></H3
><P
CLASS="para"
>This section describes several DBMS_REPCAT programs that don't fall into any of the earlier categories.</P
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> We describe the IMPORT_CHECK, ALTER_MASTER_PROPAGATION, and SEND_AND_COMPARE_OLD_VALUES procedures here because they are a part of the DBMS_REPCAT package. However, you will probably run these procedures after using the DBMS_OFFLINE_OG and/or DBMS_RECTIFIER_DIFF packages described in the next major section.</P
></BLOCKQUOTE
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.8.1"
>15.3.8.1 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960865-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960865-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960865-2"
></A
>REPCAT_IMPORT_CHECK procedure</A
></H4
><P
CLASS="para"
>From time to time, you may need to rebuild a master site from an export dump file as either a recovery or maintenance procedure. Because object id numbers (as seen in SYS.OBJ$.OBJ# and DBA_OBJECTS.OBJECT_ID) change during these rebuilds, Oracle supplies a procedure (REPCAT_IMPORT_CHECK) that you must run immediately after an import of any master site to synchronize the new id numbers with the data stored in the table SYSTEM.REPCAT$_REPOBJECT.</P
><P
CLASS="para"
>You must run the REPCAT_IMPORT_CHECK procedure immediately after you import any master site. The specifications differ for Oracle7 and Oracle8 as follows.</P
><P
CLASS="para"
>Here is the Oracle7 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.REPCAT_IMPORT_CHECK
   (gname IN VARCHAR2 := '',
    master IN BOOLEAN,
    sname IN VRCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here is the Oracle8 specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.REPCAT_IMPORT_CHECK
   (gnamee in VARCHAR2 := '',
    master IN BOOLEAN);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group being revalidated</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Set to TRUE if site is a master, FALSE if it is a snapshot site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname (Oracle7 only)</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Not used</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32665"
>15.3.8.1.1 Exceptions</A
></H4
><P
CLASS="para"
>The REPCAT_IMPORT_CHECK procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object with a status of VALID in REPCAT$_REPOBJECT does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingschema</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23306</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Schema sname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Master is set to TRUE, but the calling site is not a master, or not the expected database</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonsnapshot</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23314</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Master is set to FALSE but the calling site is not a snapshot site</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32710"
>15.3.8.1.2 Example</A
></H4
><P
CLASS="para"
>The following call revalidates all replicated objects and supporting objects for the SPROCKET replication group. Issue this call after an import:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>BEGIN
    DBMS_REPCAT.REPCAT_IMPORT_CHECJ(	sname						=&gt; 'SPROCKET',  master	 =&gt; TRUE );
END;</PRE
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> Call REPCAT_IMPORT_CHECK with sname and master set to NULL (or with no parameters) to validate all replication groups at the <A
CLASS="indexterm"
NAME="ch15-idx-960880-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960880-1"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960880-2"
></A
>site.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.8.2"
>15.3.8.2 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960882-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960882-1"
></A
>ALTER_MASTER_PROPAGATION procedure</A
></H4
><P
CLASS="para"
>The advanced replication option supports two modes of propagation: synchronous and asynchronous. The following table summarizes the pros and cons of each mode.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Mode</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Advantages</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Disadvantages</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Synchronous</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Data is always up to date at all sites. No possibility of conflicts.</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Requires 100% availability of network connections. If a site is unreachable, transactions are blocked.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Asynchronous</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Master sites can go offline temporarily with no adverse impact.</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Must build conflict resolution into replicated applications and monitor unresolved conflicts.</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>As a practical matter, you should opt for synchronous replication only if your sites are tightly linked to each other in your network, both physically and logically. Examples of acceptably tight links include two machines sharing a hub, or two machines connected by a crossover cable.</P
><P
CLASS="para"
>Regardless of the propagation method you choose, Oracle lets you change a replication group's propagation mode later with the ALTER_MASTER_PROPAGATION procedure. Call this procedure to change the propagation mode of a replication group (from synchronous to asynchronous, or vice versa). Here's the specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.ALTER_MASTER_PROPAGATION
   (gname IN VARCHAR2,
    master IN VARCHAR2,
   {dblink_table IN dbms_utility.dblink_array | dblink_list IN VARCHAR2},
    propagation_modee IN VARCHAR2 := 'ASYNCHRONOUS',
    comment IN VARCHAR2 := '');</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>gname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group whose propagation mode is being altered</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>master</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Global name of the master site having its propagation mode altered</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>dblink_list</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>List of database links for which the master's propagation mode is being altered</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>propagation_mode</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>New propagation mode (SYNCHRONOUS or ASYNCHRONOUS)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>comment</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comment visible in DBA_REPPROP data dictionary view</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32796"
>15.3.8.2.1 Exceptions</A
></H4
><P
CLASS="para"
>The ALTER_MASTER_PROPAGATION procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmaster</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>One of the sites in dblink_list is not a master site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The propagation_mode is not SYNCHRONOUS or ASYNCHRONOUS</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32841"
>15.3.8.2.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling ALTER_MASTER_PROPAGATION:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must run this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group must be quiesced.</P
></LI
></UL
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32849"
>15.3.8.2.3 Example</A
></H4
><P
CLASS="para"
>The following call changes the propagation mode between D7CA.BIGWHEEL.COM and D7NY.BIGWHEEL.COM to SYNCHRONOUS:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>	BEGIN
		DBMS_REPCAT.ALTER_MASTER_PROPAGATION(
			gname		=&gt; 'SPROCKET', 
			master		=&gt; 'D7CA.BIGWHEEL.COM', 
			dblink_list	=&gt; 'D7NY.BIGWHEEL.COM', 
			use_existing_objects=&gt; 'FALSE', 
			propagation_mode=&gt; 'SYNCHRONOUS');
	END;</PRE
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> <A
CLASS="indexterm"
NAME="ch15-idx-960886-0"
></A
>If you change the propagation mode, you must also regenerate the replication support triggers for all replicated tables; ALTER_MASTER_PROPAGATION does not do this automatically. After altering the propagation method, you must call DBMS_REPCAT.GENERATE_REPLICATION_TRIGGERS for all replicated tables in the replication <A
CLASS="indexterm"
NAME="ch15-idx-960884-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960884-1"
></A
>group.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="ch15-SECT-3.8.3"
>15.3.8.3 The DBMS_REPCAT.<A
CLASS="indexterm"
NAME="ch15-idx-960887-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960887-1"
></A
>SEND_AND_COMPARE_OLD_VALUES procedure (Oracle8 only)</A
></H4
><P
CLASS="para"
>The default behavior of advanced replication is to send the old and new values of every column to participating master sites whenever you update a row in a replicated table. At the destination sites, Oracle uses this information to ensure that the version of the row that you updated matches the version of the row currently at the destination. However, if you know that certain columns in a table will never change, you can avoid sending the data in these columns when you propagate updates to participating master sites. Using the SEND_AND_COMPARE_OLD_VALUES procedure (available only in Oracle8) in this way, you'll reduce propagation overhead. Here is the specification:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>PROCEDURE DBMS_REPCAT.SEND_AND_COMPARE_OLD_VALUES
   (sname IN VARCHAR2
    oname IN VARCHAR2,
    {column_list IN VARCHAR2 | column_table IN dbms_repcat.varchar2s},
    operation IN VARCHAR2 := 'UPDATE',
    send IN BOOLEAN := TRUE);</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Parameters are summarized in the following table.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>sname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name of the replication group whose propagation mode is being altered</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>oname</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Table being altered</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_list</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Comma-separated list of columns whose propagation mode is being altered; "*" indicates all nonkey columns</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>column_table</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>PL/SQL table of containing columns whose propagation is being altered</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>operation</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Operation for which this change applies; this may be UPDATE, DELETE, or "*" (indicating both updates and deletes)</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>send</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>If TRUE (the default), then the old values for the columns are sent; if FALSE, then old values are not sent</P
></TD
></TR
></TBODY
></TABLE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> The configuration changes you specify with this procedure do not take effect unless the min_communication parameter is TRUE for the table in question. That is, you must have executed DBMS_REPCAT.GENERATE_REPLICATION_SUPPORT for the table with min_communication = TRUE.</P
></BLOCKQUOTE
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32914"
>15.3.8.3.1 Exceptions</A
></H4
><P
CLASS="para"
>The SEND_AND_COMPARE_OLD_VALUES procedure may raise the following exceptions:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Number</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingobject</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23308</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Object oname does not exist</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>missingcolumn</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23334</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Column(s) specified do not exist in table oname</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>nonmasterdef</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23312</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Calling site is not the master definition site</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>notquiesced</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23310</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Replication group gname is not quiesced</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>typefailure</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-23319</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The oname is not a table</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect4"
><H4
CLASS="sect4"
><A
CLASS="title"
NAME="AUTOID-32966"
>15.3.8.3.2 Restrictions</A
></H4
><P
CLASS="para"
>Note the following restrictions on calling SEND_AND_COMPARE_OLD_VALUES:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>You must call this procedure from the master definition site.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The replication group sname must <A
CLASS="indexterm"
NAME="ch15-idx-960889-0"
></A
><A
CLASS="indexterm"
NAME="ch15-idx-960889-1"
></A
>be <A
CLASS="indexterm"
NAME="ch15-idx-960605-0"
></A
>quiesced.</P
></LI
></UL
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch15_02.htm#ch15-SECT-2.1.1"
TITLE="15.2 DBMS_REPCAT_ADMIN: Setting Up More Administrator Accounts"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 15.2 DBMS_REPCAT_ADMIN: Setting Up More Administrator Accounts"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Oracle Built-in Packages"
><IMG
SRC="../gifs/txthome.gif"
ALT="Oracle Built-in Packages"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch15_04.htm#ch15-SECT-4.2.1"
TITLE="15.4 DBMS_OFFLINE_OG: Performing Site Instantiation"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 15.4 DBMS_OFFLINE_OG: Performing Site Instantiation"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>15.2 DBMS_REPCAT_ADMIN: Setting Up More Administrator Accounts</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>15.4 DBMS_OFFLINE_OG: Performing Site Instantiation</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><IMG SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The Oracle Library Navigation">

<P><font size="-1">
<a href="../copyrght.htm#copy">Copyright (c) 2000</a> O'Reilly &amp; Associates. All rights reserved.
</font></P>

<MAP NAME="map">

<AREA SHAPE="RECT"
COORDS="0,0,35,30"
HREF="../index.htm"
ALT="Library Home">

<AREA SHAPE="RECT"
COORDS="40,0,95,30"
HREF="../prog2/index.htm"
ALT="Oracle PL/SQL Programming, 2nd. Ed.">

<AREA SHAPE="RECT"
COORDS="100,0,200,30"
HREF="../guide8i/index.htm"
ALT="Guide to Oracle 8i Features">

<AREA SHAPE="RECT"
COORDS="205,0,245,30"
HREF="index.htm"
ALT="Oracle Built-in Packages">

<AREA SHAPE="RECT"
COORDS="250,0,320,30"
HREF="../advprog/index.htm"
ALT="Advanced PL/SQL Programming with Packages">

<AREA SHAPE="RECT"
COORDS="325,0,420,30"
HREF="../webapp/index.htm"
ALT="Oracle Web Applications">

<AREA SHAPE="RECT"
COORDS="425,0,490,30"
HREF="../langpkt/index.htm"
ALT="Oracle PL/SQL Language Pocket Reference">

<AREA SHAPE="RECT"
COORDS="495,0,570,30"
HREF="../bipkt/index.htm"
ALT="Oracle PL/SQL Built-ins Pocket Reference">
</MAP>

</BODY
>
<!-- Mirrored from liso.cs.pusan.ac.kr by HTTrack Website Copier/3.x [XR&CO'2001] -->
</HTML
>
