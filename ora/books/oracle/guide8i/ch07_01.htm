<HTML
><HEAD
><TITLE
>[Chapter 7] New and Enhanced Built-in Packages in Oracle8i</TITLE
><META
NAME="DC.Creator"
CONTENT="Steven Feuerstein"><META
NAME="DC.Date"
CONTENT="2000-04-29T19:26:10Z"><META
NAME="DC.Format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.Identifier"
CONTENT="O'Reilly and Associates CDROM-1-56592-675-7E"><META
NAME="DC.Language"
CONTENT="en-US"><META
NAME="DC.Publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.Source"
CONTENT="1-56592-675-7E"
SCHEME="ISBN"><META
NAME="DC.Subject.Keyword"
CONTENT="Oracle 8i Features"><META
NAME="DC.Title"
CONTENT="Oracle PL/SQL Programming Guide to Oracle 8i Features"><META
NAME="DC.Type"
CONTENT="Text.Monograph"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REL="stylesheet"
TYPE="text/css"
HREF="../style/style1.css"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="index.htm"
TITLE="Oracle PL/SQL Programming Guide to Oracle 8i Features"><LINK
REL="prev"
HREF="ch06_03.htm"
TITLE="6.3 Schema-Level Event Triggers"><LINK
REL="next"
HREF="ch07_02.htm#ch07-SECT-2.3"
TITLE="7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility"></HEAD
><BODY
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Oracle PL/SQL Programming Guide to Oracle 8i Features"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Oracle PL/SQL Programming Guide to Oracle 8i Features"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch06_03.htm"
TITLE="6.3 Schema-Level Event Triggers"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 6.3 Schema-Level Event Triggers"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><SPAN
CLASS="NAVTITLE"
>Chapter 7</SPAN
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch07_02.htm#ch07-SECT-2.3"
TITLE="7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="chapter"
><H1
CLASS="chapter"
><A
CLASS="title"
NAME="ch07-20659"
>7. New and Enhanced Built-in Packages in Oracle8i</A
></H1
><DIV
CLASS="htmltoc"
><P
><B
>Contents:</B
><BR><A
CLASS="sect1"
HREF="#ch07-93293"
TITLE="7.1 DBMS_PROFILER: Providing Code Profiling "
>DBMS_PROFILER: Providing Code Profiling </A
><BR><A
CLASS="sect1"
HREF="ch07_02.htm#ch07-SECT-2.3"
TITLE="7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility"
>DBMS_TRACE: Providing a PL/SQL Trace Facility</A
><BR><A
CLASS="sect1"
HREF="ch07_03.htm#ch07-SECT-3.4"
TITLE="7.3 DBMS_RLS: Implementing Fine-Grained Access Control"
>DBMS_RLS: Implementing Fine-Grained Access Control</A
><BR><A
CLASS="sect1"
HREF="ch07_04.htm"
TITLE="7.4 UTL_COLL: Using Collection Locators"
>UTL_COLL: Using Collection Locators</A
><BR><A
CLASS="sect1"
HREF="ch07_05.htm#ch07-SECT-5.2.1"
TITLE="7.5 LOB Enhancements"
>LOB Enhancements</A
><BR><A
CLASS="sect1"
HREF="ch07_06.htm#ch07-SECT-6.4.1"
TITLE="7.6 New DBMS_AQ and DBMS_AQADM Features"
>New DBMS_AQ and DBMS_AQADM Features</A
><BR><A
CLASS="sect1"
HREF="ch07_07.htm#ch07-SECT-7.2"
TITLE="7.7 New DBMS_UTILITY Features"
>New DBMS_UTILITY Features</A
></P
><P
></P
></DIV
><P
CLASS="para"
>  <A
CLASS="indexterm"
NAME="AUTOID-3618"
></A
> <A
CLASS="indexterm"
NAME="AUTOID-3620"
></A
>Oracle has added a number of new built-in packages in Oracle8<EM
CLASS="emphasis"
>i</EM
>. Many of these packages offer very specialized capabilities for replication, database administration, and online analytical processing (OLAP). Other packages will play a more crucial role for PL/SQL developers in the brave new world of Oracle8<EM
CLASS="emphasis"
>i</EM
>. We'll introduce you to the capabilities of the packages in this second category (and existing packages, such as DBMS_UTILITY, that have been enhanced) in this chapter. More comprehensive, reference-oriented coverage of the packages will be included in the second edition of <CITE
CLASS="citetitle"
>Oracle Built-in Packages</CITE
> (O'Reilly &amp; Associates, expected in 2000). In addition to the new packages, Oracle8<EM
CLASS="emphasis"
>i</EM
> includes a new built-in conversion function, TO_LOB, which is also described in this chapter.</P
><P
CLASS="para"
>In addition, a number of other new and modified packages are covered throughout the book in their appropriate chapters, as follows:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>The DBMS_JAVA and DBMS_JAVA_TEST packages are described in <A
CLASS="xref"
HREF="ch09_01.htm"
>Chapter 9, <CITE
CLASS="chapter"
>Calling Java from PL/SQL</CITE
></A
>. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>There are several new programs in DBMS_SESSION, covered in <A
CLASS="xref"
HREF="ch08_01.htm"
>Chapter 8, <CITE
CLASS="chapter"
>Deploying Fine-Grained Access Control</CITE
></A
>.</P
></LI
></UL
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch-07-dbmspro"
></A
><A
CLASS="xref"
HREF="ch07_01.htm"
>Table 7.1</A
> provides a complete list of packages added in Oracle8<EM
CLASS="emphasis"
>i</EM
>.</P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch07-78710"
>Table 7.1: New Built-in Packages in Oracle8i </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Package Name</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3652"
></A
>DBMS_INDEXING</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Contains specifications for packages and types used in DBMS extensibility infrastructure (indexing, optimization, etc.).</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3659"
></A
>DBMS_JAVA</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Gives you the ability to modify the behavior of the Aurora Java Virtual Machine (  JVM) in Oracle. You can enable output (meaning that Java's System.out.println will act like DBMS_OUTPUT.PUT_LINE), set compiler and debugger options, and more.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3666"
></A
>DBMS_JAVA_TEST</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Interface to Aurora JVM to let you easily test methods (functions) defined in classes that you have loaded into Oracle.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3673"
></A
>DBMS_LOGMNR</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3676"
></A
>DBMS_LOGMNR_D</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Interact with and support a variety of operations in the new Oracle utility LogMiner, which allows you to read information contained in online and archived redo logs based on selection criteria. </P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DBMS_PROFILER</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Accesses performance and code coverage analysis of your PL/SQL application.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3688"
></A
>DBMS_REPAIR</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Offers a set of procedures to facilitate data corruption repair.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3695"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3697"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3699"
></A
>DBMS_REPCAT_FLA DBMS_REPCAT_FLA_MAS DBMS_REPCAT_FLA_UTL</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>New replication packages.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DBMS_REPCAT_RGT</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Offers an API to control the maintenance and definition of refresh group templates.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3711"
></A
>DBMS_RESOURCE_MANAGER</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>An API to the Database Resource Manager that allows you to maintain resource management plans, consumer groups, and plan directives.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3718"
></A
>DBMS_RESOURCE_MANAGER_PRIVS</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Maintains privileges associated with resource consumer groups.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3725"
></A
>DBMS_RLS</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Offers an interface to the fine-grained access control administrative features of Oracle8<EM
CLASS="emphasis"
>i</EM
>; only available with the Enterprise Edition.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3733"
></A
>DBMS_RULE</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3736"
></A
>DBMS_RULE_ADM</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3739"
></A
>DBMS_RULE_EXIMP</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Administer export/import information in the Rules Engine Administrator.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3746"
></A
>DBMS_SPACE_ADMIN</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Provides tablespace and segment space administration that is not available through the standard SQL statements.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3753"
></A
>DBMS_STATS</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Provides a PL/SQL-based mechanism to allow users to view and modify optimizer statistics gathered on database objects.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3760"
></A
>DBMS_SUMMARY</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Manages and refreshes table-based summaries.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3767"
></A
>DBMS_TRACE</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Allows PL/SQL developers to trace the execution of stored PL/SQL functions, procedures, and exceptions. </P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3774"
></A
>DBMS_TTS</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Contains procedures and functions supporting the Pluggable Tablespace feature. These programs are mostly called by the import/export utilities.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3781"
></A
>OUTLN_PKG</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Contains a functional interface for procedures and functions that are associated with the management of stored outlines.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>UTL_COLL</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Allows PL/SQL programs to use collection locators in order to perform queries and updates.</P
></TD
></TR
></TBODY
></TABLE
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch07-93293"
>7.1 DBMS_PROFILER: Providing Code Profiling </A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3793"
></A
>In Oracle8<EM
CLASS="emphasis"
>i</EM
>, Oracle adds a new package, DBMS_PROFILER, to facilitate performance and code coverage analysis of your PL/SQL application. Use this package to define one or more runs of your code and collect a wide range of information about the code that is executed in that run. </P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3797"
></A
>The API for this package is very simple. You start the profiler, run your code, and stop the profiler. The PL/SQL engine will have populated up to three different tables with the performance and code coverage information. You can then use SQL&nbsp;-- either your own queries or one of the reports offered by Oracle&nbsp;-- to examine the results of the run. </P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch07-SECT-1.1"
>7.1.1 DBMS_PROFILER Programs</A
></H3
><P
CLASS="para"
>The DBMS_PROFILER package contains the two functions listed in <A
CLASS="xref"
HREF="ch07_01.htm"
>Table 7.2</A
>.</P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch07-98633"
>Table 7.2: DBMS_PROFILER Programs </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Program</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description </P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DBMS_PROFILER.START_PROFILER function</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> <A
CLASS="indexterm"
NAME="AUTOID-3818"
></A
> Starts profiling in the current connection. You can provide an optional string to give a name to the profiling session.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DBMS_PROFILER.STOP_PROFILER function</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> <A
CLASS="indexterm"
NAME="AUTOID-3825"
></A
>  Ends profiling in the current connection.</P
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch07-SECT-1.2"
>7.1.2 Installing DBMS_PROFILER</A
></H3
><P
CLASS="para"
>The DBMS_PROFILER package may not have been installed automatically for you when the database was set up. In this case, you will need to install the package specification and body. After that, you will want to create profiler tables and packages to help you analyze the output (stored in the profiler tables) more effectively.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3831"
></A
><A
CLASS="xref"
HREF="ch07_01.htm"
>Table 7.3</A
> shows all of the files related to DBMS_PROFILER that you will probably want to run. You will find most of these files on Windows NT <I
CLASS="filename"
> </I
>in one of the following directories (the exceptions are the demo files <I
CLASS="filename"
>profrep.sql</I
> and <I
CLASS="filename"
>profsum.sql)</I
>, depending on how you installed the database:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
><I
CLASS="filename"
>\Oracle\Ora81\Rdbms\Admin\</I
></TD
></TR
><TR
><TD
CLASS="member"
><I
CLASS="filename"
>\Ora81\Rdbms\Admin\</I
></TD
></TR
></TABLE
><P
CLASS="para"
>Regardless of the higher-level directory structure, these files will always be found in the <I
CLASS="filename"
>Rdbms\Admin</I
> subdirectory under the Oracle 8.1 home directory.</P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch07-12682"
>Table 7.3: DBMS_PROFILER Files </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>File</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3857"
></A
><I
CLASS="filename"
>dbmspbp.sql</I
></P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DBMS_PROFILER package specification; this package should be created automatically when you install the Oracle8<EM
CLASS="emphasis"
>i</EM
> database. You may want to examine this file to read the documentation.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3866"
></A
><I
CLASS="filename"
>prvtpbp.plb</I
></P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>DBMS_PROFILER package body/library definition. This is a wrapped file and should be executed automatically when you install the Oracle8<EM
CLASS="emphasis"
>i</EM
> database.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3875"
></A
><I
CLASS="filename"
>profload.sql</I
></P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Orchestrates the loading of <I
CLASS="filename"
>dbmspbp.sql</I
> and <I
CLASS="filename"
>prvtpbp.plb.</I
> This script must be run under a DBA account.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3885"
></A
><I
CLASS="filename"
>proftab.sql</I
></P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Script to create the profiling tables. When you profile a program, data is written to one or more of these tables: </P
>  <UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3893"
></A
>plsql_profiler_runs</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3897"
></A
>plsql_profiler_units</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3901"
></A
>plsql_profiler_data</P
></LI
></UL
> </TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3906"
></A
><I
CLASS="filename"
>profrep.sql</I
></P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Creates a set of views and a reporting package named prof_report_utilities that offers an API to more easily extract reports from the profiling tables. Found under <I
CLASS="filename"
>\plsql\demo</I
>.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3915"
></A
><I
CLASS="filename"
>profsum.sql</I
></P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>A set of ad hoc queries and calls to programs in the prof_report_utilities package. Don't run the whole file unless you have a small volume of data in your profiling tables. Instead, go through the file and extract those queries that you want to run. Found under <I
CLASS="filename"
>\plsql\demo</I
>.</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3922"
></A
>You can define the profiler tables in each individual schema developers want to profile. You can also define the profiler tables in a central schema, to be shared among multiple developers. In this case, you need to grant full access to all of the tables and to the sequence that defines the run number. You will also need to create public synonyms.</P
><P
CLASS="para"
>The profiler will not profile a PL/SQL block unless the current user has CREATE access on the block.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch07-SECT-1.3"
>7.1.3 DBMS_PROFILER Example</A
></H3
><P
CLASS="para"
>It's certainly easy enough to use the PL/SQL profiler. Here's an example of the code you would execute:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>/* Filename on companion disk: profiler.sql */
BEGIN
   DBMS_OUTPUT.PUT_LINE (
      DBMS_PROFILER.START_PROFILER (
         'showemps ' || 
         TO_CHAR (SYSDATE, 'YYYYMMDD HH24:MI:SS')
         )
      );
   showemps;
   DBMS_OUTPUT.PUT_LINE (
      DBMS_PROFILER.STOP_PROFILER);
END;
/</PRE
></BLOCKQUOTE
><P
CLASS="para"
>If you do not pass an argument to START_PROFILER, then the "name" of the profile run is SYSDATE. In the example just given, I want to record both the name of the program I am running and the date-time stamp so that I can distinguish this run from others for the same program.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch07-SECT-1.4"
>7.1.4 Profiler Return Codes</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3933"
></A
>Both START_PROFILER and END_PROFILER are functions that return a status code. A value of 0 means that the program was called successfully. A nonzero return code indicates a problem, and may be one of the values listed in <A
CLASS="xref"
HREF="ch07_01.htm"
>Table 7.4</A
>.</P
><BR><TABLE
CLASS="table"
BORDER="1"
CELLPADDING="3"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="ch07-71794"
>Table 7.4: DBMS_PROFILER Return Codes </A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Database Constant</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Value</P
></TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>Description</P
></TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
> <A
CLASS="indexterm"
NAME="AUTOID-3951"
></A
> DBMS_PROFILER.SUCCESS</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>0</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>No problem!</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3960"
></A
>DBMS_PROFILER.ERROR_PARM</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>1</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>A subprogram was called with an incorrect parameter.</P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3969"
></A
>DBMS_PROFILER.ERROR_IO</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>2</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>An attempt to flush profile data to the tables failed. Make sure the tables are present and accessible and have sufficient space for the inserts. </P
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3978"
></A
>DBMS_PROFILER.ERROR_VERSION</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>-1</P
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><P
CLASS="para"
>The engine has detected a mismatch between the profiler package and the database version. The only possible recovery is to install the correct version of the package.</P
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>Consider yourself warned: unless you are running a very simple application, the profiler will write thousands of rows of data to its tables. To make it easier for you to manage all this information, I have created the following scripts, located on the companion disk:</P
><DL
CLASS="variablelist"
><DT
CLASS="term"
><I
CLASS="filename"
>proftrunc.sql</I
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3991"
></A
>Truncates all three profiling tables</P
></DD
><DT
CLASS="term"
><I
CLASS="filename"
>profdel.sql</I
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3998"
></A
>Deletes all rows from the three profiling tables for the specified run number<A
CLASS="indexterm"
NAME="AUTOID-4000"
></A
></P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch06_03.htm"
TITLE="6.3 Schema-Level Event Triggers"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 6.3 Schema-Level Event Triggers"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Oracle PL/SQL Programming Guide to Oracle 8i Features"
><IMG
SRC="../gifs/txthome.gif"
ALT="Oracle PL/SQL Programming Guide to Oracle 8i Features"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch07_02.htm#ch07-SECT-2.3"
TITLE="7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>6.3 Schema-Level Event Triggers</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>7.2 DBMS_TRACE: Providing a PL/SQL Trace Facility</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><IMG SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The Oracle Library Navigation">

<P><font size="-1">
<a href="../copyrght.htm#copy">Copyright (c) 2000</a> O'Reilly &amp; Associates. All rights reserved.
</font></P>

<MAP NAME="map">

<AREA SHAPE="RECT"
COORDS="0,0,35,30"
HREF="../index.htm"
ALT="Library Home">

<AREA SHAPE="RECT"
COORDS="40,0,95,30"
HREF="../prog2/index.htm"
ALT="Oracle PL/SQL Programming, 2nd. Ed.">

<AREA SHAPE="RECT"
COORDS="100,0,200,30"
HREF="index.htm"
ALT="Guide to Oracle 8i Features">

<AREA SHAPE="RECT"
COORDS="205,0,245,30"
HREF="../bipack/index.htm"
ALT="Oracle Built-in Packages">

<AREA SHAPE="RECT"
COORDS="250,0,320,30"
HREF="../advprog/index.htm"
ALT="Advanced PL/SQL Programming with Packages">

<AREA SHAPE="RECT"
COORDS="325,0,420,30"
HREF="../webapp/index.htm"
ALT="Oracle Web Applications">

<AREA SHAPE="RECT"
COORDS="425,0,490,30"
HREF="../langpkt/index.htm"
ALT="Oracle PL/SQL Language Pocket Reference">

<AREA SHAPE="RECT"
COORDS="495,0,570,30"
HREF="../bipkt/index.htm"
ALT="Oracle PL/SQL Built-ins Pocket Reference">
</MAP>

</BODY
>
<!-- Mirrored from liso.cs.pusan.ac.kr by HTTrack Website Copier/3.x [XR&CO'2001] -->
</HTML
>
