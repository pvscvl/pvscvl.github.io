<HTML
><HEAD
><TITLE
>[Chapter 9] 9.2 Getting Ready to Use Java in Oracle</TITLE
><META
NAME="DC.Creator"
CONTENT="Steven Feuerstein"><META
NAME="DC.Date"
CONTENT="2000-04-29T19:27:06Z"><META
NAME="DC.Format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.Identifier"
CONTENT="O'Reilly and Associates CDROM-1-56592-675-7E"><META
NAME="DC.Language"
CONTENT="en-US"><META
NAME="DC.Publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.Source"
CONTENT="1-56592-675-7E"
SCHEME="ISBN"><META
NAME="DC.Subject.Keyword"
CONTENT="Oracle 8i Features"><META
NAME="DC.Title"
CONTENT="Oracle PL/SQL Programming Guide to Oracle 8i Features"><META
NAME="DC.Type"
CONTENT="Text.Monograph"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REL="stylesheet"
TYPE="text/css"
HREF="../style/style1.css"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch09_01.htm"
TITLE="9. Calling Java from PL/SQL"><LINK
REL="prev"
HREF="ch09_01.htm"
TITLE="9.1 Oracle8i and Java"><LINK
REL="next"
HREF="ch09_03.htm#ch09-SECT-3.2"
TITLE="9.3 A Simple Demonstration"></HEAD
><BODY
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Oracle PL/SQL Programming Guide to Oracle 8i Features"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Oracle PL/SQL Programming Guide to Oracle 8i Features"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch09_01.htm"
TITLE="9.1 Oracle8i and Java"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 9.1 Oracle8i and Java"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><SPAN
CLASS="NAVTITLE"
><A
CLASS="chapter"
REL="up"
HREF="ch09_01.htm"
TITLE="9. Calling Java from PL/SQL"
>Chapter 9<BR>Calling Java from PL/SQL</A
></SPAN
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch09_03.htm#ch09-SECT-3.2"
TITLE="9.3 A Simple Demonstration"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 9.3 A Simple Demonstration"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="ch09-19911"
>9.2 Getting Ready to Use Java in Oracle</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch-09-insting"
></A
>Before you can call Java methods from within your PL/SQL programs you will need to do the following:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-5777"
></A
>Install a Java Development Kit (   JDK(TM)) 1.1.5 or above (check the Oracle documentation for the latest information about version support; some features of Java 1.2 are not, at the time of publication, supported inside Oracle). </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-5781"
></A
><A
CLASS="indexterm"
NAME="AUTOID-5783"
></A
>Build your Java classes and code elements, and then compile them into <I
CLASS="filename"
>.class</I
> and <I
CLASS="filename"
>.jar</I
> files. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Set privileges on your Oracle schema.</P
></LI
></UL
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch09-SECT-2.1"
>9.2.1 Installing Java</A
></H3
><P
CLASS="para"
>You will need to install a Java Development Kit (  JDK) 1.1.5 or above. You can do this by downloading a JDK from the Javasoft web site; Oracle also provides a JDK with Oracle8<EM
CLASS="emphasis"
>i</EM
>. Here is the Javasoft URL:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
><A
CLASS="systemitem.url"
HREF="../../../../../../../www.javasoft.com/products/index.html"
>http://www.javasoft.com/products/index.html</A
></TD
></TR
></TABLE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-5797"
></A
><A
CLASS="indexterm"
NAME="AUTOID-5799"
></A
>You will need to make sure to set the CLASSPATH so that the Java compiler (javac) can locate any references to your classes&nbsp;-- and to the Oracle classes. Visit the following URL to get more information about CLASSPATH:</P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
><A
CLASS="systemitem.url"
HREF="../../../../../../../www.javasoft.com/products/jdk/1.2/docs/tooldocs/win32/classpath.html#env%20var"
>http://www.javasoft.com/products/jdk/1.2/docs/tooldocs/win32/classpath.html#env var</A
></TD
></TR
></TABLE
><P
CLASS="para"
>You can see an online version of the Java language specification at:<A
CLASS="indexterm"
NAME="AUTOID-5805"
></A
></P
><TABLE
CLASS="simplelist"
BORDER="0"
><TR
><TD
CLASS="member"
><A
CLASS="systemitem.url"
HREF="../../../../../../../java.sun.com/docs/books/jls/html/index.html"
>http://java.sun.com/docs/books/jls/html/index.html</A
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch09-SECT-2.2"
>9.2.2 Building and Compiling Your Java Code</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch-09-bcjc"
></A
><A
CLASS="indexterm"
NAME="ch-09-bccode"
></A
>Many PL/SQL developers (including the author) have never worked with an object-oriented language of any kind, so coming up to speed on Java can be a bit of a challenge. In the short time in which I have studied and used Java, I have come to these conclusions:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>It doesn't take long to get a handle on the syntax needed to build simple classes in Java.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>It's not very difficult at all to start leveraging Java inside PL/SQL.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Writing real object-oriented applications using Java requires significant rethinking for PL/SQL developers.</P
></LI
></UL
><P
CLASS="para"
>It would be impossible to offer a comprehensive primer on Java in this chapter. There are many (many, many, many) books available on various aspects of Java, and a number of them are excellent. I would recommend that you check out the following:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
><EM
CLASS="emphasis"
>Exploring Java</EM
>, by Patrick Niemeyer and Joshua Peck (O'Reilly &amp; Associates). One of more than a dozen O'Reilly books on Java, this text is a nice introduction, from the standpoint of both syntax and concepts.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><EM
CLASS="emphasis"
>The Java Programming Language, Second Edition, </EM
>by Ken Arnold and James Gosling (Addison Wesley). James Gosling is the creator of Java, so you'd expect the book to be helpful. It is. Written in clear, simple terms, it gives you a strong grounding in the language.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
><EM
CLASS="emphasis"
>Thinking in Java</EM
>, by Bruce Eckel (Prentice Hall). A very readable and creative approach to explaining object-oriented concepts. If you liked the feel of my <EM
CLASS="emphasis"
>Oracle PL/SQL Programming</EM
>, you will definitely enjoy <EM
CLASS="emphasis"
>Thinking in Java</EM
>. </P
></LI
></UL
><P
CLASS="para"
>In <A
CLASS="xref"
HREF="ch09_09.htm#ch09-SECT-9.1.1"
>Section 9.9, "Examples</A
>, later in this chapter, as I demonstrate how to call Java methods from within PL/SQL, I will also take you step by step through the creation of relatively simple classes. You will find that, in many cases, this discussion will be all you need to get the job done.<A
CLASS="indexterm"
NAME="AUTOID-5839"
></A
></P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="ch09-SECT-2.3"
>9.2.3 Setting Oracle Privileges</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="ch-09-orpriv"
></A
><A
CLASS="indexterm"
NAME="AUTOID-5846"
></A
><A
CLASS="indexterm"
NAME="AUTOID-5848"
></A
><A
CLASS="indexterm"
NAME="ch-09-opsetting"
></A
>Oracle8<EM
CLASS="emphasis"
>i</EM
> has created two new roles to support Java security. For many Java-based operations within the database, you will not have to work with these roles. If, on the other hand, you want to interact with the operating system (to access or modify operating system files, for example), you need to be granted one of the following roles:<A
CLASS="indexterm"
NAME="AUTOID-5853"
></A
> </P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>JAVASYSPRIV
JAVAUSERPRIV</PRE
></BLOCKQUOTE
><P
CLASS="para"
>You grant these roles as you would any other database role. For example, if I want to allow SCOTT to perform any kind of Java-related operation, I would issue this command from a SYSDBA account:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>GRANT JAVASYSPRIV TO SCOTT;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>If I want to place some restrictions on what the user can do with Java, I might execute this grant instead:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>GRANT JAVAUSERPRIV TO SCOTT;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>Here's one example of the difference between the two roles. To create a file through Java, I need the JAVASYSPRIV role; to read or write a file, I only need the JAVAUSERPRIV role. See the Oracle documentation for more details, including a table listing the different check methods of Java and which role is required to run those methods.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-5861"
></A
>When the Aurora JVM is initialized, it installs an instance of java.lang.SecurityManager, the Java Security Manager. Each Oracle user has a <I
CLASS="firstterm"
>dynamic ID</I
>, which will correspond to the session owner when you access the Java methods from within PL/SQL. </P
><P
CLASS="para"
>If a user lacking the sufficient privileges granted by one of these roles tries to execute an illegal operation, then the JVM will throw the java.lang.SecurityException. Here is what you would see in SQL*Plus:</P
><BLOCKQUOTE
><PRE
CLASS="programlisting"
>ORA-29532: Java call terminated by uncaught Java exception:
           java.lang.SecurityException</PRE
></BLOCKQUOTE
><P
CLASS="para"
>When you run Java methods inside the database, different security issues can arise, particularly when interacting with the server-side filesystem or other operating system resources. Oracle follows one of the following two rules when checking I/O operations: </P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>If the dynamic ID has been granted JAVASYSPRIV, then Security Manager allows the operation to proceed. </P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>If the dynamic ID has been granted JAVAUSERPRIV, then Security Manager follows the same rules that apply to the PL/SQL UTL_FILE package to determine if the operation is valid. In other words, the file must be in a directory (or subdirectory) specified by the UTL_FILE_DIR parameter in the database initialization file.<A
CLASS="indexterm"
NAME="AUTOID-5872"
></A
><A
CLASS="indexterm"
NAME="AUTOID-5873"
></A
></P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch09_01.htm"
TITLE="9.1 Oracle8i and Java"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 9.1 Oracle8i and Java"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Oracle PL/SQL Programming Guide to Oracle 8i Features"
><IMG
SRC="../gifs/txthome.gif"
ALT="Oracle PL/SQL Programming Guide to Oracle 8i Features"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="sect1"
HREF="ch09_03.htm#ch09-SECT-3.2"
TITLE="9.3 A Simple Demonstration"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 9.3 A Simple Demonstration"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>9.1 Oracle8i and Java</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>9.3 A Simple Demonstration</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><IMG SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The Oracle Library Navigation">

<P><font size="-1">
<a href="../copyrght.htm#copy">Copyright (c) 2000</a> O'Reilly &amp; Associates. All rights reserved.
</font></P>

<MAP NAME="map">

<AREA SHAPE="RECT"
COORDS="0,0,35,30"
HREF="../index.htm"
ALT="Library Home">

<AREA SHAPE="RECT"
COORDS="40,0,95,30"
HREF="../prog2/index.htm"
ALT="Oracle PL/SQL Programming, 2nd. Ed.">

<AREA SHAPE="RECT"
COORDS="100,0,200,30"
HREF="index.htm"
ALT="Guide to Oracle 8i Features">

<AREA SHAPE="RECT"
COORDS="205,0,245,30"
HREF="../bipack/index.htm"
ALT="Oracle Built-in Packages">

<AREA SHAPE="RECT"
COORDS="250,0,320,30"
HREF="../advprog/index.htm"
ALT="Advanced PL/SQL Programming with Packages">

<AREA SHAPE="RECT"
COORDS="325,0,420,30"
HREF="../webapp/index.htm"
ALT="Oracle Web Applications">

<AREA SHAPE="RECT"
COORDS="425,0,490,30"
HREF="../langpkt/index.htm"
ALT="Oracle PL/SQL Language Pocket Reference">

<AREA SHAPE="RECT"
COORDS="495,0,570,30"
HREF="../bipkt/index.htm"
ALT="Oracle PL/SQL Built-ins Pocket Reference">
</MAP>

</BODY
>
<!-- Mirrored from liso.cs.pusan.ac.kr by HTTrack Website Copier/3.x [XR&CO'2001] -->
</HTML
>
