<html><head><title>[Chapter 2] 2.3 Simple Edits </TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:55:44Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Simple Editing"><link rel="prev" href="ch02_02.htm" webstripperlinkwas="ch02_02.htm" title="2.2 Moving the Cursor"><link rel="next" href="ch02_04.htm" webstripperlinkwas="ch02_04.htm" title="2.4 More Ways to Insert Text "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_02.htm" webstripperlinkwas="ch02_02.htm" title="2.2 Moving the Cursor"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 2.2 Moving the Cursor" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Simple Editing">Chapter 2<br>Simple Editing</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_04.htm" webstripperlinkwas="ch02_04.htm" title="2.4 More Ways to Insert Text "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 2.4 More Ways to Insert Text " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-2-SECT-3">2.3 Simple Edits </A
></H2
><p class="para">When you enter text in your file, it is rarely perfect.
You find typos or want to improve on a phrase; sometimes your program
has a bug.
Once you enter text, you have to be able to change it, delete it,
move it, or copy it.
<a class="xref" href="#VI6-CH-2-FIG-2">Figure 2.3</A
>
shows the kinds of edits you
might want to make to a file.
The edits are indicated by proofreading marks.</P
><h4 class="figure"><a class="title" name="VI6-CH-2-FIG-2">Figure 2.3: Proofreading edits</A
></H4
><img class="graphic" src="figs/vi_6.fig.0203.gif" webstripperlinkwas="figs/vi_6.fig.0203.gif" alt="Figure 2.3"><p class="para"><a class="indexterm" name="AUTOID-1306"></A
><a class="indexterm" name="AUTOID-1308"></A
><a class="indexterm" name="AUTOID-1311"></A
><a class="indexterm" name="AUTOID-1315"></A
><a class="indexterm" name="AUTOID-1317"></A
><a class="indexterm" name="AUTOID-1320"></A
><a class="indexterm" name="AUTOID-1322"></A
><a class="indexterm" name="AUTOID-1324"></A
><a class="indexterm" name="AUTOID-1326"></A
><a class="indexterm" name="AUTOID-1328"></A
><a class="indexterm" name="AUTOID-1331"></A
>In <kbd class="command">vi</KBD
> you can perform any of these edits with a few basic
keystrokes:  <code class="literal">i</CODE
> for insert (which you've
already seen); <code class="literal">a</CODE
> for append; <code class="literal">c</CODE
> for change; and
<code class="literal">d</CODE
> for delete. To move or copy text, you use a pair of commands.
You move text with a<a class="indexterm" name="AUTOID-1339"></A
><a class="indexterm" name="AUTOID-1341"></A
><a class="indexterm" name="AUTOID-1344"></A
><a class="indexterm" name="AUTOID-1347"></A
><a class="indexterm" name="AUTOID-1350"></A
><a class="indexterm" name="AUTOID-1353"></A
><a class="indexterm" name="AUTOID-1355"></A
><a class="indexterm" name="AUTOID-1357"></A
><a class="indexterm" name="AUTOID-1359"></A
>
<code class="literal">d</CODE
> for delete, then a <code class="literal">p</CODE
> for put; you copy text
with a <code class="literal">y</CODE
> for &quot;yank,&quot; then a <code class="literal">p</CODE
> for put.
Each type of edit is described in this section.
<a class="xref" href="#VI6-CH-2-FIG-3">Figure 2.4</A
>
shows the <kbd class="command">vi</KBD
> commands you use to make the
edits marked in
<a class="xref" href="#VI6-CH-2-FIG-2">Figure 2.3</A
>.</P
><h4 class="figure"><a class="title" name="VI6-CH-2-FIG-3">Figure 2.4: Edits with vi commands</A
></H4
><img class="graphic" src="figs/vi_6.fig.0204.gif" webstripperlinkwas="figs/vi_6.fig.0204.gif" alt="Figure 2.4"><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.1">2.3.1 Inserting New Text </A
></H3
><p class="para">You have already seen the insert command used to enter
text into a new file.
You also use the insert command while editing
existing text to add missing characters, words, and sentences.
In the file <i class="filename">practice</I
>, suppose you have the
sentence:</P
><img class="graphic" src="figs/vi.0202.gif" webstripperlinkwas="figs/vi.0202.gif" alt="Graphic"><p class="para">with the cursor positioned as shown.
To insert <em class="emphasis">With a screen editor</EM
> at the beginning of the
sentence, enter the following:</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">2k</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0203.gif" webstripperlinkwas="figs/vi.0203.gif" alt="Graphic"><p class="para">Move the cursor up two lines with the <code class="literal">k</CODE
> command,
to the line where you want to make the insertion.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">iWith a</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0204.gif" webstripperlinkwas="figs/vi.0204.gif" alt="Graphic"><p class="para">Press <code class="literal">i</CODE
> to enter insert mode and begin inserting text.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">screen editor</CODE
><kbd class="keycap">[ESC]</KBD
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0205.gif" webstripperlinkwas="figs/vi.0205.gif" alt="Graphic"><p class="para">Finish inserting text, and press
<kbd class="keycap">[ESC]</KBD
>
to end the insert and return to command mode.</P
></TD
></TR
></TBODY
></TABLE
><p class="para">On the screen shown in the example above, <kbd class="command">vi</KBD
> pushes existing text
to the right as the new text is inserted.<a class="indexterm" name="AUTOID-1411"></A
><a class="indexterm" name="AUTOID-1414"></A
><a class="indexterm" name="AUTOID-1416"></A
><a class="indexterm" name="AUTOID-1418"></A
>
That is because we are assuming that you are using <kbd class="command">vi</KBD
> on an
&quot;intelligent&quot; terminal that can rewrite the screen with each character you type.
An insert on a &quot;dumb&quot; terminal (such as an <em class="emphasis">adm3a</EM
>) will look
different.
The terminal itself cannot handle the overhead of updating the
screen for each character typed (without a tremendous sacrifice of
speed), so <kbd class="command">vi</KBD
> doesn't rewrite the screen
until after you press <kbd class="keycap">[ESC]</KBD
>.
On a dumb terminal, the same insert would appear:</P
><p class="para"></P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Result</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">iWith a</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0206.gif" webstripperlinkwas="figs/vi.0206.gif" alt="Graphic"><p class="para">Press <code class="literal">i</CODE
> to enter insert mode and begin inserting text.
The dumb terminal appears to overwrite the existing
text on the line.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">screen editor</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0207.gif" webstripperlinkwas="figs/vi.0207.gif" alt="Graphic"><p class="para">The insertion appears to have overwritten existing text.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><kbd class="keycap">[ESC]</KBD
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0208.gif" webstripperlinkwas="figs/vi.0208.gif" alt="Graphic"><p class="para">After you have finished inserting text, press
<kbd class="keycap">[ESC]</KBD
>
to end the insert and return to command mode.
<kbd class="command">vi</KBD
> now rewrites the line, so that you see all existing
text.</P
></TD
></TR
></TBODY
></TABLE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.2">2.3.2 Appending Text</A
></H3
><p class="para"><kbd class="keycap">[a]</KBD
><a class="indexterm" name="AUTOID-1460"></A
><a class="indexterm" name="AUTOID-1464"></A
><a class="indexterm" name="AUTOID-1467"></A
><a class="indexterm" name="AUTOID-1469"></A
>
You can append text at any place in your file with the append
command <code class="literal">a</CODE
>.
<code class="literal">a</CODE
> works in almost the same way as <code class="literal">i</CODE
>, except that text
is inserted <em class="emphasis">after</EM
> the cursor rather than <em class="emphasis">before</EM
> the cursor.
You may
have noticed that when you press <code class="literal">i</CODE
> to enter insert mode,
the cursor doesn't move until after you enter some text.
On the other hand, when you press <code class="literal">a</CODE
> to enter insert mode, the
cursor moves one space to the right.
When you enter text, it appears <em class="emphasis">after</EM
> the original cursor
position.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.3">2.3.3 Changing Text </A
></H3
><p class="para"><a class="indexterm" name="CH02.CCOMMAND1"></A
><a class="indexterm" name="CH02.CCOMMAND2"></A
><a class="indexterm" name="CH02.CCOMMAND3"></A
><a class="indexterm" name="CH02.CCOMMAND4"></A
><kbd class="keycap">[c]</KBD
>
You can replace any text in your file with the change command,
<code class="literal">c</CODE
>.
In order to tell <code class="literal">c</CODE
> how much text to change, you combine
<code class="literal">c</CODE
> with a movement command.
In this way, a movement command serves as a <em class="emphasis">text object</EM
> for the
<code class="literal">c</CODE
> command to affect.
For example, <code class="literal">c</CODE
> can be used to change text from the cursor:</P
><dl class="variablelist"><dt class="term"><code class="literal">cw</CODE
></DT
><dd class="listitem"><p class="para">to the end of a word.<a class="indexterm" name="AUTOID-1504"></A
></P
></DD
><dt class="term"><code class="literal">c2b</CODE
></DT
><dd class="listitem"><p class="para">back two words</P
></DD
><dt class="term"><code class="literal">c$</CODE
></DT
><dd class="listitem"><p class="para">to the end of line<a class="indexterm" name="AUTOID-1517"></A
></P
></DD
><dt class="term"><code class="literal">c0</CODE
></DT
><dd class="listitem"><p class="para">to the beginning of line.</P
></DD
></DL
><p class="para">After issuing a change command, you can replace the identified text
with any amount of new text, with no characters at all, with one word,
or with hundreds of lines. <code class="literal">c</CODE
>, like <code class="literal">i</CODE
> and <code class="literal">a</CODE
>, leaves you in insert mode
until you press the
<kbd class="keycap">[ESC]</KBD
>
key.</P
><p class="para"><a class="indexterm" name="AUTOID-1531"></A
><a class="indexterm" name="AUTOID-1534"></A
>When the change only affects the current line,
<kbd class="command">vi</KBD
> marks the end of the text that will be
changed with a <code class="literal">$</CODE
>,
so that you can see what part of the line is affected.
(See the example for <code class="literal">cw</CODE
>, below.)</P
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.3.1">2.3.3.1 Words</A
></H4
><p class="para"><a class="indexterm" name="CH02.WORDCHANGE1"></A
><a class="indexterm" name="CH02.WORDCHANGE2"></A
><a class="indexterm" name="CH02.WORDCHANGE3"></A
><a class="indexterm" name="CH02.WORDCHANGE4"></A
><kbd class="keycap">[cw]</KBD
>
To change a word, combine the <code class="literal">c</CODE
> (change) command with
<code class="literal">w</CODE
> for word.
You can replace a word (<code class="literal">cw</CODE
>) with a longer
or shorter word (or any amount of text).
<code class="literal">cw</CODE
> can be thought of as &quot;delete the word marked and insert
new text until
<kbd class="keycap">[ESC]</KBD
>
is pressed.&quot;</P
><p class="para">Suppose you have the following line in your file <i class="filename">practice</I
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">With an editor you can scroll the page,</PRE
></BLOCKQUOTE
></P
><p class="para">and want to change <em class="emphasis">an</EM
> to <em class="emphasis">a screen</EM
>. You need to change only
one word:
</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">w</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0209.gif" webstripperlinkwas="figs/vi.0209.gif" alt="Graphic"><p class="para">Move with <code class="literal">w</CODE
> to the place you want the edit to begin.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">cw</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0210.gif" webstripperlinkwas="figs/vi.0210.gif" alt="Graphic"><p class="para">Give the change word command. The end of the text to be
changed will be marked with a <code class="literal">$</CODE
> (dollar sign).</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">a screen</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0211.gif" webstripperlinkwas="figs/vi.0211.gif" alt="Graphic"><p class="para">Type in the replacement text, and then press
<kbd class="keycap">[ESC]</KBD
>
to return to
command mode.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"></P
><p class="para"><code class="literal">cw</CODE
> also works on a portion of a word. For example,
to change <em class="emphasis">spelling</EM
> to <em class="emphasis">spelled</EM
>,
you can position the cursor on the <em class="emphasis">i</EM
>, type
<code class="literal">cw</CODE
>, then type <em class="emphasis">ed</EM
>, and finish
with <kbd class="keycap">[ESC]</KBD
>.</P
><div class="sidebar"><h4 class="sidebar"><a class="title" name="AUTOID-1606">General Form of vi Commands</A
></H4
><p class="para">In the change commands we've mentioned up to this point,
you may have noticed the following pattern:<a class="indexterm" name="AUTOID-1609"></A
></P
><blockquote class="blockquote"><p class="para">(<em class="emphasis">command</EM
>)(<em class="emphasis">text object</EM
>)</P
></BLOCKQUOTE
><p class="para"><em class="emphasis">command</EM
> is the change command <code class="literal">c</CODE
>,
and <em class="emphasis">text object</EM
> is a movement command
(you don't type the parentheses).
But <code class="literal">c</CODE
> is not the only command that requires a text object.
The <code class="literal">d</CODE
> command (delete) and the <code class="literal">y</CODE
> command (yank)
follow this pattern as well.</P
><p class="para">Remember also that movement commands take numeric arguments,
so numbers can be added to the text objects of
<code class="literal">c</CODE
>, <code class="literal">d</CODE
>, and <code class="literal">y</CODE
>
commands. For example, <code class="literal">d2w</CODE
> and <code class="literal">2dw</CODE
>
are commands to delete two words. With this in mind, you can see that
most <kbd class="command">vi</KBD
> commands follow a general pattern:</P
><blockquote class="blockquote"><p class="para">(<em class="emphasis">command</EM
>)(<em class="emphasis">number</EM
>)(<em class="emphasis">text object</EM
>)</P
></BLOCKQUOTE
><p class="para">or the equivalent form:</P
><blockquote class="blockquote"><p class="para">(<em class="emphasis">number</EM
>)(<em class="emphasis">command</EM
>)(<em class="emphasis">text object</EM
>)</P
></BLOCKQUOTE
><p class="para">Here's how this works.  <em class="emphasis">number</EM
> and <em class="emphasis">command</EM
>
are optional. Without them, you simply have a movement command.
If you add a <em class="emphasis">number</EM
>, you have a multiple movement.
On the other hand, combine
a <em class="emphasis">command</EM
> (<code class="literal">c</CODE
>, <code class="literal">d</CODE
>, or <code class="literal">y</CODE
>)
with a <em class="emphasis">text object</EM
> to get an editing command.</P
><p class="para">When you realize how many combinations are possible in this way,
<kbd class="command">vi</KBD
> becomes a powerful editor indeed!</P
></DIV
><a class="indexterm" name="AUTOID-1652"></A
><a class="indexterm" name="AUTOID-1653"></A
><a class="indexterm" name="AUTOID-1654"></A
><a class="indexterm" name="AUTOID-1655"></A
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.3.2">2.3.3.2 Lines</A
></H4
><p class="para"><a class="indexterm" name="CH02.LINECHANGE1"></A
><a class="indexterm" name="CH02.LINECHANGE2"></A
><a class="indexterm" name="CH02.LINECHANGE3"></A
><a class="indexterm" name="CH02.LINECHANGE4"></A
><kbd class="keycap">[cc]</KBD
>
To replace the entire current line, there is the special change
command, <code class="literal">cc</CODE
>.
<code class="literal">cc</CODE
> changes an entire line, replacing that line with any
amount of text entered before pressing
<kbd class="keycap">[ESC]</KBD
>.
It doesn't matter where the
cursor is located on the line; <code class="literal">cc</CODE
>
replaces the entire line of text.</P
><p class="para">A command like <code class="literal">cw</CODE
> works differently from a command like
<code class="literal">cc</CODE
>.  In using <code class="literal">cw</CODE
>, the old text remains until you type
over it, and any old text that is left over (up to the <code class="literal">$</CODE
>)
goes away when you press
<kbd class="keycap">[ESC]</KBD
>.
In using <code class="literal">cc</CODE
>, though, the old text is wiped out first, leaving you
a blank line on which to insert text.</P
><p class="para"><a class="indexterm" name="AUTOID-1684"></A
>The &quot;type over&quot; approach happens with any change command that
affects less than a whole line, whereas the &quot;blank line&quot;
approach happens with any change command that affects one or more
lines.</P
><p class="para"><kbd class="keycap">[C]</KBD
><a class="indexterm" name="AUTOID-1689"></A
>
<code class="literal">C</CODE
> replaces characters from the current cursor position to the
end of the line.
It has the same effect as combining
<code class="literal">c</CODE
> with the
special end-of-line indicator <code class="literal">$</CODE
> (<code class="literal">c$</CODE
>).</P
><p class="para">The commands <code class="literal">cc</CODE
> and <code class="literal">C</CODE
> are really shortcuts for other
commands, so they don't follow the general form of <kbd class="command">vi</KBD
> commands.
You'll see other shortcuts when we discuss the delete and yank commands.</P
><a class="indexterm" name="AUTOID-1699"></A
><a class="indexterm" name="AUTOID-1700"></A
><a class="indexterm" name="AUTOID-1701"></A
><a class="indexterm" name="AUTOID-1702"></A
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.3.3">2.3.3.3 Characters</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-1706"></A
><a class="indexterm" name="AUTOID-1708"></A
><a class="indexterm" name="AUTOID-1711"></A
><a class="indexterm" name="AUTOID-1714"></A
><kbd class="keycap">[r]</KBD
>
One other replacement edit is given by the <code class="literal">r</CODE
> command.
<code class="literal">r</CODE
> replaces a single character with another single character.
You do <em class="emphasis">not</EM
> have to press
<kbd class="keycap">[ESC]</KBD
>
 to return to command mode after making the edit.
There is a misspelling in the line below:</P
><img class="graphic" src="figs/vi.0212.gif" webstripperlinkwas="figs/vi.0212.gif" alt="Graphic"><p class="para">Only one letter needs to be corrected.
You don't want to use <code class="literal">cw</CODE
> in this instance because you would
have to retype the entire word.
Use <code class="literal">r</CODE
> to replace a single character at the cursor:</P
><p class="para"></P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">rW</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0213.gif" webstripperlinkwas="figs/vi.0213.gif" alt="Graphic"><p class="para">Give the replace command <code class="literal">r</CODE
>, followed by the replacement
character <em class="emphasis">W</EM
>.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"></P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.3.4">2.3.3.4 Substituting text</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-1747"></A
><kbd class="keycap">[s]</KBD
>
Suppose you want to change just a few characters, and not a whole
word. The substitute command (<code class="literal">s</CODE
>), by itself,
replaces a single character. With a preceding count, you can replace
that many characters. As with the change command (<code class="literal">c</CODE
>),
the last character of the text will be marked with a <code class="literal">$</CODE
>
so that you can see how much text will be changed.</P
><p class="para"><a class="indexterm" name="AUTOID-1754"></A
><a class="indexterm" name="AUTOID-1757"></A
><a class="indexterm" name="AUTOID-1759"></A
><a class="indexterm" name="AUTOID-1762"></A
><a class="indexterm" name="AUTOID-1765"></A
><kbd class="keycap">[S]</KBD
>
The <code class="literal">S</CODE
> command, as is usually the case with uppercase
commands, lets you change whole lines. In contrast to the
<code class="literal">C</CODE
> command, which changes the rest of the line
from the current cursor position, the <code class="literal">S</CODE
> command
deletes the entire line, no matter where the
cursor is. <kbd class="command">vi</KBD
> puts you in insert mode at the
beginning of the line.
A preceding count replaces that many lines.</P
><p class="para">Both <code class="literal">s</CODE
> and <code class="literal">S</CODE
> put you in
insert mode; when you are finished entering new text, press
<kbd class="keycap">[ESC]</KBD
>.</P
><p class="para"><a class="indexterm" name="AUTOID-1778"></A
><a class="indexterm" name="AUTOID-1780"></A
><kbd class="keycap">[R]</KBD
>
The <code class="literal">R</CODE
> command, like its lowercase counterpart,
replaces text. The difference is that it simply enters overstrike
mode. The characters you type replace what's on the screen,
character by character, until you type <kbd class="keycap">[ESC]</KBD
>.
You can only overstrike a maximum of one line; as you type
<kbd class="keycap">[RETURN]</KBD
>, <kbd class="command">vi</KBD
> will open a new line,
effectively putting you into insert mode.</P
></DIV
><a class="indexterm" name="AUTOID-1787"></A
><a class="indexterm" name="AUTOID-1788"></A
><a class="indexterm" name="AUTOID-1789"></A
><a class="indexterm" name="AUTOID-1790"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.4">2.3.4 Changing Case </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-1794"></A
><a class="indexterm" name="AUTOID-1797"></A
><a class="indexterm" name="AUTOID-1800"></A
><a class="indexterm" name="AUTOID-1802"></A
><a class="indexterm" name="AUTOID-1805"></A
><a class="indexterm" name="AUTOID-1808"></A
><a class="indexterm" name="AUTOID-1810"></A
><a class="indexterm" name="AUTOID-1812"></A
><kbd class="keycap">[~]</KBD
>
Changing the case of a letter is a special form of replacement. The
tilde (<code class="literal">~</CODE
>) command will change a lowercase letter to uppercase, or an
uppercase letter to lowercase. Position the cursor on the letter
whose case you  want to change, and type a <code class="literal">~</CODE
>.  The case of the
letter will change, and the cursor will move to the next character.</P
><p class="para">In older versions of <kbd class="command">vi</KBD
>, you
cannot specify a numeric prefix or text object for the <code class="literal">~</CODE
> to affect.
Modern versions do allow a numeric prefix.</P
><p class="para"><a class="indexterm" name="AUTOID-1821"></A
>If you want to change the case of more than one line at a time, you
must filter the text through a UNIX command like <code class="literal">tr</CODE
>, as
described in <a class="xref" href="ch07_01.htm" webstripperlinkwas="ch07_01.htm">Chapter 7</A
>.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.5">2.3.5 Deleting Text</A
></H3
><p class="para"><a class="indexterm" name="CH02.DELETE1"></A
><a class="indexterm" name="CH02.DELETE2"></A
><kbd class="keycap">[d]</KBD
><a class="indexterm" name="AUTOID-1836"></A
>
You can also delete any text in your file with the delete command
<code class="literal">d</CODE
>.
Like the change command, the delete command requires a
text object (the amount of text to be operated on).
You can delete by word (<code class="literal">dw</CODE
>), by line (<code class="literal">dd</CODE
> and <code class="literal">D</CODE
>),
or by other movement commands that you will learn later.</P
><p class="para">With all deletions, you move to where you want the edit to take
place, then give the delete command (<code class="literal">d</CODE
>) and the text object,
such as <code class="literal">w</CODE
> for word.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.5.1">2.3.5.1 Words</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-1848"></A
><a class="indexterm" name="AUTOID-1851"></A
><a class="indexterm" name="AUTOID-1854"></A
><a class="indexterm" name="AUTOID-1858"></A
><kbd class="keycap">[dw]</KBD
>
Suppose you have the following text in the file:</P
><img class="graphic" src="figs/vi.0214.gif" webstripperlinkwas="figs/vi.0214.gif" alt="Graphic"><p class="para">with the cursor positioned as shown.
You want to delete one <em class="emphasis">are</EM
> in the first line.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">2w</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0215.gif" webstripperlinkwas="figs/vi.0215.gif" alt="Graphic"><p class="para">Move the cursor to where you want the edit to begin (<em class="emphasis">are</EM
>).</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">dw</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0216.gif" webstripperlinkwas="figs/vi.0216.gif" alt="Graphic"><p class="para">Give the delete word command (<code class="literal">dw</CODE
>) to delete the word
<em class="emphasis">are</EM
>.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><code class="literal">dw</CODE
> deletes a word beginning where the cursor is
positioned. Notice that the space following the word is
deleted.</P
><p class="para"><code class="literal">dw</CODE
> can also be used to delete a portion of a word.
In this example:</P
><img class="graphic" src="figs/vi.0217.gif" webstripperlinkwas="figs/vi.0217.gif" alt="Graphic"><p class="para">you want to delete the <em class="emphasis">ed</EM
> from the end of <em class="emphasis">allowed</EM
>.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">dw</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0218.gif" webstripperlinkwas="figs/vi.0218.gif" alt="Graphic"><p class="para">Give the delete word command (<code class="literal">dw</CODE
>) to delete the word,
beginning with the position of the cursor.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><code class="literal">dw</CODE
> always deletes the space before the next word on
a line, but we don't want to do that in the previous example.<a class="indexterm" name="AUTOID-1916"></A
><a class="indexterm" name="AUTOID-1919"></A
>
To retain the space between words, use <code class="literal">de</CODE
>, which will delete
only to the end of a word. Typing <code class="literal">dE</CODE
> will delete to the
end of a word, including punctuation.</P
><p class="para"><a class="indexterm" name="AUTOID-1925"></A
><a class="indexterm" name="AUTOID-1928"></A
><a class="indexterm" name="AUTOID-1932"></A
>You can also delete backward (<code class="literal">db</CODE
>) or to the end or
beginning of a line (<code class="literal">d$</CODE
> or <code class="literal">d0</CODE
>).</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.5.2">2.3.5.2 Lines</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-1942"></A
><a class="indexterm" name="AUTOID-1945"></A
><a class="indexterm" name="AUTOID-1948"></A
><a class="indexterm" name="AUTOID-1952"></A
><kbd class="keycap">[dd]</KBD
>
The <code class="literal">dd</CODE
> command deletes the entire line that the cursor is on.
<code class="literal">dd</CODE
> will not delete part of a line.
Like its complement <code class="literal">cc</CODE
>, <code class="literal">dd</CODE
> is a special command.
Using the same text as in the previous example, with the
cursor positioned on the first line as shown below:</P
><img class="graphic" src="figs/vi.0219.gif" webstripperlinkwas="figs/vi.0219.gif" alt="Graphic"><p class="para">you can delete the first two lines:</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">2dd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0220.gif" webstripperlinkwas="figs/vi.0220.gif" alt="Graphic"><p class="para">Give the command to delete two lines (<code class="literal">2dd</CODE
>).
Note that even though the cursor was not positioned on the beginning of
the line, the entire line is deleted.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><a class="indexterm" name="AUTOID-1980"></A
>If you are using a &quot;dumb&quot; terminal[<a class="footnote" href="#AUTOID-1983">2</A
>] (or a very slow one),
line deletions look different.
The dumb terminal will not redraw the screen until you scroll past the
bottom of the screen.
On a dumb terminal the deletion looks like this:</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-1983">[2]</A
> Dumb terminals are rather rare these days. Most of the time, you will
run <kbd class="command">vi</KBD
> inside a terminal emulator on a bitmapped screen.</P
></DIV
></BLOCKQUOTE
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">2dd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0221.gif" webstripperlinkwas="figs/vi.0221.gif" alt="Graphic"><p class="para">Give the command to delete two lines (<code class="literal">2dd</CODE
>).
An @ symbol &quot;holds the place&quot; of the deleted line, until
<em class="emphasis">vi</EM
> redraws the entire screen.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><kbd class="keycap">[D]</KBD
><a class="indexterm" name="AUTOID-2005"></A
>
The <code class="literal">D</CODE
> command deletes from the cursor position
to the end of the line. (<code class="literal">D</CODE
> is a shortcut for
<code class="literal">d$</CODE
>.) For example, with the cursor positioned as shown:</P
><img class="graphic" src="figs/vi.0222.gif" webstripperlinkwas="figs/vi.0222.gif" alt="Graphic"><p class="para">you can delete the portion of the line to the right of the cursor.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">D</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0223.gif" webstripperlinkwas="figs/vi.0223.gif" alt="Graphic"><p class="para">Give the command to delete the portion of the line to the
right of the cursor (<code class="literal">D</CODE
>).</P
></TD
></TR
></TBODY
></TABLE
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.5.3">2.3.5.3 Characters</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-2031"></A
><a class="indexterm" name="AUTOID-2035"></A
><a class="indexterm" name="AUTOID-2039"></A
><a class="indexterm" name="AUTOID-2042"></A
><kbd class="keycap">[x]</KBD
>
Often you want to delete only one or two characters.
Just as <code class="literal">r</CODE
> is a special change
command to replace a single character, <code class="literal">x</CODE
> is a special delete
command to delete a single character.
<code class="literal">x</CODE
> deletes only the character the cursor is on.
In the line below:</P
><blockquote class="screen"><pre class="screen"><u class="emphasis.underline">z</U
>You can move text by deleting text and then</PRE
></BLOCKQUOTE
><p class="para">you can delete the letter <em class="emphasis">z</EM
> by pressing <code class="literal">x</CODE
>.[<a class="footnote" href="#AUTOID-2053">3</A
>]
A capital <code class="literal">X</CODE
> deletes the character before the cursor.<a class="indexterm" name="AUTOID-2057"></A
>
Prefix either of these commands with a number to delete that number of
characters.
For example, <code class="literal">5x</CODE
> will delete the five characters
under and to the right of the cursor.</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-2053">[3]</A
> The mnemonic for <code class="literal">x</CODE
> is that it is supposedly like
&quot;x-ing out&quot; mistakes with a typewriter.
Of course, who uses a typewriter any more?</P
></DIV
></BLOCKQUOTE
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.5.4">2.3.5.4 Problems with deletions</A
></H4
><a class="indexterm" name="CH02.TROUBLEDELETE"></A
><ul class="itemizedlist"><li class="listitem"><p class="para"><em class="emphasis">You've deleted the wrong text and you want to get it back.</EM
><a class="indexterm" name="AUTOID-2069"></A
><a class="indexterm" name="AUTOID-2073"></A
><a class="indexterm" name="AUTOID-2077"></A
></P
><p class="para">There are several ways to recover deleted text.
If you've just deleted something and you realize you want it back,
simply type <code class="literal">u</CODE
> to undo the last command (for example, a <code class="literal">dd</CODE
>).<a class="indexterm" name="AUTOID-2083"></A
><a class="indexterm" name="AUTOID-2085"></A
>
This works only if you haven't given any further commands, since
<code class="literal">u</CODE
> only undoes the most recent command.
On the other hand,
a <code class="literal">U</CODE
> will restore the line to its pristine state; the way it
was before <em class="emphasis">any</EM
> changes were applied to it.</P
><p class="para"><a class="indexterm" name="AUTOID-2091"></A
><a class="indexterm" name="AUTOID-2094"></A
><a class="indexterm" name="AUTOID-2096"></A
>You can still recover a recent deletion, however, by using the <code class="literal">p</CODE
>
command, since <kbd class="command">vi</KBD
> saves the last nine deletions in nine numbered deletion
buffers.
If you know, for example, that the third deletion back is the one you want to
restore, type:</P
><p class="para"><blockquote class="screen"><pre class="screen">  &quot;3p</PRE
></BLOCKQUOTE
></P
><p class="para">to &quot;put&quot; the contents of buffer number 3 on the line below the
cursor.</P
><p class="para">This works only for a deleted <em class="emphasis">line</EM
>.
Words, or a portion of a line, are not saved in a buffer.<a class="indexterm" name="AUTOID-2105"></A
><a class="indexterm" name="AUTOID-2109"></A
>
If you want to restore a deleted word or line fragment, and <code class="literal">u</CODE
>
won't work, use the <code class="literal">p</CODE
> command by itself.
This restores whatever you've last deleted.
The next few subsections will talk more about the commands <code class="literal">u</CODE
>
and <code class="literal">p</CODE
>.</P
></LI
></UL
><a class="indexterm" name="AUTOID-2117"></A
></DIV
><a class="indexterm" name="AUTOID-2118"></A
><a class="indexterm" name="AUTOID-2119"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.6">2.3.6 Moving Text </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2123"></A
><a class="indexterm" name="AUTOID-2126"></A
><a class="indexterm" name="AUTOID-2128"></A
>In <kbd class="command">vi</KBD
>, you move text by deleting it and then placing that deleted
text elsewhere in the file, like a &quot;cut and paste.&quot;
Each time you delete a text block, that deletion is temporarily saved in a
special buffer.
Move to another position in your file and use
the put command (<code class="literal">p</CODE
>) to place that text in the new position.
You can move any block of text, although moving is more useful
with lines than with words.</P
><p class="para"><a class="indexterm" name="AUTOID-2134"></A
><kbd class="keycap">[p]</KBD
>
The put command (<code class="literal">p</CODE
>)
puts the text that is in the buffer <em class="emphasis">after</EM
> the
cursor position. The uppercase version of the command,<a class="indexterm" name="AUTOID-2139"></A
>
<code class="literal">P</CODE
>, puts the text <em class="emphasis">before</EM
>
the cursor. If you delete one or more lines,
<code class="literal">p</CODE
> puts the deleted text on a new line(s) below the cursor.
If you delete less than an entire line, <code class="literal">p</CODE
> puts the deleted text on the current line, after the cursor.</P
><p class="para">Suppose in your file <i class="filename">practice</I
> you have the text:</P
><img class="graphic" src="figs/vi.0224.gif" webstripperlinkwas="figs/vi.0224.gif" alt="Graphic"><p class="para">and want to move the second line, <em class="emphasis">like a &quot;cut and paste&quot;,</EM
>
below the third line.
Using delete, you can make this edit.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">dd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0225.gif" webstripperlinkwas="figs/vi.0225.gif" alt="Graphic"><p class="para">With the cursor on the second line, delete that line.
The text is placed in a buffer (reserved memory).</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">p</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0226.gif" webstripperlinkwas="figs/vi.0226.gif" alt="Graphic"><p class="para">Give the put command, <code class="literal">p</CODE
>, to restore the deleted line at the
next line below the cursor.
To finish reordering this
sentence, you would also have to change the capitalization and
punctuation (with <code class="literal">r</CODE
>) to match the new structure.</P
></TD
></TR
></TBODY
></TABLE
><blockquote class="note"><p class="para"><strong>NOTE:</STRONG
> Once you delete text, you must restore it
before the next change command or delete command.<a class="indexterm" name="AUTOID-2175"></A
><a class="indexterm" name="AUTOID-2179"></A
><a class="indexterm" name="AUTOID-2183"></A
><a class="indexterm" name="AUTOID-2186"></A
><a class="indexterm" name="AUTOID-2188"></A
><a class="indexterm" name="AUTOID-2191"></A
><a class="indexterm" name="AUTOID-2194"></A
><a class="indexterm" name="AUTOID-2197"></A
><a class="indexterm" name="AUTOID-2201"></A
>
If you make another edit that affects the buffer, your
deleted text will be lost.
You can repeat the put over and over,
so long as you don't make a new edit.
In <a class="xref" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm">Chapter 4, <cite class="CHAPTER">Beyond the Basics</CITE
></A
>, you will learn how to save text you delete in a named buffer so you can retrieve it later.</P
></BLOCKQUOTE
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.6.1">2.3.6.1 Transposing two letters</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-2209"></A
><a class="indexterm" name="AUTOID-2212"></A
><a class="indexterm" name="AUTOID-2215"></A
><a class="indexterm" name="AUTOID-2217"></A
>You can use <code class="literal">xp</CODE
> (delete character and put after cursor) to
transpose two letters.
For example, in the word <em class="emphasis">mvoe</EM
>, the letters <em class="emphasis">vo</EM
> are
transposed (reversed).
To correct a transposition, place the cursor on <em class="emphasis">v</EM
> and press
<code class="literal">x</CODE
>, then <code class="literal">p</CODE
>.
By coincidence, the word <em class="emphasis">transpose</EM
> helps you remember the
sequence <code class="literal">xp</CODE
>; <code class="literal">x</CODE
> stands for <em class="emphasis">trans</EM
>,
and <code class="literal">p</CODE
> stands for <em class="emphasis">pose</EM
>.</P
><p class="para"><a class="indexterm" name="AUTOID-2233"></A
><a class="indexterm" name="AUTOID-2235"></A
>There is no command to transpose words. The section
&quot;More Examples of Mapping Keys&quot; in <a class="xref" href="ch07_01.htm" webstripperlinkwas="ch07_01.htm">Chapter 7</A
>
discusses a short sequence of commands that transposes two words.</P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.7">2.3.7 Copying Text </A
></H3
><p class="para"><a class="indexterm" name="CH02.COPYTEXT1"></A
><a class="indexterm" name="CH02.COPYTEXT2"></A
><a class="indexterm" name="CH02.COPYTEXT3"></A
><kbd class="keycap">[y]</KBD
>
Often you can save editing time (and keystrokes) by copying a
part of your file to use in other places.<a class="indexterm" name="AUTOID-2251"></A
>
With the two commands <code class="literal">y</CODE
> (for yank) and <code class="literal">p</CODE
> (for put),
you can copy any amount of text and put that copied text in another
place in the file.
A yank command copies the selected text into a special buffer,
where it is held until another yank (or deletion) occurs.
You can then place this copy elsewhere in the file with the put command.</P
><p class="para">As with change and delete, the yank command can be combined
with any movement command (<code class="literal">yw</CODE
>, <code class="literal">y$</CODE
>, <code class="literal">4yy</CODE
>).
Yank is most frequently used with a line (or more) of text,
because to yank and put a word usually takes longer than
simply to insert the word.</P
><p class="para"><a class="indexterm" name="AUTOID-2260"></A
><a class="indexterm" name="AUTOID-2263"></A
><a class="indexterm" name="AUTOID-2266"></A
>The shortcut <code class="literal">yy</CODE
> operates on an entire line,
just as <code class="literal">dd</CODE
> and <code class="literal">cc</CODE
> do. But the shortcut <code class="literal">Y</CODE
>,
for some reason, does not operate the way <code class="literal">D</CODE
> and <code class="literal">C</CODE
> do.
Instead of yanking from the current position to the end of the line,
<code class="literal">Y</CODE
> yanks the whole line.  <code class="literal">Y</CODE
> does the same thing
as <code class="literal">yy</CODE
>.</P
><p class="para">Suppose you have in your file <i class="filename">practice</I
> the text:</P
><img class="graphic" src="figs/vi.0227.gif" webstripperlinkwas="figs/vi.0227.gif" alt="Graphic"><p class="para">You want to make three complete sentences, beginning each with
<em class="emphasis">With a screen editor you can</EM
>.
Instead of moving
through the file, making this edit over and over,
you can use a yank and put to copy the text to be added.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">yy</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0228.gif" webstripperlinkwas="figs/vi.0228.gif" alt="Graphic"><p class="para">Yank the line of text that you want to copy into the buffer.
The cursor can be anywhere on the line you want to yank (or on
the first line of a series of lines).</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">2j</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0229.gif" webstripperlinkwas="figs/vi.0229.gif" alt="Graphic"><p class="para">Move the cursor to where you want to put the yanked text.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">P</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0230.gif" webstripperlinkwas="figs/vi.0230.gif" alt="Graphic"><p class="para">Put the yanked text above the cursor line with <code class="literal">P</CODE
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">jp</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0231.gif" webstripperlinkwas="figs/vi.0231.gif" alt="Graphic"><p class="para">Move the cursor down a line and put the yanked text below
the cursor line with <code class="literal">p</CODE
>.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><a class="indexterm" name="AUTOID-2318"></A
><a class="indexterm" name="AUTOID-2322"></A
><a class="indexterm" name="AUTOID-2326"></A
><a class="indexterm" name="AUTOID-2329"></A
><a class="indexterm" name="AUTOID-2332"></A
><a class="indexterm" name="AUTOID-2335"></A
><a class="indexterm" name="AUTOID-2337"></A
><a class="indexterm" name="AUTOID-2340"></A
><a class="indexterm" name="AUTOID-2343"></A
><a class="indexterm" name="AUTOID-2346"></A
>Yanking uses the same buffer as deleting.
Each new deletion or yank replaces the previous contents of the yank
buffer. As we'll
see in <a class="xref" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm">Chapter 4</A
>, up to nine previous yanks or
deletions can be recalled with put commands. You can also yank or delete
directly into up to 26 named buffers, which allows you to
juggle multiple text blocks at once.</P
><a class="indexterm" name="AUTOID-2350"></A
><a class="indexterm" name="AUTOID-2351"></A
><a class="indexterm" name="AUTOID-2352"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-2-SECT-3.8">2.3.8 Repeating or Undoing Your Last Command </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2356"></A
><a class="indexterm" name="AUTOID-2360"></A
>Each edit command that you give is stored in a temporary buffer until
you give the next command.
For example,
if you insert <em class="emphasis">the</EM
> after a word in
your file, the command used to insert the text, along with the text
that you entered, is temporarily saved.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.8.1">2.3.8.1 Repeat</A
></H4
><p class="para"><a class="indexterm" name="CH02.REPEATING1"></A
><kbd class="keycap">[period]</KBD
>
Any time you make the same editing command over and over,
you can save time by duplicating it with<a class="indexterm" name="AUTOID-2371"></A
><a class="indexterm" name="AUTOID-2374"></A
><a class="indexterm" name="AUTOID-2377"></A
>
the repeat command, the period (.).
Position
the cursor where you want to
repeat the editing command, and type
a period.</P
><p class="para">Suppose you have the following lines in your file:</P
><img class="graphic" src="figs/vi.0232.gif" webstripperlinkwas="figs/vi.0232.gif" alt="Graphic"><p class="para">You can delete one line, and then, to delete another line, simply type
a period.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">dd</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0233.gif" webstripperlinkwas="figs/vi.0233.gif" alt="Graphic"><p class="para">Delete a line with the command <code class="literal">dd</CODE
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">.</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0234.gif" webstripperlinkwas="figs/vi.0234.gif" alt="Graphic"><p class="para">Repeat the deletion.</P
></TD
></TR
></TBODY
></TABLE
><p class="para">Older versions of <kbd class="command">vi</KBD
> had problems repeating commands.
For example, such versions may
have difficulty repeating
a long insertion when <code class="literal">wrapmargin</CODE
> is set.<a class="indexterm" name="AUTOID-2408"></A
><a class="indexterm" name="AUTOID-2410"></A
><a class="indexterm" name="AUTOID-2413"></A
><a class="indexterm" name="AUTOID-2417"></A
><a class="indexterm" name="AUTOID-2420"></A
><a class="indexterm" name="AUTOID-2423"></A
>
If you have such a version, this bug
will probably bite you sooner or later.
There's not a lot you can do about it after the fact,
but it helps to be forewarned.
(Modern versions do not seem to have this problem.)
There are two ways you can guard against a
potential problem when repeating long insertions.
You can write your file (<code class="literal">:w</CODE
>) before repeating the
insertion (returning to this copy if the insertion doesn't work
correctly).
You can also turn off <code class="literal">wrapmargin</CODE
> like this:</P
><blockquote class="screen"><pre class="screen">:set wm=0</PRE
></BLOCKQUOTE
><p class="para">In <a class="xref" href="ch07_03.htm" webstripperlinkwas="ch07_03.htm#VI6-CH-7-SECT-3.5">Section 7.3.5, "More Examples of Mapping Keys "</A
> in <a class="xref" href="ch07_01.htm" webstripperlinkwas="ch07_01.htm">Chapter 7</A
>,
we'll show you an easy way to
ause the wrapmargin solution.<a class="indexterm" name="AUTOID-2431"></A
><a class="indexterm" name="AUTOID-2434"></A
>
In some versions of <kbd class="command">vi</KBD
>, the command
<kbd class="keycap">[CTRL-@]</KBD
>
repeats the most recent insertion.
<kbd class="keycap">[CTRL-@]</KBD
>
is typed in <em class="emphasis">insert</EM
> mode and returns you to command mode.</P
><a class="indexterm" name="AUTOID-2441"></A
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-2-SECT-3.8.2">2.3.8.2 Undo</A
></H4
><p class="para"><a class="indexterm" name="CH02.UNDOING1"></A
><a class="indexterm" name="CH02.UNDOING2"></A
><kbd class="keycap">[u]</KBD
>
As mentioned earlier, you can undo your last command if you make an error.
Simply press <code class="literal">u</CODE
>.
The cursor need not be
on the line where the original edit was made.</P
><p class="para">To continue the example above, showing deletion of lines in the
file <i class="filename">practice</I
>:</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">u</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0235.gif" webstripperlinkwas="figs/vi.0235.gif" alt="Graphic"><p class="para"><code class="literal">u</CODE
> undoes the last command and restores the deleted line.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><a class="indexterm" name="AUTOID-2470"></A
><code class="literal">U</CODE
>, the uppercase version of <code class="literal">u</CODE
>, undoes all
edits on a single line, <em class="emphasis">as long as the cursor remains on that line</EM
>.
Once you move off a line, you can no longer use <code class="literal">U</CODE
>.</P
><p class="para">Note that you can undo your last undo with <code class="literal">u</CODE
>, toggling between
two versions of text.  <code class="literal">u</CODE
> will also undo <code class="literal">U</CODE
>, and <code class="literal">U</CODE
> will undo any changes to a line, including those made with <code class="literal">u</CODE
>.
(A tip: the fact that <code class="literal">u</CODE
> can undo itself leads to a nifty way
to get around in a file.
If you ever want to get back to the site of
your last edit, simply undo it. You will pop back to the appropriate line.
When you undo the undo, you'll stay on that line.)</P
><a class="indexterm" name="AUTOID-2483"></A
><a class="indexterm" name="AUTOID-2484"></A
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_02.htm" webstripperlinkwas="ch02_02.htm" title="2.2 Moving the Cursor"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 2.2 Moving the Cursor" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_04.htm" webstripperlinkwas="ch02_04.htm" title="2.4 More Ways to Insert Text "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 2.4 More Ways to Insert Text " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">2.2 Moving the Cursor</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">2.4 More Ways to Insert Text </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

