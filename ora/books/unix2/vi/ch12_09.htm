<html><head><title>[Chapter 12] 12.9 Programming Assistance</TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:59:36Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch12_01.htm" webstripperlinkwas="ch12_01.htm" title="12. vile&nbsp;-- vi Like Emacs"><link rel="prev" href="ch12_08.htm" webstripperlinkwas="ch12_08.htm" title="12.8 Improved Editing Facilities"><link rel="next" href="ch12_10.htm" webstripperlinkwas="ch12_10.htm" title="12.10 Interesting Features"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch12_08.htm" webstripperlinkwas="ch12_08.htm" title="12.8 Improved Editing Facilities"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 12.8 Improved Editing Facilities" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch12_01.htm" webstripperlinkwas="ch12_01.htm" title="12. vile&nbsp;-- vi Like Emacs">Chapter 12<br>vile&nbsp;-- vi Like Emacs</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch12_10.htm" webstripperlinkwas="ch12_10.htm" title="12.10 Interesting Features"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 12.10 Interesting Features" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-12-SECT-9">12.9 Programming Assistance</A
></H2
><p class="para"><a class="indexterm" name="CH12.PROG1"></A
><a class="indexterm" name="CH12.PROG2"></A
><a class="indexterm" name="CH12.PROG3"></A
><kbd class="command">vile</KBD
>'s programming assistance capabilities are discussed in this section.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-12-SECT-9.1">12.9.1 Edit-Compile Speedup</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-20161"></A
><a class="indexterm" name="AUTOID-20165"></A
><a class="indexterm" name="AUTOID-20168"></A
><kbd class="command">vile</KBD
> uses two straightforward <kbd class="command">vi</KBD
>
mode commands to manage program development, 
shown in <a class="xref" href="#VI6-CH-12-TAB-6">Table 12.6</A
>.</P
><br><table class="table" border="1" cellpadding="3"><caption class="table"><a class="title" name="VI6-CH-12-TAB-6">Table 12.6: vile Program Development vi Mode Commands</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Command</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">^X !</CODE
><code class="replaceable"><i>command</I
></CODE
><kbd class="keycap">[RETURN]</KBD
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Run <em class="emphasis">command</EM
>,
saving the output in a buffer
named <code class="literal">[Output]</CODE
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">^X ^X</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Find the next error.
<kbd class="command">vile</KBD
> parses the output and moves to the location
of each successive error.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><kbd class="command">vile</KBD
> understands the
<em class="emphasis">Entering directory XXX</EM
> and
<em class="emphasis">Leaving directory XXX</EM
> messages that GNU
<kbd class="command">make</KBD
> generates, allowing it to find the
correct file, even if it's in a different directory.</P
><p class="para">The error messages are parsed using regular expressions in the
buffer <code class="literal">[Error Expressions]</CODE
>.
<kbd class="command">vile</KBD
> automatically creates this buffer, and then it uses the buffer
when you use <code class="literal">^X ^X</CODE
>.
You can add expressions to it as needed, and it has an extended
syntax that allows you to specify where filenames, line numbers,
columns and so on appear in the error messages.
Full details are provided in the online help, but
you probably won't need to make any changes, as it works
pretty well &quot;out of the box.&quot;</P
><p class="para"><a class="indexterm" name="AUTOID-20209"></A
><kbd class="command">vile</KBD
>'s
error finder also compensates for changes in the file,
keeping track of additions and deletions as you progress
to each error.</P
><p class="para">The error finder applies to the most recent buffer created
by reading from a shell command.
For example, <code class="literal">^X!command</CODE
>
produces a buffer named <code class="literal">[Output]</CODE
>, and
<code class="literal">:e !command</CODE
>
produces a buffer named <code class="literal">[!command]</CODE
>.
The error finder will be set appropriately.</P
><p class="para">You can point the error finder at an arbitrary buffer (not just
the output of shell commands) using
the <code class="literal">:error-buffer</CODE
> command.
This lets you use the error finder on the output of previous
compiler or <kbd class="command">egrep</KBD
> runs.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-12-SECT-9.2">12.9.2 Syntax Highlighting</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-20223"></A
><a class="indexterm" name="AUTOID-20226"></A
><a class="indexterm" name="AUTOID-20230"></A
><kbd class="command">vile</KBD
> relies on help from an external program
to provide syntax coloring. In fact, there are three programs:
one for C programs, one for Pascal programs,
and one for UNIX <kbd class="command">man</KBD
> pages.
The <kbd class="command">vile</KBD
>
documentation provides this sample macro for
use in a <i class="filename">.vilerc</I
> file:</P
><blockquote class="screen"><pre class="screen">30 store-macro
	write-message &quot;[Attaching C/C++ attributes...]&quot;
	set-variable %savcol $curcol
	set-variable %savline $curline
	set-variable %modified $modified
	goto-beginning-of-file
	filter-til end-of-file &quot;vile-c-filt&quot;
	goto-beginning-of-file
	attribute-cntl_a-sequences-til end-of-file
	~if &amp;not %modified
		unmark-buffer
	~endif
	%savline goto-line
	%savcol goto-column
	write-message &quot;[Attaching C/C++ attributes...done ]&quot;
~endm
bind-key execute-macro-30 ^X-q</PRE
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-20240"></A
>This runs <kbd class="command">vile-c-filt</KBD
> over the C source code.
This program in turn relies upon the contents of<a class="indexterm" name="AUTOID-20243"></A
>
<i class="filename">$HOME/.vile.keywords</I
>, which
specifies the attributes to provide to different text.
(<em class="emphasis">B</EM
> for bold,
<em class="emphasis">U</EM
> for underlined,
<em class="emphasis">I</EM
> for italic,
and <em class="emphasis">C</EM
> for one of 16 different colors.)
This is Kevin Buettner's version:</P
><blockquote class="screen"><pre class="screen">Comments:C2
Literal:U
Cpp:CB
if:B
else:B
for:B
return:B
while:B
switch:B
case:B
do:B
goto:B
break:B</PRE
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-20252"></A
>Syntax coloring works on the X11 interface with both Versions 7.4
and 8.0 of <kbd class="command">vile</KBD
>.
Getting it to work on a Linux console is a bit more complicated.
It depends upon which screen handling interface it was compiled with.</P
><dl class="variablelist"><dt class="term">The ncurses library</DT
><dd class="listitem"><p class="para">Configure <kbd class="command">vile</KBD
> with
<code class="literal">--with-screen=ncurses</CODE
><a class="indexterm" name="AUTOID-20262"></A
>
and rebuild.
This will then work out of the box.</P
></DD
><dt class="term">The termcap library</DT
><dd class="listitem"><p class="para">This is the default way that <kbd class="command">vile</KBD
> is configured.
Using this version requires you to have a<a class="indexterm" name="AUTOID-20269"></A
>
correct <i class="filename">/etc/termcap</I
>
entry for the Linux console.
The following <em class="emphasis">termcap</EM
> entry works:[<a class="footnote" href="#AUTOID-20273">5</A
>]

<blockquote class="screen"><pre class="screen">console|linux|con80x25|dumb:\
	:do=^J:co#80:li#25:cl=\E[H\E[J:sf=\ED:sb=\EM:\
	:le=^H:bs:am:cm=\E[%i%d;%dH:nd=\E[C:up=\E[A:\
	:ce=\E[K:cd=\E[J:so=\E[7m:se=\E[27m:us=\E[4m:ue=\E[24m:\
	:md=\E[1m:mr=\E[7m:mb=\E[5m:me=\E[m:is=\E[1;25r\E[25;1H:\
	:ll=\E[1;25r\E[25;1H:al=\E[L:dc=\E[P:dl=\E[M:\
	:it#8:ku=\E[A:kd=\E[B:kr=\E[C:kl=\E[D:kb=^H:ti=\E[r\E[H:\
	:ho=\E[H:kP=\E[5~:kN=\E[6~:kH=\E[4~:kh=\E[1~:kD=\E[3~:kI=\E[2~:\
	:k1=\E[[A:k2=\E[[B:k3=\E[[C:k4=\E[[D:k5=\E[[E:k6=\E[17~:\
	:k7=\E[18~:k8=\E[19~:k9=\E[20~:k0=\E[21~:K1=\E[1~:K2=\E[5~:\
	:K4=\E[4~:K5=\E[6~:\
	:pt:sr=\EM:vt#3:xn:km:bl=^G:vi=\E[?25l:ve=\E[?25h:vs=\E[?25h:\
	:sc=\E7:rc=\E8:cs=\E[%i%d;%dr:\
	:r1=\Ec:r2=\Ec:r3=\Ec:\
	:vb=\E[?5h\E[?5l:\
	:ut:\
	:Co#8:\
	:AF=\E[%a+c\036%dm:\
	:AB=\E[%a+c\050%dm:</PRE
></BLOCKQUOTE
>&#13;</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-20273">[5]</A
> This entry courtesy of Kevin Buettner.
Note that Linux distributions will vary. This was tested under
Redhat Linux 4.2; you may not need to change your
<i class="filename">/etc/termcap</I
> file.</P
></DIV
></BLOCKQUOTE
></DD
></DL
><p class="para">On the one hand, because syntax highlighting is accomplished with
an external program, it should be possible to write any number of
highlighters for different languages.
On the other hand, because the facilities are rather low-level,
doing so is not for non-programmers.
The online help describes how the highlight filters
should work.</P
><p class="para">The directory
<a class="ulink" href="../WebStripper/protected.html#link======ftp://ftp.clark.net/pub/dickey/vile/utilities" webstripperlinkwas="../WebStripper/protected.html#link======ftp://ftp.clark.net/pub/dickey/vile/utilities">ftp://ftp.clark.net/pub/dickey/vile/utilities</A
>
contains user-contributed filters for coloring makefiles, LaTeX input,
Perl, HTML, and <kbd class="command">troff</KBD
>. It even contains a macro that
will color the lines in RCS files according to their age!</P
></DIV
><a class="indexterm" name="AUTOID-20281"></A
><a class="indexterm" name="AUTOID-20282"></A
><a class="indexterm" name="AUTOID-20283"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch12_08.htm" webstripperlinkwas="ch12_08.htm" title="12.8 Improved Editing Facilities"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 12.8 Improved Editing Facilities" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch12_10.htm" webstripperlinkwas="ch12_10.htm" title="12.10 Interesting Features"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 12.10 Interesting Features" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">12.8 Improved Editing Facilities</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">12.10 Interesting Features</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

