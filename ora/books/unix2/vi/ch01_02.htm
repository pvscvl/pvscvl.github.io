<html><head><title>[Chapter 1] 1.2 Quitting Without Saving Edits </TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:55:36Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch01_01.htm" webstripperlinkwas="ch01_01.htm" title="1. The vi Text Editor"><link rel="prev" href="ch01_01.htm" webstripperlinkwas="ch01_01.htm" title="1.1 Opening and Closing Files "><link rel="next" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Simple Editing"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch01_01.htm" webstripperlinkwas="ch01_01.htm" title="1.1 Opening and Closing Files "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 1.1 Opening and Closing Files " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch01_01.htm" webstripperlinkwas="ch01_01.htm" title="1. The vi Text Editor">Chapter 1<br>The vi Text Editor</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Simple Editing"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 2. Simple Editing" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-1-SECT-2">1.2 Quitting Without Saving Edits </A
></H2
><p class="para"> 
When you are first learning
<kbd class="command">vi</KBD
>, especially if you are an intrepid experimenter,
there are two other <kbd class="command">ex</KBD
> commands that are handy for getting out of
any mess that you might create.</P
><p class="para">What if you want to wipe out all of the edits you have made in
a session and then return to the original file? The command:<a class="indexterm" name="AUTOID-765"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">:e!</CODE
> <kbd class="keycap">[RETURN]</KBD
></PRE
></BLOCKQUOTE
></P
><p class="para">returns you to the last saved version of the file, so you can start over.</P
><p class="para">Suppose, however, that you want to wipe out your edits and then
just quit <kbd class="command">vi</KBD
>?
The command:<a class="indexterm" name="AUTOID-775"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">:q!</CODE
> <kbd class="keycap">[RETURN]</KBD
></PRE
></BLOCKQUOTE
></P
><p class="para">quits the file you're editing and returns you to the UNIX prompt.
With both of these commands, you lose all edits made in the
buffer since the last time you saved the file.
<kbd class="command">vi</KBD
> normally won't let you throw away your edits. The
exclamation point added to the <code class="literal">:e</CODE
> or <code class="literal">:q</CODE
> command causes
<kbd class="command">vi</KBD
> to override this prohibition, performing the operation even
though the buffer has been modified.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-1-SECT-2.1">1.2.1 Problems Saving Files </A
></H3
><a class="indexterm" name="CH01.TROUBLESAVE"></A
><a class="indexterm" name="CH01.TROUBLESAVE2"></A
><ul class="itemizedlist"><li class="listitem"><p class="para"><em class="emphasis">You try to write your file, but you get one of the following messages:</EM
><a class="indexterm" name="AUTOID-799"></A
><a class="indexterm" name="AUTOID-801"></A
><a class="indexterm" name="AUTOID-803"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">File exists
File <code class="replaceable"><i>file</I
></CODE
> exists - use w!
[Existing file]
File is read only</PRE
></BLOCKQUOTE
></P
><p class="para">Type <code class="literal">:w!</CODE
> <code class="replaceable"><i>file</I
></CODE
> to overwrite the existing file, or type
<code class="literal">:w</CODE
> <code class="replaceable"><i>newfile</I
></CODE
> to save the edited version in a new file.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">You want to write a file, but you don't have write permission for
it.  You get the message &quot;Permission denied.&quot;</EM
><a class="indexterm" name="AUTOID-816"></A
><a class="indexterm" name="AUTOID-818"></A
></P
><p class="para">Use <code class="literal">:w</CODE
> <code class="replaceable"><i>newfile</I
></CODE
> to write out the buffer into a new file.
If you have write permission for the directory, you can use
<code class="literal">mv</CODE
> to replace the original version with your copy of it.
If you don't have write permission for the directory,
type <code class="literal">:w</CODE
> <code class="replaceable"><i>pathname/file</I
></CODE
> to
write out the buffer to a directory in which you do have write
permission (such as your home directory, or <i class="filename">/tmp</I
>).</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">You try to write your file, but you get a message telling you that
the file system is full.</EM
><a class="indexterm" name="AUTOID-830"></A
></P
><p class="para"><a class="indexterm" name="AUTOID-833"></A
><a class="indexterm" name="AUTOID-836"></A
><a class="indexterm" name="AUTOID-839"></A
>Type <code class="literal">:!rm</CODE
> <code class="replaceable"><i>junkfile</I
></CODE
> to delete
a (large) unneeded file and
free some space.<a class="indexterm" name="AUTOID-843"></A
><a class="indexterm" name="AUTOID-846"></A
><a class="indexterm" name="AUTOID-849"></A
>
(Starting an <kbd class="command">ex</KBD
> command with an exclamation point gives you
access to UNIX.)</P
><p class="para"><a class="indexterm" name="AUTOID-854"></A
>Or type <code class="literal">:!df</CODE
> to see whether there's any space on another file system.
If there is, choose a directory on that file system and write your
file to it with <code class="literal">:w</CODE
> <code class="replaceable"><i>pathname</I
></CODE
>.
(<code class="literal">df</CODE
> is the UNIX command to check a
<em class="emphasis">d</EM
>isk's <em class="emphasis">f</EM
>ree space.)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">The system puts you into open mode and tells you that the
file system is full.</EM
></P
><p class="para">The disk with <kbd class="command">vi</KBD
>'s temporary files is filled up.
Type
<code class="literal">:!ls&nbsp;/tmp</CODE
> to see whether there are any files you can remove to
gain some disk space.[<a class="footnote" href="#AUTOID-868">3</A
>]
If there are, create a temporary UNIX shell from which you can remove files or issue
other UNIX commands.<a class="indexterm" name="AUTOID-877"></A
>
You can create a shell by typing <code class="literal">:sh</CODE
>;
type
<kbd class="keycap">[CTRL-D]</KBD
>
or <code class="literal">exit</CODE
> to terminate the shell and return to <kbd class="command">vi</KBD
>.  (On
most UNIX systems, when using a job-control shell, you can simply type
<kbd class="keycap">[CTRL-Z]</KBD
>
to suspend <kbd class="command">vi</KBD
> and return to the UNIX prompt;
type <code class="literal">fg</CODE
> to return to
<kbd class="command">vi</KBD
>.)
Once you've freed up some space, write your file with <code class="literal">:w!</CODE
>.</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-868">[3]</A
> Your <kbd class="command">vi</KBD
> may keep its temporary files in <i class="filename">/usr/tmp</I
>,<a class="indexterm" name="AUTOID-872"></A
><a class="indexterm" name="AUTOID-874"></A
>
<i class="filename">/var/tmp</I
>, or your current directory; you may need to poke around
a bit to figure out where exactly you've run out of room.</P
></DIV
></BLOCKQUOTE
></LI
><li class="listitem"><p class="para"><em class="emphasis">You try to write your file, but you get a message telling you that your
disk quota has been reached.</EM
><a class="indexterm" name="AUTOID-891"></A
></P
><p class="para">Try to force the system to save your buffer with the <kbd class="command">ex</KBD
> command<a class="indexterm" name="AUTOID-895"></A
>
<code class="literal">:pre</CODE
> (short for <code class="literal">:preserve</CODE
>).
If that doesn't work, look for some files to remove.
Use <code class="literal">:sh</CODE
> (or
<kbd class="keycap">[CTRL-Z]</KBD
>
if you are using a job-control system) to move out of <kbd class="command">vi</KBD
> and remove
files.
Use
<kbd class="keycap">[CTRL-D]</KBD
>
(or <code class="literal">fg</CODE
>) to return to <kbd class="command">vi</KBD
> when you're done.
Then write your file with <code class="literal">:w!</CODE
>.</P
></LI
></UL
><a class="indexterm" name="AUTOID-906"></A
><a class="indexterm" name="AUTOID-907"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-1-SECT-2.2">1.2.2 Exercises</A
></H3
><p class="para">The only way to learn <kbd class="command">vi</KBD
> is to practice.
You now know enough to create a new file and to return to the
UNIX prompt.
Create a file called <i class="filename">practice</I
>, insert some text, and then
save and quit the file.

</P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Open a file called <em class="emphasis">practice</EM
> in the current directory:</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">vi practice</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Insert text:</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">i</CODE
> <code class="replaceable"><i>any text you like</I
></CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Return to command mode:</TD
><td class="entry" rowspan="1" colspan="1"><kbd class="keycap">[ESC]</KBD
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">Quit <em class="emphasis">vi</EM
>, saving edits:</TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">ZZ</CODE
></TD
></TR
></TBODY
></TABLE
><p class="para">
 </P
></DIV
><a class="indexterm" name="AUTOID-935"></A
><a class="indexterm" name="AUTOID-936"></A
><a class="indexterm" name="AUTOID-937"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch01_01.htm" webstripperlinkwas="ch01_01.htm" title="1.1 Opening and Closing Files "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 1.1 Opening and Closing Files " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Simple Editing"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 2. Simple Editing" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">1.1 Opening and Closing Files </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">2. Simple Editing</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.htm" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

