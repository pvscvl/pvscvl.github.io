<html><head><title>[Chapter 12] 12.6 GUI Interfaces</TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:59:20Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch12_01.htm" webstripperlinkwas="ch12_01.htm" title="12. vile&nbsp;-- vi Like Emacs"><link rel="prev" href="ch12_05.htm" webstripperlinkwas="ch12_05.htm" title="12.5 Multiwindow Editing"><link rel="next" href="ch12_07.htm" webstripperlinkwas="ch12_07.htm" title="12.7 Extended Regular Expressions"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch12_05.htm" webstripperlinkwas="ch12_05.htm" title="12.5 Multiwindow Editing"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 12.5 Multiwindow Editing" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch12_01.htm" webstripperlinkwas="ch12_01.htm" title="12. vile&nbsp;-- vi Like Emacs">Chapter 12<br>vile&nbsp;-- vi Like Emacs</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch12_07.htm" webstripperlinkwas="ch12_07.htm" title="12.7 Extended Regular Expressions"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 12.7 Extended Regular Expressions" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-12-SECT-6">12.6 GUI Interfaces</A
></H2
><p class="para"><a class="indexterm" name="CH12.GUI1"></A
><a class="indexterm" name="CH12.GUI2"></A
><a class="indexterm" name="CH12.GUI3"></A
>The screen shots and the explanation in this
section were supplied by Kevin Buettner, Tom Dickey, and Paul Fox.
We thank them.</P
><p class="para"><a class="indexterm" name="AUTOID-19168"></A
>There are several X11 interfaces for <kbd class="command">vile</KBD
>,
each utilizing a
different toolkit based on the <em class="emphasis">Xt</EM
> library.<a class="indexterm" name="CH12.XVILE"></A
><a class="indexterm" name="AUTOID-19174"></A
>
There is a plain &quot;No Toolkit&quot; version which does not use a toolkit,
but has custom
scrollbars and a bulletin board widget for geometry management. There
are versions which use the Motif, Athena, or OpenLook toolkits. Of
these, the &quot;No Toolkit&quot;
version is probably best supported since that
is the version that some of <kbd class="command">vile</KBD
>'s authors most 
frequently use. But the
Motif and Athena versions have more features, such as menu support.</P
><p class="para">Fortunately, the basic interface is the same for each of these
versions. There is a single top level window which may be split into
two or more panes.
The panes, in turn,
may be used to display multiple views of a
buffer or multiple buffers or mixture of both. In <kbd class="command">vile</KBD
>
parlance these
panes are called &quot;windows,&quot;
but to avoid confusion, we will continue to
call them &quot;panes&quot; in the following discussion.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-12-SECT-6.1">12.6.1 Building xvile</A
></H3
><p class="para">To build <kbd class="command">xvile</KBD
>, you have to choose which
toolkit version to use. This is done when you configure <kbd class="command">vile</KBD
>
with the <kbd class="command">configure</KBD
> command. The relevant
options are:<a class="indexterm" name="AUTOID-19185"></A
></P
><dl class="variablelist"><dt class="term">--<code class="literal">with</CODE
>-<code class="literal">screen=value</CODE
></DT
><dd class="listitem"><p class="para">Specify terminal driver. The default is <code class="literal">tcap</CODE
>, for the
<em class="emphasis">termcap</EM
>/<em class="emphasis">terminfo</EM
> driver.
Other values include
<code class="literal">ncurses</CODE
> (a special case of <em class="emphasis">terminfo</EM
>),
<code class="literal">X11</CODE
>, <code class="literal">OpenLook</CODE
>,
<code class="literal">Motif</CODE
>, <code class="literal">Athena</CODE
>,
<code class="literal">Xaw</CODE
>, <code class="literal">Xaw3d</CODE
>,
<code class="literal">neXtaw</CODE
>, and <code class="literal">ansi</CODE
>.</P
></DD
><dt class="term">--<code class="literal">with</CODE
>-<code class="literal">scr=value</CODE
></DT
><dd class="listitem"><p class="para">Same as <code class="literal">--with-screen</CODE
>.</P
></DD
><dt class="term">--<code class="literal">with</CODE
>-<code class="literal">x</CODE
></DT
><dd class="listitem"><p class="para">Use the X Window System.
This is the &quot;No Toolkit&quot; version.</P
></DD
><dt class="term">--<code class="literal">with</CODE
>-<code class="literal">Xaw3d</CODE
></DT
><dd class="listitem"><p class="para">Link with <em class="emphasis">Xaw</EM
> 3-D library.</P
></DD
><dt class="term">--<code class="literal">with</CODE
>-<code class="literal">neXtaw</CODE
></DT
><dd class="listitem"><p class="para">Link with neXt Athena library.</P
></DD
><dt class="term">--<code class="literal">with</CODE
>-<code class="literal">Xaw</CODE
>-<code class="literal">scrollbars</CODE
></DT
><dd class="listitem"><p class="para">Use <em class="emphasis">Xaw</EM
> scrollbars rather than
the <kbd class="command">vile</KBD
> custom scrollbars.</P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-12-SECT-6.2">12.6.2 Basic Appearance and Functionality</A
></H3
><p class="para">The figures show <kbd class="command">xvile</KBD
>'s Motif interface.
It is similar to the Athena interface.</P
><h4 class="figure"><a class="title" name="VI6-CH-12-FIG-1">Figure 12.1: The vile GUI window</A
></H4
><img class="graphic" src="figs/vi_6.fig.1201.gif" webstripperlinkwas="figs/vi_6.fig.1201.gif" alt="Figure 12.1"><p class="para"><a class="xref" href="#VI6-CH-12-FIG-1">Figure 12.1</A
> shows three panes:</P
><ol class="orderedlist"><li class="listitem"><p class="para">The <kbd class="command">man</KBD
> page for <kbd class="command">vile</KBD
>,
which shows the use of underlining and boldface.</P
></LI
><li class="listitem"><p class="para">A buffer <code class="literal">misc.c</CODE
>,
from <kbd class="command">tin</KBD
>, which shows syntax highlighting (again,
underlining, this time for preprocessor statements, and boldface, for
quoted strings).</P
></LI
><li class="listitem"><p class="para">A three-line pane, which is active (noted by a darker status line),
named <code class="literal">[Completions]</CODE
>, for filename completions.
The pane is coordinated with the minibuffer (the colon command line): the first line
reads <em class="emphasis">Completions prefixed by /tmp/m:</EM
>,
and the minibuffer reads <em class="emphasis">Find file: m</EM
>.
The rest of the pane contains the actual filenames which match.
The first line of <code class="literal">[Completions]</CODE
> and the contents
change as the user completes the filename (and presses
<kbd class="keycap">[TAB]</KBD
> to tell <code class="literal">vile</CODE
> to show the
reduced set of choices).</P
></LI
></OL
><h4 class="figure"><a class="title" name="VI6-CH-12-FIG-2">Figure 12.2: Buffers and completions in vile</A
></H4
><img class="graphic" src="figs/vi_6.fig.1202.gif" webstripperlinkwas="figs/vi_6.fig.1202.gif" alt="Figure 12.2"><p class="para"><a class="xref" href="#VI6-CH-12-FIG-2">Figure 12.2</A
> also shows three panes:</P
><ol class="orderedlist"><li class="listitem"><p class="para">The <code class="literal">[Help]</CODE
> pane, which of course shows the most
important feature of an editor (how to exit without
modifying your files). :-)</P
></LI
><li class="listitem"><p class="para">The <code class="literal">[Buffer List]</CODE
>,
which indicates that <code class="literal">[Help]</CODE
> is
the <code class="literal">#</CODE
> (previous) buffer.
The <code class="literal">%</CODE
> (current) buffer is not shown on the list,
since only the &quot;visible&quot; buffers are displayed in this
copy of <code class="literal">[Buffer List]</CODE
>.
Supplying an argument to the <code class="literal">*</CODE
> command would
have shown the invisible buffers as well.
Buffers 1 and 2 are <code class="literal">charset.c</CODE
> and <code class="literal">misc.c</CODE
>.
They have been loaded, so their sizes (8931 and 54866) are displayed in the
<code class="literal">[Buffer List]</CODE
>.
Buffers 3, 4, and 5 (<code class="literal">color.c</CODE
>,
<code class="literal">config.c</CODE
>, and <code class="literal">curses.c</CODE
>) have
not been loaded, so a <code class="literal">u</CODE
> is displayed in the first column,
and the size is shown as zero.</P
></LI
><li class="listitem"><p class="para">The <code class="literal">[Completions]</CODE
> buffer is active.
This time it displays tag completions for the partial match
<em class="emphasis">co</EM
>, and the <em class="emphasis">Completions prefixed</EM
>
message is not shown because the buffer is scrolled down, which is
another side effect of pressing <kbd class="keycap">[TAB]</KBD
>:
<kbd class="command">vile</KBD
> cycles through a scrolling
action so that all of the choices will be shown even when the window is
small. (The <code class="literal">v</CODE
>/<code class="literal">V</CODE
> commands don't
do anything to the <code class="literal">[Completions]</CODE
> buffer while the cursor
is in the minibuffer; the <code class="literal">[Completions]</CODE
>
buffer is automatically sized.)</P
></LI
></OL
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-12-SECT-6.2.1">12.6.2.1 Scrollbars</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19306"></A
>At the right of each pane is a scrollbar which may be used in the
customary fashion to move about in the buffer. Note, however, that
the customary fashion varies from toolkit to toolkit. In the Athena
and &quot;No Toolkit&quot; version,
the middle mouse button may be used to drag
the &quot;thumb&quot; or visible indicator around. The left and right mouse
buttons move down or up (respectively) in the buffer.
The amount moved depends on the location of the mouse cursor on the
scrollbar. Placing it near the top will scroll by as little as one
line. When placed near the bottom, the text will scroll by as much as
a full paneful.</P
><p class="para">The Motif and OpenLook scrollbars are probably more
familiar. The left-most mouse button
is used for all operations. Clicking on
the little arrows will move up or down by one line. The scrollbar
indicator may be dragged in order to move about and scrolling up or
down by an entire pane may be accomplished by clicking above or below
the indicator. The OpenLook scrollbars provide additional mechanisms
for quickly moving to the top or bottom of the buffer.</P
><p class="para">In each version, there is a small handle above or below (i.e., between)
scrollbars which may be used to adjust the size of two adjacent panes.
In the &quot;No Toolkit&quot; version of <kbd class="command">xvile</KBD
>,
the pane resize handle blends in
with the mode line of two adjacent panes. In the other versions, the
resize handle is more distinguishable. But in each case, the mouse
cursor will change to a heavy vertical double arrow when placed above
the resize handle. The windows may be resized by clicking on and
dragging the handle.</P
><p class="para">A pane may be split into two by holding the control key down and
clicking the left mouse button on a scrollbar. Then you
will have two views of a particular buffer. Other
<kbd class="command">vile</KBD
> commands may
be used to replace one of the views with another buffer if desired. A
pane may be deleted by holding the control key down and clicking the
middle mouse button. Sometimes after creating a lot of panes, you
find yourself wanting to use all of the window real estate for just
one pane. To do this, control-click the right mouse button; all other
panes will be removed, leaving the entire <kbd class="command">xvile</KBD
>
window containing only the pane on which you clicked.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-12-SECT-6.2.2">12.6.2.2 Setting the cursor position and mouse motions</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19317"></A
><a class="indexterm" name="AUTOID-19320"></A
>Within the text area of a pane, the cursor may be set by clicking the
left mouse button.
This not only sets the cursor position, but also sets the pane in which
editing is being done.
In order to set just the pane but preserve the
old position, click on the mode line below the text you wish to edit.</P
><p class="para">A mouse click is viewed as a motion just like <code class="literal">4j</CODE
> is considered
a motion. To delete five lines, you could enter <code class="literal">d4j</CODE
>
which will delete
the current line and the four below it. You can do the same thing with
a mouse click. Position your cursor at the place you want to start
deleting from and then press <code class="literal">d</CODE
>.
After this, click in the buffer
at the point to which you wish to delete to. Mouse clicks are real
motions and may be used with other operators as well.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-12-SECT-6.2.3">12.6.2.3 Selections</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19330"></A
>Selections may be made by holding the left mouse button down and
dragging with the mouse.
Release of the mouse button will cause the
selection to be yanked and made available (if desired) for pasting.
You can force the selected region to be rectangular by holding the
control key down while dragging with the left button depressed. If the
dragging motion goes out of the current window, text will be scrolled in
the appropriate direction, if possible, to accommodate selections larger
than the window. The speed at which the scrolling occurs will
increase with the passage of time, making it practical to select large
regions of text quickly.</P
><p class="para">Individual words or lines may be selected by double- or triple-clicking 
on them.</P
><p class="para">A selection may be extended by clicking the right mouse button. As
with button one, the selection may be adjusted or scrolled by holding
the right button down and dragging with it. Selections may be extended in
any window open to the same buffer as the one in which
the selection was started.
That is, if you have two views of a buffer (in two different panes),
one containing the start of the buffer, and the other the end, it is
possible to select the entire buffer by clicking the left button at
the beginning of the pane showing the beginning of the buffer and then
clicking the right button in the pane showing the
end of the buffer. Also, selections may be extended in a rectangular
fashion by holding the control key down in conjunction with the use
of the right mouse button.</P
><p class="para">The middle button is used for pasting the selection. By default, it
pastes at the last text cursor position. If the shift key is held
down while clicking the middle button, the paste occurs at the
position of the mouse cursor.</P
><p class="para">A selection may be cleared (if owned by <kbd class="command">xvile</KBD
>)
by double-clicking on one of the mode lines.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-12-SECT-6.2.4">12.6.2.4 Clipboard</A
></H4
><p class="para"><a class="indexterm" name="AUTOID-19340"></A
>Data may be exchanged between many X applications via the PRIMARY
selection. This selection is set and manipulated as described above.</P
><p class="para">Other applications, most notably OpenLook applications, use the
CLIPBOARD selection to exchange data between applications. On many
Sun keyboards, selected text is moved to the clipboard by pressing the
<kbd class="keycap">[COPY]</KBD
> key and pasted by pressing
the <kbd class="keycap">[PASTE]</KBD
> key. If you find that
you cannot paste text selected in
<kbd class="command">xvile</KBD
> into other applications or
vice versa, it may well be that these applications use the CLIPBOARD
selection instead of the PRIMARY selection. (The other mechanism used
among really old applications involves the use of a ring of cut
buffers.)</P
><p class="para"><a class="indexterm" name="AUTOID-19347"></A
><a class="indexterm" name="AUTOID-19349"></A
><kbd class="command">xvile</KBD
> provides two commands for manipulating the clipboard.
These are <code class="literal">copy-to-clipboard</CODE
>
and <code class="literal">paste-from-clipboard</CODE
>.  When
<code class="literal">copy-to-clipboard</CODE
> is executed,
the contents of the current selection
are copied to the special clipboard kill register
(denoted by <code class="literal">;</CODE
> in
the register list). When an application requests the clipboard
selection, <kbd class="command">xvile</KBD
> gives it the contents of this kill register. The
<code class="literal">paste-from-clipboard</CODE
> command requests clipboard data
from the current owner of the CLIPBOARD selection.</P
><p class="para">Users of Sun systems may want to put the following key bindings in
their <i class="filename">.vilerc</I
> file in order to make
use of the
<kbd class="keycap">[COPY]</KBD
> and <kbd class="keycap">[PASTE]</KBD
> keys
found on their keyboards:</P
><blockquote class="screen"><pre class="screen">bind-key copy-to-clipboard #-^
bind-key paste-from-clipboard #-*</PRE
></BLOCKQUOTE
><p class="para">Key bindings are described in detail later in this chapter.</P
></DIV
><div class="sect3"><h4 class="sect3"><a class="title" name="VI6-CH-12-SECT-6.2.5">12.6.2.5 Resources</A
></H4
><p class="para"><kbd class="command">xvile</KBD
> has many resources which may be
used to control appearance and
behavior. Font choice is particularly important if you want italic or
oblique fonts to be displayed properly. <kbd class="command">vile</KBD
>'s
documentation has a
complete list of resources as well a sample set
of <i class="filename">.Xdefault</I
> entries.</P
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-12-SECT-6.3">12.6.3 Adding Menus</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-19373"></A
><a class="indexterm" name="AUTOID-19375"></A
>The Motif and Athena versions have menu support. Menu items, which are
user-definable, are read from the <i class="filename">.vilemenu</I
> file,
in the current or home directory.</P
><p class="para"><kbd class="command">xvile</KBD
> allows three types of menu items:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Built-in, i.e., specific to the menuing system, such as rereading the
<i class="filename">.vilerc</I
> file,
or spawning a new copy of <kbd class="command">xvile</KBD
></P
></LI
><li class="listitem"><p class="para">Direct invocation of built-in commands (e.g., displaying the
<code class="literal">[Buffer List]</CODE
>)</P
></LI
><li class="listitem"><p class="para">Invocation of arbitrary command strings (e.g., running interactive
macros such as a search command)</P
></LI
></UL
><p class="para">The distinction between the last two is made because the
authors prefer making <kbd class="command">vile</KBD
>
able to check the validity of commands before they are executed.</P
><p class="para">The sidebar in this chapter contains an annotated sample
<i class="filename">.vilemenu</I
> file.</P
></DIV
><a class="indexterm" name="AUTOID-19394"></A
><a class="indexterm" name="AUTOID-19395"></A
><a class="indexterm" name="AUTOID-19396"></A
><a class="indexterm" name="AUTOID-19397"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch12_05.htm" webstripperlinkwas="ch12_05.htm" title="12.5 Multiwindow Editing"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 12.5 Multiwindow Editing" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch12_07.htm" webstripperlinkwas="ch12_07.htm" title="12.7 Extended Regular Expressions"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 12.7 Extended Regular Expressions" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">12.5 Multiwindow Editing</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">12.7 Extended Regular Expressions</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

