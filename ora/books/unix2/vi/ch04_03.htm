<html><head><title>[Chapter 4] 4.3 Making Use of Buffers</TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:56:16Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm" title="4. Beyond the Basics"><link rel="prev" href="ch04_02.htm" webstripperlinkwas="ch04_02.htm" title="4.2 Options When Starting vi  "><link rel="next" href="ch04_04.htm" webstripperlinkwas="ch04_04.htm" title="4.4 Marking Your Place "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_02.htm" webstripperlinkwas="ch04_02.htm" title="4.2 Options When Starting vi  "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 4.2 Options When Starting vi  " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm" title="4. Beyond the Basics">Chapter 4<br>Beyond the Basics</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_04.htm" webstripperlinkwas="ch04_04.htm" title="4.4 Marking Your Place "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 4.4 Marking Your Place " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-4-SECT-3">4.3 Making Use of Buffers</A
></H2
><p class="para"><a class="indexterm" name="CH04.BUFFER"></A
>You have seen that while you are editing, your last deletion
(<code class="literal">d</CODE
> or <code class="literal">x</CODE
>) or yank (<code class="literal">y</CODE
>) is saved in a buffer (a
place in stored memory).
You can access the contents
of that buffer and put the saved text
back in your file with the put command
(<code class="literal">p</CODE
> or <code class="literal">P</CODE
>).</P
><p class="para"><a class="indexterm" name="AUTOID-4598"></A
><a class="indexterm" name="AUTOID-4602"></A
><a class="indexterm" name="AUTOID-4606"></A
><a class="indexterm" name="AUTOID-4609"></A
><a class="indexterm" name="AUTOID-4612"></A
><a class="indexterm" name="AUTOID-4614"></A
><a class="indexterm" name="AUTOID-4617"></A
><a class="indexterm" name="AUTOID-4620"></A
><a class="indexterm" name="AUTOID-4623"></A
><a class="indexterm" name="AUTOID-4627"></A
>The last nine deletions are stored by <kbd class="command">vi</KBD
>
in numbered buffers. You can access any of these numbered buffers
to restore any (or all) of the last nine deletions.
(Small deletions, of only parts of lines, are not saved in
numbered buffers, however. These deletions can only be recovered
by using the <code class="literal">p</CODE
> or <code class="literal">P</CODE
> command
immediately after you've made the deletion.)</P
><p class="para"><a class="indexterm" name="AUTOID-4635"></A
><a class="indexterm" name="AUTOID-4639"></A
><a class="indexterm" name="AUTOID-4643"></A
><a class="indexterm" name="AUTOID-4646"></A
><a class="indexterm" name="AUTOID-4649"></A
><a class="indexterm" name="AUTOID-4651"></A
><a class="indexterm" name="AUTOID-4654"></A
><a class="indexterm" name="AUTOID-4657"></A
><a class="indexterm" name="AUTOID-4660"></A
><a class="indexterm" name="AUTOID-4663"></A
><a class="indexterm" name="AUTOID-4666"></A
><kbd class="command">vi</KBD
> also allows you to place yanks (copied text) in buffers
identified by letters.
You can fill up to 26 (a-z) buffers with yanked text and restore that
text with a put command at any time in your editing session.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-4-SECT-3.1">4.3.1 Recovering Deletions </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-4674"></A
><a class="indexterm" name="AUTOID-4676"></A
><a class="indexterm" name="AUTOID-4679"></A
><a class="indexterm" name="AUTOID-4683"></A
>Being able to delete large blocks of text at a single bound is
all very well and good, but what if you mistakenly delete 53 lines
that you need?
There is a way to recover any of your past <em class="emphasis">nine</EM
> deletions,
for they are saved in numbered buffers.
The last delete is saved in buffer&nbsp;1, the second-to-last in buffer&nbsp;2,
and so on.</P
><p class="para"><a class="indexterm" name="AUTOID-4688"></A
><a class="indexterm" name="AUTOID-4690"></A
><a class="indexterm" name="AUTOID-4692"></A
>To recover a deletion, type <code class="literal">&quot;</CODE
> (double quote),
identify the buffered text by number, then give the put command.
To recover your second-to-last deletion from buffer 2:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;2p</PRE
></BLOCKQUOTE
></P
><p class="para">The deletion in buffer 2 is placed after the cursor.</P
><p class="para"><a class="indexterm" name="AUTOID-4699"></A
><a class="indexterm" name="AUTOID-4701"></A
>If you're not sure which buffer contains the deletion you want to
restore, you don't have to keep typing
<code class="literal">&quot;</CODE
><em class="emphasis">n</EM
><code class="literal">p</CODE
> over
and over again.<a class="indexterm" name="AUTOID-4707"></A
>
If you use the repeat command (<code class="literal">.</CODE
>)
with <code class="literal">p</CODE
> after <code class="literal">u</CODE
>,
it automatically increments the buffer number. As a
result, you can search through the numbered buffers
as follows:</P
><p class="para"><blockquote class="screen"><pre class="screen">&quot;1pu.u.u <i class="lineannotation">etc.</I
></PRE
></BLOCKQUOTE
></P
><p class="para">to put the contents of each succeeding buffer in the file
one after the other.
Each time you type <code class="literal">u</CODE
>, the restored text is removed;  when
you type a dot (.), the contents of the <em class="emphasis">next</EM
> buffer is restored to
your file.
Keep typing <code class="literal">u</CODE
> and . until you've recovered the text
you're looking for.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-4-SECT-3.2">4.3.2 Yanking to Named Buffers </A
></H3
><p class="para"><a class="indexterm" name="CH04.NAMEDBUFFER1"></A
><a class="indexterm" name="CH04.NAMEDBUFFER2"></A
><a class="indexterm" name="CH04.NAMEDBUFFER3"></A
><a class="indexterm" name="CH04.NAMEDBUFFER4"></A
><a class="indexterm" name="CH04.NAMEDBUFFER5"></A
><a class="indexterm" name="CH04.NAMEDBUFFER6"></A
><a class="indexterm" name="CH04.NAMEDBUFFER7"></A
><a class="indexterm" name="CH04.NAMEDBUFFER8"></A
><a class="indexterm" name="CH04.NAMEDBUFFER9"></A
><a class="indexterm" name="CH04.NAMEDBUFFER10"></A
><a class="indexterm" name="CH04.NAMEDBUFFER11"></A
>You have seen that you must put (<code class="literal">p</CODE
> or <code class="literal">P</CODE
>)
the contents of the unnamed buffer before you make any other edit, or the
buffer will be overwritten.
You can also use <code class="literal">y</CODE
> and <code class="literal">d</CODE
> with a set of
26 named buffers (a-z) which are specifically available for
copying and moving text.
If you name a buffer to store the yanked
text, you can retrieve the contents of the named buffer at any time
during your editing session.</P
><p class="para"><a class="indexterm" name="AUTOID-4762"></A
><a class="indexterm" name="AUTOID-4764"></A
><a class="indexterm" name="AUTOID-4766"></A
>To yank into a named buffer, precede the
yank command with a double quote (<code class="literal">&quot;</CODE
>) and the character for
the name of the buffer you want to load.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">&quot;dyy</CODE
>	<i class="lineannotation">Yank current line into buffer&nbsp;<code class="literal">d</CODE
>.</I
>
<code class="literal">&quot;a7yy</CODE
>	<i class="lineannotation">Yank next seven lines into buffer&nbsp;<code class="literal">a</CODE
>.</I
></PRE
></BLOCKQUOTE
></P
><p class="para">After loading the named buffers and moving to the new position, use
<code class="literal">p</CODE
> or <code class="literal">P</CODE
> to put the text back:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">&quot;dP</CODE
>	<i class="lineannotation">Put the contents of buffer&nbsp;<code class="literal">d</CODE
> before cursor.</I
>
<code class="literal">&quot;ap</CODE
>	<i class="lineannotation">Put the contents of buffer&nbsp;<code class="literal">a</CODE
> after cursor.</I
></PRE
></BLOCKQUOTE
></P
><p class="para">There is no way to put part of a buffer into the text&nbsp;-- it is all or
nothing.</P
><p class="para">In the next chapter, you'll learn to edit multiple files. Once you know how to
travel between files without leaving <kbd class="command">vi</KBD
>, you can use named
buffers to selectively transfer text between files.</P
><p class="para">You can also delete text into named buffers using much the same
procedure:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="literal">&quot;a5dd</CODE
>	<i class="lineannotation">Delete five lines into buffer&nbsp;<code class="literal">a</CODE
>.</I
></PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-4798"></A
>If you specify a buffer name with a capital letter, your yanked or
deleted text will be <em class="emphasis">appended</EM
> to the current contents
of that buffer.
This allows you to be selective in what you move or copy. For example:
<dl class="variablelist"><dt class="term"><code class="literal">&quot;zd)</CODE
></DT
><dd class="listitem"><p class="para">Delete from cursor to end of current sentence and save in buffer&nbsp;<code class="literal">z</CODE
>.</P
></DD
><dt class="term"><code class="literal">2)</CODE
></DT
><dd class="listitem"><p class="para">Move two sentences further on.</P
></DD
><dt class="term"><code class="literal">&quot;Zy)</CODE
></DT
><dd class="listitem"><p class="para">Add the next sentence to buffer&nbsp;<code class="literal">z</CODE
>.
You can continue adding more text to a named buffer
for as long as you like&nbsp;-- but be warned: if you once forget, and
yank or delete to the buffer without specifying its name in
capitalized form, you'll overwrite the buffer, losing whatever you
had accumulated in it.</P
></DD
></DL
></P
><a class="indexterm" name="AUTOID-4820"></A
><a class="indexterm" name="AUTOID-4821"></A
><a class="indexterm" name="AUTOID-4822"></A
><a class="indexterm" name="AUTOID-4823"></A
><a class="indexterm" name="AUTOID-4824"></A
><a class="indexterm" name="AUTOID-4825"></A
><a class="indexterm" name="AUTOID-4826"></A
><a class="indexterm" name="AUTOID-4827"></A
><a class="indexterm" name="AUTOID-4828"></A
><a class="indexterm" name="AUTOID-4829"></A
><a class="indexterm" name="AUTOID-4830"></A
></DIV
><a class="indexterm" name="AUTOID-4831"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_02.htm" webstripperlinkwas="ch04_02.htm" title="4.2 Options When Starting vi  "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 4.2 Options When Starting vi  " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_04.htm" webstripperlinkwas="ch04_04.htm" title="4.4 Marking Your Place "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 4.4 Marking Your Place " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">4.2 Options When Starting vi  </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">4.4 Marking Your Place </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

