<html><head><title>[Chapter 1] The vi Text Editor</TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:55:31Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part01.htm" webstripperlinkwas="part01.htm" title="I. Basic and Advanced vi"><link rel="prev" href="part01.htm" webstripperlinkwas="part01.htm" title="I. Basic and Advanced vi"><link rel="next" href="ch01_02.htm" webstripperlinkwas="ch01_02.htm" title="1.2 Quitting Without Saving Edits "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="PART" href="part01.htm" webstripperlinkwas="part01.htm" title="I. Basic and Advanced vi"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: I. Basic and Advanced vi" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 1</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch01_02.htm" webstripperlinkwas="ch01_02.htm" title="1.2 Quitting Without Saving Edits "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 1.2 Quitting Without Saving Edits " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="VI6-CH-1">1. The vi Text Editor</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="SECT1" href="#VI6-CH-1-SECT-1" title="1.1 Opening and Closing Files ">Opening and Closing Files </A
><br><a class="SECT1" href="ch01_02.htm" webstripperlinkwas="ch01_02.htm" title="1.2 Quitting Without Saving Edits ">Quitting Without Saving Edits </A
></P
><p></P
></DIV
><p class="para">UNIX has a number of editors that can process the contents of text files,
whether those files contain data, source code, or sentences.<a class="indexterm" name="AUTOID-280"></A
><a class="indexterm" name="AUTOID-282"></A
><a class="indexterm" name="AUTOID-284"></A
><a class="indexterm" name="AUTOID-286"></A
>
There are line editors, such as <kbd class="command">ed</KBD
> and <kbd class="command">ex</KBD
>, which
display a line of the file on the screen;
and there are screen editors, such as <kbd class="command">vi</KBD
> and <kbd class="command">emacs</KBD
>,
which display a part of the file on your terminal screen.<a class="indexterm" name="AUTOID-292"></A
>
Text editors based on the X Window System are also commonly available,
and are becoming increasing popular.
Both GNU <kbd class="command">emacs</KBD
> and its derivative <kbd class="command">xemacs</KBD
>
provide multiple X windows;
an interesting alternative is the <kbd class="command">sam</KBD
> editor from
Bell Labs.
All but one of the <kbd class="command">vi</KBD
> clones described in
Part II of this book also provide X-based interfaces.</P
><p class="para"><a class="indexterm" name="AUTOID-299"></A
><kbd class="command">vi</KBD
> is the most useful standard text editor on your system.
(<kbd class="command">vi</KBD
> is short for <em class="emphasis">vi</EM
>sual editor and is pronounced &quot;vee-eye.&quot;)<a class="indexterm" name="AUTOID-304"></A
>
Unlike <kbd class="command">emacs</KBD
>, it is available in nearly identical form on
almost every UNIX system, thus providing a kind of text-editing
<kbd class="command">lingua franca</KBD
>.[<a class="footnote" href="#AUTOID-308">1</A
>]
The same might be said of <kbd class="command">ed</KBD
> and
<kbd class="command">ex</KBD
>, but screen editors are generally much easier to use.
With a screen editor, you can scroll the page, move the cursor, delete
lines, insert characters, and more, while seeing the results of your
edits as you make them.
Screen editors are very popular, since they
allow you to make changes as you read through a file, like you
would edit a printed copy, only faster.</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-308">[1]</A
> Actually, these days, GNU <kbd class="command">emacs</KBD
> is pretty much the
universal version of <kbd class="command">emacs</KBD
>; the only problem is
it doesn't come standard with most commercial UNIX systems;
you must retrieve and install it yourself.</P
></DIV
></BLOCKQUOTE
><p class="para">To many beginners, <kbd class="command">vi</KBD
> looks unintuitive and
cumbersome&nbsp;-- instead of using special
control keys for word processing functions and just letting you type
normally, it uses all of the regular keyboard keys for issuing
commands. When the keyboard keys are issuing commands, <kbd class="command">vi</KBD
> is
said to be in <em class="emphasis">command mode</EM
>.
You must be in a special <em class="emphasis">insert mode</EM
> before you can type actual
text on the screen.
In addition, there seem to be so many commands.</P
><p class="para"><a class="indexterm" name="AUTOID-320"></A
><a class="indexterm" name="AUTOID-324"></A
><a class="indexterm" name="AUTOID-328"></A
><a class="indexterm" name="CH01.COMMAND"></A
>Once you start learning, however, you realize that <kbd class="command">vi</KBD
> is well designed.
You need only a few keystrokes to tell <kbd class="command">vi</KBD
> to do complex tasks.
As you learn
<kbd class="command">vi</KBD
>, you learn shortcuts that transfer more and more of the
editing work to the computer&nbsp;-- where it belongs.</P
><p class="para"><kbd class="command">vi</KBD
> (like any text editor) is not a &quot;what you see is
what you get&quot; word processor.
If you want to produce formatted documents, you must type in
codes that are used by another formatting program to control the
appearance of the printed copy.
If you want to indent several paragraphs,
for instance, you put a code where the indent begins and ends.<a class="indexterm" name="AUTOID-339"></A
>
Formatting codes allow you to experiment with or change the appearance
of your printed files, and in many ways, give you much more
control over the appearance of your documents than a word
processor.<a class="indexterm" name="AUTOID-341"></A
>
UNIX supports the <kbd class="command">troff</KBD
> formatting package.[<a class="footnote" href="#AUTOID-344">2</A
>]
The
TeX
and
LaTeX
formatters are popular, commonly available alternatives.</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-344">[2]</A
> <kbd class="command">troff</KBD
> is for laser printers and typesetters.
Its &quot;twin brother&quot; is <kbd class="command">nroff</KBD
>,
for line printers and terminals.
Both accept the same input language.<a class="indexterm" name="AUTOID-348"></A
>
Following common UNIX convention, we refer to both
with the name <kbd class="command">troff</KBD
>.</P
></DIV
></BLOCKQUOTE
><p class="para">(<kbd class="command">vi</KBD
> does support some simple formatting mechanisms.
For example, you can tell it to automatically wrap when you come to
the end of a line, or to automatically indent new lines.)</P
><p class="para">As with any skill, the more editing you do, the easier the basics become, and
the more you can accomplish.
Once you are used to all the powers you have while editing with
<kbd class="command">vi</KBD
>, you may never want to return to any &quot;simpler&quot; editor.</P
><p class="para">What are the components of editing? 
First, you want to
<em class="emphasis">insert</EM
> text (a forgotten word or a missing sentence), and
you want to <em class="emphasis">delete</EM
> text (a stray character or an
entire paragraph).
You also need to <em class="emphasis">change</EM
> letters and words
(to correct misspellings or to reflect a change of mind about a term).
You might want to <em class="emphasis">move</EM
> text from one place to another
part of your file.
And, on occasion, you want to <em class="emphasis">copy</EM
>
text to duplicate it in another part of your file.</P
><p class="para"><a class="indexterm" name="AUTOID-362"></A
>Unlike many word processors, <kbd class="command">vi</KBD
>'s
command mode is the initial or &quot;default&quot; mode.
Complex, interactive edits can be performed with only a few keystrokes.
(And to insert raw text, you simply give any of the several
&quot;insert&quot; commands and then type away.)</P
><p class="para">One or two characters are used for the basic commands.
For example:</P
><dl class="variablelist"><dt class="term"><code class="literal">i</CODE
></DT
><dd class="listitem"><p class="para">insert</P
></DD
><dt class="term"><code class="literal">cw</CODE
></DT
><dd class="listitem"><p class="para">change word</P
></DD
></DL
><p class="para">Using letters as commands, you can edit a file with great speed.
You don't have to memorize banks of function keys or stretch your
fingers to reach awkward combinations of keys.
Most of the commands can be remembered by the letter that
performs them, and nearly all commands follow similar
patterns and are related to each other.</P
><p class="para">In general, <kbd class="command">vi</KBD
> commands:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Are case-sensitive (uppercase and lowercase keystrokes
mean different things;  <code class="literal">I</CODE
> is different from <code class="literal">i</CODE
>).<a class="indexterm" name="AUTOID-385"></A
></P
></LI
><li class="listitem"><p class="para">Are not shown (or &quot;echoed&quot;) on the screen when you type them.<a class="indexterm" name="AUTOID-389"></A
></P
></LI
><li class="listitem"><p class="para">Do not require a
<kbd class="keycap">[RETURN]</KBD
> after the command.</P
></LI
></UL
><p class="para"><a class="indexterm" name="AUTOID-395"></A
><a class="indexterm" name="AUTOID-397"></A
>There is also a group of commands that echo on the bottom
line of the screen. Bottom-line commands are preceded by
different symbols.<a class="indexterm" name="AUTOID-400"></A
><a class="indexterm" name="AUTOID-403"></A
><a class="indexterm" name="AUTOID-406"></A
><a class="indexterm" name="AUTOID-409"></A
>
The slash (<code class="literal">/</CODE
>) and the question mark (<code class="literal">?</CODE
>)
begin search commands, and are discussed
in <a class="xref" href="ch03_01.htm" webstripperlinkwas="ch03_01.htm">Chapter 3, <cite class="CHAPTER">Moving Around in a Hurry</CITE
></A
>.<a class="indexterm" name="AUTOID-415"></A
><a class="indexterm" name="AUTOID-418"></A
><a class="indexterm" name="AUTOID-421"></A
><a class="indexterm" name="AUTOID-424"></A
>
A colon (<code class="literal">:</CODE
>) begins all <kbd class="command">ex</KBD
> commands.  <kbd class="command">ex</KBD
> commands
are those that are used by the <kbd class="command">ex</KBD
> line editor.
The <kbd class="command">ex</KBD
> editor is available to you when you use <kbd class="command">vi</KBD
>, because
<kbd class="command">ex</KBD
> is the underlying editor, and
<kbd class="command">vi</KBD
> is really just its &quot;visual&quot; mode.
<kbd class="command">ex</KBD
> commands and concepts are discussed fully in
<a class="xref" href="ch05_01.htm" webstripperlinkwas="ch05_01.htm">Chapter 5, <cite class="CHAPTER">Introducing the ex Editor</CITE
></A
>,
but this chapter introduces you to the
<kbd class="command">ex</KBD
> commands to quit a file without saving edits.<a class="indexterm" name="AUTOID-437"></A
></P
><div class="sect1"><h2 class="sect1"><a class="title" name="VI6-CH-1-SECT-1">1.1 Opening and Closing Files </A
></H2
><p class="para">You can use <kbd class="command">vi</KBD
> to edit any text file.
<kbd class="command">vi</KBD
> copies the file to be
edited into a <em class="emphasis">buffer</EM
> (an area temporarily set aside in memory),
displays the buffer (though you can see only one screenful at a<a class="indexterm" name="AUTOID-444"></A
><a class="indexterm" name="AUTOID-446"></A
>
time), and
lets you add, delete, and change text.
When you save your edits,
<kbd class="command">vi</KBD
> copies the edited buffer back into a permanent file, replacing
the old file of the same name.
Remember that you are always working on a <em class="emphasis">copy</EM
> of your file in
the buffer, and that your edits will not affect your original file
until you save the buffer. Saving your edits is also called
&quot;writing the buffer,&quot; or more
commonly, &quot;writing your file.&quot;<a class="indexterm" name="AUTOID-450"></A
></P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-1-SECT-1.1">1.1.1 Opening a File </A
></H3
><p class="para"><a class="indexterm" name="CH01.OPEN1"></A
><a class="indexterm" name="CH01.OPEN2"></A
><a class="indexterm" name="AUTOID-461"></A
><a class="indexterm" name="AUTOID-463"></A
><kbd class="keycap">[vi]</KBD
>
<code class="literal">vi</CODE
> is the UNIX command that invokes the <kbd class="command">vi</KBD
> editor for
an existing file or for a brand new file.
The syntax for the <code class="literal">vi</CODE
> command is:</P
><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>vi</B
></CODE
> <code class="literal">[</CODE
><code class="replaceable"><i>filename</I
></CODE
><code class="literal">]</CODE
></PRE
></BLOCKQUOTE
><p class="para">The brackets shown on the above command line indicate that the
filename is optional.
The brackets should not be typed.
The <code class="literal">$</CODE
> is the UNIX prompt.
If the filename is omitted,
<kbd class="command">vi</KBD
> will open an unnamed buffer.
You can assign the name when you write the buffer into a file.
For right now, though,
let's stick to naming the file on the command line.</P
><p class="para"><a class="indexterm" name="AUTOID-478"></A
>A filename must be unique inside its directory.
On older System V UNIX
systems, it cannot exceed 14 characters in length (most common UNIX
systems allow much longer names).<a class="indexterm" name="AUTOID-481"></A
><a class="indexterm" name="AUTOID-484"></A
>
A filename can include any 8-bit
character except a slash (/), which is reserved as the separator
between files
and directories in a pathname,
and ASCII NUL, the character with all zero bits.<a class="indexterm" name="AUTOID-487"></A
><a class="indexterm" name="AUTOID-490"></A
>
You can even include spaces in a filename by typing a backslash
(\) before the space.
In practice, though, filenames generally consist of any combination of
uppercase and lowercase letters, numbers, and the characters
dot (.) and underscore (_).<a class="indexterm" name="AUTOID-493"></A
>
Remember that UNIX is
case-sensitive: lowercase letters are distinct from uppercase letters.
Also remember that you must press
<kbd class="keycap">[RETURN]</KBD
> to tell UNIX that you are finished issuing your command.</P
><p class="para"> 
When you want to open a new file in a directory, give a new
filename with the <code class="literal">vi</CODE
> command.
For example, if you want to open a new
file called <i class="filename">practice</I
> in the current directory, you would enter:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>vi practice</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Since this is a new file, the buffer is empty and the screen appears
as follows:</P
><p class="para"><blockquote class="screen"><pre class="screen">~
~
~
&quot;practice&quot; [New file].</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-506"></A
><a class="indexterm" name="AUTOID-509"></A
>The tildes (~) down the left-hand column of the screen indicate
that there is no text in the file, not even blank lines.<a class="indexterm" name="AUTOID-512"></A
><a class="indexterm" name="AUTOID-514"></A
>
The prompt line
(also called the status line)
at the bottom of the screen echoes the name and status of the file.</P
><p class="para">You can also edit any existing text file in a directory by specifying
its filename.<a class="indexterm" name="AUTOID-518"></A
>
Suppose that there is a UNIX file with the pathname <i class="filename">/home/john/letter</I
>.
If you are already in the <i class="filename">/home/john</I
> directory, use the relative pathname.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>vi letter</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">brings a copy of the file <i class="filename">letter</I
> to the screen.</P
><p class="para"><a class="indexterm" name="AUTOID-528"></A
>If you are in another directory, give the full pathname to begin editing:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>vi /home/john/letter</B
></CODE
></PRE
></BLOCKQUOTE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-1-SECT-1.2">1.1.2 Problems Opening Files </A
></H3
><a class="indexterm" name="CH01.TROUBLEOPEN"></A
><ul class="itemizedlist"><li class="listitem"><p class="para"><em class="emphasis">When you invoke </EM
>vi<em class="emphasis">,
the message <code class="literal">[open mode]</CODE
> appears.</EM
><a class="indexterm" name="AUTOID-544"></A
></P
><p class="para"><a class="indexterm" name="AUTOID-547"></A
><a class="indexterm" name="AUTOID-549"></A
>Your terminal type is probably incorrectly identified.
Quit the editing session immediately by typing <code class="literal">:q</CODE
>.
Check the environment variable <code class="literal">$TERM</CODE
>. It should
be set to the name of your terminal.
Or ask your
system administrator to provide an adequate terminal type setting.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">You see one of the following messages:</EM
><a class="indexterm" name="AUTOID-556"></A
><a class="indexterm" name="AUTOID-558"></A
><a class="indexterm" name="AUTOID-560"></A
><a class="indexterm" name="AUTOID-562"></A
><a class="indexterm" name="AUTOID-564"></A
><a class="indexterm" name="AUTOID-566"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">  Visual needs addressable cursor or upline capability
  Bad termcap entry
  Termcap entry too long
  <code class="replaceable"><i>terminal</I
></CODE
>:  Unknown terminal type
  Block device required
  Not a typewriter</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-572"></A
><a class="indexterm" name="AUTOID-574"></A
>Your terminal type is either undefined, or there's probably something
wrong with your <em class="emphasis">terminfo</EM
> or <em class="emphasis">termcap</EM
> entry.
Enter <code class="literal">:q</CODE
> to quit.
Check your <code class="literal">$TERM</CODE
> environment variable, or
ask your system administrator to select
a terminal type for your environment.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">A <code class="literal">[new file]</CODE
> message appears when you think a file already
exists.</EM
><a class="indexterm" name="AUTOID-584"></A
></P
><p class="para">You are probably in the wrong directory.
Enter <code class="literal">:q</CODE
> to quit.  Then check to see that you are in the
correct directory for that file (enter <code class="literal">pwd</CODE
> at the UNIX prompt).
If you are in the right directory, check the list of files in the directory
(with <code class="literal">ls</CODE
>)
to see whether the file exists under a slightly different name.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">You invoke </EM
>vi<em class="emphasis">, but you get a colon prompt
(indicating that you're in </EM
>ex<em class="emphasis"> line-editing mode).</EM
><a class="indexterm" name="AUTOID-595"></A
><a class="indexterm" name="AUTOID-597"></A
><a class="indexterm" name="AUTOID-600"></A
></P
><p class="para">You probably typed an interrupt before <kbd class="command">vi</KBD
> could draw the screen.
Enter <kbd class="command">vi</KBD
> by typing <code class="literal">vi</CODE
> at the <kbd class="command">ex</KBD
> prompt (<code class="literal">:</CODE
>).</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">One of the following messages appears:</EM
><a class="indexterm" name="AUTOID-612"></A
><a class="indexterm" name="AUTOID-614"></A
><a class="indexterm" name="AUTOID-616"></A
><a class="indexterm" name="AUTOID-618"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">  [Read only]
  File is read only
  Permission denied</PRE
></BLOCKQUOTE
></P
><p class="para">&quot;Read only&quot; means that you can only look at the file; you cannot
save any changes you make.<a class="indexterm" name="AUTOID-623"></A
>
You may have invoked <kbd class="command">vi</KBD
> in <em class="emphasis">view mode</EM
> (with <code class="literal">view</CODE
> or
<code class="literal">vi -R</CODE
>), or you do not have write permission for the file.
See the section &quot;Problems Saving Files&quot; below.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">One of the following messages appears:</EM
><a class="indexterm" name="AUTOID-632"></A
><a class="indexterm" name="AUTOID-634"></A
><a class="indexterm" name="AUTOID-636"></A
><a class="indexterm" name="AUTOID-638"></A
><a class="indexterm" name="AUTOID-640"></A
><a class="indexterm" name="AUTOID-642"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">  Bad file number
  Block special file
  Character special file
  Directory
  Executable
  Non-ascii file
  <code class="replaceable"><i>file</I
></CODE
> non-ASCII</PRE
></BLOCKQUOTE
></P
><p class="para">The file you've called up to edit is not a regular text file.
Type <code class="literal">:q!</CODE
> to quit, then check the file you wish to edit,
perhaps with the <code class="literal">file</CODE
> command.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">When you type <code class="literal">:q</CODE
> because of one of the above difficulties,
the message appears:</EM
><a class="indexterm" name="AUTOID-654"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">  No write since last change (:quit! overrides).</PRE
></BLOCKQUOTE
></P
><p class="para">You have modified the file without realizing it.
Type <code class="literal">:q!</CODE
> to leave <kbd class="command">vi</KBD
>.
Your changes from this session will not be saved in the file.</P
></LI
></UL
><a class="indexterm" name="AUTOID-661"></A
><a class="indexterm" name="AUTOID-662"></A
><a class="indexterm" name="AUTOID-663"></A
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-1-SECT-1.3">1.1.3 Modus Operandi </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-667"></A
>As mentioned earlier,
the concept of the current &quot;mode&quot;
is fundamental to the way <kbd class="command">vi</KBD
> works.<a class="indexterm" name="AUTOID-670"></A
><a class="indexterm" name="AUTOID-673"></A
>
There are two modes, <em class="emphasis">command mode</EM
>
and <em class="emphasis">insert mode</EM
>.
You start out in command mode, where every keystroke represents a
command.
In insert mode, everything you type becomes text in your file.</P
><p class="para">Sometimes, you can accidentally enter insert mode, or conversely, leave
insert mode accidentally. In either case, what you type will likely
affect your files in ways you did not intend.</P
><p class="para"><a class="indexterm" name="AUTOID-681"></A
><a class="indexterm" name="AUTOID-683"></A
>Press the
<kbd class="keycap">[ESC]</KBD
>
key to force <kbd class="command">vi</KBD
> to enter command mode.
If you are already in command mode, <kbd class="command">vi</KBD
> will beep at you when
you press the
<kbd class="keycap">[ESC]</KBD
>
key.
(Command mode is thus sometimes referred to as &quot;beep mode.&quot;)</P
><p class="para">Once you are safely in command mode, you can proceed to repair any
accidental changes, and then continue editing your text.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-1-SECT-1.4">1.1.4 Saving and Quitting a File </A
></H3
><p class="para"><a class="indexterm" name="CH01.SAVING"></A
><a class="indexterm" name="CH01.QUITTING"></A
><a class="indexterm" name="CH01.EXITING"></A
><a class="indexterm" name="AUTOID-700"></A
><a class="indexterm" name="AUTOID-704"></A
><a class="indexterm" name="AUTOID-708"></A
>You can quit working on a file at any time, save your edits
and return to the UNIX prompt.
The <code class="literal">vi</CODE
> command to quit and save edits is <code class="literal">ZZ</CODE
>. Note that <code class="literal">ZZ</CODE
> is capitalized.</P
><p class="para">Let's assume that you do create a file called <i class="filename">practice</I
> to
practice <kbd class="command">vi</KBD
> commands, and that you type in six lines of text.
To save the file, first check that you are in
command mode by pressing
<kbd class="keycap">[ESC]</KBD
> and then enter <code class="literal">ZZ</CODE
>.</P
><p class="para"></P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">ZZ</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0101.gif" webstripperlinkwas="figs/vi.0101.gif" alt="Graphic"><p class="para">Give the write and save command, <code class="literal">ZZ</CODE
>.
Your file is saved as a regular UNIX file.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">ls</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0102.gif" webstripperlinkwas="figs/vi.0102.gif" alt="Graphic"><p class="para">Listing the files in the directory shows the new file
<i class="filename">practice</I
> that you created.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"></P
><p class="para"><a class="indexterm" name="AUTOID-743"></A
><a class="indexterm" name="AUTOID-745"></A
><a class="indexterm" name="AUTOID-747"></A
>You can also save your edits with
<kbd class="command">ex</KBD
> commands. Type <code class="literal">:w</CODE
> to save your file but not quit
<kbd class="command">vi</KBD
>; type <code class="literal">:q</CODE
> to quit if you haven't made any edits; and
type <code class="literal">:wq</CODE
> to both save your edits and quit.
(<code class="literal">:wq</CODE
> is equivalent to <code class="literal">ZZ</CODE
>.)
We'll explain fully how to use commands in <a class="xref" href="ch05_01.htm" webstripperlinkwas="ch05_01.htm">Chapter 5</A
>,
<cite class="citetitle">Introducing the ex Editor</CITE
>; for
now, you should just memorize a few commands for writing and saving
files.</P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="PART" href="part01.htm" webstripperlinkwas="part01.htm" title="I. Basic and Advanced vi"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: I. Basic and Advanced vi" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch01_02.htm" webstripperlinkwas="ch01_02.htm" title="1.2 Quitting Without Saving Edits "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 1.2 Quitting Without Saving Edits " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">I. Basic and Advanced vi</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">1.2 Quitting Without Saving Edits </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

