<html><head><title>[Chapter 11] 11.4 Initialization</TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:58:38Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch11_01.htm" webstripperlinkwas="ch11_01.htm" title="11. vim&nbsp;-- vi Improved"><link rel="prev" href="ch11_03.htm" webstripperlinkwas="ch11_03.htm" title="11.3 Online Help and Other Documentation"><link rel="next" href="ch11_05.htm" webstripperlinkwas="ch11_05.htm" title="11.5 Multiwindow Editing"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch11_03.htm" webstripperlinkwas="ch11_03.htm" title="11.3 Online Help and Other Documentation"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 11.3 Online Help and Other Documentation" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch11_01.htm" webstripperlinkwas="ch11_01.htm" title="11. vim&nbsp;-- vi Improved">Chapter 11<br>vim&nbsp;-- vi Improved</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch11_05.htm" webstripperlinkwas="ch11_05.htm" title="11.5 Multiwindow Editing"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 11.5 Multiwindow Editing" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-11-SECT-4">11.4 Initialization</A
></H2
><p class="para"><a class="indexterm" name="CH11.INIT1"></A
><a class="indexterm" name="CH11.INIT2"></A
>This section describes <kbd class="command">vim</KBD
>'s
initialization steps, including those taken for the GUI
versions of <kbd class="command">vim</KBD
>.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-11-SECT-4.1">11.4.1 Initialization for All vim Invocations</A
></H3
><p class="para"><kbd class="command">vim</KBD
> performs the following initialization steps:</P
><ol class="orderedlist"><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15259"></A
><a class="indexterm" name="AUTOID-15261"></A
><a class="indexterm" name="AUTOID-15263"></A
><a class="indexterm" name="AUTOID-15265"></A
>Set the <code class="literal">shell</CODE
> and <code class="literal">term</CODE
> options
from the <code class="literal">SHELL</CODE
> and <code class="literal">TERM</CODE
>
environment variables, respectively. On MS-DOS and Win32, use<a class="indexterm" name="AUTOID-15271"></A
>
<code class="literal">COMSPEC</CODE
> to set <code class="literal">shell</CODE
>
if <code class="literal">SHELL</CODE
> is not set.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15278"></A
><a class="indexterm" name="AUTOID-15280"></A
>If <code class="literal">-u</CODE
> was supplied, execute the given file, and
skip the rest of the startup file based initializations.
The <code class="literal">-s</CODE
> option has the same effect for <kbd class="command">ex</KBD
>
mode; only the <code class="literal">-u</CODE
> option will be interpreted.
Use of <code class="literal">-u NONE</CODE
> causes <kbd class="command">vim</KBD
> to
skip <em class="emphasis">all</EM
> further initializations.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15291"></A
>Execute the system-wide <em class="emphasis">vimrc</EM
> file. 
The exact path is set when
<kbd class="command">vim</KBD
> is compiled. A typical value is
<i class="filename">/usr/local/share/vim/vimrc</I
>.</P
></LI
><li class="listitem"><p class="para">Execute instructions in the first place that exists of the following four:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">	The environment variable <code class="literal">VIMINIT</CODE
>.<a class="indexterm" name="AUTOID-15302"></A
>
	</P
></LI
><li class="listitem"><p class="para">	The user <em class="emphasis">vimrc</EM
> file, 
        <i class="filename">$HOME/.vimrc</I
> under
	UNIX (or Linux). The location will be different on non-UNIX systems.
	If <i class="filename">.vimrc</I
> does not exist, <kbd class="command">vim</KBD
>
	looks for <i class="filename">_vimrc</I
>. On the non-UNIX systems,
	the order is reversed.
	</P
></LI
><li class="listitem"><p class="para">	The environment variable <code class="literal">EXINIT</CODE
>.<a class="indexterm" name="AUTOID-15314"></A
>
	</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15318"></A
><a class="indexterm" name="AUTOID-15320"></A
><a class="indexterm" name="AUTOID-15322"></A
>	The user <em class="emphasis">exrc</EM
> file, 
        <i class="filename">$HOME/.exrc</I
>.
	On non-UNIX systems, <i class="filename">_exrc</I
> is tried.
	However, in this case, <kbd class="command">vim</KBD
> only looks for
	one or the other, not both.
	</P
></LI
></UL
></LI
><li class="listitem"><p class="para">If the <code class="literal">exrc</CODE
> option has been set, then
<kbd class="command">vim</KBD
> looks in the current directory
for the first file that exists of the following four. 
The others are ignored.</P
><ul class="itemizedlist"><li class="listitem"><p class="para">	<i class="filename">.vimrc</I
>
	</P
></LI
><li class="listitem"><p class="para">	<i class="filename">_vimrc</I
>
	</P
></LI
><li class="listitem"><p class="para">	<i class="filename">.exrc</I
>
	</P
></LI
><li class="listitem"><p class="para">	<i class="filename">_exrc</I
>
	</P
></LI
></UL
><p class="para">On MS-DOS and Win32 systems, the <i class="filename">_xxxrc</I
>
files are looked for before the <i class="filename">.xxxrc</I
> files.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15350"></A
><a class="indexterm" name="AUTOID-15352"></A
>If they have not yet been set,
the <code class="literal">shellpipe</CODE
> and <code class="literal">shellredir</CODE
>
options are initialized based on the value of the
<code class="literal">shell</CODE
> option.
The <code class="literal">shellredir</CODE
> option is discussed
in <a class="xref" href="ch11_09.htm" webstripperlinkwas="ch11_09.htm#VI6-CH-11-SECT-9.1">Section 11.9.1</A
>.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15361"></A
><a class="indexterm" name="AUTOID-15363"></A
>If <code class="literal">-n</CODE
> was given on the command line,
<code class="literal">updatecount</CODE
> is set to zero.
(This option controls how often the swap file is updated.
The more often, the more the swap file is synchronized with all
your changes, but possibly with decreased performance.
Zero means never.)</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15369"></A
>If <code class="literal">-b</CODE
> was supplied, set the appropriate options
for editing binary files.</P
></LI
><li class="listitem"><p class="para">Perform GUI initializations. See the next subsection.</P
></LI
><li class="listitem"><p class="para">If <code class="literal">viminfo</CODE
> is set, read the file indicated there.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15379"></A
>If <code class="literal">-q</CODE
> was supplied, read the named quick fix file.
The quick fix facility is described in
<a class="xref" href="ch11_09.htm" webstripperlinkwas="ch11_09.htm#VI6-CH-11-SECT-9.1">Section 11.9.1</A
>.</P
></LI
><li class="listitem"><p class="para">Open and fill all windows, as per the <code class="literal">-o</CODE
> option.
If <code class="literal">-q</CODE
> was supplied, go to the first error.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-15389"></A
>Jump to the tag given by the <code class="literal">-t</CODE
> option, if supplied.
Execute any commands given with <code class="literal">-c</CODE
>.</P
></LI
></OL
><p class="para">That's a lot of steps. As in other areas,
<kbd class="command">vim</KBD
>'s extra
facilities also provide extra flexibility and customizability.</P
><p class="para">As for <kbd class="command">nvi</KBD
>, you can place
common initialization actions into your <i class="filename">.exrc</I
>
file (i.e., options and commands for UNIX <kbd class="command">vi</KBD
>
and/or the other clones),
and have your <i class="filename">.vimrc</I
> file
execute <code class="literal">:source .exrc</CODE
> before or after the
<kbd class="command">vim</KBD
>-specific initializations.</P
><p class="para"><a class="indexterm" name="AUTOID-15403"></A
>The <i class="filename">viminfo</I
> file is much like the 
<kbd class="command">elvis</KBD
> session
file. It can be used to save a large part of the state of your
editing session in between logins.
The <i class="filename">viminfo</I
> file stores the following items:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">The command-line history</P
></LI
><li class="listitem"><p class="para">The search string history</P
></LI
><li class="listitem"><p class="para">Contents of registers</P
></LI
><li class="listitem"><p class="para">File marks, pointing to locations in files</P
></LI
><li class="listitem"><p class="para">Last search/substitute pattern (for <code class="literal">n</CODE
>
and <code class="literal">&amp;</CODE
>)</P
></LI
></UL
><p class="para"><kbd class="command">vim</KBD
> reads this file at startup, and when exiting,
merges its current state with the contents of the file and then
rewrites it.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-11-SECT-4.2">11.4.2 Initialization for the GUI</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-15426"></A
><a class="indexterm" name="AUTOID-15428"></A
>If running the GUI version of <kbd class="command">vim</KBD
>, usually
<kbd class="command">vim</KBD
> will fork a new process in order to run
in the background, so that you can continue to give commands to the
parent shell. The <code class="literal">-f</CODE
> option disables this behavior.<a class="indexterm" name="AUTOID-15434"></A
></P
><p class="para"><a class="indexterm" name="AUTOID-15437"></A
>If <code class="literal">-U</CODE
> was supplied, <em class="emphasis">vim</EM
> executes the given file and
skips the rest of the GUI startup file based initializations.
Use of <code class="literal">-U NONE</CODE
> causes <kbd class="command">vim</KBD
> to
skip <em class="emphasis">all</EM
> further initializations.</P
><p class="para">Without <code class="literal">-U</CODE
>, <kbd class="command">vim</KBD
> reads the
system-wide <i class="filename">gvimrc</I
> file (typically
<i class="filename">/usr/local/share/vim/ gvimrc</I
>)
and then the user <i class="filename">gvimrc</I
> file,
<i class="filename">$HOME/.gvimrc</I
>.</P
><p class="para">These files can be used to configure the GUI. In particular,
you can set up your own menus at this point.</P
></DIV
><a class="indexterm" name="AUTOID-15452"></A
><a class="indexterm" name="AUTOID-15453"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch11_03.htm" webstripperlinkwas="ch11_03.htm" title="11.3 Online Help and Other Documentation"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 11.3 Online Help and Other Documentation" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch11_05.htm" webstripperlinkwas="ch11_05.htm" title="11.5 Multiwindow Editing"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 11.5 Multiwindow Editing" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">11.3 Online Help and Other Documentation</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">11.5 Multiwindow Editing</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

