<html><head><title>[Chapter 5] 5.5 Editing Multiple Files </TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:56:27Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch05_01.htm" webstripperlinkwas="ch05_01.htm" title="5. Introducing the ex Editor"><link rel="prev" href="ch05_04.htm" webstripperlinkwas="ch05_04.htm" title="5.4 Copying a File into Another File "><link rel="next" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm" title="6. Global Replacement"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch05_04.htm" webstripperlinkwas="ch05_04.htm" title="5.4 Copying a File into Another File "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 5.4 Copying a File into Another File " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch05_01.htm" webstripperlinkwas="ch05_01.htm" title="5. Introducing the ex Editor">Chapter 5<br>Introducing the ex Editor</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm" title="6. Global Replacement"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 6. Global Replacement" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-CH-5-SECT-5">5.5 Editing Multiple Files </A
></H2
><p class="para"><a class="indexterm" name="CH05.MULTIPLE"></A
><a class="indexterm" name="AUTOID-6081"></A
><kbd class="command">ex</KBD
> commands enable you to switch between multiple files.
The advantage to editing multiple files is speed.
If you are sharing the system with
other users, it takes time to exit and reenter <kbd class="command">vi</KBD
> for each
file you want to edit.
Staying in the
same editing session and traveling between files is not only faster
for access, but you also save abbreviations and command sequences
that you have defined (see <a class="xref" href="ch07_01.htm" webstripperlinkwas="ch07_01.htm">Chapter 7, <cite class="CHAPTER">Advanced Editing</CITE
></A
>),
and you keep yank buffers so that you can copy
text from one file to another.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-5.1">5.5.1 Invoking vi on Multiple Files</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-6091"></A
><a class="indexterm" name="AUTOID-6094"></A
><a class="indexterm" name="AUTOID-6097"></A
><a class="indexterm" name="AUTOID-6101"></A
>When you first invoke <kbd class="command">vi</KBD
>, you can name more than one file
to edit, and then use <kbd class="command">ex</KBD
> commands to
travel between the files. For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>vi file1 file2</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">edits <i class="filename">file1</I
> first.
After you have finished editing the first file,
the <kbd class="command">ex</KBD
> command <code class="literal">:w</CODE
> writes (saves) <i class="filename">file1</I
>
and <code class="literal">:n</CODE
> calls in the next file
(<i class="filename">file2</I
>).<a class="indexterm" name="AUTOID-6116"></A
><a class="indexterm" name="AUTOID-6119"></A
></P
><p class="para">Suppose you want to edit two files, <i class="filename">practice</I
>
and <i class="filename">note</I
>.
</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">vi practice note</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0504.gif" webstripperlinkwas="figs/vi.0504.gif" alt="Graphic"><p class="para">Open the two files <i class="filename">practice</I
> and <i class="filename">note</I
>.
The first-named file, <i class="filename">practice</I
>, appears on your screen.
Perform any edits.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:w</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0505.gif" webstripperlinkwas="figs/vi.0505.gif" alt="Graphic"><p class="para">Save the edited file <i class="filename">practice</I
> with the <kbd class="command">ex</KBD
> command <code class="literal">w</CODE
>.
Press <kbd class="keycap">[RETURN]</KBD
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:n</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0506.gif" webstripperlinkwas="figs/vi.0506.gif" alt="Graphic"><p class="para">Call in the next file, <i class="filename">note</I
>, with the <kbd class="command">ex</KBD
> command <code class="literal">n</CODE
>.
Press <kbd class="keycap">[RETURN]</KBD
>. Perform any edits.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:x</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0507.gif" webstripperlinkwas="figs/vi.0507.gif" alt="Graphic"><p class="para">Save the second file, <i class="filename">note</I
>, and quit the editing session.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-5.2">5.5.2 Using the Argument List</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-6172"></A
><kbd class="command">ex</KBD
> actually lets you do more than just
move to the next file in the argument list with <code class="literal">:n</CODE
>.
The <code class="literal">:args</CODE
> command (abbreviated <code class="literal">:ar</CODE
>)
lists the files named on the command line, with the current file enclosed in
brackets.</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">vi practice note</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0508.gif" webstripperlinkwas="figs/vi.0508.gif" alt="Graphic"><p class="para">Open the two files <i class="filename">practice</I
> and <i class="filename">note</I
>.
The first-named file, <i class="filename">practice</I
>, appears on your screen.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:args</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0509.gif" webstripperlinkwas="figs/vi.0509.gif" alt="Graphic"><p class="para"><kbd class="command">vi</KBD
> displays the argument list in the status line,
with brackets around the current filename.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><a class="indexterm" name="AUTOID-6204"></A
><a class="indexterm" name="AUTOID-6206"></A
>The <code class="literal">:rewind</CODE
> (<code class="literal">:rew</CODE
>) command
resets the current file to be the first file named on the command
line. <kbd class="command">elvis</KBD
> and <kbd class="command">vim</KBD
> provide
a corresponding <code class="literal">:last</CODE
> command to move to the last
file on the command line.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-5.3">5.5.3 Calling in New Files </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-6216"></A
><a class="indexterm" name="AUTOID-6220"></A
>You don't have to call in multiple files at the beginning of your
editing session.
You can switch to another file at any time with the
<kbd class="command">ex</KBD
> command <code class="literal">:e</CODE
>.<a class="indexterm" name="AUTOID-6225"></A
>
If you want to edit another file within <kbd class="command">vi</KBD
>, you first
need to save your current file
(<code class="literal">:w</CODE
>), then give the command:</P
><p class="para"><blockquote class="screen"><pre class="screen">:<code class="userinput"><b>e</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Suppose you are editing the file <i class="filename">practice</I
> and want to edit the file
<i class="filename">letter</I
>, then return to <i class="filename">practice</I
>.
</P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:w</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0510.gif" webstripperlinkwas="figs/vi.0510.gif" alt="Graphic"><p class="para">Save <em class="emphasis">practice</EM
> with <code class="literal">w</CODE
>
and press <kbd class="keycap">[RETURN]</KBD
>.
<em class="emphasis">practice</EM
> is saved and remains on the screen.
You can now switch to another file, because your edits are saved.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:e letter</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0511.gif" webstripperlinkwas="figs/vi.0511.gif" alt="Graphic"><p class="para">Call in the file <i class="filename">letter</I
> with
<code class="literal">e</CODE
> and press <kbd class="keycap">[RETURN]</KBD
>.
Perform any edits.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"></P
><p class="para"><kbd class="command">vi</KBD
> &quot;remembers&quot; two filenames at a time as the current and
alternate filenames.<a class="indexterm" name="AUTOID-6267"></A
><a class="indexterm" name="AUTOID-6269"></A
><a class="indexterm" name="AUTOID-6271"></A
><a class="indexterm" name="AUTOID-6274"></A
><a class="indexterm" name="AUTOID-6277"></A
><a class="indexterm" name="AUTOID-6280"></A
><a class="indexterm" name="AUTOID-6283"></A
>
These can be referred to by the symbols <code class="literal">%</CODE
> (current filename)
and <code class="literal">#</CODE
> (alternate filename).
<code class="literal">#</CODE
> is particularly useful with
<code class="literal">:e</CODE
>, since it allows you to
switch easily back and forth between two files.
In the example given just above, you could return to
the first file, <i class="filename">practice</I
>, by typing the command
<code class="literal">:e #</CODE
>.
You could also read the file <i class="filename">practice</I
> into the current file
by typing <code class="literal">:r #</CODE
>.</P
><p class="para">If you have not first saved the current file, <kbd class="command">vi</KBD
> will not allow
you to switch files with <code class="literal">:e</CODE
> or <code class="literal">:n</CODE
> unless you tell it imperatively to
do so by adding an exclamation point after the command.</P
><p class="para">For example, if after making some edits to <i class="filename">letter</I
>,
you wanted to discard the edits and return to <i class="filename">practice</I
>,
you could type <code class="literal">:e! #</CODE
>.<a class="indexterm" name="AUTOID-6302"></A
></P
><p class="para">The following command is also useful.
It discards your edits and returns to the last saved
version of the current file:</P
><blockquote class="screen"><pre class="screen">:e!</PRE
></BLOCKQUOTE
><p class="para">In contrast to the <code class="literal">#</CODE
> symbol,
<code class="literal">%</CODE
> is useful mainly when writing out the
contents of the current buffer to a new file.
For example, a few pages earlier,
in the section &quot;Renaming the Buffer,&quot;
we showed how to save a second
version of the file <i class="filename">practice</I
> with the command:</P
><p class="para"><blockquote class="screen"><pre class="screen">:w practice.new</PRE
></BLOCKQUOTE
></P
><p class="para">Since <code class="literal">%</CODE
> stands for the current filename, that line
could also have been typed:</P
><p class="para"><blockquote class="screen"><pre class="screen">:w %.new</PRE
></BLOCKQUOTE
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-5.4">5.5.4 Switching Files from vi</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-6320"></A
><a class="indexterm" name="AUTOID-6323"></A
><a class="indexterm" name="AUTOID-6325"></A
><a class="indexterm" name="AUTOID-6329"></A
><kbd class="keycap">[ctrl-^]</KBD
>
Since switching back to the previous file is something that
tends to happen a lot, you don't have to move to the <kbd class="command">ex</KBD
>
command line to do it. The <kbd class="command">vi</KBD
> command <code class="literal">^^</CODE
>
(the &quot;control&quot; key with the caret key) will do this for you.
Using this command is the same as typing <code class="literal">:e #</CODE
>.
As with the <code class="literal">:e</CODE
> command, if the current buffer
has not been saved, <kbd class="command">vi</KBD
> will not let you switch
back to the previous file.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-5.5">5.5.5 Edits Between Files </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-6342"></A
><a class="indexterm" name="AUTOID-6346"></A
><a class="indexterm" name="AUTOID-6350"></A
><a class="indexterm" name="AUTOID-6353"></A
><a class="indexterm" name="AUTOID-6356"></A
><a class="indexterm" name="AUTOID-6358"></A
><a class="indexterm" name="AUTOID-6361"></A
>When you give a yank buffer a one-letter name,
you have a convenient way to move text from one file to
another.
Named buffers are not cleared when a new file is loaded into
the <kbd class="command">vi</KBD
> buffer with the <code class="literal">:e</CODE
> command.
Thus, by yanking or deleting text from one file (into multiple named buffers if
necessary), calling in a new file with <code class="literal">:e</CODE
>, and putting the
named buffer(s) into the new file, you can transfer material between files.</P
><p class="para">The following example illustrates how to transfer text from one file to
another.<a class="indexterm" name="AUTOID-6368"></A
><a class="indexterm" name="AUTOID-6371"></A
><a class="indexterm" name="AUTOID-6374"></A
></P
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Keystrokes</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Results</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&quot;f4yy</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0512.gif" webstripperlinkwas="figs/vi.0512.gif" alt="Graphic"><p class="para">Yank four lines into buffer <code class="literal">f</CODE
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:w</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0513.gif" webstripperlinkwas="figs/vi.0513.gif" alt="Graphic"><p class="para">Save the file.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">:e letter</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0514.gif" webstripperlinkwas="figs/vi.0514.gif" alt="Graphic"><p class="para">Enter the file <i class="filename">letter</I
> with <code class="literal">:e</CODE
>.
Move the cursor to where the
copied text will be placed.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal">&quot;fp</CODE
></TD
><td class="entry" rowspan="1" colspan="1"><img class="graphic" src="figs/vi.0515.gif" webstripperlinkwas="figs/vi.0515.gif" alt="Graphic"><p class="para">Place yanked text from named buffer <code class="literal">f</CODE
> below the cursor.</P
></TD
></TR
></TBODY
></TABLE
><p class="para"><a class="indexterm" name="AUTOID-6415"></A
><a class="indexterm" name="AUTOID-6417"></A
>Another way to move text from one file to another is to use the
<kbd class="command">ex</KBD
> commands <code class="literal">:ya</CODE
> (yank) and <code class="literal">:pu</CODE
> (put).
These commands work the same way as the equivalent <kbd class="command">vi</KBD
> commands
<code class="literal">y</CODE
> and <code class="literal">p</CODE
>, but they are used with <kbd class="command">ex</KBD
>'s line-addressing capability and named buffers.</P
><p class="para">For example:</P
><blockquote class="screen"><pre class="screen"><code class="literal">:160,224ya  a</CODE
></PRE
></BLOCKQUOTE
><p class="para">would yank (copy) lines 160 through 224 into buffer <code class="literal">a</CODE
>.
Next you would move with <code class="literal">:e</CODE
> to the file where you want
to put these lines.
Place the cursor on the line where you want to put the yanked lines.
Then type:</P
><blockquote class="screen"><pre class="screen">:pu a</PRE
></BLOCKQUOTE
><p class="para">to put the contents of buffer <code class="literal">a</CODE
> after the current line.</P
></DIV
><a class="indexterm" name="AUTOID-6435"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch05_04.htm" webstripperlinkwas="ch05_04.htm" title="5.4 Copying a File into Another File "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 5.4 Copying a File into Another File " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm" title="6. Global Replacement"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 6. Global Replacement" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">5.4 Copying a File into Another File </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">6. Global Replacement</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

