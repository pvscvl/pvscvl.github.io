<html><head><title>[Appendix D] D.2 Problems Saving Files </TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:59:52Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appd_01.htm" webstripperlinkwas="appd_01.htm" title="D. Problem Checklists"><link rel="prev" href="appd_01.htm" webstripperlinkwas="appd_01.htm" title="D.1 Problems Opening Files "><link rel="next" href="appd_03.htm" webstripperlinkwas="appd_03.htm" title="D.3 Problems Getting to Visual Mode "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appd_01.htm" webstripperlinkwas="appd_01.htm" title="D.1 Problems Opening Files "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: D.1 Problems Opening Files " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="appendix" rel="up" href="appd_01.htm" webstripperlinkwas="appd_01.htm" title="D. Problem Checklists">Appendix D<br>Problem Checklists</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appd_03.htm" webstripperlinkwas="appd_03.htm" title="D.3 Problems Getting to Visual Mode "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: D.3 Problems Getting to Visual Mode " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="VI6-AP-D-SECT-2">D.2 Problems Saving Files </A
></H2
><ul class="itemizedlist"><li class="listitem"><p class="para"><em class="emphasis">You try to write your file, but you get one of the following messages:</EM
></P
><p class="para"><blockquote class="screen"><pre class="screen">File exists
File <code class="replaceable"><i>file</I
></CODE
> exists - use w!
[Existing file]
File is read only</PRE
></BLOCKQUOTE
></P
><p class="para">Type <code class="literal">:w!</CODE
> <code class="replaceable"><i>file</I
></CODE
> to overwrite the existing file, or type
<code class="literal">:w</CODE
> <code class="replaceable"><i>newfile</I
></CODE
> to save the edited version in a new file.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">You want to write a file, but you don't have write permission for
it.  You get the message &quot;Permission denied.&quot;</EM
></P
><p class="para">Use <code class="literal">:w</CODE
> <code class="replaceable"><i>newfile</I
></CODE
> to write out the buffer into a new file.
If you have write permission for the directory, you can use
<code class="literal">mv</CODE
> to replace the original version with your copy of it.
If you don't have write permission for the directory,
type <code class="literal">:w</CODE
> <code class="replaceable"><i>pathname/file</I
></CODE
> to
write out the buffer to a directory in which you do have write
permission (such as your home directory, or <i class="filename">/tmp</I
>).</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">You try to write your file, but you get a message telling you that
the file system is full.</EM
></P
><p class="para">Type <code class="literal">:!rm</CODE
> <code class="replaceable"><i>junkfile</I
></CODE
> to delete
a (large) unneeded file and
free some space.
(Starting an <kbd class="command">ex</KBD
> command with an exclamation point gives you
access to UNIX.)</P
><p class="para">Or type <code class="literal">:!df</CODE
> to see whether there's any space on another file system.
If there is, choose a directory on that file system and write your
file to it with <code class="literal">:w</CODE
> <code class="replaceable"><i>pathname</I
></CODE
>.
(<code class="literal">df</CODE
> is the UNIX command to check a
<em class="emphasis">d</EM
>isk's
<em class="emphasis">f</EM
>ree space.)</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">The system puts you into open mode and tells you that the
file system is full.</EM
></P
><p class="para">The disk with <kbd class="command">vi</KBD
>'s
temporary files is filled up. Type <code class="literal">:!ls&nbsp;/tmp</CODE
>
to see whether there are any files you can remove to
gain some disk space.[<a class="footnote" href="#AUTOID-24487">1</A
>]
If there are, create a temporary UNIX shell from which you can remove files or issue
other UNIX commands.
You can create a shell by typing <code class="literal">:sh</CODE
>;
type
<kbd class="keycap">[CTRL-D]</KBD
>
or <code class="literal">exit</CODE
> to terminate the shell and return to <kbd class="command">vi</KBD
>.  (On
most UNIX systems, when using a job-control shell, you can simply type
<kbd class="keycap">[CTRL-Z]</KBD
>
to suspend <kbd class="command">vi</KBD
> and return to the UNIX prompt;
type <code class="literal">fg</CODE
> to return to
<kbd class="command">vi</KBD
>.)
Once you've freed up some space, write your file with <code class="literal">:w!</CODE
>.</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-24487">[1]</A
> Your <kbd class="command">vi</KBD
> may keep its temporary files in <i class="filename">/usr/tmp</I
>,
<i class="filename">/var/tmp</I
>, or your current directory; you may need to poke around
a bit to figure out where exactly you've run out of room.</P
></DIV
></BLOCKQUOTE
></LI
><li class="listitem"><p class="para"><em class="emphasis">You try to write your file, but you get a message telling you that your
disk quota has been reached.</EM
></P
><p class="para">Try to force the system to save your buffer with the <kbd class="command">ex</KBD
> command
<code class="literal">:pre</CODE
> (short for <code class="literal">:preserve</CODE
>).
If that doesn't work, look for some files to remove.
Use <code class="literal">:sh</CODE
> (or
<kbd class="keycap">[CTRL-Z]</KBD
>
if you are using a job-control system) to move out of <kbd class="command">vi</KBD
> and remove
files.
Use
<kbd class="keycap">[CTRL-D]</KBD
>
(or <code class="literal">fg</CODE
>) to return to <kbd class="command">vi</KBD
> when you're done.
Then write your file with <code class="literal">:w!</CODE
>.</P
></LI
></UL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appd_01.htm" webstripperlinkwas="appd_01.htm" title="D.1 Problems Opening Files "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: D.1 Problems Opening Files " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appd_03.htm" webstripperlinkwas="appd_03.htm" title="D.3 Problems Getting to Visual Mode "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: D.3 Problems Getting to Visual Mode " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">D.1 Problems Opening Files </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">D.3 Problems Getting to Visual Mode </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

