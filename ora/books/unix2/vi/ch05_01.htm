<html><head><title>[Chapter 5] Introducing the ex Editor</TITLE
><meta name="DC.Creator" content="Linda Lamb &amp; Arnold Robbins"><meta name="DC.Date" content="1999-11-23T17:56:19Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly Unix CDROM-unknown"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="unknown" scheme="ISBN"><meta name="DC.Subject.Keyword" content="Unix, vi, text, editor, tool"><meta name="DC.Title" content="Learning the vi Editor"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part01.htm" webstripperlinkwas="part01.htm" title="I. Basic and Advanced vi"><link rel="prev" href="ch04_06.htm" webstripperlinkwas="ch04_06.htm" title="4.6 Review of vi Buffer and Marking Commands"><link rel="next" href="ch05_02.htm" webstripperlinkwas="ch05_02.htm" title="5.2 Editing with ex "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the vi Editor" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_06.htm" webstripperlinkwas="ch04_06.htm" title="4.6 Review of vi Buffer and Marking Commands"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 4.6 Review of vi Buffer and Marking Commands" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 5</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch05_02.htm" webstripperlinkwas="ch05_02.htm" title="5.2 Editing with ex "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 5.2 Editing with ex " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="VI6-CH-5">5. Introducing the ex Editor</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="SECT1" href="#VI6-CH-5-SECT-1" title="5.1 ex Commands ">ex Commands </A
><br><a class="SECT1" href="ch05_02.htm" webstripperlinkwas="ch05_02.htm" title="5.2 Editing with ex ">Editing with ex </A
><br><a class="SECT1" href="ch05_03.htm" webstripperlinkwas="ch05_03.htm" title="5.3 Saving and Exiting Files ">Saving and Exiting Files </A
><br><a class="SECT1" href="ch05_04.htm" webstripperlinkwas="ch05_04.htm" title="5.4 Copying a File into Another File ">Copying a File into Another File </A
><br><a class="SECT1" href="ch05_05.htm" webstripperlinkwas="ch05_05.htm" title="5.5 Editing Multiple Files ">Editing Multiple Files </A
></P
><p></P
></DIV
><p class="para"><a class="indexterm" name="CH05.EX"></A
>If this is a handbook on <kbd class="command">vi</KBD
>, why would we include a
chapter on another editor? <kbd class="command">ex</KBD
> is not really another editor.
<kbd class="command">vi</KBD
> is the visual mode of the more general, underlying line
editor, <kbd class="command">ex</KBD
>. Some <kbd class="command">ex</KBD
> commands can
be useful to you while you are working in <kbd class="command">vi</KBD
>, since
they can save you a lot of editing time. Most of these
commands can be used without ever leaving
<kbd class="command">vi</KBD
>.[<a class="footnote" href="#AUTOID-5047">1</A
>]</P
><blockquote class="footnote"><div class="footnote"><p class="para"><a class="footnote" name="AUTOID-5047">[1]</A
> <kbd class="command">vile</KBD
> is
different from the other clones.
Many of the more advanced <kbd class="command">ex</KBD
> commands
simply don't work.
Instead of noting each one, more details are provided in
<a class="xref" href="ch12_01.htm" webstripperlinkwas="ch12_01.htm">Chapter 12, <cite class="CHAPTER">vile&nbsp;-- vi Like Emacs</CITE
></A
>.</P
></DIV
></BLOCKQUOTE
><p class="para">You already know how to think of files as a sequence of numbered lines.
<kbd class="command">ex</KBD
> gives you editing commands with greater mobility and scope.
With <kbd class="command">ex</KBD
> you can move easily between files and
transfer text from one file to another in a variety of ways.
You can quickly edit blocks of text larger than a single screen.
And with global replacement
you can make substitutions throughout a file for a given pattern.</P
><p class="para">This chapter introduces <kbd class="command">ex</KBD
> and its commands.
You will learn how to:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Move around a file by using line numbers</P
></LI
><li class="listitem"><p class="para">Use <kbd class="command">ex</KBD
> commands to copy, move, and delete blocks of text</P
></LI
><li class="listitem"><p class="para">Save files and parts of files</P
></LI
><li class="listitem"><p class="para">Work with multiple files (reading in text or commands,
traveling between files)</P
></LI
></UL
><div class="sect1"><h2 class="sect1"><a class="title" name="VI6-CH-5-SECT-1">5.1 ex Commands </A
></H2
><p class="para"><a class="indexterm" name="CH05.EXCOMMAND"></A
>Long before <kbd class="command">vi</KBD
> or any other screen editor was invented,
people communicated with computers on printing terminals, rather than on
today's CRTs (or bitmapped screens with pointing devices and
terminal emulation programs).
Line numbers were a way to quickly identify a part of a file to be worked on,
and line editors evolved to edit those files.
A programmer or other computer user would typically print out a line
(or lines) on the printing terminal, give the editing commands to
change just that line, then reprint to check the edited line.</P
><p class="para">People don't edit files on printing terminals any more, but some
<kbd class="command">ex</KBD
> line editor commands are still useful to
users of the more sophisticated visual editor built on top of <kbd class="command">ex</KBD
>.
Although it is simpler to make most edits with <kbd class="command">vi</KBD
>,
the line orientation of <kbd class="command">ex</KBD
> gives it an advantage when you want
to make large-scale changes to more than one part of a file.</P
><blockquote class="note"><p class="para"><strong>NOTE:</STRONG
> <a class="indexterm" name="AUTOID-5080"></A
><a class="indexterm" name="AUTOID-5083"></A
>Many of the commands we'll see in this chapter have
filename arguments. Although it's possible, it is
usually a very bad idea to have spaces in your files' names.
<kbd class="command">ex</KBD
> will be confused to no end, and you will
go to more trouble than it's worth trying to get the
filenames to be accepted. Use underscores, dashes, or periods to
separate the components of your file names, and you'll
be much happier.</P
></BLOCKQUOTE
><p class="para">Before you start off simply memorizing <kbd class="command">ex</KBD
> commands (or worse,
ignoring them), let's first take some of the mystery out of line editors.
Seeing how <kbd class="command">ex</KBD
> works when it is invoked directly will
help make sense of the sometimes obscure command syntax.</P
><p class="para">Open a file that is familiar to you and try a few <kbd class="command">ex</KBD
>
commands.
Just as you can invoke the <kbd class="command">vi</KBD
> editor on a file, you can
invoke the <kbd class="command">ex</KBD
> line editor on a file.
If you invoke <kbd class="command">ex</KBD
>,
you will see a message about the total number of lines in the file,
and a colon command prompt.</P
><p class="para">For example:</P
><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>ex practice</B
></CODE
>
&quot;practice&quot; 6 lines, 320 characters
:</PRE
></BLOCKQUOTE
><p class="para">You won't see any lines in the file unless you give an <kbd class="command">ex</KBD
>
command that causes one or more lines to be displayed.</P
><p class="para"><a class="indexterm" name="AUTOID-5101"></A
><a class="indexterm" name="AUTOID-5103"></A
><a class="indexterm" name="AUTOID-5106"></A
><a class="indexterm" name="AUTOID-5109"></A
><a class="indexterm" name="AUTOID-5112"></A
><kbd class="command">ex</KBD
> commands consist of a line address (which can simply be a
line number) plus a command;  they are finished with a carriage return.
One of the most basic commands is <code class="literal">p</CODE
> for print (to the screen).
So, for example, if you type <code class="literal">1p</CODE
> at the prompt, you will see
the first line of the file:</P
><p class="para"><blockquote class="screen"><pre class="screen">  :<code class="userinput"><b>1p</B
></CODE
>
  With a screen editor you can
  :</PRE
></BLOCKQUOTE
></P
><p class="para">In fact, you can leave off the <code class="literal">p</CODE
>, because a line
number by itself is equivalent to a print command for that line.
To print more than one line, you can specify a range of line numbers<a class="indexterm" name="AUTOID-5123"></A
><a class="indexterm" name="AUTOID-5126"></A
>
(for example, <code class="literal">1,3</CODE
>&nbsp;-- two numbers separated by a comma, 
with or
without spaces in between).
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">  :<code class="userinput"><b>1,3</B
></CODE
>
  With a screen editor you can
  scroll the page, move the cursor,
  delete lines, insert characters, and more,</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-5134"></A
><a class="indexterm" name="AUTOID-5136"></A
>A command without a line number is assumed to affect the current line.
So, for example, the substitute command (<code class="literal">s</CODE
>),
which allows you to substitute
one word for another, could be entered like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">  :<code class="userinput"><b>1</B
></CODE
>
  With a screen editor you can
  :<code class="userinput"><b>s/screen/line/</B
></CODE
>
  With a line editor you can</PRE
></BLOCKQUOTE
></P
><p class="para"> 
 
Notice that the changed line is reprinted after the command is issued.
You could also make the same change like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">  :<code class="userinput"><b>1s/screen/line/</B
></CODE
>
  With a line editor you can</PRE
></BLOCKQUOTE
></P
><p class="para">Even though you will be invoking <kbd class="command">ex</KBD
> commands from <kbd class="command">vi</KBD
> and
will not be using them directly, it is worthwhile to spend a few
minutes in <kbd class="command">ex</KBD
> itself.
You will get a feel for how you need to tell the editor which line
(or lines) to work on, as well as which command to execute.</P
><p class="para">After you have given a few <kbd class="command">ex</KBD
> commands on your
<i class="filename">practice</I
> file, you should invoke <kbd class="command">vi</KBD
> on that same file,
so that you can see it in the more familiar visual mode.
The command <code class="literal">:vi</CODE
> will get you from <kbd class="command">ex</KBD
> to <kbd class="command">vi</KBD
>.</P
><p class="para"><a class="indexterm" name="AUTOID-5159"></A
><a class="indexterm" name="AUTOID-5162"></A
>To invoke an <kbd class="command">ex</KBD
> command from <kbd class="command">vi</KBD
>,
you must type the special
bottom line character <code class="literal">:</CODE
> (colon).
Then type the command and press
<kbd class="keycap">[RETURN]</KBD
> 
to execute it.
So, for example, in the <kbd class="command">ex</KBD
> editor you move to a line simply by
typing the number of the line at the colon prompt.
To move to line 6 of a file using this command from within <kbd class="command">vi</KBD
>, enter:</P
><p class="para"><blockquote class="screen"><pre class="screen">:<code class="userinput"><b>6</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Press
<kbd class="keycap">[RETURN]</KBD
>.</P
><p class="para">Following the exercise, we will discuss <kbd class="command">ex</KBD
> commands only
as they are executed from <kbd class="command">vi</KBD
>.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-1.1">5.1.1 Exercise: The ex Editor </A
></H3
><p class="para"></P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">At the UNIX prompt, invoke <kbd class="command">ex</KBD
> editor on a file called <i class="filename">practice</I
>:</P
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">ex practice</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">A message appears:</P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal">&quot;practice&quot; 6 lines, 320 characters</CODE
></P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Go to and print (display) first line:</P
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">:1</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Print (display) lines 1 through 3:</P
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">:1,3</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Substitute screen for line on line 1:</P
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">:1s/screen/line</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Invoke <kbd class="command">vi</KBD
> editor on file:</P
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">:vi</CODE
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para">Go to first line:</P
></TD
><td class="entry" rowspan="1" colspan="1"><code class="literal">:1</CODE
></TD
></TR
></TBODY
></TABLE
><p class="para"></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="VI6-CH-5-SECT-1.2">5.1.2 Problem Checklist </A
></H3
><ul class="itemizedlist"><li class="listitem"><p class="para"><em class="emphasis">While editing in</EM
> vi<em class="emphasis">,
you accidentally end up in the</EM
> ex <em class="emphasis">editor.</EM
></P
><p class="para"><a class="indexterm" name="AUTOID-5235"></A
><a class="indexterm" name="AUTOID-5237"></A
><a class="indexterm" name="AUTOID-5239"></A
>A <code class="literal">Q</CODE
> in the command mode of <kbd class="command">vi</KBD
> invokes <kbd class="command">ex</KBD
>.
Any time you are in <kbd class="command">ex</KBD
>, the command <code class="literal">vi</CODE
> returns you to
the <kbd class="command">vi</KBD
> editor.</P
></LI
></UL
></DIV
><a class="indexterm" name="AUTOID-5247"></A
></DIV
><a class="indexterm" name="AUTOID-6436"></A
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_06.htm" webstripperlinkwas="ch04_06.htm" title="4.6 Review of vi Buffer and Marking Commands"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 4.6 Review of vi Buffer and Marking Commands" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" title="Learning the vi Editor"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the vi Editor" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch05_02.htm" webstripperlinkwas="ch05_02.htm" title="5.2 Editing with ex "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 5.2 Editing with ex " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">4.6 Review of vi Buffer and Marking Commands</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">5.2 Editing with ex </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>

