<html><head><title>[Chapter 18] 18.3 Basic Operation</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:35:57Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch18_01.htm" webstripperlinkwas="ch18_01.htm" title="18. The Source Code Control System"><link rel="prev" href="ch18_02.htm" webstripperlinkwas="ch18_02.htm" title="18.2 Overview of Commands"><link rel="next" href="ch18_04.htm" webstripperlinkwas="ch18_04.htm" title="18.4 Identification Keywords"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch18_02.htm" webstripperlinkwas="ch18_02.htm" title="18.2 Overview of Commands"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 18.2 Overview of Commands" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch18_01.htm" webstripperlinkwas="ch18_01.htm" title="18. The Source Code Control System">Chapter 18<br>The Source Code Control System</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch18_04.htm" webstripperlinkwas="ch18_04.htm" title="18.4 Identification Keywords"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 18.4 Identification Keywords" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UNUT-CH-18-SECT-2">18.3 Basic Operation</A
></H2
><p class="para">This section outlines the steps to follow when using SCCS:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Creating an SCCS file</P
></LI
><li class="listitem"><p class="para">Retrieving a file</P
></LI
><li class="listitem"><p class="para">Creating new releases and branches</P
></LI
><li class="listitem"><p class="para">Recording changes</P
></LI
><li class="listitem"><p class="para">Caveats</P
></LI
></UL
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-18-SECT-2.1">18.3.1 Creating an SCCS File</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-55052"></A
>The <kbd class="command">admin</KBD
> command with the <code class="option">-i</CODE
> option  creates and initializes SCCS files. For example:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>admin -ich01 s.ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">creates a new SCCS file and initializes it with the contents of <i class="filename">ch01</I
>, which becomes <em class="emphasis">delta 1.1</EM
>. The message &quot;No id keywords (cm7)&quot; appears if you do not specify any keywords.   In general, &quot;id keywords&quot; refer to variables in the files that are replaced with appropriate values by <kbd class="command">get</KBD
>, identifying the date and time of creation, the version retrieved,  etc.  A listing of identification keywords occurs later in this chapter.</P
><p class="para">Once the <i class="filename">s.ch01</I
> file is created, the original <i class="filename">ch01</I
> file can be removed, since it can be easily regenerated with the <kbd class="command">get</KBD
>  command.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-18-SECT-2.2">18.3.2 Retrieving a File</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-55070"></A
><a class="indexterm" name="AUTOID-55073"></A
><a class="indexterm" name="AUTOID-55075"></A
>The <kbd class="command">get</KBD
> command can retrieve any version of  a file from SCCS.  Using the example above, you can retrieve <i class="filename">ch01</I
> by entering:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>get -e s.ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">and the messages: </P
><p class="para"><blockquote class="screen"><pre class="screen">1.1
new delta 1.2
272 lines</PRE
></BLOCKQUOTE
></P
><p class="para">may appear.  This indicates that you are &quot;getting&quot; <em class="emphasis">delta 1.1</EM
>, and the resulting file has 272 lines of text.  When the file is<a class="indexterm" name="AUTOID-55087"></A
><a class="indexterm" name="AUTOID-55090"></A
><a class="indexterm" name="AUTOID-55092"></A
> reentered into the SCCS file <i class="filename">s.ch01</I
> with the <code class="literal"><b>delta</B
></CODE
> command, its changes are <em class="emphasis">delta 1.2</EM
>.</P
><p class="para">The <code class="option">-e</CODE
> option indicates to SCCS that you intend to make  more changes to the file and then reenter it into SCCS.   Without this option, you will receive the file with read-only permissions. The <code class="option">-e</CODE
> option, besides releasing the file with read-write  permissions, also creates a file <i class="filename">p.ch01</I
>, which records  information that is used by SCCS when the file is  returned.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-18-SECT-2.3">18.3.3 Creating New Releases and Branches</A
></H3
><p class="para">The <code class="option">-r</CODE
> option to <kbd class="command">get</KBD
> tells SCCS what release and level number you want, but if no level is specified, it defaults to the highest level available. With the command:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>get -r3.2 ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">delta 3.2 is the release.  However, the command:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>get -r3 ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">returns the highest-numbered level in release 3, for example, <code class="literal"><b>3.8</B
></CODE
>.  With the <code class="option">-r</CODE
> option omitted, <kbd class="command">get</KBD
> defaults to the highest release, highest level&nbsp;-- in other words, the latest version.</P
><p class="para">When major changes are in store for a file, you may want to begin a new release of the file by &quot;getting&quot; the file with the next highest release number.  For example, if the latest release of a file is 3.2, and you want to start release 4, enter:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>get -e -r4 ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">You receive the message:</P
><p class="para"><blockquote class="screen"><pre class="screen">3.2
new delta 4.1
53 lines</PRE
></BLOCKQUOTE
></P
><p class="para">If you want to make a change to an older version of the same file, you can enter:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>get -e -r2.2 ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">and receive the message:</P
><p class="para"><blockquote class="screen"><pre class="screen">2.2
new delta 2.2.1.1
121 lines</PRE
></BLOCKQUOTE
></P
><p class="para">You have now created a new branch from the trunk, stemming from version 2.2.  Changes in this delta will not affect those in the trunk deltas, i.e., 2.3, 3.1, etc.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-18-SECT-2.4">18.3.4 Recording Changes</A
></H3
><p class="para">Once changes have been made to the SCCS file, return it to SCCS with:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>delta s.ch01</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">You are prompted for comments on the changes.  The <kbd class="command">delta</KBD
><a class="indexterm" name="AUTOID-55140"></A
> command then does its own <kbd class="command">get</KBD
> and uses <kbd class="command">diff</KBD
> to compare  the new version of the file with the most recent version. It then prints messages giving the new release number and the number of lines that were inserted, deleted, and unchanged.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-18-SECT-2.5">18.3.5 Caveats</A
></H3
><p class="para">Here are some things to bear in mind when using SCCS:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">You can't store binary data in an SCCS file. Solaris SCCS allows it by encoding the file using <kbd class="command">uuencode</KBD
>.</P
></LI
><li class="listitem"><p class="para">SCCS doesn't preserve the execute bit from the file permissions of files checked into it. This is important particularly for shell scripts: you have to explicitly make them executable after retrieving them from SCCS. This should be automated using <kbd class="command">make</KBD
>.</P
></LI
><li class="listitem"><p class="para">Using ID keywords (see the next section) in your <em class="emphasis">printf</EM
>(3S) format strings can lead to disaster.  Find some indirect way to generate these strings for printing.</P
></LI
></UL
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch18_02.htm" webstripperlinkwas="ch18_02.htm" title="18.2 Overview of Commands"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 18.2 Overview of Commands" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch18_04.htm" webstripperlinkwas="ch18_04.htm" title="18.4 Identification Keywords"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 18.4 Identification Keywords" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">18.2 Overview of Commands</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">18.4 Identification Keywords</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


