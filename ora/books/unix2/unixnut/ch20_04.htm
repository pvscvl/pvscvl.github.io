<html><head><title>[Chapter 20] 20.4 Macros</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:36:56Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch20_01.htm" webstripperlinkwas="ch20_01.htm" title="20. The make Utility"><link rel="prev" href="ch20_03.htm" webstripperlinkwas="ch20_03.htm" title="20.3 Description File Lines"><link rel="next" href="ch20_05.htm" webstripperlinkwas="ch20_05.htm" title="20.5 Special Target Names"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch20_03.htm" webstripperlinkwas="ch20_03.htm" title="20.3 Description File Lines"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 20.3 Description File Lines" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch20_01.htm" webstripperlinkwas="ch20_01.htm" title="20. The make Utility">Chapter 20<br>The make Utility</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch20_05.htm" webstripperlinkwas="ch20_05.htm" title="20.5 Special Target Names"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 20.5 Special Target Names" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UNUT-CH-20-SECT-4">20.4 Macros</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-58791"></A
><a class="indexterm" name="UNUT-CH-20-IX-MACROS-FOR-MAKE-UTILITY"></A
>This section summarizes internal macros, modifiers,  string substitution, and special macros.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-20-SECT-4.1">20.4.1 Internal Macros</A
></H3
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>$?</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The list of prerequisites that have been changed more recently than the  current target.  Can be used only in normal description file  entries&nbsp;-- not suffix rules.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>$@</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The name of the current target, except in description file entries  for making libraries, where it becomes the library name.  Can be used both in normal description file entries and in suffix rules.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>$$@</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The name of the current target.  Can be used only to the right of the  colon in dependency lines. (May not work on all versions of <kbd class="command">make</KBD
>.)</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>$&lt;</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The name of the current prerequisite that has been modified more recently than the current target.   Can be used only in suffix rules and in the <code class="literal"><b>.DEFAULT:</B
></CODE
>  entry.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>$*</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The name&nbsp;-- without the suffix&nbsp;-- of the current prerequisite that has been modified more recently than the current target.  Can be used only in suffix rules.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>$%</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">The name of the corresponding <code class="literal"><b>.o</B
></CODE
> file when the current target is a  library module.  Can be used both in normal description file entries and in suffix rules.</P
></TD
></TR
></TBODY
></TABLE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-20-SECT-4.2">20.4.2 Macro Modifiers</A
></H3
><p class="para">Macro modifiers are not available in all variants of <kbd class="command">make</KBD
>.</P
><dl class="variablelist"><dt class="term"><code class="literal"><b>D</B
></CODE
></DT
><dd class="listitem"><p class="para">The directory portion of any internal macro name except <code class="literal"><b>$?</B
></CODE
>.   Valid uses are:   <blockquote class="screen"><pre class="screen">$(*D)   $$(@D)
$(&lt;D)   $(%D)
$(@D)</PRE
></BLOCKQUOTE
></P
></DD
><dt class="term"><code class="literal"><b>F</B
></CODE
></DT
><dd class="listitem"><p class="para">The file portion of any internal macro name except <code class="literal"><b>$?</B
></CODE
>. Valid uses are:  <blockquote class="screen"><pre class="screen">$(*F)   $$(@F)
$(&lt;F)   $(%F)
$(@F)</PRE
></BLOCKQUOTE
></P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-20-SECT-4.3">20.4.3 Macro String Substitution</A
></H3
><p class="para">String substitution is not available in all variants of <kbd class="command">make</KBD
>.</P
><dl class="variablelist"><dt class="term"><code class="literal"><b>$(</B
></CODE
><i class="replaceable">macro</I
><code class="literal"><b>:</B
></CODE
><i class="replaceable">s1</I
><code class="literal"><b>=</B
></CODE
><i class="replaceable">s2</I
><code class="literal"><b>)</B
></CODE
></DT
><dd class="listitem"><p class="para">Evaluates to the current definition of <code class="literal"><b>$(</B
></CODE
><em class="emphasis">macro</EM
><code class="literal"><b>)</B
></CODE
>, after substituting the string <em class="emphasis">s2</EM
> for every occurrence of <em class="emphasis">s1</EM
> that occurs either immediately before a blank or tab, or at the end of the macro definition.</P
></DD
></DL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-20-SECT-4.4">20.4.4 Macros with Special Handling</A
></H3
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>MAKEFLAGS</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Contains the flags inherited in the environment variable<a class="indexterm" name="AUTOID-58889"></A
> <i class="envar">MAKEFLAGS</I
>, plus any command-line options. Used to pass the flags to subsequent invocations of <kbd class="command">make</KBD
>, usually via command lines in a <i class="filename">makefile</I
> that contain <code class="literal"><b>$(MAKE)</B
></CODE
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>SHELL</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Sets the shell that interprets commands.<a class="indexterm" name="AUTOID-58900"></A
> If this macro isn't defined in the description file, the value depends on your system. Some Unix implementations use the shell from the user's environment (as with other macros).  Other implementations (including SVR4) set the default  <code class="literal"><b>SHELL</B
></CODE
> to <i class="filename">/bin/sh</I
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>VPATH</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">(Not available in all variants of <kbd class="command">make</KBD
>.)<a class="indexterm" name="AUTOID-58910"></A
> Specifies a list of directories to search for prerequisites when not found in the current directory.</P
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch20_03.htm" webstripperlinkwas="ch20_03.htm" title="20.3 Description File Lines"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 20.3 Description File Lines" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch20_05.htm" webstripperlinkwas="ch20_05.htm" title="20.5 Special Target Names"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 20.5 Special Target Names" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">20.3 Description File Lines</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">20.5 Special Target Names</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


