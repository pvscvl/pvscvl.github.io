<html><head><title>[Chapter 4] 4.5 Command History</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:23:37Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm" title="4. The Bourne Shell and Korn Shell"><link rel="prev" href="ch04_04.htm" webstripperlinkwas="ch04_04.htm" title="4.4 Arithmetic Expressions"><link rel="next" href="ch04_06.htm" webstripperlinkwas="ch04_06.htm" title="4.6 Job Control"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_04.htm" webstripperlinkwas="ch04_04.htm" title="4.4 Arithmetic Expressions"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 4.4 Arithmetic Expressions" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm" title="4. The Bourne Shell and Korn Shell">Chapter 4<br>The Bourne Shell and Korn Shell</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_06.htm" webstripperlinkwas="ch04_06.htm" title="4.6 Job Control"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 4.6 Job Control" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UNUT-CH-4-SECT-5">4.5 Command History</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-25570"></A
><a class="indexterm" name="AUTOID-25573"></A
><a class="indexterm" name="AUTOID-25576"></A
>The Korn shell lets you display or modify previous commands. Commands in the history list can be modified using:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Line-edit mode</P
></LI
><li class="listitem"><p class="para">The <kbd class="command">fc</KBD
> and <kbd class="command">hist</KBD
> commands</P
></LI
></UL
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-4-SECT-5.1">4.5.1 Line-Edit Mode</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-25589"></A
>Line-edit mode emulates many features of the <kbd class="command">vi</KBD
> and <kbd class="command">emacs</KBD
> editors. The history list is treated like a file.  When the editor is invoked, you type editing keystrokes to move to the command line you want to execute.  You can also change the line before executing it.  When you're ready to issue the command, press the Return key.</P
><p class="para">Line-edit mode can be started in several ways.  For example, these are equivalent:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>VISUAL=vi</B
></CODE
>
$ <code class="userinput"><b>EDITOR=vi</B
></CODE
>
$ <code class="userinput"><b>set -o vi</B
></CODE
>	<i class="lineannotation">Overrides value of VISUAL or EDITOR</I
></PRE
></BLOCKQUOTE
></P
><p class="para">Note that <kbd class="command">vi</KBD
> starts in input mode; to type a <kbd class="command">vi</KBD
> command, press the Escape key first.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="UNUT-CH-4-SECT-5.1.1">4.5.1.1 Common editing keystrokes</A
></H4
><table class="informaltable" border="1" cellpadding="3"><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1"><p class="para"><em class="emphasis">vi</EM
></P
></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"><p class="para"><em class="emphasis">emacs</EM
></P
></TH
><th class="entry" align="LEFT" rowspan="1" colspan="1"><p class="para"><em class="emphasis">Result</EM
></P
></TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>k</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-p</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Get previous command.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>j</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-n</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Get next command.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>/</B
></CODE
><i class="replaceable">string</I
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-r</B
></CODE
> <i class="replaceable">string</I
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Get previous command containing <em class="emphasis">string</EM
>.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>h</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-b</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Move back one character.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>l</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-f</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Move forward one character.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>b</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>ESC-b</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Move back one word.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>w</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>ESC-f</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Move forward one word.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>X</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>DEL</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Delete previous character.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>x</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-d</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Delete character under cursor.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>dw</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>ESC-d</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Delete word forward.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>db</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>ESC-h</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Delete word backward.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>xp</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para"><code class="literal"><b>CTRL-t</B
></CODE
></P
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Transpose two characters.</P
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-4-SECT-5.2">4.5.2 The fc and hist Commands</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-25736"></A
>Use <code class="literal"><b>fc -l</B
></CODE
> to list history commands and <code class="literal"><b>fc -e</B
></CODE
> to edit them.   See the entry under &quot;Built-in Commands&quot; for more information.</P
><p class="para">In <kbd class="command">ksh93</KBD
>, the <kbd class="command">fc</KBD
> command has been renamed <kbd class="command">hist</KBD
>, and <code class="literal"><b>alias fc=hist</B
></CODE
> is predefined.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="UNUT-CH-4-SECT-5.2.1">4.5.2.1 Examples</A
></H4
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>history</B
></CODE
>		<i class="lineannotation">List the last 16 commands</I
>	
$ <code class="userinput"><b>fc -l 20 30</B
></CODE
>	<i class="lineannotation">List commands 20 through 30</I
>
$ <code class="userinput"><b>fc -l -5</B
></CODE
>	<i class="lineannotation">List the last five commands</I
>
$ <code class="userinput"><b>fc -l cat</B
></CODE
>	<i class="lineannotation">List the last command beginning with cat</I
>
$ <code class="userinput"><b>fc -ln 5 &gt; doit</B
></CODE
>	<i class="lineannotation">Save command 5 to file doit.</I
>	
$ <code class="userinput"><b>fc -e vi 5 20</B
></CODE
>	<i class="lineannotation">Edit commands 5 through 20 using vi</I
>
$ <code class="userinput"><b>fc -e emacs</B
></CODE
>	<i class="lineannotation">Edit previous command using emacs</I
>
$ <code class="userinput"><b>r</B
></CODE
>		<i class="lineannotation">Reexecute previous command</I
>
$ <code class="userinput"><b>r cat</B
></CODE
>		<i class="lineannotation">Reexecute last cat command</I
>
$ <code class="userinput"><b>r doc=Doc</B
></CODE
>	<i class="lineannotation">Substitute, then reexecute last command</I
>
$ <code class="userinput"><b>r chap=doc c</B
></CODE
>	<i class="lineannotation">Reexecute last command that begins with c, but change string chap to doc</I
></PRE
></BLOCKQUOTE
></P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch04_04.htm" webstripperlinkwas="ch04_04.htm" title="4.4 Arithmetic Expressions"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 4.4 Arithmetic Expressions" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch04_06.htm" webstripperlinkwas="ch04_06.htm" title="4.6 Job Control"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 4.6 Job Control" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">4.4 Arithmetic Expressions</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">4.6 Job Control</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


