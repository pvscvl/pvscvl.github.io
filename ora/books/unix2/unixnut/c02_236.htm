<html><head><title>Reference: truss</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:21:26Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Unix Commands"><link rel="prev" href="c02_235.htm" webstripperlinkwas="c02_235.htm" title="Reference: true"><link rel="next" href="c02_237.htm" webstripperlinkwas="c02_237.htm" title="Reference: tset"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_235.htm" webstripperlinkwas="c02_235.htm" title="Reference: true"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: Reference: true" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Unix Commands">Chapter 2<br>Unix Commands</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_237.htm" webstripperlinkwas="c02_237.htm" title="Reference: tset"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: Reference: tset" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="NUTENTRY"><h2 class="nutentry"><a class="term" name="AUTOID-19300">truss</A
></H2
><code class="literal"><b>truss</B
></CODE
> [<i class="replaceable">options</I
>] <i class="replaceable">arguments</I
><br><dl class="nutentrybody"><p class="para"><a class="indexterm" name="AUTOID-19308"></A
><a class="indexterm" name="AUTOID-19310"></A
><a class="indexterm" name="AUTOID-19312"></A
><a class="indexterm" name="AUTOID-19314"></A
><a class="indexterm" name="AUTOID-19317"></A
>Trace system calls, signals, and machine faults while executing <em class="emphasis">arguments</EM
>. <em class="emphasis">arguments</EM
> is either a Unix command to run or, if <code class="option">-p</CODE
> is specified,  a list of process IDs representing the already running processes to trace. The options <code class="option">-m</CODE
>, <code class="option">-r</CODE
>, <code class="option">-s</CODE
>, <code class="option">-t</CODE
>, <code class="option">-v</CODE
>, <code class="option">-w</CODE
>, and <code class="option">-x</CODE
> accept a comma-separated list of arguments. A <code class="literal"><b>!</B
></CODE
> reverses the sense of the list, telling <kbd class="command">truss</KBD
>  to ignore those elements of the list during the trace. (In the C shell, use a backslash before <code class="literal"><b>!</B
></CODE
>.) The keyword <code class="literal"><b>all</B
></CODE
> can include/exclude all possible elements for the list. The optional <code class="literal"><b>!</B
></CODE
> and corresponding description are shown in brackets.</P
><p class="para">The Solaris <kbd class="command">truss</KBD
> also provides tracing of user-level function calls in dynamically loaded shared libraries.</P
><p class="para">This command is particularly useful for finding missing files when a third-party application fails. By watching the <code class="literal"><b>access</B
></CODE
> and <code class="literal"><b>open</B
></CODE
> system calls, you can find where, and which, files the application program expected to find, but did not.</P
><p class="para">Many systems have similar programs named <kbd class="command">trace</KBD
> or <kbd class="command">strace</KBD
>. These programs are worth learning how to use.</P
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-19342">Options</A
></H3
><dl class="variablelist"><dt class="term"><code class="option">-a</CODE
></DT
><dd class="listitem"><p class="para">Display parameters passed by each <em class="emphasis">exec</EM
>(2) call.</P
></DD
><dt class="term"><code class="option">-c</CODE
></DT
><dd class="listitem"><p class="para">Count the traced items and print a summary rather than listing them as they happen.</P
></DD
><dt class="term"><code class="option">-d</CODE
></DT
><dd class="listitem"><p class="para">Print a timestamp in the output, of the form <em class="emphasis">seconds</EM
><code class="literal"><b>.</B
></CODE
><em class="emphasis">fraction</EM
>, indicating the time relative to the start of the trace. Times are when the system call completes, not starts. Solaris only.</P
></DD
><dt class="term"><code class="option">-D</CODE
></DT
><dd class="listitem"><p class="para">Print a delta timestamp in the output, of the form <em class="emphasis">seconds</EM
><code class="literal"><b>.</B
></CODE
><em class="emphasis">fraction</EM
>, indicating the time between events (i.e., the time <em class="emphasis">not</EM
> inside system calls). Solaris only.</P
></DD
><dt class="term"><code class="option">-e</CODE
></DT
><dd class="listitem"><p class="para">Display values of environment variables passed by each <em class="emphasis">exec</EM
>(2) call.</P
></DD
><dt class="term"><code class="option">-f</CODE
></DT
><dd class="listitem"><p class="para">Follow child processes. Useful for tracing shell scripts.</P
></DD
><dt class="term"><code class="option">-i</CODE
></DT
><dd class="listitem"><p class="para">List sleeping system calls only once, upon completion.</P
></DD
><dt class="term"><code class="option">-m</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">faults</I
></DT
><dd class="listitem"><p class="para">Trace [exclude from trace] the list of machine  <em class="emphasis">faults</EM
>. <em class="emphasis">faults</EM
> are names or numbers, as listed in  <code class="literal"><b>&lt;sys/fault.h&gt;</B
></CODE
> (default is <code class="literal"><b>-mall -m!fltpage</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-M</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">faults</I
></DT
><dd class="listitem"><p class="para">When the traced process receives one of the named faults, <kbd class="command">truss</KBD
> leaves the process in a stopped state and detaches from it (default is <code class="literal"><b>-M!all</B
></CODE
>). The process can subsequently be attached to with a debugger, or with another invocation of <kbd class="command">truss</KBD
> using different options. Solaris only.</P
></DD
><dt class="term"><code class="option">-l</CODE
></DT
><dd class="listitem"><p class="para">Show the lightweight process ID for a multithreaded process. Solaris only.</P
></DD
><dt class="term"><code class="option">-o</CODE
> <i class="replaceable">outfile</I
></DT
><dd class="listitem"><p class="para">Send trace output to <em class="emphasis">outfile</EM
>, not standard error.</P
></DD
><dt class="term"><code class="option">-p</CODE
></DT
><dd class="listitem"><p class="para">Trace one or more running processes instead of a command.</P
></DD
><dt class="term"><code class="option">-r</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">file_descriptors</I
></DT
><dd class="listitem"><p class="para">Display [don't display] the full I/O buffer of <code class="literal"><b>read</B
></CODE
> system calls for <em class="emphasis">file_descriptors</EM
> (default is <code class="literal"><b>-r!all</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-s</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">signals</I
></DT
><dd class="listitem"><p class="para">Trace [exclude from trace] the list of <em class="emphasis">signals</EM
>. <em class="emphasis">signals</EM
> are names or numbers, as listed in  <code class="literal"><b>&lt;sys/signal.h&gt;</B
></CODE
> (default is <code class="literal"><b>-sall</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-S</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">signals</I
></DT
><dd class="listitem"><p class="para">When the traced process receives one of the named signals, <kbd class="command">truss</KBD
> leaves the process in a stopped state and detaches from it (see <code class="option">-M</CODE
>) (default is <code class="literal"><b>-S!all</B
></CODE
>). Solaris only.</P
></DD
><dt class="term"><code class="option">-t</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">system_calls</I
></DT
><dd class="listitem"><p class="para"> Trace [exclude from trace] the list of <em class="emphasis">system_calls</EM
>. <em class="emphasis">system_calls</EM
> are names or numbers, as listed in Section 2, &quot;System Calls,&quot; of the <cite class="citetitle">UNIX Programmer's Reference Manual</CITE
> (see Bibliography); default is <code class="literal"><b>-tall</B
></CODE
>. </P
></DD
><dt class="term"><code class="option">-T</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">system_calls</I
></DT
><dd class="listitem"><p class="para">When the traced process executes one of the named system calls, <kbd class="command">truss</KBD
> leaves the process in a stopped state and detaches from it (see <code class="option">-M</CODE
>) (default is <code class="literal"><b>-T!all</B
></CODE
>). Solaris only.</P
></DD
><dt class="term"><code class="option">-u</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">lib</I
>,...<code class="literal"><b>:</B
></CODE
>[<code class="literal"><b>:</B
></CODE
>][<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">func</I
>,...</DT
><dd class="listitem"><p class="para">Trace user-level function calls, not just system calls. <em class="emphasis">lib</EM
> is a comma-separated list of dynamic library names, without the <code class="literal"><b>.so.</B
></CODE
><em class="emphasis">n</EM
> suffix. <em class="emphasis">func</EM
> is a comma-separated list of names. Shell wildcard syntax may be used to specify many names. (Such use should be quoted to protect it from expansion by the shell.) The leading <code class="literal"><b>!</B
></CODE
> indicates libraries and/or functions to exclude. With <code class="literal"><b>:</B
></CODE
>, only calls into the library from outside it are traced; with <code class="literal"><b>::</B
></CODE
>, all calls are traced. Solaris only.</P
></DD
><dt class="term"><code class="option">-U</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">lib</I
>,...<code class="literal"><b>:</B
></CODE
>[<code class="literal"><b>:</B
></CODE
>][<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">func</I
>,...</DT
><dd class="listitem"><p class="para">When the traced process executes one of the named user-level functions, <kbd class="command">truss</KBD
> leaves the process in a stopped state and detaches from it (see <code class="option">-M</CODE
>). Solaris only.</P
></DD
><dt class="term"><code class="option">-v</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">system_calls</I
></DT
><dd class="listitem"><p class="para">Verbose mode. Same as <code class="option">-t</CODE
>, but also list the contents of any structures passed to <em class="emphasis">system_calls</EM
> (default is <code class="literal"><b>-v!all</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-w</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">file_descriptors</I
></DT
><dd class="listitem"><p class="para">Display [don't display] the full I/O buffer of <code class="literal"><b>write</B
></CODE
> system calls for <em class="emphasis">file_descriptors</EM
> (default is <code class="literal"><b>-w!all</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-x</CODE
>[<code class="literal"><b>!</B
></CODE
>]<i class="replaceable">system_calls</I
></DT
><dd class="listitem"><p class="para">Same as <code class="option">-t</CODE
>, but display the system call arguments as raw code (hexadecimal) (default is <code class="literal"><b>-x!all</B
></CODE
>).</P
></DD
></DL
></DIV
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-19539">Examples</A
></H3
><p class="para">Trace system calls <code class="literal"><b>access</B
></CODE
>, <code class="literal"><b>open</B
></CODE
>, and <code class="literal"><b>close</B
></CODE
> for the <kbd class="command">lp</KBD
> command:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>truss -t access,open,close lp</B
></CODE
> <i class="replaceable">files</I
><code class="userinput"><b> &gt; truss.out</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Trace the <kbd class="command">make</KBD
> command, including its child processes, and store the output in <i class="filename">make.trace</I
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>truss -f -o make.trace make</B
></CODE
> <i class="replaceable">target</I
></PRE
></BLOCKQUOTE
></P
></DIV
></DL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_235.htm" webstripperlinkwas="c02_235.htm" title="Reference: true"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: Reference: true" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_237.htm" webstripperlinkwas="c02_237.htm" title="Reference: tset"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: Reference: tset" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">Reference: true</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">Reference: tset</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


