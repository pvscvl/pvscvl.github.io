<html><head><title>Reference: tar</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:20:23Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Unix Commands"><link rel="prev" href="c02_223.htm" webstripperlinkwas="c02_223.htm" title="Reference: talk"><link rel="next" href="c02_225.htm" webstripperlinkwas="c02_225.htm" title="Reference: tbl"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_223.htm" webstripperlinkwas="c02_223.htm" title="Reference: talk"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: Reference: talk" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Unix Commands">Chapter 2<br>Unix Commands</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_225.htm" webstripperlinkwas="c02_225.htm" title="Reference: tbl"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: Reference: tbl" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="NUTENTRY"><h2 class="nutentry"><a class="term" name="AUTOID-18477">tar</A
></H2
><code class="literal"><b>tar</B
></CODE
> [<i class="replaceable">options</I
>] [<i class="replaceable">files</I
>]<br><dl class="nutentrybody"><p class="para"><a class="indexterm" name="AUTOID-18485"></A
><a class="indexterm" name="AUTOID-18487"></A
><a class="indexterm" name="AUTOID-18490"></A
><a class="indexterm" name="AUTOID-18494"></A
><a class="indexterm" name="AUTOID-18497"></A
>Copy <em class="emphasis">files</EM
> to or restore <em class="emphasis">files</EM
> from tape (<b class="emphasis.bold">t</B
>ape <em class="emphasis"> role=boldar</EM
>chive). If any <em class="emphasis">files</EM
> are directories, <kbd class="command">tar</KBD
> acts on the entire subtree. (See also <b class="emphasis.bold">cpio</B
> and <b class="emphasis.bold">pax</B
>.)</P
><p class="para">Options are supplied as one group, with any arguments placed afterward in corresponding order. Originally, <kbd class="command">tar</KBD
> did not even accept a leading <code class="literal"><b>-</B
></CODE
> on its options. Although the Solaris version allows one, it does not require it. On many other Unix systems, you may use conventional option notation, with each option preceded by a dash and separated from the other options with whitespace. Some systems actually require the use of separate options. Check your local documentation for the final word.</P
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-18510">Notes</A
></H3
><p class="para">For the following reasons, <kbd class="command">tar</KBD
> is best used as a way to exchange file or source code archives over a network. A system administrator performing system backups is advised to use the vendor-supplied backup program (typically called <kbd class="command">dump</KBD
> or <kbd class="command">backup</KBD
>; see your local documentation) for backups instead of <kbd class="command">tar</KBD
>. (Many of these same points apply to <kbd class="command">cpio</KBD
> and to <kbd class="command">pax</KBD
> as well.)</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Most Unix versions of <kbd class="command">tar</KBD
> preserve the leading <code class="literal"><b>/</B
></CODE
> from an absolute filename in the archive. This makes it difficult or impossible to extract the files on  a different system.</P
></LI
><li class="listitem"><p class="para">The <kbd class="command">tar</KBD
> archive format was designed when Unix file and directory names were short (14 characters maximum). Modern Unix systems allow individual filenames to be up to 255 characters in length, but the <kbd class="command">tar</KBD
> archive header has a limit of 100 characters for the entire pathname. This makes it difficult or impossible in practice to archive a typical Unix filesystem.</P
></LI
><li class="listitem"><p class="para">In general, Unix versions of <kbd class="command">tar</KBD
> cannot recover from data errors, which are particularly common with tapes. An early tape error can render an entire <kbd class="command">tar</KBD
> tape useless.</P
></LI
><li class="listitem"><p class="para">While <kbd class="command">tar</KBD
> does checksum the header information describing each archived file, it does not checksum the actual data blocks. Thus, if a data block becomes corrupted on a tape, <kbd class="command">tar</KBD
> will never notice.</P
></LI
></UL
><p class="para">The GNU version of <kbd class="command">tar</KBD
> has extensions to get around many of these problems, at the cost of portability of the archive format to non-GNU versions. Source code can be obtained from the Free Software Foundation (<a class="ulink" href="../../../../../../../www.gnu.org/">http://www.gnu.org</A
>).</P
></DIV
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-18539">Control Options (Solaris)</A
></H3
><dl class="variablelist"><dt class="term"><code class="option">-C</CODE
> <i class="replaceable">dir files</I
></DT
><dd class="listitem"><p class="para">Change directory to <em class="emphasis">dir</EM
> before adding <em class="emphasis">files</EM
> to the archive. Use relative pathnames. This option makes it possible to archive files that don't share a common ancestor directory.</P
></DD
><dt class="term"><code class="option">-I</CODE
> <i class="replaceable">file</I
></DT
><dd class="listitem"><p class="para">Read a list of filenames to be archived, one filename per line, from <i class="filename">file</I
>. Useful when there are too many files to name on the command line.</P
></DD
><dt class="term"><code class="option">-X</CODE
></DT
><dd class="listitem"><p class="para">Exclude files. The corresponding file argument is read for a list of relative pathnames, one per line, of files that should not be archived. This option may be provided multiple times with multiple files. Filenames that appear here are excluded even if the same name was provided in a file used with <code class="option">-I</CODE
>.</P
></DD
></DL
></DIV
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-18563">Function Options (choose one)</A
></H3
><dl class="variablelist"><dt class="term"><code class="literal"><b>c</B
></CODE
></DT
><dd class="listitem"><p class="para">Create a new archive.</P
></DD
><dt class="term"><code class="literal"><b>r</B
></CODE
></DT
><dd class="listitem"><p class="para">Append <em class="emphasis">files</EM
> to archive.</P
></DD
><dt class="term"><code class="literal"><b>t</B
></CODE
></DT
><dd class="listitem"><p class="para">Table of contents. Print the names of <em class="emphasis">files</EM
> if they are stored on the archive (if <em class="emphasis">files</EM
>  not specified, print names of all files).</P
></DD
><dt class="term"><code class="literal"><b>u</B
></CODE
></DT
><dd class="listitem"><p class="para">Update. Add files if not in archive or if modified.</P
></DD
><dt class="term"><code class="literal"><b>x</B
></CODE
></DT
><dd class="listitem"><p class="para">Extract <em class="emphasis">files</EM
> from archive (if <em class="emphasis">files</EM
> not specified, extract all files).</P
></DD
></DL
></DIV
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-18596">Options</A
></H3
><dl class="variablelist"><dt class="term"><code class="literal"><b>b</B
></CODE
> <i class="replaceable">n</I
></DT
><dd class="listitem"><p class="para">Use blocking factor <em class="emphasis">n</EM
> (default is 1; maximum is 20). Different Unix systems often allow larger blocking factors.</P
></DD
><dt class="term"><code class="literal"><b>B</B
></CODE
></DT
><dd class="listitem"><p class="para">Continue reading until logical blocks are full. For use across Ethernet connections with <kbd class="command">rsh</KBD
>. On by default when reading standard input. Solaris only, but also common on many other Unix systems.</P
></DD
><dt class="term"><code class="literal"><b>e</B
></CODE
></DT
><dd class="listitem"><p class="para">Exit immediately upon unexpected errors. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>E</B
></CODE
></DT
><dd class="listitem"><p class="para">Use an extended header that allows longer filenames, larger files, and other extensions. Not portable. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>f</B
></CODE
> <i class="replaceable">arch</I
></DT
><dd class="listitem"><p class="para">Store files in or extract files from archive <em class="emphasis">arch</EM
>; <em class="emphasis">arch</EM
> is usually a device name (default varies from system to system). If <em class="emphasis">arch</EM
> is <code class="option">-</CODE
>, standard input or output is used as appropriate (e.g., when piping a <kbd class="command">tar</KBD
> archive to a remote host).</P
></DD
><dt class="term"><code class="literal"><b>F</B
></CODE
>,  <code class="literal"><b>FF</B
></CODE
></DT
><dd class="listitem"><p class="para">With <code class="literal"><b>F</B
></CODE
>, do not archive <i class="filename">SCCS</I
> and <i class="filename">RCS</I
> directories. With <code class="literal"><b>FF</B
></CODE
>, also exclude files named <i class="filename">a.out</I
>, <i class="filename">core</I
>, <i class="filename">errs</I
>, and all <code class="literal"><b>.o</B
></CODE
> files. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>i</B
></CODE
></DT
><dd class="listitem"><p class="para">Ignore directory checksum errors. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>k</B
></CODE
> <i class="replaceable">size</I
></DT
><dd class="listitem"><p class="para">Specify the archive size in kilobytes. Archives that are larger than <em class="emphasis">size</EM
> are split across volumes. Useful for fixed-size media, such as floppy disks. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>l</B
></CODE
></DT
><dd class="listitem"><p class="para">Print error messages about links that can't be found.</P
></DD
><dt class="term"><code class="literal"><b>L</B
></CODE
></DT
><dd class="listitem"><p class="para">Follow symbolic links. SVR4 only.</P
></DD
><dt class="term"><code class="literal"><b>m</B
></CODE
></DT
><dd class="listitem"><p class="para">Do not restore file modification times; update them to the time of extraction.</P
></DD
><dt class="term"><code class="literal"><b>n</B
></CODE
></DT
><dd class="listitem"><p class="para">Archive is not a tape device. This allows <kbd class="command">tar</KBD
> to seek, instead of doing sequential reads, which is faster. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>o</B
></CODE
></DT
><dd class="listitem"><p class="para">Change ownership of extracted files to that of user running program. This is the default for nonprivileged users.</P
></DD
><dt class="term"><code class="literal"><b>p</B
></CODE
></DT
><dd class="listitem"><p class="para">Preserve permissions of extracted files. Solaris ACLs are restored if recorded in the archive and are added to the archive when used with <code class="literal"><b>c</B
></CODE
>.</P
></DD
><dt class="term"><code class="literal"><b>P</B
></CODE
></DT
><dd class="listitem"><p class="para">Do not add a trailing <code class="literal"><b>/</B
></CODE
> to directory names in the archive. Solaris only.</P
></DD
><dt class="term"><code class="literal"><b>v</B
></CODE
></DT
><dd class="listitem"><p class="para">Print function letter (<code class="literal"><b>x</B
></CODE
> for extraction or <code class="literal"><b>a</B
></CODE
> for archive) and name of files. With <code class="option">t</CODE
>, print a listing similar to that of <code class="literal"><b>ls -l</B
></CODE
>.</P
></DD
><dt class="term"><code class="literal"><b>w</B
></CODE
></DT
><dd class="listitem"><p class="para">Wait for user confirmation (<code class="literal"><b>y</B
></CODE
>).    </P
></DD
><dt class="term"><i class="replaceable">n</I
>[<i class="replaceable">c</I
>]</DT
><dd class="listitem"><p class="para">Select tape drive <em class="emphasis">n</EM
> and use speed <em class="emphasis">c</EM
>.  <em class="emphasis">n</EM
> is 0-7 (default is 0);  <em class="emphasis">c</EM
> is <code class="literal"><b>l</B
></CODE
> (low), <code class="literal"><b>h</B
></CODE
> (high), or <code class="literal"><b>m</B
></CODE
> (medium, the default). Used to modify <em class="emphasis">arch</EM
>. (These are highly system-specific and non-portable: it is much better to always just specify the <em class="emphasis">arch</EM
> explicitly.)</P
></DD
></DL
></DIV
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-18727">Examples</A
></H3
><p class="para">Create an archive of <i class="filename">/bin</I
> and <i class="filename">/usr/bin</I
> (<code class="literal"><b>c</B
></CODE
>), show the command working (<code class="literal"><b>v</B
></CODE
>), and write on the tape in <i class="filename">/dev/rmt/0</I
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>tar cvf /dev/rmt/0 /bin /usr/bin</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">List the archive's contents in a format like <code class="literal"><b>ls -l</B
></CODE
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>tar tvf /dev/rmt/0</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Extract the <i class="filename">/bin</I
> directory:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>tar xvf /dev/rmt/0 /bin</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Create an archive of the current directory, and store it in a file <i class="filename">/tmp/backup.tar</I
> on the system. (Backing up a directory into a file in that directory almost never works.)</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>tar cvf /tmp/backup.tar .</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Similar, but compress the archive file:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>tar cvf - . | compress &gt; /tmp/backup.tar.Z</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">(The <code class="literal"><b>-</B
></CODE
> tells <kbd class="command">tar</KBD
> to store the directory on standard output, which is then redirected through the pipe.)</P
><p class="para">Copy a directory tree from one location to another:</P
><p class="para"><blockquote class="screen"><pre class="screen"># <code class="userinput"><b>cd olddir; tar cf - . | (cd newdir; tar xvpf -)</B
></CODE
></PRE
></BLOCKQUOTE
></P
></DIV
></DL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_223.htm" webstripperlinkwas="c02_223.htm" title="Reference: talk"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: Reference: talk" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_225.htm" webstripperlinkwas="c02_225.htm" title="Reference: tbl"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: Reference: tbl" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">Reference: talk</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">Reference: tbl</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


