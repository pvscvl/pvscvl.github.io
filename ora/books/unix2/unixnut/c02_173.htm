<html><head><title>Reference: patch</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:15:53Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Unix Commands"><link rel="prev" href="c02_172.htm" webstripperlinkwas="c02_172.htm" title="Reference: paste"><link rel="next" href="c02_174.htm" webstripperlinkwas="c02_174.htm" title="Reference: pathchk"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_172.htm" webstripperlinkwas="c02_172.htm" title="Reference: paste"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: Reference: paste" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1"><a class="chapter" rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Unix Commands">Chapter 2<br>Unix Commands</A
></FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_174.htm" webstripperlinkwas="c02_174.htm" title="Reference: pathchk"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: Reference: pathchk" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="NUTENTRY"><h2 class="nutentry"><a class="term" name="AUTOID-14657">patch</A
></H2
><code class="literal"><b>patch</B
></CODE
> [<i class="replaceable">options</I
>] [<i class="replaceable">sourcefile</I
> [<i class="replaceable">patchfile</I
>]]<br><dl class="nutentrybody"><p class="para"><a class="indexterm" name="AUTOID-14666"></A
><a class="indexterm" name="AUTOID-14668"></A
>Solaris only. <kbd class="command">patch</KBD
> reads a &quot;patch&quot; containing the output of <kbd class="command">diff</KBD
> in normal, <kbd class="command">ed</KBD
>-script, or context format, and applies the changes contained therein to the original version of <em class="emphasis">sourcefile</EM
>. Multiple files can be patched, but it must be possible to determine the name of the original file from the contents of the patch. Distributing patches is an easy way to provide upgrades to source file distributions where the changes are small relative to the size of the entire distribution.</P
><p class="para">Note: this entry documents the Solaris version, which is a somewhat older version of Larry Wall's original <kbd class="command">patch</KBD
> program. The Free Software Foundation now maintains <kbd class="command">patch</KBD
>. Newer, more capable versions are available from them and are recommended; see <a class="ulink" href="../../../../../../../www.gnu.org/">http://www.gnu.org</A
>.</P
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-14679">Options</A
></H3
><dl class="variablelist"><dt class="term"><code class="option">-b</CODE
></DT
><dd class="listitem"><p class="para">Make a backup of each file, in <em class="emphasis">file</EM
><code class="literal"><b>.orig</B
></CODE
>. An existing <em class="emphasis">file</EM
><code class="literal"><b>.orig</B
></CODE
> is overwritten.</P
></DD
><dt class="term"><code class="option">-c</CODE
></DT
><dd class="listitem"><p class="para">The <em class="emphasis">patchfile</EM
> is a context diff (from <code class="literal"><b>diff -c</B
></CODE
> or <code class="literal"><b>diff -C</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-d</CODE
> <i class="replaceable">dir</I
></DT
><dd class="listitem"><p class="para">Change directory to <em class="emphasis">dir</EM
> before applying the patch.</P
></DD
><dt class="term"><code class="option">-D</CODE
> <i class="replaceable">identifier</I
></DT
><dd class="listitem"><p class="para">Bracket changes with C preprocessor <code class="literal"><b>#ifdef</B
></CODE
>.  <blockquote class="screen"><pre class="screen">#ifdef identifier
   ...
#endif</PRE
></BLOCKQUOTE
></P
></DD
><dt class="term"><code class="option">-e</CODE
></DT
><dd class="listitem"><p class="para">The <em class="emphasis">patchfile</EM
> is an <kbd class="command">ed</KBD
> script (from <code class="literal"><b>diff -e</B
></CODE
>).</P
></DD
><dt class="term"><code class="option">-i</CODE
> <i class="replaceable">file</I
></DT
><dd class="listitem"><p class="para">Read the patch from <em class="emphasis">file</EM
> instead of from standard input.</P
></DD
><dt class="term"><code class="option">-l</CODE
></DT
><dd class="listitem"><p class="para">Patch loosely. Any sequence of whitespace characters in the patch may match any sequence of whitespace in <em class="emphasis">sourcefile</EM
>. Other characters must match exactly.</P
></DD
><dt class="term"><code class="option">-n</CODE
></DT
><dd class="listitem"><p class="para">The <em class="emphasis">patchfile</EM
> is a normal diff (from <kbd class="command">diff</KBD
> with no special options).</P
></DD
><dt class="term"><code class="option">-N</CODE
></DT
><dd class="listitem"><p class="para">Ignore patches that have already been applied. Normally, such patches are rejected.</P
></DD
><dt class="term"><code class="option">-o</CODE
> <i class="replaceable">newfile</I
></DT
><dd class="listitem"><p class="para">Instead of updating each source file in place, write the full contents of the modified file(s) to <em class="emphasis">newfile</EM
>. If a file is updated multiple times, <em class="emphasis">newfile</EM
> will contain a copy of each intermediate version.</P
></DD
><dt class="term"><code class="option">-p</CODE
><i class="replaceable">N</I
></DT
><dd class="listitem"><p class="para">Remove <em class="emphasis">N</EM
> leading pathname components from the filename used in the patch. The leading <code class="literal"><b>/</B
></CODE
> of a full pathname counts as one component. Without this option, only the final filename part of the filename is used.</P
></DD
><dt class="term"><code class="option">-r</CODE
> <i class="replaceable">rejfile</I
></DT
><dd class="listitem"><p class="para">Use <em class="emphasis">rejfile</EM
> to contain patches that could not be applied, instead of <em class="emphasis">file</EM
><code class="literal"><b>.rej</B
></CODE
>. Rejected patches are always in context diff format.</P
></DD
><dt class="term"><code class="option">-R</CODE
></DT
><dd class="listitem"><p class="para">Reverse the sense of the patch. In other words, assume that the patch was created using <kbd class="command">diff</KBD
> <em class="emphasis">new old</EM
>, instead of <kbd class="command">diff</KBD
> <em class="emphasis">old new</EM
>.</P
></DD
></DL
></DIV
><div class="refsect2"><h3 class="refsect2"><a class="title" name="AUTOID-14781">Example</A
></H3
><p class="para">Update a software distribution:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>cd whizprog-1.1</B
></CODE
>
$ <code class="userinput"><b>patch -p1 &lt; whizprog-1.1-1.2.diff</B
></CODE
>
<i class="lineannotation">Lots of messages here as patch works</I
>
$ <code class="userinput"><b>find . -name '*.orig' -print | xargs rm</B
></CODE
>
$ <code class="userinput"><b>cd ..</B
></CODE
>
$ <code class="userinput"><b>mv whizprog-1.1 whizprog-1.2</B
></CODE
></PRE
></BLOCKQUOTE
></P
></DIV
></DL
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_172.htm" webstripperlinkwas="c02_172.htm" title="Reference: paste"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: Reference: paste" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="NUTENTRY" href="c02_174.htm" webstripperlinkwas="c02_174.htm" title="Reference: pathchk"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: Reference: pathchk" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">Reference: paste</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">Reference: pathchk</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


