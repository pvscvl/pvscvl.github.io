<html><head><title>[Chapter 8] The vi Editor</TITLE
><meta name="DC.Creator" content="Arnold Robbins"><meta name="DC.Date" content="1999-12-03T20:28:09Z"><meta name="DC.Format" content="text/html" scheme="MIME"><meta name="DC.Identifier" content="O'Reilly-CDROM-1-56592-427-4"><meta name="DC.Language" content="en-US"><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.Source" content="1-56592-427-4" scheme="ISBN"><meta name="DC.Subject.Keyword" content="HTML, Web, CSS"><meta name="DC.Title" content="UNIX in a Nutshell: System V Edition"><meta name="DC.Type" content="Text.Monograph"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part02.htm" webstripperlinkwas="part02.htm" title="II. Text Editing and Processing"><link rel="prev" href="ch07_04.htm" webstripperlinkwas="ch07_04.htm" title="7.4 Summary of Commands by Name"><link rel="next" href="ch08_02.htm" webstripperlinkwas="ch08_02.htm" title="8.2 Movement Commands"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX in a Nutshell: System V Edition" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell: System V Edition"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch07_04.htm" webstripperlinkwas="ch07_04.htm" title="7.4 Summary of Commands by Name"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 7.4 Summary of Commands by Name" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 8</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch08_02.htm" webstripperlinkwas="ch08_02.htm" title="8.2 Movement Commands"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 8.2 Movement Commands" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="UNUT-CH-8">8. The vi Editor</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="SECT1" href="#UNUT-CH-8-SECT-1" title="8.1 Review of vi Operations">Review of vi Operations</A
><br><a class="SECT1" href="ch08_02.htm" webstripperlinkwas="ch08_02.htm" title="8.2 Movement Commands">Movement Commands</A
><br><a class="SECT1" href="ch08_03.htm" webstripperlinkwas="ch08_03.htm" title="8.3 Edit Commands">Edit Commands</A
><br><a class="SECT1" href="ch08_04.htm" webstripperlinkwas="ch08_04.htm" title="8.4 Saving and Exiting">Saving and Exiting</A
><br><a class="SECT1" href="ch08_05.htm" webstripperlinkwas="ch08_05.htm" title="8.5 Accessing Multiple Files">Accessing Multiple Files</A
><br><a class="SECT1" href="ch08_06.htm" webstripperlinkwas="ch08_06.htm" title="8.6 Interacting with Unix">Interacting with Unix</A
><br><a class="SECT1" href="ch08_07.htm" webstripperlinkwas="ch08_07.htm" title="8.7 Macros">Macros</A
><br><a class="SECT1" href="ch08_08.htm" webstripperlinkwas="ch08_08.htm" title="8.8 Miscellaneous Commands">Miscellaneous Commands</A
><br><a class="SECT1" href="ch08_09.htm" webstripperlinkwas="ch08_09.htm" title="8.9 Alphabetical List of Keys">Alphabetical List of Keys</A
><br><a class="SECT1" href="ch08_10.htm" webstripperlinkwas="ch08_10.htm" title="8.10 Setting Up vi">Setting Up vi</A
></P
><p></P
></DIV
><p class="para"><a class="indexterm" name="UNUT-CH-8-IX-VI-EDITOR"></A
>This chapter presents the following topics:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Review of <kbd class="command">vi</KBD
> operations</P
></LI
><li class="listitem"><p class="para">Movement commands</P
></LI
><li class="listitem"><p class="para">Edit commands</P
></LI
><li class="listitem"><p class="para">Saving and exiting</P
></LI
><li class="listitem"><p class="para">Accessing multiple files</P
></LI
><li class="listitem"><p class="para">Interacting with Unix</P
></LI
><li class="listitem"><p class="para">Macros</P
></LI
><li class="listitem"><p class="para">Miscellaneous commands</P
></LI
><li class="listitem"><p class="para">Alphabetical list of keys</P
></LI
><li class="listitem"><p class="para">Setting up <kbd class="command">vi</KBD
></P
></LI
></UL
><p class="para"><kbd class="command">vi</KBD
> is pronounced &quot;vee eye.&quot;</P
><p class="para">Besides the original Unix <kbd class="command">vi</KBD
>, there are a number of freely available <kbd class="command">vi</KBD
> clones. Both the original <kbd class="command">vi</KBD
> and the clones are covered in <cite class="citetitle">Learning the vi Editor</CITE
>, listed in the Bibliography.</P
><div class="sect1"><h2 class="sect1"><a class="title" name="UNUT-CH-8-SECT-1">8.1 Review of vi Operations</A
></H2
><p class="para">This section provides a review of the following:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Command-line syntax</P
></LI
><li class="listitem"><p class="para"><kbd class="command">vi</KBD
> modes</P
></LI
><li class="listitem"><p class="para">Syntax of <kbd class="command">vi</KBD
> commands</P
></LI
><li class="listitem"><p class="para">Status-line commands</P
></LI
></UL
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-8-SECT-1.1">8.1.1 Command-Line Syntax</A
></H3
><p class="para">The three most common ways of starting a <kbd class="command">vi</KBD
> session are:</P
><p class="para"><blockquote class="screen"><pre class="screen">vi <i class="replaceable">file</I
>
vi +<i class="replaceable">n file</I
>
vi +/<i class="replaceable">pattern file</I
></PRE
></BLOCKQUOTE
></P
><p class="para">You can open <em class="emphasis">file</EM
> for editing, optionally at line <em class="emphasis">n</EM
> or at the first line matching <em class="emphasis">pattern</EM
>. If no <em class="emphasis">file</EM
> is specified, <kbd class="command">vi</KBD
> opens with an empty buffer. See <a class="xref" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm">Chapter 2, <cite class="CHAPTER">Unix Commands</CITE
></A
>, for more information on command-line options for <kbd class="command">vi</KBD
>.</P
><p class="para">Note that <kbd class="command">vi</KBD
> and <kbd class="command">ex</KBD
> are actually the same program; thus it is worthwhile to review the material in <a class="xref" href="ch09_01.htm" webstripperlinkwas="ch09_01.htm">Chapter 9, <cite class="CHAPTER">The ex Editor</CITE
></A
>, as well, in order to become familiar with the <kbd class="command">ex</KBD
> command set.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-8-SECT-1.2">8.1.2 Command Mode</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-37485"></A
>Once the file is opened, you are in command mode. From command mode, you can:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Invoke insert mode</P
></LI
><li class="listitem"><p class="para">Issue editing commands</P
></LI
><li class="listitem"><p class="para">Move the cursor to a different position in the file</P
></LI
><li class="listitem"><p class="para">Invoke <kbd class="command">ex</KBD
> commands</P
></LI
><li class="listitem"><p class="para">Invoke a Unix shell</P
></LI
><li class="listitem"><p class="para">Save or exit the current version of the file</P
></LI
></UL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-8-SECT-1.3">8.1.3 Insert Mode</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-37504"></A
>In insert mode, you can enter new text in the file. Press the Escape key to exit insert mode and return to command mode. The following commands invoke insert mode: </P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>a</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Append after cursor.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>A</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Append at end of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>c</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Begin change operation.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>C</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Change to end of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>i</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Insert before cursor.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>I</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Insert at beginning of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>o</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Open a line below current line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>O</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Open a line above current line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>R</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Begin overwriting text.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>s</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Substitute a character.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>S</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Substitute entire line.</TD
></TR
></TBODY
></TABLE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-8-SECT-1.4">8.1.4 Syntax of vi Commands</A
></H3
><p class="para"><a class="indexterm" name="UNUT-CH-8-IX-COMMANDS-VI-EDITOR"></A
>In <kbd class="command">vi</KBD
>, commands have the following general form:</P
><blockquote class="blockquote"><p class="para">[<i class="replaceable">n</I
>] <i class="replaceable">operator</I
> [<i class="replaceable">m</I
>] <i class="replaceable">object</I
></P
></BLOCKQUOTE
><p class="para">The basic editing <em class="emphasis">operators</EM
> are:</P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>c</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Begin a change.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>d</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Begin a deletion.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>y</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Begin a yank (or copy).</TD
></TR
></TBODY
></TABLE
><p class="para">If the current line is the object of the operation, the object is the same as the operator:  <code class="literal"><b>cc</B
></CODE
>, <code class="literal"><b>dd</B
></CODE
>, <code class="literal"><b>yy</B
></CODE
>.   Otherwise, the editing operators act on  objects specified by cursor-movement commands or pattern-matching commands. <em class="emphasis">n</EM
> and <em class="emphasis">m</EM
> are the number of times the operation is performed, or the number of objects the operation is performed on.  If both <em class="emphasis">n</EM
> and <em class="emphasis">m</EM
> are specified, the effect is <em class="emphasis">n</EM
> &#215; <em class="emphasis">m</EM
>. </P
><p class="para">An object can represent any of the following text blocks:</P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><em class="emphasis">word</EM
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Includes characters up to a whitespace character (space or tab) or punctuation mark. A capitalized object is a variant form that recognizes only whitespace.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><em class="emphasis">sentence</EM
></TD
><td class="entry" rowspan="1" colspan="1">Is up to <code class="literal"><b>.</B
></CODE
>, <code class="literal"><b>!</B
></CODE
>, or <code class="literal"><b>?</B
></CODE
>, followed by two spaces.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><em class="emphasis">paragraph</EM
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Is up to next blank line or paragraph macro defined by the <code class="literal"><b>para=</B
></CODE
> option.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><em class="emphasis">section</EM
></TD
><td class="entry" rowspan="1" colspan="1">Is up to next section heading defined by the <code class="literal"><b>sect=</B
></CODE
> option.</TD
></TR
></TBODY
></TABLE
><div class="sect3"><h4 class="sect3"><a class="title" name="UNUT-CH-8-SECT-1.4.1">8.1.4.1 Examples</A
></H4
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>2cw</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Change the next two words.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>d}</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Delete up to next paragraph.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>d^</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Delete back to beginning of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>5yy</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Copy the next five lines.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>y]]</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Copy up to the next section.</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UNUT-CH-8-SECT-1.5">8.1.5 Status-Line Commands</A
></H3
><p class="para">Most commands are not echoed on the screen as you input them. However, the status line at the bottom of the screen is used to echo input for these commands:</P
><table class="informaltable" border="1" cellpadding="3"><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>/</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Search forward for a pattern.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>?</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Search backward for a pattern.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>:</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1">Invoke an <kbd class="command">ex</KBD
> command.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><code class="literal"><b>!</B
></CODE
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Invoke a Unix command that takes as its input an object in the buffer and replaces it with output from the command.</P
></TD
></TR
></TBODY
></TABLE
><p class="para">Commands that are input on the status line must be entered by pressing the Return key. In addition, error messages and output from the <code class="literal"><b>CTRL-G</B
></CODE
> command are displayed on the status line.</P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch07_04.htm" webstripperlinkwas="ch07_04.htm" title="7.4 Summary of Commands by Name"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 7.4 Summary of Commands by Name" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" title="UNIX in a Nutshell: System V Edition"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX in a Nutshell: System V Edition" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch08_02.htm" webstripperlinkwas="ch08_02.htm" title="8.2 Movement Commands"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 8.2 Movement Commands" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">7.4 Summary of Commands by Name</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">8.2 Movement Commands</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>


