<html><head><title>[Chapter 3] 3.3 Protecting and Sharing Files</TITLE
><meta name="DC.title" content="Learning the Unix Operating System"><meta name="DC.creator" content="Jerry Peek, Grace Todino &amp; John Strang"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-03T20:50:01Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-390-1" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch03_01.htm" webstripperlinkwas="ch03_01.htm" title="3. Your UNIX Account "><link rel="prev" href="ch03_02.htm" webstripperlinkwas="ch03_02.htm" title="3.2 Looking Inside Files"><link rel="next" href="ch03_04.htm" webstripperlinkwas="ch03_04.htm" title="3.4 Electronic Mail"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the Unix Operating System" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,69" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the Unix Operating System"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch03_02.htm" webstripperlinkwas="ch03_02.htm" title="3.2 Looking Inside Files"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 3.2 Looking Inside Files" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 3<br>Your UNIX Account </FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch03_04.htm" webstripperlinkwas="ch03_04.htm" title="3.4 Electronic Mail"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 3.4 Electronic Mail" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="LUX-CH-3-SECT-3">3.3 Protecting and Sharing Files</A
></H2
><p class="para"><a class="indexterm" name="LUX-CH-3-IX-FILES-SHARING"></A
><a class="indexterm" name="LUX-CH-3-IX-SHARING-FILES"></A
>UNIX makes it easy for users to share files and directories.
Controlling exactly who has access takes some explaining, though&nbsp;- more
explaining than we can do here.  So here's a cookbook set of
instructions.  If you have critical security needs or you just want
more information, see the references in <a class="xref" href="appa_01.htm" webstripperlinkwas="appa_01.htm" title="Reading List ">Appendix A, Reading List </A
>.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="LUX-CH-3-SECT-3.1">3.3.1 Directory Access Permissions</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2171"></A
><a class="indexterm" name="AUTOID-2174"></A
>A directory's access permissions help to control access to the files
in it.  These affect the overall ability to use files and
subdirectories in the directory.  (Once you have access to a
directory, the ability to read or modify the contents of specific
files is controlled by the file access permissions; see the second of
the following two lists.)</P
><p class="para">In the commands below, replace <em class="emphasis">dirname</EM
> with the directory's
pathname.
An easy way to change permissions on the working directory is by using its
relative pathname, <b class="emphasis.bold">.</B
> (dot), as in &quot;<b class="emphasis.bold">chmod 755 .</B
>&quot;.<a class="indexterm" name="LUX-CH-3-IX-CHMOD-COMMAND"></A
><a class="indexterm" name="AUTOID-2183"></A
></P
><ul class="itemizedlist"><li class="listitem"><p class="para">To keep yourself from accidentally removing files (or adding or
renaming files) in a directory, use <b class="emphasis.bold">chmod 555</B
> <em class="emphasis">dirname</EM
>.  To
do the same, but also deny other users any access, use <b class="emphasis.bold">chmod 500</B
>
<em class="emphasis">dirname</EM
>.</P
></LI
><li class="listitem"><p class="para">To protect the files in a directory and all its subdirectories from
everyone else on your system&nbsp;- but still be able to do anything
<em class="emphasis">you</EM
> want to dp there&nbsp;- use <b class="emphasis.bold">chmod 700</B
> <em class="emphasis">dirname</EM
>.</P
></LI
><li class="listitem"><p class="para">To let other people on the system see what's in a directory&nbsp;- and read
or edit the files if the file permissions let them&nbsp;- but not rename,
remove, or add files&nbsp;- use <b class="emphasis.bold">chmod 755</B
> <em class="emphasis">dirname</EM
>.</P
></LI
><li class="listitem"><p class="para">To let people in your UNIX group add, delete, and rename files in a directory
of yours&nbsp;- and read or edit other people's files if the file permissions let
them&nbsp;- use <b class="emphasis.bold">chmod 775</B
> <em class="emphasis">dirname</EM
>.</P
></LI
><li class="listitem"><p class="para">To give full access to everyone on the system, use
<b class="emphasis.bold">chmod 777</B
> <em class="emphasis">dirname</EM
>.</P
></LI
></UL
><p class="para">Remember, to access a directory, a user must also have execute
(<code class="literal">x</CODE
>) permission to
all of its parent directories, all the way up to the root.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="LUX-CH-3-SECT-3.2">3.3.2 File Access Permissions</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2215"></A
><a class="indexterm" name="AUTOID-2218"></A
>The access permissions on a file control what can be done to the file's
<em class="emphasis">contents</EM
>.
The access permissions on the <em class="emphasis">directory</EM
> where the file is kept
control whether the file can
be renamed or removed.</P
><ul class="itemizedlist"><li class="listitem"><p class="para">To make a private file that only you can edit, use <b class="emphasis.bold">chmod 600</B
>
<em class="emphasis">filename</EM
>.
To protect it from accidental editing, use <b class="emphasis.bold">chmod 400</B
> <em class="emphasis">filename</EM
>.</P
></LI
><li class="listitem"><p class="para">To edit a file yourself, and let everyone else on the system read it
without editing, use <b class="emphasis.bold">chmod 644</B
> <em class="emphasis">filename</EM
>.</P
></LI
><li class="listitem"><p class="para">To let you and all members of your UNIX group edit a file, but keep any
other user from reading or editing it, use <b class="emphasis.bold">chmod 660</B
> <em class="emphasis">filename</EM
>.</P
></LI
><li class="listitem"><p class="para">To let nongroup users read but not edit the file, use <b class="emphasis.bold">chmod 664</B
>
<em class="emphasis">filename</EM
>.</P
></LI
><li class="listitem"><p class="para">To let anyone read or edit the file, use <b class="emphasis.bold">chmod 666</B
> <em class="emphasis">filename</EM
>.</P
></LI
></UL
><p class="para"><a class="indexterm" name="AUTOID-2247"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="LUX-CH-3-SECT-3.3">3.3.3 More Protection Under Linux</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-2251"></A
><a class="indexterm" name="AUTOID-2254"></A
><a class="indexterm" name="AUTOID-2256"></A
><a class="indexterm" name="AUTOID-2259"></A
>Most Linux systems have a command that gives you more choices on file
and directory protection: <b class="emphasis.bold">chattr</B
>.  <b class="emphasis.bold">chattr</B
> is being
developed, and your version may not have all of the features that it
will have in later versions of Linux.  For instance, <b class="emphasis.bold">chattr</B
> can make
a Linux file <em class="emphasis">append-only</EM
> (so it can't be overwritten, only added
to); <em class="emphasis">compressed</EM
> (to save disk space automatically);
<em class="emphasis">immutable</EM
> (so it can't be changed at all); <em class="emphasis">undeletable</EM
>,
and more.  Check your online documentation (type <b class="emphasis.bold">man chattr</B
>&nbsp;- see
<a class="xref" href="ch07_01.htm" webstripperlinkwas="ch07_01.htm" title="Where to Go from Here ">Chapter 7</A
>) or ask your system administrator for advice on your system.</P
><div class="sect3"><h4 class="sect3"><a class="title" name="LUX-CH-3-SECT-3.3.1">3.3.3.1 Problem checklist</A
></H4
><p class="para"></P
><dl class="variablelist"><dt class="term"><em class="emphasis">I get the message &quot;chmod: 
Not owner.&quot;</EM
></DT
><dd class="listitem"><p class="para">Only the owner of a file or directory can set its permissions.
Use <b class="emphasis.bold">ls -l</B
> to find the owner.</P
></DD
></DL
><a class="indexterm" name="AUTOID-2281"></A
><a class="indexterm" name="AUTOID-2282"></A
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch03_02.htm" webstripperlinkwas="ch03_02.htm" title="3.2 Looking Inside Files"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 3.2 Looking Inside Files" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" title="Learning the Unix Operating System"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the Unix Operating System" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch03_04.htm" webstripperlinkwas="ch03_04.htm" title="3.4 Electronic Mail"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 3.4 Electronic Mail" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">3.2 Looking Inside Files</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">3.4 Electronic Mail</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
