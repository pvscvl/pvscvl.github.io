<html><head>
<title>[Chapter 10] Korn Shell Administration</TITLE>
<meta name="DC.title" content="Learning the Korn Shell"><meta name="DC.creator" content="Bill Rosenblatt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-03T21:16:59Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-054-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" title="Learning the Korn Shell"><link rel="prev" href="ch09_02.htm" webstripperlinkwas="ch09_02.htm" title="9.2 A Korn Shell Debugger"><link rel="next" href="ch10_02.htm" webstripperlinkwas="ch10_02.htm" title="10.2 Environment Customization"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the Korn Shell" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,66" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_02.htm" webstripperlinkwas="ch09_02.htm" title="9.2 A Korn Shell Debugger"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 9.2 A Korn Shell Debugger" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 10</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch10_02.htm" webstripperlinkwas="ch10_02.htm" title="10.2 Environment Customization"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 10.2 Environment Customization" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="KSH-CH10-KORNADMI">10. Korn Shell Administration</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="sect1" href="#KSH-CH-10-SECT-1" title="10.1 Installing the Korn Shell as the Standard Shell">Installing the Korn Shell as the Standard Shell</A
><br><a class="sect1" href="ch10_02.htm" webstripperlinkwas="ch10_02.htm" title="10.2 Environment Customization">Environment Customization</A
><br><a class="sect1" href="ch10_03.htm" webstripperlinkwas="ch10_03.htm" title="10.3 System Security Features">System Security Features</A
></P
><p></P
></DIV
><p class="para">System administrators use the shell as part of their job of
setting up a system-wide environment for all users. 
In this chapter, we'll discuss the Korn shell's features
that relate to this task from two perspectives:
customization that is available to all users and 
system security.
We assume that you already know the basics of UNIX
system administration.
[1]</P
><blockquote class="footnote"><p class="para">[1] A good source of information on system administration
is <em class="emphasis">Essential System Administration</EM
>, a Nutshell
Handbook from O'Reilly &amp; Associates, Inc., by AEleen Frisch.</P
></BLOCKQUOTE
><div class="sect1"><h2 class="sect1"><a class="title" name="KSH-CH-10-SECT-1">10.1 Installing the Korn Shell as the Standard Shell</A
></H2
><p class="para"><a class="indexterm" name="KSH-CH-10-IX-INSTALLING-KSH-AS-BINSH"></A
><a class="indexterm" name="AUTOID-16145"></A
>As a prelude to system-wide customization, 
we want to emphasize something about the Korn
shell that doesn't apply to most other shells: you can
install it as if it were the standard Bourne shell, i.e.,
as <em class="emphasis">/bin/sh</EM
>. Just save the real Bourne shell as
another filename, such as <em class="emphasis">/bin/bsh</EM
>, in case anyone actually
needs it for anything (which is doubtful), then rename your
Korn shell as <em class="emphasis">/bin/sh</EM
>.</P
><p class="para">Many installations have done this with absolutely no ill 
effects. Not only does this make the Korn shell your
system's standard login shell, but it also makes most
existing Bourne shell scripts run faster, and it has
security advantages that we'll see later in this chapter.</P
><p class="para"><a class="indexterm" name="KSH-CH-10-IX-HAT-PIPE-CHAR-IN-BOURNE-SHELL"></A
><a class="indexterm" name="AUTOID-16155"></A
>As we will see in <a class="xref" href="appa_01.htm" webstripperlinkwas="appa_01.htm" title="Related Shells">Appendix A, Related Shells</A
>, the Korn shell
is backward-compatible 
with the Bourne shell except
that it doesn't support <b class="emphasis.bold">^</B
> as a synonym for the pipe
character <b class="emphasis.bold">|</B
>.  
Unless you have an ancient UNIX system, or you have some 
very, very old shell scripts, you needn't worry about this.</P
><p class="para"><a class="indexterm" name="AUTOID-16162"></A
><a class="indexterm" name="AUTOID-16164"></A
><a class="indexterm" name="AUTOID-16167"></A
>But if you want to be absolutely sure, simply search through
all shell scripts in all directories in your <b class="emphasis.bold">PATH</B
>.
An easy way to do this is to use the <em class="emphasis">file</EM
> command,
which we saw in <a class="xref" href="ch05_01.htm" webstripperlinkwas="ch05_01.htm" title="Flow Control">Chapter 5, Flow Control</A
> and 
<a class="xref" href="ch09_01.htm" webstripperlinkwas="ch09_01.htm" title="Debugging Shell Programs">Chapter 9, Debugging Shell Programs</A
>.
<em class="emphasis">file</EM
> prints &quot;executable
shell script&quot; when given the name of one.
[2]
Here is a script that looks for <b class="emphasis.bold">^</B
> in shell scripts 
in every directory in your <b class="emphasis.bold">PATH</B
>:</P
><blockquote class="footnote"><p class="para">[2] The exact message varies from system to system;
make sure that yours prints this message when given the
name of a shell script. If not, just substitute the message
your <em class="emphasis">file</EM
> command prints 
for &quot;shell script&quot; in the code below.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">IFS=:
for d in $PATH; do
    print checking $d:
    cd $d
    scripts=$(file * | grep 'shell script' | cut -d: -f1)
    for f in $scripts; do
        grep '' $f /dev/null
    done
done</PRE
></BLOCKQUOTE
></P
><p class="para">The first line of this script make it possible to use
<b class="emphasis.bold">$PATH</B
> as an item list in the <b class="emphasis.bold">for</B
> loop.<a class="indexterm" name="AUTOID-16184"></A
><a class="indexterm" name="AUTOID-16186"></A
><a class="indexterm" name="AUTOID-16188"></A
>
For each directory, it <b class="emphasis.bold">cd</B
>s there
and finds all shell scripts by piping the <em class="emphasis">file</EM
>
command into <em class="emphasis">grep</EM
> and then, to extract the filename
only, into <em class="emphasis">cut</EM
>. Then for each shell script,
it searches for the <b class="emphasis.bold">^</B
> character.
[3]</P
><blockquote class="footnote"><p class="para">[3] <a class="indexterm" name="AUTOID-16197"></A
>The inclusion of <em class="emphasis">/dev/null</EM
> in the <em class="emphasis">grep</EM
>
command is a kludge that forces <em class="emphasis">grep</EM
>
to print the names of files that contain a match, even
if there is only one such file in a given directory.</P
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-16203"></A
><a class="indexterm" name="AUTOID-16206"></A
><a class="indexterm" name="AUTOID-16208"></A
>If you run this script, you will probably find several
occurrences of <b class="emphasis.bold">^</B
>-but these should be
used within regular expressions in <em class="emphasis">grep</EM
>, <em class="emphasis">sed</EM
>,
or <em class="emphasis">awk</EM
> commands, not as pipe characters.
Assuming this is the case, it is safe for you to install
the Korn shell as <em class="emphasis">/bin/sh</EM
>.<a class="indexterm" name="AUTOID-16215"></A
><a class="indexterm" name="AUTOID-16216"></A
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_02.htm" webstripperlinkwas="ch09_02.htm" title="9.2 A Korn Shell Debugger"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 9.2 A Korn Shell Debugger" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" title="Learning the Korn Shell"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the Korn Shell" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch10_02.htm" webstripperlinkwas="ch10_02.htm" title="10.2 Environment Customization"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 10.2 Environment Customization" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">9.2 A Korn Shell Debugger</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">10.2 Environment Customization</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
