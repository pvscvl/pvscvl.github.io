<html><head>
<title>[Chapter 2] 2.2 The History File</TITLE>
<meta name="DC.title" content="Learning the Korn Shell"><meta name="DC.creator" content="Bill Rosenblatt"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-03T20:55:56Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-054-6" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2. Command-line Editing"><link rel="prev" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2.1 Enabling Command-line Editing"><link rel="next" href="ch02_03.htm" webstripperlinkwas="ch02_03.htm" title="2.3 Emacs Editing Mode"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="Learning the Korn Shell" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,66" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2.1 Enabling Command-line Editing"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 2.1 Enabling Command-line Editing" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 2<br>Command-line Editing</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_03.htm" webstripperlinkwas="ch02_03.htm" title="2.3 Emacs Editing Mode"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 2.3 Emacs Editing Mode" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="KSH-CH-2-SECT-1">2.2 The History File</A
></H2
><p class="para"><a class="indexterm" name="KSH-CH-2-IX-HIST-FILE"></A
>All of the Korn shell's command history facilities depend on a file
that contains commands as you type them in. This file is 
normally <em class="emphasis">.sh_history</EM
> in your home directory,
but you can call it whatever you like by setting the
environment variable HISTFILE (see <a class="xref" href="ch03_01.htm" webstripperlinkwas="ch03_01.htm" title="Customizing Your Environment">Chapter 3</A
>). <a class="indexterm" name="AUTOID-2166"></A
><a class="indexterm" name="AUTOID-2168"></A
>
When you run one of the Korn shell's editing modes, you are actually
running a mini-editor on your history file.</P
><p class="para"><a class="indexterm" name="AUTOID-2172"></A
><a class="indexterm" name="AUTOID-2174"></A
>If you run more than one login
session at a time (e.g., more than one <em class="emphasis">xterm</EM
> on an X Windows
workstation), you may find it advantageous to maintain a separate
history file for each login session.  <a class="indexterm" name="AUTOID-2177"></A
><a class="indexterm" name="AUTOID-2180"></A
><a class="indexterm" name="AUTOID-2183"></A
><a class="indexterm" name="AUTOID-2186"></A
>
Put the following line in your <em class="emphasis">.profile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">HISTFILE=~/.hist$$</PRE
></BLOCKQUOTE
></P
><p class="para">This creates a history file whose name
begins with <b class="emphasis.bold">.hist</B
> and ends with a number that is essentially guaranteed
to be unique; see <a class="xref" href="ch08_01.htm" webstripperlinkwas="ch08_01.htm" title="Process Handling">Chapter 8</A
> for an
explanation of why <em class="emphasis">.hist$$</EM
> generates a unique name.
Unfortunately, if you do this,
you will end up with lots of
stray history files hanging around. One way to clean up the unneeded
history 
files is to clean up after yourself at logout time, as explained
in <a class="xref" href="ch04_01.htm" webstripperlinkwas="ch04_01.htm" title="Basic Shell Programming">Chapter 4</A
>. <a class="indexterm" name="AUTOID-2196"></A
>
Another way 
is to put an entry in
your personal <em class="emphasis">crontab</EM
> file (see the 
man page <em class="emphasis">crontab</EM
>(1))
[4]
that removes all history files every day at some benign time like
2 A.M. The following line will do it:</P
><blockquote class="footnote"><p class="para">[4] Some versions of UNIX do not support personal <em class="emphasis">crontab</EM
> files,
though all versions derived from AT&amp;T System V should. If yours
does not, you have two options: either use <em class="emphasis">at</EM
> with a script
that reschedules itself at the end, or ask your system administrator
to put an appropriate command in the system's <em class="emphasis">crontab</EM
> file.</P
></BLOCKQUOTE
><p class="para"><blockquote class="screen"><pre class="screen">0 2 * * * rm ~/.hist*</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-2208"></A
><a class="indexterm" name="AUTOID-2210"></A
>Another environment variable, HISTSIZE, can be used to determine
the maximum number of commands kept in the history file. The
default is 128 (i.e., the 128 most recent commands),
which should be more than adequate.<a class="indexterm" name="AUTOID-2213"></A
></P
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch02_01.htm" webstripperlinkwas="ch02_01.htm" title="2.1 Enabling Command-line Editing"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 2.1 Enabling Command-line Editing" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" title="Learning the Korn Shell"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="Learning the Korn Shell" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch02_03.htm" webstripperlinkwas="ch02_03.htm" title="2.3 Emacs Editing Mode"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 2.3 Emacs Editing Mode" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">2.1 Enabling Command-line Editing</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">2.3 Emacs Editing Mode</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
