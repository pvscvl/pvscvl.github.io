<html><head><title>[Chapter 38] 38.5 The ps Command </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:49:38Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch38_01.htm" webstripperlinkwas="ch38_01.htm" title="38. Starting, Stopping, and Killing Processes"><link rel="prev" href="ch38_04.htm" webstripperlinkwas="ch38_04.htm" title="38.4 Subshells "><link rel="next" href="ch38_06.htm" webstripperlinkwas="ch38_06.htm" title="38.6 The Controlling Terminal "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch38_04.htm" webstripperlinkwas="ch38_04.htm" title="38.4 Subshells "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 38.4 Subshells " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 38<br>Starting, Stopping, and Killing Processes</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch38_06.htm" webstripperlinkwas="ch38_06.htm" title="38.6 The Controlling Terminal "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 38.6 The Controlling Terminal " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-1940">38.5 The ps Command </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-42531"></A
><a class="indexterm" name="AUTOID-42533"></A
><a class="indexterm" name="AUTOID-42535"></A
>The <em class="emphasis">ps</EM
> command 
produces a report summarizing execution statistics for current
processes. The bare <em class="emphasis">ps</EM
> command
lists the process ID, the terminal the command was started from, how
much CPU time it has used, and the command itself. The output looks
something like this (it differs from system to system):</P
><p class="para"><blockquote class="screen"><pre class="screen">PID TT STAT  TIME COMMAND
 1803 p5 IW    0:00 -csh (csh)
 1883 p5 IW    0:04 vi outline
 1811 p6 IW    0:01 -csh (csh)
 5353 p6 TW    0:01 vi 4890</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-42542"></A
><a class="indexterm" name="AUTOID-42544"></A
>By default, <em class="emphasis">ps</EM
> lists only your own processes.
There are many times, though, when it's desirable to have a more
complete listing with a
lot of data about all of the processes currently running on the system.
The options required to do this differ between BSD UNIX and System V. 
Under BSD UNIX,
the command is <em class="emphasis">ps -aux</EM
>, which produces a table of all processes,
arranged in order of decreasing CPU usage at the moment when the <em class="emphasis">ps</EM
>
command was executed. [The <em class="emphasis">-a</EM
> option gives processes belonging
to all users, <em class="emphasis">-u</EM
> gives a more detailed listing, and <em class="emphasis">-x</EM
>
includes processes that no longer have a
<span class="link">controlling terminal (<a class="linkend" href="ch38_06.htm" webstripperlinkwas="ch38_06.htm" title="The Controlling Terminal ">38.6</A
>)</SPAN
>.
<em class="emphasis">-TOR</EM
>&nbsp;]
It is often useful to pipe this output to
<span class="link"><em class="emphasis">head</EM
> (<a class="linkend" href="ch25_20.htm" webstripperlinkwas="ch25_20.htm" title="Printing the Top of a File ">25.20</A
>)</SPAN
>,
which will display the most active processes:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ps -aux | head -5</B
></CODE
>
USER       PID %CPU %MEM   SZ  RSS TTY STAT  TIME COMMAND
martin   12923 74.2 22.5  223  376 p5  R     2:12 f77 -o foo foo.F
chavez   16725 10.9 50.8 1146 1826 p6  R N  56:04 g94 HgO.dat
ng       17026  3.5  1.2  354  240 co  I     0:19 vi benzene.txt
gull      7997  0.2  0.3  142   46 p3  S     0:04 csh</PRE
></BLOCKQUOTE
></P
><p class="para">The meanings of the fields in this output (as well as others displayed 
by the <em class="emphasis">-l</EM
> option to <em class="emphasis">ps</EM
>) are given in
<a class="xref" href="#UPT-ART-1940-TAB-0" title="ps Command Output Fields">Table 38.1</A
>.</P
><p class="para">The first line of this output shows that user <em class="emphasis">martin</EM
> is running a
FORTRAN compilation (<code class="literal">f77</CODE
>).
This process has
<span class="link">PID (<a class="linkend" href="ch38_03.htm" webstripperlinkwas="ch38_03.htm" title="Managing Processes: Overall Concepts ">38.3</A
>)</SPAN
>
12923 and is currently either running or
runable. User <em class="emphasis">chavez</EM
>'s process (PID 16725), executing the program
<em class="emphasis">g94</EM
>, is also running or runable, though at a lowered priority.
From this display, it's obvious who is using most system resources at this
instant: <em class="emphasis">martin</EM
> and <em class="emphasis">chavez</EM
> have about 85% of the CPU and 73% of
the memory between them. However, although it does display total CPU time,
<em class="emphasis">ps</EM
> does not average the <code class="literal">%CPU</CODE
> or <code class="literal">%MEM</CODE
> values over time
in any way.<a class="indexterm" name="AUTOID-42574"></A
></P
><table class="table"><caption class="table"><a class="title" name="UPT-ART-1940-TAB-0">Table 38.1: ps Command Output Fields</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Column[3]</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Contents</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">USER (BSD)</TD
><td class="entry" rowspan="1" colspan="1">Username of process owner.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">UID (System V)</TD
><td class="entry" rowspan="1" colspan="1">Username of process owner.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PID</TD
><td class="entry" rowspan="1" colspan="1">Process ID.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">%CPU</TD
><td class="entry" rowspan="1" colspan="1">Estimated fraction of CPU consumed (BSD).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">%MEM</TD
><td class="entry" rowspan="1" colspan="1">Estimated fraction of system memory consumed (BSD).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">SZ</TD
><td class="entry" rowspan="1" colspan="1">Virtual memory used in K (BSD) or pages (System V).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">RSS</TD
><td class="entry" rowspan="1" colspan="1">Real memory used (in same units as SZ).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TT, TTY</TD
><td class="entry" rowspan="1" colspan="1">Terminal port associated with process.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">STAT (BSD),</TD
><td class="entry" rowspan="1" colspan="1">Current process state; one (or more under BSD) of:</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">    S (System V)</TD
><td class="entry" rowspan="1" colspan="1"></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">R:  Running or runnable.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">S:  Sleeping.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">I:  Idle (BSD). Intermediate state (System V).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">T:  <span class="link">Stopped (<a class="linkend" href="ch12_08.htm" webstripperlinkwas="ch12_08.htm" title="Job Control in a Nutshell ">12.8</A
>)</SPAN
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">Z:  <span class="link">Zombie process (<a class="linkend" href="ch38_16.htm" webstripperlinkwas="ch38_16.htm" title="Why You Can't Kill a Zombie ">38.16</A
>)</SPAN
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">D (BSD):  Disk wait.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">P (BSD):  Page wait.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">X (System V):  Growing: waiting for memory.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">K (AIX):  Available kernel process.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">W (BSD):  Swapped out.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">N (BSD):  <span class="link">Niced (<a class="linkend" href="ch39_09.htm" webstripperlinkwas="ch39_09.htm" title='Know When to Be "nice&quot; to OTher Users...and When' not to'>39.9</A
>, <a class="linkend" href="ch39_11.htm" webstripperlinkwas="ch39_11.htm" title="Changing a Job's Priority Under BSD UNIX ">39.11</A
>)</SPAN
>:execution priority lowered.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"></TD
><td class="entry" rowspan="1" colspan="1">&gt; (BSD):  Execution priority<span class="link">artificially raised (<a class="linkend" href="ch39_11.htm" webstripperlinkwas="ch39_11.htm" title="Changing a Job's Priority Under BSD UNIX ">39.11</A
>)</SPAN
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">TIME</TD
><td class="entry" rowspan="1" colspan="1">Total CPU time used.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">COMMAND</TD
><td class="entry" rowspan="1" colspan="1">Command line being executed (may be truncated).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">STIME (System V)</TD
><td class="entry" rowspan="1" colspan="1">Time or date process started.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">C (System V),</TD
><td class="entry" rowspan="1" colspan="1">Short term CPU-use factor; used by scheduler for</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">   CP (BSD)</TD
><td class="entry" rowspan="1" colspan="1">computing execution priority (PRI below).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">F</TD
><td class="entry" rowspan="1" colspan="1">Flags associated with process (see <em class="emphasis">ps</EM
> manual page).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PPID</TD
><td class="entry" rowspan="1" colspan="1">Parent's PID.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">PRI</TD
><td class="entry" rowspan="1" colspan="1">Actual execution priority (recomputed dynamically).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">NI</TD
><td class="entry" rowspan="1" colspan="1">Process <span class="link">nice number (<a class="linkend" href="ch39_09.htm" webstripperlinkwas="ch39_09.htm" title='Know When to Be "nice&quot; to OTher Users...and When' not to'>39.9</A
>)</SPAN
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">WCHAN</TD
><td class="entry" rowspan="1" colspan="1">Event process is waiting for.</TD
></TR
></TBODY
></TABLE
><blockquote class="footnote"><p class="para">[3] Some vendors add other fields, such as the processor number for
multiprocessors and additional or different process states (as in the
AIX K field). These codes may differ from vendor to vendor: for
example, the 0 code under Stardent UNIX means a process that is
actually running (and R means runable) while 0 under AIX means a
nonexistent process.</P
></BLOCKQUOTE
><p class="para"><a class="indexterm" name="AUTOID-42690"></A
>A vaguely similar listing is produced by the System V <em class="emphasis">ps -ef</EM
> command:
<blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>ps -ef</B
></CODE
>
   UID   PID  PPID   C    STIME     TTY  TIME CMD
  root     0     0   0 09:36:35       ?  0:00 sched
  root     1     0   0 09:36:35       ?  0:02 /etc/init 
  ...
  gull  7997     1  10 09:49:32   ttyp3  0:04 csh
martin 12923 11324   9 10:19:49   ttyp5 56:12 f77 -o foo foo.F     
chavez 16725 16652  15 17:02:43   ttyp6 10:04 g94 HgO.dat
    ng 17026 17012  14 17:23:12 console  0:19 vi benzene.txt</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-42697"></A
>The columns hold the username, process ID, parent's PID (the
PID of the process that created it), the current scheduler
value, the time the process started, its associated terminal, its
accumulated CPU time, and the command it is running. Note that
the ordering is by PID, not resource usage.</P
><p class="para"><a class="indexterm" name="AUTOID-42700"></A
>AIX's version of the <em class="emphasis">ps</EM
> command supports both BSD
and System V options. The BSD options are not preceded by a
hyphen (which is a legal syntax variation), and the System V options
are. Thus, under AIX, <code class="literal">ps&nbsp;-au</CODE
> is not the same as
<code class="literal">ps&nbsp;au</CODE
>.  The command is the System V version, however, even if
its output is displayed with the BSD column headings. Thus,
<em class="emphasis">ps aux</EM
> output is displayed in <code class="literal">PID</CODE
> rather than
<code class="literal">%CPU</CODE
> order.</P
><p class="para"><a class="indexterm" name="AUTOID-42710"></A
><a class="indexterm" name="AUTOID-42713"></A
><em class="emphasis">ps</EM
> is also useful in pipes; a common use is:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ps -aux | grep chavez</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">to see what user <em class="emphasis">chavez</EM
> has currently running.  [Under System V,
use <code class="literal">ps&nbsp;-u&nbsp;chavez</CODE
>. <em class="emphasis">-JP</EM
>]</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">AF</SPAN
> <span class="bibliomisc">from O'Reilly &amp; Associates' <cite class="citetitle">Essential System Administration</CITE
>, Chapter 7</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch38_04.htm" webstripperlinkwas="ch38_04.htm" title="38.4 Subshells "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 38.4 Subshells " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch38_06.htm" webstripperlinkwas="ch38_06.htm" title="38.6 The Controlling Terminal "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 38.6 The Controlling Terminal " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">38.4 Subshells </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">38.6 The Controlling Terminal </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
