<html><head><title>[Chapter 9] 9.6 String Editing (Colon) Operators </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:34:57Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch09_01.htm" webstripperlinkwas="ch09_01.htm" title="9. Saving Time on the Command Line"><link rel="prev" href="ch09_05.htm" webstripperlinkwas="ch09_05.htm" title="9.5 Build Strings with {&nbsp;} "><link rel="next" href="ch09_07.htm" webstripperlinkwas="ch09_07.htm" title="9.7 String Editing in ksh and bash "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_05.htm" webstripperlinkwas="ch09_05.htm" title="9.5 Build Strings with {&nbsp;} "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 9.5 Build Strings with {&nbsp;} " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 9<br>Saving Time on the Command Line</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch09_07.htm" webstripperlinkwas="ch09_07.htm" title="9.7 String Editing in ksh and bash "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 9.7 String Editing in ksh and bash " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7670">9.6 String Editing (Colon) Operators </A
></H2
><p class="para"><a class="indexterm" name="UPT-ART-7670-IX-COLON1-STRING-EDITING-OPERATOR"></A
><a class="indexterm" name="AUTOID-9938"></A
><a class="indexterm" name="UPT-ART-7670-IX-HISTORY-OF-COMMAND-EDITING-SUBSTITUTIONS"></A
><a class="indexterm" name="UPT-ART-7670-IX-C-SHELL-CSH-EDITING-HISTORY-SUBSTITUTIONS"></A
><a class="indexterm" name="UPT-ART-7670-IX-STRINGS-EDITING-CSH"></A
>When the C shell and <em class="emphasis">bash</EM
> do
<span class="link">history substitutions (<a class="linkend" href="ch11_07.htm" webstripperlinkwas="ch11_07.htm" title="History Substitutions ">11.7</A
>)</SPAN
>
they can also edit the substitution.
The C shell&nbsp;- but not <em class="emphasis">bash</EM
>&nbsp;- can also edit
<span class="link">variable substitutions (<a class="linkend" href="ch06_08.htm" webstripperlinkwas="ch06_08.htm" title="Shell Variables ">6.8</A
>)</SPAN
>.
For instance, in the first example below, when <code class="literal">!$</CODE
> contains
<code class="literal">/a/b/c</CODE
>, adding the &quot;head&quot; operator <code class="literal">:h</CODE
> will give just the head of
the pathname, <code class="literal">/a/b</CODE
>.</P
><p class="para">For a complete but very terse list of these operators, see the <em class="emphasis">csh</EM
> manual
page.
We hope the examples below will help you understand these useful operators.</P
><ul class="itemizedlist"><li class="listitem"><p class="para"><code class="userinput"><b>:h</B
></CODE
> gives the head of a
<span class="link">pathname (<a class="linkend" href="ch14_02.htm" webstripperlinkwas="ch14_02.htm" title="Using Relative and Absolute Pathnames ">14.2</A
>)</SPAN
>,
as follows:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo /a/b/c</B
></CODE
>
/a/b/c
% <code class="userinput"><b>echo !$:h</B
></CODE
>
echo /a/b
/a/b</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;That took off the filename and left the header.
This also could be used with C shell
<span class="link">variables (<a class="linkend" href="ch47_05.htm" webstripperlinkwas="ch47_05.htm" title="Using C Shell Arrays ">47.5</A
>)</SPAN
>
as:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>set x = /a/b/c</B
></CODE
>
% <code class="userinput"><b>echo $x</B
></CODE
>
/a/b/c
% <code class="userinput"><b>echo $x:h</B
></CODE
>
/a/b</PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:r</B
></CODE
> returns the root of a filename:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo xyz.c abc.c</B
></CODE
>
xyz.c abc.c
% <code class="userinput"><b>echo !$:r</B
></CODE
>
echo abc
abc</PRE
></BLOCKQUOTE
></P
><p class="para">The <code class="literal">:r</CODE
> removed the <code class="literal">.c</CODE
> from the last argument,
leaving the root name.
This could also be used in C shell variable names:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>set x = abc.c</B
></CODE
>
% <code class="userinput"><b>echo $x:r</B
></CODE
>
abc</PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:g</B
></CODE
>
For more than one name, you can add the <em class="emphasis">g</EM
> operator to make
the operation global. For example:&#13;</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch47_05.htm" webstripperlinkwas="ch47_05.htm" title="47.5 Using C Shell Arrays ">(...)</A
> 
&#13;</PRE
></TH
><td valign="TOP"><pre class="screen">
% <code class="userinput"><b>set x = (a.a b.b c.c)</B
></CODE
>
% <code class="userinput"><b>echo $x:gr</B
></CODE
>
a b c</PRE
></TD
></TR
></TABLE
></P
><p class="para">The <code class="literal">:gr</CODE
> operator stripped off all dot
(<code class="literal">.</CODE
>) suffixes.
By the way, this use of <em class="emphasis">g</EM
> does not work with the history commands.</P
><p class="para">This is the C shell's answer to the
<span class="link"><em class="emphasis">basename</EM
> (<a class="linkend" href="ch45_18.htm" webstripperlinkwas="ch45_18.htm" title="Using basename and dirname ">45.18</A
>)</SPAN
>
command.</P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:e</B
></CODE
> returns the extension (the part of the name after a dot).
Using <em class="emphasis">csh</EM
> variables:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>set x=(abc.c)</B
></CODE
>
% <code class="userinput"><b>echo $x:e</B
></CODE
>
c</PRE
></BLOCKQUOTE
></P
><p class="para">No luck using that within history, either.</P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:t</B
></CODE
> gives the tail of a pathname&nbsp;- the actual filename without the path:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo /a/b/c</B
></CODE
>
/a/b/c
% <code class="userinput"><b>echo !$:t</B
></CODE
>
c</PRE
></BLOCKQUOTE
></P
><p class="para">With <em class="emphasis">csh</EM
> variables:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>set x=(/a/b/c)</B
></CODE
>
% <code class="userinput"><b>echo $x:t</B
></CODE
>
c</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;And with multiple pathnames, you can do it globally with:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>set x=(/a/b/c /d/e/f /g/h/i)</B
></CODE
>
% <code class="userinput"><b>echo $x:gt</B
></CODE
>
c f i</PRE
></BLOCKQUOTE
></P
><p class="para">While the corresponding heads would be:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>set x=(/a/b/c /d/e/f /g/h/i)</B
></CODE
>
% <code class="userinput"><b>echo $x:gh</B
></CODE
>
/a/b /d/e /g/h</PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:p</B
></CODE
>
<span class="link">prints the command, but does not execute it (<a class="linkend" href="ch11_10.htm" webstripperlinkwas="ch11_10.htm" title="Check Your History First with :p ">11.10</A
>)</SPAN
>:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo *</B
></CODE
>
fn1 fn2 fn3
% <code class="userinput"><b>!:p</B
></CODE
>
echo fn1 fn2 fn3</PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:q</B
></CODE
> prevents further filename expansion, or prints the command as is:&#13;</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo *</B
></CODE
>
fn1 fn2 fn3
% <code class="userinput"><b>!:q</B
></CODE
>
echo *
*</PRE
></BLOCKQUOTE
></P
><p class="para">The first command echoed the files in the directory, and when the <code class="literal">:q</CODE
>
was applied, it echoed only the special character.</P
></LI
><li class="listitem"><p class="para"><code class="userinput"><b>:x</B
></CODE
> is like <code class="literal">:q</CODE
>, but it breaks the line into words.
That is, when using <code class="literal">:q</CODE
>, it is all one word, while <code class="literal">:x</CODE
>
will break it up into multiple words.
[<code class="literal">:q</CODE
> and <code class="literal">:x</CODE
> are more often used with
<span class="link">C shell arrays (<a class="linkend" href="ch47_05.htm" webstripperlinkwas="ch47_05.htm" title="Using C Shell Arrays ">47.5</A
>)</SPAN
>.
-<em class="emphasis">JP</EM
>&nbsp;]</P
></LI
></UL
><a class="indexterm" name="AUTOID-10071"></A
><a class="indexterm" name="AUTOID-10072"></A
><a class="indexterm" name="AUTOID-10073"></A
><a class="indexterm" name="AUTOID-10074"></A
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">DR</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_05.htm" webstripperlinkwas="ch09_05.htm" title="9.5 Build Strings with {&nbsp;} "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 9.5 Build Strings with {&nbsp;} " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch09_07.htm" webstripperlinkwas="ch09_07.htm" title="9.7 String Editing in ksh and bash "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 9.7 String Editing in ksh and bash " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">9.5 Build Strings with {&nbsp;} </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">9.7 String Editing in ksh and bash </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
