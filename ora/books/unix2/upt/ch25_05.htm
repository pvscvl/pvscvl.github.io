<html><head><title>[Chapter 25] 25.5 Page Through Compressed, RCS, Unprintable Files </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:43:09Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch25_01.htm" webstripperlinkwas="ch25_01.htm" title="25. Showing What's in a File"><link rel="prev" href="ch25_04.htm" webstripperlinkwas="ch25_04.htm" title='25.4 The "less&quot; Pager: More than "more&quot;'><link rel="next" href="ch25_06.htm" webstripperlinkwas="ch25_06.htm" title="25.6 What's in That White Space? "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch25_04.htm" webstripperlinkwas="ch25_04.htm" title='25.4 The "less&quot; Pager: More than "more&quot;'><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt='Previous: 25.4 The "less&quot; Pager: More than "more&quot;' border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 25<br>Showing What's in a File</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch25_06.htm" webstripperlinkwas="ch25_06.htm" title="25.6 What's in That White Space? "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 25.6 What's in That White Space? " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7170">25.5 Page Through Compressed, RCS, Unprintable Files </A
></H2
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="zmore">zmore</A
><br></TH
><td valign="TOP"><a class="indexterm" name="AUTOID-27381"></A
><a class="indexterm" name="AUTOID-27384"></A
><a class="indexterm" name="AUTOID-27386"></A
><a class="indexterm" name="AUTOID-27389"></A
><span class="link">Compressed (<a class="linkend" href="ch24_07.htm" webstripperlinkwas="ch24_07.htm" title="Compressing Files to Save Space ">24.7</A
>)</SPAN
>
files save disk space.
But compressed files aren't as convenient to work with: you have to
uncompress them before you can read or edit them.<a class="indexterm" name="AUTOID-27392"></A
>

The <em class="emphasis">zmore</EM
> script (also named <em class="emphasis">zpg</EM
> and <em class="emphasis">zless</EM
>)
makes the job easier.
It uncompresses one or more files and feeds them to a pager:
<span class="link"><em class="emphasis">more</EM
> (<a class="linkend" href="ch25_03.htm" webstripperlinkwas="ch25_03.htm" title="Using more to Page Through Files ">25.3</A
>)</SPAN
>,
<em class="emphasis">pg</EM
>, or
<span class="link"><em class="emphasis">less</EM
> (<a class="linkend" href="ch25_04.htm" webstripperlinkwas="ch25_04.htm" title='The "less&quot; Pager: More than "more&quot;'>25.4</A
>)</SPAN
>.
(The script uses GNU <em class="emphasis">gzcat</EM
>, which can read both
<em class="emphasis">gzip</EM
> and <em class="emphasis">compress</EM
> format.)<a class="indexterm" name="AUTOID-27406"></A
>
The script can also page through files that have been made printable by
<span class="link"><em class="emphasis">cat -v -t -e</EM
> (<a class="linkend" href="ch25_07.htm" webstripperlinkwas="ch25_07.htm" title="Show Non-Printing Characters with cat -v or od -c ">25.7</A
>, <a class="linkend" href="ch25_06.htm" webstripperlinkwas="ch25_06.htm" title="What's in That White Space? ">25.6</A
>)</SPAN
>.
This is a safe way to page through files that might have unprintable
characters that could mess up your terminal if they weren't filtered.
Finally, the script can page through the latest revision of an
<span class="link">RCS file (<a class="linkend" href="ch20_14.htm" webstripperlinkwas="ch20_14.htm" title="RCS Basics ">20.14</A
>)</SPAN
>.</TD
></TR
></TABLE
><p class="para">Here's an example.
Let's page through the <em class="emphasis">gzip</EM
>ped files <em class="emphasis">data.gz</EM
> and
<em class="emphasis">../summary.gz</EM
>.
Then we'll read the suspiciously named file <em class="emphasis">Ex034912</EM
> to see what's in it:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>zmore data ../summary</B
></CODE
>      <em class="emphasis">You don't need to type the .gz</EM
>

   ...<em class="emphasis">First screen of data.gz, uncompressed</EM
>...

--More--

   ...<em class="emphasis">The rest of data.gz, uncompressed</EM
>...

zmore: Press RETURN to see next file, '../summary':

   ...<em class="emphasis">First screen of ../summary.gz, uncompressed</EM
>...

% <code class="userinput"><b>vmore Ex034912</B
></CODE
>

   ...<em class="emphasis">First screen of Ex034912, filtered with cat -t -v -e</EM
>...</PRE
></BLOCKQUOTE
></P
><p class="para">The same script file does all those things.
It's written to have eight other
<span class="link">links (<a class="linkend" href="ch18_03.htm" webstripperlinkwas="ch18_03.htm" title="Files with Two or More Names">18.3</A
>)</SPAN
>:
<em class="emphasis">zpg</EM
>, <em class="emphasis">zless</EM
>, <em class="emphasis">vmore</EM
>, <em class="emphasis">vpg</EM
>, <em class="emphasis">vless</EM
>,
<em class="emphasis">rcsmore</EM
>, <em class="emphasis">rcspg</EM
>, and <em class="emphasis">rcsless</EM
>.
The script tests the name it was called with, from <code class="literal">$0</CODE
>, to decide
whether to use <em class="emphasis">gzcat</EM
>, <em class="emphasis">cat -t -v -e</EM
>, or
<em class="emphasis">co&nbsp;-p</EM
>, and which pager to run.
This trick saves disk space.
You can change the pagers used by modifying the script and adding or
removing links to it.
The absolute pathnames at the start of the script may need to be changed
for your system.</P
><p class="para">Most pager programs can't back up or move around as easily when they're
reading from a pipe.
(<em class="emphasis">less</EM
> can.)
You can use a temporary file instead.
That's not as efficient as using a pipe, but it's good to be able to do.
To do

that, add the following two lines after the second <em class="emphasis">case</EM
>
statement:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch21_03.htm" webstripperlinkwas="ch21_03.htm" title="21.3 Unique Names for Temporary Files ">/tmp..$$</A
> 
<a class="co" href="ch44_12.htm" webstripperlinkwas="ch44_12.htm" title="44.12 Trapping Exits Caused by Interrupts ">trap</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
temp=/tmp/$myname$$
trap 'rm -f $temp; exit' 0 1 2 15</PRE
></TD
></TR
></TABLE
></P
><p class="para">And change this line inside the <em class="emphasis">while</EM
> loop, around line 38:</P
><p class="para"><blockquote class="screen"><pre class="screen">*) $cat &quot;$1&quot; | $prog $opts ;;</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;to these three lines:</P
><p class="para"><blockquote class="screen"><pre class="screen">*) $cat &quot;$1&quot; &gt; $temp
   $prog $opts $temp
   ;;</PRE
></BLOCKQUOTE
></P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch25_04.htm" webstripperlinkwas="ch25_04.htm" title='25.4 The "less&quot; Pager: More than "more&quot;'><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt='Previous: 25.4 The "less&quot; Pager: More than "more&quot;' border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch25_06.htm" webstripperlinkwas="ch25_06.htm" title="25.6 What's in That White Space? "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 25.6 What's in That White Space? " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">25.4 The "less&quot; Pager: More than "more&quot;</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">25.6 What's in That White Space? </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
