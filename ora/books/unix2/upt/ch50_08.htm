<html><head><title>[Chapter 50] 50.8 Which Version Am I Using? </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:56:58Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch50_01.htm" webstripperlinkwas="ch50_01.htm" title="50. Help--Online Documentation, etc."><link rel="prev" href="ch50_07.htm" webstripperlinkwas="ch50_07.htm" title="50.7 How UNIX Systems Remember Their Name "><link rel="next" href="ch50_09.htm" webstripperlinkwas="ch50_09.htm" title="50.9 Reading a Permuted Index "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch50_07.htm" webstripperlinkwas="ch50_07.htm" title="50.7 How UNIX Systems Remember Their Name "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 50.7 How UNIX Systems Remember Their Name " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 50<br>Help--Online Documentation, etc.</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch50_09.htm" webstripperlinkwas="ch50_09.htm" title="50.9 Reading a Permuted Index "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 50.9 Reading a Permuted Index " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-6740">50.8 Which Version Am I Using? </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-59354"></A
><a class="indexterm" name="AUTOID-59357"></A
><a class="indexterm" name="AUTOID-59359"></A
><a class="indexterm" name="AUTOID-59362"></A
><a class="indexterm" name="AUTOID-59365"></A
><a class="indexterm" name="AUTOID-59368"></A
><a class="indexterm" name="AUTOID-59371"></A
><a class="indexterm" name="AUTOID-59374"></A
><a class="indexterm" name="AUTOID-59377"></A
>The <em class="emphasis">which</EM
> command is a real life saver.
It has become
increasingly important in the last
few years.
Many vendors (like Sun) are providing separate directories
of BSD-compatible and System V-compatible commands.
Which command
you'll get depends on your 
<span class="link"><em class="emphasis">PATH</EM
> (<a class="linkend" href="ch06_04.htm" webstripperlinkwas="ch06_04.htm" title="The PATH Environment Variable ">6.4</A
>)</SPAN
>
environment variable.
It's often essential to know which version you're using.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>which sort</B
></CODE
>
/bin/sort</PRE
></BLOCKQUOTE
></P
><p class="para">tells me exactly which version of the <em class="emphasis">sort</EM
> program I'm using.
(Under SunOS 4.1, this is the BSD-compatible version in <em class="emphasis">/bin</EM
>,
not the System V version in <em class="emphasis">/usr/5bin</EM
>.)</P
><p class="para">You'll find that <em class="emphasis">which</EM
> comes in handy in lots of other
situations.
I find that I'm always using <em class="emphasis">which</EM
> inside of
backquotes to get a precise path.
For example, when I was writing these articles, I started
wondering whether or not <em class="emphasis">man</EM
>, <em class="emphasis">apropos</EM
>, and <em class="emphasis">whatis</EM
>
were really the same executable.
It's a simple question, but one I
had never bothered to think about.
There's one good way to find out:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ls -li `which man` `which apropos` `which whatis`</B
></CODE
>
102352 -rwxr-xr-x  3 root        24576 Feb  8  1990 /usr/ucb/apropos
102352 -rwxr-xr-x  3 root        24576 Feb  8  1990 /usr/ucb/man
102352 -rwxr-xr-x  3 root        24576 Feb  8  1990 /usr/ucb/whatis</PRE
></BLOCKQUOTE
></P
><p class="para">What does this tell us?
First, the three commands have the same file
size, which means that they're likely to be identical; furthermore,
each file has three links, meaning that each file has three names.
The <em class="emphasis">-i</EM
> option confirms it; all three files have the same
<span class="link">i-number (<a class="linkend" href="ch01_22.htm" webstripperlinkwas="ch01_22.htm" title="How UNIX Keeps Track of Files: Inodes ">1.22</A
>)</SPAN
>.
So, <em class="emphasis">apropos</EM
>, <em class="emphasis">man</EM
>, and <em class="emphasis">whatis</EM
> are just
one executable file that has three hard links.</P
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="which">which</A
><br></TH
><td valign="TOP">A few System V implementations don't have a <em class="emphasis">which</EM
> command.

The version of <em class="emphasis">which</EM
> on the CD-ROM is even better
than the BSD <em class="emphasis">which</EM
>, anyway.
By default, this new <em class="emphasis">which</EM
> works about the same as the BSD <em class="emphasis">which</EM
>.
The new <em class="emphasis">which</EM
> has a big plus: it doesn't try to read your <em class="emphasis">.cshrc</EM
>
file to see what aliases you've set there.
Instead, you set it up with its <em class="emphasis">-\i</EM
> option
to read your shell's <em class="emphasis">current</EM
> list of aliases.
This lets the new <em class="emphasis">which</EM
> show aliases that you've typed at a prompt
and haven't stored in <em class="emphasis">.cshrc</EM
>.
The new <em class="emphasis">which</EM
> also works in
<span class="link">Bourne-like shells (<a class="linkend" href="ch01_08.htm" webstripperlinkwas="ch01_08.htm" title="There Are Many Shells ">1.8</A
>)</SPAN
>
that have
<span class="link">shell functions (<a class="linkend" href="ch10_09.htm" webstripperlinkwas="ch10_09.htm" title="Shell Functions ">10.9</A
>)</SPAN
>.</TD
></TR
></TABLE
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="csh_init">csh_init</A
><br><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="sh_init">sh_init</A
><br></TH
><td valign="TOP">To make the new <em class="emphasis">which</EM
> read your current aliases, you need a trick.<a class="indexterm" name="AUTOID-59423"></A
><a class="indexterm" name="AUTOID-59426"></A
>

Here's the trick: make an alias or shell function that runs <em class="emphasis">which</EM
>,
passing the definition (if any) of the alias or function you name.</TD
></TR
></TABLE
><p class="para">Let's look at the setup, then explain it.
For the C shell, use the following line in your <em class="emphasis">.cshrc</EM
> file:</P
><p class="para"><a class="indexterm" name="AUTOID-59435"></A
><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch10_03.htm" webstripperlinkwas="ch10_03.htm" title="10.3 C Shell Aliases with Command-Line Arguments ">!\$</A
> <a class="co" href="ch10_03.htm" webstripperlinkwas="ch10_03.htm" title="10.3 C Shell Aliases with Command-Line Arguments ">!\*</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
alias which alias !\$  /usr/local/bin/which -i !\*</PRE
></TD
></TR
></TABLE
></P
><p class="para">(There's a similar shell function on the CD-ROM.)
For this example, let's say you've also defined an alias for <em class="emphasis">sort</EM
>
that looks like:</P
><p class="para"><blockquote class="screen"><pre class="screen">alias sort /usr/local/bin/quicksort</PRE
></BLOCKQUOTE
></P
><p class="para">Okay.
To run <em class="emphasis">which</EM
>, you type:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>which sort</B
></CODE
>
sort    /usr/local/bin/quicksort</PRE
></BLOCKQUOTE
></P
><p class="para">How did that work?
The C shell runs the alias you defined for <em class="emphasis">which</EM
>.
In this example, that executes the following command:</P
><p class="para"><blockquote class="screen"><pre class="screen">alias sort | /usr/local/bin/which -i sort</PRE
></BLOCKQUOTE
></P
><p class="para">The first part of that command,
<code class="literal">alias&nbsp;sort</CODE
>, will pipe the definition of the <em class="emphasis">sort</EM
> alias to the
standard input of <code class="literal">/usr/local/bin/which&nbsp;-i&nbsp;sort</CODE
>.
When <em class="emphasis">/usr/local/bin/which&nbsp;-i&nbsp;sort</EM
> sees an alias definition on its
standard input, it outputs that definition.</P
><p class="para">What if you ask <em class="emphasis">which</EM
> to find a command that you haven't aliased?</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>which tr</B
></CODE
>
/bin/tr</PRE
></BLOCKQUOTE
></P
><p class="para">The shell runs this command:</P
><p class="para"><blockquote class="screen"><pre class="screen">alias tr | /usr/local/bin/which -i tr</PRE
></BLOCKQUOTE
></P
><p class="para">Because there's no alias for <em class="emphasis">tr</EM
>, the shell command <code class="literal">alias&nbsp;tr</CODE
>
sends no output down the pipe.
When <code class="literal">/usr/local/bin/which&nbsp;-i&nbsp;tr</CODE
> doesn't read text on standard
input, it looks through your search path for the first command named <em class="emphasis">tr</EM
>.</P
><p class="para">Nice trick, isn't it?
Maarten Litmaath, the program's author, is a clever guy.</P
><p class="para">That's not all the new <em class="emphasis">which</EM
> can do.
With the <em class="emphasis">-a</EM
> option, it shows any alias you name and <em class="emphasis">also</EM
>
searches your path for <em class="emphasis">all</EM
> commands with that name.
This is useful when you want to know all available versions of the command.
Let's end this article with an example from the manual page.
The first command shows all aliases (in this case, that's just the
alias for the new <em class="emphasis">which</EM
>).
Second, we run the new <em class="emphasis">which</EM
> to find which <em class="emphasis">which</EM
> we're running
<code class="literal">:-)</CODE
>; it shows the alias for <em class="emphasis">which</EM
>.
Third, the <em class="emphasis">-a</EM
> option shows all available <em class="emphasis">which</EM
>es:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>alias</B
></CODE
>
which   alias !$ | /usr/local/bin/which -i !*
% <code class="userinput"><b>which which</B
></CODE
>
which   alias !$ | /usr/local/bin/which -i !*
% <code class="userinput"><b>which -a which</B
></CODE
>
which   alias !$ | /usr/local/bin/which -i !*
/usr/local/bin/which
/usr/ucb/which
%</PRE
></BLOCKQUOTE
></P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">ML</SPAN
>, <span class="authorinitials">JP,&nbsp;MAL</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch50_07.htm" webstripperlinkwas="ch50_07.htm" title="50.7 How UNIX Systems Remember Their Name "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 50.7 How UNIX Systems Remember Their Name " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch50_09.htm" webstripperlinkwas="ch50_09.htm" title="50.9 Reading a Permuted Index "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 50.9 Reading a Permuted Index " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">50.7 How UNIX Systems Remember Their Name </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">50.9 Reading a Permuted Index </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
