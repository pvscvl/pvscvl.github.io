<html><head><title>[Chapter 30] 30.27 vi Compound Searches </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:45:46Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch30_01.htm" webstripperlinkwas="ch30_01.htm" title="30. vi Tips and Tricks"><link rel="prev" href="ch30_26.htm" webstripperlinkwas="ch30_26.htm" title="30.26 Shell Escapes: Running One UNIX Command While Using Another"><link rel="next" href="ch30_28.htm" webstripperlinkwas="ch30_28.htm" title="30.28 Keep Track of Functions and Included Files with ctags and tags"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_26.htm" webstripperlinkwas="ch30_26.htm" title="30.26 Shell Escapes: Running One UNIX Command While Using Another"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 30.26 Shell Escapes: Running One UNIX Command While Using Another" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 30<br>vi Tips and Tricks</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch30_28.htm" webstripperlinkwas="ch30_28.htm" title="30.28 Keep Track of Functions and Included Files with ctags and tags"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 30.28 Keep Track of Functions and Included Files with ctags and tags" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-0141">30.27 vi Compound Searches </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-34055"></A
><a class="indexterm" name="AUTOID-34058"></A
><a class="indexterm" name="AUTOID-34061"></A
>You probably know that you can search for a word or phrase with the <em class="emphasis">vi</EM
>
command <code class="literal">/</CODE
> (slash):</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>/treasure</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">If you have a file that uses the same word over and over again, you might want to
find one particular place that the word is used.
You can repeat the search with the <em class="emphasis">n</EM
> command until you find the
place you want.
That can take time and work, though.</P
><p class="para">For example, suppose you want to find the word &quot;treasure&quot;
in the sentence that has
words something like &quot;Los Alamos residents...treasure,&quot; but
you can't remember exactly how the sentence is written.
You could use wildcards in your
<span class="link">regular expression (<a class="linkend" href="ch26_04.htm" webstripperlinkwas="ch26_04.htm" title="Using Metacharacters in Regular Expressions ">26.4</A
>)</SPAN
>:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>/Los Alamos.*treasure</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">but then the phrases &quot;Los Alamos&quot; and &quot;treasure&quot; have to be on the same line
of the file you're searching&nbsp;- and they won't always be.
Also, you want your cursor on the word <em class="emphasis">treasure</EM
>, but that search would
put the cursor on <em class="emphasis">Los</EM
> instead.</P
><p class="para">&quot;Hmmm,&quot; you say,
&quot;How about two separate searches, like this?&quot;</P
><p class="para"><blockquote class="screen"><pre class="screen">/Los Alamos
/treasure</PRE
></BLOCKQUOTE
></P
><p class="para">The problem there is: the file might have the phrase &quot;Los Alamos&quot; all
through it; you might have to type <em class="emphasis">n</EM
> over and over until you get to
the sentence with <em class="emphasis">treasure</EM
>.</P
><p class="para">Here's the easy way: a compound search.
Say your cursor is on line 1 of the following file:</P
><p class="para"><blockquote class="screen"><pre class="screen">Before the second World War, there was a treasured boys' school in
what was to become the city of Los Alamos, New Mexico. The school at
Los Alamos changed the lives and made a lifelong impression on most boys
who attended. One of the boys who attended the Los Alamos school went on
to propose that remote set of mesas as a site for the U.S. Government's
   ...
Since the war ended, most of the boys' school ranch buildings have been torn
down or replaced. But there's one building that Los Alamos residents still
use and treasure. It's The Lodge, a log building on the edge of what's now
   ...</PRE
></BLOCKQUOTE
></P
><p class="para">Type the command:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>/Los Alamos/;/treasure/</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">That means &quot;find the first occurrence of <em class="emphasis">treasure</EM
> just after
<em class="emphasis">Los Alamos</EM
>.&quot;
Starting at the top of the example above, that search will skip past all the
<em class="emphasis">treasure</EM
> and <em class="emphasis">Los Alamos</EM
> words until it finds the word <em class="emphasis">treasure</EM
>
on the last line shown.
(It's probably smarter to type just <code class="literal">/Alamos/;/treasure/</CODE
> in case the
<em class="emphasis">Los Alamos</EM
> is split across two lines of the file.)</P
><p class="para">Another example: a C programmer who wants to find the <em class="emphasis">printf</EM
> function
call just after the line where <em class="emphasis">i</EM
> is incremented by two (<code class="literal">i&nbsp;+=&nbsp;2</CODE
>).
She could type:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>/i += 2/;/printf/</B
></CODE
></PRE
></BLOCKQUOTE
></P
><blockquote class="note"><p class="para"><strong>NOTE:</STRONG
> You can't repeat a compound search by typing <code class="literal">n</CODE
>.
The easiest way is to define the search as a
<span class="link">key map (<a class="linkend" href="ch31_02.htm" webstripperlinkwas="ch31_02.htm" title="Save Time and Typing with the vi map Commands ">31.2</A
>)</SPAN
>:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch31_06.htm" webstripperlinkwas="ch31_06.htm" title="31.6 Protecting Keys from Interpretation by ex ">^M</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
<code class="userinput"><b>:map g /Los Alamos/;/treasure/^M</B
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">and use (in this case) <code class="literal">g</CODE
> to repeat the search.</P
></BLOCKQUOTE
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_26.htm" webstripperlinkwas="ch30_26.htm" title="30.26 Shell Escapes: Running One UNIX Command While Using Another"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 30.26 Shell Escapes: Running One UNIX Command While Using Another" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch30_28.htm" webstripperlinkwas="ch30_28.htm" title="30.28 Keep Track of Functions and Included Files with ctags and tags"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 30.28 Keep Track of Functions and Included Files with ctags and tags" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">30.26 Shell Escapes: Running One UNIX Command While Using Another</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">30.28 Keep Track of Functions and Included Files with ctags and tags</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
