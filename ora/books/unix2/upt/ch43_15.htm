<html><head><title>[Chapter 43] 43.15 From a Source File to the Printer </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-10-23T15:51:57Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch43_01.htm" webstripperlinkwas="ch43_01.htm" title="43. Printing"><link rel="prev" href="ch43_14.htm" webstripperlinkwas="ch43_14.htm" title="43.14 nroff/troff and Macro Packages "><link rel="next" href="ch43_16.htm" webstripperlinkwas="ch43_16.htm" title="43.16 groff "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch43_14.htm" webstripperlinkwas="ch43_14.htm" title="43.14 nroff/troff and Macro Packages "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 43.14 nroff/troff and Macro Packages " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 43<br>Printing</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch43_16.htm" webstripperlinkwas="ch43_16.htm" title="43.16 groff "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 43.16 groff " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-2480">43.15 From a Source File to the Printer </A
></H2
><p class="para">The path from a TeX or <em class="emphasis">troff</EM
> source file to your printer is
surprisingly complex.
It's often useful to know exactly what is
happening.
It isn't knowledge that will help you &quot;do anything&quot; (i.e.,
you won't be able to make fancier documents), but it will come in
handy&nbsp;- particularly when something goes wrong.</P
><p class="para"><a class="indexterm" name="AUTOID-48363"></A
>For TeX and <em class="emphasis">troff</EM
>, the processing is surprisingly similar, as
shown in
<a class="xref" href="#UPT-ART-2480-FIG-0" title="Processing Path for TeX or troff Source File">Figure 43.1</A
>.</P
><h4 class="figure"><a class="title" name="UPT-ART-2480-FIG-0">Figure 43.1: Processing Path for TeX or troff Source File</A
></H4
><img class="graphic" src="figs/2480.gif" webstripperlinkwas="figs/2480.gif" alt="Figure 43.1"><p class="para">You start with a source file, containing your text and markup.
First,
it's processed by one or more <em class="emphasis">preprocessors</EM
> to handle figures,
tables, and so on.
Preprocessors are essential to <em class="emphasis">troff</EM
>; they
aren't used that often with TeX, but they do exist.
What a preprocessor does is provide a simpler language for formatting
complex elements like tables, equations, or figures; the preprocessor
interprets this language, and outputs the low-level <em class="emphasis">troff</EM
> requests
needed to implement the desired result.</P
><p class="para"><a class="indexterm" name="AUTOID-48376"></A
>The most commonly
used preprocessors are listed in
<a class="xref" href="#UPT-ART-2480-TAB-0" title="Common troff and TeX Preprocessors">Table 43.1</A
></P
><table class="table"><caption class="table"><a class="title" name="UPT-ART-2480-TAB-0">Table 43.1: Common troff and TeX Preprocessors</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Name</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Used with</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">pic</TD
><td class="entry" rowspan="1" colspan="1">troff</TD
><td class="entry" rowspan="1" colspan="1">Illustrations</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">grap</TD
><td class="entry" rowspan="1" colspan="1">troff</TD
><td class="entry" rowspan="1" colspan="1">Graphs; not frequently used</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">tbl</TD
><td class="entry" rowspan="1" colspan="1">troff</TD
><td class="entry" rowspan="1" colspan="1">Tables</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">eqn</TD
><td class="entry" rowspan="1" colspan="1">troff</TD
><td class="entry" rowspan="1" colspan="1">Equations</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">tpic</TD
><td class="entry" rowspan="1" colspan="1">TeX</TD
><td class="entry" rowspan="1" colspan="1">Illustrations; equivalent to <em class="emphasis">pic</EM
></TD
></TR
></TBODY
></TABLE
><p class="para">After going through the preprocessors, you're left with a &quot;pure&quot;
document that consists of basic commands and macros.
This is fed into
the TeX or <em class="emphasis">troff</EM
> processor, which starts by adding a &quot;macro
definition file&quot; to the beginning of your text.
The processor then
produces a device independent file; this is a generic representation of
your document in terms of low-level commands.
You can't do much with
device-independent output except (possibly) inspect it for bugs.</P
><p class="para"><a class="indexterm" name="AUTOID-48413"></A
>Before going on, a word about macro files.
A macro file is nothing
more than a file of <em class="emphasis">troff</EM
> or TeX commands that defines macros,
sets up page borders, headers, footers, and so on.
Basically, a macro
file defines the look of your document, together with any
&quot;high-level&quot; (e.g., paragraph or heading) commands that you use.
For <em class="emphasis">troff</EM
>, these files are kept in the directory <em class="emphasis">/usr/lib/tmac</EM
>
and have filenames like <em class="emphasis">tmac.name</EM
>; when you invoke <em class="emphasis">troff</EM
>,
you give the option <code class="literal">-m</CODE
><code class="replaceable"><i>name</I
></CODE
> to select a macro package.</P
><p class="para">Since the macro file is nothing more than another file of <em class="emphasis">troff</EM
>
commands, there's no reason you can't just stick it onto the front of
your source file.
That is, the command:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch08_05.htm" webstripperlinkwas="ch08_05.htm" title="8.5 Command-Line Evaluation ">;</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
% <code class="userinput"><b>cat /usr/lib/tmac/tmac.s myfile.ms &gt; foo.ms; troff foo.ms</B
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">is completely equivalent to <code class="literal">troff&nbsp;-ms&nbsp;foo.ms</CODE
>.</P
><p class="para">Why would you want to insert the macro file &quot;by hand&quot;?
You usually
don't; but if you're debugging a new macro file, or if
you're defining one or two special macros for your own purposes,
adding the macros by hand can be a useful trick.</P
><p class="para">After <em class="emphasis">troff</EM
> or TeX has finished grinding your file into
dust, you're left with a device independent (or DVI) file.  I'm really
stretching terminology here, but (conceptually) this is the right way
to think.  The problem is that there are two versions of
<em class="emphasis">troff</EM
>: device independent <em class="emphasis">troff</EM
>, or <em class="emphasis">ditroff</EM
>, and
&quot;old&quot; <em class="emphasis">troff</EM
>.  <em class="emphasis">ditroff</EM
> is the only one that really
generates device independent output: generic output that can
easily be translated into a file for any printer.  The old <em class="emphasis">troff</EM
>
generates output for a C/A/T phototypesetter, an archaic beast that
probably exists only in museums.  C/A/T output is not device
independent at all: it reflects lots of C/A/T idiosyncracies
that are a pain to deal with. However, conceptually, you can think of
C/A/T output as device independent output with a botched

design; it's certainly independent of any device you're likely to see!
<code class="literal">:-)</CODE
></P
><p class="para">The concept of device independent output really originated with TeX;
TeX's DVI files are very well defined and quite elegant.
Unfortunately, they're completely different from <em class="emphasis">ditroff</EM
>&nbsp;'s DVI
files. And if you're using some &quot;third-party&quot; version of <em class="emphasis">troff</EM
>, like
SoftQuad's <em class="emphasis">sqtroff</EM
> or the FSF's <em class="emphasis">groff</EM
>, you probably have
yet another kind of device independent output to deal with.
Although they sound like they're standardized, device independent
formats aren't.</P
><p class="para">At any rate, once your processor is finished, its device independent
output (of whatever type) needs to be converted to commands for your
printer. This is done by a postprocessor. The name of the
postprocessor depends entirely on
what kind of printer you're using, which version of TeX or <em class="emphasis">troff</EM
>
you're using, and where you bought your software.
One such program is
<em class="emphasis">psroff</EM
>, which is part of Adobe's <em class="emphasis">transcript</EM
> package; it
converts <em class="emphasis">ditroff</EM
> output to PostScript.</P
><p class="para">Although this may seem complex, most of this is invisible to
you; most often, you'll invoke <em class="emphasis">troff</EM
> through a script that will
handle all the postprocessing (and possibly even the preprocessing)
for you.
However, when you need to debug something that isn't
working, there's no substitute for understanding the machinery.</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">ML</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch43_14.htm" webstripperlinkwas="ch43_14.htm" title="43.14 nroff/troff and Macro Packages "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 43.14 nroff/troff and Macro Packages " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch43_16.htm" webstripperlinkwas="ch43_16.htm" title="43.16 groff "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 43.16 groff " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">43.14 nroff/troff and Macro Packages </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">43.16 groff </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
