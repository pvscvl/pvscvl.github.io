<html><head><title>[Chapter 1] 1.14 The Kernel and Daemons </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:31:12Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch01_01.htm" webstripperlinkwas="ch01_01.htm" title="1. Introduction"><link rel="prev" href="ch01_13.htm" webstripperlinkwas="ch01_13.htm" title="1.13 Why Fundamentals Are Important "><link rel="next" href="ch01_15.htm" webstripperlinkwas="ch01_15.htm" title="1.15 Filenames "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch01_13.htm" webstripperlinkwas="ch01_13.htm" title="1.13 Why Fundamentals Are Important "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 1.13 Why Fundamentals Are Important " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 1<br>Introduction</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch01_15.htm" webstripperlinkwas="ch01_15.htm" title="1.15 Filenames "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 1.15 Filenames " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-1007">1.14 The Kernel and Daemons </A
></H2
><p class="para"><a class="indexterm" name="UPT-ART-1007-IX-KERNEL-DESCRIBED"></A
><a class="indexterm" name="UPT-ART-1007-IX-DAEMONS-DESCRIBED"></A
>If you have arrived at UNIX via DOS or some other
personal computer operating system, you will notice some big
differences. UNIX is, was, and always will be a multiuser operating
system. It is a multiuser operating system even when you're the only
person using it. It is a multiuser operating system even when it is
running on a PC with a single keyboard. And this fact has important
ramifications for everything that you do.</P
><p class="para">Why does this make a difference? Well, for one thing, you're never
the only one using the system, even when you think you are. Don't
bother to look under your desk to see if there's an extra terminal
hidden down there. There isn't. But UNIX is always doing things
&quot;behind your back,&quot; running programs of its own, whether or not you
are aware of it. The most important of these programs, the
<em class="emphasis">kernel</EM
>, is the heart of the UNIX operating system itself.
The kernel
assigns memory to each of the programs that are running, partitions
time fairly so that each program can get its job done, handles all I/O
(input/output) operations, and so on.
Another important group of programs, called
<em class="emphasis">daemons</EM
>, are the system's &quot;helpers.&quot; They run from time to
time performing small but important tasks like handling mail, running
network communications, feeding data to your printer, keeping track of
the time, and so on.</P
><p class="para"><a class="indexterm" name="AUTOID-1338"></A
>You can use UNIX for a long time without being aware of the kernel or
any of the daemons. If you suddenly see a &quot;panic&quot; message on your
terminal and your system stops in its tracks (crashes), you've
just had a run-in with the kernel. Something has gotten the kernel
confused, and it has decided to give up rather than risk doing
something foolish. And there's not much you can do
to remedy a panic; the problem usually isn't your fault. But you
should know where they're coming from. Similarly, daemons may
occasionally bombard you with messages. And when you give the
<em class="emphasis">ps</EM
> command (see the following list), there may be some names that you don't recognize.
These are probably the names of daemons that happen to be doing
something benevolent at the moment. Right now, we won't worry
about them. But you should know that they are there.</P
><p class="para">Not only are you sharing the computer with the kernel and some
mysterious daemons, you're also sharing it with yourself.
I am currently using a Sun 3 workstation. If I give the command
<span class="link"><em class="emphasis">ps</EM
> (<a class="linkend" href="ch38_05.htm" webstripperlinkwas="ch38_05.htm" title="The ps Command ">38.5</A
>)</SPAN
>,<a class="indexterm" name="AUTOID-1344"></A
>
which lists all the programs I am running, I get the following report:</P
><p class="para"><blockquote class="screen"><pre class="screen">PID TT STAT  TIME COMMAND
 1449 co IW    0:01 sunview
 1453 co S     0:27 clock -Wp 497 32 -WP 704 0 -Wi -Wh 1
 1451 p0 IW    0:04 shelltool
 1452 p0 IW    0:00 -bin/csh (csh)
 1454 p1 R     2:52 shelltool
 1455 p1 S     0:01 -bin/csh (csh)
 2217 p1 R     0:00 ps
 1504 p2 S     1:54 shelltool
 1505 p2 IW    0:01 -bin/csh (csh)
 1884 p2 S     1:32 emacs princip3.otl</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-1350"></A
>I may think that I'm only running the editor Emacs, but the
computer is actually doing a lot more for me. I'm also running
<em class="emphasis">sunview</EM
>, which keeps track of Sun's display, and I'm running a
program that displays a little clock in one corner of my screen.
I'm running several &quot;command tools,&quot; which are windows (or areas of
the screen) that act like separate terminals. Each command tool has a
<em class="emphasis">shell</EM
> (<em class="emphasis">csh</EM
>), which is a command interpreter that deciphers
everything I type at the keyboard. And I'm running the <em class="emphasis">ps</EM
>
command. And, waiting patiently somewhere, my lonely
Emacs editor is waiting for me to type some more.</P
><p class="para">If you are running the
<span class="link">X window system (<a class="linkend" href="ch01_31.htm" webstripperlinkwas="ch01_31.htm" title="The X Window System ">1.31</A
>)</SPAN
>
or if you're using a
computer with the System V <em class="emphasis">layers</EM
> facility, you will
see something different. But we guarantee that
you're running at least two programs, and quite likely many more. If
you want to see everything that's running, including the daemons, type
the command <code class="literal">ps&nbsp;-aux</CODE
> (for BSD) or <code class="literal">ps&nbsp;-el</CODE
>
(for many other flavors of <em class="emphasis">UNIX</EM
>). You'll be impressed.</P
><p class="para">Because there is so much going on at once, you have to get used to a
different way of thinking about UNIX. The UNIX kernel is a traffic
cop that mediates different demands for time, for memory, for disks,
and so on. Not only does the
kernel need to run your programs, but it also needs to run the
daemons, any programs that other users might want to start, or any
programs that you may have scheduled to
<span class="link">run automatically (<a class="linkend" href="ch40_01.htm" webstripperlinkwas="ch40_01.htm#UPT-ART-2313" title="Off-Peak Job Submission ">40.1</A
>)</SPAN
>.
When it
runs a program, the kernel allocates a small slice of time&nbsp;- up to a
second&nbsp;- and lets the program run until that slice is used up, or the
program decides to take a rest of its own accord (this is called
&quot;sleeping&quot;). At this point, whether or not the program is finished,
the kernel finds some other program to run. The UNIX kernel never
takes a vacation. It is always watching over the system.</P
><p class="para">Once you understand that the kernel is a manager that schedules many
different kinds of activity, you understand a lot about how UNIX
works. For example, if you have used any computer system previously,
you know that it's a bad idea to turn the computer off while it is
writing something on the disk. You will probably destroy the disk,
and could conceivably damage
the disk drive. The same is true for UNIX-but with an important
complication. Any of the programs that are running can start doing
something to the disk at any time. One of the daemons makes a point
of accessing the disk drive every 30 seconds or so, just to stay in
touch. Therefore, you can't just turn a UNIX computer off. You might
do all sorts of damage to the system's files&nbsp;- and not just your own,
but conceivably files belonging to many other users. To turn a
UNIX system off, you must first run a program called <em class="emphasis">shutdown</EM
>,<a class="indexterm" name="AUTOID-1367"></A
>
which kicks everyone off the system and makes sure that a daemon
won't try to play with a disk drive when you aren't looking.
Then you<a class="indexterm" name="AUTOID-1369"></A
>
run a program named <em class="emphasis">sync</EM
>, which makes sure that the disks have
finished doing everything. Only then is it safe to pull the switch.
When you start up a UNIX system, it automatically runs a<a class="indexterm" name="AUTOID-1372"></A
>
program called <em class="emphasis">fsck</EM
>, which stands for &quot;filesystem

check&quot;-its job is to find out if you shut down the system
correctly and fix any damage that might have happened if you didn't.</P
><p class="para">In this book, we will avoid administrative issues like <em class="emphasis">shutdown</EM
>,
<em class="emphasis">sync</EM
>, and <em class="emphasis">fsck</EM
>. But they provide good examples of how
UNIX differs from simpler operating systems. If you understand why
these programs are needed, you are on your way to becoming a power
user.</P
><a class="indexterm" name="AUTOID-1379"></A
><a class="indexterm" name="AUTOID-1380"></A
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">ML</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch01_13.htm" webstripperlinkwas="ch01_13.htm" title="1.13 Why Fundamentals Are Important "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 1.13 Why Fundamentals Are Important " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch01_15.htm" webstripperlinkwas="ch01_15.htm" title="1.15 Filenames "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 1.15 Filenames " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">1.13 Why Fundamentals Are Important </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">1.15 Filenames </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
