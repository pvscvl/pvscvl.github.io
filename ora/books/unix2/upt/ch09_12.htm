<html><head><title>[Chapter 9] 9.12 The Bourne Shell for Loop </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:35:05Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch09_01.htm" webstripperlinkwas="ch09_01.htm" title="9. Saving Time on the Command Line"><link rel="prev" href="ch09_11.htm" webstripperlinkwas="ch09_11.htm" title="9.11 Repeating a Command with a foreach Loop "><link rel="next" href="ch09_13.htm" webstripperlinkwas="ch09_13.htm" title="9.13 Multiline Commands, Secondary Prompts "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_11.htm" webstripperlinkwas="ch09_11.htm" title="9.11 Repeating a Command with a foreach Loop "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 9.11 Repeating a Command with a foreach Loop " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 9<br>Saving Time on the Command Line</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch09_13.htm" webstripperlinkwas="ch09_13.htm" title="9.13 Multiline Commands, Secondary Prompts "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 9.13 Multiline Commands, Secondary Prompts " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7690">9.12 The Bourne Shell for Loop </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-10386"></A
><a class="indexterm" name="AUTOID-10389"></A
><a class="indexterm" name="AUTOID-10391"></A
>The Bourne shell <em class="emphasis">for</EM
> loop is like the C shell
<span class="link"><em class="emphasis">foreach</EM
> loop (<a class="linkend" href="ch09_11.htm" webstripperlinkwas="ch09_11.htm" title="Repeating a Command with a foreach Loop ">9.11</A
>)</SPAN
>:
it loops through a list of words, running one or more commands for each
word in the list.
This saves time when you want to run the same series of commands,
separately, on several files.</P
><p class="para">Let's use the example from the article about <em class="emphasis">foreach</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>for file in /usr/fran/report /usr/rob/file2 /usr/rob/file3</B
></CODE
>
&gt; <code class="userinput"><b>do</B
></CODE
>
&gt; <code class="userinput"><b>cat -t -v $file | pg</B
></CODE
>
&gt; <code class="userinput"><b>done</B
></CODE
>
   ...<em class="emphasis">Shell runs cat -t -v /usr/fran/report | pg</EM
>...
   ...<em class="emphasis">Shell runs cat -t -v /usr/rob/file2 | pg</EM
>...
   ...<em class="emphasis">Shell runs cat -t -v /usr/rob/file3 | pg</EM
>...
$</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-10410"></A
><a class="indexterm" name="AUTOID-10413"></A
>The right angle brackets (<code class="literal">&gt;</CODE
>) are
<span class="link">secondary prompts (<a class="linkend" href="ch09_13.htm" webstripperlinkwas="ch09_13.htm" title="Multiline Commands, Secondary Prompts ">9.13</A
>)</SPAN
>;
the Bourne shell will keep printing them until you type the command <em class="emphasis">done</EM
>.
Then it runs the loop.
You don't have to press RETURN after the <code class="literal">do</CODE
>; you can type the
first command on the same line after it.</P
><p class="para">In a shell script,  the loop body (the lines between <code class="literal">do</CODE
> and
<code class="literal">done</CODE
>) are usually indented for clarity.</P
><p class="para">The list after the <code class="literal">in</CODE
> doesn't have to be filenames.
Among other things, you can use
<span class="link">backquotes (<a class="linkend" href="ch09_16.htm" webstripperlinkwas="ch09_16.htm" title="Command Substitution ">9.16</A
>)</SPAN
>
(command substitution),
<span class="link">variables (<a class="linkend" href="ch06_08.htm" webstripperlinkwas="ch06_08.htm" title="Shell Variables ">6.8</A
>, <a class="linkend" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm#UPT-ART-1170" title="What Environment Variables Are Good For ">6.1</A
>)</SPAN
>,
or
<span class="link">wildcards (<a class="linkend" href="ch15_01.htm" webstripperlinkwas="ch15_01.htm#UPT-ART-1480" title="File Naming Wildcards ">15.1</A
>)</SPAN
>.
For example, you could have typed the above loop this way:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>for file in /usr/fran/report /usr/rob/file[23]</B
></CODE
>
&gt; <code class="userinput"><b>do cat -t -v $file | pg</B
></CODE
>
&gt; <code class="userinput"><b>done</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">If you want the loop to stop before or after running each command, add the
Bourne shell<a class="indexterm" name="AUTOID-10434"></A
>
<span class="link"><em class="emphasis">read</EM
> command (<a class="linkend" href="ch44_13.htm" webstripperlinkwas="ch44_13.htm" title="read: Reading from the Keyboard ">44.13</A
>)</SPAN
>.
It reads keyboard input and waits for a 
RETURN.
In this case, you can probably ignore the input; you'll use <em class="emphasis">read</EM
> to
make the loop wait.
For example, to make the above loop prompt before each command line:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>for file in /usr/fran/report /usr/rob/file[23]</B
></CODE
>
&gt; <code class="userinput"><b>do</B
></CODE
>
&gt; <code class="userinput"><b>echo -n &quot;Press RETURN to see $file-&quot;</B
></CODE
>
&gt; <code class="userinput"><b>read x</B
></CODE
>
&gt; <code class="userinput"><b>cat -t -v $file | pg</B
></CODE
>
&gt; <code class="userinput"><b>done</B
></CODE
>
Press RETURN to see /usr/fran/report-
<code class="userinput"><b><kbd class="keycap">[RETURN]</KBD
></B
></CODE
>
   <em class="emphasis">Shell runs cat -t -v /usr/fran/report | pg</EM
>...
Press RETURN to see /usr/rob/file2-
<code class="userinput"><b><kbd class="keycap">[RETURN]</KBD
></B
></CODE
>
   <em class="emphasis">Shell runs cat -t -v /usr/rob/file2 | pg</EM
>...
Press RETURN to see /usr/rob/file3-
<code class="userinput"><b><kbd class="keycap">[RETURN]</KBD
></B
></CODE
>
   <em class="emphasis">Shell runs cat -t -v /usr/rob/file3 | pg</EM
>...</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;Article
<a class="xref" href="ch44_16.htm" webstripperlinkwas="ch44_16.htm" title="Handling Command-Line Arguments with a for Loop ">44.16</A
>
has more information about the <em class="emphasis">for</EM
> loop.
Article
<a class="xref" href="ch45_16.htm" webstripperlinkwas="ch45_16.htm" title="Standard Input to a for Loop ">45.16</A
>
shows how to make a <em class="emphasis">for</EM
> loop read the standard input instead of a
list of arguments.</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch09_11.htm" webstripperlinkwas="ch09_11.htm" title="9.11 Repeating a Command with a foreach Loop "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 9.11 Repeating a Command with a foreach Loop " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch09_13.htm" webstripperlinkwas="ch09_13.htm" title="9.13 Multiline Commands, Secondary Prompts "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 9.13 Multiline Commands, Secondary Prompts " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">9.11 Repeating a Command with a foreach Loop </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">9.13 Multiline Commands, Secondary Prompts </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.htm" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
