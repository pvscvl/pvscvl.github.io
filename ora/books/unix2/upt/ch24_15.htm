<html><head><title>[Chapter 24] 24.15 Trimming a Directory </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:41:44Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch24_01.htm" webstripperlinkwas="ch24_01.htm" title="24. Other Ways to Get Disk Space"><link rel="prev" href="ch24_14.htm" webstripperlinkwas="ch24_14.htm" title="24.14 Don't Use strip Carelessly "><link rel="next" href="ch24_16.htm" webstripperlinkwas="ch24_16.htm" title="24.16 Trimming a Huge Directory "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch24_14.htm" webstripperlinkwas="ch24_14.htm" title="24.14 Don't Use strip Carelessly "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 24.14 Don't Use strip Carelessly " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 24<br>Other Ways to Get Disk Space</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch24_16.htm" webstripperlinkwas="ch24_16.htm" title="24.16 Trimming a Huge Directory "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 24.16 Trimming a Huge Directory " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-5150">24.15 Trimming a Directory </A
></H2
><p class="para">In article
<a class="xref" href="ch04_07.htm" webstripperlinkwas="ch04_07.htm" title="Make More Directories! ">4.7</A
>,<a class="indexterm" name="UPT-ART-5150-IX-DIRECTORIES-TRIMMING"></A
><a class="indexterm" name="UPT-ART-5150-IX-TRIMMING-DIRECTORIES"></A
><a class="indexterm" name="UPT-ART-5150-IX-DISK-SPACE-TRIMMING-DIRECTORIES-AND"></A
>
we mentioned that it's good to keep directories
relatively small. Large directories can make your system seem
slower because it takes more time to look up files.
How small is &quot;small&quot;? Under 60 files is great.</P
><p class="para">However, there's a problem: the size of a directory can <em class="emphasis">only</EM
>
increase. That is, creating new files can make a directory bigger;
deleting new files doesn't, in itself, make the directory any smaller.
I'm not saying that a directory grows every time you
create a new file. That's not true; if you've deleted a file, the
directory will have an empty entry in it, and UNIX can re-use the
empty entry. But the fact remains: a directory can only get bigger;
it can never get smaller, unless you delete it.
[Some BSD systems will &quot;squeeze&quot; directories smaller. <em class="emphasis">-JP</EM
>&nbsp;]</P
><p class="para">So let's say you've been sloppy and have a few directories around with
hundreds of files, a lot of which is junk you don't need (I've been
there). You could just delete the junk, which would make your disk
happier, but you haven't reduced the directory's size.
What do you do? Here's a trick:</P
><ol class="orderedlist"><li class="listitem"><p class="para">Rename the old directory: </P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>mv project project.toobig</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para">Create a new directory with the old directory's name: </P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>mkdir project</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para">Move <em class="emphasis">only</EM
> the files you want from the old directory into the new
directory: </P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>mv project.toobig/*.txt project</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para">Now the old directory contains only junk. Delete the old obese
directory and everything in it: </P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>rm -r project.toobig</B
></CODE
></PRE
></BLOCKQUOTE
></P
></LI
></OL
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">ML</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch24_14.htm" webstripperlinkwas="ch24_14.htm" title="24.14 Don't Use strip Carelessly "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 24.14 Don't Use strip Carelessly " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch24_16.htm" webstripperlinkwas="ch24_16.htm" title="24.16 Trimming a Huge Directory "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 24.16 Trimming a Huge Directory " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">24.14 Don't Use strip Carelessly </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">24.16 Trimming a Huge Directory </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
