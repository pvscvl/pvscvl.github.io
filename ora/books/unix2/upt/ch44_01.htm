<html><head><title>[Chapter 44] Shell Programming for the Uninitiated</TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:53:22Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part08.htm" webstripperlinkwas="part08.htm" title="VIII. Shell Programming "><link rel="prev" href="part08.htm" webstripperlinkwas="part08.htm" title="VIII. Shell Programming "><link rel="next" href="ch44_02.htm" webstripperlinkwas="ch44_02.htm" title="44.2 Writing a Simple Shell Program "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="PART" href="part08.htm" webstripperlinkwas="part08.htm" title="VIII. Shell Programming "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: VIII. Shell Programming " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 44</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch44_02.htm" webstripperlinkwas="ch44_02.htm" title="44.2 Writing a Simple Shell Program "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 44.2 Writing a Simple Shell Program " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="UPT-CHP-44">44. Shell Programming for the Uninitiated</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="sect1" href="#UPT-ART-0065" title="44.1 Everyone Should Learn Some Shell Programming ">Everyone Should Learn Some Shell Programming </A
><br><a class="sect1" href="ch44_02.htm" webstripperlinkwas="ch44_02.htm" title="44.2 Writing a Simple Shell Program ">Writing a Simple Shell Program </A
><br><a class="sect1" href="ch44_03.htm" webstripperlinkwas="ch44_03.htm" title="44.3 What's a Shell, Anyway? ">What's a Shell, Anyway? </A
><br><a class="sect1" href="ch44_04.htm" webstripperlinkwas="ch44_04.htm" title="44.4 Testing How Your System Executes Files ">Testing How Your System Executes Files </A
><br><a class="sect1" href="ch44_05.htm" webstripperlinkwas="ch44_05.htm" title="44.5 Test String Values with Bourne Shell case ">Test String Values with Bourne Shell case </A
><br><a class="sect1" href="ch44_06.htm" webstripperlinkwas="ch44_06.htm" title="44.6 Pattern Matching in case Statements ">Pattern Matching in case Statements </A
><br><a class="sect1" href="ch44_07.htm" webstripperlinkwas="ch44_07.htm" title="44.7 Exit Status of UNIX Processes ">Exit Status of UNIX Processes </A
><br><a class="sect1" href="ch44_08.htm" webstripperlinkwas="ch44_08.htm" title="44.8 Test Exit Status with the if Statement ">Test Exit Status with the if Statement </A
><br><a class="sect1" href="ch44_09.htm" webstripperlinkwas="ch44_09.htm" title="44.9 Testing Your Success ">Testing Your Success </A
><br><a class="sect1" href="ch44_10.htm" webstripperlinkwas="ch44_10.htm" title="44.10 Loops That Test Exit Status ">Loops That Test Exit Status </A
><br><a class="sect1" href="ch44_11.htm" webstripperlinkwas="ch44_11.htm" title="44.11 Set Exit Status of a Shell (Script) ">Set Exit Status of a Shell (Script) </A
><br><a class="sect1" href="ch44_12.htm" webstripperlinkwas="ch44_12.htm" title="44.12 Trapping Exits Caused by Interrupts ">Trapping Exits Caused by Interrupts </A
><br><a class="sect1" href="ch44_13.htm" webstripperlinkwas="ch44_13.htm" title="44.13 read: Reading from the Keyboard ">read: Reading from the Keyboard </A
><br><a class="sect1" href="ch44_14.htm" webstripperlinkwas="ch44_14.htm" title="44.14 Putting awk, sed, etc., Inside Shell Scripts ">Putting awk, sed, etc., Inside Shell Scripts </A
><br><a class="sect1" href="ch44_15.htm" webstripperlinkwas="ch44_15.htm" title="44.15 Handling Command-Line Arguments in Shell Scripts ">Handling Command-Line Arguments in Shell Scripts </A
><br><a class="sect1" href="ch44_16.htm" webstripperlinkwas="ch44_16.htm" title="44.16 Handling Command-Line Arguments with a for Loop ">Handling Command-Line Arguments with a for Loop </A
><br><a class="sect1" href="ch44_17.htm" webstripperlinkwas="ch44_17.htm" title="44.17 Handling Arguments with while and shift ">Handling Arguments with while and shift </A
><br><a class="sect1" href="ch44_18.htm" webstripperlinkwas="ch44_18.htm" title="44.18 Standard Command-Line Parsing ">Standard Command-Line Parsing </A
><br><a class="sect1" href="ch44_19.htm" webstripperlinkwas="ch44_19.htm" title="44.19 The Bourne Shell set Command ">The Bourne Shell set Command </A
><br><a class="sect1" href="ch44_20.htm" webstripperlinkwas="ch44_20.htm" title="44.20 test: Testing Files and Strings ">test: Testing Files and Strings </A
><br><a class="sect1" href="ch44_21.htm" webstripperlinkwas="ch44_21.htm" title="44.21 Picking a Name for a New Command ">Picking a Name for a New Command </A
><br><a class="sect1" href="ch44_22.htm" webstripperlinkwas="ch44_22.htm" title="44.22 Finding a Program Name; Multiple Program Names ">Finding a Program Name; Multiple Program Names </A
><br><a class="sect1" href="ch44_23.htm" webstripperlinkwas="ch44_23.htm" title="44.23 Reading Files with the . and source Commands ">Reading Files with the . and source Commands </A
></P
><p></P
></DIV
><div class="sect1"><h2 class="sect1"><a class="title" name="UPT-ART-0065">44.1 Everyone Should Learn Some Shell Programming </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-49912"></A
><a class="indexterm" name="AUTOID-49914"></A
><a class="indexterm" name="AUTOID-49917"></A
>One of the great things about UNIX is that it's made up of individual
utilities, &quot;building blocks&quot; like <em class="emphasis">cat</EM
> and <em class="emphasis">grep</EM
>, that you run
from a shell prompt.
Using pipes, redirection, filters, and so on, you can combine those
utilities to do an incredible number of things.
Shell programming lets you take the same commands you'd type at a shell
prompt&nbsp;- and put them into a file you can run by just typing its name.
You can make new programs that combine UNIX programs (and other shell
scripts) in your own way to do exactly what you need.
If you don't like the way a program works, you can write a shell script
to do just what you want.</P
><p class="para">Because many UNIX users use the shell every day, they don't need to
learn a whole new language for programming... just some tips and
techniques.
In fact, this chapter covers a lot of programming techniques that
you'll want to use even when you aren't
programming. For example, loops and tests are handy on the
command line.</P
><p class="para">(This series of articles does assume that you've written 
programs in some language before, or are generally familiar with
programming concepts.
If you haven't, you might start with a more comprehensive shell
programming book.)</P
><p class="para">Some of the topics you need to learn about as a beginning shell
programmer have already been covered in other chapters. Here are the articles you'll probably want to read&nbsp;- in an order
that makes sense if you're looking for something of a tutorial:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">To see how to write a simple shell program, article
<a class="xref" href="ch44_02.htm" webstripperlinkwas="ch44_02.htm" title="Writing a Simple Shell Program ">44.2</A
>.
To embed scripts from other languages like <em class="emphasis">sed</EM
> and <em class="emphasis">awk</EM
> in
a shell script, article
<a class="xref" href="ch44_14.htm" webstripperlinkwas="ch44_14.htm" title="Putting awk, sed, etc., Inside Shell Scripts ">44.14</A
>.</P
></LI
><li class="listitem"><p class="para">For explanation of shells in general, article
<a class="xref" href="ch44_03.htm" webstripperlinkwas="ch44_03.htm" title="What's a Shell, Anyway? ">44.3</A
>.</P
></LI
><li class="listitem"><p class="para">To test how your system executes files so you'll know how to write your
shell programs, article
<a class="xref" href="ch44_04.htm" webstripperlinkwas="ch44_04.htm" title="Testing How Your System Executes Files ">44.4</A
>.</P
></LI
><li class="listitem"><p class="para">To read about environment and shell variables, articles
<a class="xref" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm#UPT-ART-1170" title="What Environment Variables Are Good For ">6.1</A
>
and
<a class="xref" href="ch06_08.htm" webstripperlinkwas="ch06_08.htm" title="Shell Variables ">6.8</A
>,
respectively.</P
></LI
><li class="listitem"><p class="para">The <em class="emphasis">echo</EM
> command is covered by article
<a class="xref" href="ch08_06.htm" webstripperlinkwas="ch08_06.htm" title="Output Command-Line Arguments ">8.6</A
>.</P
></LI
><li class="listitem"><p class="para">Shell quoting is explained in article
<a class="xref" href="ch08_14.htm" webstripperlinkwas="ch08_14.htm" title="Bourne Shell Quoting ">8.14</A
>.</P
></LI
><li class="listitem"><p class="para">Test strings with a <em class="emphasis">case</EM
> statement, article
<a class="xref" href="ch44_05.htm" webstripperlinkwas="ch44_05.htm" title="Test String Values with Bourne Shell case ">44.5</A
>.
Match patterns in a <em class="emphasis">case</EM
> statement, article
<a class="xref" href="ch44_06.htm" webstripperlinkwas="ch44_06.htm" title="Pattern Matching in case Statements ">44.6</A
>.</P
></LI
><li class="listitem"><p class="para">Use the output of one command as arguments to another command
with command substitution, article
<a class="xref" href="ch09_16.htm" webstripperlinkwas="ch09_16.htm" title="Command Substitution ">9.16</A
>.</P
></LI
><li class="listitem"><p class="para">Find out whether a program worked or failed with its exit status,
article
<a class="xref" href="ch44_07.htm" webstripperlinkwas="ch44_07.htm" title="Exit Status of UNIX Processes ">44.7</A
>.</P
></LI
><li class="listitem"><p class="para">Test a program's exit status and do different things if it worked or failed,
articles
<a class="xref" href="ch44_08.htm" webstripperlinkwas="ch44_08.htm" title="Test Exit Status with the if Statement ">44.8</A
>
and
<a class="xref" href="ch44_09.htm" webstripperlinkwas="ch44_09.htm" title="Testing Your Success ">44.9</A
>.</P
></LI
><li class="listitem"><p class="para">Loop through a set of commands and use another command to control that loop,
article
<a class="xref" href="ch44_10.htm" webstripperlinkwas="ch44_10.htm" title="Loops That Test Exit Status ">44.10</A
>.</P
></LI
><li class="listitem"><p class="para">Set exit status of a shell (shell script), article
<a class="xref" href="ch44_11.htm" webstripperlinkwas="ch44_11.htm" title="Set Exit Status of a Shell (Script) ">44.11</A
>.</P
></LI
><li class="listitem"><p class="para">Handle interrupts (like CTRL-c) and other signals, article
<a class="xref" href="ch44_12.htm" webstripperlinkwas="ch44_12.htm" title="Trapping Exits Caused by Interrupts ">44.12</A
>.</P
></LI
><li class="listitem"><p class="para">Read input from the keyboard, article
<a class="xref" href="ch44_13.htm" webstripperlinkwas="ch44_13.htm" title="read: Reading from the Keyboard ">44.13</A
>.</P
></LI
><li class="listitem"><p class="para">Handle command-line arguments (options, filenames, etc.), article
<a class="xref" href="ch44_15.htm" webstripperlinkwas="ch44_15.htm" title="Handling Command-Line Arguments in Shell Scripts ">44.15</A
>.</P
></LI
><li class="listitem"><p class="para">Step through arguments, or any list of words, with a <em class="emphasis">for</EM
> loop,
articles
<a class="xref" href="ch09_12.htm" webstripperlinkwas="ch09_12.htm" title="The Bourne Shell for Loop ">9.12</A
>
and
<a class="xref" href="ch44_16.htm" webstripperlinkwas="ch44_16.htm" title="Handling Command-Line Arguments with a for Loop ">44.16</A
>.</P
></LI
><li class="listitem"><p class="para">Handle arguments with the <em class="emphasis">while</EM
> and <em class="emphasis">shift</EM
> commands, article
<a class="xref" href="ch44_17.htm" webstripperlinkwas="ch44_17.htm" title="Handling Arguments with while and shift ">44.17</A
>.</P
></LI
><li class="listitem"><p class="para">Handle command-line arguments in a more standard and portable way
with <em class="emphasis">getopt</EM
>, article
<a class="xref" href="ch44_18.htm" webstripperlinkwas="ch44_18.htm" title="Standard Command-Line Parsing ">44.18</A
>.</P
></LI
><li class="listitem"><p class="para">Set shell options and command-line arguments with the <em class="emphasis">set</EM
> command,
article
<a class="xref" href="ch44_19.htm" webstripperlinkwas="ch44_19.htm" title="The Bourne Shell set Command ">44.19</A
>.</P
></LI
><li class="listitem"><p class="para">Test files and strings of characters with the <em class="emphasis">test</EM
> command,
article
<a class="xref" href="ch44_20.htm" webstripperlinkwas="ch44_20.htm" title="test: Testing Files and Strings ">44.20</A
>.</P
></LI
><li class="listitem"><p class="para">Pick a name for a new command with no conflict, article
<a class="xref" href="ch44_21.htm" webstripperlinkwas="ch44_21.htm" title="Picking a Name for a New Command ">44.21</A
>.</P
></LI
><li class="listitem"><p class="para">Find the name of a program and use it in the script, article
<a class="xref" href="ch44_22.htm" webstripperlinkwas="ch44_22.htm" title="Finding a Program Name; Multiple Program Names ">44.22</A
>.</P
></LI
><li class="listitem"><p class="para">Use &quot;subprograms&quot; that can change the current environment, article
<a class="xref" href="ch44_23.htm" webstripperlinkwas="ch44_23.htm" title="Reading Files with the . and source Commands ">44.23</A
>.</P
></LI
></UL
><p class="para">This chapter discusses only Bourne shell programming.
In most cases, the C shell
<span class="link">isn't great for shell programming (<a class="linkend" href="ch47_02.htm" webstripperlinkwas="ch47_02.htm" title="C Shell Programming Considered Harmful ">47.2</A
>)</SPAN
>.</P
><p class="para"><a class="indexterm" name="AUTOID-50013"></A
>A note about command versions: 
unfortunately, the same commands on different versions of UNIX can
have different options.
Some Bourne shells are a little different from others.
For instance, some
<span class="link"><em class="emphasis">test</EM
> (<a class="linkend" href="ch44_20.htm" webstripperlinkwas="ch44_20.htm" title="test: Testing Files and Strings ">44.20</A
>)</SPAN
>
commands have a <em class="emphasis">-x</EM
> option to test for an
executable file; others don't.
As article
<a class="xref" href="ch46_10.htm" webstripperlinkwas="ch46_10.htm" title="A Portable echo Command ">46.10</A
>
explains,
some <em class="emphasis">echo</EM
> commands use a <em class="emphasis">-n</EM
> option to mean &quot;no newline at the
end of this string&quot;; others have you put <code class="literal">\c</CODE
> at the end of the string.
And so on.
Where there are differences, these articles generally use the commands in
Berkeley UNIX.
If a command doesn't seem to work on your system, check its online
manual page or the <em class="emphasis">sh</EM
> manual page.</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="PART" href="part08.htm" webstripperlinkwas="part08.htm" title="VIII. Shell Programming "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: VIII. Shell Programming " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch44_02.htm" webstripperlinkwas="ch44_02.htm" title="44.2 Writing a Simple Shell Program "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 44.2 Writing a Simple Shell Program " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">VIII. Shell Programming </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">44.2 Writing a Simple Shell Program </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
