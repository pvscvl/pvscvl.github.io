<html><head><title>[Chapter 50] 50.10 Make Your Own Man Pages Without Learning troff</TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:57:00Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch50_01.htm" webstripperlinkwas="ch50_01.htm" title="50. Help--Online Documentation, etc."><link rel="prev" href="ch50_09.htm" webstripperlinkwas="ch50_09.htm" title="50.9 Reading a Permuted Index "><link rel="next" href="ch50_11.htm" webstripperlinkwas="ch50_11.htm" title="50.11 Writing a Simple Man Page with the -man Macros "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch50_09.htm" webstripperlinkwas="ch50_09.htm" title="50.9 Reading a Permuted Index "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 50.9 Reading a Permuted Index " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 50<br>Help--Online Documentation, etc.</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch50_11.htm" webstripperlinkwas="ch50_11.htm" title="50.11 Writing a Simple Man Page with the -man Macros "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 50.11 Writing a Simple Man Page with the -man Macros " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-1030">50.10 Make Your Own Man Pages Without Learning troff</A
></H2
><p class="para"><a class="indexterm" name="UPT-ART-1030-IX-COMMANDS-WRITING-MANUAL-PAGES-FOR"></A
><a class="indexterm" name="UPT-ART-1030-IX-MANUAL-PAGES-WRITING"></A
><a class="indexterm" name="UPT-ART-1030-IX-MANUAL-PAGES-FORMATTING"></A
>We strongly suggest that you write a manual page for each command that
you place in your <em class="emphasis">bin</EM
> directory. UNIX manual pages typically
have the following format, which we suggest you follow:</P
><p class="para"><blockquote class="screen"><pre class="screen">NAME
     the program's name - one line summary of what it does

SYNOPSIS
     how to invoke the program, including all arguments and
     command-line options. (Optional arguments
     are placed in square brackets)

DESCRIPTION
     a description of what the program does-as long as is necessary

OPTIONS
     an explanation of each option

EXAMPLES
     One or more examples of how to use the program

ENVIRONMENT
     Any environment variables that control the program's behavior

FILES
     Files the program internals will read or write.  May include
     temporary files.  Doesn't include files on the command line.

BUGS
     Any known bugs. The standard manual pages don't take
     bug-recording seriously, but this can be very helpful.

AUTHOR
     Who wrote the program</PRE
></BLOCKQUOTE
></P
><p class="para">To see how a &quot;real&quot; manual page looks, type <code class="literal">man&nbsp;ls</CODE
>.</P
><p class="para"><a class="indexterm" name="AUTOID-59538"></A
><a class="indexterm" name="AUTOID-59540"></A
>Feel free to add any other sections that you think are necessary.
You can use the
<span class="link"><em class="emphasis">nroff</EM
> (<a class="linkend" href="ch43_13.htm" webstripperlinkwas="ch43_13.htm" title="The Text Formatters nroff, troff, ditroff, ... ">43.13</A
>)</SPAN
>
<span class="link"><em class="emphasis">-man</EM
> macros (<a class="linkend" href="ch50_11.htm" webstripperlinkwas="ch50_11.htm" title="Writing a Simple Man Page with the -man Macros ">50.11</A
>)</SPAN
>
if you want a nicely formatted
manual page. However, <em class="emphasis">nroff</EM
> is fairly complicated and, for this purpose,
not really necessary. Just create a text file that looks like the one
we showed above. If you are using a BSD system and want your manual
pages formatted with <em class="emphasis">nroff</EM
>, look at any of the
files in <em class="emphasis">/usr/man/man1</EM
> and copy it.</P
><p class="para">Hint: If you insist on formatting your manual page properly, using the
<em class="emphasis">troff</EM
> or <em class="emphasis">groff</EM
>
&quot;man&quot; macros, you can use <em class="emphasis">nroff</EM
> to preview the file.
The
<span class="link"><em class="emphasis">man</EM
> (<a class="linkend" href="ch50_01.htm" webstripperlinkwas="ch50_01.htm#UPT-ART-4910" title="UNIX Online Documentation ">50.1</A
>)</SPAN
>
command is essentially the same as:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch25_03.htm" webstripperlinkwas="ch25_03.htm" title="25.3 Using more to Page Through Files ">more</A
> <a class="co" href="ch25_10.htm" webstripperlinkwas="ch25_10.htm" title="25.10 Squash Extra Blank Lines ">-s</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
% <code class="userinput"><b>nroff -e -man </B
></CODE
><code class="replaceable"><i>filename</I
></CODE
><code class="userinput"><b> | more -s</B
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">You can safely omit the <em class="emphasis">-e</EM
> option to <em class="emphasis">nroff</EM
> and the <em class="emphasis">-s</EM
>
option to <em class="emphasis">more</EM
>. And remember that <em class="emphasis">nroff</EM
> may not be
available on many versions of System V UNIX, but the Power Tools
disc has
<span class="link"><em class="emphasis">gnroff</EM
> and <em class="emphasis">awf</EM
> (<a class="linkend" href="ch43_17.htm" webstripperlinkwas="ch43_17.htm" title="Don't Have nroff?  Try gnroff or awf ">43.17</A
>)</SPAN
>.</P
><p class="para">Now, you want to make this manual page &quot;readable&quot; by the standard
<em class="emphasis">man</EM
>
command.
For BSD systems, there are a few ways to do this. Create 
the directory <em class="emphasis">man</EM
> in your home directory; create the directory
<em class="emphasis">cat1</EM
> as a subdirectory of <em class="emphasis">man</EM
>; then copy your manual
entry into <em class="emphasis">cat1</EM
>, with the name <em class="emphasis">program.1</EM
> (where
<em class="emphasis">program</EM
> is the name of your special command). When you want to
read the manual page, give the command:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch14_11.htm" webstripperlinkwas="ch14_11.htm" title="14.11 Finding (Anyone's) Home Directory, Quickly ">~</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
% <code class="userinput"><b>man -M ~/man </B
></CODE
><code class="replaceable"><i>program</I
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">Shortcut: We like to be more strict about naming things properly,
but you can omit the <em class="emphasis">man</EM
> directory, and just put the <em class="emphasis">cat1</EM
>
directory into your home directory. In this case, the command would
be:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>man -M ~ </B
></CODE
><code class="replaceable"><i>program</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-59593"></A
>Some systems have a
<em class="emphasis">MANPATH</EM
>
<span class="link">environment variable (<a class="linkend" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm#UPT-ART-1170" title="What Environment Variables Are Good For ">6.1</A
>)</SPAN
>,
a colon-separated list of directories where the <em class="emphasis">man</EM
> command should look.
For example, my <em class="emphasis">MANPATH</EM
> contains:</P
><p class="para"><blockquote class="screen"><pre class="screen">/home/mike/man:/usr/local/man:/usr/man</PRE
></BLOCKQUOTE
></P
><p class="para"><em class="emphasis">MANPATH</EM
> can be more convenient than the <em class="emphasis">-M</EM
> option.</P
><p class="para">HINT: We are telling you to put the manual page into the <em class="emphasis">cat1</EM
>
directory rather than the <em class="emphasis">man1</EM
> directory
because the <em class="emphasis">man</EM
> program assumes that files in <em class="emphasis">cat1</EM
> are
already formatted.</P
><p class="para">If you are sharing your program with other people on the system, you
should put your manual entry in a public place. Become superuser and
copy your documentation into
<em class="emphasis">/usr/local/man/catl</EM
>, giving it the name <em class="emphasis">program.l</EM
>
(the &quot;l&quot; stands for &quot;local&quot;). If you can't become superuser, get the
system administrator to do it for you. Make sure that everyone can
read the manual page; the permissions should be something like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ls -l /usr/local/man/catl</B
></CODE
>
-r--r--r--  1 root          468 Aug  5 09:21 program.l</PRE
></BLOCKQUOTE
></P
><p class="para">Then give the command <code class="literal">man</CODE
>&nbsp;<code class="replaceable"><i>program</I
></CODE
> to read your documentation.</P
><p class="para">If you are working on some System V variants, the
rules are a little different.
The organization of the manual pages and
the <em class="emphasis">man</EM
> command itself are slightly different&nbsp;- and really, not
as good. Write your manual entry and place it in your <em class="emphasis">doc</EM
>
directory. Then create the following
<span class="link">C shell alias (<a class="linkend" href="ch10_03.htm" webstripperlinkwas="ch10_03.htm" title="C Shell Aliases with Command-Line Arguments ">10.3</A
>)</SPAN
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">alias myman &quot;(cd ~/doc; man -d \!$ | pg)&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">or
<span class="link">shell function (<a class="linkend" href="ch10_09.htm" webstripperlinkwas="ch10_09.htm" title="Shell Functions ">10.9</A
>)</SPAN
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">myman() { (cd $HOME/doc; man -d &quot;$1&quot; | pg); }</PRE
></BLOCKQUOTE
></P
><p class="para">Now the command <em class="emphasis">myman docfilename</EM
> will retrieve your manual page.
Note that if you use a section-number extension like <code class="literal">.1</CODE
>,
you have to give the entire filename (e.g., <em class="emphasis">program.1</EM
>),
not just the program's name.</P
><p class="para">If you want to make
your manual page publicly available, copy the file into the directory
<em class="emphasis">/usr/man/u_man/man1</EM
>; you may have to become superuser to do so.
Make sure that anyone on the system can read your file.
If the entry
is extremely long and you want to save space in your filesystem, you
can use the <em class="emphasis">pack</EM
> utility
on your documentation file.
The resulting file
will have the name <em class="emphasis">program.1.z</EM
>; the <em class="emphasis">man</EM
> command will
automatically unpack the file whenever anyone reads it.<a class="indexterm" name="AUTOID-59638"></A
><a class="indexterm" name="AUTOID-59639"></A
><a class="indexterm" name="AUTOID-59640"></A
></P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">ML</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch50_09.htm" webstripperlinkwas="ch50_09.htm" title="50.9 Reading a Permuted Index "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 50.9 Reading a Permuted Index " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch50_11.htm" webstripperlinkwas="ch50_11.htm" title="50.11 Writing a Simple Man Page with the -man Macros "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 50.11 Writing a Simple Man Page with the -man Macros " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">50.9 Reading a Permuted Index </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">50.11 Writing a Simple Man Page with the -man Macros </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
