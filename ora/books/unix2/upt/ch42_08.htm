<html><head><title>[Chapter 42] 42.8 Errors Erased Too Soon? Try These Workarounds </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:52:38Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch42_01.htm" webstripperlinkwas="ch42_01.htm" title="42. Problems with Terminals"><link rel="prev" href="ch42_07.htm" webstripperlinkwas="ch42_07.htm" title="42.7 termtest: Send Repeated Characters to Terminal "><link rel="next" href="ch43_01.htm" webstripperlinkwas="ch43_01.htm" title="43. Printing"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch42_07.htm" webstripperlinkwas="ch42_07.htm" title="42.7 termtest: Send Repeated Characters to Terminal "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 42.7 termtest: Send Repeated Characters to Terminal " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 42<br>Problems with Terminals</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch43_01.htm" webstripperlinkwas="ch43_01.htm" title="43. Printing"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 43. Printing" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7899">42.8 Errors Erased Too Soon? Try These Workarounds </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-47269"></A
>I just made a change to my
<span class="link"><em class="emphasis">.exrc</EM
> file (<a class="linkend" href="ch04_09.htm" webstripperlinkwas="ch04_09.htm" title="Setting Up vi with the .exrc File ">4.9</A
>)</SPAN
>.
Then I started <em class="emphasis">vi</EM
> and noticed a message in reverse video before the
screen cleared and my file was displayed.
It was probably an error message.
But <em class="emphasis">vi</EM
>, like some other programs, shows errors and then
clears (erases) the screen before you can read them.
Great design, eh?</P
><p class="para">Here are some workarounds:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">When my terminal used to run at a slow data rate (1200 baud or less),
I could usually read an error message before the screen cleared.
In these days of 28,800 bps and above, you can still fake that.
Log out.
Then set your terminal or communications
package to a slow data rate and log in again.
Now look fast.</P
></LI
><li class="listitem"><p class="para">Way back, when
<span class="link">ttys were real teletypes (<a class="linkend" href="ch41_02.htm" webstripperlinkwas="ch41_02.htm" title="stty and All That Stuff ">41.2</A
>)</SPAN
>,
finding errors was easy: there was no screen to clear; the error was
right there on the paper.</P
><p class="para">So, if your terminal has a printer, turn it on.
(On DOS, try doing <kbd class="keycap">[CTRL]</KBD
>+<kbd class="keycap">[PrtSC]</KBD
>.)
Re-run your program and read the error on the paper.</P
></LI
><li class="listitem"><p class="para">If your window or communications program has a &quot;capture to file&quot; function,
turn it on.
Make the error happen.
Turn off the capture function (important!).
Then read the file&nbsp;- you'll probably need to use a program like
<span class="link"><em class="emphasis">cat -v</EM
> (<a class="linkend" href="ch25_07.htm" webstripperlinkwas="ch25_07.htm" title="Show Non-Printing Characters with cat -v or od -c ">25.7</A
>)</SPAN
>
or
<span class="link"><em class="emphasis">vmore</EM
> (<a class="linkend" href="ch25_05.htm" webstripperlinkwas="ch25_05.htm" title="Page Through Compressed, RCS, Unprintable Files ">25.5</A
>)</SPAN
>
to keep the screen-clearing characters stored in the file from erasing
your screen as you read the file!</P
></LI
><li class="listitem"><p class="para">If you don't have a screen-capture function, but you do have the
<span class="link"><em class="emphasis">script</EM
> (<a class="linkend" href="ch51_05.htm" webstripperlinkwas="ch51_05.htm" title="Copy What You Do with script ">51.5</A
>)</SPAN
>
program,
use it with the technique in the step above.</P
></LI
><li class="listitem"><p class="para">If your window has a scroll bar or a &quot;page up&quot; command, try it.
Some screen-clear commands won't clear the scrolling memory.</P
></LI
><li class="listitem"><p class="para">Use
<span class="link"><em class="emphasis">tee</EM
> (<a class="linkend" href="ch13_09.htm" webstripperlinkwas="ch13_09.htm" title="Send Output Two or More Places with tee ">13.9</A
>)</SPAN
>
to grab the standard output and standard error to a file
while you're viewing:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch13_05.htm" webstripperlinkwas="ch13_05.htm" title="13.5 Redirection in C Shell: Capture Errors, Too? ">|&amp;</A
> 

<a class="co" href="ch08_13.htm" webstripperlinkwas="ch08_13.htm" title='8.13 Is It "2&gt;&amp;1 file&quot; or "&gt; file 2&gt;&amp;1&quot;? Why?'>2&gt;&amp;1</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
% <code class="userinput"><b>vi foo |&amp; tee saved_stuff</B
></CODE
>   <i class="lineannotation">...csh</I
>

$ <code class="userinput"><b>vi foo 2&gt;&amp;1 | tee saved_stuff</B
></CODE
>   <i class="lineannotation">...sh</I
></PRE
></TD
></TR
></TABLE
></P
><p class="para">Then look at the saved file with a pager program, possibly filtering
it through <span class="link"><em class="emphasis">cat&nbsp;-v</EM
> (<a class="linkend" href="ch25_07.htm" webstripperlinkwas="ch25_07.htm" title="Show Non-Printing Characters with cat -v or od -c ">25.7</A
>)</SPAN
>
and/or <span class="link"><em class="emphasis">fold</EM
> (<a class="linkend" href="ch43_08.htm" webstripperlinkwas="ch43_08.htm" title="Fixing Margins with pr and fold ">43.8</A
>)</SPAN
>
first. (The <span class="link"><em class="emphasis">vmore</EM
> script (<a class="linkend" href="ch25_05.htm" webstripperlinkwas="ch25_05.htm" title="Page Through Compressed, RCS, Unprintable Files ">25.5</A
>)</SPAN
>
was made for just this kind of job.)</P
></LI
><li class="listitem"><p class="para">Restart the program and get to the point just before the error will happen.
Try to hit
CTRL-s or
HOLD SCREEN
between the time the error is output and the screen clears.
That can be tough to do
over a network
or on a high-speed connection, though, because of the delay between the
time you press the key and the time when all the output finally stops
coming.</P
></LI
><li class="listitem"><p class="para"><span class="link">Temporarily switch (<a class="linkend" href="ch06_10.htm" webstripperlinkwas="ch06_10.htm" title="Running a Command with a Temporarily Different Environment ">6.10</A
>)</SPAN
>
to a <em class="emphasis">termcap/terminfo</EM
> definition that doesn't
have a clear-screen capability.
Two good settings for TERM are <em class="emphasis">dumb</EM
> and <em class="emphasis">unknown</EM
>.</P
></LI
><li class="listitem"><p class="para">That previous trick will leave your program almost useless, if it runs at all.
If you do a lot of troubleshooting of full-screen programs like <em class="emphasis">vi</EM
>
or writing startup files such as <em class="emphasis">.exrc</EM
>,
it's worth your time to find a <em class="emphasis">termcap</EM
> or <em class="emphasis">terminfo</EM
> definition
that has all the capabilities of the usual definition&nbsp;- except that it
won't clear the screen.
(You'll probably want to check the termcap capabilities <em class="emphasis">cl=</EM
>,
<em class="emphasis">is=</EM
>, <em class="emphasis">if=</EM
>, <em class="emphasis">rs=</EM
>, <em class="emphasis">rf=</EM
>, <em class="emphasis">r2=</EM
>, and maybe <em class="emphasis">ti=</EM
>.
Or, for <em class="emphasis">terminfo</EM
>, look at <em class="emphasis">clear=</EM
>, <em class="emphasis">iprog=</EM
>, <em class="emphasis">is2=</EM
>,
<em class="emphasis">if=</EM
>, <em class="emphasis">rs2=</EM
>, <em class="emphasis">rf=</EM
>, and maybe <em class="emphasis">smcup=</EM
>.)
If you don't know how, read O'Reilly &amp; Associates' <em class="emphasis">termcap &amp; terminfo</EM
>-or
lure a UNIX guru from down the hall somewhere.
[1]</P
><blockquote class="footnote"><p class="para">[1] Hint: all computer gurus like pizza.</P
></BLOCKQUOTE
></LI
></UL
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch42_07.htm" webstripperlinkwas="ch42_07.htm" title="42.7 termtest: Send Repeated Characters to Terminal "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 42.7 termtest: Send Repeated Characters to Terminal " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="CHAPTER" href="ch43_01.htm" webstripperlinkwas="ch43_01.htm" title="43. Printing"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 43. Printing" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">42.7 termtest: Send Repeated Characters to Terminal </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">43. Printing</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
