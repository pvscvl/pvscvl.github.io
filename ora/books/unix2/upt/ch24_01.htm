<html><head><title>[Chapter 24] Other Ways to Get Disk Space</TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:41:25Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="part03.htm" webstripperlinkwas="part03.htm" title="III. Working with the Filesystem "><link rel="prev" href="ch23_22.htm" webstripperlinkwas="ch23_22.htm" title="23.22 Using find to Clear Out Unneeded Files "><link rel="next" href="ch24_02.htm" webstripperlinkwas="ch24_02.htm" title="24.2 Save Space with Bit Bucket Log Files and Mailboxes"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch23_22.htm" webstripperlinkwas="ch23_22.htm" title="23.22 Using find to Clear Out Unneeded Files "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 23.22 Using find to Clear Out Unneeded Files " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 24</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch24_02.htm" webstripperlinkwas="ch24_02.htm" title="24.2 Save Space with Bit Bucket Log Files and Mailboxes"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 24.2 Save Space with Bit Bucket Log Files and Mailboxes" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="CHAPTER"><h1 class="chapter"><a class="title" name="UPT-CHP-24">24. Other Ways to Get Disk Space</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="sect1" href="#UPT-ART-1730" title="24.1 Instead of Removing a File, Empty It ">Instead of Removing a File, Empty It </A
><br><a class="sect1" href="ch24_02.htm" webstripperlinkwas="ch24_02.htm" title="24.2 Save Space with Bit Bucket Log Files and Mailboxes">Save Space with Bit Bucket Log Files and Mailboxes</A
><br><a class="sect1" href="ch24_03.htm" webstripperlinkwas="ch24_03.htm" title="24.3 Unlinking Open Files Isn't a Good Idea ">Unlinking Open Files Isn't a Good Idea </A
><br><a class="sect1" href="ch24_04.htm" webstripperlinkwas="ch24_04.htm" title="24.4 Save Space with a Link ">Save Space with a Link </A
><br><a class="sect1" href="ch24_05.htm" webstripperlinkwas="ch24_05.htm" title="24.5 Limiting File Sizes ">Limiting File Sizes </A
><br><a class="sect1" href="ch24_06.htm" webstripperlinkwas="ch24_06.htm" title="24.6 Save Space with Tab Characters ">Save Space with Tab Characters </A
><br><a class="sect1" href="ch24_07.htm" webstripperlinkwas="ch24_07.htm" title="24.7 Compressing Files to Save Space ">Compressing Files to Save Space </A
><br><a class="sect1" href="ch24_08.htm" webstripperlinkwas="ch24_08.htm" title="24.8 Save Space: tar and compress a Directory Tree ">Save Space: tar and compress a Directory Tree </A
><br><a class="sect1" href="ch24_09.htm" webstripperlinkwas="ch24_09.htm" title="24.9 How Much Disk Space? ">How Much Disk Space? </A
><br><a class="sect1" href="ch24_10.htm" webstripperlinkwas="ch24_10.htm" title="24.10 zloop: Run a Command on Compressed Files ">zloop: Run a Command on Compressed Files </A
><br><a class="sect1" href="ch24_11.htm" webstripperlinkwas="ch24_11.htm" title="24.11 Edit Compressed Files with zvi, zex, and zed ">Edit Compressed Files with zvi, zex, and zed </A
><br><a class="sect1" href="ch24_12.htm" webstripperlinkwas="ch24_12.htm" title="24.12 Compressing a Directory Tree: Fine-Tuning ">Compressing a Directory Tree: Fine-Tuning </A
><br><a class="sect1" href="ch24_13.htm" webstripperlinkwas="ch24_13.htm" title="24.13 Save Space in Executable Files with strip ">Save Space in Executable Files with strip </A
><br><a class="sect1" href="ch24_14.htm" webstripperlinkwas="ch24_14.htm" title="24.14 Don't Use strip Carelessly ">Don't Use strip Carelessly </A
><br><a class="sect1" href="ch24_15.htm" webstripperlinkwas="ch24_15.htm" title="24.15 Trimming a Directory ">Trimming a Directory </A
><br><a class="sect1" href="ch24_16.htm" webstripperlinkwas="ch24_16.htm" title="24.16 Trimming a Huge Directory ">Trimming a Huge Directory </A
><br><a class="sect1" href="ch24_17.htm" webstripperlinkwas="ch24_17.htm" title="24.17 Disk Quotas ">Disk Quotas </A
><br><a class="sect1" href="ch24_18.htm" webstripperlinkwas="ch24_18.htm" title="24.18 Huge Files Might Not Take a Lot of Disk Space ">Huge Files Might Not Take a Lot of Disk Space </A
></P
><p></P
></DIV
><div class="sect1"><h2 class="sect1"><a class="title" name="UPT-ART-1730">24.1 Instead of Removing a File, Empty It </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-26153"></A
><a class="indexterm" name="AUTOID-26156"></A
><a class="indexterm" name="AUTOID-26158"></A
><a class="indexterm" name="AUTOID-26161"></A
>Sometimes you don't want to remove a file completely&nbsp;- you just want to
empty it:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">When you remove a file and create a new one with the same name, the
new file will have your
<span class="link">default permissions (<a class="linkend" href="ch22_04.htm" webstripperlinkwas="ch22_04.htm" title="Setting an Exact umask ">22.4</A
>)</SPAN
>
and
<span class="link">ownership (<a class="linkend" href="ch22_03.htm" webstripperlinkwas="ch22_03.htm" title="Who Will Own a New File? ">22.3</A
>)</SPAN
>.
It's better to empty the file now, then add new text later; this won't
change the permissions and ownership.</P
></LI
><li class="listitem"><p class="para">Completely empty files (ones that <em class="emphasis">ls -l</EM
> says have zero characters)
don't take any disk space to store
(except the few bytes that the
<span class="link">directory entry (<a class="linkend" href="ch18_02.htm" webstripperlinkwas="ch18_02.htm" title="What's Really in a Directory ">18.2</A
>)</SPAN
>
uses).</P
></LI
><li class="listitem"><p class="para">You can use the empty files as &quot;place markers&quot; to remind you that
something was there or belongs there.
Some UNIX logging programs won't write errors
to their log files unless the
log files already exist.
Empty files work fine for that.</P
></LI
><li class="listitem"><p class="para">Empty files hold a &quot;timestamp&quot; (just as files with text do)
that shows when the file was last modified.
I use empty files in some directories to remind me when I've last done
something (backups,
<span class="link">printouts (<a class="linkend" href="ch21_09.htm" webstripperlinkwas="ch21_09.htm" title="Keep File Printouts Up-to-Date Automatically with make">21.9</A
>)</SPAN
>,
etc.).
The
<span class="link"><em class="emphasis">find -newer</EM
> (<a class="linkend" href="ch17_08.htm" webstripperlinkwas="ch17_08.htm" title="Exact File Time Comparisons ">17.8</A
>, <a class="linkend" href="ch17_09.htm" webstripperlinkwas="ch17_09.htm" title="Problems with -newer ">17.9</A
>)</SPAN
>
command can compare other files to a timestamp file.</P
></LI
></UL
><p class="para">Well, you get the idea by now.</P
><p class="para">How can you empty a file?
Watch out: when some editors say that a file has &quot;no
lines,&quot; they may still append a newline character when writing the file.
Just one character still takes a block of disk space to store.
Better:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">In the Bourne shell, the most efficient way is to redirect the output of
a null command:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>&gt; afile</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;If the file already exists, that command will truncate the file without
needing a subprocess.</P
></LI
><li class="listitem"><p class="para">In the C shell copy the UNIX empty file,
<span class="link"><em class="emphasis">/dev/null</EM
> (<a class="linkend" href="ch13_14.htm" webstripperlinkwas="ch13_14.htm" title="What Can You Do with an Empty File? ">13.14</A
>)</SPAN
>,
on top of the file:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>cp /dev/null afile</B
></CODE
></PRE
></BLOCKQUOTE
></P
></LI
></UL
><p class="para">You can also &quot;almost&quot; empty the file, leaving just a few lines, this way:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch25_14.htm" webstripperlinkwas="ch25_14.htm" title="25.14 How to Look at the End of a File: tail ">tail</A
> 
&#13;</PRE
></TH
><td valign="TOP"><pre class="screen">
% <code class="userinput"><b>tail afile &gt; tmpfile</B
></CODE
>
% <code class="userinput"><b>cat tmpfile &gt; afile</B
></CODE
>
% <code class="userinput"><b>rm tmpfile</B
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">That's especially good for log files that you never want to delete
completely.
Use <em class="emphasis">cat</EM
> and <em class="emphasis">rm</EM
>, not <em class="emphasis">mv</EM
>-<em class="emphasis">mv</EM
> will break the link to
the original file (<code class="literal">afile</CODE
>) and replace it with the temporary file.</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch23_22.htm" webstripperlinkwas="ch23_22.htm" title="23.22 Using find to Clear Out Unneeded Files "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 23.22 Using find to Clear Out Unneeded Files " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch24_02.htm" webstripperlinkwas="ch24_02.htm" title="24.2 Save Space with Bit Bucket Log Files and Mailboxes"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 24.2 Save Space with Bit Bucket Log Files and Mailboxes" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">23.22 Using find to Clear Out Unneeded Files </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">24.2 Save Space with Bit Bucket Log Files and Mailboxes</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
