<html><head><title>[Chapter 14] 14.9 cd by Directory Initials </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:37:06Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch14_01.htm" webstripperlinkwas="ch14_01.htm" title="14. Moving Around in a Hurry"><link rel="prev" href="ch14_08.htm" webstripperlinkwas="ch14_08.htm" title="14.8 Quick cds with Aliases "><link rel="next" href="ch14_10.htm" webstripperlinkwas="ch14_10.htm" title="14.10 Variables Help You Find Directories and Files "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch14_08.htm" webstripperlinkwas="ch14_08.htm" title="14.8 Quick cds with Aliases "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 14.8 Quick cds with Aliases " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 14<br>Moving Around in a Hurry</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch14_10.htm" webstripperlinkwas="ch14_10.htm" title="14.10 Variables Help You Find Directories and Files "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 14.10 Variables Help You Find Directories and Files " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7901">14.9 cd by Directory Initials </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-15514"></A
><a class="indexterm" name="AUTOID-15517"></A
>Here's a handy shell function called <em class="emphasis">c</EM
> for people who <em class="emphasis">cd</EM
> all over 
the filesystem.
(I first saw Marc Brumlik's posting of it on Usenet years ago, as a
C shell alias.
He and I have both made some changes to it since then.)
This function is great for shells that don't have
<span class="link">filename completion (<a class="linkend" href="ch09_08.htm" webstripperlinkwas="ch09_08.htm" title="Filename Completion: Faster Filename Typing ">9.8</A
>)</SPAN
>.
This function works a bit like
filename completion,
but it's faster because the &quot;initials&quot; only match directories&nbsp;- and you don't
have to press TAB or ESC after each part of the pathname.
Instead, you just type the initials (first letter, or more) of each directory
in the pathname.
Start at the root directory.
Put a dot (<code class="literal">.</CODE
>) after each part.</P
><p class="para">Here are three examples.
The first one shows that there's no subdirectory of root whose name
starts with <em class="emphasis">q</EM
>.
The second one matches the directory <em class="emphasis">/usr/include/hsfs</EM
> and <em class="emphasis">cd</EM
>s
there:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>c q.</B
></CODE
>
c: no match for /q*/.
$ <code class="userinput"><b>c u.i.h.</B
></CODE
>
/usr/include/hsfs/.
$</PRE
></BLOCKQUOTE
></P
><p class="para">In the next example, trying to change to <em class="emphasis">/usr/include/pascal</EM
>, 
the abbreviations aren't unique the first time.
The function shows me all the matches; the second time, I add another letter
(&quot;a&quot;) to make the name unique:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>c u.i.p.</B
></CODE
>
c: too many matches for u.i.p.:
/usr/include/pascal/. /usr/include/pixrect/. /usr/include/protocols/.
$ <code class="userinput"><b>c u.i.pa.</B
></CODE
>
/usr/include/pascal/.
$</PRE
></BLOCKQUOTE
></P
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="sh_init">sh_init</A
><br><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="csh_init">csh_init</A
><br></TH
><td valign="TOP">&#13;The Bourne shell function is straightforward; it's shown below.
The C shell alias needs some trickery, and there are two versions of it
on the Power Tools disk: one if you already have an alias for <em class="emphasis">cd</EM
>
and another if you don't.
(The C shell
<span class="link"><em class="emphasis">if</EM
> (<a class="linkend" href="ch47_03.htm" webstripperlinkwas="ch47_03.htm" title="Conditional Statements with if ">47.3</A
>)</SPAN
>
used in the <em class="emphasis">c</EM
> alias won't work with a <em class="emphasis">cd</EM
> alias.
Although the <em class="emphasis">csh</EM
> manual page admits it won't work, I'd call that another
<span class="link">C shell bug (<a class="linkend" href="ch47_02.htm" webstripperlinkwas="ch47_02.htm" title="C Shell Programming Considered Harmful ">47.2</A
>)</SPAN
>.)</TD
></TR
></TABLE
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
&#13;







<a class="co" href="ch44_19.htm" webstripperlinkwas="ch44_19.htm" title="44.19 The Bourne Shell set Command ">set</A
> 





<a class="co" href="ch44_15.htm" webstripperlinkwas="ch44_15.htm" title="44.15 Handling Command-Line Arguments in Shell Scripts ">$#</A
> 







&#13;</PRE
></TH
><td valign="TOP"><pre class="screen">
c()
{
   dir=&quot;$1&quot;

   # Delete dots.  Surround every letter with &quot;/&quot; and &quot;*&quot;.
   # Add a final &quot;/.&quot; to be sure this only matches a directory:
   dirpat=&quot;`echo $dir | sed 's/\([^.]*\)\./\/\1*/g'`/.&quot;

   # In case $dirpat is empty, set dummy &quot;x&quot; then shift it away:
   set x $dirpat; shift

   # Do the cd if we got one match, else print error:
   if [ &quot;$1&quot; = &quot;$dirpat&quot; ]; then
      # pattern didn't match (shell didn't expand it)
      echo &quot;c: no match for $dirpat&quot; 1&gt;&amp;2
   elif [ $# = 1 ]; then
      echo &quot;$1&quot;
      cd &quot;$1&quot;
   else
      echo &quot;c: too many matches for $dir:&quot; 1&gt;&amp;2
      ls -d &quot;$@&quot;
   fi

   unset dir dirpat
}</PRE
></TD
></TR
></TABLE
></P
><p class="para">The function starts by building a wildcard pattern to match the
directory initials.
For example, if you type <code class="literal">c&nbsp;u.i.h.</CODE
>, <em class="emphasis">sed</EM
> makes the pattern
<code class="literal">/u*/i*/h*/.</CODE
> in <code class="literal">$dirpat</CODE
>.
Next, the shell expands the wildcards onto its command-line parameters;
the trailing dot makes sure the pattern only matches a directory (as in
article
<a class="xref" href="ch21_12.htm" webstripperlinkwas="ch21_12.htm" title="Copying Files to a Directory ">21.12</A
>).
If the Bourne shell can't match a wildcard pattern, it leaves the
pattern unchanged; the first <code class="literal">if</CODE
> test spots that.
If there was just one match, there'll be one command-line parameter
left, and the shell <em class="emphasis">cd</EM
>s there.
Otherwise, there were too many matches; the function shows them so you
can make your pattern longer and more specific.</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch14_08.htm" webstripperlinkwas="ch14_08.htm" title="14.8 Quick cds with Aliases "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 14.8 Quick cds with Aliases " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch14_10.htm" webstripperlinkwas="ch14_10.htm" title="14.10 Variables Help You Find Directories and Files "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 14.10 Variables Help You Find Directories and Files " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">14.8 Quick cds with Aliases </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">14.10 Variables Help You Find Directories and Files </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
