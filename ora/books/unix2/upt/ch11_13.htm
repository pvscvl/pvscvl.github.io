<html><head><title>[Chapter 11] 11.13 Shell Command-Line Editing </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:36:15Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch11_01.htm" webstripperlinkwas="ch11_01.htm" title="11. The Lessons of History"><link rel="prev" href="ch11_12.htm" webstripperlinkwas="ch11_12.htm" title="11.12 Pass History to Another Shell "><link rel="next" href="ch11_14.htm" webstripperlinkwas="ch11_14.htm" title="11.14 More Ways to Do Interactive History Editing "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch11_12.htm" webstripperlinkwas="ch11_12.htm" title="11.12 Pass History to Another Shell "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 11.12 Pass History to Another Shell " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 11<br>The Lessons of History</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch11_14.htm" webstripperlinkwas="ch11_14.htm" title="11.14 More Ways to Do Interactive History Editing "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 11.14 More Ways to Do Interactive History Editing " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-2200">11.13 Shell Command-Line Editing </A
></H2
><p class="para">[This article was written for the Korn Shell.<a class="indexterm" name="AUTOID-13151"></A
><a class="indexterm" name="AUTOID-13154"></A
>
It also applies to <em class="emphasis">bash</EM
> and <em class="emphasis">tcsh</EM
>, though there are some
differences.
Check your shell's manpage. <i class="filename">-JP]</I
></P
><p class="para">If you make a typing mistake in your shell command line and press 
RETURN, it's gone. After you get the pesky error message, you'll
have to type the whole thing in again&nbsp;- unless you happen to be
using the C shell <em class="emphasis">and</EM
> happen to remember its
<span class="link">Byzantine &quot;history&quot; commands (<a class="linkend" href="ch11_02.htm" webstripperlinkwas="ch11_02.htm" title="History in a Nutshell ">11.2</A
>)</SPAN
>.
If you use the Korn shell, you may know that it gives
you a <em class="emphasis">vi</EM
>-like editing capability; if you've actually tried
this, you probably agree that <em class="emphasis">vi</EM
> makes a lousy command-line
editor.
[I don't agree. <code class="literal">:-)</CODE
>
If you know <em class="emphasis">vi</EM
>, hit ESC on a command line to go to <em class="emphasis">vi</EM
>
command mode; <em class="emphasis">a</EM
> or <em class="emphasis">i</EM
> takes you to input mode, as always.
Hit RETURN from either mode to execute a command line&nbsp;- or
CTRL-c to cancel it. <em class="emphasis">-JP</EM
>&nbsp;]</P
><p class="para">However, fewer people know that the Korn shell has another editing
mode, one that emulates the
<span class="link">Emacs (<a class="linkend" href="ch32_01.htm" webstripperlinkwas="ch32_01.htm#UPT-ART-5540" title="Emacs: The Other Editor ">32.1</A
>)</SPAN
>
editor.
The emacs
mode editing commands act like a natural extension to traditional,
simple shell editing commands (like Delete or Backspace
for character erase), so even if you
aren't familiar with the <em class="emphasis">emacs</EM
> editor, you should find emacs
mode useful. To use emacs mode, put this line in your <em class="emphasis">.profile</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">set -o emacs</PRE
></BLOCKQUOTE
></P
><p class="para">We'll cover only the most useful emacs mode commands here. For
a more complete description, see O'Reilly &amp; Associates' 
<em class="emphasis">Learning the Korn Shell</EM
>, by Bill Rosenblatt.</P
><p class="para">Emacs mode figures out what your
<span class="link">character-erase key (<a class="linkend" href="ch05_09.htm" webstripperlinkwas="ch05_09.htm" title="Setting Your Erase, Kill, and Interrupt Characters ">5.9</A
>)</SPAN
>
is and lets you
use it in the same way.
In addition, it gives you the
basic commands for editing a line listed in<a class="indexterm" name="AUTOID-13181"></A
><a class="indexterm" name="AUTOID-13184"></A
>
<a class="xref" href="#UPT-ART-2200-TAB-0" title="Korn Shell Emacs Mode Line Editing Commands">Table 11.1</A
>.</P
><table class="table"><caption class="table"><a class="title" name="UPT-ART-2200-TAB-0">Table 11.1: Korn Shell Emacs Mode Line Editing Commands</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Command</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-b</TD
><td class="entry" rowspan="1" colspan="1">Move backward one character (without deleting).</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-f</TD
><td class="entry" rowspan="1" colspan="1">Move forward one character.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-d</TD
><td class="entry" rowspan="1" colspan="1">Delete one character forward.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-z</TD
><td class="entry" rowspan="1" colspan="1">Move to beginning of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-e</TD
><td class="entry" rowspan="1" colspan="1">Move to end of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-k</TD
><td class="entry" rowspan="1" colspan="1">Delete (&quot;kill&quot;) forward to end of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-w</TD
><td class="entry" rowspan="1" colspan="1">Delete (&quot;wipe&quot;) backward to beginning of line.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-y</TD
><td class="entry" rowspan="1" colspan="1">Retrieve (&quot;yank&quot;) last deleted item.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-c</TD
><td class="entry" rowspan="1" colspan="1">Delete entire line.</TD
></TR
></TBODY
></TABLE
><p class="para">In addition, emacs mode maintains a history file that enables you
to recall previous commands.
The commands in
<a class="xref" href="#UPT-ART-2200-TAB-1" title="Korn Shell Emacs Mode History Commands">Table 11.2</A
>
are the most
important of those that let you navigate the history file.</P
><table class="table"><caption class="table"><a class="title" name="UPT-ART-2200-TAB-1">Table 11.2: Korn Shell Emacs Mode History Commands</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Command</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Function</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-p</TD
><td class="entry" rowspan="1" colspan="1">Go to previous command.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-n</TD
><td class="entry" rowspan="1" colspan="1">Go to next command.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">CTRL-r<em class="emphasis">string</EM
></TD
><td class="entry" rowspan="1" colspan="1">Search backward for command containing <em class="emphasis">string</EM
>.</TD
></TR
></TBODY
></TABLE
><p class="para">The first of these is the most useful by far&nbsp;- it's the &quot;I made
a mistake, so I'll go back and fix it&quot; key. The search capability
lets you bring back specific commands you may have typed awhile
ago without having to go through the history file line by line
with CTRL-p. Just enter CTRL-r followed by a search string and RETURN,
and the Korn shell will bring back the <em class="emphasis">most recent</EM
> command
that contains the search string (or beep at you if it finds no match).
Assuming it is the command you want, you would then press RETURN
again to run the command.
If you begin your search string with a caret (<code class="literal">^</CODE
>), it will only match
commands that begin with the search string; this will be familiar
behavior to users of such UNIX tools as <em class="emphasis">grep</EM
>, <em class="emphasis">sed</EM
>, and
<em class="emphasis">awk</EM
>.</P
><p class="para"><a class="indexterm" name="AUTOID-13251"></A
><a class="indexterm" name="AUTOID-13254"></A
>Another extremely useful feature of emacs mode is the <em class="emphasis">filename
completion</EM
> facility, which should be familiar to C shell experts
as well as Emacs users (see article
<a class="xref" href="ch09_08.htm" webstripperlinkwas="ch09_08.htm" title="Filename Completion: Faster Filename Typing ">9.8</A
>).
Emacs mode supports two completion commands, the most useful of which
is ESC&nbsp;ESC (the Escape key pressed twice).
If you type in a word and press ESC&nbsp;ESC, the shell will search for a filename
that begins with what you typed and try to finish it. If there is
only one filename that begins with your word, the shell will complete
the name. If there is more than one, it will only complete out as
far as it can without having to make a choice.</P
><p class="para">For example, if your directory contained the file <em class="emphasis">program.c</EM
>
and you typed <code class="literal">pro</CODE
> followed by ESC&nbsp;ESC, the shell would automatically
complete the filename and leave you an extra space. But if your
directory also contained the file <em class="emphasis">program.o</EM
>, the shell would
only complete out to <code class="literal">program.</CODE
> and let you complete the filename
yourself.</P
><p class="para">[Another way to do history editing is with your own editor:
the
<span class="link"><em class="emphasis">fc</EM
> command (<a class="linkend" href="ch11_14.htm" webstripperlinkwas="ch11_14.htm" title="More Ways to Do Interactive History Editing ">11.14</A
>)</SPAN
>.
<em class="emphasis">-JP</EM
>&nbsp;]</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">BR</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch11_12.htm" webstripperlinkwas="ch11_12.htm" title="11.12 Pass History to Another Shell "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 11.12 Pass History to Another Shell " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch11_14.htm" webstripperlinkwas="ch11_14.htm" title="11.14 More Ways to Do Interactive History Editing "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 11.14 More Ways to Do Interactive History Editing " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">11.12 Pass History to Another Shell </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">11.14 More Ways to Do Interactive History Editing </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
