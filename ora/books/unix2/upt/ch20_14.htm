<html><head><title>[Chapter 20] 20.14 RCS Basics </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-10-23T15:45:05Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch20_01.htm" webstripperlinkwas="ch20_01.htm" title="20. Backing Up Files"><link rel="prev" href="ch20_13.htm" webstripperlinkwas="ch20_13.htm" title="20.13 SCCS Basics "><link rel="next" href="ch20_15.htm" webstripperlinkwas="ch20_15.htm" title="20.15 List RCS Revision Numbers with rcsrevs "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch20_13.htm" webstripperlinkwas="ch20_13.htm" title="20.13 SCCS Basics "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 20.13 SCCS Basics " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 20<br>Backing Up Files</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch20_15.htm" webstripperlinkwas="ch20_15.htm" title="20.15 List RCS Revision Numbers with rcsrevs "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 20.15 List RCS Revision Numbers with rcsrevs " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-6240">20.14 RCS Basics </A
></H2
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="rcs">rcs</A
><br></TH
><td valign="TOP">[I've patterned this article after
<span class="link">the article on SCCS (<a class="linkend" href="ch20_13.htm" webstripperlinkwas="ch20_13.htm" title="SCCS Basics ">20.13</A
>)</SPAN
>
by Bruce Barnett.
<a class="indexterm" name="UPT-ART-6240-IX-RCS"></A
>
This one shows how to do the same things with the Revision Control
System, RCS, which is on many systems&nbsp;- and also on the CD-ROM.
-JP]</TD
></TR
></TABLE
><p class="para">You don't need to ask the system manager to restore files.
You can recover any version you want with one command.
Here is a simple introduction to RCS.</P
><ol class="orderedlist"><li class="listitem"><p class="para">Create a subdirectory called
<em class="emphasis">RCS</EM
>
in the directory where you keep the code or other text files
you want to protect.</P
></LI
><li class="listitem"><p class="para">It's a good idea (but not required) to add the characters
<code class="literal">$Id$</CODE
>
somewhere in the file you want to place under RCS.
Put this in a comment field. That is, use
<code class="literal">/*&nbsp;$Id$&nbsp;*/</CODE
>
in a C program and
<code class="literal">#&nbsp;$Id$</CODE
>
in a shell or Perl script.</P
></LI
><li class="listitem"><p class="para">Place the file under Revision Control. This is done by typing:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ci</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-22777"></A
>The <em class="emphasis">ci</EM
> (checkin) program will prompt you for a short description of the file.
That's it. You're done.
There is another command and an option you need to know:<a class="indexterm" name="AUTOID-22780"></A
></P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>co</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
>
% <code class="userinput"><b>co -l</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">co</EM
> (checkout) command will get a copy of the file from RCS.
The file will be marked read-only.
If you want to edit the file, use the <em class="emphasis">co -l</EM
> command (the option
is a lowercase L)-then,
when you're done, return the file to the <em class="emphasis">RCS</EM
> directory with the command
<em class="emphasis">ci</EM
>.
When you check in the file, <em class="emphasis">ci</EM
> asks for a brief description
of your changes.
These can be very useful, later, to learn the history of revisions and
to find a particular revision you might want to recover; the command
<code class="literal">rlog</CODE
><code class="replaceable"><i>&nbsp;filename</I
></CODE
> gives that info.</P
></LI
></OL
><p class="para">There are only two more commands that you will need to know.
If you checked out a file for editing, and later on decided you didn't
want to change it, use:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>rcs -u</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
>
% <code class="userinput"><b>rm</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">and if you want a list of all files currently checked out, use:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>rlog -L -R RCS/*</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">(If you don't use RCS often, you may want to store those command lines
in
<span class="link">aliases or shell functions (<a class="linkend" href="ch10_01.htm" webstripperlinkwas="ch10_01.htm#UPT-ART-4930" title="Creating Custom Commands ">10.1</A
>)</SPAN
>
with names like <em class="emphasis">Checkout</EM
>,
<em class="emphasis">Checkedout</EM
>, and so on.)
That's all there is to it!
If you are not using RCS or SCCS, you should.
They are the best way to protect yourself and do not require dozens of
tapes.</P
><p class="para">It is much easier to just type:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>co -r1.12</B
></CODE
> <code class="replaceable"><i>filename</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">One command, and version 1.12 is restored.
If it's not the right one, restore the version before or after the one
you just grabbed.
(If you don't want to create a file, you can add the <em class="emphasis">-p</EM
> option to

send the file to standard output.
Pipe the <em class="emphasis">co</EM
> output to another program: a pager, a printer, etc.)</P
><p class="para">If you are worried that you are keeping 12 versions
of the file on the disk, and that this will use up a lot of disk
space, don't. RCS stores the differences between versions, not 12
separate copies of the file.
It can recover any version of the file.</P
><p class="para">Suppose you delete a file by accident?
Well, if the file is just checked out with a 
<em class="emphasis">co</EM
>,
it will be retrieved and marked read-only, so deleting the file will cause 
<em class="emphasis">rm</EM
>
to ask you for confirmation.
If you do delete it, you can recover it with another
<em class="emphasis">co</EM
>
command.
Suppose you check out a file with 
<em class="emphasis">co -l</EM
>,
because you planned to change it.
Well, if this file gets deleted accidentally, you would lose the most
recent changes. This is why you should check your files back into RCS
frequently&nbsp;- several times a day or even more.
Do it whenever you make significant changes to the file, and it would
be difficult to remember all of the changes. Making hundreds of
changes to a file without checking it back into the system is just
begging for trouble.</P
><p class="para">This brief overview left out a lot of features and helpful information.
For example, RCS can:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">Merge two or more peoples' work into one with <em class="emphasis">rcsmerge</EM
> and
<em class="emphasis">co -j</EM
>.</P
></LI
><li class="listitem"><p class="para">Build a tree of revisions with multiple branches and sub-branches.
This lets you make and store multiple independent revisions.</P
></LI
><li class="listitem"><p class="para">Assign an arbitrary `state' to each revision&nbsp;- for example,
<em class="emphasis">alpha</EM
>, <em class="emphasis">released</EM
>, <em class="emphasis">stable</EM
>.</P
></LI
><li class="listitem"><p class="para">Name each revision, refer to revisions by name instead of number.</P
></LI
><li class="listitem"><p class="para">Keep a list of users who are allowed to manipulate a particular
RCS file.</P
></LI
></UL
><p class="para">To find out more, see the RCS manual pages.
<em class="emphasis">rcsintro</EM
>(1) gives a more complete overview; manpages like
<em class="emphasis">ci</EM
>(1) have details on the many other useful features.
Finally, O'Reilly &amp; Associates' <em class="emphasis">Applying RCS and SCCS</EM
> is packed
with tips and techniques for using revision control in group projects
(where you'll need it even more).
Articles
<a class="xref" href="ch27_10.htm" webstripperlinkwas="ch27_10.htm" title="Search RCS Files with rcsgrep ">27.10</A
>
and
<a class="xref" href="ch20_15.htm" webstripperlinkwas="ch20_15.htm" title="List RCS Revision Numbers with rcsrevs ">20.15</A
>
explain tools for searching RCS files.
The script in article
<a class="xref" href="ch25_05.htm" webstripperlinkwas="ch25_05.htm" title="Page Through Compressed, RCS, Unprintable Files ">25.5</A
>,
<em class="emphasis">rcsmore</EM
> (and <em class="emphasis">rcsless</EM
> and <em class="emphasis">rcspg</EM
>),
makes it easy to read through RCS files.</P
><a class="indexterm" name="AUTOID-22852"></A
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
>, <span class="authorinitials">BB</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch20_13.htm" webstripperlinkwas="ch20_13.htm" title="20.13 SCCS Basics "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 20.13 SCCS Basics " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch20_15.htm" webstripperlinkwas="ch20_15.htm" title="20.15 List RCS Revision Numbers with rcsrevs "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 20.15 List RCS Revision Numbers with rcsrevs " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">20.13 SCCS Basics </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">20.15 List RCS Revision Numbers with rcsrevs </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
