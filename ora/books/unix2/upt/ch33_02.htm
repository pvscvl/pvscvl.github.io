<html><head><title>[Chapter 33] 33.2 Writing Editing Scripts </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:46:46Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch33_01.htm" webstripperlinkwas="ch33_01.htm" title="33. Batch Editing"><link rel="prev" href="ch33_01.htm" webstripperlinkwas="ch33_01.htm" title="33.1 Why Line Editors Aren't Dinosaurs "><link rel="next" href="ch33_03.htm" webstripperlinkwas="ch33_03.htm" title="33.3 Line Addressing "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch33_01.htm" webstripperlinkwas="ch33_01.htm" title="33.1 Why Line Editors Aren't Dinosaurs "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 33.1 Why Line Editors Aren't Dinosaurs " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 33<br>Batch Editing</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch33_03.htm" webstripperlinkwas="ch33_03.htm" title="33.3 Line Addressing "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 33.3 Line Addressing " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7975">33.2 Writing Editing Scripts </A
></H2
><p class="para">When you write a script that
contains a series of editing actions and then run the script
on an input file, you take what
would be a <em class="emphasis">hands-on</EM
> procedure in an editor such as <em class="emphasis">vi</EM
>
and transform it into a <em class="emphasis">look-no-hands</EM
> procedure.</P
><p class="para">When performing edits manually, you get to trust the cause-and-effect
relationship of entering an editing command and seeing the immediate
result.
There is usually an &quot;undo&quot; command that allows you to reverse
the effect of a command and return the text file to its previous state.
Once you learn an interactive text editor, you have
the feeling of making changes in a safe and controlled manner, one
step at a time.</P
><p class="para">Most people new to &quot;power editing&quot; will feel there is greater
risk in writing a script to perform a series of edits than
in making those changes manually.
The fear is that by automating the task,
something will happen that cannot be reversed.
The object of learning scripting with <em class="emphasis">ex</EM
> or <em class="emphasis">sed</EM
> 
is to understand the commands well enough to
see that your results are predictable.
In other words, you come to understand the
cause-and-effect relationship between your editing
script and the output that you get.</P
><p class="para">This requires using the editor in a controlled, methodical way.
Gradually, you will develop
methods for creating and testing editing scripts. You will come
to rely upon these methods and gain confidence
that you know what your script is doing and why.</P
><p class="para">Here are a few tips:</P
><ol class="orderedlist"><li class="listitem"><p class="para">Carefully examine your input file, using <em class="emphasis">grep</EM
>,
before designing your script.</P
></LI
><li class="listitem"><p class="para">Start with a small sample of occurrences in a test file.
Run your script on the sample and make sure the script is working.
Remember, it's just as important to make sure the script <em class="emphasis">doesn't</EM
>
work where you <em class="emphasis">don't</EM
> want it to. Then increase the size of the sample.
Try to increase the complexity of the input.</P
></LI
><li class="listitem"><p class="para">Work carefully, testing each command that you add to a script.
Compare the output against the input file to see what has
changed. Prove to yourself that your script is complete.
Your script may work perfectly, based on your assumptions
of what is in the input file, but your assumptions
may be wrong.</P
></LI
><li class="listitem"><p class="para"><em class="emphasis">Be pragmatic!</EM
>
Try to accomplish what you can with your script
but understand that it doesn't have to do 100&nbsp;percent of the job.
If you encounter difficult situations, check and
see how frequently they occur.
Sometimes it's better to do a few remaining edits manually.</P
></LI
></OL
><p class="para">If you can add to these tips with your experience,
tack them on.</P
><p class="para">[Okay, I will: use a
<span class="link">revision control system (<a class="linkend" href="ch20_12.htm" webstripperlinkwas="ch20_12.htm" title="Protecting Files with SCCS or RCS ">20.12</A
>)</SPAN
>
to keep previous versions.
That makes it easy to undo your edits. -<em class="emphasis">JP</EM
>&nbsp;]</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">DD</SPAN
> <span class="bibliomisc">from O'Reilly &amp; Associates' <cite class="citetitle">sed &amp; awk</CITE
></SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch33_01.htm" webstripperlinkwas="ch33_01.htm" title="33.1 Why Line Editors Aren't Dinosaurs "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 33.1 Why Line Editors Aren't Dinosaurs " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch33_03.htm" webstripperlinkwas="ch33_03.htm" title="33.3 Line Addressing "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 33.3 Line Addressing " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">33.1 Why Line Editors Aren't Dinosaurs </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">33.3 Line Addressing </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
