<html><head><title>[Chapter 36] 36.6 Miscellaneous sort Hints </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:48:42Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch36_01.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/ch36_01.htm" title="36. Sorting"><link rel="prev" href="ch36_05.htm" webstripperlinkwas="ch36_05.htm" title="36.5 Alphabetic and Numeric Sorting "><link rel="next" href="ch36_07.htm" webstripperlinkwas="ch36_07.htm" title="36.7 Sorting Multiline Entries "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch36_05.htm" webstripperlinkwas="ch36_05.htm" title="36.5 Alphabetic and Numeric Sorting "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 36.5 Alphabetic and Numeric Sorting " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 36<br>Sorting</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch36_07.htm" webstripperlinkwas="ch36_07.htm" title="36.7 Sorting Multiline Entries "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 36.7 Sorting Multiline Entries " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-2921">36.6 Miscellaneous sort Hints </A
></H2
><p class="para">Here is a grab bag of useful, if not exactly interesting, <em class="emphasis">sort</EM
>
features.
The utility will actually do quite a bit, if you let it.<a class="indexterm" name="AUTOID-41702"></A
></P
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-2921-SECT-1.1">36.6.1 Dealing with Repeated Lines </A
></H3
><p class="para"><em class="emphasis">sort -u</EM
> sorts the file and eliminates duplicate lines.
It's
more powerful than
<span class="link"><em class="emphasis">uniq</EM
> (<a class="linkend" href="ch35_20.htm" webstripperlinkwas="ch35_20.htm" title="Quick Reference: uniq ">35.20</A
>)</SPAN
>
because:</P
><ul class="itemizedlist"><li class="listitem"><p class="para">It sorts the file for you; <em class="emphasis">uniq</EM
> assumes that the file is already
sorted, and won't do you any good if it isn't.</P
></LI
><li class="listitem"><p class="para">It is much more flexible.
<em class="emphasis">sort&nbsp;-u</EM
> considers lines &quot;unique&quot; if
the
<span class="link">sort fields (<a class="linkend" href="ch36_02.htm" webstripperlinkwas="ch36_02.htm" title="Sort Fields: How sort Sorts ">36.2</A
>)</SPAN
>
you've selected match.
So the lines don't even have
to be (strictly speaking) unique; differences outside of the sort
fields are ignored.<a class="indexterm" name="AUTOID-41718"></A
></P
></LI
></UL
><p class="para">In return, there are a few things that <em class="emphasis">uniq</EM
> does that <em class="emphasis">sort</EM
>
won't do&nbsp;- like print only those lines that aren't repeated, or count
the number of times each line is repeated.
But on the whole, I find
<em class="emphasis">sort&nbsp;-u</EM
> more useful.</P
><p class="para">Here's one idea for using <em class="emphasis">sort&nbsp;-u</EM
>.
When I was writing a manual, I
often needed to make tables of error messages.
The easiest way to do
this was to <em class="emphasis">grep</EM
> the source code for <em class="emphasis">printf</EM
> statements;
write some
<span class="link">Emacs (<a class="linkend" href="ch32_01.htm" webstripperlinkwas="ch32_01.htm#UPT-ART-5540" title="Emacs: The Other Editor ">32.1</A
>)</SPAN
>
macros to eliminate junk that I didn't care
about; use <em class="emphasis">sort&nbsp;-u</EM
> to put the messages in order and get rid of
duplicates; and write some more Emacs macros to format the error
messages into a table.
All I had to do was write the descriptions.<a class="indexterm" name="AUTOID-41731"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-2921-SECT-1.2">36.6.2 Ignoring Blanks </A
></H3
><p class="para">One important option (that I've mentioned a number of times) is
<em class="emphasis">-b</EM
>; this tells <em class="emphasis">sort</EM
> to ignore extra white space at the
beginning of each field.
This is absolutely essential; otherwise,
your sorts will have rather strange results.
In my opinion, <em class="emphasis">-b</EM
>
should be the default.
But they didn't ask me.</P
><p class="para">Another thing to remember about <em class="emphasis">-b</EM
>: it only works if you
explicitly specify which fields you want to sort.
By itself, <em class="emphasis">sort
-b</EM
> is the same as <em class="emphasis">sort</EM
>: white space characters are counted.
I call this a bug, don't you?<a class="indexterm" name="AUTOID-41744"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-2921-SECT-1.3">36.6.3 Case-Insensitive Sorts </A
></H3
><p class="para">If you don't care about the difference between uppercase and
lowercase letters, invoke <em class="emphasis">sort</EM
> with the <em class="emphasis">-f</EM
> (case-fold)
option.
This folds lowercase letters into uppercase.
In other words, it treats all letters as uppercase.<a class="indexterm" name="AUTOID-41752"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-2921-SECT-1.4">36.6.4 Dictionary Order </A
></H3
><p class="para">The <em class="emphasis">-d</EM
> option tells <em class="emphasis">sort</EM
> to ignore all characters except
for letters, digits, and white space.
In particular, <em class="emphasis">sort -d</EM
>
ignores punctuation.<a class="indexterm" name="AUTOID-41761"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-2921-SECT-1.5">36.6.5 Month Order </A
></H3
><p class="para">The <em class="emphasis">-M</EM
> option tells <em class="emphasis">sort</EM
> to treat the first three
non-blank characters of a field as a three-letter month abbreviation,
and to sort accordingly.
That is, JAN comes before FEB, which comes
before MAR.
This option isn't available on all versions of UNIX.<a class="indexterm" name="AUTOID-41769"></A
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-2921-SECT-1.6">36.6.6 Reverse Sort </A
></H3
><p class="para">The <em class="emphasis">-r</EM
> option tells <em class="emphasis">sort</EM
> to &quot;reverse&quot; the order of the
sort; i.e., Z comes before A, 9 comes before 1, and so on.
You'll find that this option is really useful.
For example, imagine
you have a program running in the background that records the number
of free blocks in the filesystem at midnight each night.
Your log
file might look like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">Jan 1 1992:  108 free blocks
Jan 2 1992:  308 free blocks
Jan 3 1992: 1232 free blocks
Jan 4 1992:   76 free blocks
...</PRE
></BLOCKQUOTE
></P
><p class="para">The script below finds the smallest and largest number of free blocks
in your log file:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
&#13;
<a class="co" href="ch25_20.htm" webstripperlinkwas="ch25_20.htm" title="25.20 Printing the Top of a File ">head</A
> 

&#13;</PRE
></TH
><td valign="TOP"><pre class="screen">
#!/bin/sh
echo &quot;Minimum free blocks&quot;
sort -t: +1nb  logfile | head -1

echo &quot;Maximum free blocks&quot;
sort -t: +1nbr logfile | head -1</PRE
></TD
></TR
></TABLE
></P
><p class="para">It's not profound, but it's an example of what you can do.</P
></DIV
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">ML</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch36_05.htm" webstripperlinkwas="ch36_05.htm" title="36.5 Alphabetic and Numeric Sorting "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 36.5 Alphabetic and Numeric Sorting " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch36_07.htm" webstripperlinkwas="ch36_07.htm" title="36.7 Sorting Multiline Entries "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 36.7 Sorting Multiline Entries " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">36.5 Alphabetic and Numeric Sorting </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">36.7 Sorting Multiline Entries </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
