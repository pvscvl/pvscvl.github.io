<html><head><title>[Chapter 42] 42.2 Fixing a Hung Terminal or Job </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:52:22Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch42_01.htm" webstripperlinkwas="ch42_01.htm" title="42. Problems with Terminals"><link rel="prev" href="ch42_01.htm" webstripperlinkwas="ch42_01.htm" title="42.1 Making Sense Out of the Terminal Mess "><link rel="next" href="ch42_03.htm" webstripperlinkwas="ch42_03.htm" title="42.3 Why Changing TERM Sometimes Doesn't Work "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch42_01.htm" webstripperlinkwas="ch42_01.htm" title="42.1 Making Sense Out of the Terminal Mess "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 42.1 Making Sense Out of the Terminal Mess " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 42<br>Problems with Terminals</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch42_03.htm" webstripperlinkwas="ch42_03.htm" title="42.3 Why Changing TERM Sometimes Doesn't Work "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 42.3 Why Changing TERM Sometimes Doesn't Work " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-5250">42.2 Fixing a Hung Terminal or Job </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-46572"></A
><a class="indexterm" name="AUTOID-46575"></A
><a class="indexterm" name="AUTOID-46578"></A
>Here are a lot of techniques for unlocking a
locked-up terminal or window session.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-5250-SECT-1.1">42.2.1 Output Stopped? </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-46584"></A
><a class="indexterm" name="AUTOID-46586"></A
>If your terminal has a HOLD SCREEN or SCROLL LOCK button, did you
accidentally press it?
Try pressing it and see if things start working.
If pressing the button once doesn't fix the problem, you should probably press
it once more to undo the screen hold.
Otherwise, you may lock up your session worse than it was before!</P
><p class="para"><a class="indexterm" name="AUTOID-46589"></A
><a class="indexterm" name="AUTOID-46592"></A
><a class="indexterm" name="AUTOID-46595"></A
>Another way to stop output is by pressing 
CTRL-s.
The way to restart stopped output is with 
CTRL-q&nbsp;- try
pressing that now.
(Unlike a
SCROLL&nbsp;LOCK
button, though, if 
CTRL-q
doesn't help, you don't need
to undo it.)</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-5250-SECT-1.2">42.2.2 Job Stopped? </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-46601"></A
>If you have a
<span class="link">shell prompt (<a class="linkend" href="ch07_01.htm" webstripperlinkwas="ch07_01.htm#UPT-ART-4820" title="Why Change Your Prompt? ">7.1</A
>)</SPAN
>
instead of being in the program you thought you
were running&nbsp;- and
if your UNIX has job control&nbsp;- you may have stopped a job.
<span class="link"> Try the <em class="emphasis">jobs</EM
> command; if the job is stopped, restart it . (<a class="linkend" href="ch12_08.htm" webstripperlinkwas="ch12_08.htm" title="Job Control in a Nutshell ">12.8</A
>)</SPAN
></P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-5250-SECT-1.3">42.2.3 Program Waiting for Input? </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-46609"></A
>The program may be waiting for you to answer a question or type text
to its standard input.</P
><blockquote class="caution"><p class="para"><strong>CAUTION:</STRONG
> If the program you were running does something that's hard to undo-like
removing files-<em class="emphasis">don't</EM
> try this step unless you've thought about it
carefully.&#13;</P
><p class="para"><a class="indexterm" name="AUTOID-46616"></A
><a class="indexterm" name="AUTOID-46619"></A
>If your system has
job control,
you can find out by putting the job in the background with 
CTRL-z
and <em class="emphasis">bg</EM
>.
If the job was waiting for input, you'll see the message:</P
><p class="para"><blockquote class="screen"><pre class="screen">[1]  + Stopped (tty input)  grep pat</PRE
></BLOCKQUOTE
></P
><p class="para">You can
bring the job back into the foreground and answer its question,
if you know what that question is.
Otherwise, now that the job is stopped, you can kill it.
See the following directions.</P
><p class="para">On systems without job control, you may be able to satisfy the program by
pressing <kbd class="keycap">[RETURN]</KBD
>
or some other key that the program is expecting, like <em class="emphasis">y</EM
>
or <em class="emphasis">n</EM
>.
You could also try pressing <kbd class="keycap">[CTRL-d]</KBD
> or whatever your 
&quot;end of input&quot; character is set to.
That might log you out, though, unless you've set the
<span class="link"><em class="emphasis">ignoreeof</EM
> variable (<a class="linkend" href="ch03_05.htm" webstripperlinkwas="ch03_05.htm" title="Stop Accidental C Shell Logouts ">3.5</A
>)</SPAN
>.</P
></BLOCKQUOTE
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-5250-SECT-1.4">42.2.4 Stalled Data Connection? </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-46636"></A
><a class="indexterm" name="AUTOID-46639"></A
>If your terminal is hooked to a computer, modem, or network, be sure that
the wires haven't come loose.</P
><p class="para"><a class="indexterm" name="AUTOID-46642"></A
><a class="indexterm" name="AUTOID-46644"></A
>If you're using a modem and the modem has function lights, try pressing
keys and see if the SD or Send Data light flashes.
If it does, your terminal is sending data to the host computer.
If the RD or Receive Data light flashes, the computer is sending data to your
terminal-if you don't see anything, there might be something wrong on your
terminal.</P
><p class="para"><a class="indexterm" name="AUTOID-46647"></A
><a class="indexterm" name="AUTOID-46650"></A
>If you're connected with
<span class="link"><em class="emphasis">rlogin</EM
> or <em class="emphasis">telnet</EM
> (<a class="linkend" href="ch01_33.htm" webstripperlinkwas="ch01_33.htm" title="UNIX Networking and Communications ">1.33</A
>)</SPAN
>,
the network to the remote computer might be down or be really slow.
Try opening another connection to the same remote host-if you get a response
like <code class="literal">Connection</CODE
> <code class="literal">timed</CODE
> <code class="literal">out</CODE
>, you have two choices:</P
><ol class="orderedlist"><li class="listitem"><p class="para">Wait for your original connection to unfreeze.
The connection may come back and let you keep working where 
you left off.
Or the connection may end when <em class="emphasis">rlogin</EM
> or <em class="emphasis">telnet</EM
> notices
the network problem.</P
></LI
><li class="listitem"><p class="para">Quit the session and try later.</P
></LI
></OL
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-5250-SECT-1.5">42.2.5 Aborting Programs </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-46669"></A
><a class="indexterm" name="AUTOID-46672"></A
><a class="indexterm" name="AUTOID-46675"></A
>To abort a program, most users press 
CTRL-c.
Your account may be set up to use a different interrupt
character, like DELETE or RUBOUT.
If these don't work, try 
CTRL-/
(CTRL-backslash).
Under most circumstances, 
this will force the program to terminate.
Otherwise, do the following:</P
><ol class="orderedlist"><li class="listitem"><p class="para">Log in at another terminal or window.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-46682"></A
>Enter the command <code class="literal">ps -x</CODE
>.
On System V, use <code class="literal">ps -u </CODE
><code class="replaceable"><i>yourname</I
></CODE
>, where <code class="replaceable"><i>yourname</I
></CODE
>
is your UNIX username.
This displays a list of the
programs you are running, something like this:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ps -x</B
></CODE
>
PID     TTY     STAT    TIME    COMMAND
163     i26     I       0:41    -csh (csh)
8532    i26     TW      2:17    vi ts.ms
22202   i26     S       12:50   vi UNIXintro.ms
8963    pb      R       0:00    ps -x
24077   pb      S       0:05    -bin/csh (csh)
%</PRE
></BLOCKQUOTE
></P
><p class="para"></P
></LI
><li class="listitem"><p class="para">Search through this list to find the command that has backfired.
Note the process identification (PID) number for this command.</P
></LI
><li class="listitem"><p class="para"><a class="indexterm" name="AUTOID-46697"></A
>Enter the command
<span class="link"><code class="literal">kill </CODE
><code class="replaceable"><i>PID</I
></CODE
> (<a class="linkend" href="ch38_10.htm" webstripperlinkwas="ch38_10.htm" title="Destroying Processes with kill ">38.10</A
>)</SPAN
>,
where <em class="emphasis">PID</EM
> is the identification number from the previous step.
If that doesn't work, try <code class="literal">kill -1 </CODE
><code class="replaceable"><i>PID</I
></CODE
> to send a
HUP signal.
You may need <em class="emphasis">kill -9</EM
>, but try the other <em class="emphasis">kill</EM
>s first.</P
></LI
><li class="listitem"><p class="para">If the UNIX shell prompt (like <code class="literal">%</CODE
> or <code class="literal">$</CODE
>)
has appeared at your
original terminal, things are probably back to normal.
You may still have to
<span class="link">  take the terminal out of a strange mode  (<a class="linkend" href="ch42_04.htm" webstripperlinkwas="ch42_04.htm" title="Checklist for Resetting a Messed Up Terminal ">42.4</A
>)</SPAN
>
though.</P
><p class="para"><a class="indexterm" name="AUTOID-46714"></A
><a class="indexterm" name="AUTOID-46716"></A
><a class="indexterm" name="AUTOID-46718"></A
>If the shell prompt hasn't come back, find the shell 
associated with your terminal (identified by a tty number) and 
<em class="emphasis">kill</EM
> it.
The command name for the C shell is <em class="emphasis">csh</EM
>.
For the Bourne shell, it is <em class="emphasis">sh</EM
>.
In most cases, this will destroy 
any other commands running from your terminal.
Be sure to <em class="emphasis">kill</EM
> 
the shell on your own terminal, not the terminal you borrowed to 
enter these commands. 
The tty you borrowed is the one running <em class="emphasis">ps</EM
>; look at
the example above and check the <code class="literal">TTY</CODE
> column.
In this case, the borrowed terminal is TTYpb.</P
><p class="para">Check <em class="emphasis">ps</EM
> to ensure that your shell has died.
If it is still there, 
take more drastic action with the command <code class="literal">kill -9 </CODE
><code class="replaceable"><i>PID</I
></CODE
>.</P
></LI
><li class="listitem"><p class="para">Run <em class="emphasis">ps -x</EM
> again to be sure that all processes on the other tty
have died.
(In some cases, processes will remain.)
If there are still processes on the other tty, kill them.</P
></LI
><li class="listitem"><p class="para">At this point, you should be able to log in again from your own terminal.</P
></LI
></OL
><p class="para">The
<span class="link"><em class="emphasis">ps</EM
> (<a class="linkend" href="ch38_05.htm" webstripperlinkwas="ch38_05.htm" title="The ps Command ">38.5</A
>)</SPAN
>
command,
which lists all the programs you are running, 
also gives you useful information about the status of each program and 
the amount of CPU time it has consumed.
Note that <em class="emphasis">ps</EM
> lists 
all the programs you are running, including programs you may
not know about (e.g., programs that other programs execute automatically).</P
></DIV
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
>, <span class="authorinitials">ML</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch42_01.htm" webstripperlinkwas="ch42_01.htm" title="42.1 Making Sense Out of the Terminal Mess "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 42.1 Making Sense Out of the Terminal Mess " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch42_03.htm" webstripperlinkwas="ch42_03.htm" title="42.3 Why Changing TERM Sometimes Doesn't Work "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 42.3 Why Changing TERM Sometimes Doesn't Work " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">42.1 Making Sense Out of the Terminal Mess </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">42.3 Why Changing TERM Sometimes Doesn't Work </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
