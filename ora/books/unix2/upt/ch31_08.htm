<html><head><title>[Chapter 31] 31.8 More Examples of Mapping Keys in vi </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:46:18Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch31_01.htm" webstripperlinkwas="ch31_01.htm" title="31. Creating Custom Commands in vi"><link rel="prev" href="ch31_07.htm" webstripperlinkwas="ch31_07.htm" title="31.7 Maps for Repeated Edits "><link rel="next" href="ch31_09.htm" webstripperlinkwas="ch31_09.htm" title="31.9 Good Stuff for Your .exrc File "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch31_07.htm" webstripperlinkwas="ch31_07.htm" title="31.7 Maps for Repeated Edits "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 31.7 Maps for Repeated Edits " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 31<br>Creating Custom Commands in vi</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch31_09.htm" webstripperlinkwas="ch31_09.htm" title="31.9 Good Stuff for Your .exrc File "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 31.9 Good Stuff for Your .exrc File " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-6390">31.8 More Examples of Mapping Keys in vi </A
></H2
><p class="para">The examples that follow will give you an idea of the clever
shortcuts possible when defining keyboard maps.</P
><ol class="orderedlist"><li class="listitem"><p class="para">Add text whenever you move to the end of a word:</P
><p class="para"><blockquote class="screen"><pre class="screen">map e ea</PRE
></BLOCKQUOTE
></P
><p class="para">Most of the time, the only reason you want to move to the end of
a word is to add text. This map sequence puts you in text-input mode
automatically.
Note that the mapped key, <code class="literal">e</CODE
>, has meaning in <em class="emphasis">vi</EM
>.
You're allowed to map a key that is already used by <em class="emphasis">vi</EM
>,
but the key's normal function will be unavailable as long
as the map is in effect. This isn't so bad in this case, since
the <code class="literal">E</CODE
> command is often identical to <code class="literal">e</CODE
>.</P
><p class="para">In the remaining examples, we assume that <code class="literal">e</CODE
> has been mapped 
to <code class="literal">ea</CODE
>.&#13;</P
></LI
><li class="listitem"><p class="para"><span class="link">Save a file and edit the next one in a series (<a class="linkend" href="ch30_04.htm" webstripperlinkwas="ch30_04.htm" title="Editing Multiple Files with vi ">30.4</A
>)</SPAN
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">map q :w^M:n^M</PRE
></BLOCKQUOTE
></P
><p class="para">Notice that you can map keys to <em class="emphasis">ex</EM
> commands, but be sure
to finish each <em class="emphasis">ex</EM
> command with a RETURN.
This sequence makes it easy to move from one file to the next
and is useful when you've opened many short files with one <em class="emphasis">vi</EM
>
command.
Mapping the letter <code class="literal">q</CODE
> helps you
remember that the sequence is similar to a &quot;quit.&quot;</P
></LI
><li class="listitem"><p class="para">Put <em class="emphasis">troff</EM
> emboldening codes (<em class="emphasis">\fB</EM
> and <em class="emphasis">\fP</EM
>) around a word: </P
><p class="para"><blockquote class="screen"><pre class="screen">map v i\fB^[e\fP^[</PRE
></BLOCKQUOTE
></P
><p class="para">This sequence assumes that the cursor is at the beginning of the
word. First, you enter text-input mode, then you type the code for
bold font. (In <em class="emphasis">map</EM
> commands, you don't need to type two backslashes to 
produce one backslash.) Next, you return to command mode
by typing a
<span class="link">&quot;quoted&quot; (<a class="linkend" href="ch31_06.htm" webstripperlinkwas="ch31_06.htm" title="Protecting Keys from Interpretation by ex ">31.6</A
>)</SPAN
>
ESC.
Finally, you append the closing <em class="emphasis">troff</EM
> code at the 
end of the word, and you return to command mode.
Of course, the map is not limited to <em class="emphasis">troff</EM
> font codes.
You can use it to enclose a word in parentheses or C comment
characters, to name just a few applications.</P
><p class="para">This example shows you that map sequences are allowed to contain 
other map commands (the <code class="literal">e</CODE
> is already mapped to <code class="literal">ea</CODE
>).
The ability to use nested map sequences is
controlled by <em class="emphasis">vi</EM
>'s
<span class="link"><code class="literal">remap</CODE
> option (<a class="linkend" href="ch31_14.htm" webstripperlinkwas="ch31_14.htm" title="Don't Lose Important Functions with vi Maps: Use noremap">31.14</A
>)</SPAN
>,
which is normally
enabled.</P
></LI
><li class="listitem"><p class="para">Put <em class="emphasis">troff</EM
> emboldening codes around a word, even when the
cursor is not at the beginning of the word:</P
><p class="para"><blockquote class="screen"><pre class="screen">map V lbi\fB^[e\fP^[</PRE
></BLOCKQUOTE
></P
><p class="para">This sequence is the same as the previous one, except that it
uses <code class="literal">lb</CODE
> to
handle the additional task of positioning the cursor at the
beginning of the word. The cursor might be in the middle of the
word, so you want to move to the beginning with the <code class="literal">b</CODE
> 
command.</P
><p class="para">But if the cursor were already at the beginning of the
word, the <code class="literal">b</CODE
> command would move the cursor to the previous
word instead. To guard against that case,
type an <code class="literal">l</CODE
> before moving back with <code class="literal">b</CODE
>, so that 
the cursor never starts on the first letter of the word.
You can define variations of this sequence by replacing the 
<code class="literal">b</CODE
> with <code class="literal">B</CODE
> and the <code class="literal">e</CODE
> with <code class="literal">Ea</CODE
>.
In all cases though, the <code class="literal">l</CODE
> command prevents this sequence
from working if the cursor is at the end of a line.
(To get around this, you could add a space to the end of the word
before typing the keymap.)</P
></LI
></OL
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">DG</SPAN
> <span class="bibliomisc">from O'Reilly &amp; Associates' <cite class="citetitle">Learning the vi Editor</CITE
>, Chapter 7</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch31_07.htm" webstripperlinkwas="ch31_07.htm" title="31.7 Maps for Repeated Edits "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 31.7 Maps for Repeated Edits " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch31_09.htm" webstripperlinkwas="ch31_09.htm" title="31.9 Good Stuff for Your .exrc File "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 31.9 Good Stuff for Your .exrc File " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">31.7 Maps for Repeated Edits </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">31.9 Good Stuff for Your .exrc File </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
