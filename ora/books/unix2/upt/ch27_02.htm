<html><head><title>[Chapter 27] 27.2 Searching for Text with grep </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:44:17Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch27_01.htm" webstripperlinkwas="ch27_01.htm" title="27. Searching Through Files"><link rel="prev" href="ch27_01.htm" webstripperlinkwas="ch27_01.htm" title="27.1 Different Versions of grep "><link rel="next" href="ch27_03.htm" webstripperlinkwas="ch27_03.htm" title="27.3 Finding Text That Doesn't Match "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch27_01.htm" webstripperlinkwas="ch27_01.htm" title="27.1 Different Versions of grep "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 27.1 Different Versions of grep " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 27<br>Searching Through Files</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch27_03.htm" webstripperlinkwas="ch27_03.htm" title="27.3 Finding Text That Doesn't Match "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 27.3 Finding Text That Doesn't Match " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-2550">27.2 Searching for Text with grep </A
></H2
><p class="para">There are many well-known benefits provided by <em class="emphasis">grep</EM
> to the user who doesn't remember
what his or her files contain. 
Even users of non-UNIX systems who make fun of its obscure name wish
they had a utility with its power to search through a set of files
for an arbitrary text pattern, known as a<a class="indexterm" name="AUTOID-29972"></A
>
<span class="link">regular expression (<a class="linkend" href="ch26_04.htm" webstripperlinkwas="ch26_04.htm" title="Using Metacharacters in Regular Expressions ">26.4</A
>)</SPAN
>.</P
><p class="para">The main function of <em class="emphasis">grep</EM
> is to look for strings matching a regular
expression and print only the lines found.
Use <em class="emphasis">grep</EM
> when you want to look at how a
particular word is used in one or more files.
For example, here's how to list the lines in the file <em class="emphasis">ch04</EM
> 
that contain either <em class="emphasis">run-time</EM
> or <em class="emphasis">run time</EM
>:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch08_14.htm" webstripperlinkwas="ch08_14.htm" title="8.14 Bourne Shell Quoting ">&quot;..&quot;</A
> 





&#13;</PRE
></TH
><td valign="TOP"><pre class="screen">
$ <code class="userinput"><b>grep &quot;run[- ]time&quot; ch04</B
></CODE
>
This procedure avoids run-time errors for not-assigned
and a run-time error message is produced.
run-time error message is produced.
program aborts and a run-time error message is produced.
DIMENSION statement in BASIC is executable at run time.
This means that arrays can be redimensioned at run time.
accessible or not open, the program aborts and a run-time</PRE
></TD
></TR
></TABLE
></P
><p class="para">Another use might be to look for a specific
<span class="link"><em class="emphasis">nroff</EM
>/<em class="emphasis">troff</EM
> macro (<a class="linkend" href="ch43_14.htm" webstripperlinkwas="ch43_14.htm" title="nroff/troff and Macro Packages ">43.14</A
>)</SPAN
>
in a file.
In a file coded with mm macros, the following command will list
top-level (<code class="literal">.H1</CODE
>) and second-level (<code class="literal">.H2</CODE
>) headings:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch15_02.htm" webstripperlinkwas="ch15_02.htm" title="15.2 Filename Wildcards in a Nutshell ">[..]</A
> 






&#13;</PRE
></TH
><td valign="TOP"><pre class="screen">
$ <code class="userinput"><b>grep &quot;^\.H[12]&quot; ch0[12]</B
></CODE
>
ch01:.H1 &quot;Introduction&quot;
ch01:.H1 &quot;Windows, Screens, and Images&quot;
ch01:.H2 &quot;The Standard Screen-stdscr&quot;
ch01:.H2 &quot;Adding Characters&quot;
ch02:.H1 &quot;Introduction&quot;
ch02:.H1 &quot;What Is Terminal Independence?&quot;
ch02:.H2 &quot;Termcap&quot;
ch02:.H2 &quot;Terminfo&quot;</PRE
></TD
></TR
></TABLE
></P
><p class="para">In effect, it produces a quick outline of the contents of these files.</P
><p class="para"><em class="emphasis">grep</EM
> is also often used as a 
<span class="link">filter (<a class="linkend" href="ch01_03.htm" webstripperlinkwas="ch01_03.htm" title="Programs Are Designed to Work Together ">1.3</A
>)</SPAN
>,
to select from the output of some other program.
For example,
not all versions of
<span class="link"><em class="emphasis">ps</EM
> (<a class="linkend" href="ch38_05.htm" webstripperlinkwas="ch38_05.htm" title="The ps Command ">38.5</A
>)</SPAN
>
allow you to print out the processes belonging to another user, but
it's easy to simulate this behavior by listing all processes and
piping the output to <em class="emphasis">grep</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>ps -aux | grep jerry</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">There are several options commonly used with <em class="emphasis">grep</EM
>.
The <em class="emphasis">-i</EM
> option specifies
that the search ignore the distinction between uppercase and lowercase.
The
<span class="link"><em class="emphasis">-c</EM
> option (<a class="linkend" href="ch15_08.htm" webstripperlinkwas="ch15_08.htm" title="Getting a List of Non-Matching Files with grep -c ">15.8</A
>)</SPAN
>
tells <em class="emphasis">grep</EM
> to return only a count of the number of lines matched.
The <em class="emphasis">-w</EM
> option searches for the pattern &quot;as a word.&quot;
For example, <code class="literal">grep&nbsp;if</CODE
> would match words like <em class="emphasis">cliff</EM
> or
<em class="emphasis">knife</EM
>, but <code class="literal">grep&nbsp;-w&nbsp;if</CODE
> wouldn't.
The
<span class="link"><em class="emphasis">-l</EM
> option (<a class="linkend" href="ch15_07.htm" webstripperlinkwas="ch15_07.htm" title="Getting a List of Matching Files with grep -l ">15.7</A
>)</SPAN
>
returns only the name of the file when <em class="emphasis">grep</EM
> finds a match.
This can be used to prepare a list of files for another command.
The
<span class="link"><em class="emphasis">-v</EM
> option (<a class="linkend" href="ch27_03.htm" webstripperlinkwas="ch27_03.htm" title="Finding Text That Doesn't Match ">27.3</A
>)</SPAN
>
reverses the normal action, and only prints out lines that don't
match the search pattern.</P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">DD</SPAN
> <span class="bibliomisc">from <cite class="citetitle">UNIX Text Processing</CITE
>, Hayden Books, 1987, Chapter 11</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch27_01.htm" webstripperlinkwas="ch27_01.htm" title="27.1 Different Versions of grep "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 27.1 Different Versions of grep " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch27_03.htm" webstripperlinkwas="ch27_03.htm" title="27.3 Finding Text That Doesn't Match "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 27.3 Finding Text That Doesn't Match " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">27.1 Different Versions of grep </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">27.3 Finding Text That Doesn't Match </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
