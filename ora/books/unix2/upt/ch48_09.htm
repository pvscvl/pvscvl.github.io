<html><head><title>[Chapter 48] 48.9 PostScript Calendars with pcal </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-10-23T15:55:33Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch48_01.htm" webstripperlinkwas="ch48_01.htm" title="48. Office Automation"><link rel="prev" href="ch48_08.htm" webstripperlinkwas="ch48_08.htm" title="48.8 Calendar for 132-Column Terminals or Printers "><link rel="next" href="ch48_10.htm" webstripperlinkwas="ch48_10.htm" title="48.10 Working with Names and Addresses "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch48_08.htm" webstripperlinkwas="ch48_08.htm" title="48.8 Calendar for 132-Column Terminals or Printers "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 48.8 Calendar for 132-Column Terminals or Printers " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 48<br>Office Automation</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch48_10.htm" webstripperlinkwas="ch48_10.htm" title="48.10 Working with Names and Addresses "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 48.10 Working with Names and Addresses " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-9011">48.9 PostScript Calendars with pcal </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-58073"></A
>Sometimes you want a hardcopy calendar.
You can generate
one using 
<span class="link"><em class="emphasis">cal</EM
> (<a class="linkend" href="ch48_06.htm" webstripperlinkwas="ch48_06.htm" title="Get Calendar for Any Month or Year: cal ">48.6</A
>)</SPAN
>
and an ASCII-to-PostScript filter like
<span class="link"><em class="emphasis">pstext</EM
> (<a class="linkend" href="ch43_22.htm" webstripperlinkwas="ch43_22.htm" title="Converting Text Files to PostScript ">43.22</A
>)</SPAN
>,
but the resulting calendar is nothing
to write home about.</P
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="pcal">pcal</A
><br></TH
><td valign="TOP"><a class="indexterm" name="UPT-ART-9011-IX-PCAL-PROGRAM"></A
>
A nifty alternative for printing calendars is <em class="emphasis">pcal</EM
>.
<em class="emphasis">pcal</EM
>
isn't just a pretty face: yes, it prints nice calendars, but 
you can also configure it to do quite a lot more.
I just discovered <em class="emphasis">pcal</EM
>, and it already has potential for
becoming one of my favorite utilities. </TD
></TR
></TABLE
><p class="para">In its default form, <em class="emphasis">pcal</EM
> just creates a PostScript
calendar for the current month.
The PostScript commands are written
to standard output, so you need to 
pipe it to <em class="emphasis">lpr</EM
> for BSD-based systems, or <em class="emphasis">lp</EM
>
for System V-based systems.
(Of course, your printer has to be able to print PostScript.)
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>pcal | lpr</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">You'll get a full-page calendar of the current month.
The dates for Saturdays and Sundays are printed in gray.
To get a different
month, you can specify it the same way you would using <em class="emphasis">cal</EM
>.
For a calendar for November 1992, you could do:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>pcal 11 1992 | lpr</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">&#13;For a calendar for the whole year, use the <em class="emphasis">-w</EM
> option to
<em class="emphasis">pcal</EM
>.</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>pcal -w | lpr</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">Once you get a chance to see the <em class="emphasis">pcal</EM
> output, you'll already
see how big an improvement it is over just printing the output of the
<em class="emphasis">cal</EM
> program.
But <em class="emphasis">pcal</EM
> also gives you the opportunity to
configure your calendars.</P
><p class="para"><a class="indexterm" name="AUTOID-58110"></A
><em class="emphasis">pcal</EM
> looks for a file 
called <em class="emphasis">.calendar</EM
> in either your home directory or 
your current directory.
(This is a
<span class="link">hidden file (<a class="linkend" href="ch16_11.htm" webstripperlinkwas="ch16_11.htm" title="Showing Hidden Files with ls -A and -a ">16.11</A
>)</SPAN
>
because the name starts with a dot.)
You can use this file to mark days in the year.
For example, you can use it to define 
particular days as holidays:</P
><p class="para"><blockquote class="screen"><pre class="screen">1/1                           New Year's Day
Feb 14                        Valentine's Day</PRE
></BLOCKQUOTE
></P
><p class="para">But <em class="emphasis">pcal</EM
> also understands a limited set of relational 
words as well.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">Second Sunday in May          Mother's Day
4th thu of nov                Thanksgiving</PRE
></BLOCKQUOTE
></P
><p class="para"><a class="indexterm" name="AUTOID-58122"></A
>For each of these examples, the given day will have the specified
text written in.
If you use an asterisk (<code class="literal">*</CODE
>) after the date, the day is
marked as a holiday.</P
><p class="para"><blockquote class="screen"><pre class="screen">1/1*                          New Year's Day
Feb 14                        Valentine's Day
Second Sunday in May          Mother's Day
4th thu of nov*               Thanksgiving</PRE
></BLOCKQUOTE
></P
><p class="para">This means that the day appears in gray on the calendar, like Saturday
and Sunday.
But more important, it means that <em class="emphasis">pcal</EM
> will 
understand that the marked day isn't a working day.</P
><p class="para">In addition to holidays,
you can use <em class="emphasis">pcal</EM
> to mark things like birthdays and
anniversaries.</P
><p class="para"><blockquote class="screen"><pre class="screen">June 4                        My Birthday!!!
September 3                   Peter's birthday
April 1                       Mom and Dad's anniversary</PRE
></BLOCKQUOTE
></P
><p class="para">Now here's where <em class="emphasis">pcal</EM
> starts to get useful.
You can use <em class="emphasis">pcal</EM
>
to mark meetings you have scheduled:</P
><p class="para"><blockquote class="screen"><pre class="screen">april 14                      Meet with tax attorney at 4:45
last day of october           Dr. Jekyll's office, 5:30</PRE
></BLOCKQUOTE
></P
><p class="para">Or for regular appointments:</P
><p class="para"><blockquote class="screen"><pre class="screen">Each Friday of July           Leave early for Cape</PRE
></BLOCKQUOTE
></P
><p class="para">As you can probably tell by now, the syntax accepted by <em class="emphasis">pcal</EM
> 
is very flexible.
It's actually much too complicated to be able
to explain in full here, but <em class="emphasis">pcal</EM
> comes with a complete
manual page, and <em class="emphasis">pcal -h</EM
> will give you a list of
syntax and command-line options.
And 
if you just wing it, you're likely to come
up with syntax that works. </P
><p class="para">I don't want to leave it at that, though.
Let's get on with a few more examples of some of the nicer features.</P
><p class="para">In place of the name of a month, you can use the <code class="literal">all</CODE
> keyword 
to mean all months, i.e., the entire year.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">First day of all              Send monthly report to boss
Each Monday in all            Status meeting at 11:30</PRE
></BLOCKQUOTE
></P
><p class="para">Now, we used <code class="literal">First</CODE
> <code class="literal">day</CODE
> <code class="literal">of</CODE
> <code class="literal">all</CODE
>, above,
to specify when
we should send our monthly report.
What about when the first of
the month falls on a weekend or holiday?
Well, <em class="emphasis">pcal</EM
> also
understands phrases like <code class="literal">workday</CODE
> and <code class="literal">holiday</CODE
>.
To make sure that your reminder to submit your report appears 
on the first workday of the month, you can write:</P
><p class="para"><blockquote class="screen"><pre class="screen">First workday of all          Send monthly report to boss</PRE
></BLOCKQUOTE
></P
><p class="para">By default, <em class="emphasis">pcal</EM
> considers only Saturdays and Sundays
to be non-workdays.
You add days to this list when you define 
holidays with asterisks (*) as described previously.
[1]</P
><blockquote class="footnote"><p class="para">[1] Note that <em class="emphasis">pcal</EM
> only knows about holidays that have already
been declared in your specification file.
So in general, you
want to define your holidays early in your <em class="emphasis">.calendar</EM
> file
so that later references to workdays will be up-to-date.</P
></BLOCKQUOTE
><p class="para">Another feature of <em class="emphasis">pcal</EM
> is that you can use the phases of
the moon in your date specifications.  </P
><p class="para"><blockquote class="screen"><pre class="screen">2nd full_moon in all          Blue moon!</PRE
></BLOCKQUOTE
></P
><p class="para"><em class="emphasis">pcal</EM
> supplies format specifiers for writing more
detailed descriptions.
For example, suppose you want to be reminded at
the beginning of each month to make your monthly schedule.
You can make up an entry that reads:</P
><p class="para"><blockquote class="screen"><pre class="screen">First workday of all          Write schedule for %B</PRE
></BLOCKQUOTE
></P
><p class="para">The special format specifier <code class="literal">%B</CODE
> expands into the 
name of the current month.
So the first workday of October
will read, &quot;Write schedule for October.&quot;</P
><p class="para">Some other modifiers defined by <em class="emphasis">pcal</EM
> are <code class="literal">%A</CODE
> for the name
of the weekday,
<code class="literal">%d</CODE
> for the day of the month, <code class="literal">%Y</CODE
> for the year,
<code class="literal">%j</CODE
> for the day of the
year, and <code class="literal">%l</CODE
> for the number of days remaining in the year.
There are also a few modifiers available.
The most useful ones 
are <code class="literal">%+</CODE
> and <code class="literal">%-</CODE
> for using the following or previous
month or year. 
For example, suppose you want a reminder on the last day
of the month to pay the rent for the next
month.
You can write:</P
><p class="para"><blockquote class="screen"><pre class="screen">Last day of all               Pay rent for month of %+B</PRE
></BLOCKQUOTE
></P
><p class="para">In our office, we're expected to turn in time sheets for each
2-week period, on the 1st and 16th of each month.
We can write:</P
><p class="para"><blockquote class="screen"><pre class="screen">first workday of all          Time sheet due for end of %-B
workday on_or_after all 16    Time sheet due for beginning of %B</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;You can also specify command-line options to <em class="emphasis">pcal</EM
> in
your <em class="emphasis">.calendar</EM
> file, using the <code class="literal">opt</CODE
> keyword.
For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">opt   -n Times-Italic -m</PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">-n Times-Italic</EM
> option tells <em class="emphasis">pcal</EM
> to use the
Times Italic font to display the text within the dates. 
The <em class="emphasis">-m</EM
> option tells <em class="emphasis">pcal</EM
> to show 
the new, half, and full moons in the month.<a class="indexterm" name="AUTOID-58202"></A
></P
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">LM</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch48_08.htm" webstripperlinkwas="ch48_08.htm" title="48.8 Calendar for 132-Column Terminals or Printers "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 48.8 Calendar for 132-Column Terminals or Printers " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch48_10.htm" webstripperlinkwas="ch48_10.htm" title="48.10 Working with Names and Addresses "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 48.10 Working with Names and Addresses " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">48.8 Calendar for 132-Column Terminals or Printers </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">48.10 Working with Names and Addresses </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.htm" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
