<html><head><title>[Chapter 30] 30.28 Keep Track of Functions and Included Files with ctags and tags</TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:45:48Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch30_01.htm" webstripperlinkwas="ch30_01.htm" title="30. vi Tips and Tricks"><link rel="prev" href="ch30_27.htm" webstripperlinkwas="ch30_27.htm" title="30.27 vi Compound Searches "><link rel="next" href="ch30_29.htm" webstripperlinkwas="ch30_29.htm" title="30.29 Setting Multiple tags Files "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_27.htm" webstripperlinkwas="ch30_27.htm" title="30.27 vi Compound Searches "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 30.27 vi Compound Searches " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 30<br>vi Tips and Tricks</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch30_29.htm" webstripperlinkwas="ch30_29.htm" title="30.29 Setting Multiple tags Files "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 30.29 Setting Multiple tags Files " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-1560">30.28 Keep Track of Functions and Included Files with ctags and tags</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-34124"></A
><a class="indexterm" name="AUTOID-34126"></A
><a class="indexterm" name="AUTOID-34129"></A
><a class="indexterm" name="AUTOID-34132"></A
>The source code for a large C program will usually be spread
over several files. Sometimes, it is difficult to keep track of
which file contains which function definitions. To simplify
matters, a UNIX command called <em class="emphasis">ctags</EM
> can be used together
with the <code class="literal">:tag</CODE
> command of <em class="emphasis">vi</EM
>.</P
><p class="para"><em class="emphasis">ctags</EM
> creates an information file (a database)
that <em class="emphasis">vi</EM
> uses later to determine which files define which
functions. By default, this database file is called <em class="emphasis">tags</EM
>.
This file contains lines of the form:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="replaceable"><i>tag_ID     file    context</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">where <code class="replaceable"><i>tag_ID</I
></CODE
> is the name of the C function or macro,
<code class="replaceable"><i>file</I
></CODE
> is the source file in which <code class="replaceable"><i>tag_ID</I
></CODE
> is defined,
and <code class="replaceable"><i>context</I
></CODE
> is a search pattern that shows the line of code
containing <code class="replaceable"><i>tag_ID</I
></CODE
>.</P
><p class="para">From within <em class="emphasis">vi</EM
>, a command such as:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch30_26.htm" webstripperlinkwas="ch30_26.htm" title="30.26 Shell Escapes: Running One UNIX Command While Using Another">:!</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
<code class="userinput"><b>:!ctags file.c</B
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">creates a file named <em class="emphasis">tags</EM
> under your current directory.
<em class="emphasis">tags</EM
> is a database containing information on the functions defined 
in <em class="emphasis">file.c</EM
>. A command like:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>:!ctags *.c</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">creates a <em class="emphasis">tags</EM
> file describing all the C source files under the
directory.
[If you'll be using the tags file while you're in some other directory,
be sure to use an absolute pathname, like this:</P
><p class="para"><table class="screen.co" border="1"><tr><th valign="TOP"><pre class="calloutlist">
<a class="co" href="ch09_16.htm" webstripperlinkwas="ch09_16.htm" title="9.16 Command Substitution ">`...`</A
> </PRE
></TH
><td valign="TOP"><pre class="screen">
<code class="userinput"><b>:!ctags `pwd`/*.c</B
></CODE
></PRE
></TD
></TR
></TABLE
></P
><p class="para">That will store 
<span class="link">absolute pathnames (<a class="linkend" href="ch14_02.htm" webstripperlinkwas="ch14_02.htm" title="Using Relative and Absolute Pathnames ">14.2</A
>)</SPAN
>
in the <em class="emphasis">tags</EM
> file. <em class="emphasis">-JP</EM
>&nbsp;]</P
><p class="para">Now suppose your <em class="emphasis">tags</EM
> file contains information on all the
source files that make up a C program. Also suppose that you want
to look at or edit a function in the program but do not know where
the function is. 
From within <em class="emphasis">vi</EM
>, the command:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>:tag </B
></CODE
><code class="replaceable"><i>name</I
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">will look at the <em class="emphasis">tags</EM
> file to find out which file contains the
definition of the function <em class="emphasis">name</EM
>.
It will then read in the file and position
the cursor on the line where the name is defined. In this way,
you don't have to know which file you have to edit; you only have
to decide which function you want to edit.
[My favorite <em class="emphasis">tags</EM
> shortcut is to put the cursor on the first letter of a
function name in your buffer.
Then press CTRL-<code class="literal">]</CODE
> (Control-right square bracket).
<em class="emphasis">vi</EM
> will read the <em class="emphasis">tags</EM
> file and open to the function name that was
under your cursor.
At least, my version of <em class="emphasis">vi</EM
> will do that! <em class="emphasis">-JP</EM
>&nbsp;]</P
><blockquote class="note"><p class="para"><strong>NOTE:</STRONG
> If <em class="emphasis">tags</EM
> isn't working, that may be because you have the <em class="emphasis">vi</EM
>
option <em class="emphasis">nowrapscan</EM
> set.
That's a problem on many versions of <em class="emphasis">vi</EM
>.
If typing the following command fixes <em class="emphasis">tags</EM
> for you:</P
><p class="para"><blockquote class="screen"><pre class="screen"><code class="userinput"><b>:set wrapscan</B
></CODE
></PRE
></BLOCKQUOTE
></P
><p class="para">then add that command to your
<span class="link"><em class="emphasis">.exrc</EM
> file (<a class="linkend" href="ch04_09.htm" webstripperlinkwas="ch04_09.htm" title="Setting Up vi with the .exrc File ">4.9</A
>)</SPAN
>
or
<span class="link"><em class="emphasis">EXINIT</EM
> variable (<a class="linkend" href="ch06_03.htm" webstripperlinkwas="ch06_03.htm" title="Predefined Environment Variables ">6.3</A
>)</SPAN
>.
(Thanks to Chris Torek for this tip.)</P
></BLOCKQUOTE
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JS</SPAN
> <span class="bibliomisc">from O'Reilly &amp; Associates' <cite class="citetitle">Learning the vi Editor</CITE
>, Chapter 7</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch30_27.htm" webstripperlinkwas="ch30_27.htm" title="30.27 vi Compound Searches "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 30.27 vi Compound Searches " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch30_29.htm" webstripperlinkwas="ch30_29.htm" title="30.29 Setting Multiple tags Files "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 30.29 Setting Multiple tags Files " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">30.27 vi Compound Searches </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">30.29 Setting Multiple tags Files </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
