<html><head><title>[Chapter 8] 8.6 Output Command-Line Arguments </TITLE
><meta name="DC.title" content="UNIX Power Tools"><meta name="DC.creator" content="Jerry Peek, Tim O'Reilly &amp; Mike Loukides"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-04T21:34:14Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-260-3" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="ch08_01.htm" webstripperlinkwas="ch08_01.htm" title="8. How the Shell Interprets What You Type"><link rel="prev" href="ch08_05.htm" webstripperlinkwas="ch08_05.htm" title="8.5 Command-Line Evaluation "><link rel="next" href="ch08_07.htm" webstripperlinkwas="ch08_07.htm" title="8.7 Setting Your Search Path "></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="UNIX Power Tools" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,58" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch08_05.htm" webstripperlinkwas="ch08_05.htm" title="8.5 Command-Line Evaluation "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 8.5 Command-Line Evaluation " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 8<br>How the Shell Interprets What You Type</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch08_07.htm" webstripperlinkwas="ch08_07.htm" title="8.7 Setting Your Search Path "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 8.7 Setting Your Search Path " border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="UPT-ART-7911">8.6 Output Command-Line Arguments </A
></H2
><p class="para"><a class="indexterm" name="AUTOID-7726"></A
><a class="indexterm" name="AUTOID-7729"></A
>The <em class="emphasis">echo</EM
> command writes its command-line arguments and a newline
to the standard output.
Shell scripts use <em class="emphasis">echo</EM
> for sending text to the terminal, down
a pipe, and into a file.
You can use <em class="emphasis">echo</EM
> on the command line to show the value of a
<span class="link">variable (<a class="linkend" href="ch06_01.htm" webstripperlinkwas="ch06_01.htm#UPT-ART-1170" title="What Environment Variables Are Good For ">6.1</A
>, <a class="linkend" href="ch06_08.htm" webstripperlinkwas="ch06_08.htm" title="Shell Variables ">6.8</A
>)</SPAN
>,
to see how filename wildcards will expand without doing anything else to
those files, or
<span class="link">to check quoting (<a class="linkend" href="ch46_02.htm" webstripperlinkwas="ch46_02.htm" title="Quoting Trouble?  Think, Then Use echo ">46.2</A
>)</SPAN
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo &quot;USER is $USER.&quot;</B
></CODE
>
USER is jerry.
% <code class="userinput"><b>echo &quot;All 'a' files are:    &quot; a*</B
></CODE
>
All 'a' files are:     abacus apple axes</PRE
></BLOCKQUOTE
></P
><p class="para">The <em class="emphasis">printf</EM
> command gives you more formatting control.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-7911-SECT-1.1">8.6.1 Portability </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7746"></A
>The C shell and most other newer shells have a
version of <em class="emphasis">echo</EM
> that's
<span class="link">built in (<a class="linkend" href="ch01_10.htm" webstripperlinkwas="ch01_10.htm" title="Internal and External Commands ">1.10</A
>)</SPAN
>
so it's faster.</P
><p class="para">The original <em class="emphasis">echo</EM
>, and the <em class="emphasis">csh</EM
> echo which acts like it,
have just one option.
The <em class="emphasis">-n</EM
> option tells
<em class="emphasis">echo</EM
> not to print a newline after the message.
Shell scripts use <em class="emphasis">-n</EM
> to send a question to a user and leave the
cursor at the end of the message:</P
><p class="para"><blockquote class="screen"><pre class="screen">echo -n &quot;Enter your name: &quot;</PRE
></BLOCKQUOTE
></P
><p class="para">(The space at the end makes the prompt look better.
The quotes make the shell pass that space on to <em class="emphasis">echo</EM
>.)</P
><p class="para"><a class="indexterm" name="AUTOID-7762"></A
><a class="indexterm" name="AUTOID-7765"></A
><a class="indexterm" name="AUTOID-7768"></A
>Newer versions of <em class="emphasis">echo</EM
> check their arguments for a backslash (<code class="literal">\</CODE
>).
This marks the start of an <em class="emphasis">escape sequence</EM
>, a character
that the backslash and the next letter stand for.
For example, when these newer <em class="emphasis">echo</EM
>s see <code class="literal">\n</CODE
>, they print
a newline character:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>echo &quot;1.\n2.\n3.&quot;</B
></CODE
>
1.
2.
3.
$</PRE
></BLOCKQUOTE
></P
><p class="para">In this version of <em class="emphasis">echo</EM
>, a <code class="literal">\c</CODE
> at the end of the last argument suppresses
the newline&nbsp;- like the <em class="emphasis">-n</EM
> option does in the other <em class="emphasis">echo</EM
>:</P
><p class="para"><blockquote class="screen"><pre class="screen">echo &quot;Enter your name: \c&quot;</PRE
></BLOCKQUOTE
></P
><p class="para">Your online <em class="emphasis">echo</EM
> (or <em class="emphasis">csh</EM
>) manual page
should tell you which version you have
and list any escape sequences.</P
><p class="para">The problem with this newer <em class="emphasis">echo</EM
> is that
it's tough to <em class="emphasis">echo</EM
> an arbitrary string that might have a backslash
in it.<a class="indexterm" name="AUTOID-7792"></A
>
Chris Torek has a workaround: use a
<span class="link">here-document (<a class="linkend" href="ch08_18.htm" webstripperlinkwas="ch08_18.htm" title="Here Documents ">8.18</A
>)</SPAN
>
and
<span class="link"><em class="emphasis">cat</EM
> (<a class="linkend" href="ch25_02.htm" webstripperlinkwas="ch25_02.htm" title="Four Ways to Skin a cat ">25.2</A
>)</SPAN
>
instead of <em class="emphasis">echo</EM
>.  For example:</P
><p class="para"><blockquote class="screen"><pre class="screen">cat &lt;&lt; END
The answer is: $<code class="replaceable"><i>variable-whose-value-might-contain-backslashes</I
></CODE
>
END</PRE
></BLOCKQUOTE
></P
><p class="para">&#13;<em class="emphasis">bash</EM
> users are lucky:
That shell's <em class="emphasis">echo</EM
> has a <em class="emphasis">-e</EM
> option that enables backslash
interpretation, and a <em class="emphasis">-E</EM
> option that disables it.</P
><table class="para.programreference" border="1"><tr><th valign="TOP"><a class="programreference" href="examples/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/examples/index.htm" title="printf">printf</A
><br></TH
><td valign="TOP">&#13;Another utility called <em class="emphasis">printf</EM
> works like the <em class="emphasis">printf(3)</EM
>
routine in the C language; it handles escape sequences, lets you set
field widths, and more.
(The GNU version is on the CD-ROM.)
Here's an example.<a class="indexterm" name="AUTOID-7810"></A
><a class="indexterm" name="AUTOID-7812"></A
>
The <em class="emphasis">wc</EM
>
command gives the number of lines, words, and characters in a file,
followed by the filename.
We pass those four fields in the <em class="emphasis">wc</EM
> output to the <em class="emphasis">printf</EM
>
command line with
<span class="link">backquotes (<a class="linkend" href="ch09_16.htm" webstripperlinkwas="ch09_16.htm" title="Command Substitution ">9.16</A
>)</SPAN
>.
(If you need a reminder of <em class="emphasis">wc</EM
>'s output, see article
<a class="xref" href="ch29_06.htm" webstripperlinkwas="ch29_06.htm" title="Counting Lines, Words, and Characters: wc ">29.6</A
>.)
<em class="emphasis">printf</EM
> takes a formatting command from its first argument.
It outputs the fourth argument after that (<code class="literal">%4$s</CODE
>, the filename);
the number of words from the second argument, in a field five wide with
leading zeroes (<code class="literal">%2$05s</CODE
>); and the number of lines from the first
argument (<code class="literal">%1$s</CODE
>); with a newline (<code class="literal">\n</CODE
>) to finish the line:</TD
></TR
></TABLE
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>printf 'The %4$s file has %2$05s words on %1$s lines.\n' `wc count`</B
></CODE
>
The count file has 00235 words on 42 lines.</PRE
></BLOCKQUOTE
></P
><p class="para">Because <em class="emphasis">printf</EM
> isn't built into any shells I know of, it's more
portable than the crazy set of <em class="emphasis">echo</EM
>s.
If we had <em class="emphasis">printf</EM
> and the old <em class="emphasis">echo</EM
>, life would be easier.
Article
<a class="xref" href="ch46_10.htm" webstripperlinkwas="ch46_10.htm" title="A Portable echo Command ">46.10</A
>
shows a way to make <em class="emphasis">echo</EM
> portable.</P
><p class="para">The C shell <em class="emphasis">echo</EM
> works differently from other versions.
For example, to make an empty line with the standard <em class="emphasis">echo</EM
>, don't give<a class="indexterm" name="AUTOID-7838"></A
><a class="indexterm" name="AUTOID-7841"></A
><a class="indexterm" name="AUTOID-7844"></A
>
any arguments. (This is usually done for readability&nbsp;- to put blank 
lines between other output.)
Standard <em class="emphasis">echo</EM
> will just print a newline:</P
><p class="para"><blockquote class="screen"><pre class="screen">$ <code class="userinput"><b>echo</B
></CODE
>

$</PRE
></BLOCKQUOTE
></P
><p class="para">Without arguments, the C shell <em class="emphasis">echo</EM
> doesn't print the newline.
To get a newline, you have to give an empty argument:</P
><p class="para"><blockquote class="screen"><pre class="screen">% <code class="userinput"><b>echo &quot;&quot;</B
></CODE
>

%</PRE
></BLOCKQUOTE
></P
><p class="para">To use the standard <em class="emphasis">echo</EM
> from the C shell, type <em class="emphasis">/bin/echo</EM
> instead.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="UPT-ART-7911-SECT-1.2">8.6.2 Making Error Messages </A
></H3
><p class="para"><a class="indexterm" name="AUTOID-7862"></A
><a class="indexterm" name="AUTOID-7865"></A
><em class="emphasis">echo</EM
> writes to standard output.
Error messages in shell scripts should be written to the standard error
so that
<span class="link">redirection (<a class="linkend" href="ch13_01.htm" webstripperlinkwas="ch13_01.htm#UPT-ART-1023" title="Using Standard Input and Output">13.1</A
>)</SPAN
>
of standard output doesn't accidentally capture the message.
The Bourne shell
<span class="link"><code class="literal">1&gt;&amp;2</CODE
> operator (<a class="linkend" href="ch45_21.htm" webstripperlinkwas="ch45_21.htm" title="n&gt;&amp;m: Swap Standard Output and Standard Error ">45.21</A
>)</SPAN
>
will move <em class="emphasis">echo</EM
>'s output to standard error:</P
><p class="para"><blockquote class="screen"><pre class="screen">echo &quot;progname: choke wheeze complain&quot; 1&gt;&amp;2</PRE
></BLOCKQUOTE
></P
><p class="para">The C shell can't do that&nbsp;- which is another reason
<span class="link">not to write shell scripts with <em class="emphasis">csh</EM
> (<a class="linkend" href="ch47_02.htm" webstripperlinkwas="ch47_02.htm" title="C Shell Programming Considered Harmful ">47.2</A
>)</SPAN
>.</P
></DIV
><div class="sect1info"><p class="SECT1INFO">- <span class="authorinitials">JP</SPAN
></P
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="ch08_05.htm" webstripperlinkwas="ch08_05.htm" title="8.5 Command-Line Evaluation "><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: 8.5 Command-Line Evaluation " border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" title="UNIX Power Tools"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="UNIX Power Tools" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="ch08_07.htm" webstripperlinkwas="ch08_07.htm" title="8.7 Setting Your Search Path "><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: 8.7 Setting Your Search Path " border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">8.5 Command-Line Evaluation </TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">8.7 Setting Your Search Path </TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="../sedawk/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
