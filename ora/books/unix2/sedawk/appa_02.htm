<html><head><title>[Appendix A] A.2 Syntax of sed Commands</TITLE
><meta name="DC.title" content="sed &amp; awk"><meta name="DC.creator" content="Dale Dougherty &amp; Arnold Robbins"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-03T21:06:14Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-225-5" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="appa_01.htm" webstripperlinkwas="appa_01.htm" title="A. Quick Reference for sed"><link rel="prev" href="appa_01.htm" webstripperlinkwas="appa_01.htm" title="A.1 Command-Line Syntax"><link rel="next" href="appa_03.htm" webstripperlinkwas="appa_03.htm" title="A.3 Command Summary for sed"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="sed &amp; awk" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appa_01.htm" webstripperlinkwas="appa_01.htm" title="A.1 Command-Line Syntax"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: A.1 Command-Line Syntax" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Appendix A<br>Quick Reference for sed</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appa_03.htm" webstripperlinkwas="appa_03.htm" title="A.3 Command Summary for sed"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: A.3 Command Summary for sed" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="SECT1"><h2 class="sect1"><a class="title" name="SEDAWK-APP-A-SECT-2">A.2 Syntax of sed Commands</A
></H2
><p class="para"><a class="indexterm" name="AUTOID-11717"></A
>Sed commands have the general form:</P
><blockquote class="literallayout"><p class="literallayout">[<em class="emphasis">address</EM
>[,<em class="emphasis">address</EM
>]][<kbd class="command">!</KBD
>]<em class="emphasis">command</EM
> [<em class="emphasis">arguments</EM
>]</P
></BLOCKQUOTE
><p class="para">Sed copies each line of input into a pattern space.  Sed instructions
consist of addresses and editing commands.  If the address of the
command matches the line in the pattern space, then the command is
applied to that line.  If a command has no address, then it is applied
to each input line.  If a command changes the contents of the space,
subsequent command-addresses will be applied to the current line in
the pattern space, not the original input line.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="SEDAWK-APP-A-SECT-2.1">A.2.1 Pattern Addressing</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-11730"></A
><a class="indexterm" name="AUTOID-11732"></A
><a class="indexterm" name="AUTOID-11735"></A
><em class="emphasis">address</EM
> can be either a line number or a
<em class="emphasis">pattern</EM
>, enclosed in slashes
(/<em class="emphasis">pattern</EM
>/).  A pattern is
described using a regular expression.  Additionally, \n can be
used to match any newline in the pattern space (resulting from the
<kbd class="command">N</KBD
> command), but not the newline at the end of the
pattern space.</P
><p class="para">If no pattern is specified, the command will be applied to all lines.
If only one address is specified, the command will be applied to all
lines matching that address.  If two comma-separated addresses are
specified, the command will be applied to a range of lines between the
first and second addresses, inclusively.  Some commands accept only
one address: <kbd class="command">a</KBD
>, <kbd class="command">i</KBD
>,
<kbd class="command">r</KBD
>, <kbd class="command">q</KBD
>, and <kbd class="command">=</KBD
>.</P
><p class="para"><a class="indexterm" name="AUTOID-11749"></A
>The ! operator following an address causes sed to apply the
command to all lines that do not match the address.</P
><p class="para"><a class="indexterm" name="AUTOID-11752"></A
>Braces ({}) are used in sed to nest one
address inside another or to apply multiple commands at the same
address.</P
><blockquote class="literallayout"><p class="literallayout">[/<em class="emphasis">pattern</EM
>/[,/<em class="emphasis">pattern</EM
>/]]{<br><em class="emphasis">command1</EM
><br><em class="emphasis">command2</EM
><br>}</P
></BLOCKQUOTE
><p class="para">The opening curly brace must end a line, and the closing curly brace
must be on a line by itself.  Be sure there are no spaces after
the braces.</P
></DIV
><div class="sect2"><h3 class="sect2"><a class="title" name="SEDAWK-APP-A-SECT-2.2">A.2.2 Regular Expression Metacharacters for sed</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-11763"></A
><a class="indexterm" name="AUTOID-11766"></A
>The following table lists the pattern-matching metacharacters that
were discussed in <a class="xref" href="ch03_01.htm" webstripperlinkwas="ch03_01.htm" title="Understanding Regular Expression Syntax">Chapter 3, Understanding Regular Expression Syntax</A
>.</P
><p class="para">Note that an empty regular expression &quot;//&quot; is the same
as the previous regular expression.</P
><table class="table"><caption class="table"><a class="title" name="SEDAWK-APP-A-TAB-1">Table A.1: Pattern-Matching Metacharacters</A
></CAPTION
><thead class="thead"><tr class="row" valign="TOP"><th class="entry" align="LEFT" rowspan="1" colspan="1">Special Characters</TH
><th class="entry" align="LEFT" rowspan="1" colspan="1">Usage</TH
></TR
></THEAD
><tbody class="tbody"><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">.</TD
><td class="entry" rowspan="1" colspan="1">Matches any single character except <em class="emphasis">newline</EM
>.</TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">*</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Matches any number (including zero) of the single character (including
a character specified by a regular expression) that immediately precedes it.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">[...]</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Matches any one of the class of characters enclosed between the
brackets.  All other metacharacters lose their meaning when specified
as members of a class.  A circumflex (^) as the first character inside
brackets reverses the match to all characters except newline and those
listed in the class.  A hyphen (-) is used to indicate a range of
characters.  The close bracket (]) as the first
character in the class is a member of the class.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">\{<em class="emphasis">n,m</EM
>\}</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Matches a range of occurrences of the single character (including a
character specified by a regular expression) that immediately precedes
it.  \{<em class="emphasis">n</EM
>\} will match exactly
<em class="emphasis">n</EM
> occurrences,
\{<em class="emphasis">n,</EM
>\} will match at least
<em class="emphasis">n</EM
> occurrences, and
\{<em class="emphasis">n,m</EM
>\} will match any number of
occurrences between <em class="emphasis">n</EM
> and
<em class="emphasis">m</EM
>.  (sed and grep only).</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">^</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Locates regular expression that follows at the beginning of line.
The ^ is only special when it occurs at the beginning of the regular
expression.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">$</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Locates preceding regular expression at the end of line.  The $ is
only special when it occurs at the end of the regular expression.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">\</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Escapes the special character that follows. </P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">\( \)</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Saves the pattern enclosed between &quot;\(&quot; and
&quot;\)&quot; into a special holding space.  Up to nine
patterns can be saved in this way on a single line.  They can be
&quot;replayed&quot; in substitutions by the escape sequences
&quot;\1&quot; to &quot;\9&quot;.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1"><em class="emphasis">\n</EM
></TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Matches the <em class="emphasis">n</EM
>th pattern previously saved by
&quot;\(&quot; and &quot;\)&quot;, where
<em class="emphasis">n</EM
> is a number from 1 to 9 and previously
saved patterns are counted from the left on the line.</P
></TD
></TR
><tr class="row" valign="TOP"><td class="entry" rowspan="1" colspan="1">&amp;</TD
><td class="entry" rowspan="1" colspan="1"><p class="para">Prints the entire matched text when used in a replacement
string.</P
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appa_01.htm" webstripperlinkwas="appa_01.htm" title="A.1 Command-Line Syntax"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: A.1 Command-Line Syntax" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" title="sed &amp; awk"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="sed &amp; awk" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appa_03.htm" webstripperlinkwas="appa_03.htm" title="A.3 Command Summary for sed"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: A.3 Command Summary for sed" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">A.1 Command-Line Syntax</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">A.3 Command Summary for sed</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
