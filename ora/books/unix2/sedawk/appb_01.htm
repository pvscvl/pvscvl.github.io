<html><head><title>[Appendix B] Quick Reference for awk</TITLE
><meta name="DC.title" content="sed &amp; awk"><meta name="DC.creator" content="Dale Dougherty &amp; Arnold Robbins"><meta name="DC.publisher" content="O'Reilly &amp; Associates, Inc."><meta name="DC.date" content="1998-08-03T21:06:26Z"><meta name="DC.type" content="Text.Monograph"><meta name="DC.format" content="text/html" scheme="MIME"><meta name="DC.source" content="1-56592-225-5" scheme="ISBN"><meta name="DC.language" content="en-US"><meta name="generator" content="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><link rev="made" href="mailto:online-books@oreilly.com" title="Online Books Comments"><link rel="up" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" title="sed &amp; awk"><link rel="prev" href="appa_03.htm" webstripperlinkwas="appa_03.htm" title="A.3 Command Summary for sed"><link rel="next" href="appb_02.htm" webstripperlinkwas="appb_02.htm" title="B.2 Language Summary for awk"></HEAD
><body bgcolor="#FFFFFF" text="#000000"><div class="htmlnav"><h1><img src="gifs/smbanner.gif" webstripperlinkwas="gifs/smbanner.gif" alt="sed &amp; awk" usemap="#srchmap" border="0"></H1
><map name="srchmap"><area shape="RECT" coords="0,0,466,65" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="467,0,514,18" href="jobjects/fsearch.htm" webstripperlinkwas="jobjects/fsearch.htm" alt="Search this book"></MAP
><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appa_03.htm" webstripperlinkwas="appa_03.htm" title="A.3 Command Summary for sed"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: A.3 Command Summary for sed" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Appendix B</FONT
></B
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appb_02.htm" webstripperlinkwas="appb_02.htm" title="B.2 Language Summary for awk"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: B.2 Language Summary for awk" border="0"></A
></TD
></TR
></TABLE
>&nbsp;<hr align="LEFT" width="515" title="footer"></DIV
><div class="APPENDIX"><h1 class="appendix"><a class="title" name="SEDAWK-APP-B">B. Quick Reference for awk</A
></H1
><div class="htmltoc"><p><b>Contents:</B
><br><a class="sect1" href="#SEDAWK-APP-B-SECT-1" title="B.1 Command-Line Syntax">Command-Line Syntax</A
><br><a class="sect1" href="appb_02.htm" webstripperlinkwas="appb_02.htm" title="B.2 Language Summary for awk">Language Summary for awk</A
><br><a class="sect1" href="appb_03.htm" webstripperlinkwas="appb_03.htm" title="B.3 Command Summary for awk">Command Summary for awk</A
></P
><p></P
></DIV
><p class="para">This appendix describes the features of the awk scripting language.<a class="indexterm" name="B.AWK1"></A
></P
><div class="sect1"><h2 class="sect1"><a class="title" name="SEDAWK-APP-B-SECT-1">B.1 Command-Line Syntax</A
></H2
><p class="para">The syntax for invoking awk has two basic forms: <a class="indexterm" name="AUTOID-12130"></A
><a class="indexterm" name="AUTOID-12133"></A
><a class="indexterm" name="AUTOID-12135"></A
></P
><blockquote class="literallayout"><p class="literallayout"><kbd class="command">awk</KBD
> [<i class="option">-v</I
> <em class="emphasis">var</EM
>=<em class="emphasis">value</EM
>] [<i class="option">-F</I
><em class="emphasis">re</EM
>] [<i class="option">--</I
>] '<em class="emphasis">pattern</EM
> { <em class="emphasis">action</EM
> }' <em class="emphasis">var</EM
>=<em class="emphasis">value</EM
> <em class="emphasis">datafile(s)</EM
><br><kbd class="command">awk</KBD
> [<i class="option">-v</I
> <em class="emphasis">var</EM
>=<em class="emphasis">value</EM
>] [<i class="option">-F</I
><em class="emphasis">re</EM
>] <i class="option">-f</I
> <em class="emphasis">scriptfile</EM
> [<kbd class="command">--</KBD
>] <em class="emphasis">var</EM
>=<em class="emphasis">value</EM
> <em class="emphasis">datafile(s)</EM
></P
></BLOCKQUOTE
><p class="para">An awk command line consists of the command, the script and the input
filename.  Input is read from the file specified on the command line.
If there is no input file or &quot;-&quot; is specified, then standard input is
read.  The <i class="option">-F</I
> option sets the field separator
(<kbd class="command">FS</KBD
>) to <em class="emphasis">re</EM
>.</P
><p class="para">The <i class="option">-v</I
> option sets the variable
<em class="emphasis">var</EM
> to <em class="emphasis">value</EM
> before
the script is executed. This happens even before the
<kbd class="command">BEGIN</KBD
> procedure is run.  (See the discussion below on
command-line parameters.)</P
><p class="para">Following POSIX argument parsing conventions, the &quot;<i class="option">--</I
>&quot;
option marks the end of command-line options.  Using this option, for
instance, you could specify a <em class="emphasis">datafile</EM
> that
begins with &quot;-&quot;, which would otherwise be confused with a command-line
option.</P
><p class="para">You can specify a script consisting of
<em class="emphasis">pattern</EM
> and
<em class="emphasis">action</EM
> on the command line, surrounded by
single quotes.  Alternatively, you can place the script in a separate
file and specify the name of the <em class="emphasis">scriptfile</EM
>
on the command line with the <i class="option">-f</I
> option.</P
><p class="para">Parameters can be passed into awk by specifying them on the command
line after the script.  This includes setting system variables such as
<kbd class="command">FS</KBD
>, <kbd class="command">OFS</KBD
>, and
<kbd class="command">RS</KBD
>.  The <em class="emphasis">value</EM
> can be a
literal, a shell variable ($<em class="emphasis">var</EM
>) or the
result of a command
(`<em class="emphasis">cmd</EM
>`); it must be
quoted if it contains spaces or tabs.  Any number of parameters can be
specified.</P
><p class="para">Command-line parameters are not available until the first line of
input is read, and thus cannot be accessed in the
<kbd class="command">BEGIN</KBD
> procedure.  (Older implementations of awk and
nawk would process leading command-line assignments before running the
<kbd class="command">BEGIN</KBD
> procedure. This was contrary to how things
were documented in <cite class="citetitle">The AWK Programming Language</CITE
>,
which says that they are processed when awk would go to open them as
filenames, i.e., after the <kbd class="command">BEGIN</KBD
> procedure. The
Bell Labs awk was changed to correct this, and the
<i class="option">-v</I
> option was added at the same time, in early
1989.  It is now part of POSIX awk.)  Parameters are evaluated in the
order in which they appear on the command line up until a filename is
recognized.  Parameters appearing after that filename will be
available when the next filename is recognized.</P
><div class="sect2"><h3 class="sect2"><a class="title" name="SEDAWK-APP-B-SECT-1.1">B.1.1 Shell Wrapper for Invoking awk</A
></H3
><p class="para"><a class="indexterm" name="AUTOID-12196"></A
><a class="indexterm" name="AUTOID-12199"></A
>Typing a script at the system prompt is only practical for simple,
one-line scripts.  Any script that you might invoke as a command and
reuse can be put inside a shell script.  Using a shell script to
invoke awk makes the script easy for others to use.</P
><p class="para">You can put the command line that invokes awk in a file, giving it a
name that identifies what the script does.  Make that file executable
(using the <kbd class="command">chmod</KBD
> command) and put it in a directory
where local commands are kept.  The name of the shell script can be
typed on the command line to execute the awk script.  This is
preferred for easily used and reused scripts.</P
><p class="para"><a class="indexterm" name="AUTOID-12204"></A
><a class="indexterm" name="AUTOID-12207"></A
>On modern UNIX systems, including Linux, you can use the #! syntax
to create self-contained awk scripts:</P
><blockquote class="literallayout"><p class="literallayout"><code class="literal">#! /usr/bin/awk -f</CODE
><br><em class="emphasis">script</EM
></P
></BLOCKQUOTE
><p class="para">Awk parameters and the input filename can be specified on the command
line that invokes the shell script.  Note that the pathname to use is
system-dependent.</P
></DIV
></DIV
></DIV
><div class="htmlnav"><p></P
><hr align="LEFT" width="515" title="footer"><table width="515" border="0" cellspacing="0" cellpadding="0"><tr><td align="LEFT" valign="TOP" width="172"><a class="SECT1" href="appa_03.htm" webstripperlinkwas="appa_03.htm" title="A.3 Command Summary for sed"><img src="../gifs/txtpreva.gif" webstripperlinkwas="../gifs/txtpreva.gif" alt="Previous: A.3 Command Summary for sed" border="0"></A
></TD
><td align="CENTER" valign="TOP" width="171"><a class="book" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" title="sed &amp; awk"><img src="../gifs/txthome.gif" webstripperlinkwas="../gifs/txthome.gif" alt="sed &amp; awk" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172"><a class="SECT1" href="appb_02.htm" webstripperlinkwas="appb_02.htm" title="B.2 Language Summary for awk"><img src="../gifs/txtnexta.gif" webstripperlinkwas="../gifs/txtnexta.gif" alt="Next: B.2 Language Summary for awk" border="0"></A
></TD
></TR
><tr><td align="LEFT" valign="TOP" width="172">A.3 Command Summary for sed</TD
><td align="CENTER" valign="TOP" width="171"><a class="index" href="index/idx_0.htm" webstripperlinkwas="index/idx_0.htm" title="Book Index"><img src="../gifs/index.gif" webstripperlinkwas="../gifs/index.gif" alt="Book Index" border="0"></A
></TD
><td align="RIGHT" valign="TOP" width="172">B.2 Language Summary for awk</TD
></TR
></TABLE
><hr align="LEFT" width="515" title="footer"><img src="../gifs/smnavbar.gif" webstripperlinkwas="../gifs/smnavbar.gif" usemap="#map" border="0" alt="The UNIX CD Bookshelf Navigation"><map name="map"><area shape="RECT" coords="0,0,73,21" href="../index.html" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/index.html" alt="The UNIX CD Bookshelf"><area shape="RECT" coords="74,0,163,21" href="../upt/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/upt/index.htm" alt="UNIX Power Tools"><area shape="RECT" coords="164,0,257,21" href="../unixnut/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/unixnut/index.htm" alt="UNIX in a Nutshell"><area shape="RECT" coords="258,0,321,21" href="../vi/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/vi/index.htm" alt="Learning the vi Editor"><area shape="RECT" coords="322,0,378,21" href="index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/sedawk/index.htm" alt="sed &amp; awk"><area shape="RECT" coords="379,0,438,21" href="../ksh/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/ksh/index.htm" alt="Learning the Korn Shell"><area shape="RECT" coords="439,0,514,21" href="../lrnunix/index.htm" webstripperlinkwas="http://www.ms.itb.ac.id/buku/unix-bookshelf/lrnunix/index.htm" alt="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
