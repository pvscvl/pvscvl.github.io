<html><head><title>Constraints (XML in a Nutshell, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Elliotte Rusty Harold and W. Scott Means" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00292-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="XML in a Nutshell, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img src="gifs/smbanner.gif" usemap="#banner-map" border="0" alt="Book Home" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="XML in a Nutshell" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch20_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch20_05.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">20.4. Constraints</h2>


<p>In addition to defining the basic structures used in documents and
DTDs, XML 1.0 defines a list of rules regarding their usage. These
constraints put limits on various aspects of XML usage, and documents
cannot in fact be considered to be
"XML" unless they meet all of the
well-formedness constraints. Parsers are required to report
violations of these constraints, though only well-formedness
constraint violations require that processing of the document halt
completely. Namespace constraints are defined in <em class="emphasis">Namespaces
in XML</em>, not XML 1.0.
</p>


<a name="xmlnut2-CHP-20-SECT-4.1" /><div class="sect2">
<h3 class="sect2">20.4.1. Well-Formedness Constraints</h3>


<p>Well-formedness <a name="xmlnut2-IDXTERM-1904" />refers
<a name="xmlnut2-IDXTERM-1905" />to
an XML document's physical organization. Certain
lexical rules must be obeyed before an XML parser can consider a
document well-formed. These rules should not be confused with
validity constraints, which determine whether a particular document
is valid when parsed using the document structure rules contained in
its DTD. The Backus-Naur Form (BNF) grammar rules must also be
satisfied. The following sections contain all well-formedness
constraints recognized by XML Version 1.0 parsers, including actual
text from the 1.0 specification.
</p>

<a name="ch20-43-fm2xml" /><a name="IXT-20-240355" /><a name="IXT-20-240356" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>PEs in Internal Subset</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>In the <a name="IXT-20-240355" /> <a name="IXT-20-240356" />internal DTD subset, parameter entity
references can occur only where markup declarations can occur, not
within markup declarations. (This does not apply to references that
occur in external parameter entities or to the external subset.)
</p>


<h4 class="refsect1">Explanation</h4>


<p>It is only legal to use parameter entity references to build markup
declarations within the external DTD subset. In other words, within
the internal subset, parameter entities may only be used to include
complete markup declarations.
</p>

</div>

<a name="ch20-46-fm2xml" /><a name="IXT-20-240357" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>External Subset</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The <a name="IXT-20-240357" />external subset, if any,
must match production for <tt class="literal">extSubset</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>The <tt class="literal">extSubset</tt> production constrains what type of
declaration may be contained in the external subset. This constraint
generally means that the external subset of the DTD must only include
whole declarations or parameter entity references. See the
<tt class="literal">extSubset</tt> production in the EBNF grammar at the
end of this chapter for specific limitations.
</p>

</div>

<a name="ch20-49-fm2xml" /><a name="IXT-20-240358" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>PE Between Declarations</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The replacement text of a parameter entity reference in a
<tt class="literal">DeclSep</tt> must match the production
<tt class="literal">extSubsetDecl</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>The <a name="IXT-20-240358" />replacement text of parameter entities may
contain declarations that might not be allowed if the replacement
text appeared directly. Parameter entity references in the internal
subset cannot appear within declarations, but this rule does not
apply to declarations that have been included via parameter entities.
</p>

</div>

<a name="ch20-52-fm2xml" /><a name="IXT-20-240359" /><a name="IXT-20-240360" /><a name="IXT-20-240361" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Element Type Match</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The <tt class="literal">Name</tt> in an
<a name="IXT-20-240359" /> <a name="IXT-20-240360" />
<a name="IXT-20-240361" />element's
end-tag must match the element type in the start-tag.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Proper element nesting is strictly enforced, and every open tag must
be matched by a corresponding close tag. Of course empty elements do
not require and may not have a close tag.
</p>

</div>

<a name="ch20-55-fm2xml" /><a name="IXT-20-240362" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Unique Att Spec</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>No <a name="IXT-20-240362" />attribute name may appear more than once
in the same start-tag or empty- element tag.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Attribute names must be unique within a given element.</p>

</div>

<a name="ch20-58-fm2xml" /><a name="IXT-20-240363" /><a name="IXT-20-240364" /><a name="IXT-20-240365" /><a name="IXT-20-240366" /><a name="IXT-20-240367" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>No External Entity References</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Attribute <a name="IXT-20-240363" /> <a name="IXT-20-240364" />values <a name="IXT-20-240365" /> <a name="IXT-20-240366" /> <a name="IXT-20-240367" />cannot contain direct or indirect entity
references to external entities.
</p>


<h4 class="refsect1">Explanation</h4>


<p>XML parsers report an error when asked to replace references to
external parsed entities within attribute values.
</p>

</div>

<a name="ch20-61-fm2xml" /><a name="IXT-20-240368" /><a name="IXT-20-240369" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>No &lt; in Attribute Values</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The <a name="IXT-20-240368" /> <a name="IXT-20-240369" />replacement text of any entity referred
to directly or indirectly in an attribute value (other than
"<tt class="literal">&amp;lt;</tt>") must
not contain a <tt class="literal">&lt;</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>This restriction is meant to simplify the task of parsing XML data.
Since attribute values can't even appear to contain
element data, simple parsers need not track literal strings. Just by
recognizing <tt class="literal">&lt;</tt> and <tt class="literal">&gt;</tt>
characters, simple parsers can check for proper markup formation and
nesting.
</p>

</div>

<a name="ch20-64-fm2xml" /><a name="IXT-20-240370" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Legal Character</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Characters <a name="IXT-20-240370" />referred to using character references
must match the production for <tt class="literal">Char</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Any characters that the XML parser generates must be real characters.
A few character values in Unicode are not valid standalone
characters.
</p>

</div>

<a name="ch20-67-fm2xml" /><a name="IXT-20-240371" /><a name="IXT-20-240372" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Entity Declared</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>In a <a name="IXT-20-240371" />document
<a name="IXT-20-240372" />without any DTD, a
document with only an internal DTD subset which contains no parameter
entity references, or a document with
<tt class="literal">standalone='yes'</tt>, for an entity reference that
does not occur within the external subset or a parameter entity, the
<tt class="literal">Name</tt> given in the entity reference must match that
in an entity declaration that does not occur within the external
subset or a parameter entity, except that well-formed documents need
not declare any of the following entities: <tt class="literal">amp</tt>,
<tt class="literal">lt</tt>, <tt class="literal">gt</tt>,
<tt class="literal">apos</tt>, <tt class="literal">quot</tt>. The declaration of
a parameter entity must precede any reference to it. Similarly, the
declaration of a general entity must precede any reference to it
which appears in a default value in an attribute-list declaration.
Note that if entities are declared in the external subset or in
external parameter entities, a non-validating processor is not
obligated to read and process their declarations; for such documents,
the rule that an entity must be declared is a well-formedness
constraint only if <tt class="literal">standalone='yes'</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>This long constraint lists the only situations in which an entity
reference may appear without a corresponding entity declaration.
Since a nonvalidating parser is not obliged to read and parse the
external subset, the parser must give the document the benefit of the
doubt, if an entity could possibly have been declared.
</p>

</div>

<a name="ch20-70-fm2xml" /><a name="IXT-20-240373" /><a name="IXT-20-240374" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Parsed Entity</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>An <a name="IXT-20-240373" />entity
<a name="IXT-20-240374" />reference must
not contain the name of an unparsed entity. Unparsed entities may be
referred to only in attribute values declared to be of type
<tt class="literal">ENTITY</tt> or <tt class="literal">ENTITIES</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Since unparsed entities can't be parsed,
don't try to force the parser to parse them.
</p>

</div>

<a name="ch20-73-fm2xml" /><a name="IXT-20-240375" /><a name="IXT-20-240376" /><a name="IXT-20-240377" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>No Recursion</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>A <a name="IXT-20-240375" /> <a name="IXT-20-240376" /> <a name="IXT-20-240377" />parsed entity must not contain a
recursive reference to itself, either directly or indirectly.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Be careful how you structure your entities; make sure you
don't inadvertently create a circular reference:
</p>

<blockquote><pre class="code">&lt;!ENTITY a "&amp;b;"&gt;
&lt;!ENTITY b "&amp;c;"&gt;
&lt;!ENTITY c "&amp;a;"&gt; &lt;!--wrong!--&gt;</pre></blockquote>

</div>

<a name="ch20-76-fm2xml" /><a name="IXT-20-240378" /><a name="IXTR3-214" /><a name="IXTR3-215" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>In DTD</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Parameter entity references may only appear in the DTD.</p>


<h4 class="refsect1">Explanation</h4>


<p>This <a name="IXT-20-240378" />constraint is self evident because the
<tt class="literal">%</tt> character has no significance outside of the
DTD. Therefore, it is perfectly legal to have an element like this in
your document:
</p>

<blockquote><pre class="code">&lt;ok&gt;%noproblem;&lt;/ok&gt;</pre></blockquote>


<p>The text <tt class="literal">%noproblem;</tt> is passed on by the parser
without generating <a name="IXTR3-214" />an <a name="IXTR3-215" />error. 
</p>
</div>

</div>
<a name="xmlnut2-CHP-20-SECT-4.2" /><div class="sect2">
<h3 class="sect2">20.4.2. Validity Constraints</h3>


<p>The <a name="xmlnut2-IDXTERM-1932" />
<a name="xmlnut2-IDXTERM-1933" />following sections contain all
validity constraints that are enforced by a validating parser. Each
includes actual text from the XML 1.0 specification and a short
explanation of what the constraint actually means.
</p>


<a name="ch20-80-fm2xml" /><a name="IXT-20-240379" /><a name="IXT-20-240380" /><a name="IXT-20-240381" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Root Element Type</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The <a name="IXT-20-240379" /><tt class="literal">Name</tt>
<a name="IXT-20-240380" />in the
<a name="IXT-20-240381" />document type declaration must match
the element type of the root element.
</p>


<h4 class="refsect1">Explanation</h4>


<p>The name provided in the <tt class="literal">!DOCTYPE</tt> declaration
identifies the root element's name and must match
the name of the root element in the document.
</p>

</div>

<a name="ch20-55010" /><a name="IXT-20-240382" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Proper Declaration/PE Nesting</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Parameter <a name="IXT-20-240382" />entity replacement text must be
properly nested with markup declarations. That is to say, if either
the first character or the last character of a markup declaration is
contained in the replacement text for a parameter entity reference,
both must be contained in the same replacement text.
</p>


<h4 class="refsect1">Explanation</h4>


<p>This constraint means you can't create a parameter
entity that completes one DTD declaration and begins another; the
following XML fragment would violate this constraint:
</p>

<blockquote><pre class="code">&lt;!ENTITY % finish_it "&gt;"&gt;
&lt;!ENTITY % bad "won't work" %finish_it; &lt;!--wrong!--&gt;</pre></blockquote>

</div>

<a name="ch20-85-fm2xml" /><a name="IXT-20-240383" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Standalone Document Declaration</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The <a name="IXT-20-240383" />standalone document declaration
must have the value
"<tt class="literal">no</tt>" if any
external markup declarations contain declarations of: attributes with
default values, if elements to which these attributes apply appear in
the document without specifications of values for these attributes,
or entities (other than <tt class="literal">amp</tt>,
<tt class="literal">lt</tt>, <tt class="literal">gt</tt>,
<tt class="literal">apos</tt>, <tt class="literal">quot</tt>), if references to
those entities appear in the document, or attributes with values
subject to normalization, where the attribute appears in the document
with a value which will change as a result of normalization, or
element types with element content, if whitespace occurs directly
within any instance of those types.
</p>


<h4 class="refsect1">Explanation</h4>


<p>This laundry list of potential standalone flag violations can be read
to mean, "If you have an external subset in your
DTD, ensure that your document doesn't depend on
anything in it if you say <tt class="literal">standalone='yes'</tt> in your
XML declaration." A more succinct interpretation
would be, "If your document has an external DTD
subset, just set <tt class="literal">standalone</tt> to
<tt class="literal">no</tt>."
</p>

</div>

<a name="ch20-88-fm2xml" /><a name="IXT-20-240384" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Element Valid</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>An <a name="IXT-20-240384" />element is valid if there is a
declaration matching <tt class="literal">elementdecl</tt> where the Name
matches the element type, and one of the following holds: The
declaration matches <tt class="literal">EMPTY</tt> and the element has no
content. The declaration matches children and the sequence of child
elements belongs to the language generated by the regular expression
in the content model, with optional whitespace (characters matching
the nonterminal <tt class="literal">S</tt>) between the start-tag and the
first child element, between child elements, or between the last
child element and the end-tag. Note that a CDATA section containing
only whitespace does not match the nonterminal <tt class="literal">S</tt>,
and hence cannot appear in these positions. The declaration matches
<tt class="literal">Mixed</tt> and the content consists of character data
and child elements whose types match names in the content model. The
declaration matches <tt class="literal">ANY</tt>, and the types of any
child elements have been declared.
</p>


<h4 class="refsect1">Explanation</h4>


<p>If a document includes a DTD with element declarations, make sure the
actual elements in the document match the rules set down in the DTD.
</p>

</div>

<a name="ch20-91-fm2xml" /><a name="IXT-20-240385" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Attribute Value Type</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The<a name="IXT-20-240385" /> attribute must have been
declared; the value must be of the type declared for it.
</p>


<h4 class="refsect1">Explanation</h4>


<p>All attributes used on elements in valid XML documents must have been
declared in the DTD, including the <tt class="literal">xml:space</tt> and
<tt class="literal">xml:lang</tt> attributes. If you declare an attribute
for an element, make sure that every instance of that attribute has a
value conforming to the type specified. (For attribute types, see
<a href="ch20_03.htm">Attribute List Declaration</a>.)
</p>

</div>

<a name="ch20-94-fm2xml" /><a name="IXT-20-240386" /><a name="IXT-20-240387" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Unique Element Type Declaration</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>No element type may be declared more than once.</p>


<h4 class="refsect1">Explanation</h4>


<p>Unlike <a name="IXT-20-240386" />
<a name="IXT-20-240387" />entity and attribute declarations, only
one declaration may exist for a particular element type.
</p>

</div>

<a name="ch20-97-fm2xml" /><a name="IXT-20-240388" /><a name="IXT-20-240389" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Proper Group/PE Nesting</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Parameter <a name="IXT-20-240388" />entity replacement text must be properly
nested with parenthesized groups. That is to say, if either of the
opening or closing parentheses in a <tt class="literal">choice</tt>,
<tt class="literal">seq</tt>, or <tt class="literal">Mixed</tt> construct is
contained in the replacement text for a parameter entity, both must
be contained in the same replacement text.
</p>

<p>For interoperability, if a parameter entity reference appears in a
<tt class="literal">choice</tt>, <tt class="literal">seq</tt>, or
<tt class="literal">Mixed</tt> construct, its replacement text should
contain at least one non-blank character, and neither the first nor
last non-blank character of the replacement text should be a
connector (| or ,).
</p>


<h4 class="refsect1">Explanation</h4>


<p>This constraint restricts the way parameter entities can be used to
construct <a name="IXT-20-240389" />element
declarations. It is similar to the <a href="ch20_04.htm">Proper Declaration/PE Nesting</a>
constraint in that parameter entities may not be used to complete or
open new parenthesized expressions. It prevents the XML author from
hiding significant syntax elements inside parameter entities.
</p>

</div>

<a name="ch20-100-fm2xml" /><a name="IXT-20-240390" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>No Duplicate Types</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The same <a name="IXT-20-240390" />name must not appear more than once in
a single mixed-content declaration.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Don't list the same element type name more than once
in the same mixed-content declaration.
</p>

</div>

<a name="ch20-103-fm2xml" /><a name="IXT-20-240391" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>ID</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p><a name="IXT-20-240391" />Values of type <tt class="literal">ID</tt>
must match the <tt class="literal">Name</tt> production. A name must not
appear more than once in an XML document as a value of this type;
i.e., ID values must uniquely identify the elements which bear them.
</p>


<h4 class="refsect1">Explanation</h4>


<p>No two attribute values for attributes declared as type
<tt class="literal">ID</tt> can have the same value. This constraint is not
restricted by element type, but it is global across the entire
document.
</p>

</div>

<a name="ch20-106-fm2xml" /><a name="IXT-20-240392" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>One ID per Element Type</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>No <a name="IXT-20-240392" />element type may have more
than one <tt class="literal">ID</tt> attribute specified.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Each element can have at most one <tt class="literal">ID</tt> type
attribute.
</p>

</div>

<a name="ch20-109-fm2xml" /><a name="IXT-20-240393" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>ID Attribute Default</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>An <tt class="literal">ID</tt> <a name="IXT-20-240393" />attribute
must have a declared default of <tt class="literal">#IMPLIED</tt> or
<tt class="literal">#REQUIRED</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>To avoid potential duplication, you can't declare an
<tt class="literal">ID</tt> attribute to be <tt class="literal">#FIXED</tt> or
provide a default value for it.
</p>

</div>

<a name="ch20-112-fm2xml" /><a name="IXT-20-240394" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>IDREF</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Values <a name="IXT-20-240394" />of type <tt class="literal">IDREF</tt> must
match the <tt class="literal">Name</tt> production, and values of type
<tt class="literal">IDREFS</tt> must match <tt class="literal">Names</tt>; each
<tt class="literal">Name</tt> must match the value of an
<tt class="literal">ID</tt> attribute on some element in the XML document;
i.e., <tt class="literal">IDREF</tt> values must match the value of some
<tt class="literal">ID</tt> attribute.
</p>


<h4 class="refsect1">Explanation</h4>


<p><tt class="literal">ID</tt> references must refer to actual
<tt class="literal">ID</tt> attributes that exist within the document.
</p>

</div>

<a name="ch20-115-fm2xml" /><a name="IXT-20-240395" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Entity Name</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Values <a name="IXT-20-240395" />of type <tt class="literal">ENTITY</tt> must
match the <tt class="literal">Name</tt> production, and values of type
<tt class="literal">ENTITIES</tt> must match <tt class="literal">Names</tt>; each
<tt class="literal">Name</tt> must match the name of an unparsed entity
declared in the DTD.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Attributes declared to contain entity references must contain
references to unparsed entities declared in the DTD.
</p>

</div>

<a name="ch20-118-fm2xml" /><a name="IXT-20-240396" /><a name="IXT-20-240397" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Name Token</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Values of <a name="IXT-20-240396" />type <a name="IXT-20-240397" /><tt class="literal">NMTOKEN</tt> must match
the <tt class="literal">Nmtoken</tt> production; values of type
<tt class="literal">NMTOKENS</tt> must match <tt class="literal">Nmtokens</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>If an attribute is declared to contain a name or list of names, the
values must be legal XML name tokens.
</p>

</div>

<a name="ch20-121-fm2xml" /><a name="IXT-20-240398" /><a name="IXT-20-240399" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Notation Attributes</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Values
<a name="IXT-20-240398" />
<a name="IXT-20-240399" />of this
type must match one of the notation names included in the
declaration; all notation names in the declaration must be declared.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Attributes that must contain notation names must contain names that
reference notations declared in the DTD.
</p>

</div>

<a name="ch20-124-fm2xml" /><a name="IXT-20-240400" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>One Notation per Element Type</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>No <a name="IXT-20-240400" />element type may have more than one
<tt class="literal">NOTATION</tt> attribute specified.
</p>


<h4 class="refsect1">Explanation</h4>


<p>A given element can have only one attribute declared with the
<tt class="literal">NOTATION</tt> attribute type. This constraint is
provided for backward compatibility with SGML.
</p>

</div>

<a name="ch20-127-fm2xml" /><a name="IXT-20-240401" /><a name="IXT-20-240402" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>No Notation on Empty Element</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p><a name="IXT-20-240401" />
<a name="IXT-20-240402" />For
compatibility, an attribute of type <tt class="literal">NOTATION</tt> must
not be declared on an element declared <tt class="literal">EMPTY</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Empty elements cannot have <tt class="literal">NOTATION</tt> attributes in
order to maintain compatibility with SGML.
</p>

</div>

<a name="ch20-130-fm2xml" /><a name="IXT-20-240403" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Enumeration</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Values of this type must match one of the <tt class="literal">Nmtoken</tt>
tokens in the declaration.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Assigning a <a name="IXT-20-240403" />value to an enumerated type attribute that
isn't listed in the enumeration is illegal in the
DTD.
</p>

</div>

<a name="ch20-133-fm2xml" /><a name="IXT-20-240404" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Required Attribute</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>If the <a name="IXT-20-240404" />default declaration is the keyword
<tt class="literal">#REQUIRED</tt>, then the attribute must be specified
for all elements of the type in the attribute-list declaration.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Required attributes must appear in the document and have a value
assigned to them if they are declared as <tt class="literal">#REQUIRED</tt>
in the DTD.
</p>

</div>

<a name="ch20-136-fm2xml" /><a name="IXT-20-240405" /><a name="IXT-20-240406" /><a name="IXT-20-240407" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Attribute Default Legal</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The <a name="IXT-20-240405" />
<a name="IXT-20-240406" />
<a name="IXT-20-240407" />declared default value must meet the
lexical constraints of the declared attribute type.
</p>


<h4 class="refsect1">Explanation</h4>


<p>If you provide a default attribute value, it must obey the same rules
that apply to a normal attribute value within the document.
</p>

</div>

<a name="ch20-139-fm2xml" /><a name="IXT-20-240408" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Fixed Attribute Default</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>If an <a name="IXT-20-240408" />attribute has a default value declared
with the <tt class="literal">#FIXED</tt> keyword, instances of that
attribute must match the default value.
</p>


<h4 class="refsect1">Explanation</h4>


<p>If you choose to provide an explicit value for a
<tt class="literal">#FIXED</tt> attribute in your document, it must match
the default value given in the attribute declaration.
</p>

</div>

<a name="ch20-142-fm2xml" /><a name="IXT-20-240409" /><a name="IXT-20-240410" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Proper Conditional Section/PE Nesting</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>If <a name="IXT-20-240409" />any <a name="IXT-20-240410" />of the
"<tt class="literal">&lt;![</tt>",
"<tt class="literal">[</tt>", or
"<tt class="literal">]]&gt;</tt>" of a
conditional section is contained in the replacement text for a
parameter entity reference, all of them must be contained in the same
replacement text.
</p>


<h4 class="refsect1">Explanation</h4>


<p>If you use a parameter entity to contain the beginning of a
conditional section, the parameter entity must also contain the end
of the section.
</p>

</div>

<a name="ch20-145-fm2xml" /><a name="IXT-20-240411" /><a name="IXT-20-240412" /><a name="IXT-20-240413" /><a name="IXT-20-240414" /><a name="IXT-20-240415" /><a name="IXT-20-240416" /><a name="IXT-20-240417" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Entity Declared</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>In a <a name="IXT-20-240411" />document
<a name="IXT-20-240412" />with
an external subset or external parameter entities with
"<tt class="literal">standalone='no'"</tt>, the
<tt class="literal">Name</tt> given in the entity reference must match that
in an entity declaration. For interoperability, valid documents
should declare the entities <a name="IXT-20-240413" /><tt class="literal">amp</tt>,
<a name="IXT-20-240414" /><tt class="literal">lt</tt>,
<a name="IXT-20-240415" /><tt class="literal">gt</tt>,
<a name="IXT-20-240416" /><tt class="literal">apos</tt>,
<a name="IXT-20-240417" /><tt class="literal">quot</tt>,
in the form specified in 4.6 Predefined Entities. The declaration of
a parameter entity must precede any reference to it. Similarly, the
declaration of a general entity must precede any attribute-list
declaration containing a default value with a direct or indirect
reference to that general entity.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Parameter and general entity declarations must precede any references
to these entities. All entity references must refer to previously
declared entities. The specification also states that declaring the
five predefined general entities (<tt class="literal">amp</tt>,
<tt class="literal">lt</tt>, <tt class="literal">gt</tt>,
<tt class="literal">apos</tt>, and <tt class="literal">quot</tt>) is a good idea.
In reality, declaring the predefined general entities adds
unnecessary complexity to most applications.
</p>

</div>

<a name="ch20-148-fm2xml" /><a name="IXT-20-240418" /><a name="IXT-20-240419" /><a name="IXT-20-240420" /><a name="IXT-20-240421" /><a name="IXT-20-240422" /><a name="IXT-20-240423" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Notation Declared</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The Name must match the declared name of a notation.</p>


<h4 class="refsect1">Explanation</h4>


<p>External <a name="IXT-20-240418" /> <a name="IXT-20-240419" /> <a name="IXT-20-240420" />
<a name="IXT-20-240421" />unparsed entities
<a name="IXT-20-240422" />
<a name="IXT-20-240423" />must use a notation that is
declared in the document.
</p>

</div>

<a name="ch20-151-fm2xml" /><a name="IXT-20-240424" /><a name="IXT-20-240425" /><a name="IXTR3-216" /><a name="IXTR3-217" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Unique Notation Name</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Only <a name="IXT-20-240424" />
<a name="IXT-20-240425" />one notation declaration can
declare a given <tt class="literal">Name</tt>.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Declaring two notations with the same name is <a name="IXTR3-216" /> <a name="IXTR3-217" />illegal.
</p>
</div>
</div>
<a name="xmlnut2-CHP-20-SECT-4.3" /><div class="sect2">
<h3 class="sect2">20.4.3. Namespace Constraints</h3>


<p>The <a name="IXT-20-240426" />
<a name="IXT-20-240427" />following
list contains all constraints defined by the namespaces
specification. Each includes actual text from the
<em class="emphasis">Namespaces in XML</em><a name="IXT-20-240428" /> specification and a short
explanation of what the constraint actually means.
</p>

<a name="ch20-155-fm2xml" /><a name="IXT-20-240429" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Leading "XML"</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>Prefixes <a name="IXT-20-240429" />beginning with the
three-letter sequence x, m, l, in any case combination, are reserved
for use by XML and XML-related specifications.
</p>


<h4 class="refsect1">Explanation</h4>


<p>Just like most other names in XML, namespace prefixes names
can't begin with <tt class="literal">xml</tt> unless
they've been defined by the W3C.
</p>

</div>

<a name="ch20-158-fm2xml" /><div class="refentry"><table width="515" border="0" cellpadding="5"><tr><td align="left"><font size="+1"><b>Prefix Declared</b></font></td><td align="right"><i></i></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black" /><table width="515" border="0" cellpadding="5"><tr><td align="left" /><td align="right" /></tr></table>
<h4 class="refsect1">Text from specification</h4>


<p>The namespace prefix, unless it is <tt class="literal">xml</tt> or
<tt class="literal">xmlns</tt>, must have been declared in a namespace
declaration attribute in either the start-tag of the element where
the prefix is used or in an ancestor element (i.e., an element in
whose content the prefixed markup occurs). The prefix
<tt class="literal">xml</tt> is by definition bound to the namespace name
<tt class="literal">http://www.w3.org/XML/1998/namespace</tt>. The prefix
<tt class="literal">xmlns</tt> is used only for namespace bindings and is
not itself bound to any namespace name.
</p>


<h4 class="refsect1">Explanation</h4>


<p>You have to declare all namespaces before you can use them. The
prefixes have no meaning without the declarations, so using a prefix
without a declaration context is an error. The namespace with the
prefix <tt class="literal">xml</tt> is permanently defined, so there is no
need to redeclare it. The <tt class="literal">xmlns</tt> prefix used by
namespace declarations is not considered a namespace prefix itself,
and no declaration is needed for it.
</p>
</div>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch20_03.htm"><img src="../gifs/txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img src="../gifs/txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch20_05.htm"><img src="../gifs/txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">20.3. XML Syntax</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img src="../gifs/index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">20.5. XML Document Grammar</td></tr></table></div>
<hr width="684" align="left" />

<img src="../gifs/navbar.gif" usemap="#library-map" border="0" alt="Library Navigation Links" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="0,0,85,93" href="../index.htm"><area shape="rect" coords="85,0,180,98" href="../sax2/index.htm"><area shape="rect" coords="182,-1,261,100" href="index.htm"><area shape="rect" coords="263,1,384,96" href="../jxml/index.htm"><area shape="rect" coords="386,1,463,100" href="../jxslt/index.htm"><area shape="rect" coords="466,1,533,112" href="../xslt/index.htm"><area shape="rect" coords="535,-1,610,108" href="../schema/index.htm"><area shape="rect" coords="613,1,696,121" href="../pxml/index.htm">
</map>

</body></html>