<html><head><title>Invoking the document() Function (XSLT)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Doug Tidwell" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596000537L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="XSLT" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="XSL" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch07_02.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"></td><td align="right" valign="top" width="228"><a href="ch07_04.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>



    <h2 class="sect1">7.3. Invoking the document() Function</h2>
    <p>
<a name="INDEX-588" />

In our previous stylesheet, we used the <tt class="literal">document()</tt> function to select some number of nodes from the original source document (our list of purchase orders), then open those files. There are a number of ways to invoke the <tt class="literal">document()</tt> function; we'll discuss them briefly here. </p>
    <p>The most common way to use the <tt class="literal">document()</tt> function is as we just did. We use an XPath expression to describe a node-set; the <tt class="literal">document()</tt> function takes each node in the node-set, converts it to a string, then uses that string as a URI. So, when we passed a node-set containing the <tt class="literal">filename</tt> attributes in the list of purchase orders, each one is used as a URI. If those URIs are relative references (i.e., they don't begin with a protocol like <tt class="literal">http</tt>), the base URI of the stylesheet is used as the base URI for the reference.</p>
    <p>If the <tt class="literal">document()</tt> function has two arguments, the second must be a node-set. The first argument is processed as just described, with the difference that the base URI of the first node in the node-set is used as the base URI for any relative URIs. That combination isn't used often, but it's there if you need it.</p>
<a name="INDEX-589" />
<a name="INDEX-590" />
    <blockquote><b>NOTE:</b> 

Every node in the XPath source tree is associated with a <em class="emphasis">base URI</em>. When using the <tt class="literal">document()</tt> function, the base URI is important for resolving references to various resources (typically specified with relative links in a file opened with the <tt class="literal">document()</tt> function. </p>
      <p>If a given node is an element or processing instruction node, and that node occurs in an external entity, then the base URI for that node is the base URI of the external entity. If an element or processing instruction node does not occur in an external entity, then its base URI is the base URI of the document in which it appears. The base URI of a document node is the base URI of the document itself, and the base URI of an attribute, comment, namespace, or text node is the base URI of that node's parent. </p>
    </blockquote>
    <p>You can also pass a string or any other XPath datatype to the <tt class="literal">document()</tt> function. If we wanted to open a particular resource, we could simply pass the name of the resource:</p>
    <blockquote><pre class="code">
document('http://www.ibm.com/pricelist.xml')</pre></blockquote>
    <p>This action would open this particular resource and process it. Be aware that XSLT processors are required to return an empty node-set if a resource can't be found, but they aren't required to signal an error. XSLT processors also don't have to support any particular protocols (<tt class="literal">http</tt>, <tt class="literal">ftp</tt>, etc.); you have to check the documentation of your XSLT processor to see what protocols are and aren't supported. </p>
    <p>A special case occurs when you pass an empty string to the <tt class="literal">document()</tt> function. As we've discussed the various combinations of arguments that can be passed to the function, we've gone over the rules for resolving URIs. When we call <tt class="literal">document('')</tt>, the XSLT processor parses the current stylesheet and returns a single node, the root node of the stylesheet itself. This technique is very useful for processing lookup tables in a stylesheet, something we'll discuss later in this chapter.


</p>
  

<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch07_02.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch07_04.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">7.2. The document() Function</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">7.4. More Sophisticated Techniques</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="0,0,85,93" href="../index.htm"><area shape="rect" coords="85,0,180,98" href="../sax2/index.htm"><area shape="rect" coords="182,-1,261,100" href="../xmlnut/index.htm"><area shape="rect" coords="263,1,384,96" href="../jxml/index.htm"><area shape="rect" coords="386,1,463,100" href="../jxslt/index.htm"><area shape="rect" coords="466,1,533,112" href="index.htm"><area shape="rect" coords="535,-1,610,108" href="../schema/index.htm"><area shape="rect" coords="613,1,696,121" href="../pxml/index.htm">
</map>

</body></html>
