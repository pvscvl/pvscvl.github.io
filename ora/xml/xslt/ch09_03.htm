<html><head><title>Tutorial Layout (XSLT)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Doug Tidwell" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596000537L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="XSLT" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.htm" alt="XSL" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.htm" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch09_02.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"></td><td align="right" valign="top" width="228"><a href="ch09_04.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>



    <h2 class="sect1">9.3. Tutorial Layout</h2>
    <p>
<a name="INDEX-744" />
<a name="INDEX-745" />
<a name="INDEX-746" />


Before we talk about the details of the XML document design and the XSLT source code, we'll review the actual HTML, zip, and PDF files we need to create. One advantage we had in this project is that we didn't have any existing XML documents to contend with; this advantage gave us complete freedom over the XML document design. </p>
    <div class="sect2">
      <h3 class="sect2">9.3.1. Menu Panel</h3>
      <p>
<a name="INDEX-747" />

The menu panel is the first HTML document a user sees. It looks like
      <a href="ch09_03.htm">Figure 9-1</a>.</p>
      <a name="xslt-CHP-9-FIG-1" /><div class="figure"><img height="323" alt="Figure 9-1" src="figs/xslt.0901.gif" width="481" /></div><h4 class="objtitle">Figure 9-1. Toot-O-Matic menu panel</h4>
      <p>In this example, the string "Building tutorials with the Toot-O-Matic" and all section titles are JPEG graphics created with our stylesheets and extensions. If you mouseover a section title, its background color changes, as shown in <a href="ch09_03.htm">Figure 9-2</a>.</p>
      <a name="xslt-CHP-9-FIG-2" /><div class="figure"><img height="114" alt="Figure 9-2" src="figs/xslt.0902.gif" width="248" /></div><h4 class="objtitle">Figure 9-2. Mouseover effect for section titles</h4>


      <p>
<a name="INDEX-748" />
<a name="INDEX-749" />

In this sample, notice that the text of the menu item appears as a tooltip. This appearance is useful for sight-impaired users, and is consistent with the Web Accessibility Guidelines defined by the W3C. </p>
      <p>A variety of navigation controls appear on every panel in a tutorial. The navigation bar contains items such as "Main menu," "Section menu," and "Feedback." Although some items are disabled (if you're already on the Main menu, the "Main menu" item isn't active, for example), they appear on every panel of the tutorial. There are also icons for viewing the tutorial in alternate formats, as <a href="ch09_03.htm">Figure 9-3</a> demonstrates.</p>
      <a name="xslt-CHP-9-FIG-3" /><div class="figure"><img height="30" alt="Figure 9-3" src="figs/xslt.0903.gif" width="164" /></div><h4 class="objtitle">Figure 9-3. Icons for alternate tutorial forms</h4>
      <p>
<a name="INDEX-750" />
<a name="INDEX-751" />
<a name="INDEX-752" />


From left to right, these icons allow users to download a zip file that contains all files necessary to run the tutorial, a letter-sized PDF file, an A4-sized PDF file, and email a note to a friend, recommending this tutorial. All icons appear on every panel in the tutorial, and their associated links are generated by the Toot-O-Matic. </p>
      <p>Each panel has a masthead and footer, which are defined by corporate standards. They are generated by named templates cleverly named <tt class="literal">masthead</tt> and <tt class="literal">footer</tt>. As corporate standards are updated, we simply change those templates to change the look and feel of the tutorial panel. </p>
    </div>
    <div class="sect2">
      <h3 class="sect2">9.3.2. Individual Panels</h3>
    
      <p>Most HTML files that make up a complete tutorial use this format. Notice that the panel contains the text <tt class="literal">page 1 of 6</tt>; we generate this text with XPath expressions. The <tt class="literal">1</tt> is generated by the <tt class="literal">position()</tt> function, and the <tt class="literal">6</tt> is generated by the <tt class="literal">count()</tt> function. Each panel's navigation bar also contains links to the Main menu panel and the Section menu panel. An individual panel looks like <a href="ch09_03.htm">Figure 9-4</a>.</p> 
<a name="xslt-CHP-9-FIG-4" /><div class="figure"><img height="359" alt="Figure 9-4" src="figs/xslt.0904.gif" width="481" /></div><h4 class="objtitle">Figure 9-4. An individual tutorial panel</h4>
    </div>
    <div class="sect2">
      <h3 class="sect2">9.3.3. Section Menu</h3>
      <p>
<a name="INDEX-753" />

If you click on the "Section menu" item while on any panel in a tutorial, you'll see a listing similar to <a href="ch09_03.htm">Figure 9-5</a>.</p>
      <a name="xslt-CHP-9-FIG-5" /><div class="figure"><img height="299" alt="Figure 9-5" src="figs/xslt.0905.gif" width="481" /></div><h4 class="objtitle">Figure 9-5. A section menu</h4>
      <p>You can click on the title of any panel to go directly to it. We generate the panel titles with a <tt class="literal">&lt;xsl:for-each select="panel/title"&gt;</tt> element. We'll discuss how we generate the links between panels soon. </p>
    </div>
    <div class="sect2">
      <h3 class="sect2">9.3.4. Feedback Panel</h3>
      <p>
<a name="INDEX-754" />

The Toot-O-Matic generates a Feedback panel automatically. The Feedback panel contains an HTML form that lets readers send in their comments on the tutorial. Code on the server takes reader comments and stores them in a database automatically. <a href="ch09_03.htm">Figure 9-6</a> shows what the generated Feedback panel looks like.</p>
      <a name="xslt-CHP-9-FIG-6" /><div class="figure"><img height="373" alt="Figure 9-6" src="figs/xslt.0906.gif" width="481" /></div><h4 class="objtitle">Figure 9-6. A typical Feedback panel</h4>
      <p>The XML document identifies one panel as the Feedback panel. The Feedback button on the navigation bar of every HTML file points to the HTML file with the feedback form. Again, all of these cross-references are generated automatically through the magic of XSLT and XPath. </p>
    </div>
    <div class="sect2">
      <h3 class="sect2">9.3.5. Email Panel</h3>
      <p>
<a name="INDEX-755" />

Another feature of our tutorials is that you can email the URL of the
      tutorial to a friend. Clicking the "e-mail it!"
      icon on any panel displays a new browser window as shown in
      <a href="ch09_03.htm">Figure 9-7</a>.</p>
      <a name="xslt-CHP-9-FIG-7" /><div class="figure"><img height="355" alt="Figure 9-7" src="figs/xslt.0907.gif" width="481" /></div><h4 class="objtitle">Figure 9-7. The email panel</h4>
      <p>In this example, the text beneath the title of the tutorial is derived from the <tt class="literal">abstract</tt> attribute of the <tt class="literal">&lt;tutorial&gt;</tt> element.
<a name="INDEX-756" />

</p>
    </div>
    <div class="sect2">
      <h3 class="sect2">9.3.6. Zip File</h3>
      <p>
<a name="INDEX-757" />

To help readers who have either occasional or expensive web access, we build a zip file that contains everything they need to use the tutorial on their machines. The contents include all generated HTML files, all of the standard graphics used in the header and footer, and any referenced graphics from the tutorial itself. </p>
    </div>
    <div class="sect2">
      <h3 class="sect2">9.3.7. PDF Files</h3>
      <p>
<a name="INDEX-758" />
<a name="INDEX-759" />
<a name="INDEX-760" />

For readers who want to print out the tutorial and read it offline, we
      produce two PDF versions of the tutorial, one for letter-sized
      paper, and one for A4-sized paper. Although we could provide an
      HTML file that simply contains the HTML rendering of all the
      pages of the tutorial, we want higher-quality printable
      output. The first  page of the tutorial,
      shown in <a href="ch09_03.htm">Figure 9-8</a>, features the title of the tutorial and a table of contents.</p>
      <a name="xslt-CHP-9-FIG-8" /><div class="figure"><img height="267" alt="Figure 9-8" src="figs/xslt.0908.gif" width="481" /></div><h4 class="objtitle">Figure 9-8. First page of the tutorial PDF file</h4>
      <p>In the table of contents, both the section titles and the page numbers are hyperlinks. If you view the PDF file online, you can click on those items and go directly to the various parts of the tutorial. Even if you read a printout of the PDF file, the page numbers are still an important navigational tool. Cross-references between panels in the tutorial are similarly converted to hyperlinks and printable page numbers. Best of all, any hyperlinks to web sites are also converted to hyperlinks. If your machine is connected, and you have a recent version of the Adobe Acrobat Reader, you can click on the web site and go directly to it.</p>
      <p>Pages in the body of the tutorial feature the text and
      illustrations of each panel, with a horizontal line between
      panels. The first panel of each section starts on a new
      page. <a href="ch09_03.htm">Figure 9-9</a> shows the layout of an individual panel in the PDF file.</p>
      <a name="xslt-CHP-9-FIG-9" /><div class="figure"><img height="243" alt="Figure 9-9" src="figs/xslt.0909.gif" width="441" /></div><h4 class="objtitle">Figure 9-9. PDF layout for an individual panel</h4>


      <p>
<a name="INDEX-761" />
<a name="INDEX-762" />

To accommodate our worldwide audience, we create letter-sized and A4-sized versions of the PDF file. We use the same stylesheet for each PDF file; we simply change the page dimensions and let the Formatting Objects to PDF (FOP) tool generate the line, column, and page breaks for us. We are responsible for creating the formatting objects the FOP tool needs to do its work.

<a name="INDEX-763" />
<a name="INDEX-764" />
<a name="INDEX-765" />
<a name="INDEX-766" />



</p>
    </div>
  

<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch09_02.htm"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.htm"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch09_04.htm"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">9.2. Design Goals</td><td align="center" valign="top" width="228"><a href="index/index.htm"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">9.4. XML Document Design</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><p><font size="-1"><a href="copyrght.htm">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="0,0,85,93" href="../index.htm"><area shape="rect" coords="85,0,180,98" href="../sax2/index.htm"><area shape="rect" coords="182,-1,261,100" href="../xmlnut/index.htm"><area shape="rect" coords="263,1,384,96" href="../jxml/index.htm"><area shape="rect" coords="386,1,463,100" href="../jxslt/index.htm"><area shape="rect" coords="466,1,533,112" href="index.htm"><area shape="rect" coords="535,-1,610,108" href="../schema/index.htm"><area shape="rect" coords="613,1,696,121" href="../pxml/index.htm">
</map>

</body></html>